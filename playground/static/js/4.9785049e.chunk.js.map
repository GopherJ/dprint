{"version":3,"sources":["../node_modules/monaco-editor/esm/vs/language/typescript/monaco.contribution.js","../node_modules/monaco-editor/esm/vs/language/css/monaco.contribution.js","../node_modules/monaco-editor/esm/vs/language/json/monaco.contribution.js","../node_modules/monaco-editor/esm/vs/language/html/monaco.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/_.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/bat/bat.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/coffee/coffee.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/cpp/cpp.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/csharp/csharp.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/csp/csp.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/css/css.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/dockerfile/dockerfile.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/fsharp/fsharp.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/go/go.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/handlebars/handlebars.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/html/html.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/ini/ini.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/java/java.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/javascript/javascript.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/kotlin/kotlin.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/less/less.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/lua/lua.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/markdown/markdown.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/msdax/msdax.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/mysql/mysql.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/objective-c/objective-c.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/pascal/pascal.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/pgsql/pgsql.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/php/php.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/postiats/postiats.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/powerquery/powerquery.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/powershell/powershell.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/pug/pug.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/python/python.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/r/r.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/razor/razor.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/redis/redis.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/redshift/redshift.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/ruby/ruby.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/rust/rust.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/sb/sb.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/scss/scss.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/solidity/solidity.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/sql/sql.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/st/st.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/swift/swift.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/tcl/tcl.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/typescript/typescript.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/vb/vb.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/xml/xml.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/yaml/yaml.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/scheme/scheme.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/clojure/clojure.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/shell/shell.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/perl/perl.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/azcli/azcli.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/apex/apex.contribution.js","../node_modules/monaco-editor/esm/vs/basic-languages/graphql/graphql.contribution.js","../node_modules/monaco-editor/esm/vs/editor/contrib/bracketMatching/bracketMatching.js","../node_modules/monaco-editor/esm/vs/editor/contrib/caretOperations/moveCaretCommand.js","../node_modules/monaco-editor/esm/vs/editor/contrib/caretOperations/caretOperations.js","../node_modules/monaco-editor/esm/vs/editor/contrib/caretOperations/transpose.js","../node_modules/monaco-editor/esm/vs/editor/contrib/clipboard/clipboard.js","../node_modules/monaco-editor/esm/vs/editor/contrib/message/messageController.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/codeActionTrigger.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/codeAction.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/codeActionModel.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/codeActionWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/lightBulbWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/codeActionCommands.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codelens/codelens.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/codeActionContributions.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codelens/codelensWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codelens/codelensController.js","../node_modules/monaco-editor/esm/vs/base/common/hash.js","../node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/color.js","../node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/colorDetector.js","../node_modules/monaco-editor/esm/vs/editor/contrib/comment/blockCommentCommand.js","../node_modules/monaco-editor/esm/vs/editor/contrib/comment/lineCommentCommand.js","../node_modules/monaco-editor/esm/vs/editor/contrib/comment/comment.js","../node_modules/monaco-editor/esm/vs/editor/contrib/contextmenu/contextmenu.js","../node_modules/monaco-editor/esm/vs/editor/contrib/cursorUndo/cursorUndo.js","../node_modules/monaco-editor/esm/vs/editor/contrib/dnd/dragAndDropCommand.js","../node_modules/monaco-editor/esm/vs/editor/contrib/dnd/dnd.js","../node_modules/monaco-editor/esm/vs/editor/contrib/find/findDecorations.js","../node_modules/monaco-editor/esm/vs/editor/contrib/find/replaceAllCommand.js","../node_modules/monaco-editor/esm/vs/editor/contrib/find/replacePattern.js","../node_modules/monaco-editor/esm/vs/editor/contrib/find/findModel.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/checkbox/checkbox.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/findinput/findInputCheckboxes.js","../node_modules/monaco-editor/esm/vs/editor/contrib/find/findOptionsWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/find/findState.js","../node_modules/monaco-editor/esm/vs/base/common/marked/marked.js","../node_modules/monaco-editor/esm/vs/base/common/idGenerator.js","../node_modules/monaco-editor/esm/vs/base/common/htmlContent.js","../node_modules/monaco-editor/esm/vs/base/browser/htmlContentRenderer.js","../node_modules/monaco-editor/esm/vs/base/common/history.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/inputbox/inputBox.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/findinput/findInput.js","../node_modules/monaco-editor/esm/vs/platform/browser/contextScopedHistoryWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/find/findWidget.js","../node_modules/monaco-editor/esm/vs/platform/clipboard/common/clipboardService.js","../node_modules/monaco-editor/esm/vs/editor/contrib/find/findController.js","../node_modules/monaco-editor/esm/vs/editor/contrib/folding/foldingRanges.js","../node_modules/monaco-editor/esm/vs/editor/contrib/folding/foldingModel.js","../node_modules/monaco-editor/esm/vs/editor/contrib/folding/foldingDecorations.js","../node_modules/monaco-editor/esm/vs/editor/contrib/folding/hiddenRangeModel.js","../node_modules/monaco-editor/esm/vs/editor/contrib/folding/indentRangeProvider.js","../node_modules/monaco-editor/esm/vs/editor/contrib/folding/syntaxRangeProvider.js","../node_modules/monaco-editor/esm/vs/editor/contrib/folding/intializingRangeProvider.js","../node_modules/monaco-editor/esm/vs/editor/contrib/folding/folding.js","../node_modules/monaco-editor/esm/vs/editor/contrib/fontZoom/fontZoom.js","../node_modules/monaco-editor/esm/vs/editor/contrib/format/formattingEdit.js","../node_modules/monaco-editor/esm/vs/platform/extensions/common/extensions.js","../node_modules/monaco-editor/esm/vs/editor/contrib/format/format.js","../node_modules/monaco-editor/esm/vs/editor/contrib/format/formatActions.js","../node_modules/monaco-editor/esm/vs/editor/contrib/referenceSearch/peekViewWidget.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/embeddedCodeEditorWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/zoneWidget/zoneWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/referenceSearch/referencesModel.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/octiconLabel/octiconLabel.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/highlightedlabel/highlightedLabel.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/iconLabel/iconLabel.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/countBadge/countBadge.js","../node_modules/monaco-editor/esm/vs/base/common/labels.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/splitview/splitview.js","../node_modules/monaco-editor/esm/vs/editor/contrib/referenceSearch/referencesTree.js","../node_modules/monaco-editor/esm/vs/editor/contrib/referenceSearch/referencesWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/referenceSearch/referencesController.js","../node_modules/monaco-editor/esm/vs/editor/contrib/goToDefinition/goToDefinition.js","../node_modules/monaco-editor/esm/vs/editor/contrib/goToDefinition/goToDefinitionCommands.js","../node_modules/monaco-editor/esm/vs/editor/contrib/goToDefinition/clickLinkGesture.js","../node_modules/monaco-editor/esm/vs/editor/contrib/goToDefinition/goToDefinitionMouse.js","../node_modules/monaco-editor/esm/vs/editor/contrib/gotoError/gotoErrorWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/gotoError/gotoError.js","../node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/colorPickerModel.js","../node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/colorPickerWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/hover/getHover.js","../node_modules/monaco-editor/esm/vs/editor/contrib/hover/hoverOperation.js","../node_modules/monaco-editor/esm/vs/editor/contrib/hover/hoverWidgets.js","../node_modules/monaco-editor/esm/vs/editor/contrib/markdown/markdownRenderer.js","../node_modules/monaco-editor/esm/vs/editor/contrib/hover/modesContentHover.js","../node_modules/monaco-editor/esm/vs/editor/contrib/hover/modesGlyphHover.js","../node_modules/monaco-editor/esm/vs/editor/contrib/hover/hover.js","../node_modules/monaco-editor/esm/vs/editor/contrib/inPlaceReplace/inPlaceReplaceCommand.js","../node_modules/monaco-editor/esm/vs/editor/contrib/inPlaceReplace/inPlaceReplace.js","../node_modules/monaco-editor/esm/vs/editor/common/commands/trimTrailingWhitespaceCommand.js","../node_modules/monaco-editor/esm/vs/editor/contrib/linesOperations/copyLinesCommand.js","../node_modules/monaco-editor/esm/vs/editor/contrib/indentation/indentUtils.js","../node_modules/monaco-editor/esm/vs/editor/contrib/linesOperations/moveLinesCommand.js","../node_modules/monaco-editor/esm/vs/editor/contrib/linesOperations/sortLinesCommand.js","../node_modules/monaco-editor/esm/vs/editor/contrib/linesOperations/linesOperations.js","../node_modules/monaco-editor/esm/vs/editor/contrib/links/getLinks.js","../node_modules/monaco-editor/esm/vs/editor/contrib/links/links.js","../node_modules/monaco-editor/esm/vs/editor/contrib/multicursor/multicursor.js","../node_modules/monaco-editor/esm/vs/editor/contrib/parameterHints/provideSignatureHelp.js","../node_modules/monaco-editor/esm/vs/editor/contrib/parameterHints/parameterHintsModel.js","../node_modules/monaco-editor/esm/vs/editor/contrib/parameterHints/parameterHintsWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/parameterHints/parameterHints.js","../node_modules/monaco-editor/esm/vs/editor/contrib/referenceSearch/referenceSearch.js","../node_modules/monaco-editor/esm/vs/editor/contrib/rename/renameInputField.js","../node_modules/monaco-editor/esm/vs/editor/contrib/rename/rename.js","../node_modules/monaco-editor/esm/vs/editor/contrib/smartSelect/wordSelections.js","../node_modules/monaco-editor/esm/vs/editor/contrib/smartSelect/bracketSelections.js","../node_modules/monaco-editor/esm/vs/editor/contrib/smartSelect/smartSelect.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/suggest.js","../node_modules/monaco-editor/esm/vs/editor/contrib/snippet/snippetParser.js","../node_modules/monaco-editor/esm/vs/editor/contrib/snippet/snippetVariables.js","../node_modules/monaco-editor/esm/vs/platform/workspaces/common/workspaces.js","../node_modules/monaco-editor/esm/vs/editor/contrib/snippet/snippetSession.js","../node_modules/monaco-editor/esm/vs/editor/contrib/snippet/snippetController2.js","../node_modules/monaco-editor/esm/vs/platform/files/common/files.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/suggestAlternatives.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/completionModel.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/wordDistance.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/suggestModel.js","../node_modules/monaco-editor/esm/vs/editor/common/services/getIconClasses.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/suggestWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/wordContextKey.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/suggestController.js","../node_modules/monaco-editor/esm/vs/editor/contrib/tokenization/tokenization.js","../node_modules/monaco-editor/esm/vs/editor/contrib/toggleTabFocusMode/toggleTabFocusMode.js","../node_modules/monaco-editor/esm/vs/editor/contrib/wordHighlighter/wordHighlighter.js","../node_modules/monaco-editor/esm/vs/editor/contrib/wordOperations/wordOperations.js","../node_modules/monaco-editor/esm/vs/editor/contrib/wordPartOperations/wordPartOperations.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/accessibilityHelp/accessibilityHelp.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/iPadShowKeyboard/iPadShowKeyboard.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/inspectTokens/inspectTokens.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/keybindingLabel/keybindingLabel.js","../node_modules/monaco-editor/esm/vs/base/parts/quickopen/browser/quickOpenModel.js","../node_modules/monaco-editor/esm/vs/base/parts/quickopen/browser/quickOpenViewer.js","../node_modules/monaco-editor/esm/vs/base/parts/tree/browser/treeDefaults.js","../node_modules/monaco-editor/esm/vs/base/parts/tree/browser/treeModel.js","../node_modules/monaco-editor/esm/vs/base/parts/tree/browser/treeDnd.js","../node_modules/monaco-editor/esm/vs/base/parts/tree/browser/treeViewModel.js","../node_modules/monaco-editor/esm/vs/base/parts/tree/browser/tree.js","../node_modules/monaco-editor/esm/vs/base/parts/tree/browser/treeView.js","../node_modules/monaco-editor/esm/vs/base/parts/tree/browser/treeImpl.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/progressbar/progressbar.js","../node_modules/monaco-editor/esm/vs/base/parts/quickopen/browser/quickOpenWidget.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/quickOpen/quickOpenEditorWidget.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/quickOpen/editorQuickOpen.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/quickOpen/gotoLine.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/quickOpen/quickCommand.js","../node_modules/monaco-editor/esm/vs/editor/contrib/quickOpen/quickOpen.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/quickOpen/quickOutline.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/referenceSearch/standaloneReferenceSearch.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/toggleHighContrast/toggleHighContrast.js","../node_modules/monaco-editor/esm/vs/editor/editor.main.js"],"names":["ModuleKind","JsxEmit","NewLineKind","ScriptTarget","ModuleResolutionKind","Emitter","monaco","LanguageServiceDefaultsImpl","compilerOptions","diagnosticsOptions","this","_onDidChange","_onDidExtraLibsChange","_extraLibs","Object","create","_workerMaxIdleTime","setCompilerOptions","setDiagnosticsOptions","_onDidExtraLibsChangeTimeout","defineProperty","prototype","get","event","enumerable","configurable","getExtraLibs","addExtraLib","content","filePath","_this","Math","random","toString","substring","dispose","myVersion","version","_fireOnDidExtraLibsChangeSoon","extraLib","setTimeout","fire","undefined","getCompilerOptions","_compilerOptions","options","getDiagnosticsOptions","_diagnosticsOptions","setMaximumWorkerIdleTime","value","getWorkerMaxIdleTime","setEagerModelSync","_eagerModelSync","getEagerModelSync","typescriptDefaults","allowNonTsExtensions","target","Latest","noSemanticValidation","noSyntaxValidation","javascriptDefaults","allowJs","getTypeScriptWorker","getMode","then","mode","getJavaScriptWorker","languages","typescript","onLanguage","setupTypeScript","setupJavaScript","languageId","_languageId","diagnosticDefault","validate","lint","compatibleVendorPrefixes","vendorPrefix","duplicateProperties","emptyRules","importStatement","boxModel","universalSelector","zeroUnits","fontFaceProperties","hexColorLength","argumentsInColorFunction","unknownProperties","ieHack","unknownVendorSpecificProperties","propertyIgnoredDueToDisplay","important","float","idSelector","cssDefaults","scssDefaults","lessDefaults","css","setupMode","jsonDefaults","allowComments","schemas","enableSchemaRequest","json","register","id","extensions","aliases","mimetypes","setOptions","_options","formatDefaults","tabSize","insertSpaces","wrapLineLength","unformatted","contentUnformatted","indentInnerHtml","preserveNewLines","maxPreserveNewLines","indentHandlebars","endWithNewline","extraLiners","wrapAttributes","handlebarOptionsDefault","format","suggest","html5","razorOptionsDefault","razor","htmlDefaults","angular1","ionic","handlebarDefaults","razorDefaults","html","_monaco","self","languageDefinitions","languagePromises","loadLanguage","loader","mod","setMonarchTokensProvider","language","setLanguageConfiguration","conf","_loadLanguage","registerLanguage","def","filenames","firstLine","__extends","_extendStatics","d","b","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","overviewRulerBracketMatchForeground","dark","light","hc","nls","_super","JumpToBracketAction","call","label","alias","precondition","kbOpts","kbExpr","editorTextFocus","primary","weight","run","accessor","editor","controller","jumpToBracket","SelectToBracketAction","selectToBracket","BracketsData","position","brackets","BracketMatchingController","_editor","_lastBracketsData","_lastVersionId","_decorations","_updateBracketsSoon","_register","_updateBrackets","_matchBrackets","getConfiguration","contribInfo","matchBrackets","schedule","onDidChangeCursorPosition","e","onDidChangeModelContent","onDidChangeModel","onDidChangeModelLanguageConfiguration","onDidChangeConfiguration","length","deltaDecorations","getContribution","ID","getId","hasModel","model","getModel","newSelections","getSelections","map","selection","getStartPosition","matchBracket","newCursorPosition","containsPosition","nextBracket","findNextBracket","range","lineNumber","column","setSelections","revealRange","forEach","openBracket","closeBracket","startLineNumber","startColumn","getEndPosition","push","_recomputeBrackets","newDecorations","newDecorationsLen","i","len","_DECORATION_OPTIONS","versionId","getVersionId","previousData","selections","positions","positionsLen","isEmpty","sort","compare","newData","newDataLen","previousIndex","previousLen","isBefore","equals","stickiness","className","overviewRuler","color","Center","theme","collector","bracketMatchBackground","getColor","addRule","bracketMatchBorder","appendMenuItem","group","command","title","key","comment","order","MoveCaretCommand","isMovingLeft","_selection","_isMovingLeft","getEditOperations","builder","s","_selectionId","trackSelection","endLineNumber","endColumn","getLineMaxColumn","left","middle","right","selectionStartLineNumber","lineContent","getLineContent","newLineContent","addEditOperation","_cutStartIndex","_cutEndIndex","_moved","computeCursorState","helper","result","getTrackedSelection","setStartPosition","setEndPosition","MoveCaretAction","opts","commands","_i","selections_1","pushUndoStop","executeCommands","MoveCaretLeftAction","writable","MoveCaretRightAction","TransposeLettersAction","textInputFocus","mac","positionLeftOf","start","getLineMinColumn","charCodeAt","positionRightOf","getLineCount","lastColumn","endPosition","getPosition","middlePosition","beginPosition","leftChar","getValueInRange","fromPositions","rightChar","replaceRange","CLIPBOARD_CONTEXT_MENU_GROUP","supportsCut","platform","document","queryCommandSupported","supportsCopy","supportsCopyWithSyntaxHighlighting","browser","supportsPaste","ExecCommandAction","browserCommand","runCommand","args","focusedEditor","getFocusedCodeEditor","hasTextFocus","trigger","execCommand","focus","ExecCommandCutAction","win","secondary","menuOpts","menubarOpts","menuId","emptySelectionClipboard","getSelection","ExecCommandCopyAction","getLineFirstNonWhitespaceColumn","positionLineNumber","ExecCommandPasteAction","ExecCommandCopyWithSyntaxHighlightingAction","forceCopyWithSyntaxHighlighting","__decorate","decorators","desc","c","arguments","r","getOwnPropertyDescriptor","Reflect","decorate","__param","paramIndex","decorator","MessageController","contextKeyService","_messageListeners","_visible","MESSAGE_VISIBLE","bindTo","onDidAttemptReadOnlyEdit","_onDidAttemptReadOnlyEdit","_id","reset","showMessage","message","bounds","set","_messageWidget","onDidBlurEditorText","closeMessage","onDidDispose","onMouseMove","fadeOut","MessageCommand","bindToContribution","handler","MessageWidget","_a","text","allowEditorOverflow","suppressMouseDown","revealLinesInCenterIfOutsideViewport","_position","_domNode","createElement","classList","add","textContent","appendChild","anchor","addContentWidget","messageWidget","handle","clearTimeout","getDomNode","removeEventListener","addEventListener","removeContentWidget","preference","border","borderWidth","type","background","foreground","CodeActionKind","contains","other","sep","intersects","Empty","QuickFix","Refactor","Source","SourceOrganizeImports","SourceFixAll","CodeActionSet","actions","codeActionsComparator","a","diagnostics","localeCompare","some","fix","kind","isPreferred","getCodeActions","rangeOrSelection","token","filter","codeActionContext","only","cts","providers","all","provider","providedCodeActionKinds","providedKind","includeSourceActions","mayIncludeActionsOfKind","getCodeActionProviders","promises","Promise","resolve","provideCodeActions","providedCodeActions","isCancellationRequested","isArray","action","actionKind","onlyIncludePreferredActions","filtersAction","err","listener","onDidChange","newProviders","cancel","finally","resource","isIRange","validateRange","None","CodeActionsState","SUPPORTED_CODE_ACTIONS","CodeActionOracle","_markerService","_signalChange","_delay","_progressService","_disposables","_autoTriggerTimer","onMarkerChanged","_onMarkerChanges","_onCursorChange","_getRangeOfSelectionUnlessWhitespaceEnclosed","_createEventAndSignalChange","resources","uri","cancelAndSet","_getRangeOfMarker","read","marker","intersectRanges","lift","line","test","model_1","markerRange","showWhile","Triggered","CodeActionModel","_state","_onDidChangeState","_supportedCodeActions","_update","onDidChangeModelLanguage","_codeActionOracle","setState","has","readOnly","supportedActions","apply","join","newState","__awaiter","thisArg","_arguments","P","generator","reject","fulfilled","step","next","rejected","done","__generator","body","f","y","t","g","_","sent","trys","ops","verb","Symbol","iterator","n","v","op","TypeError","pop","CodeActionContextMenu","_contextMenuService","_onApplyCodeAction","_onDidExecuteCodeAction","onDidExecuteCodeAction","show","actionsToShow","at","codeActions","codeActionToAction","showContextMenu","getAnchor","isIPosition","_toCoords","x","getActions","onHide","autoSelectFirstItem","revealPosition","render","cursorCoords","getScrolledVisiblePosition","editorCoords","top","height","LightBulbWidget","_onClick","onClick","_futureFixes","editorModel","dom","lineHeight","pad","floor","posx","state","buttons","hide","monitor","startMonitoring","lightbulbEnabled","tryShow","fixes","_show","catch","config","getOptions","indent","computeIndentLevel","isFolded","getTopForLineNumber","effectiveLineNumber","fontInfo","spaceWidth","_posPref","hasAutoFix","layoutContentWidget","contextKeyForSupportedActions","regex","keys","RegExp","QuickFixController","markerService","progressService","contextMenuService","_commandService","_keybindingService","_bulkEditService","_model","_codeActionContextMenu","_lightBulbWidget","_updateLightBulbTitle","_handleLightBulbSelect","onDidChangeState","_onDidChangeCodeActionsState","onDidUpdateKeybindings","_activeRequest","autoApply","isVisible","triggerFromEditorSelection","kb","lookupKeybinding","Id","getLabel","applyCodeAction","bulkEditService","commandService","edit","executeCommand","concat","showCodeActionsForEditorSelection","notAvailableMessage","pos","QuickFixAction","and","hasCodeActionsProvider","_accessor","CodeActionCommandArgs","preferred","fromUser","arg","defaults","getKindFromUser","getApplyFromUser","getPreferredUser","defaultAutoApply","toLowerCase","defaultKind","CodeActionCommand","description","name","schema","runEditorCommand","userArg","RefactorAction","when","SourceAction","OrganizeImportsAction","FixAllAction","AutoFixAction","getCodeLensData","symbols","ordered","provideCodeLenses","result_1","symbol","indexOf","itemResolveCount","_loop_1","item","Boolean","resolveCodeLens","value_1","CodeLensViewZone","afterLineNumber","onHeight","_onHeight","heightInLines","domNode","onComputedHeight","_lastHeight","CodeLensContentWidget","symbolRange","data","_commands","Map","_idPool","setSymbolRange","innerHTML","updateHeight","withCommands","style","round","fontSize","paddingRight","inSymbols","animate","clear","part","String","wasEmpty","getCommand","link","parentElement","_widgetPosition","hasAttribute","CodeLensHelper","_removeDecorations","_addDecorations","_addDecorationsCallbacks","addDecoration","decoration","callback","removeDecoration","decorationId","commit","changeAccessor","resultingDecorations","CodeLens","viewZoneChangeAccessor","updateCallback","_data","_decorationIds","codeLensData","EMPTY","plusRange","_contentWidget","_viewZone","_viewZoneId","addZone","removeZone","isValid","getDecorationRange","updateCodeLensSymbols","computeIfNecessary","updateCommands","resolved","getLineNumber","update","layoutZone","codeLensForeground","activeLinkForeground","CodeLensContribution","_notificationService","_codeLensCache","_isEnabled","codeLens","_globalToDispose","_localToDispose","_lenses","_currentFindCodeLensSymbolsPromise","_modelChangeCounter","_onModelChange","prevIsEnabled","_localDispose","_currentResolveCodeLensSymbolsPromise","cachedLenses","_renderCodeLensSymbols","registration","scheduler","_detectVisibleLenses","_onViewportChanged","counterValue","put","changeDecorations","changeViewZones","viewAccessor","toDispose","lastLensLineNumber","lens","l","splice","onDidScrollChange","scrollTopChanged","onDidLayoutChange","scrollState","capture","_disposeAllLenses","restore","onMouseUp","element","tagName","_b","error","cachedLensesNow","delete","decChangeAccessor","lastGroup","maxLineNumber","groups","symbols_1","codeLensIndex","groupsIndex","symbolsLineNumber","codeLensLineNumber","toResolve","lenses","request","resolvedSymbols","hash","obj","hashVal","numberHash","arr","initialHashVal","reduce","stringHash","objectHash","booleanHash","val","length_1","getColorPresentations","colorInfo","provideColorPresentations","rawCIs","reverse","provideDocumentColors","result_2","ci","red","green","blue","alpha","presentations","ColorDetector","_codeEditorService","_configurationService","_decorationsIds","_colorDatas","_colorDecoratorIds","_decorationsTypes","isEnabled","onModelChanged","removeAllDecorations","_timeoutTimer","_computePromise","getLanguageIdentifier","deprecatedConfig","getValue","colorDecorators","stop","beginCompute","RECOMPUTE_TIME","colors","getColors","colorInfos","updateDecorations","updateColorDecorators","colorDatas","decorations","colorData","newDecorationsTypes","rgba","subKey","registerDecorationType","before","contentText","margin","width","backgroundColor","resolveDecorationOptions","subType","removeDecorationType","getColorData","getDecorationsInRange","BlockCommentCommand","_usedEndToken","_haystackHasNeedleAtOffset","haystack","needle","offset","needleLength","codeA","codeB","_createOperationsForBlockComment","startToken","endToken","startLineText","endLineText","startTokenIndex","lastIndexOf","endTokenIndex","startLineAfterStartToken","endLineBeforeEndToken","_createRemoveBlockCommentOperations","_createAddBlockCommentOperations","ops_1","addTrackedEditOperation","res","replace","insert","tokenizeIfCheap","getLanguageIdAtPosition","getComments","blockCommentStartToken","blockCommentEndToken","inverseEditOperations","getInverseEditOperations","startTokenEditOperation","endTokenEditOperation","srcRange","deltaColumn","LineCommentCommand","_tabSize","_type","_deltaColumn","_gatherPreflightCommentStrings","commentStr","lineCommentToken","lines","lineCount","ignore","commentStrOffset","commentStrLength","_analyzeLines","shouldRemoveComments","onlyWhitespaceLines","lineData","lineContentStartOffset","strings","commentStrEndOffset","supported","_gatherPreflightData","_executeLineComments","_createRemoveLineCommentsOperations","_normalizeInsertionPoint","_createAddLineCommentsOperations","cursorPosition","positionColumn","_attemptRemoveBlockComment","startTokenAllowedBeforeColumn","max","_executeBlockComment","firstNonWhitespaceIndex","_moveEndPositionDown","selectionStartColumn","nextVisibleColumn","currentVisibleColumn","isTab","columnSize","j","lenJ","minVisibleColumn","Number","MAX_VALUE","j_1","lenJ_1","CommentLineAction","ToggleCommentLineAction","AddLineCommentAction","RemoveLineCommentAction","BlockCommentAction","linux","selections_2","ContextMenuController","_contextViewService","_contextKeyService","_menuService","_toDispose","_contextMenuIsBeingShownCount","onContextMenu","_onContextMenu","onMouseWheel","hideContextView","onKeyDown","keyCode","preventDefault","stopPropagation","contextmenu","setPosition","posy","menuActions","_getMenuActions","_doShowContextMenu","contextMenu","createMenu","groups_1","oldHoverSetting","hover","updateOptions","enabled","getActionItem","keybinding","_keybindingFor","isMenu","customActionItem","icon","getKeyBinding","wasCancelled","ShowContextMenu","CursorState","thisLen","equalsSelection","CursorUndoController","_isCursorUndo","_undoStack","_prevState","_readState","onDidChangeCursorSelection","shift","cursorUndo","currState","prevState","revealRangeInCenterIfOutsideViewport","CursorUndo","DragAndDropCommand","targetPosition","copy","targetSelection","hasTriggerModifier","altKey","ctrlKey","DragAndDropController","_toUnhook","onMouseDown","_onEditorMouseDown","_onEditorMouseUp","onMouseDrag","_onEditorMouseDrag","onMouseDrop","_onEditorMouseDrop","onEditorKeyDown","onKeyUp","onEditorKeyUp","onDidBlurEditorWidget","onEditorBlur","_dndDecorationIds","_mouseDown","_modifierPressed","_dragSelection","_removeDecoration","dragAndDrop","mouseStyle","TRIGGER_KEY_VALUE","mouseEvent","possibleSelections","showAt","_hitContent","_hitMargin","newCursorPosition_1","shiftKey","primarySelection","FindDecorations","_overviewRulerApproximateDecorations","_findScopeDecorationId","_rangeHighlightDecorationId","_highlightedDecorationId","_startPosition","_allDecorations","getCount","getFindScope","newStartPosition","setCurrentFindMatch","_getDecorationIndex","index","getCurrentMatchesPosition","desiredRange","candidates_1","candidate","candidateOpts","_FIND_MATCH_DECORATION","_CURRENT_FIND_MATCH_DECORATION","nextMatch","newCurrentDecorationId","matchPosition","equalsRange","changeDecorationOptions","rng","lineBeforeEnd","lineBeforeEndMaxColumn","_RANGE_HIGHLIGHT_DECORATION","findMatches","findScope","findMatchesOptions","newOverviewRulerApproximateDecorations","_FIND_MATCH_NO_OVERVIEW_DECORATION","approxPixelsPerLine","getLayoutInfo","mergeLinesDelta","ceil","prevStartLineNumber","prevEndLineNumber","_FIND_MATCH_ONLY_OVERVIEW_DECORATION","newFindMatchesDecorations","_FIND_SCOPE_DECORATION","matchBeforePosition","matchAfterPosition","zIndex","showIfCollapsed","isWholeLine","ReplaceAllCommand","editorSelection","ranges","replaceStrings","_editorSelection","_ranges","_replaceStrings","o1","o2","compareRangesUsingStarts","resultOps","previousOp","resultOps_1","_trackedEditorSelectionId","StaticValueReplacePattern","staticValue","DynamicPiecesReplacePattern","pieces","ReplacePattern","fromStaticValue","ReplacePiece","buildReplaceString","matches","piece","_substitute","matchIndex","remainder","ReplacePieceBuilder","source","_source","_lastCharIndex","_result","_resultLen","_currentStaticPiece","emitUnchanged","toCharIndex","_emitStatic","emitStatic","emitMatchIndex","finalize","CONTEXT_FIND_WIDGET_VISIBLE","CONTEXT_FIND_INPUT_FOCUSED","CONTEXT_REPLACE_INPUT_FOCUSED","ToggleCaseSensitiveKeybinding","ToggleWholeWordKeybinding","ToggleRegexKeybinding","ToggleSearchScopeKeybinding","FIND_IDS","StartFindAction","StartFindWithSelection","NextMatchFindAction","PreviousMatchFindAction","NextSelectionMatchFindAction","PreviousSelectionMatchFindAction","StartFindReplaceAction","CloseFindWidgetCommand","ToggleCaseSensitiveCommand","ToggleWholeWordCommand","ToggleRegexCommand","ToggleSearchScopeCommand","ReplaceOneAction","ReplaceAllAction","SelectAllMatchesAction","FindModelBoundToEditorModel","_isDisposed","_startSearchingTimer","_updateDecorationsScheduler","research","reason","_ignoreModelContentChanged","isFlush","onFindReplaceStateChange","_onStateChanged","searchScope","searchString","isReplaceRevealed","isRegex","wholeWord","matchCase","isTooLargeForSyncing","setIfNotSet","moveCursor","_getSearchRange","getFullModelRange","newFindScope","_findMatches","changeMatchInfo","_moveToNextMatch","_hasMatches","matchesCount","_cannotFind","_setCurrentFindMatch","match","matchesPosition","setSelection","_prevSearchPosition","isUsingLineStops","_moveToPrevMatch","isRecursed","prevMatchRange","searchRange","prevMatch","findPreviousMatch","wordSeparators","containsRange","moveToPrevMatch","_nextSearchPosition","after","nextMatchRange","_getNextMatch","captureMatches","forceMove","findNextMatch","moveToNextMatch","_getReplacePattern","replaceString","chCode","nextChCode","nextNextChCode","parseReplaceString","replacePattern","hasReplacementPatterns","_executeEditorCommand","limitResultCount","replaceAll","_largeReplaceAll","_regularReplaceAll","searchData","parseSearchRequest","searchRegex","multiline","ignoreCase","global","resultText","modelText","fullModelRange","m","selectAllMatches","slice","defaultOpts","inputActiveOptionBorder","fromHex","Checkbox","_onChange","_onKeyDown","_opts","objects","_checked","isChecked","actionClassName","tabIndex","setAttribute","applyStyles","onclick","ev","checked","onkeydown","keyboardEvent","newIsChecked","remove","styles","borderColor","enable","disable","NLS_CASE_SENSITIVE_CHECKBOX_LABEL","NLS_WHOLE_WORD_CHECKBOX_LABEL","NLS_REGEX_CHECKBOX_LABEL","CaseSensitiveCheckbox","appendTitle","WholeWordsCheckbox","RegexCheckbox","FindOptionsWidget","keybindingService","themeService","_hideSoon","_hide","_isVisible","display","inputActiveOptionBorderColor","getTheme","caseSensitive","_keybindingLabelFor","onChange","change","wholeWords","addOverlayWidget","somethingChanged","isRevealed","_revealTemporarily","_onMouseOut","_onMouseOver","_applyTheme","onThemeChange","bind","actionId","removeOverlayWidget","highlightFindOptions","inputStyles","effectiveOptionValue","override","widgetBackground","widgetShadowColor","hcBorder","__marked_exports","FindReplaceState","_searchString","_replaceString","_isRevealed","_isReplaceRevealed","_isRegex","_isRegexOverride","_wholeWord","_wholeWordOverride","_matchCase","_matchCaseOverride","_searchScope","_matchesPosition","_matchesCount","_currentMatch","_onFindReplaceStateChange","currentMatch","changeEvent","updateHistory","oldEffectiveIsRegex","oldEffectiveWholeWords","oldEffectiveMatchCase","isRegexOverride","wholeWordOverride","matchCaseOverride","IdGenerator","prefix","_prefix","_lastId","nextId","defaultGenerator","MarkdownString","appendText","appendCodeblock","langId","code","isEmptyMarkdownString","oneOrMany","isMarkdownString","every","thing","isTrusted","markdownStringEqual","removeMarkdownEscapes","root","block","newline","fences","noop","hr","heading","nptable","blockquote","list","table","lheading","paragraph","Lexer","tokens","links","marked","rules","normal","pedantic","gfm","tables","_label","_title","getRegex","bullet","_tag","_comment","merge","lex","src","loose","cap","bull","listStart","listItems","space","tag","isordered","istask","ischecked","exec","rtrim","lang","trim","depth","header","splitCells","align","split","cells","smartLists","charAt","task","sanitize","pre","sanitizer","href","Error","inline","escape","autolink","url","reflink","nolink","strong","em","br","del","InlineLexer","renderer","Renderer","breaks","TextRenderer","Parser","slugger","Slugger","seen","encode","escapeTest","escapeReplace","ch","replacements","escapeTestNoEncode","escapeReplaceNoEncode","unescape","fromCharCode","parseInt","opt","cleanUrl","base","prot","decodeURIComponent","originIndependentUrl","baseUrls","resolveUrl","encodeURI","_punctuation","_escapes","_scheme","_email","_attribute","_href","_extended_email","_backpedal","output","prevCapZero","out","inLink","inRawBlock","lastParenIndex","findClosingBracket","linkLen","outputLink","escapes","codespan","mangle","smartypants","image","infostring","escaped","highlight","langPrefix","quote","level","raw","headerIds","headerPrefix","slug","xhtml","listitem","checkbox","tablerow","tablecell","flags","baseUrl","parse","inlineText","tok","peek","parseText","row","cell","errMsg","silent","console","log","originalSlug","tableRow","count","str","curr","invert","suffLen","currChar","substr","pending","getDefaults","parser","lexer","inlineLexer","renderFormattedText","formattedText","_renderFormattedText","treeNode","actionHandler","child","createTextNode","disposeables","children","nodeChild","actionItemIndex","current","stack","stream","StringStream","eos","isEscapedFormatType","formatTagType","textCurrent","advance","newCurrent","parseFormattedText","_char2","HistoryNavigator","history","limit","_initialize","_limit","_history","_navigator","previous","parent","first","last","_reduceToLimit","_elements","Set","history_1","entry","elements","$","inputBackground","inputForeground","inputValidationInfoBorder","inputValidationInfoBackground","inputValidationWarningBorder","inputValidationWarningBackground","inputValidationErrorBorder","inputValidationErrorBackground","InputBox","container","contextViewProvider","_onDidHeightChange","cachedHeight","placeholder","ariaLabel","inputBorder","inputValidationInfoForeground","inputValidationWarningForeground","inputValidationErrorForeground","validationOptions","validation","flexibleHeight","wrapper","input","onfocus","onblur","mirror","setPlaceHolder","oninput","onValueChange","onBlur","onFocus","updateMirror","actionbar","_hideMessage","_showMessage","placeHolder","setAriaLabel","removeAttribute","newValue","blur","hasFocus","activeElement","select","setSelectionRange","end","disabled","setEnabled","force","classForType","alertText","stylesForType","aria","hideMessage","errorMsg","inputElement","div","layout","showContextView","anchorAlignment","renderOptions","spanElement","formatContent","renderText","suffix","borderStyle","previousHeight","HistoryInputBox","addToHistory","getCurrentValue","showNextValue","getNextValue","showPreviousValue","getPreviousValue","currentValue","NLS_DEFAULT_LABEL","FindInput","_showOptionButtons","fixFocusOnOptionClickEnabled","_onDidOptionChange","onDidOptionChange","_onMouseDown","_onInput","_onKeyUp","_onCaseSensitiveKeyDown","onCaseSensitiveKeyDown","_onRegexKeyDown","_lastHighlightFindOptions","buildDomNode","appendCaseSensitiveLabel","appendWholeWordsLabel","appendRegexLabel","inputBox","onkeyup","onmousedown","setFocusInputOnOptionClick","setValue","checkBoxStyles","inputBoxStyles","getCaseSensitive","setCaseSensitive","getWholeWords","setWholeWords","setRegex","focusOnCaseSensitive","viaKeyboard","mirrorElement","indexes","newIndex","controls","clearMessage","HistoryNavigationWidgetContext","HistoryNavigationEnablementContext","getContextScopedWidget","contextKey","getContext","createAndBindHistoryNavigationWidgetScopedContextKeyService","widget","scopedContextKeyService","createScoped","createWidgetScopedContextKeyService","bindContextScopedWidget","historyNavigationEnablement","ContextScopedHistoryInputBox","historyNavigator","ContextScopedFindInput","showFindOptions","registerCommandAndKeybindingRule","arg2","NLS_FIND_INPUT_LABEL","NLS_FIND_INPUT_PLACEHOLDER","NLS_PREVIOUS_MATCH_BTN_LABEL","NLS_NEXT_MATCH_BTN_LABEL","NLS_TOGGLE_SELECTION_FIND_TITLE","NLS_CLOSE_BTN_LABEL","NLS_REPLACE_INPUT_LABEL","NLS_REPLACE_INPUT_PLACEHOLDER","NLS_REPLACE_BTN_LABEL","NLS_REPLACE_ALL_BTN_LABEL","NLS_TOGGLE_REPLACE_MODE_BTN_LABEL","NLS_MATCHES_COUNT_LIMIT_TITLE","NLS_MATCHES_LOCATION","NLS_NO_RESULTS","MAX_MATCHES_COUNT_WIDTH","FIND_ALL_CONTROLS_WIDTH","FIND_INPUT_AREA_HEIGHT","FindWidgetViewZone","heightInPx","FindWidget","codeEditor","_codeEditor","_controller","_contextViewProvider","_isReplaceVisible","_ignoreChangeEvent","_updateHistoryDelayer","_buildDomNode","_updateButtons","_tryUpdateWidgetWidth","layoutInfo","accessibilitySupport","updateAccessibilitySupport","addExtraSpaceOnTop","find","_showViewZone","_removeViewZone","_updateToggleSelectionFindButton","onDidFocusEditorWidget","globalBufferTerm","getGlobalBufferTerm","_findInput","_findInputFocused","_findFocusTracker","onDidFocus","_updateSearchScope","onDidBlur","_replaceInputFocused","_replaceFocusTracker","_replaceInputBox","_layoutViewZone","_reveal","_toggleSelectionFind","showRedOutline","_updateMatchesCount","_delayedUpdateHistory","_updateHistory","minWidth","firstChild","removeChild","clientWidth","isSelection","_closeBtn","findInputIsNonEmpty","_prevBtn","_nextBtn","_replaceBtn","_replaceAllBtn","_toggleReplaceBtn","toggleClass","setExpanded","canReplace","autoFindInSelection","layoutOverlayWidget","adjustEditorScrollTop","seedSearchStringFromSelection","startCoords","startLeft","startTop","leftOfFindWidget","endCoords","focusTheEditor","viewZone","setScrollTop","getScrollTop","adjustScroll","scrollAdjustment","editorWidth","minimapWidth","collapsedFindWidget","reducedFindWidget","narrowFindWidget","_resized","maxWidth","FIND_WIDGET_INITIAL_WIDTH","findInputWidth","focusFindInput","focusReplaceInput","_onFindInputMouseDown","middleButton","_onFindInputKeyDown","getAction","_onReplaceInputKeyDown","getHorizontalSashTop","_sash","getHorizontalSashLeft","getHorizontalSashWidth","_buildFindPart","PART_WIDTH","onTrigger","findPart","SimpleCheckbox","_buildReplacePart","replaceInput","REPLACE_INPUT_AREA_WIDTH","replacePart","_buildSash","_resizeSash","orientation","originalWidth","onDidStart","evt","startX","currentX","inputBoxWidth","parseFloat","_checkbox","_COUNTER","htmlFor","onchange","SimpleButton","expanded","shouldHaveIt","addBackgroundColorRule","selector","findMatchHighlightBorder","findMatchBorder","findRangeHighlightBorder","resizeBorderBackground","inputActiveBorder","IClipboardService","SEARCH_STRING_MAX_LENGTH","getSelectionSearchString","wordAtPosition","getWordAtPosition","word","getValueLengthInRange","CommonFindController","storageService","clipboardService","_findWidgetVisible","_storageService","_clipboardService","loadQueryState","shouldRestartFind","disposeModel","getBoolean","_start","forceRevealReplace","seedSearchStringFromGlobalClipboard","shouldFocus","shouldAnimate","updateSearchScope","saveQueryState","setGlobalBufferTerm","store","actualIsRegex","actualWholeWord","actualMatchCase","isFindInputFocused","getState","closeFindWidget","toggleCaseSensitive","toggleWholeWords","toggleRegex","toggleSearchScope","setSearchString","selectionSearchString","stateChanges","currentSelection","globalFindClipboard","readFindText","writeFindText","FindController","_themeService","_widget","_createFindWidget","_findOptionsWidget","StartFindWithSelectionAction","MatchFindAction","_run","SelectionMatchFindAction","findInputFocused","FindCommand","MAX_FOLDING_REGIONS","FoldingRegions","startIndexes","endIndexes","types","_startIndexes","_endIndexes","_collapseStates","Uint32Array","_types","ensureParentIndices","_parentsComputed","parentIndexes_1","isInsideLast","getStartLineNumber","getEndLineNumber","parentIndex","getType","hasTypes","isCollapsed","arrayIndex","bit","setCollapsed","toRegion","FoldingRegion","getParentIndex","findIndex","low","high","mid","findRange","containedBy","containsLine","FoldingModel","textModel","decorationProvider","_updateEventEmitter","_textModel","_decorationProvider","_regions","_editorDecorationIds","_isInitialized","toggleCollapseState","regions","processed","regions_1","regionIndex","editorDecorationId","newCollapseState","getDecorationOption","collapseStateChanged","newRegions","blockedLineNumers","newEditorDecorations","initRange","blockedLineNumers_1","blockedLineNumber","isBlocked","maxColumn","decorationRange","nextCollapsed","k","collapsedIndex","decRange","collapsedStartLineNumber","getMemento","collapsedRanges","applyMemento","toToogle","state_1","region","getRegionAtLine","getAllRegionsAtLine","getRegionsInside","levelStack","setCollapseStateLevelsDown","foldingModel","doCollapse","levels","lineNumbers","toToggle","lineNumbers_1","regionsInside","setCollapseStateLevelsUp","lineNumbers_2","setCollapseStateForMatchingLines","regExp","setCollapseStateForType","FoldingDecorationProvider","autoHideFoldingControls","COLLAPSED_VISUAL_DECORATION","EXPANDED_AUTO_HIDE_VISUAL_DECORATION","EXPANDED_VISUAL_DECORATION","oldDecorations","afterContentClassName","linesDecorationsClassName","HiddenRangeModel","_foldingModel","_foldingModelListener","updateHiddenRanges","_hiddenRanges","updateHiddenAreas","newHiddenAreas","lastCollapsedStart","lastCollapsedEnd","applyHiddenRanges","hiddenRanges","hasRanges","isHidden","adjustSelections","hasChanges","lastRange","adjustLine","isInside","adjustedStartLine","adjustedEndLine","MAX_FOLDING_REGIONS_FOR_INDENT_LIMIT","ID_INDENT_PROVIDER","IndentRangeProvider","compute","cancelationToken","foldingRules","getFoldingRules","offSide","markers","foldingRangesLimit","pattern","previousRegions","insertFirst","toIndentRanges","computeRanges","RangesCollector","_indentOccurrences","_length","_foldingRangesLimit","entries","maxIndent","startIndex","foldingContext","ID_SYNTAX_PROVIDER","SyntaxRangeProvider","cancellationToken","rangeData","provideFoldingRanges","nLines","ranges_1","rank","collectSyntaxRanges","sanitizeRanges","_nestingLevels","_nestingLevelCounts","nestingLevel","maxLevel","sorted","d1","d2","diff","sorted_1","ID_INIT_PROVIDER","InitializingRangeProvider","initialRanges","onTimeout","timeoutTime","decorationIds","getLineLength","timeout","foldingRangeData","FoldingController","folding","_autoHideFoldingControls","showFoldingControls","_useFoldingProviders","foldingStrategy","globalToDispose","localToDispose","foldingDecorationProvider","oldIsEnabled","oldShowFoldingControls","onModelContentChanged","oldUseFoldingProviders","onFoldingStrategyChanged","saveViewState","isTooLargeForTokenization","collapsedRegions","isInitialized","hiddenRangeModel","rangeProvider","restoreViewState","foldingStateMemento","getFoldingModel","onHiddenRangesChanges","updateScheduler","cursorChangedScheduler","revealCursor","onCursorPositionChanged","onEditorMouseDown","onEditorMouseUp","foldingRegionPromise","foldingModelPromise","getRangeProvider","foldingProviders","foldingRanges","selectionLineNumbers","setHiddenAreas","reveal","mouseDownInfo","leftButton","iconClicked","detail","offsetLeftInGutter","offsetLeft","offsetX","isAfterLines","isCollapsed_1","revealPositionInCenterIfOutsideViewport","FoldingAction","foldingController","reportTelemetry","invoke","getSelectedLines","getLineNumbers","selectionLines","foldingArgumentsConstraint","foldingArgs","direction","UnfoldAction","constraint","_foldingController","UnFoldRecursivelyAction","_args","FoldAction","FoldRecursivelyAction","selectedLines","FoldAllBlockCommentsAction","Comment","comments","FoldAllRegionsAction","Region","UnfoldAllRegionsAction","FoldAllAction","UnfoldAllAction","FoldLevelAction","getFoldingLevel","ID_PREFIX","foldLevel","blockedLineNumbers","setCollapseStateAtLevel","EditorFontZoomIn","setZoomLevel","getZoomLevel","EditorFontZoomOut","EditorFontZoomReset","FormattingEdit","_handleEolEdits","edits","newEol","singleEdits","edits_1","eol","pushEOL","_isFullModelReplaceEdit","editRange","execute","_edits","executeEdits","replaceMove","ExtensionIdentifier","_lower","toKey","alertFormattingEdits","getRealAndSyntheticDocumentFormattersOrdered","docFormatter_1","formatter","extensionId","displayName","provideDocumentFormattingEdits","provideDocumentRangeFormattingEdits","rangeFormatter_1","FormattingConflicts","_selectors","formatDocumentRangeWithSelectedProvider","editorOrModel","instaService","selected","invokeFunction","formatDocumentRangeWithProvider","workerService","versionNow_1","rawEdits","range_1","initialSelection_1","getFormattingOptions","computeMoreMinimalEdits","pushEditOperations","forceMoveMarkers","undoEdits","undoEdits_1","range_2","areIntersectingOrTouching","formatDocumentWithSelectedProvider","formatDocumentWithProvider","initialSelection_2","undoEdits_2","range_3","getOnTypeFormattingEdits","autoFormatTriggerCharacters","provideOnTypeFormattingEdits","providers_1","getDocumentRangeFormattingEditsUntilResult","providers_2","getDocumentFormattingEditsUntilResult","FormatOnType","_workerService","_callOnDispose","_callOnModel","formatOnType","support","triggerChars","onDidType","lastCharCode","_trigger","canceled","unbind","changes","FormatOnPaste","_instantiationService","formatOnPaste","onDidPaste","FormatDocumentAction","hasDocumentFormattingProvider","FormatSelectionAction","hasDocumentSelectionFormattingProvider","hasNonEmptySelection","registerCommand","PeekContext","EmbeddedCodeEditorWidget","domElement","parentEditor","instantiationService","codeEditorService","notificationService","accessibilityService","getRawConfiguration","_parentEditor","_overwriteOptions","_onParentConfigurationChanged","getParentEditor","newOptions","defaultColor","defaultOptions","showArrow","showFrame","frameColor","arrowColor","keepEditorSelection","ViewZoneDelegate","afterColumn","onDomNodeTop","_onDomNodeTop","_onComputedHeight","OverlayWidgetDelegate","Arrow","_ruleName","_IdGenerator","_color","_updateStyle","_height","where","ZoneWidget","_positionMarkerId","_isShowing","isAccessible","info","_getWidth","_getLeft","_onWidth","_overlayWidget","_arrow","_fillContainer","_initSash","_applyStyles","borderTopColor","borderBottomColor","verticalScrollbarWidth","minimapLeft","_onViewZoneTop","_onViewZoneHeight","containerHeight","_decoratingElementsHeight","_doLayout","rangeOrPos","_showImpl","viewZoneDomNode","overflow","maxHeightInLines","arrowHeight","frameThickness","width_1","frameWidth","borderTopWidth","borderBottomWidth","revealLineNumber","min","revealLine","setCssClass","classToReplace","widthInPixel","heightInPixel","_relayout","newHeightInLines","isResizeable","startY","onDidEnd","lineDelta","currentY","roundedLineDelta","IPeekViewService","class_1","_widgets","addExclusiveWidget","existing","onDidClose","inPeekEditor","notInPeekEditor","toNegated","headerBackgroundColor","white","primaryHeadingColor","secondaryHeadingColor","PeekViewWidget","_onDidClose","_headElement","_primaryHeading","_secondaryHeading","_bodyElement","_fillHead","_fillBody","titleElement","_onTitleClick","_headingIcon","_metaHeading","actionsContainer","actionBarOptions","_getActionBarOptions","_actionbarWidget","setTitleIcon","iconClassName","setTitle","primaryHeading","secondaryHeading","setMetaTitle","headHeight","bodyHeight","_doLayoutHead","_doLayoutBody","OneReference","_range","isProviderFirst","_onRefChanged","onRefChanged","getAriaMessage","FilePreview","_modelReference","preview","object","textEditorModel","getWordUntilPosition","beforeRange","afterRange","inside","FileReferences","_parent","_uri","_children","_preview","_loadFailure","fsPath","textModelResolverService","_resolved","createModelReference","modelReference","ReferencesModel","references","_onDidChangeReferenceRange","onDidChangeReferenceRange","providersFirst","_compareReferences","references_1","ref","oneRef","targetSelectionRange","empty","nextOrPreviousReference","reference","idx","childCount","groupCount","nearestReference","nearest","prefixLen","offsetDist","abs","firstReference","auri","buri","renderOcticons","HighlightedLabel","supportOcticons","didEverRender","highlights","escapeNewLines","htmlContent","substring_1","total","extra","highlights_1","FastLabelNode","_element","disposed","_textContent","_className","_empty","marginLeft","IconLabel","labelDescriptionContainer","supportHighlights","labelNode","donotSupportOcticons","supportDescriptionHighlights","descriptionNodeFactory","setLabel","classes","extraClasses","italic","labelEscapeNewLines","descriptionNode","descriptionMatches","descriptionTitle","badgeBackground","badgeForeground","CountBadge","badgeBorder","countFormat","titleFormat","setCount","setTitleFormat","getPathLabel","userHomeProvider","rootProvider","file","baseResource","getWorkspaceFolder","hasMultipleRoots","getWorkspace","folders","pathLabel","rootName","scheme","untitled","with","query","fragment","hasDriveLetter","normalizeDriveLetter","path","userHome","normalizedUserHome","normalizedUserHomeCached","original","normalized","tildify","getBaseLabel","toUpperCase","State","Sizing","DataSource","_resolverService","hasChildren","failure","getChildren","Delegate","getHeight","getTemplateId","OneReferenceRenderer","StringRepresentationProvider","getKeyboardNavigationLabel","mightProducePrintableCharacter","IdentityProvider","FileReferencesTemplate","_uriLabel","badge","getUriLabel","relative","FileReferencesRenderer","templateId","renderTemplate","createInstance","renderElement","node","template","filterData","disposeTemplate","templateData","OneReferenceTemplate","filePreview","AriaProvider","getAriaLabel","defaultStyles","separatorBorder","transparent","Distribute","Split","SplitView","size","contentSize","proportions","viewItems","sashItems","Idle","_onDidSashChange","onDidSashChange","_onDidSashReset","inverseAltBehavior","proportionalLayout","el","sashContainer","viewContainer","_orthogonalStartSash","sash","orthogonalStartSash","_orthogonalEndSash","orthogonalEndSash","isTransparent","removeProperty","setProperty","addView","view","Busy","insertBefore","viewSize","onChangeDisposable","onViewChange","containerDisposable","disposable","layoutContainer","getViewSize","minimumSize","highPriorityIndex","orientation_1","layoutProvider","getSashPosition","getVerticalSashLeft","sash_1","sashEventMapper","alt","onStartDisposable","onStart","onSashStart","onChangeDisposable_1","onSashChange","onEndDisposable","onEnd","onSashEnd","onDidResetDisposable","onDidReset","disposable_1","sashItem","relayout","distributeViewSizes","lowPriorityIndex","lowPriorityIndexes","highPriorityIndexes","resize","distributeEmptySpace","layoutViews","saveProportions","previousSize","maximumSize","priority","resetSashDragState","sashDragState","viewItem","sizes","minDelta","NEGATIVE_INFINITY","maxDelta","POSITIVE_INFINITY","delta","newDelta","isLastSash","newSizes","viewItemIndex","newMinDelta","newMaxDelta","resizeIndex","resizeView","downIndexes","collapseDown","expandDown","deltaDown","upIndexes","collapseUp","expandUp","deltaUp","overloadMinDelta","overloadMaxDelta","highPriorityIndexes_1","index_1","lowPriorityIndexes_1","index_2","upItems","upSizes","downItems","downSizes","minDeltaUp","maxDeltaUp","maxDeltaDown","minDeltaDown","emptyDelta","collapsesDown","expandsDown","reverseViews","collapsesUp","expandsUp","DecorationsManager","_decorationIgnoreSet","_callOnModelChange","_onModelChanged","removeDecorations","onDidChangeDecorations","_onDecorationChanged","newDecorationsActualIndex","oneReference","DecorationOptions","toRemove","newRange","spansMultipleLines","LayoutData","fromJSON","ratio","JSON","ctxReferenceWidgetSearchTreeFocused","ReferenceWidget","_defaultTreeKeyboardSupport","layoutData","_textModelResolverService","_peekViewService","_disposeOnNewModel","_onDidSelectReference","_dim","setModel","_previewNotAvailableMessage","_tree","_previewModelReference","_splitView","peekViewBorder","peekViewTitleBackground","peekViewTitleForeground","peekViewTitleInfoForeground","domFocus","_getFocusedReference","metaKey","containerElement","_messageContainer","_previewContainer","scrollBeyondLastLine","scrollbar","verticalScrollbarSize","horizontal","useShadows","verticalHasArrows","horizontalHasArrows","overviewRulerLanes","fixedOverflowWidgets","minimap","createFromString","_treeContainer","treeOptions","keyboardSupport","accessibilityProvider","keyboardNavigationLabelProvider","identityProvider","onEvent","_revealReference","onDidChangeFocus","onDidChangeSelection","_goto","browserEvent","KeyboardEvent","onDidOpen","aside","MouseEvent","_goto2","setFocus","newModel","_onNewModel","_decorationsManager","rerender","setInput","getFocus","revealParent","promise","scrollType","sel","_revealedReference","inMemory","getInput","expand","collapseToStart","revealRangeInCenter","peekViewResultsBackground","black","peekViewResultsMatchForeground","peekViewResultsFileForeground","peekViewResultsSelectionBackground","peekViewResultsSelectionForeground","peekViewEditorBackground","peekViewEditorGutterBackground","peekViewResultsMatchHighlight","peekViewEditorMatchHighlight","peekViewEditorMatchHighlightBorder","findMatchHighlightColor","referenceHighlightColor","referenceHighlightBorder","hcOutline","resultsBackground","resultsMatchForeground","resultsFileForeground","resultsSelectedBackground","resultsSelectedForeground","editorBackground","editorGutterBackground","ctxReferenceSearchVisible","ReferencesController","_editorService","_requestIdPool","_ignoreModelChangeEvent","_referenceSearchVisible","toggleWidget","modelPromise","widgetPosition","closeWidget","stringify","onDidSelectReference","openReference","onGoto","_gotoReference","requestId","getMetaTitle","goToNextOrPreviousReference","fwd","currentPosition","editorFocus","openCodeEditor","openedEditor","sideBySide","getDefinitions","registry","provide","getDefinitionsAtPosition","provideDefinition","getDeclarationsAtPosition","provideDeclaration","getImplementationsAtPosition","provideImplementation","getTypeDefinitionsAtPosition","provideTypeDefinition","DefinitionActionConfig","openToSide","openInPeek","filterCurrent","DefinitionAction","configuration","_configuration","editorService","definitionPromise","_getTargetLocationForPosition","idxOfCurrent","newLen","isDisposed","_openReference","_onResult","_getNoResultFoundMessage","_getMetaTitle","msg","gotoLocation","targetEditor","multiple","_openInPeek","revealIfOpened","revealInCenterIfOutsideViewport","goToDefinitionKb","GoToDefinitionAction","hasDefinitionProvider","isInEmbeddedEditor","registerCommandAlias","OpenDefinitionToSideAction","PeekDefinitionAction","DeclarationAction","GoToDeclarationAction","hasDeclarationProvider","PeekDeclarationAction","ImplementationAction","GoToImplementationAction","hasImplementationProvider","PeekImplementationAction","TypeDefinitionAction","GoToTypeDefinitionAction","hasTypeDefinitionProvider","PeekTypeDefinitionAction","hasModifier","modifier","triggerModifier","hasSideBySideModifier","triggerSideBySideModifier","isNoneOrSingleMouseDown","ClickLinkKeyboardEvent","keyCodeIsTriggerKey","triggerKey","keyCodeIsSideBySideKey","triggerSideBySideKey","ClickLinkOptions","createOptions","multiCursorModifier","ClickLinkGesture","_onMouseMoveOrRelevantKeyDown","onMouseMoveOrRelevantKeyDown","_onExecute","onExecute","_onCancel","onCancel","lastMouseMoveEvent","hasTriggerKeyOnMouseDown","newOpts","onEditorMouseMove","resetHandler","scrollLeftChanged","GotoDefinitionWithMouseEditorContribution","modeService","toUnhook","previousPromise","linkGesture","startFindDefinition","gotoDefinition","currentWordUnderMouse","withKey","findDefinition","results","wordRange","previewValue","getPreviewValue","originSelectionRange","modeId","getModeIdByFilepathOrFirstLine","rangeToUse","getPreviewRangeBasedOnBrackets","MAX_SOURCE_PREVIEW_LINES","getPreviewRangeBasedOnIndentation","stripIndentationFromPreviewRange","previewRange","minIndent","endIndent","startIndent","ignoreFirstEmpty","currentBracket","lastBracket","open","isOpen","nextLineNumber","nextColumn","hoverMessage","inlineClassName","invokeWithinContext","onRelatedInformation","_lines","_longestLineLength","_relatedDiagnostics","WeakMap","_messageBlock","_relatedBlock","related","_scrollable","vertical","horizontalScrollbarSize","onScroll","scrollLeft","scrollTop","relatedInformation","lines_1","applyFontInfo","lastLineElement","lines_2","innerText","detailsElement","sourceElement","codeElement","relatedInformationNode","paddingTop","_c","relatedInformation_1","relatedResource","relatedMessage","scrollWidth","typicalFullwidthCharacterWidth","scrollHeight","setScrollDimensions","getHeightInLines","MarkerNavigationWidget","_onDidSelectRelatedInformation","onDidSelectRelatedInformation","_severity","Warning","_backgroundColor","editorMarkerNavigationBackground","colorId","editorMarkerNavigationError","editorMarkerNavigationWarning","Info","editorMarkerNavigationInfo","_parentContainer","_container","_message","showAtMarker","markerIdx","markerCount","severity","editorPosition","computeRequiredHeight","headingIconClassName","revealPositionInCenter","updateMarker","showStale","_heightInPixel","errorDefault","warningDefault","infoDefault","MarkerModel","_markers","_nextIdx","_toUnbind","_ignoreSelectionChange","_onCurrentMarkerChanged","_onMarkerSetChanged","setMarkers","currentMarker","oldMarker","compareMarker","withoutWatchingEditorPosition","_initIdx","found","isBeforeOrEqual","canNavigate","move","inCircles","oldIdx","atEdge","findMarkerAtPosition","MarkerController","_disposeOnClose","_widgetVisible","CONTEXT_MARKERS_NAVIGATION_VISIBLE","_cleanUp","getOrCreateModel","_getMarkers","_onMarkerChanged","prevMarkerKeybinding","nextMarkerKeybinding","LABEL","pinned","closeMarkersNavigation","onCurrentMarkerChanged","onMarkerSetChanged","focusEditor","changedResources","severities","MarkerNavigationAction","multiFile","_isNext","_multiFile","newMarker","NextMarkerAction","PrevMarkerAction","NextMarkerInFilesAction","PrevMarkerInFilesAction","MarkerCommand","ColorPickerModel","availableColorPresentations","presentationIndex","_onColorFlushed","onColorFlushed","_onDidChangeColor","onDidChangeColor","_onDidChangePresentation","onDidChangePresentation","originalColor","_colorPresentations","colorPresentations","presentation","selectNextColorPresentation","flushColor","guessColorPresentation","originalText","ColorPickerHeader","pickedColorNode","colorBox","Format","CSS","CLICK","isLighter","ColorPickerBody","pixelRatio","saturationBox","onDidSaturationValueChange","opacityStrip","onDidOpacityChange","hueStrip","onDidHueChange","hsva","h","SaturationBox","canvas","MOUSE_DOWN","origin","onDidChangePosition","offsetY","mouseUpListener","MOUSE_UP","stopMonitoring","paintSelection","offsetWidth","offsetHeight","paint","saturatedColor","ctx","whiteGradient","createLinearGradient","addColorStop","blackGradient","rect","fillStyle","fill","isMonitoring","Strip","overlay","slider","updateSliderPosition","onDidChangeTop","OpacityStrip","opaque","HueStrip","ColorPickerWidget","getHover","provideHover","hasRange","hasHtmlContent","contents","HoverOperation","computer","success","progress","hoverTime","_computer","_hoverTime","_firstWaitScheduler","_triggerAsyncComputation","_secondWaitScheduler","_triggerSyncComputation","_loadingMessageScheduler","_showLoadingMessage","_asyncComputationPromise","_asyncComputationPromiseDone","_completeCallback","_errorCallback","_progressCallback","setHoverTime","_firstWaitTime","_secondWaitTime","_loadingMessageTime","computeAsync","asyncResult","_withAsyncResult","_onError","computeSync","onResult","_onComplete","getResult","_onProgress","getResultWithLoadingMessage","ContentHoverWidget","disposables","_containerDomNode","updateFont","_showAtPosition","_showAtRange","_stoleFocus","getElementsByClassName","updateContents","onContentsChange","scanDomNode","maxHeight","GlyphHoverWidget","_showAtLineNumber","editorLayout","topForLineNumber","editorScrollTop","clientHeight","glyphMarginLeft","glyphMarginWidth","codeTags","getElementsByTagName","codeClasses","MarkdownRenderer","_modeService","_openerService","_onDidRenderCodeBlock","onDidRenderCodeBlock","codeBlockRenderer","languageAlias","getModeIdForLanguageName","triggerMode","getPromise","fontFamily","codeBlockRenderCallback","markdown","signalInnerHTML","_uriMassage","uris","revive","encodeURIComponent","withInnerHTML","dimensions","splitted","parameters","heightFromParams","widthFromParams","widthIsFinite","isFinite","heightIsFinite","attributes","values","strValue","span","querySelector","dataset","markedOptions","renderMarkdown","ColorHover","MarkerHover","ModesContentComputer","_markerDecorationsService","setRange","clearResult","colorDetector","lineDecorations","getLineDecorations","didFindColor","hoverRange","getMarker","isFromSynchronousComputation","_getLoadingMessage","ModesContentHoverWidget","markerDecorationsService","renderDisposable","_messages","_lastRange","_highlightDecorations","_isChangingDecorations","_hoverOperation","_withResult","delay","FOCUS","_colorPicker","BLUR","onModelDecorationsChanged","startShowingAt","filteredMessages","second","firstElement","secondElement","makeKey","hoverContentsEquals","_renderMessages","_shouldFocus","isColorPickerVisible","complete","renderRange","messages","renderColumn","highlightRange","createDocumentFragment","isEmptyHoverContent","containColorPicker","markdownDisposeables","markerMessages","color_1","editorModel_1","widget_1","updateEditorModel","textEdits","textEdit","identifier","additionalTextEdits","updateColorPresentations","colorListener","colorChangeListener","markdownHoverElement","hoverContentsElement","renderedContents","renderMarkerHover","markerHoverForStatusbar","renderMarkerStatusbar","markerHover","hoverElement","markerElement","messageElement","whiteSpace","opacity","paddingLeft","message_1","relatedInfoContainer","marginTop","cursor","messageElement_1","this_1","actionsElement","renderAction","commandId","codeActionsPromise","elementPosition","codeAction","actionOptions","actionContainer","iconClass","MarginComputer","_lineNumber","setLineNumber","toHoverMessage","lineDecorations_1","glyphMarginClassName","glyphMarginHoverMessage","ModesGlyphHoverWidget","openerService","_lastLineNumber","_markdownRenderer","_renderDisposeables","ModesHoverController","_isMouseDown","_hoverClicked","_hookEvents","_didChangeConfigurationHandler","_hideWidgets","_unhookEvents","_createHoverWidget","_glyphWidget","hideWidgetsEventHandler","hoverOpts","_isHoverEnabled","_isHoverSticky","sticky","_onEditorMouseMove","onDidChangeModelDecorations","_onModelDecorationsChanged","onMouseLeave","_onEditorScrollChanged","contentWidget","glyphWidget","targetType","epsilon","typicalHalfwidthCharacterWidth","horizontalDistanceToText","showContentHover","ShowHoverAction","editorHoverHighlightColor","hoverBackground","hoverBorder","actionsBackground","codeBackground","InPlaceReplaceCommand","originalSelection","_editRange","_originalSelection","_text","InPlaceReplaceController","editorWorkerService","up","currentRequest","modelURI","canNavigateValueSet","navigateValueSet","DECORATION","decorationRemover","InPlaceReplaceUp","InPlaceReplaceDown","TrimTrailingWhitespaceCommand","cursors","rLen","cursorIndex","cursorLen","maxLineColumn","minEditColumn","lastNonWhitespaceIndex","fromColumn","trimTrailingWhitespace","selectionId","CopyLinesCommand","isCopyingDown","_isCopyingDown","_startLineNumberDelta","_endLineNumberDelta","sourceLines","sourceText","_selectionDirection","getDirection","createWithDirection","getSpaceCnt","spacesCnt","generateIndent","tabsCnt","MoveLinesCommand","isMovingDown","autoIndent","_isMovingDown","_autoIndent","_moveEndLineSelectionShrink","modelLineCount","indentSize","indentConverter","buildIndentConverter","virtualModel","getLineTokens","otherLineNumber","movingLineNumber_1","movingLineText","insertingText_1","shouldAutoIndent","movingLineMatchResult","matchEnterRule","newIndentation","newSpaceCnt","oldIndentation","trimLeft","indentOfMovingLine","getGoodIndentForLine","oldSpaceCnt","ret","getIndentEditsOfMovingBlock","newIndentatOfMovingBlock","spaceCntOffset","indentOfFirstLine","oldIndent","shiftIndent","indentation","unshiftIndent","oneLineAbove","oneLineAboveText","validPrecedingLine","enter","getEnterAction","enterPrefix","enterAction","indentAction","Indent","IndentOutdent","Outdent","indentMetadataOfMovelingLine","getIndentMetadata","isCheapToTokenize","languageAtSelectionStart","getIndentRulesSupport","originalIndent","newIndent","SortLinesCommand","descending","getSortData","sortLines","canRun","linesToSort","AbstractCopyLinesAction","down","CopyLinesUpAction","CopyLinesDownAction","AbstractMoveLinesAction","MoveLinesUpAction","MoveLinesDownAction","AbstractSortLinesAction","selections_3","SortLinesAscendingAction","SortLinesDescendingAction","TrimTrailingWhitespaceAction","DeleteLinesAction","_getLinesToRemove","linesDeleted","cursorState","operations","mergedOperations","previousOperation","IndentLinesAction","_getCursors","context","OutdentLinesAction","InsertLineBeforeAction","lineInsertBefore","InsertLineAfterAction","lineInsertAfter","AbstractDeleteAllToBoundaryAction","primaryCursor","rangesToDelete","_getRangesToDelete","effectiveRanges","nextRange","endCursorState","_getEndCursorState","DeleteAllLeftAction","endPrimaryCursor","deletedLines","endCursor","newStartLine","unshift","deleteFromLine","deleteFromColumn","DeleteAllRightAction","JoinLinesAction","reducedSelections","lastSelection","previousValue","lineOffset","columnDeltaOffset","selectionEndPositionOffset","trimmedLinesContent","i_1","lineText","firstNonWhitespaceIdx","insertSpace","lineTextWithoutIndent","deleteSelection","resultSelection","TransposeAction","chars","AbstractCaseAction","_modifyText","UpperCaseAction","toLocaleUpperCase","LowerCaseAction","toLocaleLowerCase","TitleCaseAction","excludedChars","startUpperCase","currentChar","Link","_link","_provider","toJSON","resolveLink","LinksList","tuples","newLinks","_union","tuples_1","oldLinks","oldIndex","oldLen","oldLink","newLink","getLinks","lists","provideLinks","HOVER_MESSAGE_GENERAL_META","HOVER_MESSAGE_COMMAND_META","HOVER_MESSAGE_GENERAL_ALT","HOVER_MESSAGE_COMMAND_ALT","meta","collapseOnReplaceEdit","metaActive","altActive","altCommand","altCommandActive","metaCommand","metaCommandActive","LinkOccurrence","useMetaKey","_getOptions","isActive","activate","deactivate","LinkDetector","listenersToRemove","clickLinkGesture","cleanUpActiveLinkDecoration","onModelModeChanged","computePromise","activeLinksList","currentOccurrences","activeLinkDecorationId","err_1","occurance","links_1","occurrence_1","getLinkOccurrence","occurrence_2","occurrence","openLinkOccurrence","warn","decorations_1","decoration_1","currentOccurrence","OpenLinkAction","linkDetector","InsertCursorAbove","useLogicalLine","logicalLine","pushStackElement","setStates","addCursorUp","getAll","InsertCursorBelow","addCursorDown","InsertCursorAtEndOfEachLineSelected","getCursorsForSelection","currentLineMaxColumn","InsertCursorAtEndOfLineSelected","InsertCursorAtTopOfLineSelected","MultiCursorSessionResult","revealScrollType","MultiCursorSession","findController","isDisconnectedFromFindController","searchText","findState","addSelectionToNextFindMatch","allSelections","moveSelectionToNextFindMatch","lastAddedSelection","addSelectionToPreviousFindMatch","previousMatch","_getPreviousMatch","moveSelectionToPreviousFindMatch","selectAll","MultiCursorSelectionController","_session","_sessionDispose","_endSession","_beginSessionIfNeeded","session","_setSelections","_expandEmptyToWord","_applySessionResult","getSession","modelRangesContainSameText","resultingSelections","MultiCursorSelectionControllerAction","multiCursorController","AddSelectionToNextFindMatchAction","AddSelectionToPreviousFindMatchAction","MoveSelectionToNextFindMatchAction","MoveSelectionToPreviousFindMatchAction","SelectHighlightsAction","CompatChangeAll","SelectionHighlighterState","softEquals","SelectionHighlighter","selectionHighlight","updateSoon","_setState","_createState","findStateSearchString","mySearchString","hasFindOccurrences","allMatches","cmp","areIntersecting","_SELECTION_HIGHLIGHT","_SELECTION_HIGHLIGHT_OVERVIEW","selectedText","Context","Visible","MultipleSignatures","provideSignatureHelp","supports","modes","triggerKind","Invoke","isRetrigger","triggerCharacter","ParameterHintState","__assign","assign","Default","Pending","Active","hints","ParameterHintsModel","DEFAULT_DELAY","_onChangedHints","onChangedHints","retriggerChars","triggerId","throttledDelayer","onEditorConfigurationChange","onCursorChange","onModelContentChange","doTrigger","activeSignatureHelp","signatures","activeSignature","cycle","parameterHints","updateActiveSignature","triggerContext","isTriggered","signatureHelpTriggerCharacters","_d","_e","signatureHelpRetriggerCharacters","lastCharIndex","triggerCharCode","TriggerCharacter","ContentChange","ParameterHintsWidget","markdownRenderer","keyVisible","keyMultipleSignatures","visible","newParameterHints","createParamaterHintDOMNodes","onPreviousClick","onNextClick","overloads","signature","docs","userSelect","chain","on","updateMaxHeight","announcedLabel","hasParameters","renderParameters","activeParameter","renderDisposeables","documentation","currentOverload","labelToAnnounce","getParameterLabel","currentParameter","getParameterLabelOffsets","beforeSpan","paramSpan","afterSpan","paramIdx","param","ParameterHintsController","TriggerParameterHintsAction","hasSignatureHelpProvider","ParameterHintsCommand","defaultReferenceSearchOptions","ReferenceController","ReferenceAction","hasReferenceProvider","provideReferences","closeActiveReferenceSearch","withController","fn","outerEditor","getOuterEditor","includeDeclaration","control","not","listService","lastFocusedList","CONTEXT_RENAME_INPUT_VISIBLE","RenameInputField","_currentAcceptInput","_currentCancelInput","_visibleContextKey","updateStyles","_inputField","boxShadow","fontWeight","acceptInput","cancelInput","selectionStart","selectionEnd","disposeOnDone","always","revealLineInCenterIfOutsideViewport","getAttribute","RenameSkeleton","_providers","hasProvider","resolveRenameLocation","firstProvider","provideRenameEdits","newName","rejects","rejectReason","RenameController","_renameOperationIdPool","_renameInputField","_activeRename","operation","doRename","skeleton","loc","resolveLocationOperation","e_1","renameInputField","newNameOrFocusFlag","renameOperation","ariaSummary","acceptRenameInput","cancelRenameInput","RenameAction","hasRenameProvider","isUri","getActiveCodeEditor","RenameCommand","rename","WordSelectionRangeProvider","provideSelectionRanges","positions_1","bucket","_addInWordRanges","_addWordRanges","_addWhitespaceLine","lastCh","getLineLastNonWhitespaceColumn","BracketSelectionRangeProvider","_bracketsRightYield","_bracketsLeftYield","counts","t1","Date","now","_maxRounds","bracket","_maxDuration","close","findPrevBracket","closing","innerBracket","outerBracket","_addBracketLeading","startLine","aboveLine","column_1","SelectionRanges","mov","SmartSelectController","_ignoreSelection","_selectionListener","forward","arrays","AbstractSmartSelect","_forward","GrowSelectionAction","ShrinkSelectionAction","work","allRawRanges","allProviderRanges","oneProviderRanges","oneRawRanges","oneRanges","oneRawRanges_1","oneRangesWithTrivia","prev","cur","rangeNoWhitespace","rangeFull","_snippetSuggestSupport","MultipleSuggestions","MakesTextEdit","AcceptSuggestionsOnEnter","completion","score","distance","labelLow","sortTextLow","sortText","filterTextLow","filterText","cached_1","resolveCompletionItem","isDone_1","onCancellationRequested","CompletionOptions","snippetSortOrder","kindFilter","providerFilter","default","provideSuggestionItems","allSuggestions","wordUntil","defaultRange","clone","orderedGroups","hasResult","factory","provideCompletionItems","suggestions","suggestion","getSuggestionComparator","defaultComparator","_snippetComparators","snippetConfig","incomplete","resolving","maxItemsToResolve","items","items_1","onlyOnceSuggestions","Scanner","isDigitCharacter","isVariableCharacter","tokenText","_table","isNaN","Marker","Text","others","newChildren","_fixParent","children_1","child_1","TextmateSnippet","_this_1","TransformableMarker","Placeholder","compareByIndex","isFinalTabstop","Choice","transform","Transform","didMatch","regexp","_replace","FormatString","elseValue","shorthandName","ifValue","_toPascalCase","Variable","resolver","walk","visitor","marker_1","_placeholders","last_1","all_1","placeholderInfo","fullLen","enclosingPlaceholders","resolveVariables","SnippetParser","_scanner","insertFinalTabstop","enforceFinalTabstop","_token","snippet","_parse","placeholderDefaultValues","incompletePlaceholders","placeholderCount","incompletePlaceholders_1","defaultValues","defaultValues_1","_accept","_backTo","_until","_parseEscaped","_parseTabstopOrVariableName","_parseComplexPlaceholder","_parseComplexVariable","_parseAnything","_parseTransform","choice","_parseChoiceElement","variable","regexValue","regexOptions","_parseFormatString","complex","shorthand","CompositeSnippetVariableResolver","_delegates","SelectionBasedVariableResolver","lineLeadingWhitespace","varLeadingWhitespace_1","whitespaceCommonLength_1","rest","ModelBasedVariableResolver","name_1","dir","ClipboardBasedVariableResolver","_selectionIdx","_selectionCount","readText","CommentBasedVariableResolver","TimeBasedVariableResolver","getFullYear","getMonth","valueOf","getDate","getHours","getMinutes","getSeconds","dayNames","getDay","dayNamesShort","monthNames","monthNamesShort","WorkspaceBasedVariableResolver","_workspaceService","workspaceIdentifier","workspace","configPath","toWorkspaceIdentifier","filename","getColorGraceful","OneSnippet","_nestingLevel","_snippet","_offset","_placeholderGroups","placeholders","_placeholderGroupsIdx","_placeholderDecorations","toRemove_1","_initDecorations","placeholderOffset","placeholderLen","getPositionAt","_decor","inactiveFinal","inactive","skipThisPlaceholder","activePlaceholders","activeFinal","active","enclosingPlaceholder","id_1","computePossibleSelections","placeholdersWithEqualIndex_1","nested","assert","indexLastPlaceholder","nestedPlaceholder","placeholder_1","SnippetSession","overwriteBefore","overwriteAfter","adjustWhitespace","_templateMerges","_snippets","_template","_overwriteBefore","_overwriteAfter","_adjustWhitespace","templateLeadingWhitespace","normalizeIndentation","getEOL","adjustSelection","positionColumnBefore","positionColumnAfter","createEditsAndSnippets","snippets","modelBasedVariableResolver","workspaceService","firstBeforeText","firstAfterText","firstLineFirstNonWhitespace","indexedSelections","indexedSelections_1","extensionBefore","extensionAfter","snippetSelection","getOffsetAt","_logInfo","hasPlaceholder","_move","oneSelection","isAtFirstPlaceholder","isAtLastPlaceholder","isSelectionWithinPlaceholders","allPossibleSelections","array","SnippetController2","_logService","_snippetListener","_inSnippet","InSnippetMode","_hasNextTabstop","HasNextTabstop","_hasPrevTabstop","HasPrevTabstop","undoStopBefore","undoStopAfter","_doInsert","_modelVersionId","getAlternativeVersionId","_updateState","_handleChoice","_currentChoice","first_1","option","insertText","triggerSuggest","finish","resetSelection","isInSnippet","CommandCtor","ctrl","FileKind","SuggestAlternatives","_ckOtherSuggestions","OtherSuggestions","_listener","_acceptNext","_ignore","acceptNext","_moveIndex","_index","CompletionModel","lineContext","wordDistance","_snippetCompareFn","_compareCompletionItems","_items","_column","_wordDistance","_refilterKind","_lineContext","_compareCompletionItemsSnippetsUp","_compareCompletionItemsSnippetsDown","leadingLineContent","characterCountDelta","_filteredItems","_ensureCachedState","_isIncomplete","adopt","except","_stats","_createCachedState","suggestionCount","snippetCount","textCount","wordLow","scoreFn","filterGraceful","wordLen","wordPos","WordDistance","service","localityBonus","canComputeWordRanges","computeWordRanges","wordRanges","wordLines","bestWordRange","blockDistance","class_2","LineContext","auto","shy","leadingWord","shouldAutoTrigger","SuggestModel","_editorWorker","_triggerQuickSuggest","_triggerRefilter","_onDidCancel","_onDidTrigger","_onDidSuggest","onDidCancel","onDidTrigger","onDidSuggest","_currentSelection","_updateTriggerCharacters","_updateQuickSuggest","_updateActiveSuggestSession","editorIsComposing","onCompositionStart","onCompositionEnd","_refilterCompletionItems","_triggerCharacterListener","_completionModel","_quickSuggestDelay","quickSuggestionsDelay","suggestOnTriggerCharacters","supportsByTriggerCharacter","triggerCharacters","lastChar","retrigger","_requestToken","_context","prevSelection","quickSuggestions","snippetsPreventQuickSuggestions","lineTokens","tokenType","getStandardTokenType","findTokenIndexAtOffset","_onNewContext","onlyFrom","existingItems","suggestCtx","itemKindFilter","filteredTypes","cmpFn","adopted","oldLineContext","isFrozen","completionModel","getIconClasses","modelService","fileKind","ROOT_FOLDER","FOLDER","parseMetaData","META_DATA_LABEL","cssEscape","dotSegments","configuredLangId","mime","META_DATA_MIME","getModeId","getConfiguredLangId","editorSuggestWidgetBackground","editorSuggestWidgetBorder","editorSuggestWidgetForeground","editorSuggestWidgetSelectedBackground","editorSuggestWidgetHighlightForeground","colorRegExp","canExpandCompletionItem","triggerKeybindingLabel","_modelService","colorspan","main","iconLabel","typeLabel","readMore","configureFont","suggestFontSize","suggestLineHeight","fontSizePx","lineHeightPx","labelOptions","getIconTheme","hasFileIcons","from","FILE","hasFolderIcons","toggleDetails","SuggestionDetails","renderDisposeable","scrollDown","much","scrollUp","scrollBottom","pageDown","pageUp","setBorderWidth","SuggestWidget","telemetryService","ignoreFocusEvents","editorBlurTimeout","showTimeout","onDidSelectEmitter","onDidFocusEmitter","onDidHideEmitter","onDidShowEmitter","onDidSelect","onDidHide","onDidShow","maxWidgetWidth","listWidth","firstFocusInCurrentList","preferDocPositionTop","isAuto","focusedItem","listElement","details","applyIconStyle","showIcons","openController","shouldOpen","mouseSupport","listInactiveFocusBackground","listInactiveFocusOutline","onEditorLayoutChange","onListMouseDown","onSelectionChange","onListSelection","onFocusChange","onListFocus","onCursorSelectionChanged","suggestWidgetVisible","suggestWidgetMultipleSuggestions","expandDocsSettingFromStorage","expandSideOrBelow","_getSuggestionAriaAlertLabel","_ariaAlert","newAriaAlertLabel","_lastAriaAlertLabel","detailsBorderColor","focusBorderColor","detailsFocusBorderColor","currentSuggestionDetails","showDetails","stateChanged","listHeight","LOADING_MESSAGE","NO_SUGGESTIONS_MESSAGE","showTriggered","loadingTimeout","showSuggestions","selectionIndex","docsPositionPreviousWidgetY","visibleCount","stats","publicLog","getTelemetryData","selectNextPage","focusNextPage","selectNext","focusNext","selectLast","focusLast","selectPreviousPage","focusPreviousPage","selectPrevious","focusPrevious","selectFirst","focusFirst","getFocusedItem","getFocusedElements","toggleDetailsFocus","updateExpandDocsSetting","maxWidgetHeight","adjustDocsPosition","newHeight","updateListHeight","hideWidget","unfocusedHeight","contentHeight","maxVisibleSuggestions","cursorX","cursorY","widgetCoords","widgetX","widgetY","matchHighlight","WordContextKey","_ckAtEnd","AtEnd","_confListener","tabCompletion","_enabled","checkForWordEnd","AcceptOnCharacterOracle","accept","_onItem","onWillType","_active","acceptCharacters","acceptSuggestionOnCommitCharacter","commitCharacters","SuggestController","editorWorker","_memoryService","_sticky","_onDidSelectItem","autoAcceptOracle","makesTextEdit","acceptSuggestionOnEnter","insertTextRules","_alternatives","acceptSuggestionsOnEnter","updateFromConfig","keepAlternativeSuggestions","undoStops","modelVersionNow","columnDelta","memorize","canUndo","undo","_alertCompletionItem","triggerSuggestAndAcceptBest","positionNow","fallback","once","any","acceptSelectedSuggestion","acceptNextSuggestion","acceptPrevSuggestion","cancelSuggestWidget","selectNextSuggestion","selectNextPageSuggestion","selectLastSuggestion","selectPrevSuggestion","selectPrevPageSuggestion","selectFirstSuggestion","toggleSuggestionDetails","toggleSuggestionFocus","TriggerSuggestAction","hasCompletionItemProvider","SuggestCommand","ForceRetokenizeAction","flushTokens","sw","forceTokenization","elapsed","ToggleTabFocusModeAction","getTabFocusMode","setTabFocusMode","editorWordHighlight","editorWordHighlightStrong","editorWordHighlightBorder","editorWordHighlightStrongBorder","overviewRulerWordHighlightForeground","overviewRulerWordHighlightStrongForeground","ctxHasWordHighlights","getOccurrencesAtPosition","orderedByScore","provideDocumentHighlights","OccurenceAtPositionRequest","_wordRange","_getCurrentWordRange","_compute","currentWordRange","requestIsValid","SemanticOccurenceAtPositionRequest","TextualOccurenceAtPositionRequest","_selectionIsEmpty","currentSelectionIsEmpty","WordHighlighter","workerRequestTokenId","workerRequestCompleted","workerRequestValue","lastCursorPositionChangeTime","renderDecorationsTimer","_hasWordHighlights","_ignorePositionChangeEvent","occurrencesHighlight","_onPositionChanged","_stopAll","workerRequest","hasDecorations","_getSortedHighlights","moveNext","dest","moveBack","workerRequestIsValid","getTime","_beginRenderDecorations","myRequestId_1","currentTime","minimumRenderTime","renderDecorations","_getDecorationOptions","Write","_WRITE_OPTIONS","_TEXT_OPTIONS","_REGULAR_OPTIONS","WordHighlighterContribution","createWordHighlighterIfPossible","wordHighligher","WordHighlightNavigationAction","NextWordHighlightAction","PrevWordHighlightAction","TriggerWordHighlightAction","wordHighlight","wordHighlightStrong","selectionHighlightBorder","wordHighlightBorder","wordHighlightStrongBorder","MoveWordCommand","_inSelectionMode","inSelectionMode","_wordNavigationType","wordNavigationType","inPosition","outPosition","_moveTo","fromModelSelection","to","WordLeftCommand","moveWordLeft","WordRightCommand","moveWordRight","CursorWordStartLeft","CursorWordEndLeft","CursorWordLeft","CursorWordStartLeftSelect","CursorWordEndLeftSelect","CursorWordLeftSelect","CursorWordStartRight","CursorWordEndRight","CursorWordRight","CursorWordStartRightSelect","CursorWordEndRightSelect","CursorWordRightSelect","DeleteWordCommand","_whitespaceHeuristics","whitespaceHeuristics","deleteRange","_delete","DeleteWordLeftCommand","deleteWordLeft","DeleteWordRightCommand","deleteWordRight","DeleteWordStartLeft","DeleteWordEndLeft","DeleteWordLeft","DeleteWordStartRight","DeleteWordEndRight","DeleteWordRight","DeleteWordPartLeft","deleteWordPartLeft","DeleteWordPartRight","deleteWordPartRight","WordPartLeftCommand","moveWordPartLeft","CursorWordPartLeft","CursorWordPartLeftSelect","WordPartRightCommand","moveWordPartRight","CursorWordPartRight","CursorWordPartRightSelect","CONTEXT_ACCESSIBILITY_WIDGET_VISIBLE","AccessibilityHelpController","AccessibilityHelpWidget","_isVisibleKey","setClassName","setDisplay","_contentDomNode","_layout","emergencyConfOn","_buildContent","openingDocs","accessibilityHelpUrl","_descriptionForCommand","noKbMsg","charactersSelected","singleSelectionRange","singleSelection","multiSelectionRange","multiSelection","noSelection","getSelectionLabel","wrappingInfo","inDiffEditor","readonlyDiffEditor","editableDiffEditor","readonlyEditor","editableEditor","turnOnMessage","changeConfigToOnMac","changeConfigToOnWinLinux","auto_on","auto_off","tabFocusMode","tabFocusModeOnMsg","tabFocusModeOnMsgNoKb","tabFocusModeOffMsg","tabFocusModeOffMsgNoKb","openDocMac","openDocWinLinux","outroMsg","w","WIDTH","HEIGHT","setWidth","setHeight","setTop","setLeft","ShowAccessibilityHelpAction","showAccessibilityHelpAction","AccessibilityHelpCommand","IPadShowKeyboard","shouldHaveWidget","ShowKeyboardWidget","InspectTokensController","standaloneColorService","launch","InspectTokens","inspectTokensAction","InspectTokensWidget","_tokenizationSupport","languageIdentifier","tokenizationSupport","getInitialState","tokenize","deltaOffset","tokenize2","getSafeTokenizationSupport","_ID","_getTokensAtLine","token1Index","tokens1","token2Index","tokens2","tokenStartIndex","tokenEndIndex","charIndex","charCode","renderTokenText","metadata","_decodeMetadata","_tokenTypeToString","_fontStyleToString","fontStyle","formatHex","colorMap","getColorMap","getLanguageId","getTokenType","getFontStyle","getForeground","getBackground","stateBeforeLine","_getStateBeforeLine","tokenizationResult1","tokenizationResult2","startState","endState","KeybindingLabel","os","areSame","getParts","firstPart","chordPart","renderPart","renderUnboundKeybindings","renderUnbound","modifierLabels","renderKey","separator","keyLabel","IDS","QuickOpenEntry","labelHighlights","descriptionHighlights","getLabelOptions","getDescription","getDetail","getIcon","getTooltip","getDescriptionTooltip","getKeybinding","hidden","setHighlights","detailHighlights","getHighlights","QuickOpenEntryGroup","groupLabel","withBorder","getGroupLabel","setGroupLabel","showBorder","setShowBorder","NoActionProvider","hasActions","tree","actionProvider","actionRunner","entryContainer","row1","row2","keybindingContainer","detailContainer","actionBarContainer","actionBar","groupData","pickerGroupBorder","pickerGroupForeground","QuickOpenModel","_entries","_dataSource","_renderer","_filter","_runner","_accessibilityProvider","modelProvider","dataSource","getParent","AccessibilityProvider","getPosInSet","getSetSize","Filter","KeybindingDispatcher","_arr","dispatch","toChord","DefaultController","clickBehavior","openMode","downKeyBindingDispatcher","upKeyBindingDispatcher","onUp","onDown","onLeft","onRight","onPageUp","onPageDown","onHome","onSpace","onEscape","onEnter","onLeftClick","eventish","payload","originalEvent","didClickOnTwistie","isClickOnTwistie","clearFocus","clearSelection","shouldToggleExpansion","isExpanded","collapse","errors","isDoubleClick","openOnSingleClick","twistieStyle","window","getComputedStyle","backgroundImage","twistieWidth","onTap","initialTarget","onKey","bindings","toKeybinding","getHighlight","clearHighlight","focus_1","didCollapse","focusParent","focus_2","didExpand","focusFirstChild","toggleExpansion","DefaultDragAndDrop","getDragURI","onDragStart","onDragOver","targetElement","drop","DefaultFilter","DefaultAccessibilityProvider","DefaultTreestyler","styleElement","selectorSuffix","listFocusBackground","listFocusForeground","listActiveSelectionBackground","listActiveSelectionForeground","listFocusAndSelectionBackground","listFocusAndSelectionForeground","listInactiveSelectionBackground","listInactiveSelectionForeground","listHoverBackground","listHoverForeground","listDropBackground","listFocusOutline","newStyles","LockData","_onDispose","onDispose","_item","Lock","locks","isLocked","lock","getLock","ItemRegistry","_onDidRevealItem","onDidRevealItem","_onExpandItem","onExpandItem","_onDidExpandItem","onDidExpandItem","_onCollapseItem","onCollapseItem","_onDidCollapseItem","onDidCollapseItem","_onDidAddTraitItem","onDidAddTraitItem","_onDidRemoveTraitItem","onDidRemoveTraitItem","_onDidRefreshItem","onDidRefreshItem","_onRefreshItemChildren","onRefreshItemChildren","_onDidRefreshItemChildren","onDidRefreshItemChildren","_onDidDisposeItem","onDidDisposeItem","isRegistered","onDidReveal","onExpand","onDidExpand","onCollapse","onDidCollapse","onDidAddTrait","onDidRemoveTrait","onDidRefresh","onRefreshChildren","onDidRefreshChildren","deregister","getItem","Item","_onDidCreate","_onDidReveal","_onExpand","_onDidExpand","_onCollapse","_onDidCollapse","_onDidAddTrait","_onDidRemoveTrait","_onDidRefresh","_onRefreshChildren","_onDidRefreshChildren","_onDidDispose","doesHaveChildren","needsChildrenRefresh","lastChild","traits","shouldAutoexpand","_getHeight","getElement","getDepth","setVisible","_setExpanded","relativeTop","eventData","refreshChildren","autoExpandSingleChildren","recursive","collapseChildrenPromise_1","forEachChild","addTrait","trait","removeTrait","hasTrait","getAllTraits","safe","setNeedsChildrenRefresh_1","doRefresh","isNested","staleItems","addChild","staleItemId","mapEachChild","updateVisibility","refresh","getNavigator","TreeNavigator","isAncestorOf","startItem","afterItem","atHead","atTail","isFirstChild","isLastChild","NaN","sorter","otherElement","RootItem","subTreeOnly","lastDescendantOf","parent_1","TreeModel","_onSetInput","onSetInput","_onDidSetInput","onDidSetInput","_onRefresh","onRefresh","_onDidHighlight","onDidHighlight","_onDidSelect","_onDidFocus","traitsToItems","setHighlight","registryDisposable","resolveUnknownParentChain","eventPayload","setTraits","includeHidden","getElementsWithTrait","nextItem","nav","previousItem","focusNth","navItem","fromItem","removeTraits","traitItems","itemsToRemoveTrait","ElementsDragAndDropData","dataTransfer","getData","ExternalElementsDragAndDropData","DesktopDragAndDropData","files","HeightMap","heightMap","getContentHeight","onInsertItems","afterItemId","totalSize","sizeDiff","boundSplice","itemsToInsert","createViewItem","onInsertItem","onRefreshItem","onRemoveItems","itemId","onRemoveItem","onRefreshItemSet","sortedItems","onRefreshItems","cummDiff","needsRender","indexAt","center","indexAfter","itemAtIndex","itemAfter","ContextMenuEvent","_posx","_posy","_target","MouseContextMenuEvent","KeyboardContextMenuEvent","RowCache","_cache","alloc","cache","release","removeFromParent","garbageCollect","cachedRow","ViewItem","unbindDragStart","_styles","addClass","removeClass","_draggable","_templateId","skipUserRender","draggable","accessibility","base64Id","paddingOnRow","twistiePixels","indentPixels","firstElementChild","dnd","horizontalScrolling","insertInDOM","afterElement","BINDING","removeFromDOM","RootViewItem","TreeView","lastClickTimeStamp","contentWidthUpdateDelayer","isRefreshing","refreshingPreviousChildrenIds","currentDragAndDropData","currentDropTarget","currentDropTargets","currentDropDisposable","dragAndDropScrollInterval","dragAndDropScrollTimeout","dragAndDropMouseY","onHiddenScrollTop","_onDOMFocus","_onDOMBlur","_onDidScroll","counter","instance","horizontalScrollMode","modelListeners","viewListeners","preventRootFocus","treeStyler","styler","alwaysFocused","scrollableElement","alwaysConsumeMouseWheel","verticalScrollMode","msTouchAction","msContentZooming","addTarget","rowsContainer","showTwistie","focusTracker","button","onMouseMiddleClick","Tap","Change","onTouchChange","onMsPointerDown","onMsGestureTap","onThrottledMsGestureChange","lastEvent","translationY","translationX","onDrop","onDragEnd","lastRenderTop","lastRenderHeight","didJustPressContextMenuKey","shouldInvalidateDropReaction","onRowsChanged","setupMSGesture","getHTMLElement","isFocused","MSGesture","msGesture","isTreeVisible","viewHeight","viewWidth","renderTop","renderBottom","thisRenderBottom","insertItemInDOM","removeItemFromDOM","topItem","releaseModel","onRefreshing","onRefreshed","onClearingInput","onModelFocusChange","onItemChildrenRefreshing","onItemChildrenRefreshed","onItemRefresh","onItemExpanding","onItemExpanded","onItemCollapsing","onItemReveal","onItemAddTrait","onItemRemoveTrait","updateScrollWidth","keys_1","lastPageIndex","lastPageElement","previousScrollTop","firstPageIndex","firstPageElement","getScrollDimensions","getScrollPosition","setScrollPosition","inputItem","showLoading","loadingTimer","loading","LOADING_DECORATION_DELAY","childrenIds","navigator_1","childItem","previousChildrenIds_1","afterModelItems_1","navigator_2","skipDiff","doToInsertItemsAlreadyExist","getLength","getElementAtIndex","ComputeDiff","modifiedLength","modifiedStart","diff_1","diffChange","originalLength","originalStart","beforeItem","onItemsRefresh","viewItemBottom","wrapperBottom","highlightedItemWasDraggable","refreshViewItem","shouldBeRendered","lastPointerType","getItemAround","resultEvent","effectAllowed","setData","RESOURCES","setDragImage","getDragLabel","dragImage_1","CurrentDragAndDropData","setupDragAndDropScrollInterval","viewTop","setInterval","scrollDiff","upperLimit","cancelDragAndDropScrollTimeout","cancelDragAndDropScrollInterval","clearInterval","DRAG_LEAVE","dropTarget","currentDropElement","reaction","bubble","canDrop","dropEffect","effect","one","currentDropElementReaction","autoExpand","timeoutPromise_1","event_1","pointerType","MSPOINTER_TYPE_MOUSE","MSPOINTER_TYPE_TOUCH","addPointer","pointerId","elementFromPoint","clientX","clientY","elementAfter","parentNode","Tree","_onDidChangeFocus","_onDidChangeSelection","_onHighlightChange","onDOMFocus","isDOMFocused","domBlur","progressBarBackground","ProgressBar","workedVal","showDelayedScheduler","off","totalWork","doDone","delayed","QuickOpenController","widgetShadow","DEFAULT_INPUT_ARIA_LABEL","QuickOpenWidget","callbacks","CONTEXT_MENU","gainingFocus","loosingFocus","KEY_DOWN","stops","currentTarget","querySelectorAll","progressBar","inputContainer","inputPlaceHolder","INPUT","onType","shouldOpenInBackground","navigateInTree","elementSelected","resultCount","treeContainer","createTree","treeCreator","treeElement","elementFocused","quickNavigateConfiguration","KEY_UP","quickNavKeys","keybindings","layoutDimensions","helpText","isShift","oldFocus","newFocus","arivaActiveDescendant","keymods","extractKeyMods","runner","preferredMode","ctrlCmd","isLoosingFocus","doShowWithPrefix","restoreLastInput","doShowWithInput","autoFocus","inputSelection","onShow","lastInput","setInputAndLayout","isElementVisible","updateResultCount","autoFocusPrefixMatch","caseSensitiveMatch","caseInsensitiveMatch","lowerCasePrefix","entries_1","entryToFocus","autoFocusFirstEntry","autoFocusIndex","autoFocusSecondEntry","autoFocusLastEntry","itemHeight","minItemsToShow","preferredItemsHeight","MAX_ITEMS_HEIGHT","maxEntries","maxItemsToShow","entryHeight","onOk","onInputChanging","inputChangingTimeoutHandle","dimension","quickOpenWidth","MAX_WIDTH","relatedTarget","onFocusLost","QuickOpenEditorWidget","quickOpenWidget","inputAriaLabel","destroy","onClose","clearDecorations","lastKnownEditorSelection","getAutoFocus","decorateLine","rangeHighlightDecorationId","BaseEditorQuickOpenAction","_inputAriaLabel","getController","searchValue","GotoLineEntry","parseResult","parseInput","numbers","diffModel","modified","validatePosition","gotoLineLabelValidLineAndColumn","gotoLineLabelValidLine","gotoLineLabelEmptyWithLineLimit","gotoLineLabelEmptyWithLineAndColumnLimit","currentLine","gotoLineAriaLabel","runOpen","runPreview","toSelection","GotoLineAction","gotoLineActionInput","gotoLineActionLabel","EditorActionCommandEntry","keyAriaLabel","ariaLabelEntryWithKey","ariaLabelEntry","QuickCommandAction","quickCommandActionInput","quickCommandActionLabel","_editorActionsToEntries","_sort","elementA","elementB","elementAName","elementBName","actions_1","getSupportedActions","getDocumentSymbols","flat","roots","provideDocumentSymbols","flatEntries","flatten","overrideContainerLabel","containerName","selectionRange","compareEntriesUsingStart","SymbolEntry","entryAriaLabel","getRange","QuickOutlineAction","quickOutlineActionInput","quickOutlineActionLabel","hasDocumentSymbolProvider","toQuickOpenEntries","symbolEntry","flattened","normalizedSearchValue","flattened_1","sortScoped","sortNormal","currentType","currentResult","typeCounter","typeToLabel","_symbols_","_modules_","_class_","_interface_","_method_","_function_","_property_","_variable_","_variable2_","_constructor_","_call_","elementARange","elementBRange","elementAType","elementBType","r_1","StandaloneReferencesController","configurationService","ToggleHighContrast","toggleHighContrast","_originalThemeName","standaloneThemeService","setTheme","themeName"],"mappings":"u6BAoJIA,EAYAC,EASAC,EAOAC,EAcAC,E,SAtLAC,EAAUC,OAAOD,QAEjBE,EAEJ,WACE,SAASA,EAA4BC,EAAiBC,GACpDC,KAAKC,aAAe,IAAIN,EACxBK,KAAKE,sBAAwB,IAAIP,EACjCK,KAAKG,WAAaC,OAAOC,OAAO,MAChCL,KAAKM,mBAAqB,KAC1BN,KAAKO,mBAAmBT,GACxBE,KAAKQ,sBAAsBT,GAC3BC,KAAKS,8BAAgC,EA2HvC,OAxHAL,OAAOM,eAAeb,EAA4Bc,UAAW,cAAe,CAC1EC,IAAK,WACH,OAAOZ,KAAKC,aAAaY,OAE3BC,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAeb,EAA4Bc,UAAW,uBAAwB,CACnFC,IAAK,WACH,OAAOZ,KAAKE,sBAAsBW,OAEpCC,YAAY,EACZC,cAAc,IAGhBlB,EAA4Bc,UAAUK,aAAe,WACnD,OAAOhB,KAAKG,YAGdN,EAA4Bc,UAAUM,YAAc,SAAUC,EAASC,GACrE,IAAIC,EAAQpB,KAMZ,GAJwB,qBAAbmB,IACTA,EAAW,eAAiBE,KAAKC,SAASC,SAAS,IAAIC,UAAU,EAAG,KAGlExB,KAAKG,WAAWgB,IAAanB,KAAKG,WAAWgB,GAAUD,UAAYA,EAErE,MAAO,CACLO,QAAS,cAIb,IAAIC,EAAY,EAahB,OAXI1B,KAAKG,WAAWgB,KAClBO,EAAY1B,KAAKG,WAAWgB,GAAUQ,QAAU,GAGlD3B,KAAKG,WAAWgB,GAAY,CAC1BD,QAASA,EACTS,QAASD,GAGX1B,KAAK4B,gCAEE,CACLH,QAAS,WACP,IAAII,EAAWT,EAAMjB,WAAWgB,GAE3BU,GAIDA,EAASF,UAAYD,WAIlBN,EAAMjB,WAAWgB,GAExBC,EAAMQ,oCAKZ/B,EAA4Bc,UAAUiB,8BAAgC,WACpE,IAAIR,EAAQpB,MAE+B,IAAvCA,KAAKS,+BAKTT,KAAKS,6BAA+BqB,WAAW,WAC7CV,EAAMX,8BAAgC,EAEtCW,EAAMlB,sBAAsB6B,UAAKC,IAChC,KAGLnC,EAA4Bc,UAAUsB,mBAAqB,WACzD,OAAOjC,KAAKkC,kBAGdrC,EAA4Bc,UAAUJ,mBAAqB,SAAU4B,GACnEnC,KAAKkC,iBAAmBC,GAAW/B,OAAOC,OAAO,MAEjDL,KAAKC,aAAa8B,UAAKC,IAGzBnC,EAA4Bc,UAAUyB,sBAAwB,WAC5D,OAAOpC,KAAKqC,qBAGdxC,EAA4Bc,UAAUH,sBAAwB,SAAU2B,GACtEnC,KAAKqC,oBAAsBF,GAAW/B,OAAOC,OAAO,MAEpDL,KAAKC,aAAa8B,UAAKC,IAGzBnC,EAA4Bc,UAAU2B,yBAA2B,SAAUC,GAGzEvC,KAAKM,mBAAqBiC,GAG5B1C,EAA4Bc,UAAU6B,qBAAuB,WAC3D,OAAOxC,KAAKM,oBAGdT,EAA4Bc,UAAU8B,kBAAoB,SAAUF,GAGlEvC,KAAK0C,gBAAkBH,GAGzB1C,EAA4Bc,UAAUgC,kBAAoB,WACxD,OAAO3C,KAAK0C,iBAGP7C,EAnIT,IA0IA,SAAWP,GACTA,EAAWA,EAAiB,KAAI,GAAK,OACrCA,EAAWA,EAAqB,SAAI,GAAK,WACzCA,EAAWA,EAAgB,IAAI,GAAK,MACpCA,EAAWA,EAAgB,IAAI,GAAK,MACpCA,EAAWA,EAAmB,OAAI,GAAK,SACvCA,EAAWA,EAAmB,OAAI,GAAK,SACvCA,EAAWA,EAAmB,OAAI,GAAK,SAPzC,CAQGA,IAAeA,EAAa,KAI/B,SAAWC,GACTA,EAAQA,EAAc,KAAI,GAAK,OAC/BA,EAAQA,EAAkB,SAAI,GAAK,WACnCA,EAAQA,EAAe,MAAI,GAAK,QAChCA,EAAQA,EAAqB,YAAI,GAAK,cAJxC,CAKGA,IAAYA,EAAU,KAIzB,SAAWC,GACTA,EAAYA,EAAoC,uBAAI,GAAK,yBACzDA,EAAYA,EAAsB,SAAI,GAAK,WAF7C,CAGGA,IAAgBA,EAAc,KAIjC,SAAWC,GACTA,EAAaA,EAAkB,IAAI,GAAK,MACxCA,EAAaA,EAAkB,IAAI,GAAK,MACxCA,EAAaA,EAAqB,OAAI,GAAK,SAC3CA,EAAaA,EAAqB,OAAI,GAAK,SAC3CA,EAAaA,EAAqB,OAAI,GAAK,SAC3CA,EAAaA,EAAqB,OAAI,GAAK,SAC3CA,EAAaA,EAAqB,OAAI,GAAK,SAC3CA,EAAaA,EAAmB,KAAI,KAAO,OAC3CA,EAAaA,EAAqB,OAAI,GAAK,SAT7C,CAUGA,IAAiBA,EAAe,KAInC,SAAWC,GACTA,EAAqBA,EAA8B,QAAI,GAAK,UAC5DA,EAAqBA,EAA6B,OAAI,GAAK,SAF7D,CAGGA,IAAyBA,EAAuB,KAGnD,IAAIkD,EAAqB,IAAI/C,EAA4B,CACvDgD,sBAAsB,EACtBC,OAAQrD,EAAasD,QACpB,CACDC,sBAAsB,EACtBC,oBAAoB,IAElBC,EAAqB,IAAIrD,EAA4B,CACvDgD,sBAAsB,EACtBM,SAAS,EACTL,OAAQrD,EAAasD,QACpB,CACDC,sBAAsB,EACtBC,oBAAoB,IAGtB,SAASG,IACP,OAAOC,IAAUC,KAAK,SAAUC,GAC9B,OAAOA,EAAKH,wBAIhB,SAASI,IACP,OAAOH,IAAUC,KAAK,SAAUC,GAC9B,OAAOA,EAAKC,wBAqBhB,SAASH,IACP,OAAO,+BAHTzD,OAAO6D,UAAUC,WAbR,CACLpE,WAAYA,EACZC,QAASA,EACTC,YAAaA,EACbC,aAAcA,EACdC,qBAAsBA,EACtBkD,mBAAoBA,EACpBM,mBAAoBA,EACpBE,oBAAqBA,EACrBI,oBAAqBA,GAUzB5D,OAAO6D,UAAUE,WAAW,aAAc,WACxC,OAAON,IAAUC,KAAK,SAAUC,GAC9B,OAAOA,EAAKK,gBAAgBhB,OAGhChD,OAAO6D,UAAUE,WAAW,aAAc,WACxC,OAAON,IAAUC,KAAK,SAAUC,GAC9B,OAAOA,EAAKM,gBAAgBX,OCtPhC,IAAI,EAAUtD,OAAOD,QAEjB,EAEJ,WACE,SAASE,EAA4BiE,EAAY/D,GAC/CC,KAAKC,aAAe,IAAI,EACxBD,KAAK+D,YAAcD,EACnB9D,KAAKQ,sBAAsBT,GA+B7B,OA5BAK,OAAOM,eAAeb,EAA4Bc,UAAW,cAAe,CAC1EC,IAAK,WACH,OAAOZ,KAAKC,aAAaY,OAE3BC,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAeb,EAA4Bc,UAAW,aAAc,CACzEC,IAAK,WACH,OAAOZ,KAAK+D,aAEdjD,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAeb,EAA4Bc,UAAW,qBAAsB,CACjFC,IAAK,WACH,OAAOZ,KAAKqC,qBAEdvB,YAAY,EACZC,cAAc,IAGhBlB,EAA4Bc,UAAUH,sBAAwB,SAAU2B,GACtEnC,KAAKqC,oBAAsBF,GAAW/B,OAAOC,OAAO,MAEpDL,KAAKC,aAAa8B,KAAK/B,OAGlBH,EAnCT,GAuCImE,EAAoB,CACtBC,UAAU,EACVC,KAAM,CACJC,yBAA0B,SAC1BC,aAAc,UACdC,oBAAqB,UACrBC,WAAY,UACZC,gBAAiB,SACjBC,SAAU,SACVC,kBAAmB,SACnBC,UAAW,SACXC,mBAAoB,UACpBC,eAAgB,QAChBC,yBAA0B,QAC1BC,kBAAmB,UACnBC,OAAQ,SACRC,gCAAiC,SACjCC,4BAA6B,UAC7BC,UAAW,SACXC,MAAO,SACPC,WAAY,WAGZC,EAAc,IAAI,EAA4B,MAAOrB,GACrDsB,EAAe,IAAI,EAA4B,OAAQtB,GACvDuB,EAAe,IAAI,EAA4B,OAAQvB,GAY3D,SAAS,IACP,OAAO,+BAHTpE,OAAO6D,UAAU+B,IAPR,CACLH,YAAaA,EACbE,aAAcA,EACdD,aAAcA,GAUlB1F,OAAO6D,UAAUE,WAAW,OAAQ,WAClC,IAAUL,KAAK,SAAUC,GACvB,OAAOA,EAAKkC,UAAUF,OAG1B3F,OAAO6D,UAAUE,WAAW,OAAQ,WAClC,IAAUL,KAAK,SAAUC,GACvB,OAAOA,EAAKkC,UAAUH,OAG1B1F,OAAO6D,UAAUE,WAAW,MAAO,WACjC,IAAUL,KAAK,SAAUC,GACvB,OAAOA,EAAKkC,UAAUJ,OChG1B,IAAI,EAAUzF,OAAOD,QAiDjB+F,EAAe,IA7CnB,WACE,SAAS7F,EAA4BiE,EAAY/D,GAC/CC,KAAKC,aAAe,IAAI,EACxBD,KAAK+D,YAAcD,EACnB9D,KAAKQ,sBAAsBT,GA+B7B,OA5BAK,OAAOM,eAAeb,EAA4Bc,UAAW,cAAe,CAC1EC,IAAK,WACH,OAAOZ,KAAKC,aAAaY,OAE3BC,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAeb,EAA4Bc,UAAW,aAAc,CACzEC,IAAK,WACH,OAAOZ,KAAK+D,aAEdjD,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAeb,EAA4Bc,UAAW,qBAAsB,CACjFC,IAAK,WACH,OAAOZ,KAAKqC,qBAEdvB,YAAY,EACZC,cAAc,IAGhBlB,EAA4Bc,UAAUH,sBAAwB,SAAU2B,GACtEnC,KAAKqC,oBAAsBF,GAAW/B,OAAOC,OAAO,MAEpDL,KAAKC,aAAa8B,KAAK/B,OAGlBH,EAnCT,GA6CmB,CAAgC,OAN3B,CACtBoE,UAAU,EACV0B,eAAe,EACfC,QAAS,GACTC,qBAAqB,IAUvBjG,OAAO6D,UAAUqC,KALR,CACLJ,aAAcA,GAUlB9F,OAAO6D,UAAUsC,SAAS,CACxBC,GAAI,OACJC,WAAY,CAAC,QAAS,WAAY,YAAa,UAAW,YAAa,YACvEC,QAAS,CAAC,OAAQ,QAClBC,UAAW,CAAC,sBAEdvG,OAAO6D,UAAUE,WAAW,OAAQ,WAT3B,+BAUGL,KAAK,SAAUC,GACvB,OAAOA,EAAKkC,UAAUC,OCvE1B,IAAI,EAAU9F,OAAOD,QAEjB,EAEJ,WACE,SAASE,EAA4BiE,EAAY3B,GAC/CnC,KAAKC,aAAe,IAAI,EACxBD,KAAK+D,YAAcD,EACnB9D,KAAKoG,WAAWjE,GA+BlB,OA5BA/B,OAAOM,eAAeb,EAA4Bc,UAAW,cAAe,CAC1EC,IAAK,WACH,OAAOZ,KAAKC,aAAaY,OAE3BC,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAeb,EAA4Bc,UAAW,aAAc,CACzEC,IAAK,WACH,OAAOZ,KAAK+D,aAEdjD,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAeb,EAA4Bc,UAAW,UAAW,CACtEC,IAAK,WACH,OAAOZ,KAAKqG,UAEdvF,YAAY,EACZC,cAAc,IAGhBlB,EAA4Bc,UAAUyF,WAAa,SAAUjE,GAC3DnC,KAAKqG,SAAWlE,GAAW/B,OAAOC,OAAO,MAEzCL,KAAKC,aAAa8B,KAAK/B,OAGlBH,EAnCT,GAuCIyG,EAAiB,CACnBC,QAAS,EACTC,cAAc,EACdC,eAAgB,IAChBC,YAAa,uLACbC,mBAAoB,MACpBC,iBAAiB,EACjBC,kBAAkB,EAClBC,oBAAqB,KACrBC,kBAAkB,EAClBC,gBAAgB,EAChBC,YAAa,oBACbC,eAAgB,QAUdC,EAA0B,CAC5BC,OAAQd,EACRe,QAAS,CACPC,OAAO,IAGPC,EAAsB,CACxBH,OAAQd,EACRe,QAAS,CACPC,OAAO,EACPE,OAAO,IAMPC,EAAe,IAAI,EAHF,OArBI,CACvBL,OAAQd,EACRe,QAAS,CACPC,OAAO,EACPI,UAAU,EACVC,OAAO,KAoBPC,EAAoB,IAAI,EAHD,aAGmDT,GAC1EU,EAAgB,IAAI,EAHF,QAG+CN,GAYrE,SAAS,IACP,OAAO,+BAHT3H,OAAO6D,UAAUqE,KAPR,CACLL,aAAcA,EACdI,cAAeA,EACfD,kBAAmBA,GAUvBhI,OAAO6D,UAAUE,WArBI,OAqBuB,WAC1C,IAAUL,KAAK,SAAUC,GACvB,OAAOA,EAAKkC,UAAUgC,OAG1B7H,OAAO6D,UAAUE,WAzBU,aAyBuB,WAChD,IAAUL,KAAK,SAAUC,GACvB,OAAOA,EAAKkC,UAAUmC,OAG1BhI,OAAO6D,UAAUE,WA7BK,QA6BuB,WAC3C,IAAUL,KAAK,SAAUC,GACvB,OAAOA,EAAKkC,UAAUoC,OCjH1B,IAAIE,EAA4B,qBAAXnI,OAAyBoI,KAAKpI,OAASA,OAExDqI,EAAsB,GAW1B,IAAIC,EAAmB,GAChB,SAASC,EAAarE,GAK3B,OAJKoE,EAAiBpE,KACpBoE,EAAiBpE,GAZrB,SAAuBA,GAErB,OAAOsE,EADMH,EAAoBnE,GAAYsE,UAC7B9E,KAAK,SAAU+E,GAC7BN,EAAQtE,UAAU6E,yBAAyBxE,EAAYuE,EAAIE,UAE3DR,EAAQtE,UAAU+E,yBAAyB1E,EAAYuE,EAAII,QAO5BC,CAAc5E,IAGxCoE,EAAiBpE,GAEnB,SAAS6E,EAAiBC,GAC/B,IAAI9E,EAAa8E,EAAI5C,GACrBiC,EAAoBnE,GAAc8E,EAElCb,EAAQtE,UAAUsC,SAAS6C,GAE3Bb,EAAQtE,UAAUE,WAAWG,EAAY,WACvCqE,EAAarE,KC3BjB6E,EAAiB,CACf3C,GAAI,MACJC,WAAY,CAAC,OAAQ,QACrBC,QAAS,CAAC,QAAS,OACnBkC,OAAQ,WACN,OAAO,kCCLXO,EAAiB,CACf3C,GAAI,eACJC,WAAY,CAAC,WACbC,QAAS,CAAC,eAAgB,eAAgB,UAC1CC,UAAW,CAAC,sBAAuB,qBACnCiC,OAAQ,WACN,OAAO,kCCNXO,EAAiB,CACf3C,GAAI,IACJC,WAAY,CAAC,KAAM,MACnBC,QAAS,CAAC,IAAK,KACfkC,OAAQ,WACN,OAAO,iCAGXO,EAAiB,CACf3C,GAAI,MACJC,WAAY,CAAC,OAAQ,MAAO,OAAQ,OAAQ,MAAO,QACnDC,QAAS,CAAC,MAAO,MAAO,OACxBkC,OAAQ,WACN,OAAO,iCCbXO,EAAiB,CACf3C,GAAI,SACJC,WAAY,CAAC,MAAO,OAAQ,SAC5BC,QAAS,CAAC,KAAM,UAChBkC,OAAQ,WACN,OAAO,kCCLXO,EAAiB,CACf3C,GAAI,MACJC,WAAY,GACZC,QAAS,CAAC,MAAO,OACjBkC,OAAQ,WACN,OAAO,kCCLXO,EAAiB,CACf3C,GAAI,MACJC,WAAY,CAAC,QACbC,QAAS,CAAC,MAAO,OACjBC,UAAW,CAAC,YACZiC,OAAQ,WACN,OAAO,kCCNXO,EAAiB,CACf3C,GAAI,aACJC,WAAY,CAAC,eACb4C,UAAW,CAAC,cACZ3C,QAAS,CAAC,cACVkC,OAAQ,WACN,OAAO,kCCNXO,EAAiB,CACf3C,GAAI,SACJC,WAAY,CAAC,MAAO,OAAQ,MAAO,OAAQ,OAAQ,aACnDC,QAAS,CAAC,KAAM,SAAU,UAC1BkC,OAAQ,WACN,OAAO,kCCLXO,EAAiB,CACf3C,GAAI,KACJC,WAAY,CAAC,OACbC,QAAS,CAAC,MACVkC,OAAQ,WACN,OAAO,kCCLXO,EAAiB,CACf3C,GAAI,aACJC,WAAY,CAAC,cAAe,QAC5BC,QAAS,CAAC,aAAc,cACxBC,UAAW,CAAC,8BACZiC,OAAQ,WACN,OAAO,kCCNXO,EAAiB,CACf3C,GAAI,OACJC,WAAY,CAAC,QAAS,OAAQ,SAAU,SAAU,QAAS,OAAQ,OAAQ,QAAS,UACpFC,QAAS,CAAC,OAAQ,MAAO,OAAQ,SACjCC,UAAW,CAAC,YAAa,eAAgB,gBAAiB,oBAC1DiC,OAAQ,WACN,OAAO,kCCNXO,EAAiB,CACf3C,GAAI,MACJC,WAAY,CAAC,OAAQ,cAAe,cACpC4C,UAAW,CAAC,SAAU,iBAAkB,aAAc,iBACtD3C,QAAS,CAAC,MAAO,OACjBkC,OAAQ,WACN,OAAO,kCCNXO,EAAiB,CACf3C,GAAI,OACJC,WAAY,CAAC,QAAS,QACtBC,QAAS,CAAC,OAAQ,QAClBC,UAAW,CAAC,qBAAsB,eAClCiC,OAAQ,WACN,OAAO,kCCNXO,EAAiB,CACf3C,GAAI,aACJC,WAAY,CAAC,MAAO,OAAQ,QAC5B6C,UAAW,eACXD,UAAW,CAAC,YACZ3C,QAAS,CAAC,aAAc,aAAc,MACtCC,UAAW,CAAC,mBACZiC,OAAQ,WACN,OAAO,iCCRXO,EAAiB,CACf3C,GAAI,SACJC,WAAY,CAAC,OACbC,QAAS,CAAC,SAAU,UACpBC,UAAW,CAAC,uBAAwB,iBACpCiC,OAAQ,WACN,OAAO,kCCNXO,EAAiB,CACf3C,GAAI,OACJC,WAAY,CAAC,SACbC,QAAS,CAAC,OAAQ,QAClBC,UAAW,CAAC,cAAe,aAC3BiC,OAAQ,WACN,OAAO,kCCNXO,EAAiB,CACf3C,GAAI,MACJC,WAAY,CAAC,QACbC,QAAS,CAAC,MAAO,OACjBkC,OAAQ,WACN,OAAO,kCCLXO,EAAiB,CACf3C,GAAI,WACJC,WAAY,CAAC,MAAO,YAAa,SAAU,QAAS,OAAQ,QAAS,SAAU,WAC/EC,QAAS,CAAC,WAAY,YACtBkC,OAAQ,WACN,OAAO,kCCLXO,EAAiB,CACf3C,GAAI,QACJC,WAAY,CAAC,OAAQ,UACrBC,QAAS,CAAC,MAAO,SACjBkC,OAAQ,WACN,OAAO,kCCLXO,EAAiB,CACf3C,GAAI,QACJC,WAAY,GACZC,QAAS,CAAC,QAAS,SACnBkC,OAAQ,WACN,OAAO,kCCLXO,EAAiB,CACf3C,GAAI,cACJC,WAAY,CAAC,MACbC,QAAS,CAAC,eACVkC,OAAQ,WACN,OAAO,kCCLXO,EAAiB,CACf3C,GAAI,SACJC,WAAY,CAAC,OAAQ,KAAM,OAC3BC,QAAS,CAAC,SAAU,OACpBC,UAAW,CAAC,uBAAwB,iBACpCiC,OAAQ,WACN,OAAO,kCCNXO,EAAiB,CACf3C,GAAI,QACJC,WAAY,GACZC,QAAS,CAAC,aAAc,WAAY,KAAM,WAC1CkC,OAAQ,WACN,OAAO,kCCLXO,EAAiB,CACf3C,GAAI,MACJC,WAAY,CAAC,OAAQ,QAAS,QAAS,SAAU,QACjDC,QAAS,CAAC,MAAO,OACjBC,UAAW,CAAC,qBACZiC,OAAQ,WACN,OAAO,kCCNXO,EAAiB,CACf3C,GAAI,WACJC,WAAY,CAAC,QAAS,QAAS,SAC/BC,QAAS,CAAC,MAAO,gBACjBkC,OAAQ,WACN,OAAO,kCCLXO,EAAiB,CACf3C,GAAI,aACJC,WAAY,CAAC,MAAO,QACpBC,QAAS,CAAC,KAAM,IAAK,cAAe,iBACpCkC,OAAQ,WACN,OAAO,kCCLXO,EAAiB,CACf3C,GAAI,aACJC,WAAY,CAAC,OAAQ,QAAS,SAC9BC,QAAS,CAAC,aAAc,aAAc,KAAM,OAC5CkC,OAAQ,WACN,OAAO,kCCLXO,EAAiB,CACf3C,GAAI,MACJC,WAAY,CAAC,QAAS,QACtBC,QAAS,CAAC,MAAO,OAAQ,QACzBkC,OAAQ,WACN,OAAO,kCCLXO,EAAiB,CACf3C,GAAI,SACJC,WAAY,CAAC,MAAO,OAAQ,OAAQ,OAAQ,OAAQ,SACpDC,QAAS,CAAC,SAAU,MACpB4C,UAAW,6BACXV,OAAQ,WACN,OAAO,kCCNXO,EAAiB,CACf3C,GAAI,IACJC,WAAY,CAAC,KAAM,YAAa,YAAa,OAC7CC,QAAS,CAAC,IAAK,KACfkC,OAAQ,WACN,OAAO,kCCLXO,EAAiB,CACf3C,GAAI,QACJC,WAAY,CAAC,WACbC,QAAS,CAAC,QAAS,SACnBC,UAAW,CAAC,iBACZiC,OAAQ,WACN,OAAO,kCCNXO,EAAiB,CACf3C,GAAI,QACJC,WAAY,CAAC,UACbC,QAAS,CAAC,SACVkC,OAAQ,WACN,OAAO,kCCLXO,EAAiB,CACf3C,GAAI,WACJC,WAAY,GACZC,QAAS,CAAC,WAAY,YACtBkC,OAAQ,WACN,OAAO,kCCLXO,EAAiB,CACf3C,GAAI,OACJC,WAAY,CAAC,MAAO,OAAQ,OAAQ,WAAY,OAChD4C,UAAW,CAAC,YACZ3C,QAAS,CAAC,OAAQ,MAClBkC,OAAQ,WACN,OAAO,kCCNXO,EAAiB,CACf3C,GAAI,OACJC,WAAY,CAAC,MAAO,SACpBC,QAAS,CAAC,OAAQ,QAClBkC,OAAQ,WACN,OAAO,kCCLXO,EAAiB,CACf3C,GAAI,KACJC,WAAY,CAAC,OACbC,QAAS,CAAC,cAAe,MACzBkC,OAAQ,WACN,OAAO,kCCLXO,EAAiB,CACf3C,GAAI,OACJC,WAAY,CAAC,SACbC,QAAS,CAAC,OAAQ,OAAQ,QAC1BC,UAAW,CAAC,cAAe,aAC3BiC,OAAQ,WACN,OAAO,kCCNXO,EAAiB,CACf3C,GAAI,MACJC,WAAY,CAAC,QACbC,QAAS,CAAC,MAAO,WAAY,YAC7BkC,OAAQ,WACN,OAAO,kCCLXO,EAAiB,CACf3C,GAAI,MACJC,WAAY,CAAC,QACbC,QAAS,CAAC,OACVkC,OAAQ,WACN,OAAO,kCCLXO,EAAiB,CACf3C,GAAI,KACJC,WAAY,CAAC,MAAO,SAAU,UAAW,WACzCC,QAAS,CAAC,iBAAkB,MAAO,OACnCkC,OAAQ,WACN,OAAO,kCCLXO,EAAiB,CACf3C,GAAI,QACJE,QAAS,CAAC,QAAS,SACnBD,WAAY,CAAC,UACbE,UAAW,CAAC,cACZiC,OAAQ,WACN,OAAO,kCCNXO,EAAiB,CACf3C,GAAI,MACJC,WAAY,CAAC,QACbC,QAAS,CAAC,MAAO,MAAO,QAAS,QAAS,SAAU,UACpDkC,OAAQ,WACN,OAAO,kCCLXO,EAAiB,CACf3C,GAAI,aACJC,WAAY,CAAC,MAAO,QACpBC,QAAS,CAAC,aAAc,KAAM,cAC9BC,UAAW,CAAC,mBACZiC,OAAQ,WACN,OAAO,kCCNXO,EAAiB,CACf3C,GAAI,KACJC,WAAY,CAAC,OACbC,QAAS,CAAC,eAAgB,MAC1BkC,OAAQ,WACN,OAAO,kCCLXO,EAAiB,CACf3C,GAAI,MACJC,WAAY,CAAC,OAAQ,OAAQ,QAAS,UAAW,UAAW,OAAQ,OAAQ,OAAQ,QAAS,OAAQ,SACrG6C,UAAW,gDACX5C,QAAS,CAAC,MAAO,OACjBC,UAAW,CAAC,WAAY,kBAAmB,uBAAwB,uBACnEiC,OAAQ,WACN,OAAO,kCCPXO,EAAiB,CACf3C,GAAI,OACJC,WAAY,CAAC,QAAS,QACtBC,QAAS,CAAC,OAAQ,OAAQ,MAAO,OACjCC,UAAW,CAAC,sBACZiC,OAAQ,WACN,OAAO,kCCNXO,EAAiB,CACf3C,GAAI,SACJC,WAAY,CAAC,OAAQ,MAAO,OAAQ,QACpCC,QAAS,CAAC,SAAU,UACpBkC,OAAQ,WACN,OAAO,kCCLXO,EAAiB,CACf3C,GAAI,UACJC,WAAY,CAAC,OAAQ,QAAS,QAAS,QACvCC,QAAS,CAAC,UAAW,WACrBkC,OAAQ,WACN,OAAO,kCCLXO,EAAiB,CACf3C,GAAI,QACJC,WAAY,CAAC,MAAO,SACpBC,QAAS,CAAC,QAAS,MACnBkC,OAAQ,WACN,OAAO,kCCLXO,EAAiB,CACf3C,GAAI,OACJC,WAAY,CAAC,OACbC,QAAS,CAAC,OAAQ,MAClBkC,OAAQ,WACN,OAAO,kCCLXO,EAAiB,CACf3C,GAAI,QACJC,WAAY,CAAC,UACbC,QAAS,CAAC,YAAa,SACvBkC,OAAQ,WACN,OAAO,iCCLXO,EAAiB,CACf3C,GAAI,OACJC,WAAY,CAAC,QACbC,QAAS,CAAC,OAAQ,QAClBC,UAAW,CAAC,qBAAsB,eAClCiC,OAAQ,WACN,OAAO,iCCNXO,EAAiB,CACf3C,GAAI,UACJC,WAAY,CAAC,WAAY,QACzBC,QAAS,CAAC,UAAW,UAAW,OAChCC,UAAW,CAAC,uBACZiC,OAAQ,WACN,OAAO,kC,yJCTPW,GAAsC,WACxC,IAAIC,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GAwCtCE,GAAsC,aAAc,6CAA8C,CACpGC,KAAM,UACNC,MAAO,UACPC,GAAI,WACHC,EAAA,EAAa,sCAAuC,uDAEnD,GAEJ,SAAUC,GAGR,SAASC,IACP,OAAOD,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,8BACJkE,MAAOJ,EAAA,EAAa,0BAA2B,iBAC/CK,MAAO,gBACPC,aAAc,KACdC,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,KAOTC,OAAQ,QAINzK,KAaR,OAlCA+I,GAAUiB,EAAqBD,GAwB/BC,EAAoBrJ,UAAU+J,IAAM,SAAUC,EAAUC,GACtD,IAAIC,EAAa,GAA0BjK,IAAIgK,GAE1CC,GAILA,EAAWC,iBAGNd,EAnCT,CAoCE,KAEE,GAEJ,SAAUD,GAGR,SAASgB,IACP,OAAOhB,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,gCACJkE,MAAOJ,EAAA,EAAa,8BAA+B,qBACnDK,MAAO,oBACPC,aAAc,QACVpK,KAaR,OArBA+I,GAAUgC,EAAuBhB,GAWjCgB,EAAsBpK,UAAU+J,IAAM,SAAUC,EAAUC,GACxD,IAAIC,EAAa,GAA0BjK,IAAIgK,GAE1CC,GAILA,EAAWG,mBAGND,EAtBT,CAuBE,KAEEE,GAEJ,WAME,OALA,SAAsBC,EAAUC,GAC9BnL,KAAKkL,SAAWA,EAChBlL,KAAKmL,SAAWA,GAHpB,GASI,GAEJ,SAAUpB,GAGR,SAASqB,EAA0BR,GACjC,IAAIxJ,EAAQ2I,EAAOE,KAAKjK,OAASA,KAmDjC,OAjDAoB,EAAMiK,QAAUT,EAChBxJ,EAAMkK,kBAAoB,GAC1BlK,EAAMmK,eAAiB,EACvBnK,EAAMoK,aAAe,GACrBpK,EAAMqK,oBAAsBrK,EAAMsK,UAAU,IAAI,IAAiB,WAC/D,OAAOtK,EAAMuK,mBACZ,KACHvK,EAAMwK,eAAiBxK,EAAMiK,QAAQQ,mBAAmBC,YAAYC,cAEpE3K,EAAMqK,oBAAoBO,WAE1B5K,EAAMsK,UAAUd,EAAOqB,0BAA0B,SAAUC,GACpD9K,EAAMwK,gBAMXxK,EAAMqK,oBAAoBO,cAG5B5K,EAAMsK,UAAUd,EAAOuB,wBAAwB,SAAUD,GACvD9K,EAAMqK,oBAAoBO,cAG5B5K,EAAMsK,UAAUd,EAAOwB,iBAAiB,SAAUF,GAChD9K,EAAMkK,kBAAoB,GAC1BlK,EAAMoK,aAAe,GAErBpK,EAAMqK,oBAAoBO,cAG5B5K,EAAMsK,UAAUd,EAAOyB,sCAAsC,SAAUH,GACrE9K,EAAMkK,kBAAoB,GAE1BlK,EAAMqK,oBAAoBO,cAG5B5K,EAAMsK,UAAUd,EAAO0B,yBAAyB,SAAUJ,GACxD9K,EAAMwK,eAAiBxK,EAAMiK,QAAQQ,mBAAmBC,YAAYC,eAE/D3K,EAAMwK,gBAAkBxK,EAAMoK,aAAae,OAAS,IAEvDnL,EAAMoK,aAAepK,EAAMiK,QAAQmB,iBAAiBpL,EAAMoK,aAAc,KAG1EpK,EAAMqK,oBAAoBO,cAGrB5K,EAoMT,OA1PA2H,GAAUqC,EAA2BrB,GAyDrCqB,EAA0BxK,IAAM,SAAUgK,GACxC,OAAOA,EAAO6B,gBAAgBrB,EAA0BsB,KAG1DtB,EAA0BzK,UAAUgM,MAAQ,WAC1C,OAAOvB,EAA0BsB,IAGnCtB,EAA0BzK,UAAUmK,cAAgB,WAClD,GAAK9K,KAAKqL,QAAQuB,WAAlB,CAIA,IAAIC,EAAQ7M,KAAKqL,QAAQyB,WAErBC,EAAgB/M,KAAKqL,QAAQ2B,gBAAgBC,IAAI,SAAUC,GAC7D,IAAIhC,EAAWgC,EAAUC,mBAErBhC,EAAW0B,EAAMO,aAAalC,GAC9BmC,EAAoB,KAExB,GAAIlC,EACEA,EAAS,GAAGmC,iBAAiBpC,GAC/BmC,EAAoBlC,EAAS,GAAGgC,mBACvBhC,EAAS,GAAGmC,iBAAiBpC,KACtCmC,EAAoBlC,EAAS,GAAGgC,wBAE7B,CAEL,IAAII,EAAcV,EAAMW,gBAAgBtC,GAEpCqC,GAAeA,EAAYE,QAC7BJ,EAAoBE,EAAYE,MAAMN,oBAI1C,OAAIE,EACK,IAAI,IAAUA,EAAkBK,WAAYL,EAAkBM,OAAQN,EAAkBK,WAAYL,EAAkBM,QAGxH,IAAI,IAAUzC,EAASwC,WAAYxC,EAASyC,OAAQzC,EAASwC,WAAYxC,EAASyC,UAG3F3N,KAAKqL,QAAQuC,cAAcb,GAE3B/M,KAAKqL,QAAQwC,YAAYd,EAAc,MAGzC3B,EAA0BzK,UAAUqK,gBAAkB,WACpD,GAAKhL,KAAKqL,QAAQuB,WAAlB,CAIA,IAAIC,EAAQ7M,KAAKqL,QAAQyB,WAErBC,EAAgB,GAEpB/M,KAAKqL,QAAQ2B,gBAAgBc,QAAQ,SAAUZ,GAC7C,IAAIhC,EAAWgC,EAAUC,mBACrBhC,EAAW0B,EAAMO,aAAalC,GAC9B6C,EAAc,KACdC,EAAe,KAEnB,IAAK7C,EAAU,CACb,IAAIoC,EAAcV,EAAMW,gBAAgBtC,GAEpCqC,GAAeA,EAAYE,QAC7BtC,EAAW0B,EAAMO,aAAaG,EAAYE,MAAMN,qBAIhDhC,IACEA,EAAS,GAAG8C,kBAAoB9C,EAAS,GAAG8C,iBAC9CF,EAAc5C,EAAS,GAAG+C,YAAc/C,EAAS,GAAG+C,YAAc/C,EAAS,GAAGgC,mBAAqBhC,EAAS,GAAGgC,mBAC/Ga,EAAe7C,EAAS,GAAG+C,YAAc/C,EAAS,GAAG+C,YAAc/C,EAAS,GAAGgD,iBAAmBhD,EAAS,GAAGgD,mBAE9GJ,EAAc5C,EAAS,GAAG8C,gBAAkB9C,EAAS,GAAG8C,gBAAkB9C,EAAS,GAAGgC,mBAAqBhC,EAAS,GAAGgC,mBACvHa,EAAe7C,EAAS,GAAG8C,gBAAkB9C,EAAS,GAAG8C,gBAAkB9C,EAAS,GAAGgD,iBAAmBhD,EAAS,GAAGgD,mBAItHJ,GAAeC,GACjBjB,EAAcqB,KAAK,IAAI,IAAUL,EAAYL,WAAYK,EAAYJ,OAAQK,EAAaN,WAAYM,EAAaL,WAInHZ,EAAcR,OAAS,IACzBvM,KAAKqL,QAAQuC,cAAcb,GAE3B/M,KAAKqL,QAAQwC,YAAYd,EAAc,OAI3C3B,EAA0BzK,UAAUgL,gBAAkB,WACpD,GAAK3L,KAAK4L,eAAV,CAIA5L,KAAKqO,qBAKL,IAHA,IAAIC,EAAiB,GACjBC,EAAoB,EAEfC,EAAI,EAAGC,EAAMzO,KAAKsL,kBAAkBiB,OAAQiC,EAAIC,EAAKD,IAAK,CACjE,IAAIrD,EAAWnL,KAAKsL,kBAAkBkD,GAAGrD,SAErCA,IACFmD,EAAeC,KAAuB,CACpCd,MAAOtC,EAAS,GAChBhJ,QAASiJ,EAA0BsD,qBAErCJ,EAAeC,KAAuB,CACpCd,MAAOtC,EAAS,GAChBhJ,QAASiJ,EAA0BsD,sBAKzC1O,KAAKwL,aAAexL,KAAKqL,QAAQmB,iBAAiBxM,KAAKwL,aAAc8C,KAGvElD,EAA0BzK,UAAU0N,mBAAqB,WACvD,IAAKrO,KAAKqL,QAAQuB,WAIhB,OAFA5M,KAAKsL,kBAAoB,QACzBtL,KAAKuL,eAAiB,GAIxB,IAAIsB,EAAQ7M,KAAKqL,QAAQyB,WAErB6B,EAAY9B,EAAM+B,eAClBC,EAAe,GAEf7O,KAAKuL,iBAAmBoD,IAE1BE,EAAe7O,KAAKsL,mBAQtB,IALA,IAAIwD,EAAa9O,KAAKqL,QAAQ2B,gBAE1B+B,EAAY,GACZC,EAAe,EAEVR,EAAI,EAAGC,EAAMK,EAAWvC,OAAQiC,EAAIC,EAAKD,IAAK,CACrD,IAAItB,EAAY4B,EAAWN,GAEvBtB,EAAU+B,YAEZF,EAAUC,KAAkB9B,EAAUC,oBAKtC4B,EAAUxC,OAAS,GACrBwC,EAAUG,KAAK,IAASC,SAG1B,IAAIC,EAAU,GACVC,EAAa,EACbC,EAAgB,EAChBC,EAAcV,EAAatC,OAE/B,IAASiC,EAAI,EAAGC,EAAMM,EAAUxC,OAAQiC,EAAIC,EAAKD,IAAK,CAGpD,IAFA,IAAItD,EAAW6D,EAAUP,GAElBc,EAAgBC,GAAeV,EAAaS,GAAepE,SAASsE,SAAStE,IAClFoE,IAGF,GAAIA,EAAgBC,GAAeV,EAAaS,GAAepE,SAASuE,OAAOvE,GAC7EkE,EAAQC,KAAgBR,EAAaS,OAChC,CACL,IAAInE,EAAW0B,EAAMO,aAAalC,GAClCkE,EAAQC,KAAgB,IAAIpE,GAAaC,EAAUC,IAIvDnL,KAAKsL,kBAAoB8D,EACzBpP,KAAKuL,eAAiBoD,GAGxBvD,EAA0BsB,GAAK,2CAC/BtB,EAA0BsD,oBAAsB,IAAuB3I,SAAS,CAC9E2J,WAAY,EAGZC,UAAW,gBACXC,cAAe,CACbC,MAAO,YAAiBnG,IACxBwB,SAAU,IAAkB4E,UAGzB1E,EA3PT,CA4PE,KAGF,YAA2B,IAC3B,YAAqB,IACrB,YAAqB,IACrB,YAA2B,SAAU2E,EAAOC,GAC1C,IAAIC,EAAyBF,EAAMG,SAAS,KAExCD,GACFD,EAAUG,QAAQ,qDAAuDF,EAAyB,OAGpG,IAAIG,EAAqBL,EAAMG,SAAS,KAEpCE,GACFJ,EAAUG,QAAQ,qDAAuDC,EAAqB,SAIlG,IAAaC,eAAe,GAE1B,CACAC,MAAO,eACPC,QAAS,CACPvK,GAAI,8BACJwK,MAAO1G,EAAA,EAAa,CAClB2G,IAAK,gBACLC,QAAS,CAAC,0BACT,oBAELC,MAAO,I,aCvZL,GAEJ,WACE,SAASC,EAAiB1D,EAAW2D,GACnC7Q,KAAK8Q,WAAa5D,EAClBlN,KAAK+Q,cAAgBF,EAoDvB,OAjDAD,EAAiBjQ,UAAUqQ,kBAAoB,SAAUnE,EAAOoE,GAC9D,IAAIC,EAAIlR,KAAK8Q,WAGb,GAFA9Q,KAAKmR,aAAeF,EAAQG,eAAeF,GAEvCA,EAAEjD,kBAAoBiD,EAAEG,iBAIxBrR,KAAK+Q,eAAmC,IAAlBG,EAAEhD,eAEhBlO,KAAK+Q,eAAiBG,EAAEI,YAAczE,EAAM0E,iBAAiBL,EAAEjD,kBAApE,CAIP,IAEIuD,EACAC,EACAC,EAJAhE,EAAawD,EAAES,yBACfC,EAAc/E,EAAMgF,eAAenE,GAKnC1N,KAAK+Q,eACPS,EAAOI,EAAYpQ,UAAU,EAAG0P,EAAEhD,YAAc,GAChDuD,EAASG,EAAYpQ,UAAU0P,EAAEhD,YAAc,EAAGgD,EAAEI,UAAY,GAChEI,EAAQE,EAAYpQ,UAAU0P,EAAEhD,YAAc,EAAGgD,EAAEhD,YAAc,GAAK0D,EAAYpQ,UAAU0P,EAAEI,UAAY,KAE1GE,EAAOI,EAAYpQ,UAAU,EAAG0P,EAAEhD,YAAc,GAAK0D,EAAYpQ,UAAU0P,EAAEI,UAAY,EAAGJ,EAAEI,WAC9FG,EAASG,EAAYpQ,UAAU0P,EAAEhD,YAAc,EAAGgD,EAAEI,UAAY,GAChEI,EAAQE,EAAYpQ,UAAU0P,EAAEI,YAGlC,IAAIQ,EAAiBN,EAAOC,EAASC,EACrCT,EAAQc,iBAAiB,IAAI,KAAMrE,EAAY,EAAGA,EAAYb,EAAM0E,iBAAiB7D,IAAc,MACnGuD,EAAQc,iBAAiB,IAAI,KAAMrE,EAAY,EAAGA,EAAY,GAAIoE,GAClE9R,KAAKgS,eAAiBd,EAAEhD,aAAelO,KAAK+Q,eAAiB,EAAI,GACjE/Q,KAAKiS,aAAejS,KAAKgS,eAAiBd,EAAEI,UAAYJ,EAAEhD,YAC1DlO,KAAKkS,QAAS,IAGhBtB,EAAiBjQ,UAAUwR,mBAAqB,SAAUtF,EAAOuF,GAC/D,IAAIC,EAASD,EAAOE,oBAAoBtS,KAAKmR,cAO7C,OALInR,KAAKkS,SAEPG,GADAA,EAASA,EAAOE,iBAAiBF,EAAOpE,gBAAiBjO,KAAKgS,iBAC9CQ,eAAeH,EAAOpE,gBAAiBjO,KAAKiS,eAGvDI,GAGFzB,EAvDT,GCJI,GAAsC,WACxC,IAAI5H,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA+BtC,GAEJ,SAAUO,GAGR,SAAS0I,EAAgBjB,EAAMkB,GAC7B,IAAItR,EAAQ2I,EAAOE,KAAKjK,KAAM0S,IAAS1S,KAGvC,OADAoB,EAAMoQ,KAAOA,EACNpQ,EAqBT,OA3BA,GAAUqR,EAAiB1I,GAS3B0I,EAAgB9R,UAAU+J,IAAM,SAAUC,EAAUC,GAClD,GAAKA,EAAOgC,WAAZ,CAOA,IAHA,IAAI+F,EAAW,GAGNC,EAAK,EAAGC,EAFAjI,EAAOoC,gBAEoB4F,EAAKC,EAAatG,OAAQqG,IAAM,CAC1E,IAAI1F,EAAY2F,EAAaD,GAC7BD,EAASvE,KAAK,IAAI,GAAiBlB,EAAWlN,KAAKwR,OAGrD5G,EAAOkI,eACPlI,EAAOmI,gBAAgB/S,KAAKgG,GAAI2M,GAChC/H,EAAOkI,iBAGFL,EA5BT,CA6BE,KAEE,GAEJ,SAAU1I,GAGR,SAASiJ,IACP,OAAOjJ,EAAOE,KAAKjK,MAAM,EAAM,CAC7BgG,GAAI,qCACJkE,MAAOJ,EAAA,EAAa,iBAAkB,mBACtCK,MAAO,kBACPC,aAAc,IAAkB6I,YAC5BjT,KAGR,OAXA,GAAUgT,EAAqBjJ,GAWxBiJ,EAZT,CAaE,IAEE,GAEJ,SAAUjJ,GAGR,SAASmJ,IACP,OAAOnJ,EAAOE,KAAKjK,MAAM,EAAO,CAC9BgG,GAAI,sCACJkE,MAAOJ,EAAA,EAAa,kBAAmB,oBACvCK,MAAO,mBACPC,aAAc,IAAkB6I,YAC5BjT,KAGR,OAXA,GAAUkT,EAAsBnJ,GAWzBmJ,EAZT,CAaE,IAEF,YAAqB,IACrB,YAAqB,I,uBCnGjB,GAAsC,WACxC,IAAIlK,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GAkCtC,GAEJ,SAAUO,GAGR,SAASoJ,IACP,OAAOpJ,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,iCACJkE,MAAOJ,EAAA,EAAa,yBAA0B,qBAC9CK,MAAO,oBACPC,aAAc,IAAkB6I,SAChC5I,OAAQ,CACNC,OAAQ,IAAkB8I,eAC1B5I,QAAS,EACT6I,IAAK,CACH7I,QAAS,KAMXC,OAAQ,QAINzK,KAoFR,OA1GA,GAAUmT,EAAwBpJ,GAyBlCoJ,EAAuBxS,UAAU2S,eAAiB,SAAUC,EAAO1G,GACjE,IAAIc,EAAS4F,EAAM5F,OACfD,EAAa6F,EAAM7F,WAcvB,OAZIC,EAASd,EAAM2G,iBAAiB9F,GAC9B,aAAeb,EAAMgF,eAAenE,GAAY+F,WAAW9F,EAAS,IAEtEA,GAAkB,EAElBA,GAAkB,EAEXD,EAAa,IACtBA,GAA0B,EAC1BC,EAASd,EAAM0E,iBAAiB7D,IAG3B,IAAI,IAASA,EAAYC,IAGlCwF,EAAuBxS,UAAU+S,gBAAkB,SAAUH,EAAO1G,GAClE,IAAIc,EAAS4F,EAAM5F,OACfD,EAAa6F,EAAM7F,WAcvB,OAZIC,EAASd,EAAM0E,iBAAiB7D,GAC9B,aAAgBb,EAAMgF,eAAenE,GAAY+F,WAAW9F,EAAS,IAEvEA,GAAkB,EAElBA,GAAkB,EAEXD,EAAab,EAAM8G,iBAC5BjG,GAA0B,EAC1BC,EAAS,GAGJ,IAAI,IAASD,EAAYC,IAGlCwF,EAAuBxS,UAAU+J,IAAM,SAAUC,EAAUC,GACzD,GAAKA,EAAOgC,WAAZ,CAQA,IAJA,IAAIC,EAAQjC,EAAOkC,WACf6F,EAAW,GAGNC,EAAK,EAAGC,EAFAjI,EAAOoC,gBAEoB4F,EAAKC,EAAatG,OAAQqG,IAAM,CAC1E,IAAI1F,EAAY2F,EAAaD,GAE7B,GAAK1F,EAAU+B,UAAf,CAIA,IAAIvB,EAAaR,EAAUe,gBACvBN,EAAST,EAAUgB,YACnB0F,EAAa/G,EAAM0E,iBAAiB7D,GAExC,GAAmB,IAAfA,GAAgC,IAAXC,IAA2B,IAAXA,GAA+B,IAAfiG,GAAzD,CAOA,IAAIC,EAAclG,IAAWiG,EAAa1G,EAAU4G,cAAgB9T,KAAK0T,gBAAgBxG,EAAU4G,cAAejH,GAC9GkH,EAAiB/T,KAAKsT,eAAeO,EAAahH,GAClDmH,EAAgBhU,KAAKsT,eAAeS,EAAgBlH,GACpDoH,EAAWpH,EAAMqH,gBAAgB,KAAMC,cAAcH,EAAeD,IACpEK,EAAYvH,EAAMqH,gBAAgB,KAAMC,cAAcJ,EAAgBF,IACtEQ,EAAe,KAAMF,cAAcH,EAAeH,GACtDlB,EAASvE,KAAK,IAAI,KAAeiG,EAAcD,EAAYH,MAGzDtB,EAASpG,OAAS,IACpB3B,EAAOkI,eACPlI,EAAOmI,gBAAgB/S,KAAKgG,GAAI2M,GAChC/H,EAAOkI,kBAIJK,EA3GT,CA4GE,KAEF,YAAqB,I,kDClJjB,GAAsC,WACxC,IAAInK,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GAkCtC8K,GAA+B,iBAC/BC,GAAcC,GAAA,GAAqBC,SAASC,sBAAsB,OAClEC,GAAeH,GAAA,GAAqBC,SAASC,sBAAsB,QAEnEE,GAAqCD,KAAiBE,GAAA,EAItDC,GAAgBN,GAAA,IAAsBK,GAAA,GAAoBJ,SAASC,sBAAsB,SAEzF,GAEJ,SAAU3K,GAGR,SAASgL,EAAkBC,EAAgBtC,GACzC,IAAItR,EAAQ2I,EAAOE,KAAKjK,KAAM0S,IAAS1S,KAGvC,OADAoB,EAAM4T,eAAiBA,EAChB5T,EAmBT,OAzBA,GAAU2T,EAAmBhL,GAS7BgL,EAAkBpU,UAAUsU,WAAa,SAAUtK,EAAUuK,GAC3D,IAAIC,EAAgBxK,EAAS/J,IAAI,MAAoBwU,uBAEjDD,GAAiBA,EAAcE,eACjCF,EAAcG,QAAQ,WAAYtV,KAAKgG,GAAIkP,GAI7CT,SAASc,YAAYvV,KAAKgV,iBAG5BD,EAAkBpU,UAAU+J,IAAM,SAAUC,EAAUC,GACpDA,EAAO4K,QACPf,SAASc,YAAYvV,KAAKgV,iBAGrBD,EA1BT,CA2BE,KAEE,GAEJ,SAAUhL,GAGR,SAAS0L,IACP,IAEIpL,EAAS,CACXC,OAAQ,IAAkB8I,eAC1B5I,QAAS,KAKTkL,IAAK,CACHlL,QAAS,KAKTmL,UAAW,CAAC,OAMdlL,OAAQ,KAgCV,OA1BK+J,GAAA,IACHnK,EAAS,MAGHN,EAAOE,KAAKjK,KAAM,MAAO,CAC/BgG,GAAI,mCACJkE,MAAOJ,EAAA,EAAa,6BAA8B,OAClDK,MAAO,MACPC,aAAc,IAAkB6I,SAChC5I,OAAQA,EACRuL,SAAU,CACRtF,MAAOgE,GACP3D,MAAO,GAETkF,YAAa,CACXC,OAAQ,GAGRxF,MAAO,QACPE,MAAO1G,EAAA,EAAa,CAClB2G,IAAK,QACLC,QAAS,CAAC,0BACT,SACHC,MAAO,MAEL3Q,KAkBR,OAzEA,GAAUyV,EAAsB1L,GA2DhC0L,EAAqB9U,UAAU+J,IAAM,SAAUC,EAAUC,GAClDA,EAAOgC,cAIkBhC,EAAOiB,mBAAmBkK,yBAExBnL,EAAOoL,eAAe/G,WAItDlF,EAAOpJ,UAAU+J,IAAIT,KAAKjK,KAAM2K,EAAUC,KAGrC6K,EA1ET,CA2EE,IAEE,GAEJ,SAAU1L,GAGR,SAASkM,IACP,IAEI5L,EAAS,CACXC,OAAQ,IAAkB8I,eAC1B5I,QAAS,KAKTkL,IAAK,CACHlL,QAAS,KAKTmL,UAAW,CAAC,OAMdlL,OAAQ,KAgCV,OA1BK+J,GAAA,IACHnK,EAAS,MAGHN,EAAOE,KAAKjK,KAAM,OAAQ,CAChCgG,GAAI,oCACJkE,MAAOJ,EAAA,EAAa,8BAA+B,QACnDK,MAAO,OACPC,aAAc,KACdC,OAAQA,EACRuL,SAAU,CACRtF,MAAOgE,GACP3D,MAAO,GAETkF,YAAa,CACXC,OAAQ,GAGRxF,MAAO,QACPE,MAAO1G,EAAA,EAAa,CAClB2G,IAAK,SACLC,QAAS,CAAC,0BACT,UACHC,MAAO,MAEL3Q,KAyBR,OAhFA,GAAUiW,EAAuBlM,GA2DjCkM,EAAsBtV,UAAU+J,IAAM,SAAUC,EAAUC,GACnDA,EAAOgC,cAIkBhC,EAAOiB,mBAAmBkK,yBAExBnL,EAAOoL,eAAe/G,WAKhB,IAAlCrE,EAAOoC,gBAAgBT,QAAgB3B,EAAOoL,eAAe/G,WACqC,IAAhGrE,EAAOkC,WAAWoJ,gCAAgCtL,EAAOoL,eAAeG,qBAK9EpM,EAAOpJ,UAAU+J,IAAIT,KAAKjK,KAAM2K,EAAUC,KAGrCqL,EAjFT,CAkFE,IAEE,GAEJ,SAAUlM,GAGR,SAASqM,IACP,IAEI/L,EAAS,CACXC,OAAQ,IAAkB8I,eAC1B5I,QAAS,KAKTkL,IAAK,CACHlL,QAAS,KAKTmL,UAAW,CAAC,OAMdlL,OAAQ,KAgCV,OA1BK+J,GAAA,IACHnK,EAAS,MAGHN,EAAOE,KAAKjK,KAAM,QAAS,CACjCgG,GAAI,qCACJkE,MAAOJ,EAAA,EAAa,+BAAgC,SACpDK,MAAO,QACPC,aAAc,IAAkB6I,SAChC5I,OAAQA,EACRuL,SAAU,CACRtF,MAAOgE,GACP3D,MAAO,GAETkF,YAAa,CACXC,OAAQ,GAGRxF,MAAO,QACPE,MAAO1G,EAAA,EAAa,CAClB2G,IAAK,UACLC,QAAS,CAAC,0BACT,WACHC,MAAO,MAEL3Q,KAIR,OA3DA,GAAUoW,EAAwBrM,GA2D3BqM,EA5DT,CA6DE,IAEE,GAEJ,SAAUrM,GAGR,SAASsM,IACP,OAAOtM,EAAOE,KAAKjK,KAAM,OAAQ,CAC/BgG,GAAI,0DACJkE,MAAOJ,EAAA,EAAa,oDAAqD,iCACzEK,MAAO,gCACPC,aAAc,KACdC,OAAQ,CACNC,OAAQ,IAAkB8I,eAC1B5I,QAAS,EACTC,OAAQ,QAINzK,KAqBR,OApCA,GAAUqW,EAA6CtM,GAkBvDsM,EAA4C1V,UAAU+J,IAAM,SAAUC,EAAUC,GACzEA,EAAOgC,cAIkBhC,EAAOiB,mBAAmBkK,yBAExBnL,EAAOoL,eAAe/G,YAItD,KAAYqH,iCAAkC,EAE9CvM,EAAOpJ,UAAU+J,IAAIT,KAAKjK,KAAM2K,EAAUC,GAE1C,KAAY0L,iCAAkC,KAGzCD,EArCT,CAsCE,IAEE9B,IACF,YAAqB,IAGnBI,IACF,YAAqB,IAGnBG,IACF,YAAqB,IAGnBF,IACF,YAAqB,I,0CCxWnB,GAAsC,WACxC,IAAI5L,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA0BtC+M,GAAwC,SAAUC,EAAY1T,EAAQ2N,EAAKgG,GAC7E,IAEIxN,EAFAyN,EAAIC,UAAUpK,OACdqK,EAAIF,EAAI,EAAI5T,EAAkB,OAAT2T,EAAgBA,EAAOrW,OAAOyW,yBAAyB/T,EAAQ2N,GAAOgG,EAE/F,GAAuB,kBAAZK,SAAoD,oBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASP,EAAY1T,EAAQ2N,EAAKgG,QAAW,IAAK,IAAIjI,EAAIgI,EAAWjK,OAAS,EAAGiC,GAAK,EAAGA,KAC1KvF,EAAIuN,EAAWhI,MAAIoI,GAAKF,EAAI,EAAIzN,EAAE2N,GAAKF,EAAI,EAAIzN,EAAEnG,EAAQ2N,EAAKmG,GAAK3N,EAAEnG,EAAQ2N,KAASmG,GAE5F,OAAOF,EAAI,GAAKE,GAAKxW,OAAOM,eAAeoC,EAAQ2N,EAAKmG,GAAIA,GAG1DI,GAAkC,SAAUC,EAAYC,GAC1D,OAAO,SAAUpU,EAAQ2N,GACvByG,EAAUpU,EAAQ2N,EAAKwG,KAevB,GAEJ,SAAUlN,GAGR,SAASoN,EAAkBvM,EAAQwM,GACjC,IAAIhW,EAAQ2I,EAAOE,KAAKjK,OAASA,KAUjC,OARAoB,EAAMiW,kBAAoB,GAC1BjW,EAAMiK,QAAUT,EAChBxJ,EAAMkW,SAAWH,EAAkBI,gBAAgBC,OAAOJ,GAE1DhW,EAAMsK,UAAUtK,EAAMiK,QAAQoM,yBAAyB,WACrD,OAAOrW,EAAMsW,+BAGRtW,EAqFT,OAlGA,GAAU+V,EAAmBpN,GAgB7BoN,EAAkBvW,IAAM,SAAUgK,GAChC,OAAOA,EAAO6B,gBAAgB0K,EAAkBQ,MAGlDR,EAAkBxW,UAAUgM,MAAQ,WAClC,OAAOwK,EAAkBQ,KAG3BR,EAAkBxW,UAAUc,QAAU,WACpCsI,EAAOpJ,UAAUc,QAAQwI,KAAKjK,MAE9BA,KAAKsX,SAASM,SAGhBT,EAAkBxW,UAAUkX,YAAc,SAAUC,EAAS5M,GAC3D,IAgCI6M,EAhCA3W,EAAQpB,KAEZ,aAAM8X,GAEN9X,KAAKsX,SAASU,KAAI,GAElB,YAAQhY,KAAKiY,gBACbjY,KAAKqX,kBAAoB,YAAQrX,KAAKqX,mBACtCrX,KAAKiY,eAAiB,IAAI,GAAcjY,KAAKqL,QAASH,EAAU4M,GAEhE9X,KAAKqX,kBAAkBjJ,KAAKpO,KAAKqL,QAAQ6M,oBAAoB,WAC3D,OAAO9W,EAAM+W,kBAGfnY,KAAKqX,kBAAkBjJ,KAAKpO,KAAKqL,QAAQY,0BAA0B,WACjE,OAAO7K,EAAM+W,kBAGfnY,KAAKqX,kBAAkBjJ,KAAKpO,KAAKqL,QAAQ+M,aAAa,WACpD,OAAOhX,EAAM+W,kBAGfnY,KAAKqX,kBAAkBjJ,KAAKpO,KAAKqL,QAAQe,iBAAiB,WACxD,OAAOhL,EAAM+W,kBAIfnY,KAAKqX,kBAAkBjJ,KAAK,IAAI,IAAa,WAC3C,OAAOhN,EAAM+W,gBACZ,MAKHnY,KAAKqX,kBAAkBjJ,KAAKpO,KAAKqL,QAAQgN,YAAY,SAAUnM,GAExDA,EAAEpJ,OAAOoI,WAIT6M,EAGOA,EAAOzK,iBAAiBpB,EAAEpJ,OAAOoI,WAE3C9J,EAAM+W,eAHNJ,EAAS,IAAI,KAAM7M,EAASwC,WAAa,EAAG,EAAGxB,EAAEpJ,OAAOoI,SAASwC,WAAa,EAAG,QAQvFyJ,EAAkBxW,UAAUwX,aAAe,WACzCnY,KAAKsX,SAASM,QAEd5X,KAAKqX,kBAAoB,YAAQrX,KAAKqX,mBAEtCrX,KAAKqX,kBAAkBjJ,KAAK,GAAckK,QAAQtY,KAAKiY,kBAGzDd,EAAkBxW,UAAU+W,0BAA4B,WAClD1X,KAAKqL,QAAQuB,YACf5M,KAAK6X,YAAY/N,EAAA,EAAa,kBAAmB,mCAAoC9J,KAAKqL,QAAQyI,gBAItGqD,EAAkBQ,IAAM,mCACxBR,EAAkBI,gBAAkB,IAAI,KAAc,kBAAkB,GACxEJ,EAAoBZ,GAAW,CAACS,GAAQ,EAAG,OAAsBG,GAlGnE,CAoGE,KAGEoB,GAAiB,IAAcC,mBAAmB,GAAkB5X,KACxE,YAAsB,IAAI2X,GAAe,CACvCvS,GAAI,qBACJoE,aAAc,GAAkBmN,gBAChCkB,QAAS,SAAiB/B,GACxB,OAAOA,EAAEyB,gBAEX9N,OAAQ,CACNI,OAAQ,IAGRD,QAAS,MAMb,IAAI,GAEJ,WACE,SAASkO,EAAc9N,EAAQ+N,EAAIC,GACjC,IAAIlL,EAAaiL,EAAGjL,WAChBC,EAASgL,EAAGhL,OAEhB3N,KAAK6Y,qBAAsB,EAC3B7Y,KAAK8Y,mBAAoB,EACzB9Y,KAAKqL,QAAUT,EAEf5K,KAAKqL,QAAQ0N,qCAAqCrL,EAAYA,EAAY,GAI1E1N,KAAKgZ,UAAY,CACftL,WAAYA,EACZC,OAAQA,EAAS,GAEnB3N,KAAKiZ,SAAWxE,SAASyE,cAAc,OAEvClZ,KAAKiZ,SAASE,UAAUC,IAAI,gCAE5B,IAAItB,EAAUrD,SAASyE,cAAc,OACrCpB,EAAQqB,UAAUC,IAAI,WACtBtB,EAAQuB,YAAcT,EAEtB5Y,KAAKiZ,SAASK,YAAYxB,GAE1B,IAAIyB,EAAS9E,SAASyE,cAAc,OACpCK,EAAOJ,UAAUC,IAAI,UAErBpZ,KAAKiZ,SAASK,YAAYC,GAE1BvZ,KAAKqL,QAAQmO,iBAAiBxZ,MAE9BA,KAAKiZ,SAASE,UAAUC,IAAI,UAyC9B,OAtCAV,EAAcJ,QAAU,SAAUmB,GAChC,IAAIC,EAEAjY,EAAU,SAASA,IACrBgY,EAAchY,UACdkY,aAAaD,GACbD,EAAcG,aAAaC,oBAAoB,eAAgBpY,IAMjE,OAHAiY,EAAS5X,WAAWL,EAAS,KAC7BgY,EAAcG,aAAaE,iBAAiB,eAAgBrY,GAC5DgY,EAAcG,aAAaT,UAAUC,IAAI,WAClC,CACL3X,QAASA,IAIbiX,EAAc/X,UAAUc,QAAU,WAChCzB,KAAKqL,QAAQ0O,oBAAoB/Z,OAGnC0Y,EAAc/X,UAAUgM,MAAQ,WAC9B,MAAO,kBAGT+L,EAAc/X,UAAUiZ,WAAa,WACnC,OAAO5Z,KAAKiZ,UAGdP,EAAc/X,UAAUmT,YAAc,WACpC,MAAO,CACL5I,SAAUlL,KAAKgZ,UACfgB,WAAY,CAAC,KAMVtB,EA3ET,GA8EA,YAA2B,IAC3B,YAA2B,SAAU3I,EAAOC,GAC1C,IAAIiK,EAASlK,EAAMG,SAAS,KAE5B,GAAI+J,EAAQ,CACV,IAAIC,EAAcnK,EAAMoK,OAAS,IAAgB,EAAI,EACrDnK,EAAUG,QAAQ,4EAA8E8J,EAAS,OACzGjK,EAAUG,QAAQ,mEAAqE+J,EAAc,YAAcD,EAAS,OAG9H,IAAIG,EAAarK,EAAMG,SAAS,KAE5BkK,GACFpK,EAAUG,QAAQ,6EAA+EiK,EAAa,OAGhH,IAAIC,EAAatK,EAAMG,SAAS,KAE5BmK,GACFrK,EAAUG,QAAQ,kEAAoEkK,EAAa,S,uHChRnG,GAEJ,WACE,SAASC,EAAe/X,GACtBvC,KAAKuC,MAAQA,EAkBf,OAfA+X,EAAe3Z,UAAU4Z,SAAW,SAAUC,GAC5C,OAAOxa,KAAKuC,QAAUiY,EAAMjY,OAAS,aAAWiY,EAAMjY,MAAOvC,KAAKuC,MAAQ+X,EAAeG,MAG3FH,EAAe3Z,UAAU+Z,WAAa,SAAUF,GAC9C,OAAOxa,KAAKua,SAASC,IAAUA,EAAMD,SAASva,OAGhDsa,EAAeG,IAAM,IACrBH,EAAeK,MAAQ,IAAIL,EAAe,IAC1CA,EAAeM,SAAW,IAAIN,EAAe,YAC7CA,EAAeO,SAAW,IAAIP,EAAe,YAC7CA,EAAeQ,OAAS,IAAIR,EAAe,UAC3CA,EAAeS,sBAAwB,IAAIT,EAAe,0BAC1DA,EAAeU,aAAe,IAAIV,EAAe,iBAC1CA,EApBT,G,cCOI,GAEJ,WACE,SAASW,EAAcC,GACrBlb,KAAKkb,QAAU,aAAUA,EAASD,EAAcE,uBA0BlD,OAvBAF,EAAcE,sBAAwB,SAAUC,EAAGlS,GACjD,OAAI,aAAgBkS,EAAEC,aAChB,aAAgBnS,EAAEmS,aACbD,EAAEC,YAAY,GAAGvD,QAAQwD,cAAcpS,EAAEmS,YAAY,GAAGvD,UAEvD,EAED,aAAgB5O,EAAEmS,aACpB,EAEA,GAIXjb,OAAOM,eAAeua,EAActa,UAAW,aAAc,CAC3DC,IAAK,WACH,OAAOZ,KAAKkb,QAAQK,KAAK,SAAUC,GACjC,QAASA,EAAIC,MAAQ,GAAeb,SAASL,SAAS,IAAI,GAAeiB,EAAIC,UAAYD,EAAIE,eAGjG5a,YAAY,EACZC,cAAc,IAETka,EA5BT,GAgCO,SAASU,GAAe9O,EAAO+O,EAAkBtG,EAASuG,GAC/D,IAAIC,EAASxG,EAAQwG,QAAU,GAC3BC,EAAoB,CACtBC,KAAMF,EAAOL,KAAOK,EAAOL,KAAKlZ,WAAQP,EACxCsT,QAA0B,WAAjBA,EAAQ6E,KAAoB,EAEnC,GAIA8B,EAAM,IAAI,KAAiCpP,EAAOgP,GAClDK,EAkCN,SAAgCrP,EAAOiP,GACrC,OAAO,KAA2BK,IAAItP,GACrCiP,OAAO,SAAUM,GAChB,OAAKA,EAASC,yBAKPD,EAASC,wBAAwBd,KAAK,SAAUE,GACrD,ODvEC,SAAiCK,EAAQQ,GAE9C,QAAIR,EAAOL,OAASK,EAAOL,KAAKf,WAAW4B,OAKvC,GAAexB,OAAOP,SAAS+B,KAAkBR,EAAOS,sBCgEjDC,CAAwBV,EAAQ,IAAI,GAAeL,QA3C9CgB,CAAuB5P,EAAOiP,GAC1CY,EAAWR,EAAUjP,IAAI,SAAUmP,GACrC,OAAOO,QAAQC,QAAQR,EAASS,mBAAmBhQ,EAAO+O,EAAkBG,EAAmBE,EAAIJ,QAAQvY,KAAK,SAAUwZ,GACxH,OAAIb,EAAIJ,MAAMkB,0BAA4B1T,MAAM2T,QAAQF,GAC/C,GAGFA,EAAoBhB,OAAO,SAAUmB,GAC1C,OAAOA,GDvBR,SAAuBnB,EAAQmB,GACpC,IAAIC,EAAaD,EAAOxB,KAAO,IAAI,GAAewB,EAAOxB,WAAQzZ,EAEjE,UAAI8Z,EAAOL,MACJyB,GAAepB,EAAOL,KAAKlB,SAAS2C,SAMtCpB,EAAOS,sBACNW,GAAc,GAAepC,OAAOP,SAAS2C,OAK/CpB,EAAOqB,8BACJF,EAAOvB,cCMS0B,CAActB,EAAQmB,MAExC,SAAUI,GACX,GAAI,aAAuBA,GACzB,MAAMA,EAIR,OADA,aAA0BA,GACnB,OAGPC,EAAW,KAA2BC,YAAY,WACpD,IAAIC,EAAe,KAA2BrB,IAAItP,GAE7C,aAAO2Q,EAActB,IACxBD,EAAIwB,WAGR,OAAOd,QAAQR,IAAIO,GAAUpZ,KAAK,MAASA,KAAK,SAAU4X,GACxD,OAAO,IAAI,GAAcA,KACxBwC,QAAQ,WACTJ,EAAS7b,UACTwa,EAAIxa,YAkBR,YAAwB,6BAA8B,SAAUkJ,EAAUuK,GACxE,IAAIyI,EAAWzI,EAAKyI,SAChBlQ,EAAQyH,EAAKzH,MACbgO,EAAOvG,EAAKuG,KAEhB,KAAMkC,aAAoB,QAAS,KAAMC,SAASnQ,GAChD,MAAM,eAGR,IAAIZ,EAAQlC,EAAS/J,IAAI,MAAekM,SAAS6Q,GAEjD,IAAK9Q,EACH,MAAM,eAGR,OAAO8O,GAAe9O,EAAOA,EAAMgR,cAAcpQ,GAAQ,CACvD0M,KAAM,SACN2B,OAAQ,CACNS,sBAAsB,EACtBd,KAAMA,GAAQA,EAAKlZ,MAAQ,IAAI,GAAekZ,EAAKlZ,YAASP,IAE7D,KAAkB8b,MAAMxa,KAAK,SAAU4X,GACxC,OAAOA,EAAQA,YCvHZ,IAsKI6C,GAtKAC,GAAyB,IAAI,KAAc,sBAAuB,IAEzE,GAEJ,WACE,SAASC,EAAiB5S,EAAS6S,EAAgBC,EAAeC,EAAQC,GACxE,IAAIjd,EAAQpB,UAEG,IAAXoe,IACFA,EAAS,KAGXpe,KAAKqL,QAAUA,EACfrL,KAAKke,eAAiBA,EACtBle,KAAKme,cAAgBA,EACrBne,KAAKoe,OAASA,EACdpe,KAAKqe,iBAAmBA,EACxBre,KAAKse,aAAe,GACpBte,KAAKue,kBAAoB,IAAI,IAE7Bve,KAAKse,aAAalQ,KAAKpO,KAAKke,eAAeM,gBAAgB,SAAUtS,GACnE,OAAO9K,EAAMqd,iBAAiBvS,KAC5BlM,KAAKqL,QAAQY,0BAA0B,WACzC,OAAO7K,EAAMsd,qBA2IjB,OAvIAT,EAAiBtd,UAAUc,QAAU,WACnCzB,KAAKse,aAAe,YAAQte,KAAKse,cAEjCte,KAAKue,kBAAkBd,UAGzBQ,EAAiBtd,UAAU2U,QAAU,SAAUA,GAC7C,IAAIpI,EAAYlN,KAAK2e,6CAA6CrJ,GAElE,OAAOtV,KAAK4e,4BAA4BtJ,EAASpI,IAGnD+Q,EAAiBtd,UAAU8d,iBAAmB,SAAUI,GACtD,IAAIzd,EAAQpB,KAER6M,EAAQ7M,KAAKqL,QAAQyB,WAEpBD,GAIDgS,EAAUtD,KAAK,SAAUoC,GAC3B,OAAOA,EAASpc,aAAesL,EAAMiS,IAAIvd,cAEzCvB,KAAKue,kBAAkBQ,aAAa,WAClC3d,EAAMkU,QAAQ,CACZ6E,KAAM,UAEPna,KAAKoe,SAIZH,EAAiBtd,UAAU+d,gBAAkB,WAC3C,IAAItd,EAAQpB,KAEZA,KAAKue,kBAAkBQ,aAAa,WAClC3d,EAAMkU,QAAQ,CACZ6E,KAAM,UAEPna,KAAKoe,SAGVH,EAAiBtd,UAAUqe,kBAAoB,SAAU9R,GACvD,IAAIL,EAAQ7M,KAAKqL,QAAQyB,WAEzB,GAAKD,EAIL,IAAK,IAAI+F,EAAK,EAAG+F,EAAK3Y,KAAKke,eAAee,KAAK,CAC7CtB,SAAU9Q,EAAMiS,MACdlM,EAAK+F,EAAGpM,OAAQqG,IAAM,CACxB,IAAIsM,EAASvG,EAAG/F,GAEhB,GAAI,KAAMuM,gBAAgBD,EAAQhS,GAChC,OAAO,KAAMkS,KAAKF,KAOxBjB,EAAiBtd,UAAUge,6CAA+C,SAAUrJ,GAClF,GAAKtV,KAAKqL,QAAQuB,WAAlB,CAIA,IAAIC,EAAQ7M,KAAKqL,QAAQyB,WAErBI,EAAYlN,KAAKqL,QAAQ2K,eAE7B,GAAI9I,EAAU+B,WAA8B,SAAjBqG,EAAQ6E,KAAiB,CAClD,IAAIxB,EAAKzL,EAAU4G,cACfpG,EAAaiL,EAAGjL,WAChBC,EAASgL,EAAGhL,OAEZ0R,EAAOxS,EAAMgF,eAAenE,GAEhC,GAAoB,IAAhB2R,EAAK9S,OAEP,OACK,GAAe,IAAXoB,GAET,GAAI,KAAK2R,KAAKD,EAAK,IACjB,YAEG,GAAI1R,IAAWd,EAAM0E,iBAAiB7D,IAE3C,GAAI,KAAK4R,KAAKD,EAAKA,EAAK9S,OAAS,IAC/B,YAIF,GAAI,KAAK+S,KAAKD,EAAK1R,EAAS,KAAO,KAAK2R,KAAKD,EAAK1R,EAAS,IACzD,OAKN,OAAOT,QAAwBlL,IAGjCic,EAAiBtd,UAAUie,4BAA8B,SAAUtJ,EAASpI,GAC1E,GAAKA,EAKE,CACL,IAAIqS,EAAUvf,KAAKqL,QAAQyB,WAE3B,IAAKyS,EAIH,OAFAvf,KAAKme,cAAcJ,GAAiBpD,OAE7BgC,QAAQC,aAAQ5a,GAGzB,IAAIwd,EAAcxf,KAAKgf,kBAAkB9R,GAErChC,EAAWsU,EAAcA,EAAYrS,mBAAqBD,EAAUC,mBACpE+N,EAAU,YAAwB,SAAUW,GAC9C,OAAOF,GAAe4D,EAASrS,EAAWoI,EAASuG,KASrD,OANI7b,KAAKqe,kBAAqC,WAAjB/I,EAAQ6E,MACnCna,KAAKqe,iBAAiBoB,UAAUvE,EAAS,KAG3Clb,KAAKme,cAAc,IAAIJ,GAAiB2B,UAAUpK,EAASpI,EAAWhC,EAAUgQ,IAEzEA,EAxBP,OAFAlb,KAAKme,cAAcJ,GAAiBpD,OAE7BgC,QAAQC,aAAQ5a,IA4BpBic,EA9JT,IAoKA,SAAWF,GACTA,EAAiBpD,MAAQ,IAEzB,WAOE,OANA,WACE3a,KAAKma,KAAO,GAJa,IAY7B,IAAIuF,EAEJ,WAWE,OAVA,SAAmBpK,EAASsG,EAAkB1Q,EAAUgQ,GACtDlb,KAAKsV,QAAUA,EACftV,KAAK4b,iBAAmBA,EACxB5b,KAAKkL,SAAWA,EAChBlL,KAAKkb,QAAUA,EACflb,KAAKma,KAAO,GANhB,GAcA4D,EAAiB2B,UAAYA,EA7B/B,CA8BG3B,KAAqBA,GAAmB,KAE3C,IAAI,GAEJ,WACE,SAAS4B,EAAgBtU,EAAS6S,EAAgB9G,EAAmBiH,GACnE,IAAIjd,EAAQpB,KAEZA,KAAKqL,QAAUA,EACfrL,KAAKke,eAAiBA,EACtBle,KAAKqe,iBAAmBA,EACxBre,KAAK4f,OAAS7B,GAAiBpD,MAC/B3a,KAAK6f,kBAAoB,IAAI,KAC7B7f,KAAKse,aAAe,GACpBte,KAAK8f,sBAAwB9B,GAAuBxG,OAAOJ,GAE3DpX,KAAKse,aAAalQ,KAAKpO,KAAKqL,QAAQe,iBAAiB,WACnD,OAAOhL,EAAM2e,aAGf/f,KAAKse,aAAalQ,KAAKpO,KAAKqL,QAAQ2U,yBAAyB,WAC3D,OAAO5e,EAAM2e,aAGf/f,KAAKse,aAAalQ,KAAK,KAA2BmP,YAAY,WAC5D,OAAOnc,EAAM2e,aAGf/f,KAAK+f,UA8EP,OA3EAJ,EAAgBhf,UAAUc,QAAU,WAClCzB,KAAKse,aAAe,YAAQte,KAAKse,cACjC,YAAQte,KAAKigB,oBAGf7f,OAAOM,eAAeif,EAAgBhf,UAAW,mBAAoB,CACnEC,IAAK,WACH,OAAOZ,KAAK6f,kBAAkBhf,OAEhCC,YAAY,EACZC,cAAc,IAGhB4e,EAAgBhf,UAAUof,QAAU,WAClC,IAAI3e,EAAQpB,KAERA,KAAKigB,oBACPjgB,KAAKigB,kBAAkBxe,UAEvBzB,KAAKigB,uBAAoBje,GAGF,IAArBhC,KAAK4f,OAAOzF,MAGZna,KAAK4f,OAAO1E,QAAQuC,SAGxBzd,KAAKkgB,SAASnC,GAAiBpD,OAE/B,IAAI9N,EAAQ7M,KAAKqL,QAAQyB,WAEzB,GAAID,GAAS,KAA2BsT,IAAItT,KAAW7M,KAAKqL,QAAQQ,mBAAmBuU,SAAU,CAG/F,IAFA,IAAIC,EAAmB,GAEdzN,EAAK,EAAG+F,EAAK,KAA2BwD,IAAItP,GAAQ+F,EAAK+F,EAAGpM,OAAQqG,IAAM,CACjF,IAAIwJ,EAAWzD,EAAG/F,GAEdvJ,MAAM2T,QAAQZ,EAASC,0BACzBgE,EAAiBjS,KAAKkS,MAAMD,EAAkBjE,EAASC,yBAI3Drc,KAAK8f,sBAAsB9H,IAAIqI,EAAiBE,KAAK,MAErDvgB,KAAKigB,kBAAoB,IAAI,GAAiBjgB,KAAKqL,QAASrL,KAAKke,eAAgB,SAAUsC,GACzF,OAAOpf,EAAM8e,SAASM,SACrBxe,EAAWhC,KAAKqe,kBAEnBre,KAAKigB,kBAAkB3K,QAAQ,CAC7B6E,KAAM,cAGRna,KAAK8f,sBAAsBlI,SAI/B+H,EAAgBhf,UAAU2U,QAAU,SAAUA,GAC5C,OAAItV,KAAKigB,kBACAjgB,KAAKigB,kBAAkB3K,QAAQA,GAGjCqH,QAAQC,aAAQ5a,IAGzB2d,EAAgBhf,UAAUuf,SAAW,SAAUM,GACzCA,IAAaxgB,KAAK4f,SAItB5f,KAAK4f,OAASY,EAEdxgB,KAAK6f,kBAAkB9d,KAAKye,KAGvBb,EAtGT,G,mBCjNIc,GAAsC,SAAUC,EAASC,EAAYC,EAAGC,GAC1E,OAAO,IAAKD,IAAMA,EAAIjE,UAAU,SAAUC,EAASkE,GACjD,SAASC,EAAUxe,GACjB,IACEye,EAAKH,EAAUI,KAAK1e,IACpB,MAAO2J,GACP4U,EAAO5U,IAIX,SAASgV,EAAS3e,GAChB,IACEye,EAAKH,EAAiB,MAAEte,IACxB,MAAO2J,GACP4U,EAAO5U,IAIX,SAAS8U,EAAK3O,GACZA,EAAO8O,KAAOvE,EAAQvK,EAAO9P,OAAS,IAAIqe,EAAE,SAAUhE,GACpDA,EAAQvK,EAAO9P,SACde,KAAKyd,EAAWG,GAGrBF,GAAMH,EAAYA,EAAUP,MAAMI,EAASC,GAAc,KAAKM,WAI9DG,GAA0C,SAAUV,EAASW,GAC/D,IASIC,EACAC,EACAC,EACAC,EAZAC,EAAI,CACNxX,MAAO,EACPyX,KAAM,WACJ,GAAW,EAAPH,EAAE,GAAQ,MAAMA,EAAE,GACtB,OAAOA,EAAE,IAEXI,KAAM,GACNC,IAAK,IAMP,OAAOJ,EAAI,CACTR,KAAMa,EAAK,GACX,MAASA,EAAK,GACd,OAAUA,EAAK,IACI,oBAAXC,SAA0BN,EAAEM,OAAOC,UAAY,WACvD,OAAOhiB,OACLyhB,EAEJ,SAASK,EAAKG,GACZ,OAAO,SAAUC,GACf,OAIJ,SAAcC,GACZ,GAAIb,EAAG,MAAM,IAAIc,UAAU,mCAE3B,KAAOV,GACL,IACE,GAAIJ,EAAI,EAAGC,IAAMC,EAAY,EAARW,EAAG,GAASZ,EAAU,OAAIY,EAAG,GAAKZ,EAAS,SAAOC,EAAID,EAAU,SAAMC,EAAEvX,KAAKsX,GAAI,GAAKA,EAAEN,SAAWO,EAAIA,EAAEvX,KAAKsX,EAAGY,EAAG,KAAKhB,KAAM,OAAOK,EAG3J,OAFID,EAAI,EAAGC,IAAGW,EAAK,CAAS,EAARA,EAAG,GAAQX,EAAEjf,QAEzB4f,EAAG,IACT,KAAK,EACL,KAAK,EACHX,EAAIW,EACJ,MAEF,KAAK,EAEH,OADAT,EAAExX,QACK,CACL3H,MAAO4f,EAAG,GACVhB,MAAM,GAGV,KAAK,EACHO,EAAExX,QACFqX,EAAIY,EAAG,GACPA,EAAK,CAAC,GACN,SAEF,KAAK,EACHA,EAAKT,EAAEG,IAAIQ,MAEXX,EAAEE,KAAKS,MAEP,SAEF,QACE,KAAkBb,GAAZA,EAAIE,EAAEE,MAAYrV,OAAS,GAAKiV,EAAEA,EAAEjV,OAAS,MAAkB,IAAV4V,EAAG,IAAsB,IAAVA,EAAG,IAAW,CACtFT,EAAI,EACJ,SAGF,GAAc,IAAVS,EAAG,MAAcX,GAAKW,EAAG,GAAKX,EAAE,IAAMW,EAAG,GAAKX,EAAE,IAAK,CACvDE,EAAExX,MAAQiY,EAAG,GACb,MAGF,GAAc,IAAVA,EAAG,IAAYT,EAAExX,MAAQsX,EAAE,GAAI,CACjCE,EAAExX,MAAQsX,EAAE,GACZA,EAAIW,EACJ,MAGF,GAAIX,GAAKE,EAAExX,MAAQsX,EAAE,GAAI,CACvBE,EAAExX,MAAQsX,EAAE,GAEZE,EAAEG,IAAIzT,KAAK+T,GAEX,MAGEX,EAAE,IAAIE,EAAEG,IAAIQ,MAEhBX,EAAEE,KAAKS,MAEP,SAGJF,EAAKd,EAAKpX,KAAKyW,EAASgB,GACxB,MAAOxV,GACPiW,EAAK,CAAC,EAAGjW,GACTqV,EAAI,EACJ,QACAD,EAAIE,EAAI,EAIZ,GAAY,EAARW,EAAG,GAAQ,MAAMA,EAAG,GACxB,MAAO,CACL5f,MAAO4f,EAAG,GAAKA,EAAG,QAAK,EACvBhB,MAAM,GAlFCH,CAAK,CAACiB,EAAGC,OA6FlB,GAEJ,WACE,SAASI,EAAsBjX,EAASkX,EAAqBC,GAC3DxiB,KAAKqL,QAAUA,EACfrL,KAAKuiB,oBAAsBA,EAC3BviB,KAAKwiB,mBAAqBA,EAC1BxiB,KAAKyiB,wBAA0B,IAAI,KACnCziB,KAAK0iB,uBAAyB1iB,KAAKyiB,wBAAwB5hB,MA2G7D,OAxGAyhB,EAAsB3hB,UAAUgiB,KAAO,SAAUC,EAAeC,GAC9D,OAAOpC,GAAUzgB,UAAM,OAAQ,EAAQ,WACrC,IAAI8iB,EAAa5H,EAEb9Z,EAAQpB,KAEZ,OAAOohB,GAAYphB,KAAM,SAAU2Y,GACjC,OAAQA,EAAGzO,OACT,KAAK,EACH,MAAO,CAAC,EAEN0Y,GAEJ,KAAK,EAGH,OAFAE,EAAcnK,EAAGgJ,OAEZ3hB,KAAKqL,QAAQuO,cAOlB5Z,KAAKsX,UAAW,EAChB4D,EAAU4H,EAAY5H,QAAQjO,IAAI,SAAUgQ,GAC1C,OAAO7b,EAAM2hB,mBAAmB9F,KAGlCjd,KAAKuiB,oBAAoBS,gBAAgB,CACvCC,UAAW,WAKT,OAJI,IAASC,YAAYL,KACvBA,EAAKzhB,EAAM+hB,UAAUN,IAGhBA,GAAM,CACXO,EAAG,EACH7B,EAAG,IAGP8B,WAAY,WACV,OAAOnI,GAEToI,OAAQ,WACNliB,EAAMkW,UAAW,EAEjBlW,EAAMiK,QAAQmK,SAEhB+N,qBAAqB,IAGhB,CAAC,IAhCC,CAAC,EAEN5G,QAAQmE,OAAO,uBAsC7BwB,EAAsB3hB,UAAUoiB,mBAAqB,SAAU9F,GAC7D,IAAI7b,EAAQpB,KAERgG,EAAKiX,EAAO1M,QAAU0M,EAAO1M,QAAQvK,GAAKiX,EAAOzM,MACjDA,EAAQyM,EAAOzM,MACnB,OAAO,IAAI,KAAOxK,EAAIwK,OAAOxO,GAAW,EAAM,WAC5C,OAAOZ,EAAMohB,mBAAmBvF,GAAQS,QAAQ,WAC9C,OAAOtc,EAAMqhB,wBAAwB1gB,UAAKC,QAKhD5B,OAAOM,eAAe4hB,EAAsB3hB,UAAW,YAAa,CAClEC,IAAK,WACH,OAAOZ,KAAKsX,UAEdxW,YAAY,EACZC,cAAc,IAGhBuhB,EAAsB3hB,UAAUwiB,UAAY,SAAUjY,GACpD,IAAKlL,KAAKqL,QAAQuB,WAChB,MAAO,CACLwW,EAAG,EACH7B,EAAG,GAIPvhB,KAAKqL,QAAQmY,eAAetY,EAAU,GAItClL,KAAKqL,QAAQoY,SAGb,IAAIC,EAAe1jB,KAAKqL,QAAQsY,2BAA2BzY,GAEvD0Y,EAAe,aAAuB5jB,KAAKqL,QAAQuO,cAGvD,MAAO,CACLwJ,EAHMQ,EAAapS,KAAOkS,EAAalS,KAIvC+P,EAHMqC,EAAaC,IAAMH,EAAaG,IAAMH,EAAaI,SAOtDxB,EAjHT,G,UCnJI,I,OAAsC,WACxC,IAAItZ,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,IAmCtC,GAEJ,SAAUO,GAGR,SAASga,EAAgBnZ,GACvB,IAAIxJ,EAAQ2I,EAAOE,KAAKjK,OAASA,KAqFjC,OAnFAoB,EAAM4iB,SAAW5iB,EAAMsK,UAAU,IAAI,MACrCtK,EAAM6iB,QAAU7iB,EAAM4iB,SAASnjB,MAC/BO,EAAMwe,OAAS7B,GAAiBpD,MAChCvZ,EAAM8iB,aAAe,IAAI,KACzB9iB,EAAM6X,SAAWxE,SAASyE,cAAc,OACxC9X,EAAM6X,SAAStJ,UAAY,kBAC3BvO,EAAMiK,QAAUT,EAEhBxJ,EAAMiK,QAAQmO,iBAAiBpY,GAE/BA,EAAMsK,UAAUtK,EAAMiK,QAAQe,iBAAiB,SAAUsV,GACvD,OAAOtgB,EAAM8iB,aAAazG,YAG5Brc,EAAMsK,UAAUtK,EAAMiK,QAAQ2U,yBAAyB,SAAU0B,GAC/D,OAAOtgB,EAAM8iB,aAAazG,YAG5Brc,EAAMsK,UAAUtK,EAAMiK,QAAQc,wBAAwB,SAAUuV,GAE9D,IAAIyC,EAAc/iB,EAAMiK,QAAQyB,YAEN,IAAtB1L,EAAMwe,OAAOzF,OAEbgK,GAAe/iB,EAAMwe,OAAO1U,SAASwC,YAAcyW,EAAYxQ,iBACjEvS,EAAM8iB,aAAazG,YAIvBrc,EAAMsK,UAAU0Y,GAAA,EAAkChjB,EAAM6X,SAAU,QAAS,SAAU/M,GACnF,GAA0B,IAAtB9K,EAAMwe,OAAOzF,KAAjB,CAOA/Y,EAAMiK,QAAQmK,QAId,IAAImD,EAAKyL,GAAA,EAA2BhjB,EAAM6X,UACtC4K,EAAMlL,EAAGkL,IACTC,EAASnL,EAAGmL,OAEZO,EAAajjB,EAAMiK,QAAQQ,mBAAmBwY,WAE9CC,EAAMjjB,KAAKkjB,MAAMF,EAAa,GAE9BjjB,EAAM4X,WAA0C,OAA7B5X,EAAM4X,UAAU9N,UAAqB9J,EAAM4X,UAAU9N,SAASwC,WAAatM,EAAMwe,OAAO1U,SAASwC,aACtH4W,GAAOD,GAGTjjB,EAAM4iB,SAASjiB,KAAK,CAClBqhB,EAAGlX,EAAEsY,KACLjD,EAAGsC,EAAMC,EAASQ,EAClBG,MAAOrjB,EAAMwe,aAIjBxe,EAAMsK,UAAU0Y,GAAA,EAA0BhjB,EAAM6X,SAAU,aAAc,SAAU/M,GAChF,GAAwB,KAAP,EAAZA,EAAEwY,SAAP,CAOAtjB,EAAMujB,OAEN,IAAIC,EAAU,IAAI,KAClBA,EAAQC,gBAAgB,KAAyB,aAAgB,WAC/DD,EAAQnjB,gBAIZL,EAAMsK,UAAUtK,EAAMiK,QAAQiB,yBAAyB,SAAUJ,GAE3DA,EAAEJ,cAAgB1K,EAAMiK,QAAQQ,mBAAmBC,YAAYgZ,kBACjE1jB,EAAMujB,UAIHvjB,EA4IT,OApOA,GAAU2iB,EAAiBha,GA2F3Bga,EAAgBpjB,UAAUc,QAAU,WAClCsI,EAAOpJ,UAAUc,QAAQwI,KAAKjK,MAE9BA,KAAKqL,QAAQ0O,oBAAoB/Z,OAGnC+jB,EAAgBpjB,UAAUgM,MAAQ,WAChC,MAAO,mBAGToX,EAAgBpjB,UAAUiZ,WAAa,WACrC,OAAO5Z,KAAKiZ,UAGd8K,EAAgBpjB,UAAUmT,YAAc,WACtC,OAAO9T,KAAKgZ,WAGd+K,EAAgBpjB,UAAUokB,QAAU,SAAUvE,GAC5C,IAAIpf,EAAQpB,KAEU,IAAlBwgB,EAASrG,MAEVna,KAAKgZ,aAAewH,EAAStV,UAAYlL,KAAKgZ,UAAU9N,UAAYlL,KAAKgZ,UAAU9N,SAASwC,aAAe8S,EAAStV,SAASwC,YAG9H1N,KAAK2kB,OACI3kB,KAAKkkB,cAEdlkB,KAAKkkB,aAAazG,SAGpBzd,KAAKkkB,aAAe,IAAI,KACxB,IAAIrI,EAAQ7b,KAAKkkB,aAAarI,MAG9B,GAFA7b,KAAK4f,OAASY,EAEVxgB,KAAK4f,OAAOzF,OAAS4D,GAAiBpD,MAAMR,KAAhD,CAIA,IAAIjN,EAAYlN,KAAK4f,OAAOhE,iBAE5B5b,KAAK4f,OAAO1E,QAAQ5X,KAAK,SAAU0hB,IAC5BnJ,EAAMkB,yBAA2BiI,EAAM9J,QAAQ3O,OAAS,GAAKW,EAChE9L,EAAM6jB,MAAMD,GAEZ5jB,EAAMujB,SAEPO,MAAM,WACP9jB,EAAMujB,WAIVvkB,OAAOM,eAAeqjB,EAAgBpjB,UAAW,QAAS,CACxDC,IAAK,WACH,OAAOZ,KAAKiZ,SAASzI,OAEvBwH,IAAK,SAAazV,GAChBvC,KAAKiZ,SAASzI,MAAQjO,GAExBzB,YAAY,EACZC,cAAc,IAGhBgjB,EAAgBpjB,UAAUskB,MAAQ,SAAUnC,GAC1C,IAAI1hB,EAAQpB,KAERmlB,EAASnlB,KAAKqL,QAAQQ,mBAE1B,GAAKsZ,EAAOrZ,YAAYgZ,kBAIC,IAArB9kB,KAAK4f,OAAOzF,KAAhB,CAMA,IAAIxB,EAAK3Y,KAAK4f,OAAO1U,SACjBwC,EAAaiL,EAAGjL,WAChBC,EAASgL,EAAGhL,OAEZd,EAAQ7M,KAAKqL,QAAQyB,WAEzB,GAAKD,EAAL,CAIA,IAAItG,EAAUsG,EAAMuY,aAAa7e,QAC7BqL,EAAc/E,EAAMgF,eAAenE,GACnC2X,EAAS,IAAUC,mBAAmB1T,EAAarL,GAGnDgf,EAAW,SAAkB7X,GAC/B,OAAOA,EAAa,GAAKtM,EAAMiK,QAAQma,oBAAoB9X,KAAgBtM,EAAMiK,QAAQma,oBAAoB9X,EAAa,IAGxH+X,EAAsB/X,EAE1B,KARmByX,EAAOO,SAASC,WAAaN,EAAS,IASvD,GAAI3X,EAAa,IAAM6X,EAAS7X,EAAa,GAC3C+X,GAAuB,OAClB,GAAKF,EAAS7X,EAAa,IAE3B,GAAIC,EAASwX,EAAOO,SAASC,WAAa,GAI/C,YADA3lB,KAAK2kB,YAJLc,GAAuB,EAS3BzlB,KAAKgZ,UAAY,CACf9N,SAAU,CACRwC,WAAY+X,EACZ9X,OAAQ,GAEVqM,WAAY+J,EAAgB6B,UAE9BxB,GAAA,EAAgBpkB,KAAKiZ,SAAU,cAAe6J,EAAY+C,YAE1D7lB,KAAKqL,QAAQya,oBAAoB9lB,SAGnC+jB,EAAgBpjB,UAAUgkB,KAAO,WAC/B3kB,KAAKgZ,UAAY,KACjBhZ,KAAK4f,OAAS7B,GAAiBpD,MAE/B3a,KAAKkkB,aAAazG,SAElBzd,KAAKqL,QAAQya,oBAAoB9lB,OAGnC+jB,EAAgB6B,SAAW,CAAC,GAGrB7B,EArOT,CAsOE,KC3QE,GAAsC,WACxC,IAAI/a,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA0BtC,GAAwC,SAAUgN,EAAY1T,EAAQ2N,EAAKgG,GAC7E,IAEIxN,EAFAyN,EAAIC,UAAUpK,OACdqK,EAAIF,EAAI,EAAI5T,EAAkB,OAAT2T,EAAgBA,EAAOrW,OAAOyW,yBAAyB/T,EAAQ2N,GAAOgG,EAE/F,GAAuB,kBAAZK,SAAoD,oBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASP,EAAY1T,EAAQ2N,EAAKgG,QAAW,IAAK,IAAIjI,EAAIgI,EAAWjK,OAAS,EAAGiC,GAAK,EAAGA,KAC1KvF,EAAIuN,EAAWhI,MAAIoI,GAAKF,EAAI,EAAIzN,EAAE2N,GAAKF,EAAI,EAAIzN,EAAEnG,EAAQ2N,EAAKmG,GAAK3N,EAAEnG,EAAQ2N,KAASmG,GAE5F,OAAOF,EAAI,GAAKE,GAAKxW,OAAOM,eAAeoC,EAAQ2N,EAAKmG,GAAIA,GAG1D,GAAkC,SAAUK,EAAYC,GAC1D,OAAO,SAAUpU,EAAQ2N,GACvByG,EAAUpU,EAAQ2N,EAAKwG,KAIvB,GAAsC,SAAUyJ,EAASC,EAAYC,EAAGC,GAC1E,OAAO,IAAKD,IAAMA,EAAIjE,UAAU,SAAUC,EAASkE,GACjD,SAASC,EAAUxe,GACjB,IACEye,EAAKH,EAAUI,KAAK1e,IACpB,MAAO2J,GACP4U,EAAO5U,IAIX,SAASgV,EAAS3e,GAChB,IACEye,EAAKH,EAAiB,MAAEte,IACxB,MAAO2J,GACP4U,EAAO5U,IAIX,SAAS8U,EAAK3O,GACZA,EAAO8O,KAAOvE,EAAQvK,EAAO9P,OAAS,IAAIqe,EAAE,SAAUhE,GACpDA,EAAQvK,EAAO9P,SACde,KAAKyd,EAAWG,GAGrBF,GAAMH,EAAYA,EAAUP,MAAMI,EAASC,GAAc,KAAKM,WAI9D,GAA0C,SAAUP,EAASW,GAC/D,IASIC,EACAC,EACAC,EACAC,EAZAC,EAAI,CACNxX,MAAO,EACPyX,KAAM,WACJ,GAAW,EAAPH,EAAE,GAAQ,MAAMA,EAAE,GACtB,OAAOA,EAAE,IAEXI,KAAM,GACNC,IAAK,IAMP,OAAOJ,EAAI,CACTR,KAAMa,EAAK,GACX,MAASA,EAAK,GACd,OAAUA,EAAK,IACI,oBAAXC,SAA0BN,EAAEM,OAAOC,UAAY,WACvD,OAAOhiB,OACLyhB,EAEJ,SAASK,EAAKG,GACZ,OAAO,SAAUC,GACf,OAIJ,SAAcC,GACZ,GAAIb,EAAG,MAAM,IAAIc,UAAU,mCAE3B,KAAOV,GACL,IACE,GAAIJ,EAAI,EAAGC,IAAMC,EAAY,EAARW,EAAG,GAASZ,EAAU,OAAIY,EAAG,GAAKZ,EAAS,SAAOC,EAAID,EAAU,SAAMC,EAAEvX,KAAKsX,GAAI,GAAKA,EAAEN,SAAWO,EAAIA,EAAEvX,KAAKsX,EAAGY,EAAG,KAAKhB,KAAM,OAAOK,EAG3J,OAFID,EAAI,EAAGC,IAAGW,EAAK,CAAS,EAARA,EAAG,GAAQX,EAAEjf,QAEzB4f,EAAG,IACT,KAAK,EACL,KAAK,EACHX,EAAIW,EACJ,MAEF,KAAK,EAEH,OADAT,EAAExX,QACK,CACL3H,MAAO4f,EAAG,GACVhB,MAAM,GAGV,KAAK,EACHO,EAAExX,QACFqX,EAAIY,EAAG,GACPA,EAAK,CAAC,GACN,SAEF,KAAK,EACHA,EAAKT,EAAEG,IAAIQ,MAEXX,EAAEE,KAAKS,MAEP,SAEF,QACE,KAAkBb,GAAZA,EAAIE,EAAEE,MAAYrV,OAAS,GAAKiV,EAAEA,EAAEjV,OAAS,MAAkB,IAAV4V,EAAG,IAAsB,IAAVA,EAAG,IAAW,CACtFT,EAAI,EACJ,SAGF,GAAc,IAAVS,EAAG,MAAcX,GAAKW,EAAG,GAAKX,EAAE,IAAMW,EAAG,GAAKX,EAAE,IAAK,CACvDE,EAAExX,MAAQiY,EAAG,GACb,MAGF,GAAc,IAAVA,EAAG,IAAYT,EAAExX,MAAQsX,EAAE,GAAI,CACjCE,EAAExX,MAAQsX,EAAE,GACZA,EAAIW,EACJ,MAGF,GAAIX,GAAKE,EAAExX,MAAQsX,EAAE,GAAI,CACvBE,EAAExX,MAAQsX,EAAE,GAEZE,EAAEG,IAAIzT,KAAK+T,GAEX,MAGEX,EAAE,IAAIE,EAAEG,IAAIQ,MAEhBX,EAAEE,KAAKS,MAEP,SAGJF,EAAKd,EAAKpX,KAAKyW,EAASgB,GACxB,MAAOxV,GACPiW,EAAK,CAAC,EAAGjW,GACTqV,EAAI,EACJ,QACAD,EAAIE,EAAI,EAIZ,GAAY,EAARW,EAAG,GAAQ,MAAMA,EAAG,GACxB,MAAO,CACL5f,MAAO4f,EAAG,GAAKA,EAAG,QAAK,EACvBhB,MAAM,GAlFCH,CAAK,CAACiB,EAAGC,OA0GtB,SAAS6D,GAA8BtK,GACrC,OAAO,KAAeuK,MAAMhI,GAAuBiI,OAAO,GAAI,IAAIC,OAAO,UAAY,aAAuBzK,EAAKlZ,OAAS,QAG5H,IAAI,GAEJ,SAAUwH,GAGR,SAASoc,EAAmBvb,EAAQwb,EAAehP,EAAmBiP,EAAiBC,EAAoBC,EAAiBC,EAAoBC,GAC9I,IAAIrlB,EAAQ2I,EAAOE,KAAKjK,OAASA,KA6BjC,OA3BAoB,EAAMmlB,gBAAkBA,EACxBnlB,EAAMolB,mBAAqBA,EAC3BplB,EAAMqlB,iBAAmBA,EACzBrlB,EAAMiK,QAAUT,EAChBxJ,EAAMslB,OAAS,IAAI,GAAgBtlB,EAAMiK,QAAS+a,EAAehP,EAAmBiP,GACpFjlB,EAAMulB,uBAAyB,IAAI,GAAsB/b,EAAQ0b,EAAoB,SAAUrJ,GAC7F,OAAO7b,EAAMohB,mBAAmBvF,KAElC7b,EAAMwlB,iBAAmBxlB,EAAMsK,UAAU,IAAI,GAAgBd,IAE7DxJ,EAAMylB,wBAENzlB,EAAMsK,UAAUtK,EAAMulB,uBAAuBjE,uBAAuB,SAAUhB,GAC5E,OAAOtgB,EAAMslB,OAAOpR,QAAQ,CAC1B6E,KAAM,OACN2B,OAAQ,QAIZ1a,EAAMsK,UAAUtK,EAAMwlB,iBAAiB3C,QAAQ7iB,EAAM0lB,uBAAwB1lB,IAE7EA,EAAMsK,UAAUtK,EAAMslB,OAAOK,iBAAiB,SAAU7a,GACtD,OAAO9K,EAAM4lB,6BAA6B9a,MAG5C9K,EAAMsK,UAAUtK,EAAMolB,mBAAmBS,uBAAuB7lB,EAAMylB,sBAAuBzlB,IAEtFA,EAkGT,OAlIA,GAAU+kB,EAAoBpc,GAmC9Boc,EAAmBvlB,IAAM,SAAUgK,GACjC,OAAOA,EAAO6B,gBAAgB0Z,EAAmBzZ,KAGnDyZ,EAAmBxlB,UAAUc,QAAU,WACrCsI,EAAOpJ,UAAUc,QAAQwI,KAAKjK,MAE9BA,KAAK0mB,OAAOjlB,WAGd0kB,EAAmBxlB,UAAUqmB,6BAA+B,SAAUxG,GACpE,IAAIpf,EAAQpB,KAERA,KAAKknB,iBACPlnB,KAAKknB,eAAezJ,SAEpBzd,KAAKknB,oBAAiBllB,GAGF,IAAlBwe,EAASrG,MAGTna,KAAKknB,eAAiB1G,EAAStF,QAE3BsF,EAASlL,QAAQwG,QAAU0E,EAASlL,QAAQwG,OAAOL,KAErD+E,EAAStF,QAAQ5X,KAAK,SAAU0hB,GAC1BA,EAAM9J,QAAQ3O,OAAS,IAEU,IAA/BiU,EAASlL,QAAQ6R,WAEa,IAA/B3G,EAASlL,QAAQ6R,WAEQ,IAAzBnC,EAAM9J,QAAQ3O,QACfnL,EAAMohB,mBAAmBwC,EAAM9J,QAAQ,IAM3C9Z,EAAMulB,uBAAuBhE,KAAKnC,EAAStF,QAASsF,EAAStV,YAC5Dga,MAAM,MAC0B,WAA1B1E,EAASlL,QAAQ6E,KAC1Bna,KAAK2mB,uBAAuBhE,KAAKnC,EAAStF,QAASsF,EAAStV,UAKxDlL,KAAK2mB,uBAAuBS,UAC9BpnB,KAAK2mB,uBAAuBhE,KAAKnC,EAAStF,QAASsF,EAAStV,UAE5DlL,KAAK4mB,iBAAiB7B,QAAQvE,IAIpCxgB,KAAK4mB,iBAAiBjC,QAI1BwB,EAAmBxlB,UAAUgM,MAAQ,WACnC,OAAOwZ,EAAmBzZ,IAG5ByZ,EAAmBxlB,UAAUmmB,uBAAyB,SAAU5a,GAC9DlM,KAAK2mB,uBAAuBhE,KAAKzW,EAAEuY,MAAMvJ,QAAShP,IAGpDia,EAAmBxlB,UAAU0mB,2BAA6B,SAAUvL,EAAQqL,GAC1E,OAAOnnB,KAAK0mB,OAAOpR,QAAQ,CACzB6E,KAAM,SACN2B,OAAQA,EACRqL,UAAWA,KAIfhB,EAAmBxlB,UAAUkmB,sBAAwB,WACnD,IAEIrW,EAFA8W,EAAKtnB,KAAKwmB,mBAAmBe,iBAAiB,GAAeC,IAK/DhX,EADE8W,EACMxd,EAAA,EAAa,iBAAkB,mBAAoBwd,EAAGG,YAEtD3d,EAAA,EAAa,WAAY,cAGnC9J,KAAK4mB,iBAAiBpW,MAAQA,GAGhC2V,EAAmBxlB,UAAU6hB,mBAAqB,SAAUvF,GAC1D,OAAOyK,GAAgBzK,EAAQjd,KAAKymB,iBAAkBzmB,KAAKumB,gBAAiBvmB,KAAKqL,UAGnF8a,EAAmBzZ,GAAK,oCACxByZ,EAAqB,GAAW,CAAC,GAAQ,EAAG,MAAiB,GAAQ,EAAG,MAAqB,GAAQ,EAAG,MAAmB,GAAQ,EAAG,MAAsB,GAAQ,EAAG,MAAkB,GAAQ,EAAG,MAAqB,GAAQ,EAAG,OAAoBA,GAlI1P,CAoIE,KAGK,SAASuB,GAAgBzK,EAAQ0K,EAAiBC,EAAgBhd,GACvE,OAAO,GAAU5K,UAAM,OAAQ,EAAQ,WACrC,OAAO,GAAYA,KAAM,SAAU2Y,GACjC,OAAQA,EAAGzO,OACT,KAAK,EACH,OAAK+S,EAAO4K,KAGL,CAAC,EAENF,EAAgBrH,MAAMrD,EAAO4K,KAAM,CACnCjd,OAAQA,KANe,CAAC,EAExB,GAOJ,KAAK,EACH+N,EAAGgJ,OAEHhJ,EAAGzO,MAAQ,EAEb,KAAK,EACH,OAAK+S,EAAO1M,QAGL,CAAC,EAENqX,EAAeE,eAAexH,MAAMsH,EAAgB,CAAC3K,EAAO1M,QAAQvK,IAAI+hB,OAAO9K,EAAO1M,QAAQoG,WAAa,MALjF,CAAC,EAE3B,GAKJ,KAAK,EACHgC,EAAGgJ,OAEHhJ,EAAGzO,MAAQ,EAEb,KAAK,EACH,MAAO,CAAC,QAQlB,SAAS8d,GAAkCpd,EAAQqd,EAAqBnM,EAAQqL,GAC9E,GAAKvc,EAAOgC,WAAZ,CAIA,IAAI/B,EAAa,GAAmBjK,IAAIgK,GAExC,GAAKC,EAAL,CAIA,IAAIqd,EAAMtd,EAAOkJ,cACjBjJ,EAAWwc,2BAA2BvL,EAAQqL,GAAW7jB,KAAK,SAAUwf,GACjEA,GAAgBA,EAAY5H,QAAQ3O,QACvC,GAAkB3L,IAAIgK,GAAQiN,YAAYoQ,EAAqBC,OAKrE,IAAI,GAEJ,SAAUne,GAGR,SAASoe,IACP,OAAOpe,EAAOE,KAAKjK,KAAM,CACvBgG,GAAImiB,EAAeX,GACnBtd,MAAOJ,EAAA,EAAa,yBAA0B,gBAC9CK,MAAO,YACPC,aAAc,KAAege,IAAI,IAAkBnV,SAAU,IAAkBoV,wBAC/Ehe,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,KAKTC,OAAQ,QAINzK,KAQR,OA3BA,GAAUmoB,EAAgBpe,GAsB1Boe,EAAexnB,UAAU+J,IAAM,SAAU4d,EAAW1d,GAClD,OAAOod,GAAkCpd,EAAQd,EAAA,EAAa,qCAAsC,+BAGtGqe,EAAeX,GAAK,yBACbW,EA5BT,CA6BE,KAIE,GAEJ,WACE,SAASI,EAAsB9M,EAAM6E,EAAOkI,GAC1CxoB,KAAKyb,KAAOA,EACZzb,KAAKsgB,MAAQA,EACbtgB,KAAKwoB,UAAYA,EAyCnB,OAtCAD,EAAsBE,SAAW,SAAUC,EAAKC,GAC9C,OAAKD,GAAsB,kBAARA,EAIZ,IAAIH,EAAsBA,EAAsBK,gBAAgBF,EAAKC,EAASlN,MAAO8M,EAAsBM,iBAAiBH,EAAKC,EAASrI,OAAQiI,EAAsBO,iBAAiBJ,IAHvL,IAAIH,EAAsBI,EAASlN,KAAMkN,EAASrI,OAAO,IAMpEiI,EAAsBM,iBAAmB,SAAUH,EAAKK,GACtD,OAA6B,kBAAdL,EAAIpI,MAAqBoI,EAAIpI,MAAM0I,cAAgB,IAChE,IAAK,QACH,OAAO,EAIT,IAAK,QACH,OAAO,EAIT,IAAK,WACH,OAAO,EAIT,QACE,OAAOD,IAIbR,EAAsBK,gBAAkB,SAAUF,EAAKO,GACrD,MAA2B,kBAAbP,EAAIjN,KAAoB,IAAI,GAAeiN,EAAIjN,MAAQwN,GAGvEV,EAAsBO,iBAAmB,SAAUJ,GACjD,MAAgC,mBAAlBA,EAAIF,WAA0BE,EAAIF,WAG3CD,EA7CT,GAgDI,GAEJ,SAAUxe,GAGR,SAASmf,IACP,OAAOnf,EAAOE,KAAKjK,KAAM,CACvBgG,GAAIkjB,EAAkB1B,GACtBpd,aAAc,KAAege,IAAI,IAAkBnV,SAAU,IAAkBoV,wBAC/Ec,YAAa,CACXA,YAAa,wBACbjU,KAAM,CAAC,CACLkU,KAAM,OACNC,OAAQ,CACN,KAAQ,SACR,SAAY,CAAC,QACb,WAAc,CACZ,KAAQ,CACN,KAAQ,UAEV,MAAS,CACP,KAAQ,SACR,QAAW,WACX,KAAQ,CAAC,QAAS,WAAY,kBAMpCrpB,KAkBR,OA5CA,GAAUkpB,EAAmBnf,GA6B7Bmf,EAAkBvoB,UAAU2oB,iBAAmB,SAAUhB,EAAW1d,EAAQ2e,GAC1E,IAAIrU,EAAO,GAAsBuT,SAASc,EAAS,CACjD9N,KAAM,GAAed,MACrB2F,MAAO,IAIT,OAAO0H,GAAkCpd,EAAQd,EAAA,EAAa,qCAAsC,6BAA8B,CAChI2R,KAAMvG,EAAKuG,KACXc,sBAAsB,EACtBY,4BAA6BjI,EAAKsT,WACjCtT,EAAKoL,QAGV4I,EAAkB1B,GAAK,2BAChB0B,EA7CT,CA8CE,KAIE,GAEJ,SAAUnf,GAGR,SAASyf,IACP,OAAOzf,EAAOE,KAAKjK,KAAM,CACvBgG,GAAIwjB,EAAehC,GACnBtd,MAAOJ,EAAA,EAAa,iBAAkB,eACtCK,MAAO,WACPC,aAAc,KAAege,IAAI,IAAkBnV,SAAU,IAAkBoV,wBAC/Ehe,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,KAOT6I,IAAK,CACH7I,QAAS,MAQXC,OAAQ,KAIVmL,SAAU,CACRtF,MAAO,iBACPK,MAAO,EACP8Y,KAAM,KAAerB,IAAI,IAAkBnV,SAAU8S,GAA8B,GAAelL,YAEpGsO,YAAa,CACXA,YAAa,cACbjU,KAAM,CAAC,CACLkU,KAAM,OACNC,OAAQ,CACN,KAAQ,SACR,WAAc,CACZ,KAAQ,CACN,KAAQ,UAEV,MAAS,CACP,KAAQ,SACR,QAAW,QACX,KAAQ,CAAC,QAAS,WAAY,kBAMpCrpB,KAiBR,OAvEA,GAAUwpB,EAAgBzf,GAyD1Byf,EAAe7oB,UAAU+J,IAAM,SAAU4d,EAAW1d,EAAQ2e,GAC1D,IAAIrU,EAAO,GAAsBuT,SAASc,EAAS,CACjD9N,KAAM,GAAeZ,SACrByF,MAAO,IAIT,OAAO0H,GAAkCpd,EAAQd,EAAA,EAAa,qCAAsC,6BAA8B,CAChI2R,KAAM,GAAeZ,SAASN,SAASrF,EAAKuG,MAAQvG,EAAKuG,KAAO,GAAed,MAC/EwC,4BAA6BjI,EAAKsT,WACjCtT,EAAKoL,QAGVkJ,EAAehC,GAAK,yBACbgC,EAxET,CAyEE,KAIE,GAEJ,SAAUzf,GAGR,SAAS2f,IACP,OAAO3f,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI0jB,EAAalC,GACjBtd,MAAOJ,EAAA,EAAa,eAAgB,oBACpCK,MAAO,gBACPC,aAAc,KAAege,IAAI,IAAkBnV,SAAU,IAAkBoV,wBAC/EzS,SAAU,CACRtF,MAAO,iBACPK,MAAO,IACP8Y,KAAM,KAAerB,IAAI,IAAkBnV,SAAU8S,GAA8B,GAAejL,UAEpGqO,YAAa,CACXA,YAAa,mBACbjU,KAAM,CAAC,CACLkU,KAAM,OACNC,OAAQ,CACN,KAAQ,SACR,WAAc,CACZ,KAAQ,CACN,KAAQ,UAEV,MAAS,CACP,KAAQ,SACR,QAAW,QACX,KAAQ,CAAC,QAAS,WAAY,kBAMpCrpB,KAkBR,OAlDA,GAAU0pB,EAAc3f,GAmCxB2f,EAAa/oB,UAAU+J,IAAM,SAAU4d,EAAW1d,EAAQ2e,GACxD,IAAIrU,EAAO,GAAsBuT,SAASc,EAAS,CACjD9N,KAAM,GAAeX,OACrBwF,MAAO,IAIT,OAAO0H,GAAkCpd,EAAQd,EAAA,EAAa,mCAAoC,+BAAgC,CAChI2R,KAAM,GAAeX,OAAOP,SAASrF,EAAKuG,MAAQvG,EAAKuG,KAAO,GAAed,MAC7E4B,sBAAsB,EACtBY,4BAA6BjI,EAAKsT,WACjCtT,EAAKoL,QAGVoJ,EAAalC,GAAK,6BACXkC,EAnDT,CAoDE,KAIE,GAEJ,SAAU3f,GAGR,SAAS4f,IACP,OAAO5f,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI2jB,EAAsBnC,GAC1Btd,MAAOJ,EAAA,EAAa,wBAAyB,oBAC7CK,MAAO,mBACPC,aAAc,KAAege,IAAI,IAAkBnV,SAAU8S,GAA8B,GAAehL,wBAC1G1Q,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,KAOTC,OAAQ,QAINzK,KAaR,OAlCA,GAAU2pB,EAAuB5f,GAwBjC4f,EAAsBhpB,UAAU+J,IAAM,SAAU4d,EAAW1d,GACzD,OAAOod,GAAkCpd,EAAQd,EAAA,EAAa,qCAAsC,wCAAyC,CAC3I2R,KAAM,GAAeV,sBACrBwB,sBAAsB,GACrB,IAKLoN,EAAsBnC,GAAK,gCACpBmC,EAnCT,CAoCE,KAIE,GAEJ,SAAU5f,GAGR,SAAS6f,IACP,OAAO7f,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI4jB,EAAapC,GACjBtd,MAAOJ,EAAA,EAAa,eAAgB,WACpCK,MAAO,UACPC,aAAc,KAAege,IAAI,IAAkBnV,SAAU8S,GAA8B,GAAe/K,kBACtGhb,KAaR,OArBA,GAAU4pB,EAAc7f,GAWxB6f,EAAajpB,UAAU+J,IAAM,SAAU4d,EAAW1d,GAChD,OAAOod,GAAkCpd,EAAQd,EAAA,EAAa,qBAAsB,+BAAgC,CAClH2R,KAAM,GAAeT,aACrBuB,sBAAsB,GACrB,IAKLqN,EAAapC,GAAK,uBACXoC,EAtBT,CAuBE,KAIE,GAEJ,SAAU7f,GAGR,SAAS8f,IACP,OAAO9f,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI6jB,EAAcrC,GAClBtd,MAAOJ,EAAA,EAAa,gBAAiB,eACrCK,MAAO,WACPC,aAAc,KAAege,IAAI,IAAkBnV,SAAU8S,GAA8B,GAAenL,WAC1GvQ,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,KAOT6I,IAAK,CACH7I,QAAS,MAQXC,OAAQ,QAINzK,KAaR,OA3CA,GAAU6pB,EAAe9f,GAiCzB8f,EAAclpB,UAAU+J,IAAM,SAAU4d,EAAW1d,GACjD,OAAOod,GAAkCpd,EAAQd,EAAA,EAAa,oCAAqC,2BAA4B,CAC7H2R,KAAM,GAAeb,SACrBuC,6BAA6B,GAC5B,IAKL0M,EAAcrC,GAAK,wBACZqC,EA5CT,CA6CE,KClxBK,SAASC,GAAgBjd,EAAOgP,GACrC,IAAIkO,EAAU,GACV3N,EAAW,KAAyB4N,QAAQnd,GAC5C6P,EAAWN,EAASnP,IAAI,SAAUmP,GACpC,OAAOO,QAAQC,QAAQR,EAAS6N,kBAAkBpd,EAAOgP,IAAQvY,KAAK,SAAU+O,GAC9E,GAAIhJ,MAAM2T,QAAQ3K,GAChB,IAAK,IAAIO,EAAK,EAAGsX,EAAW7X,EAAQO,EAAKsX,EAAS3d,OAAQqG,IAAM,CAC9D,IAAIuX,EAASD,EAAStX,GACtBmX,EAAQ3b,KAAK,CACX+b,OAAQA,EACR/N,SAAUA,OAIf8I,MAAM,QAEX,OAAOvI,QAAQR,IAAIO,GAAUpZ,KAAK,WAChC,OAAO,aAAUymB,EAAS,SAAU3O,EAAGlS,GAErC,OAAIkS,EAAE+O,OAAO1c,MAAMQ,gBAAkB/E,EAAEihB,OAAO1c,MAAMQ,iBAC1C,EACCmN,EAAE+O,OAAO1c,MAAMQ,gBAAkB/E,EAAEihB,OAAO1c,MAAMQ,gBAClD,EACEmO,EAASgO,QAAQhP,EAAEgB,UAAYA,EAASgO,QAAQlhB,EAAEkT,WACnD,EACCA,EAASgO,QAAQhP,EAAEgB,UAAYA,EAASgO,QAAQlhB,EAAEkT,UACpD,EACEhB,EAAE+O,OAAO1c,MAAMS,YAAchF,EAAEihB,OAAO1c,MAAMS,aAC7C,EACCkN,EAAE+O,OAAO1c,MAAMS,YAAchF,EAAEihB,OAAO1c,MAAMS,YAC9C,EAEA,MCrCf,YAA2B,IAC3B,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAsB,IAAI,IDmC1B,YAAwB,2BAA4B,SAAUvD,EAAUuK,GACtE,IAAIyI,EAAWzI,EAAKyI,SAChB0M,EAAmBnV,EAAKmV,iBAE5B,KAAM1M,aAAoB,MACxB,MAAM,eAGR,IAAI9Q,EAAQlC,EAAS/J,IAAI,MAAekM,SAAS6Q,GAEjD,IAAK9Q,EACH,MAAM,eAGR,IAAIwF,EAAS,GACb,OAAOyX,GAAgBjd,EAAO,KAAkBiR,MAAMxa,KAAK,SAAUf,GAanE,IAZA,IAAIqa,EAAU,GAEV0N,EAAU,SAAiBC,GACG,qBAArBF,GAAoCG,QAAQD,EAAKJ,OAAO5Z,SACjE8B,EAAOjE,KAAKmc,EAAKJ,QACRE,KAAqB,GAAKE,EAAKnO,SAASqO,iBACjD7N,EAAQxO,KAAKuO,QAAQC,QAAQ2N,EAAKnO,SAASqO,gBAAgB5d,EAAO0d,EAAKJ,OAAQ,KAAkBrM,OAAOxa,KAAK,SAAU6mB,GACrH,OAAO9X,EAAOjE,KAAK+b,GAAUI,EAAKJ,YAK/BvX,EAAK,EAAG8X,EAAUnoB,EAAOqQ,EAAK8X,EAAQne,OAAQqG,IAAM,CAG3D0X,EAFWI,EAAQ9X,IAKrB,OAAO+J,QAAQR,IAAIS,KAClBtZ,KAAK,WACN,OAAO+O,M,WEtEPsY,GAEJ,WACE,SAASA,EAAiBC,EAAiBC,GACzC7qB,KAAK4qB,gBAAkBA,EACvB5qB,KAAK8qB,UAAYD,EACjB7qB,KAAK+qB,cAAgB,EACrB/qB,KAAK8Y,mBAAoB,EACzB9Y,KAAKgrB,QAAUvW,SAASyE,cAAc,OAaxC,OAVAyR,EAAiBhqB,UAAUsqB,iBAAmB,SAAUnH,QAC7B9hB,IAArBhC,KAAKkrB,YACPlrB,KAAKkrB,YAAcpH,EACV9jB,KAAKkrB,cAAgBpH,IAC9B9jB,KAAKkrB,YAAcpH,EAEnB9jB,KAAK8qB,cAIFH,EAnBT,GAsBI,GAEJ,WACE,SAASQ,EAAsBvgB,EAAQwgB,EAAaC,GAElDrrB,KAAK6Y,qBAAsB,EAC3B7Y,KAAK8Y,mBAAoB,EACzB9Y,KAAKsrB,UAAY,IAAIC,IACrBvrB,KAAK2X,IAAM,oBAAqBwT,EAAsBK,QACtDxrB,KAAKqL,QAAUT,EACf5K,KAAKyrB,eAAeL,GACpBprB,KAAKiZ,SAAWxE,SAASyE,cAAc,QACvClZ,KAAKiZ,SAASyS,UAAY,SAC1BtH,GAAA,EAAapkB,KAAKiZ,SAAU,uBAC5BjZ,KAAK2rB,eACL3rB,KAAK4rB,aAAaP,EAAKpe,IAAI,SAAUoe,GACnC,OAAOA,EAAKlB,UACV,GAiGN,OA9FAgB,EAAsBxqB,UAAUgrB,aAAe,WAC7C,IAAIhT,EAAK3Y,KAAKqL,QAAQQ,mBAClB6Z,EAAW/M,EAAG+M,SACdrB,EAAa1L,EAAG0L,WAEpBrkB,KAAKiZ,SAAS4S,MAAM/H,OAASziB,KAAKyqB,MAAmB,IAAbzH,GAAoB,KAC5DrkB,KAAKiZ,SAAS4S,MAAMxH,WAAaA,EAAa,KAC9CrkB,KAAKiZ,SAAS4S,MAAME,SAAW1qB,KAAKyqB,MAA0B,GAApBpG,EAASqG,UAAkB,KACrE/rB,KAAKiZ,SAAS4S,MAAMG,aAAe3qB,KAAKyqB,MAA0B,IAApBpG,EAASqG,UAAmB,KAC1E/rB,KAAKiZ,SAASyS,UAAY,UAG5BP,EAAsBxqB,UAAUirB,aAAe,SAAUK,EAAWC,GAClElsB,KAAKsrB,UAAUa,QAEf,IAAIpC,EAAU,aAASkC,GAEvB,GAAI,aAAelC,GACjB/pB,KAAKiZ,SAASyS,UAAY,+BAD5B,CAOA,IAFA,IAAI5jB,EAAO,GAEF0G,EAAI,EAAGA,EAAIub,EAAQxd,OAAQiC,IAAK,CACvC,IAAI+B,EAAUwZ,EAAQvb,GAAG+B,QAEzB,GAAIA,EAAS,CACX,IAAIC,EAAQ,aAAOD,EAAQC,OACvB4b,OAAO,EAEP7b,EAAQvK,IACVomB,EAAO,SAAW5d,EAAI,IAAMgC,EAAQ,OAEpCxQ,KAAKsrB,UAAUtT,IAAIqU,OAAO7d,GAAI+B,IAE9B6b,EAAO,SAAW5b,EAAQ,UAG5B1I,EAAKsG,KAAKge,IAId,IAAIE,EAAuC,KAA5BtsB,KAAKiZ,SAASyS,WAAgD,WAA5B1rB,KAAKiZ,SAASyS,UAC/D1rB,KAAKiZ,SAASyS,UAAY5jB,EAAKyY,KAAK,8BAEpCvgB,KAAKqL,QAAQya,oBAAoB9lB,MAE7BssB,GAAYJ,GACd9H,GAAA,EAAapkB,KAAKiZ,SAAU,YAIhCkS,EAAsBxqB,UAAU4rB,WAAa,SAAUC,GACrD,OAAOA,EAAKC,gBAAkBzsB,KAAKiZ,SAAWjZ,KAAKsrB,UAAU1qB,IAAI4rB,EAAKxmB,SAAMhE,GAG9EmpB,EAAsBxqB,UAAUgM,MAAQ,WACtC,OAAO3M,KAAK2X,KAGdwT,EAAsBxqB,UAAUiZ,WAAa,WAC3C,OAAO5Z,KAAKiZ,UAGdkS,EAAsBxqB,UAAU8qB,eAAiB,SAAUhe,GACzD,GAAKzN,KAAKqL,QAAQuB,WAAlB,CAIA,IAAIc,EAAaD,EAAMQ,gBAEnBN,EAAS3N,KAAKqL,QAAQyB,WAAWoJ,gCAAgCxI,GAErE1N,KAAK0sB,gBAAkB,CACrBxhB,SAAU,CACRwC,WAAYA,EACZC,OAAQA,GAEVqM,WAAY,CAAC,MAMjBmR,EAAsBxqB,UAAUmT,YAAc,WAC5C,OAAO9T,KAAK0sB,iBAGdvB,EAAsBxqB,UAAUymB,UAAY,WAC1C,OAAOpnB,KAAKiZ,SAAS0T,aAAa,kCAGpCxB,EAAsBK,QAAU,EACzBL,EAhHT,GAmHIyB,GAEJ,WACE,SAASA,IACP5sB,KAAK6sB,mBAAqB,GAC1B7sB,KAAK8sB,gBAAkB,GACvB9sB,KAAK+sB,yBAA2B,GAqBlC,OAlBAH,EAAejsB,UAAUqsB,cAAgB,SAAUC,EAAYC,GAC7DltB,KAAK8sB,gBAAgB1e,KAAK6e,GAE1BjtB,KAAK+sB,yBAAyB3e,KAAK8e,IAGrCN,EAAejsB,UAAUwsB,iBAAmB,SAAUC,GACpDptB,KAAK6sB,mBAAmBze,KAAKgf,IAG/BR,EAAejsB,UAAU0sB,OAAS,SAAUC,GAG1C,IAFA,IAAIC,EAAuBD,EAAe9gB,iBAAiBxM,KAAK6sB,mBAAoB7sB,KAAK8sB,iBAEhFte,EAAI,EAAGC,EAAM8e,EAAqBhhB,OAAQiC,EAAIC,EAAKD,IAC1DxO,KAAK+sB,yBAAyBve,GAAG+e,EAAqB/e,KAInDoe,EAzBT,GA8BI,GAEJ,WACE,SAASY,EAASnC,EAAMzgB,EAAQwH,EAAQqb,EAAwBC,GAC9D,IAKIjgB,EALArM,EAAQpB,KAEZA,KAAKqL,QAAUT,EACf5K,KAAK2tB,MAAQtC,EACbrrB,KAAK4tB,eAAiB,IAAIvkB,MAAMrJ,KAAK2tB,MAAMphB,QAG3CvM,KAAK2tB,MAAM7f,QAAQ,SAAU+f,EAAcrf,GACzC4D,EAAO4a,cAAc,CACnBvf,MAAOogB,EAAa1D,OAAO1c,MAC3BtL,QAAS,IAAuB2rB,OAC/B,SAAU9nB,GACX,OAAO5E,EAAMwsB,eAAepf,GAAKxI,IAMjCyH,EAHGA,EAGK,KAAMsgB,UAAUtgB,EAAOogB,EAAa1D,OAAO1c,OAF3C,KAAM2R,KAAKyO,EAAa1D,OAAO1c,SAMvCA,IACFzN,KAAKguB,eAAiB,IAAI,GAAsBpjB,EAAQ6C,EAAOzN,KAAK2tB,OACpE3tB,KAAKiuB,UAAY,IAAItD,GAAiBld,EAAMQ,gBAAkB,EAAGyf,GACjE1tB,KAAKkuB,YAAcT,EAAuBU,QAAQnuB,KAAKiuB,WAEvDjuB,KAAKqL,QAAQmO,iBAAiBxZ,KAAKguB,iBAqHvC,OAjHAR,EAAS7sB,UAAUc,QAAU,SAAU2Q,EAAQqb,GAC7C,KAAOztB,KAAK4tB,eAAerhB,QACzB6F,EAAO+a,iBAAiBntB,KAAK4tB,eAAevL,OAG1CoL,GACFA,EAAuBW,WAAWpuB,KAAKkuB,aAGzCluB,KAAKqL,QAAQ0O,oBAAoB/Z,KAAKguB,iBAGxCR,EAAS7sB,UAAU0tB,QAAU,WAC3B,IAAIjtB,EAAQpB,KAEZ,IAAKA,KAAKqL,QAAQuB,WAChB,OAAO,EAGT,IAAIC,EAAQ7M,KAAKqL,QAAQyB,WAEzB,OAAO9M,KAAK4tB,eAAerS,KAAK,SAAUvV,EAAIwI,GAC5C,IAAIf,EAAQZ,EAAMyhB,mBAAmBtoB,GACjCmkB,EAAS/oB,EAAMusB,MAAMnf,GAAG2b,OAC5B,SAAU1c,GAAS,KAAMwB,QAAQkb,EAAO1c,SAAWA,EAAMwB,cAI7Due,EAAS7sB,UAAU4tB,sBAAwB,SAAUlD,EAAMjZ,GAGzD,IAFA,IAAIhR,EAAQpB,KAELA,KAAK4tB,eAAerhB,QACzB6F,EAAO+a,iBAAiBntB,KAAK4tB,eAAevL,OAG9CriB,KAAK2tB,MAAQtC,EACbrrB,KAAK4tB,eAAiB,IAAIvkB,MAAMrJ,KAAK2tB,MAAMphB,QAE3CvM,KAAK2tB,MAAM7f,QAAQ,SAAU+f,EAAcrf,GACzC4D,EAAO4a,cAAc,CACnBvf,MAAOogB,EAAa1D,OAAO1c,MAC3BtL,QAAS,IAAuB2rB,OAC/B,SAAU9nB,GACX,OAAO5E,EAAMwsB,eAAepf,GAAKxI,OAKvCwnB,EAAS7sB,UAAU6tB,mBAAqB,SAAU3hB,GAChD,IAAK7M,KAAKguB,eAAe5G,YACvB,OAAO,KAIT,IAAK,IAAI5Y,EAAI,EAAGA,EAAIxO,KAAK4tB,eAAerhB,OAAQiC,IAAK,CACnD,IAAIf,EAAQZ,EAAMyhB,mBAAmBtuB,KAAK4tB,eAAepf,IAErDf,IACFzN,KAAK2tB,MAAMnf,GAAG2b,OAAO1c,MAAQA,GAIjC,OAAOzN,KAAK2tB,OAGdH,EAAS7sB,UAAU8tB,eAAiB,SAAU1E,GAC5C/pB,KAAKguB,eAAepC,aAAa7B,GAAS,GAE1C,IAAK,IAAIvb,EAAI,EAAGA,EAAIxO,KAAK2tB,MAAMphB,OAAQiC,IAAK,CAC1C,IAAIkgB,EAAW3E,EAAQvb,GAEvB,GAAIkgB,EAAU,CACZ,IAAIvE,EAASnqB,KAAK2tB,MAAMnf,GAAG2b,OAC3BA,EAAO5Z,QAAUme,EAASne,SAAW4Z,EAAO5Z,WAKlDid,EAAS7sB,UAAUgrB,aAAe,WAChC3rB,KAAKguB,eAAerC,gBAGtB6B,EAAS7sB,UAAU4rB,WAAa,SAAUC,GACxC,OAAOxsB,KAAKguB,eAAezB,WAAWC,IAGxCgB,EAAS7sB,UAAUguB,cAAgB,WACjC,GAAI3uB,KAAKqL,QAAQuB,WAAY,CAC3B,IAAIa,EAAQzN,KAAKqL,QAAQyB,WAAWwhB,mBAAmBtuB,KAAK4tB,eAAe,IAE3E,GAAIngB,EACF,OAAOA,EAAMQ,gBAIjB,OAAQ,GAGVuf,EAAS7sB,UAAUiuB,OAAS,SAAUnB,GACpC,GAAIztB,KAAKquB,WAAaruB,KAAKqL,QAAQuB,WAAY,CAC7C,IAAIa,EAAQzN,KAAKqL,QAAQyB,WAAWwhB,mBAAmBtuB,KAAK4tB,eAAe,IAEvEngB,IACFzN,KAAKiuB,UAAUrD,gBAAkBnd,EAAMQ,gBAAkB,EACzDwf,EAAuBoB,WAAW7uB,KAAKkuB,aAEvCluB,KAAKguB,eAAevC,eAAehe,GAEnCzN,KAAKqL,QAAQya,oBAAoB9lB,KAAKguB,mBAKrCR,EAlJT,GAsJA,YAA2B,SAAUzd,EAAOC,GAC1C,IAAI8e,EAAqB/e,EAAMG,SAAS,KAEpC4e,GACF9e,EAAUG,QAAQ,gDAAkD2e,EAAqB,OAG3F,IAAIC,EAAuBhf,EAAMG,SAAS,KAEtC6e,GACF/e,EAAUG,QAAQ,0DAA4D4e,EAAuB,oB,wBCzVrG,GAAwC,SAAUvY,EAAY1T,EAAQ2N,EAAKgG,GAC7E,IAEIxN,EAFAyN,EAAIC,UAAUpK,OACdqK,EAAIF,EAAI,EAAI5T,EAAkB,OAAT2T,EAAgBA,EAAOrW,OAAOyW,yBAAyB/T,EAAQ2N,GAAOgG,EAE/F,GAAuB,kBAAZK,SAAoD,oBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASP,EAAY1T,EAAQ2N,EAAKgG,QAAW,IAAK,IAAIjI,EAAIgI,EAAWjK,OAAS,EAAGiC,GAAK,EAAGA,KAC1KvF,EAAIuN,EAAWhI,MAAIoI,GAAKF,EAAI,EAAIzN,EAAE2N,GAAKF,EAAI,EAAIzN,EAAEnG,EAAQ2N,EAAKmG,GAAK3N,EAAEnG,EAAQ2N,KAASmG,GAE5F,OAAOF,EAAI,GAAKE,GAAKxW,OAAOM,eAAeoC,EAAQ2N,EAAKmG,GAAIA,GAG1D,GAAkC,SAAUK,EAAYC,GAC1D,OAAO,SAAUpU,EAAQ2N,GACvByG,EAAUpU,EAAQ2N,EAAKwG,KAgBvB,GAEJ,WACE,SAAS+X,EAAqB3jB,EAASkb,EAAiB0I,EAAsBC,GAC5E,IAAI9tB,EAAQpB,KAEZA,KAAKqL,QAAUA,EACfrL,KAAKumB,gBAAkBA,EACvBvmB,KAAKivB,qBAAuBA,EAC5BjvB,KAAKkvB,eAAiBA,EACtBlvB,KAAKmvB,WAAanvB,KAAKqL,QAAQQ,mBAAmBC,YAAYsjB,SAC9DpvB,KAAKqvB,iBAAmB,GACxBrvB,KAAKsvB,gBAAkB,GACvBtvB,KAAKuvB,QAAU,GACfvvB,KAAKwvB,mCAAqC,KAC1CxvB,KAAKyvB,oBAAsB,EAE3BzvB,KAAKqvB,iBAAiBjhB,KAAKpO,KAAKqL,QAAQe,iBAAiB,WACvD,OAAOhL,EAAMsuB,oBAGf1vB,KAAKqvB,iBAAiBjhB,KAAKpO,KAAKqL,QAAQ2U,yBAAyB,WAC/D,OAAO5e,EAAMsuB,oBAGf1vB,KAAKqvB,iBAAiBjhB,KAAKpO,KAAKqL,QAAQiB,yBAAyB,SAAUJ,GACzE,IAAIyjB,EAAgBvuB,EAAM+tB,WAC1B/tB,EAAM+tB,WAAa/tB,EAAMiK,QAAQQ,mBAAmBC,YAAYsjB,SAE5DO,IAAkBvuB,EAAM+tB,YAC1B/tB,EAAMsuB,oBAIV1vB,KAAKqvB,iBAAiBjhB,KAAK,KAAyBmP,YAAYvd,KAAK0vB,eAAgB1vB,OAErFA,KAAK0vB,iBA4WP,OAzWAV,EAAqBruB,UAAUc,QAAU,WACvCzB,KAAK4vB,gBAEL5vB,KAAKqvB,iBAAmB,YAAQrvB,KAAKqvB,mBAGvCL,EAAqBruB,UAAUivB,cAAgB,WACzC5vB,KAAKwvB,qCACPxvB,KAAKwvB,mCAAmC/R,SAExCzd,KAAKwvB,mCAAqC,KAC1CxvB,KAAKyvB,uBAGHzvB,KAAK6vB,wCACP7vB,KAAK6vB,sCAAsCpS,SAE3Czd,KAAK6vB,sCAAwC,MAG/C7vB,KAAKsvB,gBAAkB,YAAQtvB,KAAKsvB,kBAGtCN,EAAqBruB,UAAUgM,MAAQ,WACrC,OAAOqiB,EAAqBtiB,IAG9BsiB,EAAqBruB,UAAU+uB,eAAiB,WAC9C,IAAItuB,EAAQpB,KAEZA,KAAK4vB,gBAEL,IAAI/iB,EAAQ7M,KAAKqL,QAAQyB,WAEzB,GAAKD,GAIA7M,KAAKmvB,WAAV,CAIA,IAAIW,EAAe9vB,KAAKkvB,eAAetuB,IAAIiM,GAM3C,GAJIijB,GACF9vB,KAAK+vB,uBAAuBD,GAGzB,KAAyB3P,IAAItT,GAAlC,CAkBA,IAAK,IAAI+F,EAAK,EAAG+F,EAAK,KAAyBwD,IAAItP,GAAQ+F,EAAK+F,EAAGpM,OAAQqG,IAAM,CAC/E,IAAIwJ,EAAWzD,EAAG/F,GAElB,GAAoC,oBAAzBwJ,EAASmB,YAA4B,CAC9C,IAAIyS,EAAe5T,EAASmB,YAAY,WACtC,OAAO0S,EAAUjkB,aAGnBhM,KAAKsvB,gBAAgBlhB,KAAK4hB,IAI9BhwB,KAAKkwB,qBAAuB,IAAI,IAAiB,WAC/C9uB,EAAM+uB,sBACL,KACH,IAAIF,EAAY,IAAI,IAAiB,WACnC,IAAIG,IAAiBhvB,EAAMquB,oBAEvBruB,EAAMouB,oCACRpuB,EAAMouB,mCAAmC/R,SAG3Crc,EAAMouB,mCAAqC,YAAwB,SAAU3T,GAC3E,OAAOiO,GAAgBjd,EAAOgP,KAGhCza,EAAMouB,mCAAmClsB,KAAK,SAAU+O,GAClD+d,IAAiBhvB,EAAMquB,sBAEzBruB,EAAM8tB,eAAemB,IAAIxjB,EAAOwF,GAEhCjR,EAAM2uB,uBAAuB1d,GAE7BjR,EAAM8uB,qBAAqBlkB,aAE5B,OACF,KAEHhM,KAAKsvB,gBAAgBlhB,KAAK6hB,GAE1BjwB,KAAKsvB,gBAAgBlhB,KAAKpO,KAAKkwB,sBAE/BlwB,KAAKsvB,gBAAgBlhB,KAAKpO,KAAKqL,QAAQc,wBAAwB,SAAUD,GACvE9K,EAAMiK,QAAQilB,kBAAkB,SAAUhD,GACxClsB,EAAMiK,QAAQklB,gBAAgB,SAAUC,GACtC,IAAIC,EAAY,GACZC,GAAsB,EAE1BtvB,EAAMmuB,QAAQzhB,QAAQ,SAAU6iB,GACzBA,EAAKtC,WAAaqC,IAAuBC,EAAKhC,iBAKjDgC,EAAK/B,OAAO4B,GACZE,EAAqBC,EAAKhC,iBAH1B8B,EAAUriB,KAAKuiB,KAOnB,IAAIve,EAAS,IAAIwa,GACjB6D,EAAU3iB,QAAQ,SAAU8iB,GAC1BA,EAAEnvB,QAAQ2Q,EAAQoe,GAElBpvB,EAAMmuB,QAAQsB,OAAOzvB,EAAMmuB,QAAQnF,QAAQwG,GAAI,KAEjDxe,EAAOib,OAAOC,OAKlBlsB,EAAM8uB,qBAAqBlkB,WAG3BikB,EAAUjkB,cAGZhM,KAAKsvB,gBAAgBlhB,KAAKpO,KAAKqL,QAAQylB,kBAAkB,SAAU5kB,GAC7DA,EAAE6kB,kBAAoB3vB,EAAMmuB,QAAQhjB,OAAS,GAC/CnL,EAAM8uB,qBAAqBlkB,cAI/BhM,KAAKsvB,gBAAgBlhB,KAAKpO,KAAKqL,QAAQ2lB,kBAAkB,SAAU9kB,GACjE9K,EAAM8uB,qBAAqBlkB,cAG7BhM,KAAKsvB,gBAAgBlhB,KAAK,YAAa,WACrC,GAAIhN,EAAMiK,QAAQyB,WAAY,CAC5B,IAAImkB,EAAc,KAAwBC,QAAQ9vB,EAAMiK,SAExDjK,EAAMiK,QAAQilB,kBAAkB,SAAUhD,GACxClsB,EAAMiK,QAAQklB,gBAAgB,SAAU5lB,GACtCvJ,EAAM+vB,kBAAkB7D,EAAgB3iB,OAI5CsmB,EAAYG,QAAQhwB,EAAMiK,cAG1BjK,EAAM+vB,uBAAkBnvB,OAAWA,MAIvChC,KAAKsvB,gBAAgBlhB,KAAKpO,KAAKqL,QAAQiB,yBAAyB,SAAUJ,GACxE,GAAIA,EAAEwZ,SACJ,IAAK,IAAI9S,EAAK,EAAG+F,EAAKvX,EAAMmuB,QAAS3c,EAAK+F,EAAGpM,OAAQqG,IAAM,CAC9C+F,EAAG/F,GACT+Y,mBAKX3rB,KAAKsvB,gBAAgBlhB,KAAKpO,KAAKqL,QAAQgmB,UAAU,SAAUnlB,GACzD,IAAIyM,EAEJ,GAAsB,IAAlBzM,EAAEpJ,OAAOqX,MAEVjO,EAAEpJ,OAAOwuB,SAAwC,MAA7BplB,EAAEpJ,OAAOwuB,QAAQC,QACtC,IAAK,IAAI3e,EAAK,EAAG4e,EAAKpwB,EAAMmuB,QAAS3c,EAAK4e,EAAGjlB,OAAQqG,IAAM,CACzD,IACIrC,EADOihB,EAAG5e,GACK2Z,WAAWrgB,EAAEpJ,OAAOwuB,SAEvC,GAAI/gB,EAAS,EACVoI,EAAKvX,EAAMmlB,iBAAiBuB,eAAexH,MAAM3H,EAAI,CAACpI,EAAQvK,IAAI+hB,OAAOxX,EAAQoG,WAAa,KAAKuO,MAAM,SAAU7H,GAClH,OAAOjc,EAAM6tB,qBAAqBwC,MAAMpU,KAG1C,WAMR4S,EAAUjkB,gBApJJ8jB,GACF9vB,KAAKsvB,gBAAgBlhB,KAAK,YAAkB,WAC1C,IAAIsjB,EAAkBtwB,EAAM8tB,eAAetuB,IAAIiM,GAE3CijB,IAAiB4B,IACnBtwB,EAAM8tB,eAAeyC,OAAO9kB,GAE5BzL,EAAMsuB,mBAEP,QA8ITV,EAAqBruB,UAAUwwB,kBAAoB,SAAUS,EAAmBnE,GAC9E,IAAIrb,EAAS,IAAIwa,GAEjB5sB,KAAKuvB,QAAQzhB,QAAQ,SAAU6iB,GAC7B,OAAOA,EAAKlvB,QAAQ2Q,EAAQqb,KAG1BmE,GACFxf,EAAOib,OAAOuE,GAGhB5xB,KAAKuvB,QAAU,IAGjBP,EAAqBruB,UAAUovB,uBAAyB,SAAUhG,GAChE,IAAI3oB,EAAQpB,KAEZ,GAAKA,KAAKqL,QAAQuB,WAAlB,CASA,IALA,IAGIilB,EAHAC,EAAgB9xB,KAAKqL,QAAQyB,WAAW6G,eAExCoe,EAAS,GAGJnf,EAAK,EAAGof,EAAYjI,EAASnX,EAAKof,EAAUzlB,OAAQqG,IAAM,CACjE,IAAIuX,EAAS6H,EAAUpf,GACnByM,EAAO8K,EAAOA,OAAO1c,MAAMQ,gBAE3BoR,EAAO,GAAKA,EAAOyS,IAGZD,GAAaA,EAAUA,EAAUtlB,OAAS,GAAG4d,OAAO1c,MAAMQ,kBAAoBoR,EAEvFwS,EAAUzjB,KAAK+b,IAGf0H,EAAY,CAAC1H,GACb4H,EAAO3jB,KAAKyjB,KAIhB,IAAIZ,EAAc,KAAwBC,QAAQlxB,KAAKqL,SAEvDrL,KAAKqL,QAAQilB,kBAAkB,SAAUhD,GACvClsB,EAAMiK,QAAQklB,gBAAgB,SAAU5lB,GAKtC,IAJA,IAAIsnB,EAAgB,EAChBC,EAAc,EACd9f,EAAS,IAAIwa,GAEVsF,EAAcH,EAAOxlB,QAAU0lB,EAAgB7wB,EAAMmuB,QAAQhjB,QAAQ,CAC1E,IAAI4lB,EAAoBJ,EAAOG,GAAa,GAAG/H,OAAO1c,MAAMQ,gBAExDmkB,EAAqBhxB,EAAMmuB,QAAQ0C,GAAetD,gBAElDyD,EAAqBD,GACvB/wB,EAAMmuB,QAAQ0C,GAAexwB,QAAQ2Q,EAAQzH,GAE7CvJ,EAAMmuB,QAAQsB,OAAOoB,EAAe,IAC3BG,IAAuBD,GAChC/wB,EAAMmuB,QAAQ0C,GAAe1D,sBAAsBwD,EAAOG,GAAc9f,GAExE8f,IACAD,MAEA7wB,EAAMmuB,QAAQsB,OAAOoB,EAAe,EAAG,IAAI,GAASF,EAAOG,GAAc9wB,EAAMiK,QAAS+G,EAAQzH,EAAU,WACxG,OAAOvJ,EAAM8uB,qBAAqBlkB,cAGpCimB,IACAC,KAKJ,KAAOD,EAAgB7wB,EAAMmuB,QAAQhjB,QACnCnL,EAAMmuB,QAAQ0C,GAAexwB,QAAQ2Q,EAAQzH,GAE7CvJ,EAAMmuB,QAAQsB,OAAOoB,EAAe,GAItC,KAAOC,EAAcH,EAAOxlB,QAC1BnL,EAAMmuB,QAAQnhB,KAAK,IAAI,GAAS2jB,EAAOG,GAAc9wB,EAAMiK,QAAS+G,EAAQzH,EAAU,WACpF,OAAOvJ,EAAM8uB,qBAAqBlkB,cAGpCkmB,IAGF9f,EAAOib,OAAOC,OAIlB2D,EAAYG,QAAQpxB,KAAKqL,WAG3B2jB,EAAqBruB,UAAUwvB,mBAAqB,WAClD,IAAI/uB,EAAQpB,KAERA,KAAK6vB,wCACP7vB,KAAK6vB,sCAAsCpS,SAE3Czd,KAAK6vB,sCAAwC,MAG/C,IAAIhjB,EAAQ7M,KAAKqL,QAAQyB,WAEzB,GAAKD,EAAL,CAIA,IAAIwlB,EAAY,GACZC,EAAS,GAEbtyB,KAAKuvB,QAAQzhB,QAAQ,SAAU6iB,GAC7B,IAAI4B,EAAU5B,EAAKnC,mBAAmB3hB,GAElC0lB,IACFF,EAAUjkB,KAAKmkB,GACfD,EAAOlkB,KAAKuiB,MAIS,IAArB0B,EAAU9lB,SAIdvM,KAAK6vB,sCAAwC,YAAwB,SAAUhU,GAC7E,IAAIa,EAAW2V,EAAUplB,IAAI,SAAUslB,EAAS/jB,GAC9C,IAAIgkB,EAAkB,IAAInpB,MAAMkpB,EAAQhmB,QACpCmQ,EAAW6V,EAAQtlB,IAAI,SAAUslB,EAAS/jB,GAC5C,OAAK+jB,EAAQpI,OAAO5Z,SAAuD,oBAArCgiB,EAAQnW,SAASqO,iBAKrD+H,EAAgBhkB,GAAK+jB,EAAQpI,OACtBxN,QAAQC,aAAQ5a,IALhB2a,QAAQC,QAAQ2V,EAAQnW,SAASqO,gBAAgB5d,EAAO0lB,EAAQpI,OAAQtO,IAAQvY,KAAK,SAAU6mB,GACpGqI,EAAgBhkB,GAAK2b,GACpB,QAMP,OAAOxN,QAAQR,IAAIO,GAAUpZ,KAAK,WAChCgvB,EAAO9jB,GAAGigB,eAAe+D,OAG7B,OAAO7V,QAAQR,IAAIO,KAGrB1c,KAAK6vB,sCAAsCvsB,KAAK,WAC9ClC,EAAMyuB,sCAAwC,OAC7C3K,MAAM,SAAU7H,GACjBjc,EAAMyuB,sCAAwC,KAC9C,aAAkBxS,QAItB2R,EAAqBtiB,GAAK,sBAC1BsiB,EAAuB,GAAW,CAAC,GAAQ,EAAG,MAAkB,GAAQ,EAAG,MAAuB,GAAQ,EAAG,OAAkBA,GA7YjI,GAkZA,YAA2B,I,cC5apB,SAASyD,GAAKC,EAAKC,GAKxB,YAJgB,IAAZA,IACFA,EAAU,UAGGD,GACb,IAAK,SACH,OAAY,OAARA,EACKE,GAAW,IAAKD,GACdtpB,MAAM2T,QAAQ0V,IAyCZG,EAxCMH,EAyCvBI,EAAiBF,GAAW,OADNE,EAxCMH,GA0CrBE,EAAIE,OAAO,SAAUJ,EAASpI,GACnC,OAAOkI,GAAKlI,EAAMoI,IACjBG,IAGL,SAAoBJ,EAAKI,GAEvB,OADAA,EAAiBF,GAAW,OAAQE,GAC7B1yB,OAAO6lB,KAAKyM,GAAKxjB,OAAO6jB,OAAO,SAAUJ,EAASliB,GAEvD,OADAkiB,EAAUK,GAAWviB,EAAKkiB,GACnBF,GAAKC,EAAIjiB,GAAMkiB,IACrBG,GAjDQG,CAAWP,EAAKC,GAEzB,IAAK,SACH,OAAOK,GAAWN,EAAKC,GAEzB,IAAK,UACH,OAiBN,SAAqBzpB,EAAG4pB,GACtB,OAAOF,GAAW1pB,EAAI,IAAM,IAAK4pB,GAlBtBI,CAAYR,EAAKC,GAE1B,IAAK,SACH,OAAOC,GAAWF,EAAKC,GAEzB,IAAK,YACH,OAAOC,GAAW,EAAG,KAEvB,QACE,OAAOA,GAAW,EAAG,KAsB3B,IAAmBC,EAAKC,EAlBxB,SAASF,GAAWO,EAAKL,GACvB,OAAQA,GAAkB,GAAKA,EAAiBK,EAAM,EAOxD,SAASH,GAAW9hB,EAAGyhB,GACrBA,EAAUC,GAAW,OAAQD,GAE7B,IAAK,IAAInkB,EAAI,EAAG4kB,EAAWliB,EAAE3E,OAAQiC,EAAI4kB,EAAU5kB,IACjDmkB,EAAUC,GAAW1hB,EAAEuC,WAAWjF,GAAImkB,GAGxC,OAAOA,ECxBF,SAASU,GAAsBxmB,EAAOymB,EAAWlX,EAAUP,GAChE,OAAOc,QAAQC,QAAQR,EAASmX,0BAA0B1mB,EAAOymB,EAAWzX,IAE9E,YAAwB,gCAAiC,SAAUlR,EAAUuK,GAC3E,IAAIyI,EAAWzI,EAAKyI,SAEpB,KAAMA,aAAoB,MACxB,MAAM,eAGR,IAAI9Q,EAAQlC,EAAS/J,IAAI,MAAekM,SAAS6Q,GAEjD,IAAK9Q,EACH,MAAM,eAGR,IAAI2mB,EAAS,GAET9W,EADY,KAAsBsN,QAAQnd,GAAO4mB,UAC5BxmB,IAAI,SAAUmP,GACrC,OAAOO,QAAQC,QAAQR,EAASsX,sBAAsB7mB,EAAO,KAAkBiR,OAAOxa,KAAK,SAAU+O,GACnG,GAAIhJ,MAAM2T,QAAQ3K,GAChB,IAAK,IAAIO,EAAK,EAAG+gB,EAAWthB,EAAQO,EAAK+gB,EAASpnB,OAAQqG,IAAM,CAC9D,IAAIghB,EAAKD,EAAS/gB,GAClB4gB,EAAOplB,KAAK,CACVX,MAAOmmB,EAAGnmB,MACVoC,MAAO,CAAC+jB,EAAG/jB,MAAMgkB,IAAKD,EAAG/jB,MAAMikB,MAAOF,EAAG/jB,MAAMkkB,KAAMH,EAAG/jB,MAAMmkB,cAMxE,OAAOrX,QAAQR,IAAIO,GAAUpZ,KAAK,WAChC,OAAOkwB,MAGX,YAAwB,oCAAqC,SAAU7oB,EAAUuK,GAC/E,IAAIyI,EAAWzI,EAAKyI,SAChB9N,EAAQqF,EAAKrF,MACbpC,EAAQyH,EAAKzH,MAEjB,KAAMkQ,aAAoB,QAAStU,MAAM2T,QAAQnN,IAA2B,IAAjBA,EAAMtD,SAAiB,KAAMqR,SAASnQ,GAC/F,MAAM,eAGR,IAAIomB,EAAMhkB,EAAM,GACZikB,EAAQjkB,EAAM,GACdkkB,EAAOlkB,EAAM,GACbmkB,EAAQnkB,EAAM,GACdhD,EAAQlC,EAAS/J,IAAI,MAAekM,SAAS6Q,GAEjD,IAAK9Q,EACH,MAAM,eAGR,IAAIymB,EAAY,CACd7lB,MAAOA,EACPoC,MAAO,CACLgkB,IAAKA,EACLC,MAAOA,EACPC,KAAMA,EACNC,MAAOA,IAGPC,EAAgB,GAEhBvX,EADY,KAAsBsN,QAAQnd,GAAO4mB,UAC5BxmB,IAAI,SAAUmP,GACrC,OAAOO,QAAQC,QAAQR,EAASmX,0BAA0B1mB,EAAOymB,EAAW,KAAkBxV,OAAOxa,KAAK,SAAU+O,GAC9GhJ,MAAM2T,QAAQ3K,IAChB4hB,EAAc7lB,KAAKkS,MAAM2T,EAAe5hB,OAI9C,OAAOsK,QAAQR,IAAIO,GAAUpZ,KAAK,WAChC,OAAO2wB,M,cCpGP,GAAwC,SAAUzd,EAAY1T,EAAQ2N,EAAKgG,GAC7E,IAEIxN,EAFAyN,EAAIC,UAAUpK,OACdqK,EAAIF,EAAI,EAAI5T,EAAkB,OAAT2T,EAAgBA,EAAOrW,OAAOyW,yBAAyB/T,EAAQ2N,GAAOgG,EAE/F,GAAuB,kBAAZK,SAAoD,oBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASP,EAAY1T,EAAQ2N,EAAKgG,QAAW,IAAK,IAAIjI,EAAIgI,EAAWjK,OAAS,EAAGiC,GAAK,EAAGA,KAC1KvF,EAAIuN,EAAWhI,MAAIoI,GAAKF,EAAI,EAAIzN,EAAE2N,GAAKF,EAAI,EAAIzN,EAAEnG,EAAQ2N,EAAKmG,GAAK3N,EAAEnG,EAAQ2N,KAASmG,GAE5F,OAAOF,EAAI,GAAKE,GAAKxW,OAAOM,eAAeoC,EAAQ2N,EAAKmG,GAAIA,GAG1D,GAAkC,SAAUK,EAAYC,GAC1D,OAAO,SAAUpU,EAAQ2N,GACvByG,EAAUpU,EAAQ2N,EAAKwG,KAkBvB,GAEJ,WACE,SAASid,EAAc7oB,EAAS8oB,EAAoBC,GAClD,IAAIhzB,EAAQpB,KAEZA,KAAKqL,QAAUA,EACfrL,KAAKm0B,mBAAqBA,EAC1Bn0B,KAAKo0B,sBAAwBA,EAC7Bp0B,KAAKqvB,iBAAmB,GACxBrvB,KAAKsvB,gBAAkB,GACvBtvB,KAAKq0B,gBAAkB,GACvBr0B,KAAKs0B,YAAc,IAAI/I,IACvBvrB,KAAKu0B,mBAAqB,GAC1Bv0B,KAAKw0B,kBAAoB,GAEzBx0B,KAAKqvB,iBAAiBjhB,KAAK/C,EAAQe,iBAAiB,SAAUF,GAC5D9K,EAAM+tB,WAAa/tB,EAAMqzB,YAEzBrzB,EAAMszB,oBAGR10B,KAAKqvB,iBAAiBjhB,KAAK/C,EAAQ2U,yBAAyB,SAAU9T,GACpE,OAAO9K,EAAMszB,oBAGf10B,KAAKqvB,iBAAiBjhB,KAAK,KAAsBmP,YAAY,SAAUrR,GACrE,OAAO9K,EAAMszB,oBAGf10B,KAAKqvB,iBAAiBjhB,KAAK/C,EAAQiB,yBAAyB,SAAUJ,GACpE,IAAIyjB,EAAgBvuB,EAAM+tB,WAC1B/tB,EAAM+tB,WAAa/tB,EAAMqzB,YAErB9E,IAAkBvuB,EAAM+tB,aACtB/tB,EAAM+tB,WACR/tB,EAAMszB,iBAENtzB,EAAMuzB,2BAKZ30B,KAAK40B,cAAgB,KACrB50B,KAAK60B,gBAAkB,KACvB70B,KAAKmvB,WAAanvB,KAAKy0B,YACvBz0B,KAAK00B,iBAwNP,OArNAR,EAAcvzB,UAAU8zB,UAAY,WAClC,IAAI5nB,EAAQ7M,KAAKqL,QAAQyB,WAEzB,IAAKD,EACH,OAAO,EAGT,IAAI/I,EAAa+I,EAAMioB,wBAEnBC,EAAmB/0B,KAAKo0B,sBAAsBY,SAASlxB,EAAWyE,UAEtE,GAAIwsB,EAAkB,CACpB,IAAIE,EAAkBF,EAAkC,gBAExD,GAAIE,QAAiDjzB,IAA9BizB,EAAwB,SAAoBA,EAAwB,OACzF,OAAOA,EAAwB,OAInC,OAAOj1B,KAAKqL,QAAQQ,mBAAmBC,YAAYmpB,iBAGrDf,EAAcvzB,UAAUgM,MAAQ,WAC9B,OAAOunB,EAAcxnB,IAGvBwnB,EAActzB,IAAM,SAAUgK,GAC5B,OAAOA,EAAO6B,gBAAgBzM,KAAK0M,KAGrCwnB,EAAcvzB,UAAUc,QAAU,WAChCzB,KAAKk1B,OACLl1B,KAAK20B,uBACL30B,KAAKqvB,iBAAmB,YAAQrvB,KAAKqvB,mBAGvC6E,EAAcvzB,UAAU+zB,eAAiB,WACvC,IAAItzB,EAAQpB,KAIZ,GAFAA,KAAKk1B,OAEAl1B,KAAKmvB,WAAV,CAIA,IAAItiB,EAAQ7M,KAAKqL,QAAQyB,WAEpBD,GAAU,KAAsBsT,IAAItT,KAIzC7M,KAAKsvB,gBAAgBlhB,KAAKpO,KAAKqL,QAAQc,wBAAwB,SAAUD,GAClE9K,EAAMwzB,gBACTxzB,EAAMwzB,cAAgB,IAAI,IAE1BxzB,EAAMwzB,cAAc7V,aAAa,WAC/B3d,EAAMwzB,cAAgB,KAEtBxzB,EAAM+zB,gBACLjB,EAAckB,oBAIrBp1B,KAAKm1B,kBAGPjB,EAAcvzB,UAAUw0B,aAAe,WACrC,IAAI/zB,EAAQpB,KAEZA,KAAK60B,gBAAkB,YAAwB,SAAUhZ,GACvD,IAAIhP,EAAQzL,EAAMiK,QAAQyB,WAE1B,OAAKD,EDhJJ,SAAmBA,EAAOgP,GAC/B,IAAIwZ,EAAS,GAET3Y,EADY,KAAsBsN,QAAQnd,GAAO4mB,UAC5BxmB,IAAI,SAAUmP,GACrC,OAAOO,QAAQC,QAAQR,EAASsX,sBAAsB7mB,EAAOgP,IAAQvY,KAAK,SAAU+O,GAClF,GAAIhJ,MAAM2T,QAAQ3K,GAChB,IAAK,IAAIO,EAAK,EAAGsX,EAAW7X,EAAQO,EAAKsX,EAAS3d,OAAQqG,IAAM,CAC9D,IAAI0gB,EAAYpJ,EAAStX,GACzByiB,EAAOjnB,KAAK,CACVklB,UAAWA,EACXlX,SAAUA,SAMpB,OAAOO,QAAQR,IAAIO,GAAUpZ,KAAK,WAChC,OAAO+xB,ICmIEC,CAAUzoB,EAAOgP,GAHfc,QAAQC,QAAQ,MAM3B5c,KAAK60B,gBAAgBvxB,KAAK,SAAUiyB,GAClCn0B,EAAMo0B,kBAAkBD,GAExBn0B,EAAMq0B,sBAAsBF,GAE5Bn0B,EAAMyzB,gBAAkB,MACvB,OAGLX,EAAcvzB,UAAUu0B,KAAO,WACzBl1B,KAAK40B,gBACP50B,KAAK40B,cAAcnX,SAEnBzd,KAAK40B,cAAgB,MAGnB50B,KAAK60B,kBACP70B,KAAK60B,gBAAgBpX,SAErBzd,KAAK60B,gBAAkB,MAGzB70B,KAAKsvB,gBAAkB,YAAQtvB,KAAKsvB,kBAGtC4E,EAAcvzB,UAAU60B,kBAAoB,SAAUE,GACpD,IAAIt0B,EAAQpB,KAER21B,EAAcD,EAAWzoB,IAAI,SAAUyJ,GACzC,MAAO,CACLjJ,MAAO,CACLQ,gBAAiByI,EAAE4c,UAAU7lB,MAAMQ,gBACnCC,YAAawI,EAAE4c,UAAU7lB,MAAMS,YAC/BmD,cAAeqF,EAAE4c,UAAU7lB,MAAM4D,cACjCC,UAAWoF,EAAE4c,UAAU7lB,MAAM6D,WAE/BnP,QAAS,IAAuB2rB,SAGpC9tB,KAAKq0B,gBAAkBr0B,KAAKqL,QAAQmB,iBAAiBxM,KAAKq0B,gBAAiBsB,GAC3E31B,KAAKs0B,YAAc,IAAI/I,IAEvBvrB,KAAKq0B,gBAAgBvmB,QAAQ,SAAU9H,EAAIwI,GACzC,OAAOpN,EAAMkzB,YAAYtc,IAAIhS,EAAI0vB,EAAWlnB,OAIhD0lB,EAAcvzB,UAAU80B,sBAAwB,SAAUG,GAIxD,IAHA,IAAID,EAAc,GACdE,EAAsB,GAEjBrnB,EAAI,EAAGA,EAAIonB,EAAUrpB,QAAUopB,EAAYppB,OArLnC,IAqL4DiC,IAAK,CAChF,IAAImK,EAAKid,EAAUpnB,GAAG8kB,UAAUzjB,MAC5BgkB,EAAMlb,EAAGkb,IACTC,EAAQnb,EAAGmb,MACXC,EAAOpb,EAAGob,KACVC,EAAQrb,EAAGqb,MACX8B,EAAO,IAAI,KAAKz0B,KAAKyqB,MAAY,IAAN+H,GAAYxyB,KAAKyqB,MAAc,IAARgI,GAAczyB,KAAKyqB,MAAa,IAAPiI,GAAaC,GACxF+B,EAAStD,GAAKqD,GAAMv0B,SAAS,IAC7BsO,EAAQ,QAAUimB,EAAKlf,EAAI,KAAOkf,EAAKrU,EAAI,KAAOqU,EAAK5sB,EAAI,KAAO4sB,EAAK1a,EAAI,IAC3E3K,EAAM,YAAcslB,EAEnB/1B,KAAKw0B,kBAAkB/jB,IAASolB,EAAoBplB,IACvDzQ,KAAKm0B,mBAAmB6B,uBAAuBvlB,EAAK,CAClDwlB,OAAQ,CACNC,YAAa,IACbjc,OAAQ,mBACRkc,OAAQ,sBACRC,MAAO,QACPtS,OAAQ,QACRuS,gBAAiBxmB,GAEnBlG,KAAM,CACJssB,OAAQ,CACNhc,OAAQ,uBAMhB4b,EAAoBplB,IAAO,EAC3BklB,EAAYvnB,KAAK,CACfX,MAAO,CACLQ,gBAAiB2nB,EAAUpnB,GAAG8kB,UAAU7lB,MAAMQ,gBAC9CC,YAAa0nB,EAAUpnB,GAAG8kB,UAAU7lB,MAAMS,YAC1CmD,cAAeukB,EAAUpnB,GAAG8kB,UAAU7lB,MAAM4D,cAC5CC,UAAWskB,EAAUpnB,GAAG8kB,UAAU7lB,MAAM6D,WAE1CnP,QAASnC,KAAKm0B,mBAAmBmC,yBAAyB7lB,GAAK,KAInE,IAAK,IAAI8lB,KAAWv2B,KAAKw0B,kBAClBqB,EAAoBU,IACvBv2B,KAAKm0B,mBAAmBqC,qBAAqBD,GAIjDv2B,KAAKu0B,mBAAqBv0B,KAAKqL,QAAQmB,iBAAiBxM,KAAKu0B,mBAAoBoB,IAGnFzB,EAAcvzB,UAAUg0B,qBAAuB,WAI7C,IAAK,IAAI4B,KAHTv2B,KAAKq0B,gBAAkBr0B,KAAKqL,QAAQmB,iBAAiBxM,KAAKq0B,gBAAiB,IAC3Er0B,KAAKu0B,mBAAqBv0B,KAAKqL,QAAQmB,iBAAiBxM,KAAKu0B,mBAAoB,IAE7Dv0B,KAAKw0B,kBACvBx0B,KAAKm0B,mBAAmBqC,qBAAqBD,IAIjDrC,EAAcvzB,UAAU81B,aAAe,SAAUvrB,GAC/C,IAAI9J,EAAQpB,KAER6M,EAAQ7M,KAAKqL,QAAQyB,WAEzB,IAAKD,EACH,OAAO,KAGT,IAAI8oB,EAAc9oB,EAAM6pB,sBAAsB,KAAMviB,cAAcjJ,EAAUA,IAAW4Q,OAAO,SAAU7S,GACtG,OAAO7H,EAAMkzB,YAAYnU,IAAIlX,EAAEjD,MAGjC,OAA2B,IAAvB2vB,EAAYppB,OACP,KAGFvM,KAAKs0B,YAAY1zB,IAAI+0B,EAAY,GAAG3vB,KAG7CkuB,EAAcxnB,GAAK,+BACnBwnB,EAAckB,eAAiB,IAE/BlB,EAAgB,GAAW,CAAC,GAAQ,EAAG,MAAqB,GAAQ,EAAG,OAAyBA,GAnQlG,GAwQA,YAA2B,I,kCClSvB,GAEJ,WACE,SAASyC,EAAoBzpB,GAC3BlN,KAAK8Q,WAAa5D,EAClBlN,KAAK42B,cAAgB,KA+KvB,OA5KAD,EAAoBE,2BAA6B,SAAUC,EAAUC,EAAQC,GAC3E,GAAIA,EAAS,EACX,OAAO,EAGT,IAAIC,EAAeF,EAAOxqB,OAG1B,GAAIyqB,EAASC,EAFQH,EAASvqB,OAG5B,OAAO,EAGT,IAAK,IAAIiC,EAAI,EAAGA,EAAIyoB,EAAczoB,IAAK,CACrC,IAAI0oB,EAAQJ,EAASrjB,WAAWujB,EAASxoB,GACrC2oB,EAAQJ,EAAOtjB,WAAWjF,GAE9B,GAAI0oB,IAAUC,MAIVD,GAAS,IAEVA,GAAS,IAETA,EAAQ,KAAOC,MAKdA,GAAS,IAEVA,GAAS,IAETA,EAAQ,KAAOD,IAKlB,OAAO,EAGT,OAAO,GAGTP,EAAoBh2B,UAAUy2B,iCAAmC,SAAUlqB,EAAWmqB,EAAYC,EAAUzqB,EAAOoE,GACjH,IA8BI4Q,EA9BA5T,EAAkBf,EAAUe,gBAC5BC,EAAchB,EAAUgB,YACxBmD,EAAgBnE,EAAUmE,cAC1BC,EAAYpE,EAAUoE,UACtBimB,EAAgB1qB,EAAMgF,eAAe5D,GACrCupB,EAAc3qB,EAAMgF,eAAeR,GACnComB,EAAkBF,EAAcG,YAAYL,EAAYnpB,EAAc,EAAImpB,EAAW9qB,QACrForB,EAAgBH,EAAYpN,QAAQkN,EAAUhmB,EAAY,EAAIgmB,EAAS/qB,QAE3E,IAAyB,IAArBkrB,IAA6C,IAAnBE,EAC5B,GAAI1pB,IAAoBoD,EAAe,CACbkmB,EAAc/1B,UAAUi2B,EAAkBJ,EAAW9qB,OAAQorB,GAE/DvN,QAAQkN,IAAa,IAEzCG,GAAmB,EACnBE,GAAiB,OAEd,CACL,IAAIC,EAA2BL,EAAc/1B,UAAUi2B,EAAkBJ,EAAW9qB,QAChFsrB,EAAwBL,EAAYh2B,UAAU,EAAGm2B,IAEjDC,EAAyBxN,QAAQkN,IAAa,GAAKO,EAAsBzN,QAAQkN,IAAa,KAEhGG,GAAmB,EACnBE,GAAiB,IAOE,IAArBF,IAA6C,IAAnBE,GAExBF,EAAkBJ,EAAW9qB,OAASgrB,EAAchrB,QACgB,KAAlEgrB,EAAc9jB,WAAWgkB,EAAkBJ,EAAW9qB,UAItD8qB,GAA0B,KAI5BM,EAAgB,GACgC,KAA9CH,EAAY/jB,WAAWkkB,EAAgB,KAIvCL,EAAW,IAAMA,EACjBK,GAAiB,GAIvB9V,EAAM8U,EAAoBmB,oCAAoC,IAAI,KAAM7pB,EAAiBwpB,EAAkBJ,EAAW9qB,OAAS,EAAG8E,EAAesmB,EAAgB,GAAIN,EAAYC,KAEjLzV,EAAM8U,EAAoBoB,iCAAiC7qB,EAAWmqB,EAAYC,GAClFt3B,KAAK42B,cAA+B,IAAf/U,EAAItV,OAAe+qB,EAAW,MAGrD,IAAK,IAAI1kB,EAAK,EAAGolB,EAAQnW,EAAKjP,EAAKolB,EAAMzrB,OAAQqG,IAAM,CACrD,IAAIuP,EAAK6V,EAAMplB,GACf3B,EAAQgnB,wBAAwB9V,EAAG1U,MAAO0U,EAAGvJ,QAIjD+d,EAAoBmB,oCAAsC,SAAUlhB,EAAGygB,EAAYC,GACjF,IAAIY,EAAM,GAYV,OAVK,KAAMjpB,QAAQ2H,GAOjBshB,EAAI9pB,KAAK,KAAcujB,OAAO,IAAI,KAAM/a,EAAE3I,gBAAiB2I,EAAE1I,YAAcmpB,EAAW9qB,OAAQqK,EAAEvF,cAAeuF,EAAEtF,UAAYgmB,EAAS/qB,WALtI2rB,EAAI9pB,KAAK,KAAcujB,OAAO,IAAI,KAAM/a,EAAE3I,gBAAiB2I,EAAE1I,YAAcmpB,EAAW9qB,OAAQqK,EAAE3I,gBAAiB2I,EAAE1I,eAEnHgqB,EAAI9pB,KAAK,KAAcujB,OAAO,IAAI,KAAM/a,EAAEvF,cAAeuF,EAAEtF,UAAWsF,EAAEvF,cAAeuF,EAAEtF,UAAYgmB,EAAS/qB,WAMzG2rB,GAGTvB,EAAoBoB,iCAAmC,SAAUnhB,EAAGygB,EAAYC,GAC9E,IAAIY,EAAM,GAYV,OAVK,KAAMjpB,QAAQ2H,GAOjBshB,EAAI9pB,KAAK,KAAc+pB,QAAQ,IAAI,KAAMvhB,EAAE3I,gBAAiB2I,EAAE1I,YAAa0I,EAAEvF,cAAeuF,EAAEtF,WAAY+lB,EAAa,KAAOC,KAL9HY,EAAI9pB,KAAK,KAAcgqB,OAAO,IAAI,IAASxhB,EAAE3I,gBAAiB2I,EAAE1I,aAAcmpB,EAAa,MAE3Fa,EAAI9pB,KAAK,KAAcgqB,OAAO,IAAI,IAASxhB,EAAEvF,cAAeuF,EAAEtF,WAAY,IAAMgmB,KAM3EY,GAGTvB,EAAoBh2B,UAAUqQ,kBAAoB,SAAUnE,EAAOoE,GACjE,IAAIhD,EAAkBjO,KAAK8Q,WAAW7C,gBAClCC,EAAclO,KAAK8Q,WAAW5C,YAClCrB,EAAMwrB,gBAAgBpqB,GACtB,IAAInK,EAAa+I,EAAMyrB,wBAAwBrqB,EAAiBC,GAC5DiX,EAAS,KAA8BoT,YAAYz0B,GAElDqhB,GAAWA,EAAOqT,wBAA2BrT,EAAOsT,sBAKzDz4B,KAAKo3B,iCAAiCp3B,KAAK8Q,WAAYqU,EAAOqT,uBAAwBrT,EAAOsT,qBAAsB5rB,EAAOoE,IAG5H0lB,EAAoBh2B,UAAUwR,mBAAqB,SAAUtF,EAAOuF,GAClE,IAAIsmB,EAAwBtmB,EAAOumB,2BAEnC,GAAqC,IAAjCD,EAAsBnsB,OAAc,CACtC,IAAIqsB,EAA0BF,EAAsB,GAChDG,EAAwBH,EAAsB,GAClD,OAAO,IAAI,IAAUE,EAAwBnrB,MAAM4D,cAAeunB,EAAwBnrB,MAAM6D,UAAWunB,EAAsBprB,MAAMQ,gBAAiB4qB,EAAsBprB,MAAMS,aAEpL,IAAI4qB,EAAWJ,EAAsB,GAAGjrB,MACpCsrB,EAAc/4B,KAAK42B,eAAiB52B,KAAK42B,cAAcrqB,OAAS,EAAI,EAExE,OAAO,IAAI,IAAUusB,EAASznB,cAAeynB,EAASxnB,UAAYynB,EAAaD,EAASznB,cAAeynB,EAASxnB,UAAYynB,IAIzHpC,EAlLT,GCAI,GAEJ,WACE,SAASqC,EAAmB9rB,EAAW3G,EAAS4T,GAC9Cna,KAAK8Q,WAAa5D,EAClBlN,KAAKi5B,SAAW1yB,EAChBvG,KAAKk5B,MAAQ/e,EACbna,KAAKm5B,aAAe,EA8YtB,OAtYAH,EAAmBI,+BAAiC,SAAUvsB,EAAOoB,EAAiBoD,GACpFxE,EAAMwrB,gBAAgBpqB,GACtB,IAAInK,EAAa+I,EAAMyrB,wBAAwBrqB,EAAiB,GAC5DkX,EAAS,KAA8BoT,YAAYz0B,GACnDu1B,EAAalU,EAASA,EAAOmU,iBAAmB,KAEpD,IAAKD,EAEH,OAAO,KAKT,IAFA,IAAIE,EAAQ,GAEH/qB,EAAI,EAAGgrB,EAAYnoB,EAAgBpD,EAAkB,EAAGO,EAAIgrB,EAAWhrB,IAC9E+qB,EAAM/qB,GAAK,CACTirB,QAAQ,EACRJ,WAAYA,EACZK,iBAAkB,EAClBC,iBAAkBN,EAAW9sB,QAIjC,OAAOgtB,GAQTP,EAAmBY,cAAgB,SAAUzf,EAAMtN,EAAO0sB,EAAOtrB,GAC/D,IACI4rB,EADAC,GAAsB,EAMtBD,EAHS,IAAT1f,GAIkB,IAATA,EAQb,IAAK,IAAI3L,EAAI,EAAGgrB,EAAYD,EAAMhtB,OAAQiC,EAAIgrB,EAAWhrB,IAAK,CAC5D,IAAIurB,EAAWR,EAAM/qB,GACjBd,EAAaO,EAAkBO,EAC/BoD,EAAc/E,EAAMgF,eAAenE,GACnCssB,EAAyBC,GAAA,EAAgCroB,GAE7D,IAAgC,IAA5BooB,GAoCJ,GAlBAF,GAAsB,EACtBC,EAASN,QAAS,EAClBM,EAASL,iBAAmBM,EAExBH,IAAyB,GAAoBhD,2BAA2BjlB,EAAamoB,EAASV,WAAYW,KAC/F,IAAT7f,EAIA0f,GAAuB,EACL,IAAT1f,IAIX4f,EAASN,QAAS,IAIlBI,EAAsB,CACxB,IAAIK,EAAsBF,EAAyBD,EAASJ,iBAExDO,EAAsBtoB,EAAYrF,QAA0D,KAAhDqF,EAAY6B,WAAWymB,KAGnEH,EAASJ,kBAAoB,SArC7BI,EAASN,QAAS,EAStBM,EAASL,iBAAmB9nB,EAAYrF,OAiC5C,GAAa,IAAT4N,GAED2f,EAAqB,CAEtBD,GAAuB,EAEvB,IAASrrB,EAAI,EAAGgrB,EAAYD,EAAMhtB,OAAQiC,EAAIgrB,EAAWhrB,IACvD+qB,EAAM/qB,GAAGirB,QAAS,EAItB,MAAO,CACLU,WAAW,EACXN,qBAAsBA,EACtBN,MAAOA,IAQXP,EAAmBoB,qBAAuB,SAAUjgB,EAAMtN,EAAOoB,EAAiBoD,GAChF,IAAIkoB,EAAQP,EAAmBI,+BAA+BvsB,EAAOoB,EAAiBoD,GAEtF,OAAc,OAAVkoB,EACK,CACLY,WAAW,GAIRnB,EAAmBY,cAAczf,EAAMtN,EAAO0sB,EAAOtrB,IAO9D+qB,EAAmBr4B,UAAU05B,qBAAuB,SAAUxtB,EAAOoE,EAASoa,EAAMna,GAClF,IAAI2Q,EAEAwJ,EAAKwO,qBACPhY,EAAMmX,EAAmBsB,oCAAoCjP,EAAKkO,MAAOroB,EAAEjD,kBAE3E+qB,EAAmBuB,yBAAyB1tB,EAAOwe,EAAKkO,MAAOroB,EAAEjD,gBAAiBjO,KAAKi5B,UAEvFpX,EAAMmX,EAAmBwB,iCAAiCnP,EAAKkO,MAAOroB,EAAEjD,kBAK1E,IAFA,IAAIwsB,EAAiB,IAAI,IAASvpB,EAAEiF,mBAAoBjF,EAAEwpB,gBAEjDlsB,EAAI,EAAGC,EAAMoT,EAAItV,OAAQiC,EAAIC,EAAKD,IAAK,CAG9C,GAFAyC,EAAQc,iBAAiB8P,EAAIrT,GAAGf,MAAOoU,EAAIrT,GAAGoK,MAE1CiJ,EAAIrT,GAAGf,MAAMwB,WAAa4S,EAAIrT,GAAGf,MAAMN,mBAAmBsC,OAAOgrB,GACjD5tB,EAAMgF,eAAe4oB,EAAe/sB,YAEtCnB,OAAS,IAAMkuB,EAAe9sB,SAC5C3N,KAAKm5B,cAAgBtX,EAAIrT,GAAGoK,MAAQ,IAAIrM,QAK9CvM,KAAKmR,aAAeF,EAAQG,eAAeF,IAG7C8nB,EAAmBr4B,UAAUg6B,2BAA6B,SAAU9tB,EAAOqE,EAAGmmB,EAAYC,GACxF,IAAIrpB,EAAkBiD,EAAEjD,gBACpBoD,EAAgBH,EAAEG,cAClBupB,EAAgCtD,EAAS/qB,OAASlL,KAAKw5B,IAAIhuB,EAAMqJ,gCAAgChF,EAAEjD,iBAAkBiD,EAAEhD,aACvHupB,EAAkB5qB,EAAMgF,eAAe5D,GAAiBypB,YAAYL,EAAYuD,EAAgC,GAChHjD,EAAgB9qB,EAAMgF,eAAeR,GAAe+Y,QAAQkN,EAAUpmB,EAAEI,UAAY,EAAI+lB,EAAW9qB,QAoCvG,OAlCyB,IAArBkrB,IAA6C,IAAnBE,IAC5BA,EAAgB9qB,EAAMgF,eAAe5D,GAAiBmc,QAAQkN,EAAUG,EAAkBJ,EAAW9qB,QACrG8E,EAAgBpD,IAGO,IAArBwpB,IAA6C,IAAnBE,IAC5BF,EAAkB5qB,EAAMgF,eAAeR,GAAeqmB,YAAYL,EAAYM,GAC9E1pB,EAAkBoD,IAGhBH,EAAEjC,YAAmC,IAArBwoB,IAA6C,IAAnBE,IAGnB,KAFzBF,EAAkB5qB,EAAMgF,eAAe5D,GAAiBmc,QAAQiN,MAG9DM,EAAgB9qB,EAAMgF,eAAe5D,GAAiBmc,QAAQkN,EAAUG,EAAkBJ,EAAW9qB,UAMhF,IAArBkrB,GAAoH,KAA1F5qB,EAAMgF,eAAe5D,GAAiBwF,WAAWgkB,EAAkBJ,EAAW9qB,UAGxG8qB,GAAc,MAIK,IAAnBM,GAA8F,KAAtE9qB,EAAMgF,eAAeR,GAAeoC,WAAWkkB,EAAgB,KAGvFL,EAAW,IAAMA,EACjBK,GAAiB,IAGI,IAArBF,IAA6C,IAAnBE,EACrB,GAAoBG,oCAAoC,IAAI,KAAM7pB,EAAiBwpB,EAAkBJ,EAAW9qB,OAAS,EAAG8E,EAAesmB,EAAgB,GAAIN,EAAYC,GAG7K,MAOT0B,EAAmBr4B,UAAUm6B,qBAAuB,SAAUjuB,EAAOoE,EAASC,GAC5ErE,EAAMwrB,gBAAgBnnB,EAAEjD,iBACxB,IAAInK,EAAa+I,EAAMyrB,wBAAwBpnB,EAAEjD,gBAAiB,GAC9DkX,EAAS,KAA8BoT,YAAYz0B,GAEvD,GAAKqhB,GAAWA,EAAOqT,wBAA2BrT,EAAOsT,qBAAzD,CAKA,IAAIpB,EAAalS,EAAOqT,uBACpBlB,EAAWnS,EAAOsT,qBAElB5W,EAAM7hB,KAAK26B,2BAA2B9tB,EAAOqE,EAAGmmB,EAAYC,GAEhE,IAAKzV,EAAK,CACR,GAAI3Q,EAAEjC,UAAW,CACf,IAAI2C,EAAc/E,EAAMgF,eAAeX,EAAEjD,iBACrC8sB,EAA0Bd,GAAA,EAAgCroB,IAE7B,IAA7BmpB,IAEFA,EAA0BnpB,EAAYrF,QAGxCsV,EAAM,GAAoBkW,iCAAiC,IAAI,KAAM7mB,EAAEjD,gBAAiB8sB,EAA0B,EAAG7pB,EAAEjD,gBAAiB2D,EAAYrF,OAAS,GAAI8qB,EAAYC,QAE7KzV,EAAM,GAAoBkW,iCAAiC,IAAI,KAAM7mB,EAAEjD,gBAAiBpB,EAAMqJ,gCAAgChF,EAAEjD,iBAAkBiD,EAAEG,cAAexE,EAAM0E,iBAAiBL,EAAEG,gBAAiBgmB,EAAYC,GAGxM,IAAfzV,EAAItV,SAENvM,KAAKm5B,aAAe9B,EAAW9qB,OAAS,GAI5CvM,KAAKmR,aAAeF,EAAQG,eAAeF,GAE3C,IAAK,IAAI0B,EAAK,EAAGolB,EAAQnW,EAAKjP,EAAKolB,EAAMzrB,OAAQqG,IAAM,CACrD,IAAIuP,EAAK6V,EAAMplB,GACf3B,EAAQc,iBAAiBoQ,EAAG1U,MAAO0U,EAAGvJ,SAI1CogB,EAAmBr4B,UAAUqQ,kBAAoB,SAAUnE,EAAOoE,GAChE,IAAIC,EAAIlR,KAAK8Q,WACb9Q,KAAKg7B,sBAAuB,EAExB9pB,EAAEjD,gBAAkBiD,EAAEG,eAAiC,IAAhBH,EAAEI,YAC3CtR,KAAKg7B,sBAAuB,EAC5B9pB,EAAIA,EAAEsB,eAAetB,EAAEG,cAAgB,EAAGxE,EAAM0E,iBAAiBL,EAAEG,cAAgB,KAGrF,IAAIga,EAAO2N,EAAmBoB,qBAAqBp6B,KAAKk5B,MAAOrsB,EAAOqE,EAAEjD,gBAAiBiD,EAAEG,eAE3F,OAAIga,EAAK8O,UACAn6B,KAAKq6B,qBAAqBxtB,EAAOoE,EAASoa,EAAMna,GAGlDlR,KAAK86B,qBAAqBjuB,EAAOoE,EAASC,IAGnD8nB,EAAmBr4B,UAAUwR,mBAAqB,SAAUtF,EAAOuF,GACjE,IAAIC,EAASD,EAAOE,oBAAoBtS,KAAKmR,cAM7C,OAJInR,KAAKg7B,uBACP3oB,EAASA,EAAOG,eAAeH,EAAOhB,cAAgB,EAAG,IAGpD,IAAI,IAAUgB,EAAOV,yBAA0BU,EAAO4oB,qBAAuBj7B,KAAKm5B,aAAc9mB,EAAO8D,mBAAoB9D,EAAOqoB,eAAiB16B,KAAKm5B,eAOjKH,EAAmBsB,oCAAsC,SAAUf,EAAOtrB,GAGxE,IAFA,IAAIiqB,EAAM,GAED1pB,EAAI,EAAGC,EAAM8qB,EAAMhtB,OAAQiC,EAAIC,EAAKD,IAAK,CAChD,IAAIurB,EAAWR,EAAM/qB,GAEjBurB,EAASN,QAIbvB,EAAI9pB,KAAK,KAAcujB,OAAO,IAAI,KAAM1jB,EAAkBO,EAAGurB,EAASL,iBAAmB,EAAGzrB,EAAkBO,EAAGurB,EAASL,iBAAmBK,EAASJ,iBAAmB,KAG3K,OAAOzB,GAOTc,EAAmBwB,iCAAmC,SAAUjB,EAAOtrB,GAGrE,IAFA,IAAIiqB,EAAM,GAED1pB,EAAI,EAAGC,EAAM8qB,EAAMhtB,OAAQiC,EAAIC,EAAKD,IAAK,CAChD,IAAIurB,EAAWR,EAAM/qB,GAEjBurB,EAASN,QAIbvB,EAAI9pB,KAAK,KAAcgqB,OAAO,IAAI,IAASnqB,EAAkBO,EAAGurB,EAASL,iBAAmB,GAAIK,EAASV,WAAa,MAGxH,OAAOnB,GAITc,EAAmBkC,kBAAoB,SAAUC,EAAsB50B,EAAS60B,EAAOC,GACrF,OAAID,EACKD,GAAwB50B,EAAU40B,EAAuB50B,GAG3D40B,EAAuBE,GAOhCrC,EAAmBuB,yBAA2B,SAAU1tB,EAAO0sB,EAAOtrB,EAAiB1H,GAKrF,IAJA,IACI+0B,EACAC,EAFAC,EAAmBC,OAAOC,UAIrBltB,EAAI,EAAGC,EAAM8qB,EAAMhtB,OAAQiC,EAAIC,EAAKD,IAC3C,IAAI+qB,EAAM/qB,GAAGirB,OAAb,CAOA,IAHA,IAAI7nB,EAAc/E,EAAMgF,eAAe5D,EAAkBO,GACrD2sB,EAAuB,EAElBQ,EAAM,EAAGC,EAASrC,EAAM/qB,GAAGkrB,iBAAkByB,EAAuBK,GAAoBG,EAAMC,EAAQD,IAC7GR,EAAuBnC,EAAmBkC,kBAAkBC,EAAsB50B,EAAyC,IAAhCqL,EAAY6B,WAAWkoB,GAEhH,GAGAR,EAAuBK,IACzBA,EAAmBL,GAIvBK,EAAmBn6B,KAAKkjB,MAAMiX,EAAmBj1B,GAAWA,EAE5D,IAASiI,EAAI,EAAGC,EAAM8qB,EAAMhtB,OAAQiC,EAAIC,EAAKD,IAC3C,IAAI+qB,EAAM/qB,GAAGirB,OAAb,CAII7nB,EAAc/E,EAAMgF,eAAe5D,EAAkBO,GACrD2sB,EAAuB,EAE3B,IAAKG,EAAI,EAAGC,EAAOhC,EAAM/qB,GAAGkrB,iBAAkByB,EAAuBK,GAAoBF,EAAIC,EAAMD,IACjGH,EAAuBnC,EAAmBkC,kBAAkBC,EAAsB50B,EAAuC,IAA9BqL,EAAY6B,WAAW6nB,GAEhH,GAIF/B,EAAM/qB,GAAGkrB,iBADPyB,EAAuBK,EACGF,EAAI,EAEJA,IAK3BtC,EAnZT,GCVI,GAAsC,WACxC,IAAIhwB,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GAiCtC,GAEJ,SAAUO,GAGR,SAAS8xB,EAAkB1hB,EAAMzH,GAC/B,IAAItR,EAAQ2I,EAAOE,KAAKjK,KAAM0S,IAAS1S,KAGvC,OADAoB,EAAM83B,MAAQ/e,EACP/Y,EAuBT,OA7BA,GAAUy6B,EAAmB9xB,GAS7B8xB,EAAkBl7B,UAAU+J,IAAM,SAAUC,EAAUC,GACpD,GAAKA,EAAOgC,WAAZ,CASA,IALA,IAAIC,EAAQjC,EAAOkC,WACf6F,EAAW,GACX7D,EAAalE,EAAOoC,gBACpB0F,EAAO7F,EAAMuY,aAERxS,EAAK,EAAGC,EAAe/D,EAAY8D,EAAKC,EAAatG,OAAQqG,IAAM,CAC1E,IAAI1F,EAAY2F,EAAaD,GAC7BD,EAASvE,KAAK,IAAI,GAAmBlB,EAAWwF,EAAKnM,QAASvG,KAAKk5B,QAGrEtuB,EAAOkI,eACPlI,EAAOmI,gBAAgB/S,KAAKgG,GAAI2M,GAChC/H,EAAOkI,iBAGF+oB,EA9BT,CA+BE,KAEE,GAEJ,SAAU9xB,GAGR,SAAS+xB,IACP,OAAO/xB,EAAOE,KAAKjK,KAAM,EAEvB,CACAgG,GAAI,4BACJkE,MAAOJ,EAAA,EAAa,eAAgB,uBACpCK,MAAO,sBACPC,aAAc,IAAkB6I,SAChC5I,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,KAKTC,OAAQ,KAIVoL,YAAa,CACXC,OAAQ,GAGRxF,MAAO,WACPE,MAAO1G,EAAA,EAAa,CAClB2G,IAAK,sBACLC,QAAS,CAAC,0BACT,yBACHC,MAAO,MAEL3Q,KAGR,OAnCA,GAAU87B,EAAyB/xB,GAmC5B+xB,EApCT,CAqCE,IAEE,GAEJ,SAAU/xB,GAGR,SAASgyB,IACP,OAAOhyB,EAAOE,KAAKjK,KAAM,EAEvB,CACAgG,GAAI,+BACJkE,MAAOJ,EAAA,EAAa,mBAAoB,oBACxCK,MAAO,mBACPC,aAAc,IAAkB6I,SAChC5I,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,aAAS,KAIhB,MAKFC,OAAQ,QAINzK,KAGR,OA5BA,GAAU+7B,EAAsBhyB,GA4BzBgyB,EA7BT,CA8BE,IAEE,GAEJ,SAAUhyB,GAGR,SAASiyB,IACP,OAAOjyB,EAAOE,KAAKjK,KAAM,EAEvB,CACAgG,GAAI,kCACJkE,MAAOJ,EAAA,EAAa,sBAAuB,uBAC3CK,MAAO,sBACPC,aAAc,IAAkB6I,SAChC5I,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,aAAS,KAIhB,MAKFC,OAAQ,QAINzK,KAGR,OA5BA,GAAUg8B,EAAyBjyB,GA4B5BiyB,EA7BT,CA8BE,IAEE,GAEJ,SAAUjyB,GAGR,SAASkyB,IACP,OAAOlyB,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,6BACJkE,MAAOJ,EAAA,EAAa,gBAAiB,wBACrCK,MAAO,uBACPC,aAAc,IAAkB6I,SAChC5I,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,KAOT0xB,MAAO,CACL1xB,QAAS,MAQXC,OAAQ,KAIVoL,YAAa,CACXC,OAAQ,GAGRxF,MAAO,WACPE,MAAO1G,EAAA,EAAa,CAClB2G,IAAK,uBACLC,QAAS,CAAC,0BACT,0BACHC,MAAO,MAEL3Q,KAqBR,OA9DA,GAAUi8B,EAAoBlyB,GA4C9BkyB,EAAmBt7B,UAAU+J,IAAM,SAAUC,EAAUC,GACrD,GAAKA,EAAOgC,WAAZ,CAOA,IAHA,IAAI+F,EAAW,GAGNC,EAAK,EAAGupB,EAFAvxB,EAAOoC,gBAEoB4F,EAAKupB,EAAa5vB,OAAQqG,IAAM,CAC1E,IAAI1F,EAAYivB,EAAavpB,GAC7BD,EAASvE,KAAK,IAAI,GAAoBlB,IAGxCtC,EAAOkI,eACPlI,EAAOmI,gBAAgB/S,KAAKgG,GAAI2M,GAChC/H,EAAOkI,iBAGFmpB,EA/DT,CAgEE,KAEF,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,I,cCxPjB,GAAsC,WACxC,IAAIjzB,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA0BtC,GAAwC,SAAUgN,EAAY1T,EAAQ2N,EAAKgG,GAC7E,IAEIxN,EAFAyN,EAAIC,UAAUpK,OACdqK,EAAIF,EAAI,EAAI5T,EAAkB,OAAT2T,EAAgBA,EAAOrW,OAAOyW,yBAAyB/T,EAAQ2N,GAAOgG,EAE/F,GAAuB,kBAAZK,SAAoD,oBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASP,EAAY1T,EAAQ2N,EAAKgG,QAAW,IAAK,IAAIjI,EAAIgI,EAAWjK,OAAS,EAAGiC,GAAK,EAAGA,KAC1KvF,EAAIuN,EAAWhI,MAAIoI,GAAKF,EAAI,EAAIzN,EAAE2N,GAAKF,EAAI,EAAIzN,EAAEnG,EAAQ2N,EAAKmG,GAAK3N,EAAEnG,EAAQ2N,KAASmG,GAE5F,OAAOF,EAAI,GAAKE,GAAKxW,OAAOM,eAAeoC,EAAQ2N,EAAKmG,GAAIA,GAG1D,GAAkC,SAAUK,EAAYC,GAC1D,OAAO,SAAUpU,EAAQ2N,GACvByG,EAAUpU,EAAQ2N,EAAKwG,KAevB,GAEJ,WACE,SAASmlB,EAAsBxxB,EAAQ2X,EAAqB8Z,EAAqBC,EAAoB9V,EAAoB+V,GACvH,IAAIn7B,EAAQpB,KAEZA,KAAKuiB,oBAAsBA,EAC3BviB,KAAKq8B,oBAAsBA,EAC3Br8B,KAAKs8B,mBAAqBA,EAC1Bt8B,KAAKwmB,mBAAqBA,EAC1BxmB,KAAKu8B,aAAeA,EACpBv8B,KAAKw8B,WAAa,GAClBx8B,KAAKy8B,8BAAgC,EACrCz8B,KAAKqL,QAAUT,EAEf5K,KAAKw8B,WAAWpuB,KAAKpO,KAAKqL,QAAQqxB,cAAc,SAAUxwB,GACxD,OAAO9K,EAAMu7B,eAAezwB,MAG9BlM,KAAKw8B,WAAWpuB,KAAKpO,KAAKqL,QAAQuxB,aAAa,SAAU1wB,GACnD9K,EAAMq7B,8BAAgC,GACxCr7B,EAAMi7B,oBAAoBQ,qBAI9B78B,KAAKw8B,WAAWpuB,KAAKpO,KAAKqL,QAAQyxB,UAAU,SAAU5wB,GAClC,KAAdA,EAAE6wB,UAIF7wB,EAAE8wB,iBACF9wB,EAAE+wB,kBAEF77B,EAAM4hB,sBA+Nd,OA1NAoZ,EAAsBx7B,IAAM,SAAUgK,GACpC,OAAOA,EAAO6B,gBAAgB2vB,EAAsB1vB,KAGtD0vB,EAAsBz7B,UAAUg8B,eAAiB,SAAUzwB,GACzD,GAAKlM,KAAKqL,QAAQuB,WAAlB,CAIA,IAAK5M,KAAKqL,QAAQQ,mBAAmBC,YAAYoxB,YAQ/C,OAPAl9B,KAAKqL,QAAQmK,aAGTtJ,EAAEpJ,OAAOoI,WAAalL,KAAKqL,QAAQ2K,eAAe1I,iBAAiBpB,EAAEpJ,OAAOoI,WAC9ElL,KAAKqL,QAAQ8xB,YAAYjxB,EAAEpJ,OAAOoI,WAMtC,GAAsB,KAAlBgB,EAAEpJ,OAAOqX,OAMbjO,EAAErL,MAAMm8B,iBAEc,IAAlB9wB,EAAEpJ,OAAOqX,MAEQ,IAAlBjO,EAAEpJ,OAAOqX,MAES,IAAlBjO,EAAEpJ,OAAOqX,MAJZ,CAWAna,KAAKqL,QAAQmK,QAGTtJ,EAAEpJ,OAAOoI,WAAalL,KAAKqL,QAAQ2K,eAAe1I,iBAAiBpB,EAAEpJ,OAAOoI,WAC9ElL,KAAKqL,QAAQ8xB,YAAYjxB,EAAEpJ,OAAOoI,UAIpC,IAAIqO,EAAS,KAES,IAAlBrN,EAAEpJ,OAAOqX,OAGTZ,EAAS,CACP6J,EAAGlX,EAAErL,MAAM2jB,KAAO,EAClB4R,MAAO,EACP7U,EAAGrV,EAAErL,MAAMu8B,KAAO,EAClBtZ,OAAQ,IAKd9jB,KAAKgjB,gBAAgBzJ,MAGvB6iB,EAAsBz7B,UAAUqiB,gBAAkB,SAAUzJ,GAC1D,GAAKvZ,KAAKqL,QAAQQ,mBAAmBC,YAAYoxB,aAI5Cl9B,KAAKqL,QAAQuB,WAIlB,GAAK5M,KAAKuiB,oBAAV,CAOA,IAAI8a,EAAcr9B,KAAKs9B,gBAAgBt9B,KAAKqL,QAAQyB,YAGhDuwB,EAAY9wB,OAAS,GACvBvM,KAAKu9B,mBAAmBF,EAAa9jB,QAVrCvZ,KAAKqL,QAAQmK,SAcjB4mB,EAAsBz7B,UAAU28B,gBAAkB,SAAUzwB,GAC1D,IAAIwF,EAAS,GAETmrB,EAAcx9B,KAAKu8B,aAAakB,WAAW,EAE7Cz9B,KAAKs8B,oBAEHvK,EAASyL,EAAYna,WAAW,CAClCqF,IAAK7b,EAAMiS,MAEb0e,EAAY/7B,UAEZ,IAAK,IAAImR,EAAK,EAAG8qB,EAAW3L,EAAQnf,EAAK8qB,EAASnxB,OAAQqG,IAAM,CAC9D,IACIsI,EADQwiB,EAAS9qB,GACD,GACpBP,EAAOjE,KAAKkS,MAAMjO,EAAQ6I,GAC1B7I,EAAOjE,KAAK,IAAI,MAKlB,OAFAiE,EAAOgQ,MAEAhQ,GAGT+pB,EAAsBz7B,UAAU48B,mBAAqB,SAAUriB,EAAS3B,GACtE,IAAInY,EAAQpB,KAMZ,QAJe,IAAXuZ,IACFA,EAAS,MAGNvZ,KAAKqL,QAAQuB,WAAlB,CAKA,IAAI+wB,EAAkB39B,KAAKqL,QAAQQ,mBAAmBC,YAAY8xB,MAQlE,GANA59B,KAAKqL,QAAQwyB,cAAc,CACzBD,MAAO,CACLE,SAAS,MAIRvkB,EAAQ,CAEXvZ,KAAKqL,QAAQmY,eAAexjB,KAAKqL,QAAQyI,cAAe,GAIxD9T,KAAKqL,QAAQoY,SAEb,IAAIC,EAAe1jB,KAAKqL,QAAQsY,2BAA2B3jB,KAAKqL,QAAQyI,eAGpE8P,EAAeQ,GAAA,EAA2BpkB,KAAKqL,QAAQuO,cACvD4K,EAAOZ,EAAapS,KAAOkS,EAAalS,KACxC4rB,EAAOxZ,EAAaC,IAAMH,EAAaG,IAAMH,EAAaI,OAC9DvK,EAAS,CACP6J,EAAGoB,EACHjD,EAAG6b,GAKPp9B,KAAKy8B,gCAELz8B,KAAKuiB,oBAAoBS,gBAAgB,CACvCC,UAAW,WACT,OAAO1J,GAET8J,WAAY,WACV,OAAOnI,GAET6iB,cAAe,SAAuB9gB,GACpC,IAAI+gB,EAAa58B,EAAM68B,eAAehhB,GAEtC,GAAI+gB,EACF,OAAO,IAAI,KAAW/gB,EAAQA,EAAQ,CACpC/S,OAAO,EACP8zB,WAAYA,EAAWvW,WACvByW,QAAQ,IAIZ,IAAIC,EAAmBlhB,EAEvB,MAA8C,oBAAnCkhB,EAAiBJ,cACnBI,EAAiBJ,gBAGnB,IAAI,KAAW9gB,EAAQA,EAAQ,CACpCmhB,MAAM,EACNl0B,OAAO,EACPg0B,QAAQ,KAGZG,cAAe,SAAuBphB,GACpC,OAAO7b,EAAM68B,eAAehhB,IAE9BqG,OAAQ,SAAgBgb,GACtBl9B,EAAMq7B,gCAENr7B,EAAMiK,QAAQmK,QAEdpU,EAAMiK,QAAQwyB,cAAc,CAC1BD,MAAOD,SAMfvB,EAAsBz7B,UAAUs9B,eAAiB,SAAUhhB,GACzD,OAAOjd,KAAKwmB,mBAAmBe,iBAAiBtK,EAAOjX,KAGzDo2B,EAAsBz7B,UAAUgM,MAAQ,WACtC,OAAOyvB,EAAsB1vB,IAG/B0vB,EAAsBz7B,UAAUc,QAAU,WACpCzB,KAAKy8B,8BAAgC,GACvCz8B,KAAKq8B,oBAAoBQ,kBAG3B78B,KAAKw8B,WAAa,YAAQx8B,KAAKw8B,aAGjCJ,EAAsB1vB,GAAK,6BAC3B0vB,EAAwB,GAAW,CAAC,GAAQ,EAAG,MAAsB,GAAQ,EAAG,MAAsB,GAAQ,EAAG,MAAqB,GAAQ,EAAG,MAAqB,GAAQ,EAAG,MAAgBA,GA7PnM,GAmQI,GAEJ,SAAUryB,GAGR,SAASw0B,IACP,OAAOx0B,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,gCACJkE,MAAOJ,EAAA,EAAa,+BAAgC,4BACpDK,MAAO,2BACPC,aAAc,KACdC,OAAQ,CACNC,OAAQ,IAAkB8I,eAC1B5I,QAAS,KAKTC,OAAQ,QAINzK,KAQR,OA3BA,GAAUu+B,EAAiBx0B,GAsB3Bw0B,EAAgB59B,UAAU+J,IAAM,SAAUC,EAAUC,GAC/B,GAAsBhK,IAAIgK,GAChCoY,mBAGRub,EA5BT,CA6BE,KAEF,YAA2B,IAC3B,YAAqB,IC5VrB,IAAI,GAAsC,WACxC,IAAIv1B,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA+BtCg1B,GAEJ,WACE,SAASA,EAAY1vB,GACnB9O,KAAK8O,WAAaA,EAoBpB,OAjBA0vB,EAAY79B,UAAU8O,OAAS,SAAU+K,GACvC,IAAIikB,EAAUz+B,KAAK8O,WAAWvC,OAG9B,GAAIkyB,IAFWjkB,EAAM1L,WAAWvC,OAG9B,OAAO,EAGT,IAAK,IAAIiC,EAAI,EAAGA,EAAIiwB,EAASjwB,IAC3B,IAAKxO,KAAK8O,WAAWN,GAAGkwB,gBAAgBlkB,EAAM1L,WAAWN,IACvD,OAAO,EAIX,OAAO,GAGFgwB,EAtBT,GAyBIG,GAEJ,SAAU50B,GAGR,SAAS40B,EAAqB/zB,GAC5B,IAAIxJ,EAAQ2I,EAAOE,KAAKjK,OAASA,KA8BjC,OA5BAoB,EAAMiK,QAAUT,EAChBxJ,EAAMw9B,eAAgB,EACtBx9B,EAAMy9B,WAAa,GACnBz9B,EAAM09B,WAAa19B,EAAM29B,aAEzB39B,EAAMsK,UAAUd,EAAOwB,iBAAiB,SAAUF,GAChD9K,EAAMy9B,WAAa,GACnBz9B,EAAM09B,WAAa,QAGrB19B,EAAMsK,UAAUd,EAAOuB,wBAAwB,SAAUD,GACvD9K,EAAMy9B,WAAa,GACnBz9B,EAAM09B,WAAa,QAGrB19B,EAAMsK,UAAUd,EAAOo0B,2BAA2B,SAAU9yB,IACrD9K,EAAMw9B,eAAiBx9B,EAAM09B,aAChC19B,EAAMy9B,WAAWzwB,KAAKhN,EAAM09B,YAExB19B,EAAMy9B,WAAWtyB,OAAS,IAE5BnL,EAAMy9B,WAAWI,SAIrB79B,EAAM09B,WAAa19B,EAAM29B,gBAGpB39B,EA8CT,OA/EA,GAAUu9B,EAAsB50B,GAoChC40B,EAAqB/9B,IAAM,SAAUgK,GACnC,OAAOA,EAAO6B,gBAAgBkyB,EAAqBjyB,KAGrDiyB,EAAqBh+B,UAAUo+B,WAAa,WAC1C,OAAK/+B,KAAKqL,QAAQuB,WAKX,IAAI4xB,GAAYx+B,KAAKqL,QAAQ2B,iBAH3B,MAMX2xB,EAAqBh+B,UAAUgM,MAAQ,WACrC,OAAOgyB,EAAqBjyB,IAG9BiyB,EAAqBh+B,UAAUu+B,WAAa,WAC1C,GAAKl/B,KAAKqL,QAAQuB,WAMlB,IAFA,IAAIuyB,EAAY,IAAIX,GAAYx+B,KAAKqL,QAAQ2B,iBAEtChN,KAAK6+B,WAAWtyB,OAAS,GAAG,CACjC,IAAI6yB,EAAYp/B,KAAK6+B,WAAWxc,MAEhC,IAAK+c,EAAU3vB,OAAO0vB,GAUpB,OATAn/B,KAAK4+B,eAAgB,EAErB5+B,KAAKqL,QAAQuC,cAAcwxB,EAAUtwB,YAErC9O,KAAKqL,QAAQg0B,qCAAqCD,EAAUtwB,WAAW,GAAI,QAI3E9O,KAAK4+B,eAAgB,KAM3BD,EAAqBjyB,GAAK,sCACnBiyB,EAhFT,CAiFE,KAIE,GAEJ,SAAU50B,GAGR,SAASu1B,IACP,OAAOv1B,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,aACJkE,MAAOJ,EAAA,EAAa,cAAe,aACnCK,MAAO,YACPC,aAAc,KACdC,OAAQ,CACNC,OAAQ,IAAkB8I,eAC1B5I,QAAS,KAKTC,OAAQ,QAINzK,KAOR,OA1BA,GAAUs/B,EAAYv1B,GAsBtBu1B,EAAW3+B,UAAU+J,IAAM,SAAUC,EAAUC,EAAQsK,GACrDypB,GAAqB/9B,IAAIgK,GAAQs0B,cAG5BI,EA3BT,CA4BE,KAGF,YAA2BX,IAC3B,YAAqB,I,WChLjB,GAEJ,WACE,SAASY,EAAmBryB,EAAWsyB,EAAgBC,GACrDz/B,KAAKkN,UAAYA,EACjBlN,KAAKw/B,eAAiBA,EACtBx/B,KAAKy/B,KAAOA,EAiDd,OA9CAF,EAAmB5+B,UAAUqQ,kBAAoB,SAAUnE,EAAOoE,GAChE,IAAI2H,EAAO/L,EAAMqH,gBAAgBlU,KAAKkN,WAEjClN,KAAKy/B,MACRxuB,EAAQc,iBAAiB/R,KAAKkN,UAAW,MAG3C+D,EAAQc,iBAAiB,IAAI,KAAM/R,KAAKw/B,eAAe9xB,WAAY1N,KAAKw/B,eAAe7xB,OAAQ3N,KAAKw/B,eAAe9xB,WAAY1N,KAAKw/B,eAAe7xB,QAASiL,IAExJ5Y,KAAKkN,UAAUI,iBAAiBtN,KAAKw/B,iBAAqBx/B,KAAKy/B,OAASz/B,KAAKkN,UAAUiB,iBAAiBsB,OAAOzP,KAAKw/B,iBAAmBx/B,KAAKkN,UAAUC,mBAAmBsC,OAAOzP,KAAKw/B,iBAMrLx/B,KAAKy/B,KACPz/B,KAAK0/B,gBAAkB,IAAI,IAAU1/B,KAAKw/B,eAAe9xB,WAAY1N,KAAKw/B,eAAe7xB,OAAQ3N,KAAKkN,UAAUmE,cAAgBrR,KAAKkN,UAAUe,gBAAkBjO,KAAKw/B,eAAe9xB,WAAY1N,KAAKkN,UAAUe,kBAAoBjO,KAAKkN,UAAUmE,cAAgBrR,KAAKw/B,eAAe7xB,OAAS3N,KAAKkN,UAAUoE,UAAYtR,KAAKkN,UAAUgB,YAAclO,KAAKkN,UAAUoE,WAIrWtR,KAAKw/B,eAAe9xB,WAAa1N,KAAKkN,UAAUmE,cAElDrR,KAAK0/B,gBAAkB,IAAI,IAAU1/B,KAAKw/B,eAAe9xB,WAAa1N,KAAKkN,UAAUmE,cAAgBrR,KAAKkN,UAAUe,gBAAiBjO,KAAKw/B,eAAe7xB,OAAQ3N,KAAKw/B,eAAe9xB,WAAY1N,KAAKkN,UAAUe,kBAAoBjO,KAAKkN,UAAUmE,cAAgBrR,KAAKw/B,eAAe7xB,OAAS3N,KAAKkN,UAAUoE,UAAYtR,KAAKkN,UAAUgB,YAAclO,KAAKkN,UAAUoE,WAIrWtR,KAAKw/B,eAAe9xB,WAAa1N,KAAKkN,UAAUmE,cAElDrR,KAAK0/B,gBAAkB,IAAI,IAAU1/B,KAAKw/B,eAAe9xB,WAAY1N,KAAKw/B,eAAe7xB,OAAQ3N,KAAKw/B,eAAe9xB,WAAa1N,KAAKkN,UAAUmE,cAAgBrR,KAAKkN,UAAUe,gBAAiBjO,KAAKkN,UAAUe,kBAAoBjO,KAAKkN,UAAUmE,cAAgBrR,KAAKw/B,eAAe7xB,OAAS3N,KAAKkN,UAAUoE,UAAYtR,KAAKkN,UAAUgB,YAAclO,KAAKkN,UAAUoE,WAKrWtR,KAAKkN,UAAUoE,WAAatR,KAAKw/B,eAAe7xB,OAElD3N,KAAK0/B,gBAAkB,IAAI,IAAU1/B,KAAKw/B,eAAe9xB,WAAa1N,KAAKkN,UAAUmE,cAAgBrR,KAAKkN,UAAUe,iBAAiBjO,KAAKkN,UAAUe,gBAAoBjO,KAAKkN,UAAUmE,cAAgBrR,KAAKw/B,eAAe7xB,OAAS3N,KAAKkN,UAAUoE,UAAYtR,KAAKkN,UAAUgB,aAAkGlO,KAAKw/B,eAAe9xB,WAAY1N,KAAKkN,UAAUe,kBAAoBjO,KAAKkN,UAAUmE,cAAgBrR,KAAKw/B,eAAe7xB,OAAS3N,KAAKkN,UAAUoE,WAG9ftR,KAAK0/B,gBAAkB,IAAI,IAAU1/B,KAAKw/B,eAAe9xB,WAAa1N,KAAKkN,UAAUmE,cAAgBrR,KAAKkN,UAAUe,gBAAiBjO,KAAKw/B,eAAe7xB,OAAQ3N,KAAKw/B,eAAe9xB,WAAY1N,KAAKw/B,eAAe7xB,OAAS3N,KAAKkN,UAAUoE,UAAYtR,KAAKkN,UAAUgB,aA3BxQlO,KAAK0/B,gBAAkB1/B,KAAKkN,WA+BhCqyB,EAAmB5+B,UAAUwR,mBAAqB,SAAUtF,EAAOuF,GACjE,OAAOpS,KAAK0/B,iBAGPH,EArDT,GCKA,SAASI,GAAmBzzB,GAC1B,OAAI,KACKA,EAAE0zB,OAEF1zB,EAAE2zB,QAIb,IAAI,GAEJ,WACE,SAASC,EAAsBl1B,GAC7B,IAAIxJ,EAAQpB,KAEZA,KAAKqL,QAAUT,EACf5K,KAAK+/B,UAAY,GAEjB//B,KAAK+/B,UAAU3xB,KAAKpO,KAAKqL,QAAQ20B,YAAY,SAAU9zB,GACrD,OAAO9K,EAAM6+B,mBAAmB/zB,MAGlClM,KAAK+/B,UAAU3xB,KAAKpO,KAAKqL,QAAQgmB,UAAU,SAAUnlB,GACnD,OAAO9K,EAAM8+B,iBAAiBh0B,MAGhClM,KAAK+/B,UAAU3xB,KAAKpO,KAAKqL,QAAQ80B,YAAY,SAAUj0B,GACrD,OAAO9K,EAAMg/B,mBAAmBl0B,MAGlClM,KAAK+/B,UAAU3xB,KAAKpO,KAAKqL,QAAQg1B,YAAY,SAAUn0B,GACrD,OAAO9K,EAAMk/B,mBAAmBp0B,MAGlClM,KAAK+/B,UAAU3xB,KAAKpO,KAAKqL,QAAQyxB,UAAU,SAAU5wB,GACnD,OAAO9K,EAAMm/B,gBAAgBr0B,MAG/BlM,KAAK+/B,UAAU3xB,KAAKpO,KAAKqL,QAAQm1B,QAAQ,SAAUt0B,GACjD,OAAO9K,EAAMq/B,cAAcv0B,MAG7BlM,KAAK+/B,UAAU3xB,KAAKpO,KAAKqL,QAAQq1B,sBAAsB,WACrD,OAAOt/B,EAAMu/B,kBAGf3gC,KAAK4gC,kBAAoB,GACzB5gC,KAAK6gC,YAAa,EAClB7gC,KAAK8gC,kBAAmB,EACxB9gC,KAAK+gC,eAAiB,KAiMxB,OA9LAjB,EAAsBn/B,UAAUggC,aAAe,WAC7C3gC,KAAKghC,oBAELhhC,KAAK+gC,eAAiB,KACtB/gC,KAAK6gC,YAAa,EAClB7gC,KAAK8gC,kBAAmB,GAG1BhB,EAAsBn/B,UAAU4/B,gBAAkB,SAAUr0B,GACrDlM,KAAKqL,QAAQQ,mBAAmBo1B,cAIjCtB,GAAmBzzB,KACrBlM,KAAK8gC,kBAAmB,GAGtB9gC,KAAK6gC,YAAclB,GAAmBzzB,IACxClM,KAAKqL,QAAQwyB,cAAc,CACzBqD,WAAY,WAKlBpB,EAAsBn/B,UAAU8/B,cAAgB,SAAUv0B,GACnDlM,KAAKqL,QAAQQ,mBAAmBo1B,cAIjCtB,GAAmBzzB,KACrBlM,KAAK8gC,kBAAmB,GAGtB9gC,KAAK6gC,YAAc30B,EAAE6wB,UAAY+C,EAAsBqB,mBACzDnhC,KAAKqL,QAAQwyB,cAAc,CACzBqD,WAAY,cAKlBpB,EAAsBn/B,UAAUs/B,mBAAqB,SAAUmB,GAC7DphC,KAAK6gC,YAAa,GAGpBf,EAAsBn/B,UAAUu/B,iBAAmB,SAAUkB,GAC3DphC,KAAK6gC,YAAa,EAElB7gC,KAAKqL,QAAQwyB,cAAc,CACzBqD,WAAY,UAIhBpB,EAAsBn/B,UAAUy/B,mBAAqB,SAAUgB,GAC7D,IAAIt+B,EAASs+B,EAAWt+B,OAExB,GAA4B,OAAxB9C,KAAK+gC,eAAyB,CAChC,IACIM,GADarhC,KAAKqL,QAAQ2B,iBAAmB,IACb8O,OAAO,SAAU5O,GACnD,OAAOpK,EAAOoI,UAAYgC,EAAUI,iBAAiBxK,EAAOoI,YAG9D,GAAkC,IAA9Bm2B,EAAmB90B,OAGrB,OAFAvM,KAAK+gC,eAAiBM,EAAmB,GAMzC1B,GAAmByB,EAAWvgC,OAChCb,KAAKqL,QAAQwyB,cAAc,CACzBqD,WAAY,SAGdlhC,KAAKqL,QAAQwyB,cAAc,CACzBqD,WAAY,YAIZp+B,EAAOoI,WACLlL,KAAK+gC,eAAezzB,iBAAiBxK,EAAOoI,UAC9ClL,KAAKghC,oBAELhhC,KAAKshC,OAAOx+B,EAAOoI,YAKzB40B,EAAsBn/B,UAAU2/B,mBAAqB,SAAUc,GAC7D,GAAIA,EAAWt+B,SAAW9C,KAAKuhC,YAAYH,EAAWt+B,SAAW9C,KAAKwhC,WAAWJ,EAAWt+B,UAAYs+B,EAAWt+B,OAAOoI,SAAU,CAClI,IAAIu2B,EAAsB,IAAI,IAASL,EAAWt+B,OAAOoI,SAASwC,WAAY0zB,EAAWt+B,OAAOoI,SAASyC,QAEzG,GAA4B,OAAxB3N,KAAK+gC,eAAyB,CAChC,IAAIh0B,EAAgB,KAEpB,GAAIq0B,EAAWvgC,MAAM6gC,SAAU,CAC7B,IAAIC,EAAmB3hC,KAAKqL,QAAQ2K,eAEpC,GAAI2rB,EAAkB,CACpB,IAAIhwB,EAA2BgwB,EAAiBhwB,yBAC5CspB,EAAuB0G,EAAiB1G,qBAC5CluB,EAAgB,CAAC,IAAI,IAAU4E,EAA0BspB,EAAsBwG,EAAoB/zB,WAAY+zB,EAAoB9zB,eAGrIZ,GAAiB/M,KAAKqL,QAAQ2B,iBAAmB,IAAIC,IAAI,SAAUC,GACjE,OAAIA,EAAUI,iBAAiBm0B,GACtB,IAAI,IAAUA,EAAoB/zB,WAAY+zB,EAAoB9zB,OAAQ8zB,EAAoB/zB,WAAY+zB,EAAoB9zB,QAE9HT,IAMblN,KAAKqL,QAAQuC,cAAcb,GAAiB,GAAI,eACtC/M,KAAK+gC,eAAezzB,iBAAiBm0B,KAAyB9B,GAAmByB,EAAWvgC,QAAUb,KAAK8gC,oBAAsB9gC,KAAK+gC,eAAe5yB,iBAAiBsB,OAAOgyB,IAAwBzhC,KAAK+gC,eAAe5zB,mBAAmBsC,OAAOgyB,OAE7PzhC,KAAKqL,QAAQyH,eAEb9S,KAAKqL,QAAQyc,eAAegY,EAAsBpzB,GAAI,IAAI,GAAmB1M,KAAK+gC,eAAgBU,EAAqB9B,GAAmByB,EAAWvgC,QAAUb,KAAK8gC,mBAEpK9gC,KAAKqL,QAAQyH,gBAIjB9S,KAAKqL,QAAQwyB,cAAc,CACzBqD,WAAY,SAGdlhC,KAAKghC,oBAELhhC,KAAK+gC,eAAiB,KACtB/gC,KAAK6gC,YAAa,GAGpBf,EAAsBn/B,UAAU2gC,OAAS,SAAUp2B,GACjD,IAAIoD,EAAiB,CAAC,CACpBb,MAAO,IAAI,KAAMvC,EAASwC,WAAYxC,EAASyC,OAAQzC,EAASwC,WAAYxC,EAASyC,QACrFxL,QAAS29B,EAAsBpxB,sBAEjC1O,KAAK4gC,kBAAoB5gC,KAAKqL,QAAQmB,iBAAiBxM,KAAK4gC,kBAAmBtyB,GAE/EtO,KAAKqL,QAAQmY,eAAetY,EAAU,IAKxC40B,EAAsBn/B,UAAUqgC,kBAAoB,WAClDhhC,KAAK4gC,kBAAoB5gC,KAAKqL,QAAQmB,iBAAiBxM,KAAK4gC,kBAAmB,KAGjFd,EAAsBn/B,UAAU4gC,YAAc,SAAUz+B,GACtD,OAAuB,IAAhBA,EAAOqX,MAEK,IAAhBrX,EAAOqX,MAKZ2lB,EAAsBn/B,UAAU6gC,WAAa,SAAU1+B,GACrD,OAAuB,IAAhBA,EAAOqX,MAEK,IAAhBrX,EAAOqX,MAES,IAAhBrX,EAAOqX,MAKZ2lB,EAAsBn/B,UAAUgM,MAAQ,WACtC,OAAOmzB,EAAsBpzB,IAG/BozB,EAAsBn/B,UAAUc,QAAU,WACxCzB,KAAKghC,oBAELhhC,KAAK+gC,eAAiB,KACtB/gC,KAAK6gC,YAAa,EAClB7gC,KAAK8gC,kBAAmB,EACxB9gC,KAAK+/B,UAAY,YAAQ//B,KAAK+/B,YAGhCD,EAAsBpzB,GAAK,6BAC3BozB,EAAsBqB,kBAAoB,KAAc,EAEtD,EAGFrB,EAAsBpxB,oBAAsB,IAAuB3I,SAAS,CAC1E4J,UAAW,eAENmwB,EAvOT,GA2OA,YAA2B,I,cCzPvB,GAEJ,WACE,SAAS8B,EAAgBh3B,GACvB5K,KAAKqL,QAAUT,EACf5K,KAAKwL,aAAe,GACpBxL,KAAK6hC,qCAAuC,GAC5C7hC,KAAK8hC,uBAAyB,KAC9B9hC,KAAK+hC,4BAA8B,KACnC/hC,KAAKgiC,yBAA2B,KAChChiC,KAAKiiC,eAAiBjiC,KAAKqL,QAAQyI,cA+TrC,OA5TA8tB,EAAgBjhC,UAAUc,QAAU,WAClCzB,KAAKqL,QAAQmB,iBAAiBxM,KAAKkiC,kBAAmB,IAEtDliC,KAAKwL,aAAe,GACpBxL,KAAK6hC,qCAAuC,GAC5C7hC,KAAK8hC,uBAAyB,KAC9B9hC,KAAK+hC,4BAA8B,KACnC/hC,KAAKgiC,yBAA2B,MAGlCJ,EAAgBjhC,UAAUiX,MAAQ,WAChC5X,KAAKwL,aAAe,GACpBxL,KAAK6hC,qCAAuC,GAC5C7hC,KAAK8hC,uBAAyB,KAC9B9hC,KAAK+hC,4BAA8B,KACnC/hC,KAAKgiC,yBAA2B,MAGlCJ,EAAgBjhC,UAAUwhC,SAAW,WACnC,OAAOniC,KAAKwL,aAAae,QAG3Bq1B,EAAgBjhC,UAAUyhC,aAAe,WACvC,OAAIpiC,KAAK8hC,uBACA9hC,KAAKqL,QAAQyB,WAAWwhB,mBAAmBtuB,KAAK8hC,wBAGlD,MAGTF,EAAgBjhC,UAAUwM,iBAAmB,WAC3C,OAAOnN,KAAKiiC,gBAGdL,EAAgBjhC,UAAU4R,iBAAmB,SAAU8vB,GACrDriC,KAAKiiC,eAAiBI,EACtBriC,KAAKsiC,oBAAoB,OAG3BV,EAAgBjhC,UAAU4hC,oBAAsB,SAAUnV,GACxD,IAAIoV,EAAQxiC,KAAKwL,aAAa4e,QAAQgD,GAEtC,OAAIoV,GAAS,EACJA,EAAQ,EAGV,GAGTZ,EAAgBjhC,UAAU8hC,0BAA4B,SAAUC,GAG9D,IAFA,IAES9vB,EAAK,EAAG+vB,EAFA3iC,KAAKqL,QAAQyB,WAAW4pB,sBAAsBgM,GAEnB9vB,EAAK+vB,EAAap2B,OAAQqG,IAAM,CAC1E,IAAIgwB,EAAYD,EAAa/vB,GACzBiwB,EAAgBD,EAAUzgC,QAE9B,GAAI0gC,IAAkBjB,EAAgBkB,wBAA0BD,IAAkBjB,EAAgBmB,+BAChG,OAAO/iC,KAAKuiC,oBAAoBK,EAAU58B,IAI9C,OAAO,GAGT47B,EAAgBjhC,UAAU2hC,oBAAsB,SAAUU,GACxD,IAAI5hC,EAAQpB,KAERijC,EAAyB,KACzBC,EAAgB,EAEpB,GAAIF,EACF,IAAK,IAAIx0B,EAAI,EAAGC,EAAMzO,KAAKwL,aAAae,OAAQiC,EAAIC,EAAKD,IAAK,CAC5D,IAAIf,EAAQzN,KAAKqL,QAAQyB,WAAWwhB,mBAAmBtuB,KAAKwL,aAAagD,IAEzE,GAAIw0B,EAAUG,YAAY11B,GAAQ,CAChCw1B,EAAyBjjC,KAAKwL,aAAagD,GAC3C00B,EAAgB10B,EAAI,EACpB,OAsCN,OAjCsC,OAAlCxO,KAAKgiC,0BAAgE,OAA3BiB,GAC5CjjC,KAAKqL,QAAQilB,kBAAkB,SAAUhD,GAgBvC,GAfuC,OAAnClsB,EAAM4gC,2BACR1U,EAAe8V,wBAAwBhiC,EAAM4gC,yBAA0BJ,EAAgBkB,wBACvF1hC,EAAM4gC,yBAA2B,MAGJ,OAA3BiB,IACF7hC,EAAM4gC,yBAA2BiB,EACjC3V,EAAe8V,wBAAwBhiC,EAAM4gC,yBAA0BJ,EAAgBmB,iCAG/C,OAAtC3hC,EAAM2gC,8BACRzU,EAAeH,iBAAiB/rB,EAAM2gC,6BACtC3gC,EAAM2gC,4BAA8B,MAGP,OAA3BkB,EAAiC,CACnC,IAAII,EAAMjiC,EAAMiK,QAAQyB,WAAWwhB,mBAAmB2U,GAEtD,GAAII,EAAIp1B,kBAAoBo1B,EAAIhyB,eAAmC,IAAlBgyB,EAAI/xB,UAAiB,CACpE,IAAIgyB,EAAgBD,EAAIhyB,cAAgB,EAEpCkyB,EAAyBniC,EAAMiK,QAAQyB,WAAWyE,iBAAiB+xB,GAEvED,EAAM,IAAI,KAAMA,EAAIp1B,gBAAiBo1B,EAAIn1B,YAAao1B,EAAeC,GAGvEniC,EAAM2gC,4BAA8BzU,EAAeN,cAAcqW,EAAKzB,EAAgB4B,gCAKrFN,GAGTtB,EAAgBjhC,UAAUqX,IAAM,SAAUyrB,EAAaC,GACrD,IAAItiC,EAAQpB,KAEZA,KAAKqL,QAAQilB,kBAAkB,SAAU3lB,GACvC,IAAIg5B,EAAqB/B,EAAgBkB,uBACrCc,EAAyC,GAE7C,GAAIH,EAAYl3B,OAAS,IAAM,CAG7Bo3B,EAAqB/B,EAAgBiC,mCAYrC,IAVA,IAAIrK,EAAYp4B,EAAMiK,QAAQyB,WAAW6G,eAIrCmwB,EAFS1iC,EAAMiK,QAAQ04B,gBAAgBjgB,OAER0V,EAC/BwK,EAAkB3iC,KAAKw5B,IAAI,EAAGx5B,KAAK4iC,KAAK,EAAIH,IAE5CI,EAAsBT,EAAY,GAAGh2B,MAAMQ,gBAC3Ck2B,EAAoBV,EAAY,GAAGh2B,MAAM4D,cAEpC7C,EAAI,EAAGC,EAAMg1B,EAAYl3B,OAAQiC,EAAIC,EAAKD,IAAK,CACtD,IAAIf,EAAQg2B,EAAYj1B,GAAGf,MAEvB02B,EAAoBH,GAAmBv2B,EAAMQ,gBAC3CR,EAAM4D,cAAgB8yB,IACxBA,EAAoB12B,EAAM4D,gBAG5BuyB,EAAuCx1B,KAAK,CAC1CX,MAAO,IAAI,KAAMy2B,EAAqB,EAAGC,EAAmB,GAC5DhiC,QAASy/B,EAAgBwC,uCAE3BF,EAAsBz2B,EAAMQ,gBAC5Bk2B,EAAoB12B,EAAM4D,eAI9BuyB,EAAuCx1B,KAAK,CAC1CX,MAAO,IAAI,KAAMy2B,EAAqB,EAAGC,EAAmB,GAC5DhiC,QAASy/B,EAAgBwC,uCAK7B,IAAIC,EAA4B,IAAIh7B,MAAMo6B,EAAYl3B,QAEtD,IAASiC,EAAI,EAAGC,EAAMg1B,EAAYl3B,OAAQiC,EAAIC,EAAKD,IACjD61B,EAA0B71B,GAAK,CAC7Bf,MAAOg2B,EAAYj1B,GAAGf,MACtBtL,QAASwhC,GAIbviC,EAAMoK,aAAeb,EAAS6B,iBAAiBpL,EAAMoK,aAAc64B,GAEnEjjC,EAAMygC,qCAAuCl3B,EAAS6B,iBAAiBpL,EAAMygC,qCAAsC+B,GAE/GxiC,EAAM2gC,8BACRp3B,EAASwiB,iBAAiB/rB,EAAM2gC,6BAChC3gC,EAAM2gC,4BAA8B,MAIlC3gC,EAAM0gC,yBACRn3B,EAASwiB,iBAAiB/rB,EAAM0gC,wBAChC1gC,EAAM0gC,uBAAyB,MAG7B4B,IACFtiC,EAAM0gC,uBAAyBn3B,EAASqiB,cAAc0W,EAAW9B,EAAgB0C,4BAKvF1C,EAAgBjhC,UAAU4jC,oBAAsB,SAAUr5B,GACxD,GAAiC,IAA7BlL,KAAKwL,aAAae,OACpB,OAAO,KAGT,IAAK,IAAIiC,EAAIxO,KAAKwL,aAAae,OAAS,EAAGiC,GAAK,EAAGA,IAAK,CACtD,IAAI4e,EAAeptB,KAAKwL,aAAagD,GAEjCoI,EAAI5W,KAAKqL,QAAQyB,WAAWwhB,mBAAmBlB,GAEnD,GAAKxW,KAAKA,EAAEvF,cAAgBnG,EAASwC,YAArC,CAIA,GAAIkJ,EAAEvF,cAAgBnG,EAASwC,WAC7B,OAAOkJ,EAGT,KAAIA,EAAEtF,UAAYpG,EAASyC,QAI3B,OAAOiJ,GAGT,OAAO5W,KAAKqL,QAAQyB,WAAWwhB,mBAAmBtuB,KAAKwL,aAAaxL,KAAKwL,aAAae,OAAS,KAGjGq1B,EAAgBjhC,UAAU6jC,mBAAqB,SAAUt5B,GACvD,GAAiC,IAA7BlL,KAAKwL,aAAae,OACpB,OAAO,KAGT,IAAK,IAAIiC,EAAI,EAAGC,EAAMzO,KAAKwL,aAAae,OAAQiC,EAAIC,EAAKD,IAAK,CAC5D,IAAI4e,EAAeptB,KAAKwL,aAAagD,GAEjCoI,EAAI5W,KAAKqL,QAAQyB,WAAWwhB,mBAAmBlB,GAEnD,GAAKxW,KAAKA,EAAE3I,gBAAkB/C,EAASwC,YAAvC,CAIA,GAAIkJ,EAAE3I,gBAAkB/C,EAASwC,WAC/B,OAAOkJ,EAGT,KAAIA,EAAE1I,YAAchD,EAASyC,QAI7B,OAAOiJ,GAGT,OAAO5W,KAAKqL,QAAQyB,WAAWwhB,mBAAmBtuB,KAAKwL,aAAa,KAGtEo2B,EAAgBjhC,UAAUuhC,gBAAkB,WAC1C,IAAI7vB,EAAS,GAYb,OAVAA,GADAA,EAASA,EAAO0V,OAAO/nB,KAAKwL,eACZuc,OAAO/nB,KAAK6hC,sCAExB7hC,KAAK8hC,wBACPzvB,EAAOjE,KAAKpO,KAAK8hC,wBAGf9hC,KAAK+hC,6BACP1vB,EAAOjE,KAAKpO,KAAK+hC,6BAGZ1vB,GAGTuvB,EAAgBmB,+BAAiC,IAAuBh9B,SAAS,CAC/E2J,WAAY,EAGZ+0B,OAAQ,GACR90B,UAAW,mBACX+0B,iBAAiB,EACjB90B,cAAe,CACbC,MAAO,YAAiB,MACxB3E,SAAU,IAAkB4E,UAGhC8xB,EAAgBkB,uBAAyB,IAAuB/8B,SAAS,CACvE2J,WAAY,EAGZC,UAAW,YACX+0B,iBAAiB,EACjB90B,cAAe,CACbC,MAAO,YAAiB,MACxB3E,SAAU,IAAkB4E,UAGhC8xB,EAAgBiC,mCAAqC,IAAuB99B,SAAS,CACnF2J,WAAY,EAGZC,UAAW,YACX+0B,iBAAiB,IAEnB9C,EAAgBwC,qCAAuC,IAAuBr+B,SAAS,CACrF2J,WAAY,EAGZE,cAAe,CACbC,MAAO,YAAiB,MACxB3E,SAAU,IAAkB4E,UAGhC8xB,EAAgB4B,4BAA8B,IAAuBz9B,SAAS,CAC5E2J,WAAY,EAGZC,UAAW,iBACXg1B,aAAa,IAEf/C,EAAgB0C,uBAAyB,IAAuBv+B,SAAS,CACvE4J,UAAW,YACXg1B,aAAa,IAER/C,EAvUT,GCNI,GAEJ,WACE,SAASgD,EAAkBC,EAAiBC,EAAQC,GAClD/kC,KAAKglC,iBAAmBH,EACxB7kC,KAAKilC,QAAUH,EACf9kC,KAAKklC,gBAAkBH,EAiDzB,OA9CAH,EAAkBjkC,UAAUqQ,kBAAoB,SAAUnE,EAAOoE,GAC/D,GAAIjR,KAAKilC,QAAQ14B,OAAS,EAAG,CAI3B,IAFA,IAAIsV,EAAM,GAEDrT,EAAI,EAAGA,EAAIxO,KAAKilC,QAAQ14B,OAAQiC,IACvCqT,EAAIzT,KAAK,CACPX,MAAOzN,KAAKilC,QAAQz2B,GACpBoK,KAAM5Y,KAAKklC,gBAAgB12B,KAK/BqT,EAAI3S,KAAK,SAAUi2B,EAAIC,GACrB,OAAO,KAAMC,yBAAyBF,EAAG13B,MAAO23B,EAAG33B,SAGrD,IAAI63B,EAAY,GACZC,EAAa1jB,EAAI,GAErB,IAASrT,EAAI,EAAGA,EAAIqT,EAAItV,OAAQiC,IAC1B+2B,EAAW93B,MAAM4D,gBAAkBwQ,EAAIrT,GAAGf,MAAMQ,iBAAmBs3B,EAAW93B,MAAM6D,YAAcuQ,EAAIrT,GAAGf,MAAMS,aAEjHq3B,EAAW93B,MAAQ83B,EAAW93B,MAAMsgB,UAAUlM,EAAIrT,GAAGf,OACrD83B,EAAW3sB,KAAO2sB,EAAW3sB,KAAOiJ,EAAIrT,GAAGoK,OAE3C0sB,EAAUl3B,KAAKm3B,GACfA,EAAa1jB,EAAIrT,IAIrB82B,EAAUl3B,KAAKm3B,GAEf,IAAK,IAAI3yB,EAAK,EAAG4yB,EAAcF,EAAW1yB,EAAK4yB,EAAYj5B,OAAQqG,IAAM,CACvE,IAAIuP,EAAKqjB,EAAY5yB,GACrB3B,EAAQc,iBAAiBoQ,EAAG1U,MAAO0U,EAAGvJ,OAI1C5Y,KAAKylC,0BAA4Bx0B,EAAQG,eAAepR,KAAKglC,mBAG/DJ,EAAkBjkC,UAAUwR,mBAAqB,SAAUtF,EAAOuF,GAChE,OAAOA,EAAOE,oBAAoBtS,KAAKylC,4BAGlCb,EArDT,GCAIc,GAEJ,WAQE,OAPA,SAAmCC,GACjC3lC,KAAK2lC,YAAcA,EACnB3lC,KAAKyb,KAAO,GAHhB,GAeImqB,GAEJ,WAQE,OAPA,SAAqCC,GACnC7lC,KAAK6lC,OAASA,EACd7lC,KAAKyb,KAAO,GAHhB,GAWIqqB,GAEJ,WACE,SAASA,EAAeD,GACjBA,GAA4B,IAAlBA,EAAOt5B,OAEO,IAAlBs5B,EAAOt5B,QAA0C,OAA1Bs5B,EAAO,GAAGF,YAC1C3lC,KAAK4f,OAAS,IAAI8lB,GAA0BG,EAAO,GAAGF,aAEtD3lC,KAAK4f,OAAS,IAAIgmB,GAA4BC,GAJ9C7lC,KAAK4f,OAAS,IAAI8lB,GAA0B,IAwEhD,OAhEAI,EAAeC,gBAAkB,SAAUxjC,GACzC,OAAO,IAAIujC,EAAe,CAACE,GAAaL,YAAYpjC,MAGtDnC,OAAOM,eAAeolC,EAAenlC,UAAW,yBAA0B,CACxEC,IAAK,WACH,OAA4B,IAArBZ,KAAK4f,OAAOnE,MAIrB3a,YAAY,EACZC,cAAc,IAGhB+kC,EAAenlC,UAAUslC,mBAAqB,SAAUC,GACtD,GAAyB,IAArBlmC,KAAK4f,OAAOnE,KAGZ,OAAOzb,KAAK4f,OAAO+lB,YAKvB,IAFA,IAAItzB,EAAS,GAEJ7D,EAAI,EAAGC,EAAMzO,KAAK4f,OAAOimB,OAAOt5B,OAAQiC,EAAIC,EAAKD,IAAK,CAC7D,IAAI23B,EAAQnmC,KAAK4f,OAAOimB,OAAOr3B,GAEL,OAAtB23B,EAAMR,YAOVtzB,GAAUyzB,EAAeM,YAAYD,EAAME,WAAYH,GALrD7zB,GAAU8zB,EAAMR,YAQpB,OAAOtzB,GAGTyzB,EAAeM,YAAc,SAAUC,EAAYH,GACjD,GAAgB,OAAZA,EACF,MAAO,GAGT,GAAmB,IAAfG,EACF,OAAOH,EAAQ,GAKjB,IAFA,IAAII,EAAY,GAETD,EAAa,GAAG,CACrB,GAAIA,EAAaH,EAAQ35B,OAGvB,OADY25B,EAAQG,IAAe,IACpBC,EAGjBA,EAAYja,OAAOga,EAAa,IAAMC,EACtCD,EAAahlC,KAAKkjB,MAAM8hB,EAAa,IAGvC,MAAO,IAAMC,GAGRR,EA3ET,GAmFIE,GAEJ,WACE,SAASA,EAAaL,EAAaU,GACjCrmC,KAAK2lC,YAAcA,EACnB3lC,KAAKqmC,WAAaA,EAWpB,OARAL,EAAaL,YAAc,SAAUpjC,GACnC,OAAO,IAAIyjC,EAAazjC,GAAQ,IAGlCyjC,EAAaK,WAAa,SAAU7D,GAClC,OAAO,IAAIwD,EAAa,KAAMxD,IAGzBwD,EAdT,GAmBIO,GAEJ,WACE,SAASA,EAAoBC,GAC3BxmC,KAAKymC,QAAUD,EACfxmC,KAAK0mC,eAAiB,EACtB1mC,KAAK2mC,QAAU,GACf3mC,KAAK4mC,WAAa,EAClB5mC,KAAK6mC,oBAAsB,GA4C7B,OAzCAN,EAAoB5lC,UAAUmmC,cAAgB,SAAUC,GACtD/mC,KAAKgnC,YAAYhnC,KAAKymC,QAAQjlC,UAAUxB,KAAK0mC,eAAgBK,IAE7D/mC,KAAK0mC,eAAiBK,GAGxBR,EAAoB5lC,UAAUsmC,WAAa,SAAU1kC,EAAOwkC,GAC1D/mC,KAAKgnC,YAAYzkC,GAEjBvC,KAAK0mC,eAAiBK,GAGxBR,EAAoB5lC,UAAUqmC,YAAc,SAAUzkC,GAC/B,IAAjBA,EAAMgK,SAIVvM,KAAK6mC,qBAAuBtkC,IAG9BgkC,EAAoB5lC,UAAUumC,eAAiB,SAAU1E,EAAOuE,GACtB,IAApC/mC,KAAK6mC,oBAAoBt6B,SAC3BvM,KAAK2mC,QAAQ3mC,KAAK4mC,cAAgBZ,GAAaL,YAAY3lC,KAAK6mC,qBAChE7mC,KAAK6mC,oBAAsB,IAG7B7mC,KAAK2mC,QAAQ3mC,KAAK4mC,cAAgBZ,GAAaK,WAAW7D,GAC1DxiC,KAAK0mC,eAAiBK,GAGxBR,EAAoB5lC,UAAUwmC,SAAW,WAQvC,OAPAnnC,KAAK8mC,cAAc9mC,KAAKymC,QAAQl6B,QAEQ,IAApCvM,KAAK6mC,oBAAoBt6B,SAC3BvM,KAAK2mC,QAAQ3mC,KAAK4mC,cAAgBZ,GAAaL,YAAY3lC,KAAK6mC,qBAChE7mC,KAAK6mC,oBAAsB,IAGtB,IAAIf,GAAe9lC,KAAK2mC,UAG1BJ,EAlDT,GCnIO,IAAIa,GAA8B,IAAI,KAAc,qBAAqB,GAErEC,GAA6B,IAAI,KAAc,qBAAqB,GACpEC,GAAgC,IAAI,KAAc,wBAAwB,GAC1EC,GAAgC,CACzC/8B,QAAS,IAKT6I,IAAK,CACH7I,QAAS,OASFg9B,GAA4B,CACrCh9B,QAAS,IAKT6I,IAAK,CACH7I,QAAS,OASFi9B,GAAwB,CACjCj9B,QAAS,IAKT6I,IAAK,CACH7I,QAAS,OASFk9B,GAA8B,CACvCl9B,QAAS,IAKT6I,IAAK,CACH7I,QAAS,OASFm9B,GAAW,CACpBC,gBAAiB,eACjBC,uBAAwB,4BACxBC,oBAAqB,oCACrBC,wBAAyB,wCACzBC,6BAA8B,6CAC9BC,iCAAkC,iDAClCC,uBAAwB,uCACxBC,uBAAwB,kBACxBC,2BAA4B,0BAC5BC,uBAAwB,sBACxBC,mBAAoB,kBACpBC,yBAA0B,wBAC1BC,iBAAkB,2BAClBC,iBAAkB,2BAClBC,uBAAwB,kCAKtB,GAEJ,WACE,SAASC,EAA4B/9B,EAAQ6Z,GAC3C,IAAIrjB,EAAQpB,KAEZA,KAAKqL,QAAUT,EACf5K,KAAK4f,OAAS6E,EACdzkB,KAAKw8B,WAAa,GAClBx8B,KAAK4oC,aAAc,EACnB5oC,KAAK6oC,qBAAuB,IAAI,IAChC7oC,KAAKwL,aAAe,IAAI,GAAgBZ,GAExC5K,KAAKw8B,WAAWpuB,KAAKpO,KAAKwL,cAE1BxL,KAAK8oC,4BAA8B,IAAI,IAAiB,WACtD,OAAO1nC,EAAM2nC,UAAS,IACrB,KAEH/oC,KAAKw8B,WAAWpuB,KAAKpO,KAAK8oC,6BAE1B9oC,KAAKw8B,WAAWpuB,KAAKpO,KAAKqL,QAAQY,0BAA0B,SAAUC,GACnD,IAAbA,EAAE88B,QAEU,IAAb98B,EAAE88B,QAEW,IAAb98B,EAAE88B,QAGD5nC,EAAMoK,aAAa+G,iBAAiBnR,EAAMiK,QAAQyI,kBAIxD9T,KAAKipC,4BAA6B,EAElCjpC,KAAKw8B,WAAWpuB,KAAKpO,KAAKqL,QAAQc,wBAAwB,SAAUD,GAC9D9K,EAAM6nC,6BAIN/8B,EAAEg9B,SAEJ9nC,EAAMoK,aAAaoM,QAGrBxW,EAAMoK,aAAa+G,iBAAiBnR,EAAMiK,QAAQyI,eAElD1S,EAAM0nC,4BAA4B98B,eAGpChM,KAAKw8B,WAAWpuB,KAAKpO,KAAK4f,OAAOupB,yBAAyB,SAAUj9B,GAClE,OAAO9K,EAAMgoC,gBAAgBl9B,MAG/BlM,KAAK+oC,UAAS,EAAO/oC,KAAK4f,OAAOypB,aAienC,OA9dAV,EAA4BhoC,UAAUc,QAAU,WAC9CzB,KAAK4oC,aAAc,EACnB,YAAQ5oC,KAAK6oC,sBACb7oC,KAAKw8B,WAAa,YAAQx8B,KAAKw8B,aAGjCmM,EAA4BhoC,UAAUyoC,gBAAkB,SAAUl9B,GAChE,IAAI9K,EAAQpB,KAERA,KAAK4oC,aAKJ5oC,KAAKqL,QAAQuB,aAKdV,EAAEo9B,cAAgBp9B,EAAEq9B,mBAAqBr9B,EAAEs9B,SAAWt9B,EAAEu9B,WAAav9B,EAAEw9B,WAAax9B,EAAEm9B,eAC5ErpC,KAAKqL,QAAQyB,WAEf68B,wBACR3pC,KAAK6oC,qBAAqBprB,SAE1Bzd,KAAK6oC,qBAAqBe,YAAY,WAChC19B,EAAEm9B,YACJjoC,EAAM2nC,SAAS78B,EAAE29B,WAAYzoC,EAAMwe,OAAOypB,aAE1CjoC,EAAM2nC,SAAS78B,EAAE29B,aAxFR,MA4FT39B,EAAEm9B,YACJrpC,KAAK+oC,SAAS78B,EAAE29B,WAAY7pC,KAAK4f,OAAOypB,aAExCrpC,KAAK+oC,SAAS78B,EAAE29B,cAMxBlB,EAA4BmB,gBAAkB,SAAUj9B,EAAO62B,GAE7D,OAAIA,GAIG72B,EAAMk9B,qBAGfpB,EAA4BhoC,UAAUooC,SAAW,SAAUc,EAAYG,GACrE,IAAItG,EAAY,KAQE,QALhBA,EAD0B,qBAAjBsG,EACGA,EAEAhqC,KAAKwL,aAAa42B,iBAI1BsB,EAAUz1B,kBAAoBy1B,EAAUryB,gBAExCqyB,EAD0B,IAAxBA,EAAUpyB,UACA,IAAI,KAAMoyB,EAAUz1B,gBAAiB,EAAGy1B,EAAUryB,cAAgB,EAAGrR,KAAKqL,QAAQyB,WAAWyE,iBAAiBmyB,EAAUryB,cAAgB,IAGxI,IAAI,KAAMqyB,EAAUz1B,gBAAiB,EAAGy1B,EAAUryB,cAAerR,KAAKqL,QAAQyB,WAAWyE,iBAAiBmyB,EAAUryB,iBAKtI,IAAIoyB,EAAczjC,KAAKiqC,aAAavG,GAAW,EAnIxB,OAqIvB1jC,KAAKwL,aAAawM,IAAIyrB,EAAaC,GAEnC1jC,KAAK4f,OAAOsqB,gBAAgBlqC,KAAKwL,aAAai3B,0BAA0BziC,KAAKqL,QAAQ2K,gBAAiBhW,KAAKwL,aAAa22B,gBAAYngC,GAEhI6nC,GACF7pC,KAAKmqC,iBAAiBnqC,KAAKwL,aAAa2B,qBAI5Cw7B,EAA4BhoC,UAAUypC,YAAc,WAClD,OAAOpqC,KAAK4f,OAAOyqB,aAAe,GAGpC1B,EAA4BhoC,UAAU2pC,YAAc,WAClD,IAAKtqC,KAAKoqC,cAAe,CACvB,IAAI1G,EAAY1jC,KAAKwL,aAAa42B,eASlC,OAPIsB,GAEF1jC,KAAKqL,QAAQg0B,qCAAqCqE,EAAW,IAKxD,EAGT,OAAO,GAGTiF,EAA4BhoC,UAAU4pC,qBAAuB,SAAUC,GACrE,IAAIC,EAAkBzqC,KAAKwL,aAAa82B,oBAAoBkI,GAE5DxqC,KAAK4f,OAAOsqB,gBAAgBO,EAAiBzqC,KAAKwL,aAAa22B,WAAYqI,GAE3ExqC,KAAKqL,QAAQq/B,aAAaF,GAE1BxqC,KAAKqL,QAAQg0B,qCAAqCmL,EAAO,IAK3D7B,EAA4BhoC,UAAUgqC,oBAAsB,SAAU1U,GACpE,IAAI2U,EAAmB5qC,KAAK4f,OAAO4pB,UAAYxpC,KAAK4f,OAAO0pB,aAAalf,QAAQ,MAAQ,GAAKpqB,KAAK4f,OAAO0pB,aAAalf,QAAQ,MAAQ,GAClI1c,EAAauoB,EAAOvoB,WACpBC,EAASsoB,EAAOtoB,OAEhBd,EAAQ7M,KAAKqL,QAAQyB,WAczB,OAZI89B,GAA+B,IAAXj9B,GACH,IAAfD,EACFA,EAAab,EAAM8G,eAEnBjG,IAGFC,EAASd,EAAM0E,iBAAiB7D,IAEhCC,IAGK,IAAI,IAASD,EAAYC,IAGlCg7B,EAA4BhoC,UAAUkqC,iBAAmB,SAAU5U,EAAQ6U,GAKzE,QAJmB,IAAfA,IACFA,GAAa,GAGX9qC,KAAKwL,aAAa22B,WA1MC,MA0M2B,CAChD,IAAI4I,EAAiB/qC,KAAKwL,aAAa+4B,oBAAoBtO,GAW3D,OATI8U,GAAkBA,EAAe97B,WAAa87B,EAAe59B,mBAAmBsC,OAAOwmB,KACzFA,EAASj2B,KAAK2qC,oBAAoB1U,GAClC8U,EAAiB/qC,KAAKwL,aAAa+4B,oBAAoBtO,SAGrD8U,GACF/qC,KAAKuqC,qBAAqBQ,IAM9B,IAAI/qC,KAAKsqC,cAAT,CAIA,IAAI5G,EAAY1jC,KAAKwL,aAAa42B,eAE9B4I,EAAcrC,EAA4BmB,gBAAgB9pC,KAAKqL,QAAQyB,WAAY42B,GAGnFsH,EAAY78B,iBAAiBqB,SAASymB,KACxCA,EAAS+U,EAAY78B,kBAInB8nB,EAAOzmB,SAASw7B,EAAY79B,sBAC9B8oB,EAAS+U,EAAY78B,kBAGvB,IAAIT,EAAauoB,EAAOvoB,WACpBC,EAASsoB,EAAOtoB,OAEhBd,EAAQ7M,KAAKqL,QAAQyB,WAErB5B,EAAW,IAAI,IAASwC,EAAYC,GACpCs9B,EAAYp+B,EAAMq+B,kBAAkBlrC,KAAK4f,OAAO0pB,aAAcp+B,EAAUlL,KAAK4f,OAAO4pB,QAASxpC,KAAK4f,OAAO8pB,UAAW1pC,KAAK4f,OAAO6pB,UAAYzpC,KAAKqL,QAAQQ,mBAAmBs/B,eAAiB,MAAM,GAQvM,GANIF,GAAaA,EAAUx9B,MAAMwB,WAAag8B,EAAUx9B,MAAMN,mBAAmBsC,OAAOvE,KAEtFA,EAAWlL,KAAK2qC,oBAAoBz/B,GACpC+/B,EAAYp+B,EAAMq+B,kBAAkBlrC,KAAK4f,OAAO0pB,aAAcp+B,EAAUlL,KAAK4f,OAAO4pB,QAASxpC,KAAK4f,OAAO8pB,UAAW1pC,KAAK4f,OAAO6pB,UAAYzpC,KAAKqL,QAAQQ,mBAAmBs/B,eAAiB,MAAM,IAGhMF,EAKL,OAAKH,GAAeE,EAAYI,cAAcH,EAAUx9B,YAIxDzN,KAAKuqC,qBAAqBU,EAAUx9B,OAH3BzN,KAAK6qC,iBAAiBI,EAAUx9B,MAAMN,oBAAoB,KAMrEw7B,EAA4BhoC,UAAU0qC,gBAAkB,WACtDrrC,KAAK6qC,iBAAiB7qC,KAAKqL,QAAQ2K,eAAe7I,qBAGpDw7B,EAA4BhoC,UAAU2qC,oBAAsB,SAAUC,GACpE,IAAIX,EAAmB5qC,KAAK4f,OAAO4pB,UAAYxpC,KAAK4f,OAAO0pB,aAAalf,QAAQ,MAAQ,GAAKpqB,KAAK4f,OAAO0pB,aAAalf,QAAQ,MAAQ,GAClI1c,EAAa69B,EAAM79B,WACnBC,EAAS49B,EAAM59B,OAEfd,EAAQ7M,KAAKqL,QAAQyB,WAczB,OAZI89B,GAAoBj9B,IAAWd,EAAM0E,iBAAiB7D,IACpDA,IAAeb,EAAM8G,eACvBjG,EAAa,EAEbA,IAGFC,EAAS,GAETA,IAGK,IAAI,IAASD,EAAYC,IAGlCg7B,EAA4BhoC,UAAUwpC,iBAAmB,SAAUoB,GACjE,GAAIvrC,KAAKwL,aAAa22B,WAhSC,MAgS2B,CAChD,IAAIqJ,EAAiBxrC,KAAKwL,aAAag5B,mBAAmB+G,GAY1D,OAVIC,GAAkBA,EAAev8B,WAAau8B,EAAer+B,mBAAmBsC,OAAO87B,KAEzFA,EAAQvrC,KAAKsrC,oBAAoBC,GACjCC,EAAiBxrC,KAAKwL,aAAag5B,mBAAmB+G,SAGpDC,GACFxrC,KAAKuqC,qBAAqBiB,IAM9B,IAAIxI,EAAYhjC,KAAKyrC,cAAcF,GAAO,GAAO,GAE7CvI,GACFhjC,KAAKuqC,qBAAqBvH,EAAUv1B,QAIxCk7B,EAA4BhoC,UAAU8qC,cAAgB,SAAUF,EAAOG,EAAgBC,EAAWb,GAKhG,QAJmB,IAAfA,IACFA,GAAa,GAGX9qC,KAAKsqC,cACP,OAAO,KAGT,IAAI5G,EAAY1jC,KAAKwL,aAAa42B,eAE9B4I,EAAcrC,EAA4BmB,gBAAgB9pC,KAAKqL,QAAQyB,WAAY42B,GAGnFsH,EAAY78B,iBAAiBqB,SAAS+7B,KACxCA,EAAQP,EAAY79B,oBAIlBo+B,EAAM/7B,SAASw7B,EAAY79B,sBAC7Bo+B,EAAQP,EAAY79B,oBAGtB,IAAIO,EAAa69B,EAAM79B,WACnBC,EAAS49B,EAAM59B,OAEfd,EAAQ7M,KAAKqL,QAAQyB,WAErB5B,EAAW,IAAI,IAASwC,EAAYC,GACpCq1B,EAAYn2B,EAAM++B,cAAc5rC,KAAK4f,OAAO0pB,aAAcp+B,EAAUlL,KAAK4f,OAAO4pB,QAASxpC,KAAK4f,OAAO8pB,UAAW1pC,KAAK4f,OAAO6pB,UAAYzpC,KAAKqL,QAAQQ,mBAAmBs/B,eAAiB,KAAMO,GAQnM,OANIC,GAAa3I,GAAaA,EAAUv1B,MAAMwB,WAAa+zB,EAAUv1B,MAAMN,mBAAmBsC,OAAOvE,KAEnGA,EAAWlL,KAAKsrC,oBAAoBpgC,GACpC83B,EAAYn2B,EAAM++B,cAAc5rC,KAAK4f,OAAO0pB,aAAcp+B,EAAUlL,KAAK4f,OAAO4pB,QAASxpC,KAAK4f,OAAO8pB,UAAW1pC,KAAK4f,OAAO6pB,UAAYzpC,KAAKqL,QAAQQ,mBAAmBs/B,eAAiB,KAAMO,IAG5L1I,EAKA8H,GAAeE,EAAYI,cAAcpI,EAAUv1B,OAIjDu1B,EAHEhjC,KAAKyrC,cAAczI,EAAUv1B,MAAMU,iBAAkBu9B,EAAgBC,GAAW,GAJhF,MAUXhD,EAA4BhoC,UAAUkrC,gBAAkB,WACtD7rC,KAAKmqC,iBAAiBnqC,KAAKqL,QAAQ2K,eAAe7H,mBAGpDw6B,EAA4BhoC,UAAUmrC,mBAAqB,WACzD,OAAI9rC,KAAK4f,OAAO4pB,QD9Pb,SAA4BuC,GACjC,IAAKA,GAA0C,IAAzBA,EAAcx/B,OAClC,OAAO,IAAIu5B,GAAe,MAK5B,IAFA,IAAIzzB,EAAS,IAAIk0B,GAAoBwF,GAE5Bv9B,EAAI,EAAGC,EAAMs9B,EAAcx/B,OAAQiC,EAAIC,EAAKD,IAAK,CACxD,IAAIw9B,EAASD,EAAct4B,WAAWjF,GAEtC,GAAe,KAAXw9B,GA0CJ,GAAe,KAAXA,EAEF,CAIE,KAFAx9B,GAESC,EAEP,MAKF,GAAmB,MAFfw9B,EAAaF,EAAct4B,WAAWjF,IAIxC,CAEE6D,EAAOy0B,cAAct4B,EAAI,GACzB6D,EAAO40B,WAAW,IAAKz4B,EAAI,GAC3B,SAGJ,GAAmB,KAAfy9B,GAEc,KAAfA,EAED,CAEE55B,EAAOy0B,cAAct4B,EAAI,GACzB6D,EAAO60B,eAAe,EAAG14B,EAAI,GAC7B,SAGJ,GAAI,IAEDy9B,GAAcA,GAAc,GAE7B,CAEE,IAAI5F,EAAa4F,EAAa,GAI9B,GAAIz9B,EAAI,EAAIC,EAAK,CACf,IAAIy9B,EAAiBH,EAAct4B,WAAWjF,EAAI,GAElD,GAAI,IAED09B,GAAkBA,GAAkB,GAErC,CAGE19B,IACA63B,EAA0B,GAAbA,GAAmB6F,EAAiB,IAGjD75B,EAAOy0B,cAAct4B,EAAI,GACzB6D,EAAO60B,eAAeb,EAAY73B,EAAI,GACtC,UAIN6D,EAAOy0B,cAAct4B,EAAI,GACzB6D,EAAO60B,eAAeb,EAAY73B,EAAI,GACtC,eA3GR,CAMI,KAFAA,GAESC,EAEP,MAGF,IAAIw9B,EAEJ,OAFIA,EAAaF,EAAct4B,WAAWjF,IAGxC,KAAK,GAIH6D,EAAOy0B,cAAct4B,EAAI,GACzB6D,EAAO40B,WAAW,KAAMz4B,EAAI,GAC5B,MAEF,KAAK,IAIH6D,EAAOy0B,cAAct4B,EAAI,GACzB6D,EAAO40B,WAAW,KAAMz4B,EAAI,GAC5B,MAEF,KAAK,IAIH6D,EAAOy0B,cAAct4B,EAAI,GACzB6D,EAAO40B,WAAW,KAAMz4B,EAAI,KA6EtC,OAAO6D,EAAO80B,WCqIHgF,CAAmBnsC,KAAK4f,OAAOmsB,eAGjCjG,GAAeC,gBAAgB/lC,KAAK4f,OAAOmsB,gBAGpDpD,EAA4BhoC,UAAUw3B,QAAU,WAC9C,GAAKn4B,KAAKoqC,cAAV,CAIA,IAAIgC,EAAiBpsC,KAAK8rC,qBAEtB5+B,EAAYlN,KAAKqL,QAAQ2K,eAEzBgtB,EAAYhjC,KAAKyrC,cAAcv+B,EAAUC,mBAAoBi/B,EAAeC,wBAAwB,GAExG,GAAIrJ,EACF,GAAI91B,EAAUi2B,YAAYH,EAAUv1B,OAAQ,CAE1C,IAAIs+B,EAAgBK,EAAenG,mBAAmBjD,EAAUkD,SAC5D31B,EAAU,IAAI,KAAerD,EAAW6+B,GAE5C/rC,KAAKssC,sBAAsB,UAAW/7B,GAEtCvQ,KAAKwL,aAAa+G,iBAAiB,IAAI,IAASrF,EAAUe,gBAAiBf,EAAUgB,YAAc69B,EAAcx/B,SAEjHvM,KAAK+oC,UAAS,QAEd/oC,KAAKwL,aAAa+G,iBAAiBvS,KAAKqL,QAAQyI,eAEhD9T,KAAKuqC,qBAAqBvH,EAAUv1B,SAK1Ck7B,EAA4BhoC,UAAUspC,aAAe,SAAUvG,EAAWgI,EAAgBa,GACxF,IAAIvB,EAAcrC,EAA4BmB,gBAAgB9pC,KAAKqL,QAAQyB,WAAY42B,GAEvF,OAAO1jC,KAAKqL,QAAQyB,WAAW22B,YAAYzjC,KAAK4f,OAAO0pB,aAAc0B,EAAahrC,KAAK4f,OAAO4pB,QAASxpC,KAAK4f,OAAO8pB,UAAW1pC,KAAK4f,OAAO6pB,UAAYzpC,KAAKqL,QAAQQ,mBAAmBs/B,eAAiB,KAAMO,EAAgBa,IAG/N5D,EAA4BhoC,UAAU6rC,WAAa,WACjD,GAAKxsC,KAAKoqC,cAAV,CAIA,IAAI1G,EAAY1jC,KAAKwL,aAAa42B,eAEhB,OAAdsB,GAAsB1jC,KAAK4f,OAAOyqB,cA/Zf,MAiarBrqC,KAAKysC,mBAELzsC,KAAK0sC,mBAAmBhJ,GAG1B1jC,KAAK+oC,UAAS,KAGhBJ,EAA4BhoC,UAAU8rC,iBAAmB,WACvD,IACIE,EADe,IAAI,KAAa3sC,KAAK4f,OAAO0pB,aAActpC,KAAK4f,OAAO4pB,QAASxpC,KAAK4f,OAAO8pB,UAAW1pC,KAAK4f,OAAO6pB,UAAYzpC,KAAKqL,QAAQQ,mBAAmBs/B,eAAiB,MACrJyB,qBAE9B,GAAKD,EAAL,CAIA,IAAIE,EAAcF,EAAW3mB,MAE7B,IAAK6mB,EAAYC,UAAW,CAC1B,IAAIzkC,EAAM,IAENwkC,EAAYE,aACd1kC,GAAO,KAGLwkC,EAAYG,SACd3kC,GAAO,KAGTwkC,EAAc,IAAI3mB,OAAO2mB,EAAYrG,OAAQn+B,GAG/C,IASI4kC,EATApgC,EAAQ7M,KAAKqL,QAAQyB,WAErBogC,EAAYrgC,EAAMmoB,SAAS,GAG3BmY,EAAiBtgC,EAAMk9B,oBAEvBqC,EAAiBpsC,KAAK8rC,qBAKxBmB,EADEb,EAAeC,uBACJa,EAAU/U,QAAQ0U,EAAa,WAC1C,OAAOT,EAAenG,mBAAmBtvB,aAG9Bu2B,EAAU/U,QAAQ0U,EAAaT,EAAenG,mBAAmB,OAGhF,IAAI11B,EAAU,IAAI,KAAqC48B,EAAgBF,EAAYjtC,KAAKqL,QAAQ2K,gBAEhGhW,KAAKssC,sBAAsB,aAAc/7B,KAG3Co4B,EAA4BhoC,UAAU+rC,mBAAqB,SAAUhJ,GAUnE,IATA,IAAI0I,EAAiBpsC,KAAK8rC,qBAGtB5F,EAAUlmC,KAAKiqC,aAAavG,EAAW0I,EAAeC,uBAAwB,YAI9EtH,EAAiB,GAEZv2B,EAAI,EAAGC,EAAMy3B,EAAQ35B,OAAQiC,EAAIC,EAAKD,IAC7Cu2B,EAAev2B,GAAK49B,EAAenG,mBAAmBC,EAAQ13B,GAAG03B,SAGnE,IAAI31B,EAAU,IAAI,GAAkBvQ,KAAKqL,QAAQ2K,eAAgBkwB,EAAQj5B,IAAI,SAAUmgC,GACrF,OAAOA,EAAE3/B,QACPs3B,GAEJ/kC,KAAKssC,sBAAsB,aAAc/7B,IAG3Co4B,EAA4BhoC,UAAU0sC,iBAAmB,WACvD,GAAKrtC,KAAKoqC,cAAV,CAiBA,IAbA,IAAI1G,EAAY1jC,KAAKwL,aAAa42B,eAO9BtzB,EAJU9O,KAAKiqC,aAAavG,GAAW,EAAO,YAIzBz2B,IAAI,SAAUmgC,GACrC,OAAO,IAAI,IAAUA,EAAE3/B,MAAMQ,gBAAiBm/B,EAAE3/B,MAAMS,YAAak/B,EAAE3/B,MAAM4D,cAAe+7B,EAAE3/B,MAAM6D,aAGhGuzB,EAAkB7kC,KAAKqL,QAAQ2K,eAE1BxH,EAAI,EAAGC,EAAMK,EAAWvC,OAAQiC,EAAIC,EAAKD,IAAK,CAGrD,GAFUM,EAAWN,GAEb20B,YAAY0B,GAAkB,CACpC/1B,EAAa,CAAC+1B,GAAiB9c,OAAOjZ,EAAWw+B,MAAM,EAAG9+B,IAAIuZ,OAAOjZ,EAAWw+B,MAAM9+B,EAAI,IAC1F,OAIJxO,KAAKqL,QAAQuC,cAAckB,KAG7B65B,EAA4BhoC,UAAU2rC,sBAAwB,SAAU9F,EAAQj2B,GAC9E,IACEvQ,KAAKipC,4BAA6B,EAElCjpC,KAAKqL,QAAQyH,eAEb9S,KAAKqL,QAAQyc,eAAe0e,EAAQj2B,GAEpCvQ,KAAKqL,QAAQyH,eACb,QACA9S,KAAKipC,4BAA6B,IAI/BN,EArhBT,G,6BCrGI,GAAsC,WACxC,IAAI3/B,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GAgCtC+jC,GAAc,CAChBC,wBAAyB,KAAMC,QAAQ,YAGrC,GAEJ,SAAU1jC,GAGR,SAAS2jC,EAASh7B,GAChB,IAAItR,EAAQ2I,EAAOE,KAAKjK,OAASA,KA6CjC,OA3CAoB,EAAMusC,UAAYvsC,EAAMsK,UAAU,IAAI,MACtCtK,EAAMwsC,WAAaxsC,EAAMsK,UAAU,IAAI,MACvCtK,EAAMysC,MAAQC,GAAA,EAAkBp7B,GAChCo7B,GAAA,EAAc1sC,EAAMysC,MAAON,IAAa,GACxCnsC,EAAM2sC,SAAW3sC,EAAMysC,MAAMG,UAC7B5sC,EAAM4pB,QAAUvW,SAASyE,cAAc,OACvC9X,EAAM4pB,QAAQxa,MAAQpP,EAAMysC,MAAMr9B,MAClCpP,EAAM4pB,QAAQrb,UAAY,2BAA6BvO,EAAMysC,MAAMI,iBAAmB,IAAM,KAAO7sC,EAAM2sC,SAAW,UAAY,aAChI3sC,EAAM4pB,QAAQkjB,SAAW,EAEzB9sC,EAAM4pB,QAAQmjB,aAAa,OAAQ,YAEnC/sC,EAAM4pB,QAAQmjB,aAAa,eAAgB9hB,OAAOjrB,EAAM2sC,WAExD3sC,EAAM4pB,QAAQmjB,aAAa,aAAc/sC,EAAMysC,MAAMr9B,OAErDpP,EAAMgtC,cAENhtC,EAAMitC,QAAQjtC,EAAM4pB,QAAS,SAAUsjB,GACrCltC,EAAMmtC,SAAWntC,EAAM2sC,SAEvB3sC,EAAMusC,UAAU5rC,MAAK,GAErBusC,EAAGtR,mBAGL57B,EAAMotC,UAAUptC,EAAM4pB,QAAS,SAAUyjB,GACvC,GAA8B,KAA1BA,EAAc1R,SAEW,IAA1B0R,EAAc1R,QAQb,OALA37B,EAAMmtC,SAAWntC,EAAM2sC,SAEvB3sC,EAAMusC,UAAU5rC,MAAK,QAErB0sC,EAAczR,iBAIlB57B,EAAMwsC,WAAW7rC,KAAK0sC,KAGjBrtC,EA8ET,OA9HA,GAAUssC,EAAU3jC,GAmDpB3J,OAAOM,eAAegtC,EAAS/sC,UAAW,WAAY,CACpDC,IAAK,WACH,OAAOZ,KAAK2tC,UAAU9sC,OAExBC,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAegtC,EAAS/sC,UAAW,YAAa,CACrDC,IAAK,WACH,OAAOZ,KAAK4tC,WAAW/sC,OAEzBC,YAAY,EACZC,cAAc,IAGhB2sC,EAAS/sC,UAAU6U,MAAQ,WACzBxV,KAAKgrB,QAAQxV,SAGfpV,OAAOM,eAAegtC,EAAS/sC,UAAW,UAAW,CACnDC,IAAK,WACH,OAAOZ,KAAK+tC,UAEd/1B,IAAK,SAAa02B,GAChB1uC,KAAK+tC,SAAWW,EAChB1uC,KAAKgrB,QAAQmjB,aAAa,eAAgB9hB,OAAOrsB,KAAK+tC,WAElD/tC,KAAK+tC,SACP/tC,KAAKgrB,QAAQ7R,UAAUC,IAAI,WAE3BpZ,KAAKgrB,QAAQ7R,UAAUw1B,OAAO,WAGhC3uC,KAAKouC,eAEPttC,YAAY,EACZC,cAAc,IAGhB2sC,EAAS/sC,UAAUy1B,MAAQ,WACzB,OAAO,IAWTsX,EAAS/sC,UAAUkrB,MAAQ,SAAU+iB,GAC/BA,EAAOpB,0BACTxtC,KAAK6tC,MAAML,wBAA0BoB,EAAOpB,yBAG9CxtC,KAAKouC,eAGPV,EAAS/sC,UAAUytC,YAAc,WAC3BpuC,KAAKgrB,UACPhrB,KAAKgrB,QAAQa,MAAMgjB,YAAc7uC,KAAK+tC,UAAY/tC,KAAK6tC,MAAML,wBAA0BxtC,KAAK6tC,MAAML,wBAAwBjsC,WAAa,gBAI3ImsC,EAAS/sC,UAAUmuC,OAAS,WAC1B9uC,KAAKgrB,QAAQkjB,SAAW,EACxBluC,KAAKgrB,QAAQmjB,aAAa,gBAAiB9hB,QAAO,KAGpDqhB,EAAS/sC,UAAUouC,QAAU,WAC3B,KAAiC/uC,KAAKgrB,SACtChrB,KAAKgrB,QAAQmjB,aAAa,gBAAiB9hB,QAAO,KAG7CqhB,EA/HT,CAgIE,MCtKE,I,OAAsC,WACxC,IAAI1kC,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,IA6BtCwlC,GAAoCllC,EAAA,EAAa,kBAAmB,cACpEmlC,GAAgCnlC,EAAA,EAAa,mBAAoB,oBACjEolC,GAA2BplC,EAAA,EAAa,mBAAoB,0BAE5DqlC,GAEJ,SAAUplC,GAGR,SAASolC,EAAsBz8B,GAC7B,OAAO3I,EAAOE,KAAKjK,KAAM,CACvBiuC,gBAAiB,wBACjBz9B,MAAOw+B,GAAoCt8B,EAAK08B,YAChDpB,UAAWt7B,EAAKs7B,UAChBR,wBAAyB96B,EAAK86B,2BAC1BxtC,KAGR,OAXA,GAAUmvC,EAAuBplC,GAW1BolC,EAZT,CAaE,IAIEE,GAEJ,SAAUtlC,GAGR,SAASslC,EAAmB38B,GAC1B,OAAO3I,EAAOE,KAAKjK,KAAM,CACvBiuC,gBAAiB,oBACjBz9B,MAAOy+B,GAAgCv8B,EAAK08B,YAC5CpB,UAAWt7B,EAAKs7B,UAChBR,wBAAyB96B,EAAK86B,2BAC1BxtC,KAGR,OAXA,GAAUqvC,EAAoBtlC,GAWvBslC,EAZT,CAaE,IAIEC,GAEJ,SAAUvlC,GAGR,SAASulC,EAAc58B,GACrB,OAAO3I,EAAOE,KAAKjK,KAAM,CACvBiuC,gBAAiB,eACjBz9B,MAAO0+B,GAA2Bx8B,EAAK08B,YACvCpB,UAAWt7B,EAAKs7B,UAChBR,wBAAyB96B,EAAK86B,2BAC1BxtC,KAGR,OAXA,GAAUsvC,EAAevlC,GAWlBulC,EAZT,CAaE,ICtFE,GAAsC,WACxC,IAAItmC,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GAkCtC,GAEJ,SAAUO,GAGR,SAASwlC,EAAkB3kC,EAAQ6Z,EAAO+qB,EAAmBC,GAC3D,IAAIruC,EAAQ2I,EAAOE,KAAKjK,OAASA,KAEjCoB,EAAMsuC,UAAYtuC,EAAMsK,UAAU,IAAI,IAAiB,WACrD,OAAOtK,EAAMuuC,SACZ,MACHvuC,EAAMwuC,YAAa,EACnBxuC,EAAMiK,QAAUT,EAChBxJ,EAAMwe,OAAS6E,EACfrjB,EAAMolB,mBAAqBgpB,EAC3BpuC,EAAM6X,SAAWxE,SAASyE,cAAc,OACxC9X,EAAM6X,SAAStJ,UAAY,oBAC3BvO,EAAM6X,SAAS4S,MAAMgkB,QAAU,OAC/BzuC,EAAM6X,SAAS4S,MAAMhI,IAAM,OAE3BziB,EAAM6X,SAASk1B,aAAa,OAAQ,gBAEpC/sC,EAAM6X,SAASk1B,aAAa,cAAe,QAE3C,IAAI2B,EAA+BL,EAAaM,WAAW7/B,SAAS,KAgFpE,OA/EA9O,EAAM4uC,cAAgB5uC,EAAMsK,UAAU,IAAIyjC,GAAsB,CAC9DC,YAAahuC,EAAM6uC,oBAAoBtI,GAASS,4BAChD4F,UAAW5sC,EAAMwe,OAAO8pB,UACxB8D,wBAAyBsC,KAG3B1uC,EAAM6X,SAASK,YAAYlY,EAAM4uC,cAAchlB,SAE/C5pB,EAAMsK,UAAUtK,EAAM4uC,cAAcE,SAAS,WAC3C9uC,EAAMwe,OAAOuwB,OAAO,CAClBzG,UAAWtoC,EAAM4uC,cAAczB,UAC9B,MAGLntC,EAAMgvC,WAAahvC,EAAMsK,UAAU,IAAI2jC,GAAmB,CACxDD,YAAahuC,EAAM6uC,oBAAoBtI,GAASU,wBAChD2F,UAAW5sC,EAAMwe,OAAO6pB,UACxB+D,wBAAyBsC,KAG3B1uC,EAAM6X,SAASK,YAAYlY,EAAMgvC,WAAWplB,SAE5C5pB,EAAMsK,UAAUtK,EAAMgvC,WAAWF,SAAS,WACxC9uC,EAAMwe,OAAOuwB,OAAO,CAClB1G,UAAWroC,EAAMgvC,WAAW7B,UAC3B,MAGLntC,EAAM4kB,MAAQ5kB,EAAMsK,UAAU,IAAI4jC,GAAc,CAC9CF,YAAahuC,EAAM6uC,oBAAoBtI,GAASW,oBAChD0F,UAAW5sC,EAAMwe,OAAO4pB,QACxBgE,wBAAyBsC,KAG3B1uC,EAAM6X,SAASK,YAAYlY,EAAM4kB,MAAMgF,SAEvC5pB,EAAMsK,UAAUtK,EAAM4kB,MAAMkqB,SAAS,WACnC9uC,EAAMwe,OAAOuwB,OAAO,CAClB3G,QAASpoC,EAAM4kB,MAAMuoB,UACpB,MAGLntC,EAAMiK,QAAQglC,iBAAiBjvC,GAE/BA,EAAMsK,UAAUtK,EAAMwe,OAAOupB,yBAAyB,SAAUj9B,GAC9D,IAAIokC,GAAmB,EAEnBpkC,EAAEs9B,UACJpoC,EAAM4kB,MAAMuoB,QAAUntC,EAAMwe,OAAO4pB,QACnC8G,GAAmB,GAGjBpkC,EAAEu9B,YACJroC,EAAMgvC,WAAW7B,QAAUntC,EAAMwe,OAAO6pB,UACxC6G,GAAmB,GAGjBpkC,EAAEw9B,YACJtoC,EAAM4uC,cAAczB,QAAUntC,EAAMwe,OAAO8pB,UAC3C4G,GAAmB,IAGhBlvC,EAAMwe,OAAO2wB,YAAcD,GAC9BlvC,EAAMovC,wBAIVpvC,EAAMsK,UAAU0Y,GAAA,EAA6ChjB,EAAM6X,SAAU,SAAU/M,GACrF,OAAO9K,EAAMqvC,iBAGfrvC,EAAMsK,UAAU0Y,GAAA,EAA0BhjB,EAAM6X,SAAU,YAAa,SAAU/M,GAC/E,OAAO9K,EAAMsvC,kBAGftvC,EAAMuvC,YAAYlB,EAAaM,YAE/B3uC,EAAMsK,UAAU+jC,EAAamB,cAAcxvC,EAAMuvC,YAAYE,KAAKzvC,KAE3DA,EAkFT,OAvLA,GAAUmuC,EAAmBxlC,GAwG7BwlC,EAAkB5uC,UAAUsvC,oBAAsB,SAAUa,GAC1D,IAAIxpB,EAAKtnB,KAAKwmB,mBAAmBe,iBAAiBupB,GAElD,OAAKxpB,EAIE,KAAOA,EAAGG,WAAa,IAHrB,IAMX8nB,EAAkB5uC,UAAUc,QAAU,WACpCzB,KAAKqL,QAAQ0lC,oBAAoB/wC,MAEjC+J,EAAOpJ,UAAUc,QAAQwI,KAAKjK,OAIhCuvC,EAAkB5uC,UAAUgM,MAAQ,WAClC,OAAO4iC,EAAkB7iC,IAG3B6iC,EAAkB5uC,UAAUiZ,WAAa,WACvC,OAAO5Z,KAAKiZ,UAGds2B,EAAkB5uC,UAAUmT,YAAc,WACxC,MAAO,CACLkG,WAAY,IAMhBu1B,EAAkB5uC,UAAUqwC,qBAAuB,WACjDhxC,KAAKwwC,sBAGPjB,EAAkB5uC,UAAU6vC,mBAAqB,WAC/CxwC,KAAKilB,QAELjlB,KAAK0vC,UAAU1jC,YAGjBujC,EAAkB5uC,UAAU8vC,YAAc,WACxCzwC,KAAK0vC,UAAU1jC,YAGjBujC,EAAkB5uC,UAAU+vC,aAAe,WACzC1wC,KAAK0vC,UAAUjyB,UAGjB8xB,EAAkB5uC,UAAUskB,MAAQ,WAC9BjlB,KAAK4vC,aAIT5vC,KAAK4vC,YAAa,EAClB5vC,KAAKiZ,SAAS4S,MAAMgkB,QAAU,UAGhCN,EAAkB5uC,UAAUgvC,MAAQ,WAC7B3vC,KAAK4vC,aAIV5vC,KAAK4vC,YAAa,EAClB5vC,KAAKiZ,SAAS4S,MAAMgkB,QAAU,SAGhCN,EAAkB5uC,UAAUgwC,YAAc,SAAU5gC,GAClD,IAAIkhC,EAAc,CAChBzD,wBAAyBz9B,EAAMG,SAAS,MAE1ClQ,KAAKgwC,cAAcnkB,MAAMolB,GACzBjxC,KAAKowC,WAAWvkB,MAAMolB,GACtBjxC,KAAKgmB,MAAM6F,MAAMolB,IAGnB1B,EAAkB7iC,GAAK,mCAChB6iC,EAxLT,CAyLE,MC1NF,SAAS2B,GAAqBC,EAAU5uC,GACtC,OAAiB,IAAb4uC,GAMa,IAAbA,GAMG5uC,EDgNT,YAA2B,SAAUwN,EAAOC,GAC1C,IAAIohC,EAAmBrhC,EAAMG,SAAS,KAElCkhC,GACFphC,EAAUG,QAAQ,yDAA2DihC,EAAmB,OAGlG,IAAIC,EAAoBthC,EAAMG,SAAS,MAEnCmhC,GACFrhC,EAAUG,QAAQ,6DAA+DkhC,EAAoB,OAGvG,IAAIC,EAAWvhC,EAAMG,SAAS,KAE1BohC,GACFthC,EAAUG,QAAQ,yDAA2DmhC,EAAW,SC7N5F,ICjBIC,GDiBA,GAEJ,WACE,SAASC,IACPxxC,KAAKyxC,cAAgB,GACrBzxC,KAAK0xC,eAAiB,GACtB1xC,KAAK2xC,aAAc,EACnB3xC,KAAK4xC,oBAAqB,EAC1B5xC,KAAK6xC,UAAW,EAChB7xC,KAAK8xC,iBAAmB,EAGxB9xC,KAAK+xC,YAAa,EAClB/xC,KAAKgyC,mBAAqB,EAG1BhyC,KAAKiyC,YAAa,EAClBjyC,KAAKkyC,mBAAqB,EAG1BlyC,KAAKmyC,aAAe,KACpBnyC,KAAKoyC,iBAAmB,EACxBpyC,KAAKqyC,cAAgB,EACrBryC,KAAKsyC,cAAgB,KACrBtyC,KAAKuyC,0BAA4B,IAAI,KA8QvC,OA3QAnyC,OAAOM,eAAe8wC,EAAiB7wC,UAAW,eAAgB,CAChEC,IAAK,WACH,OAAOZ,KAAKyxC,eAEd3wC,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAe8wC,EAAiB7wC,UAAW,gBAAiB,CACjEC,IAAK,WACH,OAAOZ,KAAK0xC,gBAEd5wC,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAe8wC,EAAiB7wC,UAAW,aAAc,CAC9DC,IAAK,WACH,OAAOZ,KAAK2xC,aAEd7wC,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAe8wC,EAAiB7wC,UAAW,oBAAqB,CACrEC,IAAK,WACH,OAAOZ,KAAK4xC,oBAEd9wC,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAe8wC,EAAiB7wC,UAAW,UAAW,CAC3DC,IAAK,WACH,OAAOswC,GAAqBlxC,KAAK8xC,iBAAkB9xC,KAAK6xC,WAE1D/wC,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAe8wC,EAAiB7wC,UAAW,YAAa,CAC7DC,IAAK,WACH,OAAOswC,GAAqBlxC,KAAKgyC,mBAAoBhyC,KAAK+xC,aAE5DjxC,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAe8wC,EAAiB7wC,UAAW,YAAa,CAC7DC,IAAK,WACH,OAAOswC,GAAqBlxC,KAAKkyC,mBAAoBlyC,KAAKiyC,aAE5DnxC,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAe8wC,EAAiB7wC,UAAW,gBAAiB,CACjEC,IAAK,WACH,OAAOZ,KAAK6xC,UAEd/wC,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAe8wC,EAAiB7wC,UAAW,kBAAmB,CACnEC,IAAK,WACH,OAAOZ,KAAK+xC,YAEdjxC,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAe8wC,EAAiB7wC,UAAW,kBAAmB,CACnEC,IAAK,WACH,OAAOZ,KAAKiyC,YAEdnxC,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAe8wC,EAAiB7wC,UAAW,cAAe,CAC/DC,IAAK,WACH,OAAOZ,KAAKmyC,cAEdrxC,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAe8wC,EAAiB7wC,UAAW,kBAAmB,CACnEC,IAAK,WACH,OAAOZ,KAAKoyC,kBAEdtxC,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAe8wC,EAAiB7wC,UAAW,eAAgB,CAChEC,IAAK,WACH,OAAOZ,KAAKqyC,eAEdvxC,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAe8wC,EAAiB7wC,UAAW,eAAgB,CAChEC,IAAK,WACH,OAAOZ,KAAKsyC,eAEdxxC,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAe8wC,EAAiB7wC,UAAW,2BAA4B,CAC5EC,IAAK,WACH,OAAOZ,KAAKuyC,0BAA0B1xC,OAExCC,YAAY,EACZC,cAAc,IAGhBywC,EAAiB7wC,UAAUc,QAAU,aAErC+vC,EAAiB7wC,UAAUupC,gBAAkB,SAAUO,EAAiBJ,EAAcmI,GACpF,IAAIC,EAAc,CAChB5I,YAAY,EACZ6I,eAAe,EACfpJ,cAAc,EACdyC,eAAe,EACfwE,YAAY,EACZhH,mBAAmB,EACnBC,SAAS,EACTC,WAAW,EACXC,WAAW,EACXL,aAAa,EACboB,iBAAiB,EACjBJ,cAAc,EACdmI,cAAc,GAEZlC,GAAmB,EAEF,IAAjBjG,IACFI,EAAkB,GAGhBA,EAAkBJ,IACpBI,EAAkBJ,GAGhBrqC,KAAKoyC,mBAAqB3H,IAC5BzqC,KAAKoyC,iBAAmB3H,EACxBgI,EAAYhI,iBAAkB,EAC9B6F,GAAmB,GAGjBtwC,KAAKqyC,gBAAkBhI,IACzBrqC,KAAKqyC,cAAgBhI,EACrBoI,EAAYpI,cAAe,EAC3BiG,GAAmB,GAGO,qBAAjBkC,IACJ,KAAMrP,YAAYnjC,KAAKsyC,cAAeE,KACzCxyC,KAAKsyC,cAAgBE,EACrBC,EAAYD,cAAe,EAC3BlC,GAAmB,IAInBA,GACFtwC,KAAKuyC,0BAA0BxwC,KAAK0wC,IAIxCjB,EAAiB7wC,UAAUwvC,OAAS,SAAU3vB,EAAUqpB,EAAY6I,QAC5C,IAAlBA,IACFA,GAAgB,GAGlB,IAAID,EAAc,CAChB5I,WAAYA,EACZ6I,cAAeA,EACfpJ,cAAc,EACdyC,eAAe,EACfwE,YAAY,EACZhH,mBAAmB,EACnBC,SAAS,EACTC,WAAW,EACXC,WAAW,EACXL,aAAa,EACboB,iBAAiB,EACjBJ,cAAc,EACdmI,cAAc,GAEZlC,GAAmB,EACnBqC,EAAsB3yC,KAAKwpC,QAC3BoJ,EAAyB5yC,KAAKypC,UAC9BoJ,EAAwB7yC,KAAK0pC,UAEI,qBAA1BlpB,EAAS8oB,cACdtpC,KAAKyxC,gBAAkBjxB,EAAS8oB,eAClCtpC,KAAKyxC,cAAgBjxB,EAAS8oB,aAC9BmJ,EAAYnJ,cAAe,EAC3BgH,GAAmB,GAIe,qBAA3B9vB,EAASurB,eACd/rC,KAAK0xC,iBAAmBlxB,EAASurB,gBACnC/rC,KAAK0xC,eAAiBlxB,EAASurB,cAC/B0G,EAAY1G,eAAgB,EAC5BuE,GAAmB,GAIY,qBAAxB9vB,EAAS+vB,YACdvwC,KAAK2xC,cAAgBnxB,EAAS+vB,aAChCvwC,KAAK2xC,YAAcnxB,EAAS+vB,WAC5BkC,EAAYlC,YAAa,EACzBD,GAAmB,GAImB,qBAA/B9vB,EAAS+oB,mBACdvpC,KAAK4xC,qBAAuBpxB,EAAS+oB,oBACvCvpC,KAAK4xC,mBAAqBpxB,EAAS+oB,kBACnCkJ,EAAYlJ,mBAAoB,EAChC+G,GAAmB,GAIS,qBAArB9vB,EAASgpB,UAClBxpC,KAAK6xC,SAAWrxB,EAASgpB,SAGO,qBAAvBhpB,EAASipB,YAClBzpC,KAAK+xC,WAAavxB,EAASipB,WAGK,qBAAvBjpB,EAASkpB,YAClB1pC,KAAKiyC,WAAazxB,EAASkpB,WAGO,qBAAzBlpB,EAAS6oB,cACb,KAAMlG,YAAYnjC,KAAKmyC,aAAc3xB,EAAS6oB,eACjDrpC,KAAKmyC,aAAe3xB,EAAS6oB,YAC7BoJ,EAAYpJ,aAAc,EAC1BiH,GAAmB,IAKvBtwC,KAAK8xC,iBAAuD,qBAA7BtxB,EAASsyB,gBAAkCtyB,EAASsyB,gBAAkB,EAGrG9yC,KAAKgyC,mBAA2D,qBAA/BxxB,EAASuyB,kBAAoCvyB,EAASuyB,kBAAoB,EAG3G/yC,KAAKkyC,mBAA2D,qBAA/B1xB,EAASwyB,kBAAoCxyB,EAASwyB,kBAAoB,EAIvGL,IAAwB3yC,KAAKwpC,UAC/B8G,GAAmB,EACnBmC,EAAYjJ,SAAU,GAGpBoJ,IAA2B5yC,KAAKypC,YAClC6G,GAAmB,EACnBmC,EAAYhJ,WAAY,GAGtBoJ,IAA0B7yC,KAAK0pC,YACjC4G,GAAmB,EACnBmC,EAAY/I,WAAY,GAGtB4G,GACFtwC,KAAKuyC,0BAA0BxwC,KAAK0wC,IAIjCjB,EApST,G,mBErBIyB,I,OAEJ,WACE,SAASA,EAAYC,GACnBlzC,KAAKmzC,QAAUD,EACflzC,KAAKozC,QAAU,EAOjB,OAJAH,EAAYtyC,UAAU0yC,OAAS,WAC7B,OAAOrzC,KAAKmzC,WAAYnzC,KAAKozC,SAGxBH,EAVT,IAcWK,GAAmB,IAAIL,GAAY,OCd1CM,GAEJ,WACE,SAASA,EAAehxC,QACR,IAAVA,IACFA,EAAQ,IAGVvC,KAAKuC,MAAQA,EAkBf,OAfAgxC,EAAe5yC,UAAU6yC,WAAa,SAAUjxC,GAG9C,OADAvC,KAAKuC,OAASA,EAAM41B,QAAQ,wBAAyB,QAC9Cn4B,MAGTuzC,EAAe5yC,UAAU8yC,gBAAkB,SAAUC,EAAQC,GAM3D,OALA3zC,KAAKuC,OAAS,QACdvC,KAAKuC,OAASmxC,EACd1zC,KAAKuC,OAAS,KACdvC,KAAKuC,OAASoxC,EACd3zC,KAAKuC,OAAS,UACPvC,MAGFuzC,EAxBT,GA4BO,SAASK,GAAsBC,GACpC,OAAIC,GAAiBD,IACXA,EAAUtxC,OACT8G,MAAM2T,QAAQ62B,IAChBA,EAAUE,MAAMH,IAKpB,SAASE,GAAiBE,GAC/B,OAAIA,aAAiBT,OAEVS,GAA0B,kBAAVA,KACK,kBAAhBA,EAAMzxC,QAAkD,mBAApByxC,EAAMC,gBAA+CjyC,IAApBgyC,EAAMC,YAmB7F,SAASC,GAAoB94B,EAAGlS,GAC9B,OAAIkS,IAAMlS,MAEEkS,IAAMlS,KAGTkS,EAAE7Y,QAAU2G,EAAE3G,OAAS6Y,EAAE64B,YAAc/qC,EAAE+qC,WAI7C,SAASE,GAAsBv7B,GACpC,OAAKA,EAIEA,EAAKuf,QAAQ,4BAA6B,MAHxCvf,GFtEX,SAAWw7B,GAMT,IAAIC,EAAQ,CACVC,QAAS,OACTX,KAAM,oBACNY,OAAQC,EACRC,GAAI,yDACJC,QAAS,6CACTC,QAASH,EACTI,WAAY,0CACZC,KAAM,oEACN/sC,KAAM,oZAUNc,IAAK,mFACLksC,MAAON,EACPO,SAAU,oCACVC,UAAW,4GACXp8B,KAAM,WAmDR,SAASq8B,EAAM9yC,GACbnC,KAAKk1C,OAAS,GACdl1C,KAAKk1C,OAAOC,MAAQ/0C,OAAOC,OAAO,MAClCL,KAAKmC,QAAUA,GAAWizC,EAAOzsB,SACjC3oB,KAAKq1C,MAAQhB,EAAMiB,OAEft1C,KAAKmC,QAAQozC,SACfv1C,KAAKq1C,MAAQhB,EAAMkB,SACVv1C,KAAKmC,QAAQqzC,MAClBx1C,KAAKmC,QAAQszC,OACfz1C,KAAKq1C,MAAQhB,EAAMoB,OAEnBz1C,KAAKq1C,MAAQhB,EAAMmB,KA7DzBnB,EAAMqB,OAAS,iCACfrB,EAAMsB,OAAS,+DACftB,EAAMzrC,IAAMif,EAAKwsB,EAAMzrC,KAAKuvB,QAAQ,QAASkc,EAAMqB,QAAQvd,QAAQ,QAASkc,EAAMsB,QAAQC,WAC1FvB,EAAMwB,OAAS,sBACfxB,EAAM9pB,KAAO,+CACb8pB,EAAM9pB,KAAO1C,EAAKwsB,EAAM9pB,KAAM,MAAM4N,QAAQ,QAASkc,EAAMwB,QAAQD,WACnEvB,EAAMQ,KAAOhtB,EAAKwsB,EAAMQ,MAAM1c,QAAQ,QAASkc,EAAMwB,QAAQ1d,QAAQ,KAAM,mEAAmEA,QAAQ,MAAO,UAAYkc,EAAMzrC,IAAI49B,OAAS,KAAKoP,WACjMvB,EAAMyB,KAAO,gWACbzB,EAAM0B,SAAW,yBACjB1B,EAAMvsC,KAAO+f,EAAKwsB,EAAMvsC,KAAM,KAAKqwB,QAAQ,UAAWkc,EAAM0B,UAAU5d,QAAQ,MAAOkc,EAAMyB,MAAM3d,QAAQ,YAAa,4EAA4Eyd,WAClMvB,EAAMW,UAAYntB,EAAKwsB,EAAMW,WAAW7c,QAAQ,KAAMkc,EAAMI,IAAItc,QAAQ,UAAWkc,EAAMK,SAASvc,QAAQ,WAAYkc,EAAMU,UAAU5c,QAAQ,MAAOkc,EAAMyB,MAC1JF,WACDvB,EAAMO,WAAa/sB,EAAKwsB,EAAMO,YAAYzc,QAAQ,YAAakc,EAAMW,WAAWY,WAKhFvB,EAAMiB,OAASU,EAAM,GAAI3B,GAKzBA,EAAMmB,IAAMQ,EAAM,GAAI3B,EAAMiB,OAAQ,CAClCf,OAAQ,iFACRS,UAAW,IACXN,QAAS,0CAEXL,EAAMmB,IAAIR,UAAYntB,EAAKwsB,EAAMW,WAAW7c,QAAQ,MAAO,MAAQkc,EAAMmB,IAAIjB,OAAO/N,OAAOrO,QAAQ,MAAO,OAAS,IAAMkc,EAAMQ,KAAKrO,OAAOrO,QAAQ,MAAO,OAAS,KAAKyd,WAKxKvB,EAAMoB,OAASO,EAAM,GAAI3B,EAAMmB,IAAK,CAClCb,QAAS,gFACTG,MAAO,0EAMTT,EAAMkB,SAAWS,EAAM,GAAI3B,EAAMiB,OAAQ,CACvCxtC,KAAM+f,EAAK,8IAC+DsQ,QAAQ,UAAWkc,EAAM0B,UAAU5d,QAAQ,OAAQ,qKAAoLyd,WACjThtC,IAAK,sEA2BPqsC,EAAMI,MAAQhB,EAKdY,EAAMgB,IAAM,SAAUC,EAAK/zC,GAEzB,OADY,IAAI8yC,EAAM9yC,GACT8zC,IAAIC,IAOnBjB,EAAMt0C,UAAUs1C,IAAM,SAAUC,GAE9B,OADAA,EAAMA,EAAI/d,QAAQ,WAAY,MAAMA,QAAQ,MAAO,QAAQA,QAAQ,UAAW,KAAKA,QAAQ,UAAW,MAC/Fn4B,KAAK6b,MAAMq6B,GAAK,IAOzBjB,EAAMt0C,UAAUkb,MAAQ,SAAUq6B,EAAKryB,GAErC,IAAI5C,EAAMk1B,EAAOC,EAAKC,EAAMntC,EAAGqhB,EAAM+rB,EAAWC,EAAW/0B,EAAGg1B,EAAOhoC,EAAGioC,EAAK7lB,EAAG8lB,EAAWC,EAAQC,EAEnG,IAHAV,EAAMA,EAAI/d,QAAQ,SAAU,IAGrB+d,GAaL,IAXIE,EAAMp2C,KAAKq1C,MAAMf,QAAQuC,KAAKX,MAChCA,EAAMA,EAAI10C,UAAU40C,EAAI,GAAG7pC,QAEvB6pC,EAAI,GAAG7pC,OAAS,GAClBvM,KAAKk1C,OAAO9mC,KAAK,CACf+L,KAAM,WAMRi8B,EAAMp2C,KAAKq1C,MAAM1B,KAAKkD,KAAKX,GAC7BA,EAAMA,EAAI10C,UAAU40C,EAAI,GAAG7pC,QAC3B6pC,EAAMA,EAAI,GAAGje,QAAQ,UAAW,IAChCn4B,KAAKk1C,OAAO9mC,KAAK,CACf+L,KAAM,OACNvB,KAAO5Y,KAAKmC,QAAQozC,SAA8Ba,EAAnBU,EAAMV,EAAK,aAM9C,GAAIA,EAAMp2C,KAAKq1C,MAAMd,OAAOsC,KAAKX,GAC/BA,EAAMA,EAAI10C,UAAU40C,EAAI,GAAG7pC,QAC3BvM,KAAKk1C,OAAO9mC,KAAK,CACf+L,KAAM,OACN48B,KAAMX,EAAI,GAAKA,EAAI,GAAGY,OAASZ,EAAI,GACnCx9B,KAAMw9B,EAAI,IAAM,UAMpB,GAAIA,EAAMp2C,KAAKq1C,MAAMX,QAAQmC,KAAKX,GAChCA,EAAMA,EAAI10C,UAAU40C,EAAI,GAAG7pC,QAC3BvM,KAAKk1C,OAAO9mC,KAAK,CACf+L,KAAM,UACN88B,MAAOb,EAAI,GAAG7pC,OACdqM,KAAMw9B,EAAI,UAMd,IAAIA,EAAMp2C,KAAKq1C,MAAMV,QAAQkC,KAAKX,MAChC3rB,EAAO,CACLpQ,KAAM,QACN+8B,OAAQC,EAAWf,EAAI,GAAGje,QAAQ,eAAgB,KAClDif,MAAOhB,EAAI,GAAGje,QAAQ,aAAc,IAAIkf,MAAM,UAC9CC,MAAOlB,EAAI,GAAKA,EAAI,GAAGje,QAAQ,MAAO,IAAIkf,MAAM,MAAQ,KAGjDH,OAAO3qC,SAAWge,EAAK6sB,MAAM7qC,OARxC,CAWI,IAFA2pC,EAAMA,EAAI10C,UAAU40C,EAAI,GAAG7pC,QAEtBiC,EAAI,EAAGA,EAAI+b,EAAK6sB,MAAM7qC,OAAQiC,IAC7B,YAAY8Q,KAAKiL,EAAK6sB,MAAM5oC,IAC9B+b,EAAK6sB,MAAM5oC,GAAK,QACP,aAAa8Q,KAAKiL,EAAK6sB,MAAM5oC,IACtC+b,EAAK6sB,MAAM5oC,GAAK,SACP,YAAY8Q,KAAKiL,EAAK6sB,MAAM5oC,IACrC+b,EAAK6sB,MAAM5oC,GAAK,OAEhB+b,EAAK6sB,MAAM5oC,GAAK,KAIpB,IAAKA,EAAI,EAAGA,EAAI+b,EAAK+sB,MAAM/qC,OAAQiC,IACjC+b,EAAK+sB,MAAM9oC,GAAK2oC,EAAW5sB,EAAK+sB,MAAM9oC,GAAI+b,EAAK2sB,OAAO3qC,QAGxDvM,KAAKk1C,OAAO9mC,KAAKmc,QAMrB,GAAI6rB,EAAMp2C,KAAKq1C,MAAMZ,GAAGoC,KAAKX,GAC3BA,EAAMA,EAAI10C,UAAU40C,EAAI,GAAG7pC,QAC3BvM,KAAKk1C,OAAO9mC,KAAK,CACf+L,KAAM,YAMV,GAAIi8B,EAAMp2C,KAAKq1C,MAAMT,WAAWiC,KAAKX,GACnCA,EAAMA,EAAI10C,UAAU40C,EAAI,GAAG7pC,QAC3BvM,KAAKk1C,OAAO9mC,KAAK,CACf+L,KAAM,qBAERi8B,EAAMA,EAAI,GAAGje,QAAQ,WAAY,IAIjCn4B,KAAK6b,MAAMu6B,EAAKvyB,GAChB7jB,KAAKk1C,OAAO9mC,KAAK,CACf+L,KAAM,wBAMV,GAAIi8B,EAAMp2C,KAAKq1C,MAAMR,KAAKgC,KAAKX,GAA/B,CAkBE,IAjBAA,EAAMA,EAAI10C,UAAU40C,EAAI,GAAG7pC,QAG3B+pC,EAAY,CACVn8B,KAAM,aACN6P,QAHF0sB,GADAL,EAAOD,EAAI,IACM7pC,OAAS,EAIxBgH,MAAOmjC,GAAaL,EAAO,GAC3BF,OAAO,GAETn2C,KAAKk1C,OAAO9mC,KAAKkoC,GAGjBC,EAAY,GACZt1B,GAAO,EACP2P,GAHAwlB,EAAMA,EAAI,GAAG5L,MAAMxqC,KAAKq1C,MAAM9qB,OAGtBhe,OACRiC,EAAI,EAEGA,EAAIoiB,EAAGpiB,IAIZgoC,GAHAjsB,EAAO6rB,EAAI5nC,IAGEjC,SACbge,EAAOA,EAAK4N,QAAQ,qBAAsB,KAGhC/N,QAAQ,SAChBosB,GAASjsB,EAAKhe,OACdge,EAAQvqB,KAAKmC,QAAQozC,SAAuEhrB,EAAK4N,QAAQ,YAAa,IAAtF5N,EAAK4N,QAAQ,IAAIjS,OAAO,QAAUswB,EAAQ,IAAK,MAAO,KAKpFhoC,IAAMoiB,EAAI,IACZ1nB,EAAImrC,EAAMwB,OAAOgB,KAAKT,EAAI5nC,EAAI,IAAI,IAE9B6nC,EAAK9pC,OAAS,EAAiB,IAAbrD,EAAEqD,OAAerD,EAAEqD,OAAS,GAAKvM,KAAKmC,QAAQo1C,YAAcruC,IAAMmtC,KACtFH,EAAME,EAAI9I,MAAM9+B,EAAI,GAAG+R,KAAK,MAAQ21B,EACpC1nC,EAAIoiB,EAAI,IAOZulB,EAAQl1B,GAAQ,eAAe3B,KAAKiL,GAEhC/b,IAAMoiB,EAAI,IACZ3P,EAAwC,OAAjCsJ,EAAKitB,OAAOjtB,EAAKhe,OAAS,GAC5B4pC,IAAOA,EAAQl1B,IAGlBk1B,IACFG,EAAUH,OAAQ,GAKpBS,OAAY50C,GADZ20C,EAAS,cAAcr3B,KAAKiL,MAI1BqsB,EAAwB,MAAZrsB,EAAK,GACjBA,EAAOA,EAAK4N,QAAQ,eAAgB,KAGtC3W,EAAI,CACFrH,KAAM,kBACNs9B,KAAMd,EACNpI,QAASqI,EACTT,MAAOA,GAETI,EAAUnoC,KAAKoT,GACfxhB,KAAKk1C,OAAO9mC,KAAKoT,GAEjBxhB,KAAK6b,MAAM0O,GAAM,GACjBvqB,KAAKk1C,OAAO9mC,KAAK,CACf+L,KAAM,kBAIV,GAAIm8B,EAAUH,MAIZ,IAHAvlB,EAAI2lB,EAAUhqC,OACdiC,EAAI,EAEGA,EAAIoiB,EAAGpiB,IACZ+nC,EAAU/nC,GAAG2nC,OAAQ,EAIzBn2C,KAAKk1C,OAAO9mC,KAAK,CACf+L,KAAM,kBAMV,GAAIi8B,EAAMp2C,KAAKq1C,MAAMvtC,KAAK+uC,KAAKX,GAC7BA,EAAMA,EAAI10C,UAAU40C,EAAI,GAAG7pC,QAC3BvM,KAAKk1C,OAAO9mC,KAAK,CACf+L,KAAMna,KAAKmC,QAAQu1C,SAAW,YAAc,OAC5CC,KAAM33C,KAAKmC,QAAQy1C,YAAyB,QAAXxB,EAAI,IAA2B,WAAXA,EAAI,IAA8B,UAAXA,EAAI,IAChFx9B,KAAMw9B,EAAI,UAMd,GAAIvyB,IAAQuyB,EAAMp2C,KAAKq1C,MAAMzsC,IAAIiuC,KAAKX,IACpCA,EAAMA,EAAI10C,UAAU40C,EAAI,GAAG7pC,QACvB6pC,EAAI,KAAIA,EAAI,GAAKA,EAAI,GAAG50C,UAAU,EAAG40C,EAAI,GAAG7pC,OAAS,IACzDkqC,EAAML,EAAI,GAAGptB,cAAcmP,QAAQ,OAAQ,KAEtCn4B,KAAKk1C,OAAOC,MAAMsB,KACrBz2C,KAAKk1C,OAAOC,MAAMsB,GAAO,CACvBoB,KAAMzB,EAAI,GACV5lC,MAAO4lC,EAAI,UAQjB,IAAIA,EAAMp2C,KAAKq1C,MAAMP,MAAM+B,KAAKX,MAC9B3rB,EAAO,CACLpQ,KAAM,QACN+8B,OAAQC,EAAWf,EAAI,GAAGje,QAAQ,eAAgB,KAClDif,MAAOhB,EAAI,GAAGje,QAAQ,aAAc,IAAIkf,MAAM,UAC9CC,MAAOlB,EAAI,GAAKA,EAAI,GAAGje,QAAQ,MAAO,IAAIkf,MAAM,MAAQ,KAGjDH,OAAO3qC,SAAWge,EAAK6sB,MAAM7qC,OARxC,CAWI,IAFA2pC,EAAMA,EAAI10C,UAAU40C,EAAI,GAAG7pC,QAEtBiC,EAAI,EAAGA,EAAI+b,EAAK6sB,MAAM7qC,OAAQiC,IAC7B,YAAY8Q,KAAKiL,EAAK6sB,MAAM5oC,IAC9B+b,EAAK6sB,MAAM5oC,GAAK,QACP,aAAa8Q,KAAKiL,EAAK6sB,MAAM5oC,IACtC+b,EAAK6sB,MAAM5oC,GAAK,SACP,YAAY8Q,KAAKiL,EAAK6sB,MAAM5oC,IACrC+b,EAAK6sB,MAAM5oC,GAAK,OAEhB+b,EAAK6sB,MAAM5oC,GAAK,KAIpB,IAAKA,EAAI,EAAGA,EAAI+b,EAAK+sB,MAAM/qC,OAAQiC,IACjC+b,EAAK+sB,MAAM9oC,GAAK2oC,EAAW5sB,EAAK+sB,MAAM9oC,GAAG2pB,QAAQ,mBAAoB,IAAK5N,EAAK2sB,OAAO3qC,QAGxFvM,KAAKk1C,OAAO9mC,KAAKmc,QAMrB,GAAI6rB,EAAMp2C,KAAKq1C,MAAMN,SAAS8B,KAAKX,GACjCA,EAAMA,EAAI10C,UAAU40C,EAAI,GAAG7pC,QAC3BvM,KAAKk1C,OAAO9mC,KAAK,CACf+L,KAAM,UACN88B,MAAkB,MAAXb,EAAI,GAAa,EAAI,EAC5Bx9B,KAAMw9B,EAAI,UAMd,GAAIvyB,IAAQuyB,EAAMp2C,KAAKq1C,MAAML,UAAU6B,KAAKX,IAC1CA,EAAMA,EAAI10C,UAAU40C,EAAI,GAAG7pC,QAC3BvM,KAAKk1C,OAAO9mC,KAAK,CACf+L,KAAM,YACNvB,KAA2C,OAArCw9B,EAAI,GAAGoB,OAAOpB,EAAI,GAAG7pC,OAAS,GAAc6pC,EAAI,GAAG9I,MAAM,GAAI,GAAK8I,EAAI,UAMhF,GAAIA,EAAMp2C,KAAKq1C,MAAMz8B,KAAKi+B,KAAKX,GAE7BA,EAAMA,EAAI10C,UAAU40C,EAAI,GAAG7pC,QAC3BvM,KAAKk1C,OAAO9mC,KAAK,CACf+L,KAAM,OACNvB,KAAMw9B,EAAI,UAKd,GAAIF,EACF,MAAM,IAAI4B,MAAM,0BAA4B5B,EAAIziC,WAAW,IAI/D,OAAOzT,KAAKk1C,QAOd,IAAI6C,EAAS,CACXC,OAAQ,+CACRC,SAAU,sCACVC,IAAK1D,EACLiC,IAAK,2JAMLjqB,KAAM,2CACN2rB,QAAS,wDACTC,OAAQ,gEACRC,OAAQ,gHACRC,GAAI,mNACJ3E,KAAM,sCACN4E,GAAI,wBACJC,IAAKhE,EACL57B,KAAM,8EAyDR,SAAS6/B,EAAYtD,EAAOhzC,GAO1B,GANAnC,KAAKmC,QAAUA,GAAWizC,EAAOzsB,SACjC3oB,KAAKm1C,MAAQA,EACbn1C,KAAKq1C,MAAQ0C,EAAOzC,OACpBt1C,KAAK04C,SAAW14C,KAAKmC,QAAQu2C,UAAY,IAAIC,EAC7C34C,KAAK04C,SAASv2C,QAAUnC,KAAKmC,SAExBnC,KAAKm1C,MACR,MAAM,IAAI2C,MAAM,6CAGd93C,KAAKmC,QAAQozC,SACfv1C,KAAKq1C,MAAQ0C,EAAOxC,SACXv1C,KAAKmC,QAAQqzC,MAClBx1C,KAAKmC,QAAQy2C,OACf54C,KAAKq1C,MAAQ0C,EAAOa,OAEpB54C,KAAKq1C,MAAQ0C,EAAOvC,KA8Q1B,SAASmD,EAASx2C,GAChBnC,KAAKmC,QAAUA,GAAWizC,EAAOzsB,SA4InC,SAASkwB,KAmBT,SAASC,EAAO32C,GACdnC,KAAKk1C,OAAS,GACdl1C,KAAK6b,MAAQ,KACb7b,KAAKmC,QAAUA,GAAWizC,EAAOzsB,SACjC3oB,KAAKmC,QAAQu2C,SAAW14C,KAAKmC,QAAQu2C,UAAY,IAAIC,EACrD34C,KAAK04C,SAAW14C,KAAKmC,QAAQu2C,SAC7B14C,KAAK04C,SAASv2C,QAAUnC,KAAKmC,QAC7BnC,KAAK+4C,QAAU,IAAIC,EAwMrB,SAASA,IACPh5C,KAAKi5C,KAAO,GA2Bd,SAASjB,EAAOlwC,EAAMoxC,GACpB,GAAIA,GACF,GAAIlB,EAAOmB,WAAW75B,KAAKxX,GACzB,OAAOA,EAAKqwB,QAAQ6f,EAAOoB,cAAe,SAAUC,GAClD,OAAOrB,EAAOsB,aAAaD,UAI/B,GAAIrB,EAAOuB,mBAAmBj6B,KAAKxX,GACjC,OAAOA,EAAKqwB,QAAQ6f,EAAOwB,sBAAuB,SAAUH,GAC1D,OAAOrB,EAAOsB,aAAaD,KAKjC,OAAOvxC,EAeT,SAAS2xC,EAAS3xC,GAEhB,OAAOA,EAAKqwB,QAAQ,6CAA8C,SAAUzW,EAAGO,GAE7E,MAAU,WADVA,EAAIA,EAAE+G,eACoB,IAEN,MAAhB/G,EAAEu1B,OAAO,GACY,MAAhBv1B,EAAEu1B,OAAO,GAAanrB,OAAOqtB,aAAaC,SAAS13B,EAAEzgB,UAAU,GAAI,KAAO6qB,OAAOqtB,cAAcz3B,EAAEzgB,UAAU,IAG7G,KAIX,SAASqmB,EAAK7B,EAAO4zB,GAGnB,OAFA5zB,EAAQA,EAAMwgB,QAAUxgB,EACxB4zB,EAAMA,GAAO,GACN,CACLzhB,QAAS,SAAiB/O,EAAM+J,GAI9B,OAFAA,GADAA,EAAMA,EAAIqT,QAAUrT,GACVgF,QAAQ,eAAgB,MAClCnS,EAAQA,EAAMmS,QAAQ/O,EAAM+J,GACrBnzB,MAET41C,SAAU,WACR,OAAO,IAAI1vB,OAAOF,EAAO4zB,KAK/B,SAASC,EAASnC,EAAUoC,EAAMjC,GAChC,GAAIH,EAAU,CACZ,IACE,IAAIqC,EAAOC,mBAAmBP,EAAS5B,IAAO1f,QAAQ,UAAW,IAAInP,cACrE,MAAO9c,GACP,OAAO,KAGT,GAAoC,IAAhC6tC,EAAK3vB,QAAQ,gBAAsD,IAA9B2vB,EAAK3vB,QAAQ,cAAgD,IAA1B2vB,EAAK3vB,QAAQ,SACvF,OAAO,KAIP0vB,IAASG,EAAqB36B,KAAKu4B,KACrCA,EAYJ,SAAoBiC,EAAMjC,GACnBqC,EAAS,IAAMJ,KAId,oBAAmBx6B,KAAKw6B,GAC1BI,EAAS,IAAMJ,GAAQA,EAAO,IAE9BI,EAAS,IAAMJ,GAAQhD,EAAMgD,EAAM,KAAK,IAM5C,OAFAA,EAAOI,EAAS,IAAMJ,GAEG,OAArBjC,EAAKvK,MAAM,EAAG,GACTwM,EAAK3hB,QAAQ,WAAY,KAAO0f,EACX,MAAnBA,EAAKL,OAAO,GACdsC,EAAK3hB,QAAQ,sBAAsB,MAAQ0f,EAE3CiC,EAAOjC,EA/BPsC,CAAWL,EAAMjC,IAG1B,IACEA,EAAOuC,UAAUvC,GAAM1f,QAAQ,OAAQ,KACvC,MAAOjsB,GACP,OAAO,KAGT,OAAO2rC,EAlzBTE,EAAOsC,aAAe,qCACtBtC,EAAOO,GAAKzwB,EAAKkwB,EAAOO,IAAIngB,QAAQ,eAAgB4f,EAAOsC,cAAczE,WACzEmC,EAAOuC,SAAW,+CAClBvC,EAAOwC,QAAU,+BACjBxC,EAAOyC,OAAS,gJAChBzC,EAAOE,SAAWpwB,EAAKkwB,EAAOE,UAAU9f,QAAQ,SAAU4f,EAAOwC,SAASpiB,QAAQ,QAAS4f,EAAOyC,QAAQ5E,WAC1GmC,EAAO0C,WAAa,8EACpB1C,EAAOtB,IAAM5uB,EAAKkwB,EAAOtB,KAAKte,QAAQ,UAAWkc,EAAM0B,UAAU5d,QAAQ,YAAa4f,EAAO0C,YAAY7E,WACzGmC,EAAOrC,OAAS,yDAChBqC,EAAO2C,MAAQ,gDACf3C,EAAOpC,OAAS,8DAChBoC,EAAOvrB,KAAO3E,EAAKkwB,EAAOvrB,MAAM2L,QAAQ,QAAS4f,EAAOrC,QAAQvd,QAAQ,OAAQ4f,EAAO2C,OAAOviB,QAAQ,QAAS4f,EAAOpC,QAAQC,WAC9HmC,EAAOI,QAAUtwB,EAAKkwB,EAAOI,SAAShgB,QAAQ,QAAS4f,EAAOrC,QAAQE,WAKtEmC,EAAOzC,OAASU,EAAM,GAAI+B,GAK1BA,EAAOxC,SAAWS,EAAM,GAAI+B,EAAOzC,OAAQ,CACzC+C,OAAQ,iEACRC,GAAI,2DACJ9rB,KAAM3E,EAAK,2BAA2BsQ,QAAQ,QAAS4f,EAAOrC,QAAQE,WACtEuC,QAAStwB,EAAK,iCAAiCsQ,QAAQ,QAAS4f,EAAOrC,QAAQE,aAMjFmC,EAAOvC,IAAMQ,EAAM,GAAI+B,EAAOzC,OAAQ,CACpC0C,OAAQnwB,EAAKkwB,EAAOC,QAAQ7f,QAAQ,KAAM,QAAQyd,WAClD+E,gBAAiB,4EACjBzC,IAAK,mEACL0C,WAAY,yEACZpC,IAAK,0BACL5/B,KAAM,sNAERm/B,EAAOvC,IAAI0C,IAAMrwB,EAAKkwB,EAAOvC,IAAI0C,IAAK,KAAK/f,QAAQ,QAAS4f,EAAOvC,IAAImF,iBAAiB/E,WAKxFmC,EAAOa,OAAS5C,EAAM,GAAI+B,EAAOvC,IAAK,CACpC+C,GAAI1wB,EAAKkwB,EAAOQ,IAAIpgB,QAAQ,OAAQ,KAAKyd,WACzCh9B,KAAMiP,EAAKkwB,EAAOvC,IAAI58B,MAAMuf,QAAQ,UAAW,KAAKyd,aAgCtD6C,EAAYpD,MAAQ0C,EAKpBU,EAAYoC,OAAS,SAAU3E,EAAKf,EAAOhzC,GAEzC,OADa,IAAIs2C,EAAYtD,EAAOhzC,GACtB04C,OAAO3E,IAOvBuC,EAAY93C,UAAUk6C,OAAS,SAAU3E,GASvC,IARA,IACI1pB,EACA5T,EACAi/B,EACArnC,EACA4lC,EACA0E,EANAC,EAAM,GAQH7E,GAEL,GAAIE,EAAMp2C,KAAKq1C,MAAM2C,OAAOnB,KAAKX,GAC/BA,EAAMA,EAAI10C,UAAU40C,EAAI,GAAG7pC,QAC3BwuC,GAAO/C,EAAO5B,EAAI,SAKpB,GAAIA,EAAMp2C,KAAKq1C,MAAMoB,IAAII,KAAKX,IACvBl2C,KAAKg7C,QAAU,QAAQ17B,KAAK82B,EAAI,IACnCp2C,KAAKg7C,QAAS,EACLh7C,KAAKg7C,QAAU,UAAU17B,KAAK82B,EAAI,MAC3Cp2C,KAAKg7C,QAAS,IAGXh7C,KAAKi7C,YAAc,iCAAiC37B,KAAK82B,EAAI,IAChEp2C,KAAKi7C,YAAa,EACTj7C,KAAKi7C,YAAc,mCAAmC37B,KAAK82B,EAAI,MACxEp2C,KAAKi7C,YAAa,GAGpB/E,EAAMA,EAAI10C,UAAU40C,EAAI,GAAG7pC,QAC3BwuC,GAAO/6C,KAAKmC,QAAQu1C,SAAW13C,KAAKmC,QAAQy1C,UAAY53C,KAAKmC,QAAQy1C,UAAUxB,EAAI,IAAM4B,EAAO5B,EAAI,IAAMA,EAAI,QAKhH,GAAIA,EAAMp2C,KAAKq1C,MAAM7oB,KAAKqqB,KAAKX,GAA/B,CACE,IAAIgF,EAAiBC,EAAmB/E,EAAI,GAAI,MAEhD,GAAI8E,GAAkB,EAAG,CACvB,IAAIE,EAAUhF,EAAI,GAAG7pC,QAAU6pC,EAAI,GAAG7pC,OAAS2uC,IAAmB9E,EAAI,IAAM,IAAI7pC,OAChF6pC,EAAI,GAAKA,EAAI,GAAG50C,UAAU,EAAG05C,GAC7B9E,EAAI,GAAKA,EAAI,GAAG50C,UAAU,EAAG45C,GAASpE,OACtCZ,EAAI,GAAK,GAGXF,EAAMA,EAAI10C,UAAU40C,EAAI,GAAG7pC,QAC3BvM,KAAKg7C,QAAS,EACdnD,EAAOzB,EAAI,GAEPp2C,KAAKmC,QAAQozC,UACf/oB,EAAO,gCAAgCqqB,KAAKgB,KAG1CA,EAAOrrB,EAAK,GACZhc,EAAQgc,EAAK,IAEbhc,EAAQ,GAGVA,EAAQ4lC,EAAI,GAAKA,EAAI,GAAG9I,MAAM,GAAI,GAAK,GAGzCuK,EAAOA,EAAKb,OAAO7e,QAAQ,gBAAiB,MAC5C4iB,GAAO/6C,KAAKq7C,WAAWjF,EAAK,CAC1ByB,KAAMY,EAAY6C,QAAQzD,GAC1BrnC,MAAOioC,EAAY6C,QAAQ9qC,KAE7BxQ,KAAKg7C,QAAS,OAKhB,IAAK5E,EAAMp2C,KAAKq1C,MAAM8C,QAAQtB,KAAKX,MAAUE,EAAMp2C,KAAKq1C,MAAM+C,OAAOvB,KAAKX,IAA1E,CAKE,GAJAA,EAAMA,EAAI10C,UAAU40C,EAAI,GAAG7pC,QAC3BigB,GAAQ4pB,EAAI,IAAMA,EAAI,IAAIje,QAAQ,OAAQ,OAC1C3L,EAAOxsB,KAAKm1C,MAAM3oB,EAAKxD,kBAETwD,EAAKqrB,KAAM,CACvBkD,GAAO3E,EAAI,GAAGoB,OAAO,GACrBtB,EAAME,EAAI,GAAG50C,UAAU,GAAK00C,EAC5B,SAGFl2C,KAAKg7C,QAAS,EACdD,GAAO/6C,KAAKq7C,WAAWjF,EAAK5pB,GAC5BxsB,KAAKg7C,QAAS,OAKhB,GAAI5E,EAAMp2C,KAAKq1C,MAAMgD,OAAOxB,KAAKX,GAC/BA,EAAMA,EAAI10C,UAAU40C,EAAI,GAAG7pC,QAC3BwuC,GAAO/6C,KAAK04C,SAASL,OAAOr4C,KAAK66C,OAAOzE,EAAI,IAAMA,EAAI,IAAMA,EAAI,IAAMA,EAAI,UAK5E,GAAIA,EAAMp2C,KAAKq1C,MAAMiD,GAAGzB,KAAKX,GAC3BA,EAAMA,EAAI10C,UAAU40C,EAAI,GAAG7pC,QAC3BwuC,GAAO/6C,KAAK04C,SAASJ,GAAGt4C,KAAK66C,OAAOzE,EAAI,IAAMA,EAAI,IAAMA,EAAI,IAAMA,EAAI,IAAMA,EAAI,IAAMA,EAAI,UAK5F,GAAIA,EAAMp2C,KAAKq1C,MAAM1B,KAAKkD,KAAKX,GAC7BA,EAAMA,EAAI10C,UAAU40C,EAAI,GAAG7pC,QAC3BwuC,GAAO/6C,KAAK04C,SAAS6C,SAASvD,EAAO5B,EAAI,GAAGY,QAAQ,SAKtD,GAAIZ,EAAMp2C,KAAKq1C,MAAMkD,GAAG1B,KAAKX,GAC3BA,EAAMA,EAAI10C,UAAU40C,EAAI,GAAG7pC,QAC3BwuC,GAAO/6C,KAAK04C,SAASH,UAKvB,GAAInC,EAAMp2C,KAAKq1C,MAAMmD,IAAI3B,KAAKX,GAC5BA,EAAMA,EAAI10C,UAAU40C,EAAI,GAAG7pC,QAC3BwuC,GAAO/6C,KAAK04C,SAASF,IAAIx4C,KAAK66C,OAAOzE,EAAI,UAK3C,GAAIA,EAAMp2C,KAAKq1C,MAAM4C,SAASpB,KAAKX,GACjCA,EAAMA,EAAI10C,UAAU40C,EAAI,GAAG7pC,QAIzBsrC,EAFa,MAAXzB,EAAI,GAEC,WADPx9B,EAAOo/B,EAAOh4C,KAAKw7C,OAAOpF,EAAI,MAG9Bx9B,EAAOo/B,EAAO5B,EAAI,IAIpB2E,GAAO/6C,KAAK04C,SAASlsB,KAAKqrB,EAAM,KAAMj/B,QAKxC,GAAK5Y,KAAKg7C,UAAW5E,EAAMp2C,KAAKq1C,MAAM6C,IAAIrB,KAAKX,KA0B/C,GAAIE,EAAMp2C,KAAKq1C,MAAMz8B,KAAKi+B,KAAKX,GAC7BA,EAAMA,EAAI10C,UAAU40C,EAAI,GAAG7pC,QAEvBvM,KAAKi7C,WACPF,GAAO/6C,KAAK04C,SAAS9/B,KAAKw9B,EAAI,IAE9B2E,GAAO/6C,KAAK04C,SAAS9/B,KAAKo/B,EAAOh4C,KAAKy7C,YAAYrF,EAAI,WAM1D,GAAIF,EACF,MAAM,IAAI4B,MAAM,0BAA4B5B,EAAIziC,WAAW,QAvC7D,CACE,GAAe,MAAX2iC,EAAI,GAENyB,EAAO,WADPj/B,EAAOo/B,EAAO5B,EAAI,SAEb,CAEL,GACE0E,EAAc1E,EAAI,GAClBA,EAAI,GAAKp2C,KAAKq1C,MAAMuF,WAAW/D,KAAKT,EAAI,IAAI,SACrC0E,IAAgB1E,EAAI,IAE7Bx9B,EAAOo/B,EAAO5B,EAAI,IAGhByB,EADa,SAAXzB,EAAI,GACC,UAAYx9B,EAEZA,EAIXs9B,EAAMA,EAAI10C,UAAU40C,EAAI,GAAG7pC,QAC3BwuC,GAAO/6C,KAAK04C,SAASlsB,KAAKqrB,EAAM,KAAMj/B,GAsB1C,OAAOmiC,GAGTtC,EAAY6C,QAAU,SAAU1iC,GAC9B,OAAOA,EAAOA,EAAKuf,QAAQsgB,EAAYpD,MAAMiF,SAAU,MAAQ1hC,GAOjE6/B,EAAY93C,UAAU06C,WAAa,SAAUjF,EAAK5pB,GAChD,IAAIqrB,EAAOrrB,EAAKqrB,KACZrnC,EAAQgc,EAAKhc,MAAQwnC,EAAOxrB,EAAKhc,OAAS,KAC9C,MAA4B,MAArB4lC,EAAI,GAAGoB,OAAO,GAAax3C,KAAK04C,SAASlsB,KAAKqrB,EAAMrnC,EAAOxQ,KAAK66C,OAAOzE,EAAI,KAAOp2C,KAAK04C,SAASgD,MAAM7D,EAAMrnC,EAAOwnC,EAAO5B,EAAI,MAOvIqC,EAAY93C,UAAU86C,YAAc,SAAU7iC,GAC5C,OAAK5Y,KAAKmC,QAAQs5C,YACX7iC,EACNuf,QAAQ,OAAQ,UAChBA,QAAQ,MAAO,UACfA,QAAQ,2BAA2B,YACnCA,QAAQ,KAAM,UACdA,QAAQ,gCAAgC,YACxCA,QAAQ,KAAM,UACdA,QAAQ,SAAU,UARmBvf,GAexC6/B,EAAY93C,UAAU66C,OAAS,SAAU5iC,GACvC,IAAK5Y,KAAKmC,QAAQq5C,OAAQ,OAAO5iC,EAMjC,IALA,IAGIygC,EAHA0B,EAAM,GACNnqB,EAAIhY,EAAKrM,OACTiC,EAAI,EAGDA,EAAIoiB,EAAGpiB,IACZ6qC,EAAKzgC,EAAKnF,WAAWjF,GAEjBnN,KAAKC,SAAW,KAClB+3C,EAAK,IAAMA,EAAG93C,SAAS,KAGzBw5C,GAAO,KAAO1B,EAAK,IAGrB,OAAO0B,GAWTpC,EAASh4C,UAAUgzC,KAAO,SAAUA,EAAMgI,EAAYC,GACpD,IAAI7E,GAAQ4E,GAAc,IAAInR,MAAM,OAAO,GAE3C,GAAIxqC,KAAKmC,QAAQ05C,UAAW,CAC1B,IAAId,EAAM/6C,KAAKmC,QAAQ05C,UAAUlI,EAAMoD,GAE5B,MAAPgE,GAAeA,IAAQpH,IACzBiI,GAAU,EACVjI,EAAOoH,GAIX,OAAKhE,EAIE,qBAAuB/2C,KAAKmC,QAAQ25C,WAAa9D,EAAOjB,GAAM,GAAQ,MAAQ6E,EAAUjI,EAAOqE,EAAOrE,GAAM,IAAS,kBAHnH,eAAiBiI,EAAUjI,EAAOqE,EAAOrE,GAAM,IAAS,iBAMnEgF,EAASh4C,UAAUi0C,WAAa,SAAUmH,GACxC,MAAO,iBAAmBA,EAAQ,mBAGpCpD,EAASh4C,UAAUmH,KAAO,SAAUA,GAClC,OAAOA,GAGT6wC,EAASh4C,UAAU+zC,QAAU,SAAU97B,EAAMojC,EAAOC,EAAKlD,GACvD,OAAI/4C,KAAKmC,QAAQ+5C,UACR,KAAOF,EAAQ,QAAUh8C,KAAKmC,QAAQg6C,aAAepD,EAAQqD,KAAKH,GAAO,KAAOrjC,EAAO,MAAQojC,EAAQ,MAIzG,KAAOA,EAAQ,IAAMpjC,EAAO,MAAQojC,EAAQ,OAGrDrD,EAASh4C,UAAU8zC,GAAK,WACtB,OAAOz0C,KAAKmC,QAAQk6C,MAAQ,UAAY,UAG1C1D,EAASh4C,UAAUk0C,KAAO,SAAUxzB,EAAM2I,EAASzW,GACjD,IAAI4G,EAAO6P,EAAU,KAAO,KAE5B,MAAO,IAAM7P,GADE6P,GAAqB,IAAVzW,EAAc,WAAaA,EAAQ,IAAM,IACpC,MAAQ8N,EAAO,KAAOlH,EAAO,OAG9Dw+B,EAASh4C,UAAU27C,SAAW,SAAU1jC,GACtC,MAAO,OAASA,EAAO,WAGzB+/B,EAASh4C,UAAU47C,SAAW,SAAUhO,GACtC,MAAO,WAAaA,EAAU,cAAgB,IAAM,+BAAiCvuC,KAAKmC,QAAQk6C,MAAQ,KAAO,IAAM,MAGzH1D,EAASh4C,UAAUq0C,UAAY,SAAUp8B,GACvC,MAAO,MAAQA,EAAO,UAGxB+/B,EAASh4C,UAAUm0C,MAAQ,SAAUoC,EAAQ71B,GAE3C,OADIA,IAAMA,EAAO,UAAYA,EAAO,YAC7B,qBAA4B61B,EAAS,aAAe71B,EAAO,cAGpEs3B,EAASh4C,UAAU67C,SAAW,SAAUt7C,GACtC,MAAO,SAAWA,EAAU,WAG9By3C,EAASh4C,UAAU87C,UAAY,SAAUv7C,EAASw7C,GAChD,IAAIviC,EAAOuiC,EAAMxF,OAAS,KAAO,KAEjC,OADUwF,EAAMtF,MAAQ,IAAMj9B,EAAO,WAAauiC,EAAMtF,MAAQ,KAAO,IAAMj9B,EAAO,KACvEjZ,EAAU,KAAOiZ,EAAO,OAIvCw+B,EAASh4C,UAAU03C,OAAS,SAAUz/B,GACpC,MAAO,WAAaA,EAAO,aAG7B+/B,EAASh4C,UAAU23C,GAAK,SAAU1/B,GAChC,MAAO,OAASA,EAAO,SAGzB+/B,EAASh4C,UAAU46C,SAAW,SAAU3iC,GACtC,MAAO,SAAWA,EAAO,WAG3B+/B,EAASh4C,UAAU43C,GAAK,WACtB,OAAOv4C,KAAKmC,QAAQk6C,MAAQ,QAAU,QAGxC1D,EAASh4C,UAAU63C,IAAM,SAAU5/B,GACjC,MAAO,QAAUA,EAAO,UAG1B+/B,EAASh4C,UAAU6rB,KAAO,SAAUqrB,EAAMrnC,EAAOoI,GAG/C,GAAa,QAFbi/B,EAAOgC,EAAS75C,KAAKmC,QAAQu1C,SAAU13C,KAAKmC,QAAQw6C,QAAS9E,IAG3D,OAAOj/B,EAGT,IAAImiC,EAAM,YAAc/C,EAAOH,GAAQ,IAOvC,OALIrnC,IACFuqC,GAAO,WAAavqC,EAAQ,KAG9BuqC,GAAO,IAAMniC,EAAO,QAItB+/B,EAASh4C,UAAU+6C,MAAQ,SAAU7D,EAAMrnC,EAAOoI,GAGhD,GAAa,QAFbi/B,EAAOgC,EAAS75C,KAAKmC,QAAQu1C,SAAU13C,KAAKmC,QAAQw6C,QAAS9E,IAG3D,OAAOj/B,EAGT,IAAImiC,EAAM,aAAelD,EAAO,UAAYj/B,EAAO,IAOnD,OALIpI,IACFuqC,GAAO,WAAavqC,EAAQ,KAG9BuqC,GAAO/6C,KAAKmC,QAAQk6C,MAAQ,KAAO,KAIrC1D,EAASh4C,UAAUiY,KAAO,SAAUA,GAClC,OAAOA,GAWTigC,EAAal4C,UAAU03C,OAASQ,EAAal4C,UAAU23C,GAAKO,EAAal4C,UAAU46C,SAAW1C,EAAal4C,UAAU63C,IAAMK,EAAal4C,UAAUiY,KAAO,SAAUA,GACjK,OAAOA,GAGTigC,EAAal4C,UAAU6rB,KAAOqsB,EAAal4C,UAAU+6C,MAAQ,SAAU7D,EAAMrnC,EAAOoI,GAClF,MAAO,GAAKA,GAGdigC,EAAal4C,UAAU43C,GAAK,WAC1B,MAAO,IAqBTO,EAAO8D,MAAQ,SAAU1G,EAAK/zC,GAE5B,OADa,IAAI22C,EAAO32C,GACVy6C,MAAM1G,IAOtB4C,EAAOn4C,UAAUi8C,MAAQ,SAAU1G,GACjCl2C,KAAK+3C,OAAS,IAAIU,EAAYvC,EAAIf,MAAOn1C,KAAKmC,SAE9CnC,KAAK68C,WAAa,IAAIpE,EAAYvC,EAAIf,MAAOa,EAAM,GAAIh2C,KAAKmC,QAAS,CACnEu2C,SAAU,IAAIG,KAEhB74C,KAAKk1C,OAASgB,EAAIziB,UAGlB,IAFA,IAAIsnB,EAAM,GAEH/6C,KAAKihB,QACV85B,GAAO/6C,KAAK88C,MAGd,OAAO/B,GAOTjC,EAAOn4C,UAAUsgB,KAAO,WACtB,OAAOjhB,KAAK6b,MAAQ7b,KAAKk1C,OAAO7yB,OAOlCy2B,EAAOn4C,UAAUo8C,KAAO,WACtB,OAAO/8C,KAAKk1C,OAAOl1C,KAAKk1C,OAAO3oC,OAAS,IAAM,GAOhDusC,EAAOn4C,UAAUq8C,UAAY,WAG3B,IAFA,IAAI37B,EAAOrhB,KAAK6b,MAAMjD,KAEM,SAArB5Y,KAAK+8C,OAAO5iC,MACjBkH,GAAQ,KAAOrhB,KAAKihB,OAAOrI,KAG7B,OAAO5Y,KAAK+3C,OAAO8C,OAAOx5B,IAO5By3B,EAAOn4C,UAAUm8C,IAAM,WACrB,OAAQ98C,KAAK6b,MAAM1B,MACjB,IAAK,QAED,MAAO,GAGX,IAAK,KAED,OAAOna,KAAK04C,SAASjE,KAGzB,IAAK,UAED,OAAOz0C,KAAK04C,SAAShE,QAAQ10C,KAAK+3C,OAAO8C,OAAO76C,KAAK6b,MAAMjD,MAAO5Y,KAAK6b,MAAMo7B,MAAOwC,EAASz5C,KAAK68C,WAAWhC,OAAO76C,KAAK6b,MAAMjD,OAAQ5Y,KAAK+4C,SAGhJ,IAAK,OAED,OAAO/4C,KAAK04C,SAAS/E,KAAK3zC,KAAK6b,MAAMjD,KAAM5Y,KAAK6b,MAAMk7B,KAAM/2C,KAAK6b,MAAM+/B,SAG3E,IAAK,QAED,IAEIptC,EACAyuC,EACAC,EACA5hB,EALA4b,EAAS,GACT71B,EAAO,GAQX,IAFA67B,EAAO,GAEF1uC,EAAI,EAAGA,EAAIxO,KAAK6b,MAAMq7B,OAAO3qC,OAAQiC,IACxC0uC,GAAQl9C,KAAK04C,SAAS+D,UAAUz8C,KAAK+3C,OAAO8C,OAAO76C,KAAK6b,MAAMq7B,OAAO1oC,IAAK,CACxE0oC,QAAQ,EACRE,MAAOp3C,KAAK6b,MAAMu7B,MAAM5oC,KAM5B,IAFA0oC,GAAUl3C,KAAK04C,SAAS8D,SAASU,GAE5B1uC,EAAI,EAAGA,EAAIxO,KAAK6b,MAAMy7B,MAAM/qC,OAAQiC,IAAK,CAI5C,IAHAyuC,EAAMj9C,KAAK6b,MAAMy7B,MAAM9oC,GACvB0uC,EAAO,GAEF5hB,EAAI,EAAGA,EAAI2hB,EAAI1wC,OAAQ+uB,IAC1B4hB,GAAQl9C,KAAK04C,SAAS+D,UAAUz8C,KAAK+3C,OAAO8C,OAAOoC,EAAI3hB,IAAK,CAC1D4b,QAAQ,EACRE,MAAOp3C,KAAK6b,MAAMu7B,MAAM9b,KAI5Bja,GAAQrhB,KAAK04C,SAAS8D,SAASU,GAGjC,OAAOl9C,KAAK04C,SAAS5D,MAAMoC,EAAQ71B,GAGvC,IAAK,mBAID,IAFAA,EAAO,GAEqB,mBAArBrhB,KAAKihB,OAAO9G,MACjBkH,GAAQrhB,KAAK88C,MAGf,OAAO98C,KAAK04C,SAAS9D,WAAWvzB,GAGpC,IAAK,aAEDA,EAAO,GAIP,IAHA,IAAI2I,EAAUhqB,KAAK6b,MAAMmO,QACrBzW,EAAQvT,KAAK6b,MAAMtI,MAEK,aAArBvT,KAAKihB,OAAO9G,MACjBkH,GAAQrhB,KAAK88C,MAGf,OAAO98C,KAAK04C,SAAS7D,KAAKxzB,EAAM2I,EAASzW,GAG7C,IAAK,kBAED8N,EAAO,GACP,IAAI80B,EAAQn2C,KAAK6b,MAAMs6B,MACnB5H,EAAUvuC,KAAK6b,MAAM0yB,QACrBkJ,EAAOz3C,KAAK6b,MAAM47B,KAMtB,IAJIz3C,KAAK6b,MAAM47B,OACbp2B,GAAQrhB,KAAK04C,SAAS6D,SAAShO,IAGL,kBAArBvuC,KAAKihB,OAAO9G,MACjBkH,GAAS80B,GAA6B,SAApBn2C,KAAK6b,MAAM1B,KAAqCna,KAAK88C,MAAxB98C,KAAKg9C,YAGtD,OAAOh9C,KAAK04C,SAAS4D,SAASj7B,EAAMo2B,EAAMlJ,GAG9C,IAAK,OAGD,OAAOvuC,KAAK04C,SAAS5wC,KAAK9H,KAAK6b,MAAMjD,MAGzC,IAAK,YAED,OAAO5Y,KAAK04C,SAAS1D,UAAUh1C,KAAK+3C,OAAO8C,OAAO76C,KAAK6b,MAAMjD,OAGjE,IAAK,OAED,OAAO5Y,KAAK04C,SAAS1D,UAAUh1C,KAAKg9C,aAGxC,QAEI,IAAIG,EAAS,eAAiBn9C,KAAK6b,MAAM1B,KAAO,wBAEhD,IAAIna,KAAKmC,QAAQi7C,OAGf,MAAM,IAAItF,MAAMqF,GAFhBE,QAAQC,IAAIH,KAoBtBnE,EAAQr4C,UAAUy7C,KAAO,SAAU75C,GACjC,IAAI65C,EAAO75C,EAAMymB,cAAcguB,OAAO7e,QAAQ,iEAAiE,IAAIA,QAAQ,MAAO,KAElI,GAAIn4B,KAAKi5C,KAAK1vC,eAAe6yC,GAAO,CAClC,IAAImB,EAAenB,EAEnB,GACEp8C,KAAKi5C,KAAKsE,KACVnB,EAAOmB,EAAe,IAAMv9C,KAAKi5C,KAAKsE,SAC/Bv9C,KAAKi5C,KAAK1vC,eAAe6yC,IAIpC,OADAp8C,KAAKi5C,KAAKmD,GAAQ,EACXA,GAyBTpE,EAAOmB,WAAa,UACpBnB,EAAOoB,cAAgB,WACvBpB,EAAOsB,aAAe,CACpB,IAAK,QACL,IAAK,OACL,IAAK,OACL,IAAK,SACL,IAAK,SAEPtB,EAAOuB,mBAAqB,qBAC5BvB,EAAOwB,sBAAwB,sBAiF/B,IAAIU,EAAW,GACXD,EAAuB,gCAE3B,SAASzF,KAIT,SAASwB,EAAMtjB,GAKb,IAJA,IACI5vB,EACA2N,EAFAjC,EAAI,EAIDA,EAAImI,UAAUpK,OAAQiC,IAG3B,IAAKiC,KAFL3N,EAAS6T,UAAUnI,GAGbpO,OAAOO,UAAU4I,eAAeU,KAAKnH,EAAQ2N,KAC/CiiB,EAAIjiB,GAAO3N,EAAO2N,IAKxB,OAAOiiB,EAGT,SAASykB,EAAWqG,EAAUC,GAG5B,IAiBInG,EAjBMkG,EAASrlB,QAAQ,MAAO,SAAUqS,EAAOxT,EAAQ0mB,GAIzD,IAHA,IAAI9B,GAAU,EACV+B,EAAO3mB,IAEF2mB,GAAQ,GAAmB,OAAdD,EAAIC,IACxB/B,GAAWA,EAGb,OAAIA,EAGK,IAGA,OAGKvE,MAAM,OAClB7oC,EAAI,EAER,GAAI8oC,EAAM/qC,OAASkxC,EACjBnG,EAAMzmB,OAAO4sB,QAEb,KAAOnG,EAAM/qC,OAASkxC,GACpBnG,EAAMlpC,KAAK,IAIf,KAAOI,EAAI8oC,EAAM/qC,OAAQiC,IAEvB8oC,EAAM9oC,GAAK8oC,EAAM9oC,GAAGwoC,OAAO7e,QAAQ,QAAS,KAG9C,OAAOmf,EAMT,SAASR,EAAM4G,EAAKhnC,EAAGknC,GACrB,GAAmB,IAAfF,EAAInxC,OACN,MAAO,GAMT,IAFA,IAAIsxC,EAAU,EAEPA,EAAUH,EAAInxC,QAAQ,CAC3B,IAAIuxC,EAAWJ,EAAIlG,OAAOkG,EAAInxC,OAASsxC,EAAU,GAEjD,GAAIC,IAAapnC,GAAMknC,EAEhB,IAAIE,IAAapnC,IAAKknC,EAG3B,MAFAC,SAFAA,IAQJ,OAAOH,EAAIK,OAAO,EAAGL,EAAInxC,OAASsxC,GAGpC,SAAS1C,EAAmBuC,EAAKx0C,GAC/B,IAA2B,IAAvBw0C,EAAItzB,QAAQlhB,EAAE,IAChB,OAAQ,EAKV,IAFA,IAAI8yC,EAAQ,EAEHxtC,EAAI,EAAGA,EAAIkvC,EAAInxC,OAAQiC,IAC9B,GAAe,OAAXkvC,EAAIlvC,GACNA,SACK,GAAIkvC,EAAIlvC,KAAOtF,EAAE,GACtB8yC,SACK,GAAI0B,EAAIlvC,KAAOtF,EAAE,MACtB8yC,EAEY,EACV,OAAOxtC,EAKb,OAAQ,EAOV,SAAS4mC,EAAOc,EAAK0D,EAAK1sB,GAExB,GAAmB,qBAARgpB,GAA+B,OAARA,EAChC,MAAM,IAAI4B,MAAM,kDAGlB,GAAmB,kBAAR5B,EACT,MAAM,IAAI4B,MAAM,wCAA0C13C,OAAOO,UAAUY,SAAS0I,KAAKisC,GAAO,qBAGlG,GAAIhpB,GAA2B,oBAAR0sB,EAAvB,CACO1sB,IACHA,EAAW0sB,EACXA,EAAM,MAIR,IACI1E,EACA8I,EAFAnC,GADJjC,EAAM5D,EAAM,GAAIZ,EAAOzsB,SAAUixB,GAAO,KACpBiC,UAGhBrtC,EAAI,EAER,IACE0mC,EAASD,EAAMgB,IAAIC,EAAK0D,GACxB,MAAO1tC,GACP,OAAOghB,EAAShhB,GAGlB8xC,EAAU9I,EAAO3oC,OAEjB,IAAI4U,EAAO,SAAc9D,GACvB,GAAIA,EAEF,OADAu8B,EAAIiC,UAAYA,EACT3uB,EAAS7P,GAGlB,IAAI09B,EAEJ,IACEA,EAAMjC,EAAO8D,MAAM1H,EAAQ0E,GAC3B,MAAO1tC,GACPmR,EAAMnR,EAIR,OADA0tC,EAAIiC,UAAYA,EACTx+B,EAAM6P,EAAS7P,GAAO6P,EAAS,KAAM6tB,IAG9C,IAAKc,GAAaA,EAAUtvC,OAAS,EACnC,OAAO4U,IAIT,UADOy4B,EAAIiC,WACNmC,EAAS,OAAO78B,IAErB,KAAO3S,EAAI0mC,EAAO3oC,OAAQiC,KACxB,SAAWqN,GACU,SAAfA,EAAM1B,OACC6jC,GAAW78B,IAGf06B,EAAUhgC,EAAMjD,KAAMiD,EAAMk7B,KAAM,SAAU15B,EAAKs2B,GACtD,OAAIt2B,EAAY8D,EAAK9D,GAET,MAARs2B,GAAgBA,IAAS93B,EAAMjD,OACxBolC,GAAW78B,KAGtBtF,EAAMjD,KAAO+6B,EACb93B,EAAM+/B,SAAU,SACdoC,GAAW78B,QAdjB,CAgBG+zB,EAAO1mC,SAMd,IAEE,OADIorC,IAAKA,EAAM5D,EAAM,GAAIZ,EAAOzsB,SAAUixB,IACnCd,EAAO8D,MAAM3H,EAAMgB,IAAIC,EAAK0D,GAAMA,GACzC,MAAO1tC,GAGP,GAFAA,EAAE4L,SAAW,+DAER8hC,GAAOxE,EAAOzsB,UAAUy0B,OAC3B,MAAO,iCAAmCpF,EAAO9rC,EAAE4L,QAAU,IAAI,GAAQ,SAG3E,MAAM5L,GAzMVsoC,EAAKqC,KAAOrC,EAiNZY,EAAOjzC,QAAUizC,EAAOhvC,WAAa,SAAUwzC,GAE7C,OADA5D,EAAMZ,EAAOzsB,SAAUixB,GAChBxE,GAGTA,EAAO6I,YAAc,WACnB,MAAO,CACLtB,QAAS,KACT/D,QAAQ,EACRpD,KAAK,EACL0G,WAAW,EACXC,aAAc,GACdN,UAAW,KACXC,WAAY,YACZN,QAAQ,EACRjG,UAAU,EACVmD,SAAU,IAAIC,EACdjB,UAAU,EACVE,UAAW,KACXwF,QAAQ,EACR7F,YAAY,EACZkE,aAAa,EACbhG,QAAQ,EACR4G,OAAO,IAIXjH,EAAOzsB,SAAWysB,EAAO6I,cAKzB7I,EAAO0D,OAASA,EAChB1D,EAAO8I,OAASpF,EAAO8D,MACvBxH,EAAOuD,SAAWA,EAClBvD,EAAOyD,aAAeA,EACtBzD,EAAOH,MAAQA,EACfG,EAAO+I,MAAQlJ,EAAMgB,IACrBb,EAAOqD,YAAcA,EACrBrD,EAAOgJ,YAAc3F,EAAYoC,OACjCzF,EAAO4D,QAAUA,EACjB5D,EAAOwH,MAAQxH,EAUf7D,GAAmB6D,IAClBnrC,UAAK,GAMYsnC,GAAiBuH,OACjBvH,GAAiB2M,OAF9B,IAGI,GAAW3M,GAAiBoH,SAM5BiE,IALerL,GAAiBsH,aACxBtH,GAAiB0D,MACjB1D,GAAiB4M,MACX5M,GAAiBkH,YACjBlH,GAAiB6M,YACvB7M,GAAiBqL,O,UGtiDpC,SAAS1jC,GAAc/W,GACrB,IAAIovB,EAAUpvB,EAAQ41C,OAAS,OAAS,MACpCzmB,EAAU7c,SAASyE,cAAcqY,GAMrC,OAJIpvB,EAAQwN,YACV2hB,EAAQ3hB,UAAYxN,EAAQwN,WAGvB2hB,EAYF,SAAS+sB,GAAoBC,EAAen8C,QACjC,IAAZA,IACFA,EAAU,IAGZ,IAAImvB,EAAUpY,GAAc/W,GAI5B,OAoOF,SAASo8C,EAAqBjtB,EAASktB,EAAUC,GAC/C,IAAIC,EAEJ,GAAsB,IAAlBF,EAASrkC,KAGTukC,EAAQjqC,SAASkqC,eAAeH,EAASt9C,SAAW,SAC/C,GAAsB,IAAlBs9C,EAASrkC,KAGlBukC,EAAQjqC,SAASyE,cAAc,UAC1B,GAAsB,IAAlBslC,EAASrkC,KAGlBukC,EAAQjqC,SAASyE,cAAc,UAC1B,GAAsB,IAAlBslC,EAASrkC,MAEnBskC,EAAe,CAChB,IAAIrjC,EAAI3G,SAASyE,cAAc,KAC/BkC,EAAEy8B,KAAO,IACT4G,EAAcG,aAAaxwC,KAAK,KAAkCgN,EAAG,QAAS,SAAUva,GACtF49C,EAAcvxB,SAASb,OAAOmyB,EAAShc,OAAQ3hC,MAEjD69C,EAAQtjC,OACmB,IAAlBojC,EAASrkC,KAGhBukC,EAAQjqC,SAASyE,cAAc,MACJ,IAAlBslC,EAASrkC,OAGlBukC,EAAQptB,GAGRotB,GAASptB,IAAYotB,GACvBptB,EAAQhY,YAAYolC,GAGlBA,GAASr1C,MAAM2T,QAAQwhC,EAASK,WAClCL,EAASK,SAAS/wC,QAAQ,SAAUgxC,GAClCP,EAAqBG,EAAOI,EAAWL,KA9Q3CF,CAAqBjtB,EAmRvB,SAA4BpwB,GAC1B,IAAIkzC,EAAO,CACTj6B,KAAM,EAGN0kC,SAAU,IAERE,EAAkB,EAClBC,EAAU5K,EACV6K,EAAQ,GACRC,EAAS,IAAIC,GAAaj+C,GAE9B,MAAQg+C,EAAOE,OAAO,CACpB,IAAIn+B,EAAOi+B,EAAOj+B,OACdo+B,EAA+B,OAATp+B,GAAkD,IAAjCq+B,GAAcJ,EAAOnC,QAQhE,GAJIsC,IACFp+B,EAAOi+B,EAAOj+B,QAGXo+B,GA8EyB,IAAzBC,GA9EmCr+B,IAASA,IAASi+B,EAAOnC,OAkC1D,GAAa,OAAT97B,EACY,IAAjB+9B,EAAQ7kC,OAGR6kC,EAAUC,EAAM58B,OAGpB28B,EAAQH,SAASzwC,KAAK,CACpB+L,KAAM,SAKR,GAAqB,IAAjB6kC,EAAQ7kC,KAEV,CACE,IAAIolC,EAAc,CAChBplC,KAAM,EAGNjZ,QAAS+f,GAEX+9B,EAAQH,SAASzwC,KAAKmxC,GACtBN,EAAM7wC,KAAK4wC,GACXA,EAAUO,OAEZP,EAAQ99C,SAAW+f,MA5DkD,CACvEi+B,EAAOM,UAEc,IAAjBR,EAAQ7kC,OAGR6kC,EAAUC,EAAM58B,OAGpB,IAAIlI,EAAOmlC,GAAcr+B,GAEzB,GAAI+9B,EAAQ7kC,OAASA,GAAyB,IAAjB6kC,EAAQ7kC,MAEzB,IAATA,EAGD6kC,EAAUC,EAAM58B,UACX,CACL,IAAIo9B,EAAa,CACftlC,KAAMA,EACN0kC,SAAU,IAGC,IAAT1kC,IAGAslC,EAAWjd,MAAQuc,EACnBA,KAGJC,EAAQH,SAASzwC,KAAKqxC,GACtBR,EAAM7wC,KAAK4wC,GACXA,EAAUS,IAiCK,IAAjBT,EAAQ7kC,OAGR6kC,EAAUC,EAAM58B,OAGhB48B,EAAM1yC,OAGV,OAAO6nC,EAnXuBsL,CAAmBpB,GAAgBn8C,EAAQs8C,eAElEntB,EAuMT,IAAI6tB,GAEJ,WACE,SAASA,EAAa3Y,GACpBxmC,KAAKwmC,OAASA,EACdxmC,KAAKwiC,MAAQ,EAqBf,OAlBA2c,EAAax+C,UAAUy+C,IAAM,WAC3B,OAAOp/C,KAAKwiC,OAASxiC,KAAKwmC,OAAOj6B,QAGnC4yC,EAAax+C,UAAUsgB,KAAO,WAC5B,IAAIA,EAAOjhB,KAAK+8C,OAEhB,OADA/8C,KAAKw/C,UACEv+B,GAGTk+B,EAAax+C,UAAUo8C,KAAO,WAC5B,OAAO/8C,KAAKwmC,OAAOxmC,KAAKwiC,QAG1B2c,EAAax+C,UAAU6+C,QAAU,WAC/Bx/C,KAAKwiC,SAGA2c,EAxBT,GAiLA,SAASG,GAAcK,GACrB,OAAQA,GACN,IAAK,IACH,OAAO,EAIT,IAAK,IACH,OAAO,EAIT,IAAK,IACH,OAAO,EAIT,IAAK,IACH,OAAO,EAIT,QACE,OAAO,G,cCtbT,GAEJ,WACE,SAASC,EAAiBC,EAASC,QACjB,IAAZD,IACFA,EAAU,SAGE,IAAVC,IACFA,EAAQ,IAGV9/C,KAAK+/C,YAAYF,GAEjB7/C,KAAKggD,OAASF,EAEd9/C,KAAK2tC,YA4EP,OAzEAiS,EAAiBj/C,UAAUyY,IAAM,SAAUoI,GACzCxhB,KAAKigD,SAAStuB,OAAOnQ,GAErBxhB,KAAKigD,SAAS7mC,IAAIoI,GAElBxhB,KAAK2tC,aAGPiS,EAAiBj/C,UAAUsgB,KAAO,WAChC,OAAOjhB,KAAKkgD,WAAWj/B,QAGzB2+B,EAAiBj/C,UAAUw/C,SAAW,WACpC,OAAOngD,KAAKkgD,WAAWC,YAGzBP,EAAiBj/C,UAAUq+C,QAAU,WACnC,OAAOh/C,KAAKkgD,WAAWlB,WAGzBY,EAAiBj/C,UAAUy/C,OAAS,WAClC,OAAO,MAGTR,EAAiBj/C,UAAU0/C,MAAQ,WACjC,OAAOrgD,KAAKkgD,WAAWG,SAGzBT,EAAiBj/C,UAAU2/C,KAAO,WAChC,OAAOtgD,KAAKkgD,WAAWI,QAGzBV,EAAiBj/C,UAAUwf,IAAM,SAAUqB,GACzC,OAAOxhB,KAAKigD,SAAS9/B,IAAIqB,IAG3Bo+B,EAAiBj/C,UAAUgtC,UAAY,WACrC3tC,KAAKugD,iBAELvgD,KAAKkgD,WAAa,IAAI,KAAelgD,KAAKwgD,UAAW,EAAGxgD,KAAKwgD,UAAUj0C,OAAQvM,KAAKwgD,UAAUj0C,SAGhGqzC,EAAiBj/C,UAAU4/C,eAAiB,WAC1C,IAAIl1B,EAAOrrB,KAAKwgD,UAEZn1B,EAAK9e,OAASvM,KAAKggD,QACrBhgD,KAAK+/C,YAAY10B,EAAKiiB,MAAMjiB,EAAK9e,OAASvM,KAAKggD,UAInDJ,EAAiBj/C,UAAUo/C,YAAc,SAAUF,GACjD7/C,KAAKigD,SAAW,IAAIQ,IAEpB,IAAK,IAAI7tC,EAAK,EAAG8tC,EAAYb,EAASjtC,EAAK8tC,EAAUn0C,OAAQqG,IAAM,CACjE,IAAI+tC,EAAQD,EAAU9tC,GAEtB5S,KAAKigD,SAAS7mC,IAAIunC,KAItBvgD,OAAOM,eAAek/C,EAAiBj/C,UAAW,YAAa,CAC7DC,IAAK,WACH,IAAIggD,EAAW,GAMf,OAJA5gD,KAAKigD,SAASnyC,QAAQ,SAAU5B,GAC9B,OAAO00C,EAASxyC,KAAKlC,KAGhB00C,GAET9/C,YAAY,EACZC,cAAc,IAET6+C,EA1FT,GCJI,GAAsC,WACxC,IAAI52C,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GAsCtCq3C,GAAIz8B,GAAA,EACJ,GAAc,CAChB08B,gBAAiB,KAAMrT,QAAQ,WAC/BsT,gBAAiB,KAAMtT,QAAQ,WAC/BuT,0BAA2B,KAAMvT,QAAQ,WACzCwT,8BAA+B,KAAMxT,QAAQ,WAC7CyT,6BAA8B,KAAMzT,QAAQ,WAC5C0T,iCAAkC,KAAM1T,QAAQ,WAChD2T,2BAA4B,KAAM3T,QAAQ,WAC1C4T,+BAAgC,KAAM5T,QAAQ,YAG5C,GAEJ,SAAU1jC,GAGR,SAASu3C,EAASC,EAAWC,EAAqBr/C,GAChD,IAAIf,EAAQ2I,EAAOE,KAAKjK,OAASA,KAEjCoB,EAAMqjB,MAAQ,OACdrjB,EAAMnB,aAAemB,EAAMsK,UAAU,IAAI,MACzCtK,EAAMmc,YAAcnc,EAAMnB,aAAaY,MACvCO,EAAMqgD,mBAAqBrgD,EAAMsK,UAAU,IAAI,MAC/CtK,EAAMogD,oBAAsBA,EAC5BpgD,EAAMe,QAAUA,GAAW/B,OAAOC,OAAO,MACzC,aAAMe,EAAMe,QAAS,IAAa,GAClCf,EAAM0W,QAAU,KAChB1W,EAAMsgD,aAAe,KACrBtgD,EAAMugD,YAAcvgD,EAAMe,QAAQw/C,aAAe,GACjDvgD,EAAMwgD,UAAYxgD,EAAMe,QAAQy/C,WAAa,GAC7CxgD,EAAM0/C,gBAAkB1/C,EAAMe,QAAQ2+C,gBACtC1/C,EAAM2/C,gBAAkB3/C,EAAMe,QAAQ4+C,gBACtC3/C,EAAMygD,YAAczgD,EAAMe,QAAQ0/C,YAClCzgD,EAAM4/C,0BAA4B5/C,EAAMe,QAAQ6+C,0BAChD5/C,EAAM6/C,8BAAgC7/C,EAAMe,QAAQ8+C,8BACpD7/C,EAAM0gD,8BAAgC1gD,EAAMe,QAAQ2/C,8BACpD1gD,EAAM8/C,6BAA+B9/C,EAAMe,QAAQ++C,6BACnD9/C,EAAM+/C,iCAAmC//C,EAAMe,QAAQg/C,iCACvD//C,EAAM2gD,iCAAmC3gD,EAAMe,QAAQ4/C,iCACvD3gD,EAAMggD,2BAA6BhgD,EAAMe,QAAQi/C,2BACjDhgD,EAAMigD,+BAAiCjgD,EAAMe,QAAQk/C,+BACrDjgD,EAAM4gD,+BAAiC5gD,EAAMe,QAAQ6/C,+BAEjD5gD,EAAMe,QAAQ8/C,oBAChB7gD,EAAM8gD,WAAa9gD,EAAMe,QAAQ8/C,kBAAkBC,YAGrD9gD,EAAMkwB,QAAUlN,GAAA,EAAWm9B,EAAWV,GAAE,0BACxC,IAAItvB,EAAUnwB,EAAMe,QAAQggD,eAAiB,WAAa,QACtDC,EAAUh+B,GAAA,EAAWhjB,EAAMkwB,QAASuvB,GAAE,aA0E1C,OAzEAz/C,EAAMihD,MAAQj+B,GAAA,EAAWg+B,EAASvB,GAAEtvB,EAAU,WAE9CnwB,EAAMihD,MAAMlU,aAAa,cAAe,OAExC/sC,EAAMihD,MAAMlU,aAAa,iBAAkB,OAE3C/sC,EAAMihD,MAAMlU,aAAa,aAAc,SAEvC/sC,EAAMkhD,QAAQlhD,EAAMihD,MAAO,WACzB,OAAOj+B,GAAA,EAAahjB,EAAMkwB,QAAS,qBAGrClwB,EAAMmhD,OAAOnhD,EAAMihD,MAAO,WACxB,OAAOj+B,GAAA,EAAgBhjB,EAAMkwB,QAAS,qBAGpClwB,EAAMe,QAAQggD,gBAChB/gD,EAAMohD,OAASp+B,GAAA,EAAWg+B,EAASvB,GAAE,eACrCz/C,EAAMohD,OAAO92B,UAAY,WAEzBtqB,EAAMihD,MAAMloC,KAAO/Y,EAAMe,QAAQgY,MAAQ,OAEzC/Y,EAAMihD,MAAMlU,aAAa,OAAQ,QAG/B/sC,EAAMwgD,WACRxgD,EAAMihD,MAAMlU,aAAa,aAAc/sC,EAAMwgD,WAG3CxgD,EAAMugD,aACRvgD,EAAMqhD,eAAerhD,EAAMugD,aAG7BvgD,EAAMshD,QAAQthD,EAAMihD,MAAO,WACzB,OAAOjhD,EAAMuhD,kBAGfvhD,EAAMmhD,OAAOnhD,EAAMihD,MAAO,WACxB,OAAOjhD,EAAMwhD,WAGfxhD,EAAMkhD,QAAQlhD,EAAMihD,MAAO,WACzB,OAAOjhD,EAAMyhD,YAIXzhD,EAAMugD,aAAe,MACvBvgD,EAAMitC,QAAQjtC,EAAMihD,MAAO,SAAUn2C,GACnCkY,GAAA,EAAgB8Q,KAAKhpB,GAAG,GAExB9K,EAAMihD,MAAM7sC,UAIhB1T,WAAW,WACJV,EAAMihD,OAIXjhD,EAAM0hD,gBACL,GAEC1hD,EAAMe,QAAQ+Y,UAChB9Z,EAAM2hD,UAAY3hD,EAAMsK,UAAU,IAAI,KAAUtK,EAAMkwB,UAEtDlwB,EAAM2hD,UAAU30C,KAAKhN,EAAMe,QAAQ+Y,QAAS,CAC1CkjB,MAAM,EACNl0B,OAAO,KAIX9I,EAAMgtC,cAEChtC,EAkXT,OA/dA,GAAUkgD,EAAUv3C,GAgHpBu3C,EAAS3gD,UAAUiiD,OAAS,WAC1B5iD,KAAKgjD,gBAGP1B,EAAS3gD,UAAUkiD,QAAU,WAC3B7iD,KAAKijD,gBAGP3B,EAAS3gD,UAAU8hD,eAAiB,SAAUS,GACxCljD,KAAKqiD,QACPriD,KAAKqiD,MAAMlU,aAAa,cAAe+U,GACvCljD,KAAKqiD,MAAM7xC,MAAQ0yC,IAIvB5B,EAAS3gD,UAAUwiD,aAAe,SAAUj5C,GAC1ClK,KAAK4hD,UAAY13C,EAEblK,KAAKqiD,QACHn4C,EACFlK,KAAKqiD,MAAMlU,aAAa,aAAcnuC,KAAK4hD,WAE3C5hD,KAAKqiD,MAAMe,gBAAgB,gBAKjChjD,OAAOM,eAAe4gD,EAAS3gD,UAAW,gBAAiB,CACzDC,IAAK,WACH,OAAOZ,KAAKwiD,QAEd1hD,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAe4gD,EAAS3gD,UAAW,eAAgB,CACxDC,IAAK,WACH,OAAOZ,KAAKqiD,OAEdvhD,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAe4gD,EAAS3gD,UAAW,QAAS,CACjDC,IAAK,WACH,OAAOZ,KAAKqiD,MAAM9/C,OAEpByV,IAAK,SAAaqrC,GACZrjD,KAAKqiD,MAAM9/C,QAAU8gD,IACvBrjD,KAAKqiD,MAAM9/C,MAAQ8gD,EACnBrjD,KAAK2iD,kBAGT7hD,YAAY,EACZC,cAAc,IAGhBugD,EAAS3gD,UAAU6U,MAAQ,WACzBxV,KAAKqiD,MAAM7sC,SAGb8rC,EAAS3gD,UAAU2iD,KAAO,WACxBtjD,KAAKqiD,MAAMiB,QAGbhC,EAAS3gD,UAAU4iD,SAAW,WAC5B,OAAO9uC,SAAS+uC,gBAAkBxjD,KAAKqiD,OAGzCf,EAAS3gD,UAAU8iD,OAAS,SAAUh2C,QACtB,IAAVA,IACFA,EAAQ,MAGVzN,KAAKqiD,MAAMoB,SAEPh2C,GACFzN,KAAKqiD,MAAMqB,kBAAkBj2C,EAAM8F,MAAO9F,EAAMk2C,MAIpDrC,EAAS3gD,UAAUmuC,OAAS,WAC1B9uC,KAAKqiD,MAAMe,gBAAgB,aAG7B9B,EAAS3gD,UAAUouC,QAAU,WAC3B/uC,KAAKqiD,MAAMuB,UAAW,EAEtB5jD,KAAKgjD,gBAGP1B,EAAS3gD,UAAUkjD,WAAa,SAAU/lB,GACpCA,EACF99B,KAAK8uC,SAEL9uC,KAAK+uC,WAIT3uC,OAAOM,eAAe4gD,EAAS3gD,UAAW,QAAS,CACjDC,IAAK,WACH,OAAOwjB,GAAA,EAAkBpkB,KAAKqiD,QAEhCrqC,IAAK,SAAaoe,GAChBp2B,KAAKqiD,MAAMx2B,MAAMuK,MAAQA,EAAQ,KAE7Bp2B,KAAKwiD,SACPxiD,KAAKwiD,OAAO32B,MAAMuK,MAAQA,EAAQ,OAGtCt1B,YAAY,EACZC,cAAc,IAGhBugD,EAAS3gD,UAAUkX,YAAc,SAAUC,EAASgsC,GAClD9jD,KAAK8X,QAAUA,EACfsM,GAAA,EAAgBpkB,KAAKsxB,QAAS,QAC9BlN,GAAA,EAAgBpkB,KAAKsxB,QAAS,QAC9BlN,GAAA,EAAgBpkB,KAAKsxB,QAAS,WAC9BlN,GAAA,EAAgBpkB,KAAKsxB,QAAS,SAC9BlN,GAAA,EAAapkB,KAAKsxB,QAAStxB,KAAK+jD,aAAajsC,EAAQqC,OACrD,IAGI6pC,EAHApV,EAAS5uC,KAAKikD,cAAcjkD,KAAK8X,QAAQqC,MAC7Cna,KAAKsxB,QAAQzF,MAAM5R,OAAS20B,EAAO30B,OAAS,aAAe20B,EAAO30B,OAAS,KAOvE+pC,EAHiB,IAAjBlsC,EAAQqC,KAGIrQ,EAAA,EAAa,oBAAqB,aAAcgO,EAAQ5W,SAC1C,IAAjB4W,EAAQqC,KAGLrQ,EAAA,EAAa,sBAAuB,eAAgBgO,EAAQ5W,SAE9D4I,EAAA,EAAa,mBAAoB,YAAagO,EAAQ5W,SAGpEgjD,GAAA,EAAWF,IAEPhkD,KAAKujD,YAAcO,IACrB9jD,KAAKijD,gBAIT3B,EAAS3gD,UAAUwjD,YAAc,WAC/BnkD,KAAK8X,QAAU,KACfsM,GAAA,EAAgBpkB,KAAKsxB,QAAS,QAC9BlN,GAAA,EAAgBpkB,KAAKsxB,QAAS,WAC9BlN,GAAA,EAAgBpkB,KAAKsxB,QAAS,SAC9BlN,GAAA,EAAapkB,KAAKsxB,QAAS,QAE3BtxB,KAAKgjD,eAELhjD,KAAKouC,eAGPkT,EAAS3gD,UAAUsD,SAAW,WAC5B,IAAImgD,EAAW,KAcf,OAZIpkD,KAAKkiD,cACPkC,EAAWpkD,KAAKkiD,WAAWliD,KAAKuC,SAG9BvC,KAAKqkD,aAAalW,aAAa,eAAgB,QAC/CnuC,KAAK6X,YAAYusC,IACRpkD,KAAKqkD,aAAa13B,aAAa,kBACxC3sB,KAAKqkD,aAAajB,gBAAgB,gBAClCpjD,KAAKmkD,iBAIDC,GAGV9C,EAAS3gD,UAAUsjD,cAAgB,SAAU9pC,GAC3C,OAAQA,GACN,KAAK,EAGH,MAAO,CACLF,OAAQja,KAAKghD,0BACb5mC,WAAYpa,KAAKihD,8BACjB5mC,WAAYra,KAAK8hD,+BAGrB,KAAK,EAGH,MAAO,CACL7nC,OAAQja,KAAKkhD,6BACb9mC,WAAYpa,KAAKmhD,iCACjB9mC,WAAYra,KAAK+hD,kCAGrB,QACE,MAAO,CACL9nC,OAAQja,KAAKohD,2BACbhnC,WAAYpa,KAAKqhD,+BACjBhnC,WAAYra,KAAKgiD,kCAKzBV,EAAS3gD,UAAUojD,aAAe,SAAU5pC,GAC1C,OAAQA,GACN,KAAK,EAGH,MAAO,OAET,KAAK,EAGH,MAAO,UAET,QACE,MAAO,UAIbmnC,EAAS3gD,UAAUsiD,aAAe,WAChC,IAAI7hD,EAAQpB,KAEZ,GAAKA,KAAKwhD,qBAAwBxhD,KAAK8X,QAAvC,CAIA,IAAIwsC,EAEAC,EAAS,WACX,OAAOD,EAAIz4B,MAAMuK,MAAQhS,GAAA,EAAkBhjB,EAAMkwB,SAAW,MAG9DtxB,KAAKykB,MAAQ,OACbzkB,KAAKwhD,oBAAoBgD,gBAAgB,CACvCvhC,UAAW,WACT,OAAO7hB,EAAMkwB,SAEfmzB,gBAAiB,EAGjBhhC,OAAQ,SAAgB89B,GACtB,IAAKngD,EAAM0W,QACT,OAAO,KAGTwsC,EAAMlgC,GAAA,EAAWm9B,EAAWV,GAAE,+BAC9B0D,IACA,IAAIG,EAAgB,CAClB3M,QAAQ,EACRpoC,UAAW,2BAETg1C,EAAcvjD,EAAM0W,QAAQ8sC,cAAgBvG,GAAoBj9C,EAAM0W,QAAQ5W,QAASwjD,GF3Y5F,SAAoB9rC,EAAMzW,QACf,IAAZA,IACFA,EAAU,IAGZ,IAAImvB,EAAUpY,GAAc/W,GAE5B,OADAmvB,EAAQjY,YAAcT,EACf0Y,EEoY2GuzB,CAAWzjD,EAAM0W,QAAQ5W,QAASwjD,GAC9ItgC,GAAA,EAAaugC,EAAavjD,EAAM2iD,aAAa3iD,EAAM0W,QAAQqC,OAE3D,IAAIy0B,EAASxtC,EAAM6iD,cAAc7iD,EAAM0W,QAAQqC,MAM/C,OAJAwqC,EAAY94B,MAAMwK,gBAAkBuY,EAAOx0B,WAAaw0B,EAAOx0B,WAAW7Y,WAAa,KACvFojD,EAAY94B,MAAMhc,MAAQ++B,EAAOv0B,WAAau0B,EAAOv0B,WAAW9Y,WAAa,KAC7EojD,EAAY94B,MAAM5R,OAAS20B,EAAO30B,OAAS,aAAe20B,EAAO30B,OAAS,KAC1EmK,GAAA,EAAWkgC,EAAKK,GACT,MAETJ,OAAQA,MAIZjD,EAAS3gD,UAAUqiD,aAAe,WAC3BhjD,KAAKwhD,qBAAsC,SAAfxhD,KAAKykB,QAItCzkB,KAAKykB,MAAQ,OACbzkB,KAAKwhD,oBAAoB3kB,oBAG3BykB,EAAS3gD,UAAUgiD,cAAgB,WACjC3iD,KAAKC,aAAa8B,KAAK/B,KAAKuC,OAE5BvC,KAAKiE,WACLjE,KAAK8iD,eAEc,SAAf9iD,KAAKykB,OAAoBzkB,KAAKwhD,qBAChCxhD,KAAKwhD,oBAAoB+C,UAI7BjD,EAAS3gD,UAAUmiD,aAAe,WAChC,GAAK9iD,KAAKwiD,OAAV,CAIA,IAAIjgD,EAAQvC,KAAKuC,OAASvC,KAAK2hD,YAE3BmD,EAA0B,KADXviD,EAAMkR,WAAWlR,EAAMgK,OAAS,GAChB,IAAM,GACjBhK,EAAQuiD,EAG9B9kD,KAAKwiD,OAAOnpC,YAAc9W,EAAQuiD,EAElC9kD,KAAKwiD,OAAO92B,UAAY,SAG1B1rB,KAAKukD,WAGPjD,EAAS3gD,UAAUkrB,MAAQ,SAAU+iB,GACnC5uC,KAAK8gD,gBAAkBlS,EAAOkS,gBAC9B9gD,KAAK+gD,gBAAkBnS,EAAOmS,gBAC9B/gD,KAAK6hD,YAAcjT,EAAOiT,YAC1B7hD,KAAKihD,8BAAgCrS,EAAOqS,8BAC5CjhD,KAAK8hD,8BAAgClT,EAAOkT,8BAC5C9hD,KAAKghD,0BAA4BpS,EAAOoS,0BACxChhD,KAAKmhD,iCAAmCvS,EAAOuS,iCAC/CnhD,KAAK+hD,iCAAmCnT,EAAOmT,iCAC/C/hD,KAAKkhD,6BAA+BtS,EAAOsS,6BAC3ClhD,KAAKqhD,+BAAiCzS,EAAOyS,+BAC7CrhD,KAAKgiD,+BAAiCpT,EAAOoT,+BAC7ChiD,KAAKohD,2BAA6BxS,EAAOwS,2BACzCphD,KAAKouC,eAGPkT,EAAS3gD,UAAUytC,YAAc,WAC/B,GAAIpuC,KAAKsxB,QAAS,CAChB,IAAIlX,EAAapa,KAAK8gD,gBAAkB9gD,KAAK8gD,gBAAgBv/C,WAAa,KACtE8Y,EAAara,KAAK+gD,gBAAkB/gD,KAAK+gD,gBAAgBx/C,WAAa,KACtE0Y,EAASja,KAAK6hD,YAAc7hD,KAAK6hD,YAAYtgD,WAAa,KAC9DvB,KAAKsxB,QAAQzF,MAAMwK,gBAAkBjc,EACrCpa,KAAKsxB,QAAQzF,MAAMhc,MAAQwK,EAC3Bra,KAAKqiD,MAAMx2B,MAAMwK,gBAAkBjc,EACnCpa,KAAKqiD,MAAMx2B,MAAMhc,MAAQwK,EACzBra,KAAKsxB,QAAQzF,MAAM3R,YAAcD,EAAS,MAAQ,KAClDja,KAAKsxB,QAAQzF,MAAMk5B,YAAc9qC,EAAS,QAAU,KACpDja,KAAKsxB,QAAQzF,MAAMgjB,YAAc50B,IAIrCqnC,EAAS3gD,UAAU4jD,OAAS,WAC1B,GAAKvkD,KAAKwiD,OAAV,CAIA,IAAIwC,EAAiBhlD,KAAK0hD,aAC1B1hD,KAAK0hD,aAAet9B,GAAA,EAAmBpkB,KAAKwiD,QAExCwC,IAAmBhlD,KAAK0hD,eAC1B1hD,KAAKqiD,MAAMx2B,MAAM/H,OAAS9jB,KAAK0hD,aAAe,KAE9C1hD,KAAKyhD,mBAAmB1/C,KAAK/B,KAAK0hD,iBAItCJ,EAAS3gD,UAAUc,QAAU,WAC3BzB,KAAKgjD,eAELhjD,KAAKsxB,QAAU,KAEftxB,KAAKqiD,MAAQ,KAEbriD,KAAKwhD,yBAAsBx/C,EAC3BhC,KAAK8X,QAAU,KACf9X,KAAKkiD,gBAAalgD,EAClBhC,KAAKykB,MAAQ,KACbzkB,KAAK+iD,eAAY/gD,EAEjB+H,EAAOpJ,UAAUc,QAAQwI,KAAKjK,OAGzBshD,EAheT,CAieE,MAIE,GAEJ,SAAUv3C,GAGR,SAASk7C,EAAgB1D,EAAWC,EAAqBr/C,GACvD,IAAIf,EAAQ2I,EAAOE,KAAKjK,KAAMuhD,EAAWC,EAAqBr/C,IAAYnC,KAG1E,OADAoB,EAAMy+C,QAAU,IAAI,GAAiB19C,EAAQ09C,QAAS,KAC/Cz+C,EA8DT,OApEA,GAAU6jD,EAAiBl7C,GAS3Bk7C,EAAgBtkD,UAAUukD,aAAe,WACnCllD,KAAKuC,OAASvC,KAAKuC,QAAUvC,KAAKmlD,mBACpCnlD,KAAK6/C,QAAQzmC,IAAIpZ,KAAKuC,QAI1B0iD,EAAgBtkD,UAAUykD,cAAgB,WACnCplD,KAAK6/C,QAAQ1/B,IAAIngB,KAAKuC,QACzBvC,KAAKklD,eAGP,IAAIjkC,EAAOjhB,KAAKqlD,eAEZpkC,IACFA,EAAOA,IAASjhB,KAAKuC,MAAQvC,KAAKqlD,eAAiBpkC,GAGjDA,IACFjhB,KAAKuC,MAAQ0e,EACbijC,GAAA,EAAYlkD,KAAKuC,SAIrB0iD,EAAgBtkD,UAAU2kD,kBAAoB,WACvCtlD,KAAK6/C,QAAQ1/B,IAAIngB,KAAKuC,QACzBvC,KAAKklD,eAGP,IAAI/E,EAAWngD,KAAKulD,mBAEhBpF,IACFA,EAAWA,IAAangD,KAAKuC,MAAQvC,KAAKulD,mBAAqBpF,GAG7DA,IACFngD,KAAKuC,MAAQ49C,EACb+D,GAAA,EAAYlkD,KAAKuC,SAIrB0iD,EAAgBtkD,UAAUwkD,gBAAkB,WAC1C,IAAIK,EAAexlD,KAAK6/C,QAAQb,UAOhC,OALKwG,IACHA,EAAexlD,KAAK6/C,QAAQS,OAC5BtgD,KAAK6/C,QAAQ5+B,QAGRukC,GAGTP,EAAgBtkD,UAAU4kD,iBAAmB,WAC3C,OAAOvlD,KAAK6/C,QAAQM,YAAcngD,KAAK6/C,QAAQQ,SAGjD4E,EAAgBtkD,UAAU0kD,aAAe,WACvC,OAAOrlD,KAAK6/C,QAAQ5+B,QAAUjhB,KAAK6/C,QAAQS,QAGtC2E,EArET,CAsEE,ICjmBE,I,OAAsC,WACxC,IAAIj8C,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,IAiCtCi8C,GAAoB37C,EAAA,EAAa,eAAgB,SAEjD,GAEJ,SAAUC,GAGR,SAAS27C,EAAUtF,EAAQoB,EAAqBmE,EAAoBxjD,GAClE,IAAIf,EAAQ2I,EAAOE,KAAKjK,OAASA,KAwDjC,OAtDAoB,EAAMukD,mBAAqBA,EAC3BvkD,EAAMwkD,8BAA+B,EACrCxkD,EAAMykD,mBAAqBzkD,EAAMsK,UAAU,IAAI,MAC/CtK,EAAM0kD,kBAAoB1kD,EAAMykD,mBAAmBhlD,MACnDO,EAAMwsC,WAAaxsC,EAAMsK,UAAU,IAAI,MACvCtK,EAAM07B,UAAY17B,EAAMwsC,WAAW/sC,MACnCO,EAAM2kD,aAAe3kD,EAAMsK,UAAU,IAAI,MACzCtK,EAAM4+B,YAAc5+B,EAAM2kD,aAAallD,MACvCO,EAAM4kD,SAAW5kD,EAAMsK,UAAU,IAAI,MACrCtK,EAAM6kD,SAAW7kD,EAAMsK,UAAU,IAAI,MACrCtK,EAAM8kD,wBAA0B9kD,EAAMsK,UAAU,IAAI,MACpDtK,EAAM+kD,uBAAyB/kD,EAAM8kD,wBAAwBrlD,MAC7DO,EAAMglD,gBAAkBhlD,EAAMsK,UAAU,IAAI,MAC5CtK,EAAMilD,0BAA4B,EAClCjlD,EAAMogD,oBAAsBA,EAC5BpgD,EAAMugD,YAAcx/C,EAAQw/C,aAAe,GAC3CvgD,EAAM8gD,WAAa//C,EAAQ+/C,WAC3B9gD,EAAM8I,MAAQ/H,EAAQ+H,OAASu7C,GAC/BrkD,EAAMosC,wBAA0BrrC,EAAQqrC,wBACxCpsC,EAAM0/C,gBAAkB3+C,EAAQ2+C,gBAChC1/C,EAAM2/C,gBAAkB5+C,EAAQ4+C,gBAChC3/C,EAAMygD,YAAc1/C,EAAQ0/C,YAC5BzgD,EAAM4/C,0BAA4B7+C,EAAQ6+C,0BAC1C5/C,EAAM6/C,8BAAgC9+C,EAAQ8+C,8BAC9C7/C,EAAM0gD,8BAAgC3/C,EAAQ2/C,8BAC9C1gD,EAAM8/C,6BAA+B/+C,EAAQ++C,6BAC7C9/C,EAAM+/C,iCAAmCh/C,EAAQg/C,iCACjD//C,EAAM2gD,iCAAmC5/C,EAAQ4/C,iCACjD3gD,EAAMggD,2BAA6Bj/C,EAAQi/C,2BAC3ChgD,EAAMigD,+BAAiCl/C,EAAQk/C,+BAC/CjgD,EAAM4gD,+BAAiC7/C,EAAQ6/C,+BAE/C5gD,EAAMklD,aAAankD,EAAQokD,0BAA4B,GAAIpkD,EAAQqkD,uBAAyB,GAAIrkD,EAAQskD,kBAAoB,GAAItkD,EAAQ09C,SAAW,KAAM19C,EAAQggD,gBAE7J/B,GACFA,EAAO9mC,YAAYlY,EAAM4pB,SAG3B5pB,EAAMotC,UAAUptC,EAAMslD,SAASrC,aAAc,SAAUn4C,GACrD,OAAO9K,EAAMwsC,WAAW7rC,KAAKmK,KAG/B9K,EAAMulD,QAAQvlD,EAAMslD,SAASrC,aAAc,SAAUn4C,GACnD,OAAO9K,EAAM6kD,SAASlkD,KAAKmK,KAG7B9K,EAAMshD,QAAQthD,EAAMslD,SAASrC,aAAc,SAAUn4C,GACnD,OAAO9K,EAAM4kD,SAASjkD,SAGxBX,EAAMwlD,YAAYxlD,EAAMslD,SAASrC,aAAc,SAAUn4C,GACvD,OAAO9K,EAAM2kD,aAAahkD,KAAKmK,KAG1B9K,EA4RT,OAvVA,GAAUskD,EAAW37C,GA8DrB27C,EAAU/kD,UAAUmuC,OAAS,WAC3B1qB,GAAA,EAAgBpkB,KAAKgrB,QAAS,YAC9BhrB,KAAK0mD,SAAS5X,SACd9uC,KAAKgmB,MAAM8oB,SACX9uC,KAAKowC,WAAWtB,SAChB9uC,KAAKgwC,cAAclB,UAGrB4W,EAAU/kD,UAAUouC,QAAU,WAC5B3qB,GAAA,EAAapkB,KAAKgrB,QAAS,YAC3BhrB,KAAK0mD,SAAS3X,UACd/uC,KAAKgmB,MAAM+oB,UACX/uC,KAAKowC,WAAWrB,UAChB/uC,KAAKgwC,cAAcjB,WAGrB2W,EAAU/kD,UAAUkmD,2BAA6B,SAAUtkD,GACzDvC,KAAK4lD,6BAA+BrjD,GAGtCmjD,EAAU/kD,UAAUkjD,WAAa,SAAU/lB,GACrCA,EACF99B,KAAK8uC,SAEL9uC,KAAK+uC,WAIT2W,EAAU/kD,UAAUq0B,SAAW,WAC7B,OAAOh1B,KAAK0mD,SAASnkD,OAGvBmjD,EAAU/kD,UAAUmmD,SAAW,SAAUvkD,GACnCvC,KAAK0mD,SAASnkD,QAAUA,IAC1BvC,KAAK0mD,SAASnkD,MAAQA,IAI1BmjD,EAAU/kD,UAAUkrB,MAAQ,SAAU+iB,GACpC5uC,KAAKwtC,wBAA0BoB,EAAOpB,wBACtCxtC,KAAK8gD,gBAAkBlS,EAAOkS,gBAC9B9gD,KAAK+gD,gBAAkBnS,EAAOmS,gBAC9B/gD,KAAK6hD,YAAcjT,EAAOiT,YAC1B7hD,KAAKihD,8BAAgCrS,EAAOqS,8BAC5CjhD,KAAK8hD,8BAAgClT,EAAOkT,8BAC5C9hD,KAAKghD,0BAA4BpS,EAAOoS,0BACxChhD,KAAKmhD,iCAAmCvS,EAAOuS,iCAC/CnhD,KAAK+hD,iCAAmCnT,EAAOmT,iCAC/C/hD,KAAKkhD,6BAA+BtS,EAAOsS,6BAC3ClhD,KAAKqhD,+BAAiCzS,EAAOyS,+BAC7CrhD,KAAKgiD,+BAAiCpT,EAAOoT,+BAC7ChiD,KAAKohD,2BAA6BxS,EAAOwS,2BACzCphD,KAAKouC,eAGPsX,EAAU/kD,UAAUytC,YAAc,WAChC,GAAIpuC,KAAKgrB,QAAS,CAChB,IAAI+7B,EAAiB,CACnBvZ,wBAAyBxtC,KAAKwtC,yBAEhCxtC,KAAKgmB,MAAM6F,MAAMk7B,GACjB/mD,KAAKowC,WAAWvkB,MAAMk7B,GACtB/mD,KAAKgwC,cAAcnkB,MAAMk7B,GACzB,IAAIC,EAAiB,CACnBlG,gBAAiB9gD,KAAK8gD,gBACtBC,gBAAiB/gD,KAAK+gD,gBACtBc,YAAa7hD,KAAK6hD,YAClBZ,8BAA+BjhD,KAAKihD,8BACpCa,8BAA+B9hD,KAAK8hD,8BACpCd,0BAA2BhhD,KAAKghD,0BAChCG,iCAAkCnhD,KAAKmhD,iCACvCY,iCAAkC/hD,KAAK+hD,iCACvCb,6BAA8BlhD,KAAKkhD,6BACnCG,+BAAgCrhD,KAAKqhD,+BACrCW,+BAAgChiD,KAAKgiD,+BACrCZ,2BAA4BphD,KAAKohD,4BAEnCphD,KAAK0mD,SAAS76B,MAAMm7B,KAIxBtB,EAAU/kD,UAAU8iD,OAAS,WAC3BzjD,KAAK0mD,SAASjD,UAGhBiC,EAAU/kD,UAAU6U,MAAQ,WAC1BxV,KAAK0mD,SAASlxC,SAGhBkwC,EAAU/kD,UAAUsmD,iBAAmB,WACrC,OAAOjnD,KAAKgwC,cAAczB,SAG5BmX,EAAU/kD,UAAUumD,iBAAmB,SAAU3kD,GAC/CvC,KAAKgwC,cAAczB,QAAUhsC,GAG/BmjD,EAAU/kD,UAAUwmD,cAAgB,WAClC,OAAOnnD,KAAKowC,WAAW7B,SAGzBmX,EAAU/kD,UAAUymD,cAAgB,SAAU7kD,GAC5CvC,KAAKowC,WAAW7B,QAAUhsC,GAG5BmjD,EAAU/kD,UAAUi1C,SAAW,WAC7B,OAAO51C,KAAKgmB,MAAMuoB,SAGpBmX,EAAU/kD,UAAU0mD,SAAW,SAAU9kD,GACvCvC,KAAKgmB,MAAMuoB,QAAUhsC,EACrBvC,KAAKiE,YAGPyhD,EAAU/kD,UAAU2mD,qBAAuB,WACzCtnD,KAAKgwC,cAAcx6B,SAGrBkwC,EAAU/kD,UAAUqwC,qBAAuB,WACzC5sB,GAAA,EAAgBpkB,KAAKgrB,QAAS,aAAehrB,KAAKqmD,2BAClDrmD,KAAKqmD,0BAA4B,EAAIrmD,KAAKqmD,0BAC1CjiC,GAAA,EAAapkB,KAAKgrB,QAAS,aAAehrB,KAAKqmD,4BAGjDX,EAAU/kD,UAAU2lD,aAAe,SAAUC,EAA0BC,EAAuBC,EAAkB5G,EAASsC,GACvH,IAAI/gD,EAAQpB,KAiFZ,GA/EAA,KAAKgrB,QAAUvW,SAASyE,cAAc,OACtCkL,GAAA,EAAapkB,KAAKgrB,QAAS,oBAC3BhrB,KAAK0mD,SAAW1mD,KAAK0L,UAAU,IAAI,GAAgB1L,KAAKgrB,QAAShrB,KAAKwhD,oBAAqB,CACzFG,YAAa3hD,KAAK2hD,aAAe,GACjCC,UAAW5hD,KAAKkK,OAAS,GACzB+3C,kBAAmB,CACjBC,WAAYliD,KAAKkiD,YAEnBpB,gBAAiB9gD,KAAK8gD,gBACtBC,gBAAiB/gD,KAAK+gD,gBACtBc,YAAa7hD,KAAK6hD,YAClBZ,8BAA+BjhD,KAAKihD,8BACpCa,8BAA+B9hD,KAAK8hD,8BACpCd,0BAA2BhhD,KAAKghD,0BAChCG,iCAAkCnhD,KAAKmhD,iCACvCY,iCAAkC/hD,KAAK+hD,iCACvCb,6BAA8BlhD,KAAKkhD,6BACnCG,+BAAgCrhD,KAAKqhD,+BACrCW,+BAAgChiD,KAAKgiD,+BACrCZ,2BAA4BphD,KAAKohD,2BACjCvB,QAASA,EACTsC,eAAgBA,KAElBniD,KAAKgmB,MAAQhmB,KAAK0L,UAAU,IAAI4jC,GAAc,CAC5CF,YAAaqX,EACbzY,WAAW,EACXR,wBAAyBxtC,KAAKwtC,2BAGhCxtC,KAAK0L,UAAU1L,KAAKgmB,MAAMkqB,SAAS,SAAUqX,GAC3CnmD,EAAMykD,mBAAmB9jD,KAAKwlD,IAEzBA,GAAenmD,EAAMwkD,8BACxBxkD,EAAMslD,SAASlxC,QAGjBpU,EAAM6C,cAGRjE,KAAK0L,UAAU1L,KAAKgmB,MAAM8W,UAAU,SAAU5wB,GAC5C9K,EAAMglD,gBAAgBrkD,KAAKmK,MAG7BlM,KAAKowC,WAAapwC,KAAK0L,UAAU,IAAI2jC,GAAmB,CACtDD,YAAaoX,EACbxY,WAAW,EACXR,wBAAyBxtC,KAAKwtC,2BAGhCxtC,KAAK0L,UAAU1L,KAAKowC,WAAWF,SAAS,SAAUqX,GAChDnmD,EAAMykD,mBAAmB9jD,KAAKwlD,IAEzBA,GAAenmD,EAAMwkD,8BACxBxkD,EAAMslD,SAASlxC,QAGjBpU,EAAM6C,cAGRjE,KAAKgwC,cAAgBhwC,KAAK0L,UAAU,IAAIyjC,GAAsB,CAC5DC,YAAamX,EACbvY,WAAW,EACXR,wBAAyBxtC,KAAKwtC,2BAGhCxtC,KAAK0L,UAAU1L,KAAKgwC,cAAcE,SAAS,SAAUqX,GACnDnmD,EAAMykD,mBAAmB9jD,KAAKwlD,IAEzBA,GAAenmD,EAAMwkD,8BACxBxkD,EAAMslD,SAASlxC,QAGjBpU,EAAM6C,cAGRjE,KAAK0L,UAAU1L,KAAKgwC,cAAclT,UAAU,SAAU5wB,GACpD9K,EAAM8kD,wBAAwBnkD,KAAKmK,MAGjClM,KAAK2lD,mBAAoB,CAC3B,IAAI35B,EAAehsB,KAAKgwC,cAAc5Z,QAAUp2B,KAAKowC,WAAWha,QAAUp2B,KAAKgmB,MAAMoQ,QAAU,KAC/Fp2B,KAAK0mD,SAASrC,aAAax4B,MAAMG,aAAeA,EAE5ChsB,KAAK0mD,SAASc,gBAChBxnD,KAAK0mD,SAASc,cAAc37B,MAAMG,aAAeA,GAKrD,IAAIy7B,EAAU,CAACznD,KAAKgwC,cAAchlB,QAAShrB,KAAKowC,WAAWplB,QAAShrB,KAAKgmB,MAAMgF,SAC/EhrB,KAAKwuC,UAAUxuC,KAAKgrB,QAAS,SAAUnqB,GACrC,GAAIA,EAAM4O,OAAO,KAEZ5O,EAAM4O,OAAO,KAEb5O,EAAM4O,OAAO,GAEf,CACD,IAAI+yB,EAAQilB,EAAQr9B,QAAQ3V,SAAS+uC,eAErC,GAAIhhB,GAAS,EAAG,CACd,IAAIklB,GAAY,EAEZ7mD,EAAM4O,OAAO,IAGfi4C,GAAYllB,EAAQ,GAAKilB,EAAQl7C,OACxB1L,EAAM4O,OAAO,MAIpBi4C,EADY,IAAVllB,EACSilB,EAAQl7C,OAAS,EAEjBi2B,EAAQ,GAInB3hC,EAAM4O,OAAO,GAGfg4C,EAAQjlB,GAAO8gB,OACNoE,GAAY,GACrBD,EAAQC,GAAUlyC,QAGpB4O,GAAA,EAAgB8Q,KAAKr0B,GAAO,OAIlC,IAAI8mD,EAAWlzC,SAASyE,cAAc,OACtCyuC,EAASh4C,UAAY,WACrBg4C,EAAS97B,MAAMgkB,QAAU7vC,KAAK2lD,mBAAqB,QAAU,OAC7DgC,EAASruC,YAAYtZ,KAAKgwC,cAAchlB,SACxC28B,EAASruC,YAAYtZ,KAAKowC,WAAWplB,SACrC28B,EAASruC,YAAYtZ,KAAKgmB,MAAMgF,SAChChrB,KAAKgrB,QAAQ1R,YAAYquC,IAG3BjC,EAAU/kD,UAAUsD,SAAW,WACzBjE,KAAK0mD,UACP1mD,KAAK0mD,SAASziD,YAIlByhD,EAAU/kD,UAAUinD,aAAe,WAC7B5nD,KAAK0mD,UACP1mD,KAAK0mD,SAASvC,eAIlBuB,EAAU/kD,UAAUc,QAAU,WAC5BsI,EAAOpJ,UAAUc,QAAQwI,KAAKjK,OAGzB0lD,EAxVT,CAyVE,M,UC9XE,GAAsC,WACxC,IAAI18C,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA0BtC,GAAwC,SAAUgN,EAAY1T,EAAQ2N,EAAKgG,GAC7E,IAEIxN,EAFAyN,EAAIC,UAAUpK,OACdqK,EAAIF,EAAI,EAAI5T,EAAkB,OAAT2T,EAAgBA,EAAOrW,OAAOyW,yBAAyB/T,EAAQ2N,GAAOgG,EAE/F,GAAuB,kBAAZK,SAAoD,oBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASP,EAAY1T,EAAQ2N,EAAKgG,QAAW,IAAK,IAAIjI,EAAIgI,EAAWjK,OAAS,EAAGiC,GAAK,EAAGA,KAC1KvF,EAAIuN,EAAWhI,MAAIoI,GAAKF,EAAI,EAAIzN,EAAE2N,GAAKF,EAAI,EAAIzN,EAAEnG,EAAQ2N,EAAKmG,GAAK3N,EAAEnG,EAAQ2N,KAASmG,GAE5F,OAAOF,EAAI,GAAKE,GAAKxW,OAAOM,eAAeoC,EAAQ2N,EAAKmG,GAAIA,GAG1D,GAAkC,SAAUK,EAAYC,GAC1D,OAAO,SAAUpU,EAAQ2N,GACvByG,EAAUpU,EAAQ2N,EAAKwG,KAQhB4wC,GAAiC,0BACjCC,GAAqC,2BAUhD,SAASC,GAAuB3wC,EAAmB4wC,GACjD,OAAO5wC,EAAkB6wC,WAAWxzC,SAAS+uC,eAAexuB,SAASgzB,GAGhE,SAASE,GAA4D9wC,EAAmB+wC,GAC7F,IAAIC,EATN,SAA6ChxC,EAAmB+wC,GAC9D,OAAO/wC,EAAkBixC,aAAaF,EAAOrlD,QAQfwlD,CAAoClxC,EAAmB+wC,GAGrF,OAhBF,SAAiC/wC,EAAmB+wC,EAAQH,GAC1D,IAAI,KAAcA,EAAYG,GAAQ3wC,OAAOJ,GAa7CmxC,CAAwBH,EAAyBD,EAAQN,IAElD,CACLO,wBAAyBA,EACzBI,4BAHgC,IAAI,KAAcV,IAAoC,GAAMtwC,OAAO4wC,IAOvG,IAAI,GAEJ,SAAUr+C,GAGR,SAAS0+C,EAA6BlH,EAAWC,EAAqBr/C,EAASiV,GAC7E,IAAIhW,EAAQ2I,EAAOE,KAAKjK,KAAMuhD,EAAWC,EAAqBr/C,IAAYnC,KAO1E,OALAoB,EAAMsK,UAAUw8C,GAA4D9wC,EAAmB,CAC7FtU,OAAQ1B,EAAMkwB,QACdo3B,iBAAkBtnD,IACjBgnD,yBAEIhnD,EAIT,OAdA,GAAUqnD,EAA8B1+C,GAaxC0+C,EAA+B,GAAW,CAAC,GAAQ,EAAG,OAAsBA,GAd9E,CAgBE,IAIE,GAEJ,SAAU1+C,GAGR,SAAS4+C,EAAuBpH,EAAWC,EAAqBr/C,EAASiV,EAAmBwxC,QAClE,IAApBA,IACFA,GAAkB,GAGpB,IAAIxnD,EAAQ2I,EAAOE,KAAKjK,KAAMuhD,EAAWC,EAAqBoH,EAAiBzmD,IAAYnC,KAO3F,OALAoB,EAAMsK,UAAUw8C,GAA4D9wC,EAAmB,CAC7FtU,OAAQ1B,EAAMslD,SAASp1B,QACvBo3B,iBAAkBtnD,EAAMslD,WACvB0B,yBAEIhnD,EAIT,OAlBA,GAAUunD,EAAwB5+C,GAiBlC4+C,EAAyB,GAAW,CAAC,GAAQ,EAAG,OAAsBA,GAlBxE,CAoBE,IAGF,KAAoBE,iCAAiC,CACnD7iD,GAAI,uBACJyE,OAAQ,IAGRgf,KAAM,KAAerB,IAAI,IAAI,KAAsBy/B,IAAiC,IAAI,KAAqBC,IAAoC,IACjJt9C,QAAS,GAGTmL,UAAW,CAAC,KAKZ8C,QAAS,SAAiB9N,EAAUm+C,GAClC,IAAIX,EAASJ,GAAuBp9C,EAAS/J,IAAI,MAAqBinD,IAElEM,GACoBA,EAAOO,iBACbpD,uBAItB,KAAoBuD,iCAAiC,CACnD7iD,GAAI,mBACJyE,OAAQ,IAGRgf,KAAM,IAAI,KAAkB,CAAC,IAAI,KAAsBo+B,IAAiC,IAAI,KAAqBC,IAAoC,KACrJt9C,QAAS,GAGTmL,UAAW,CAAC,KAKZ8C,QAAS,SAAiB9N,EAAUm+C,GAClC,IAAIX,EAASJ,GAAuBp9C,EAAS/J,IAAI,MAAqBinD,IAElEM,GACoBA,EAAOO,iBACbtD,mBChKtB,IAAI,GAAsC,WACxC,IAAIp8C,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GAyCtCu/C,GAAuBj/C,EAAA,EAAa,aAAc,QAClDk/C,GAA6Bl/C,EAAA,EAAa,mBAAoB,QAC9Dm/C,GAA+Bn/C,EAAA,EAAa,4BAA6B,kBACzEo/C,GAA2Bp/C,EAAA,EAAa,wBAAyB,cACjEq/C,GAAkCr/C,EAAA,EAAa,4BAA6B,qBAC5Es/C,GAAsBt/C,EAAA,EAAa,oBAAqB,SACxDu/C,GAA0Bv/C,EAAA,EAAa,gBAAiB,WACxDw/C,GAAgCx/C,EAAA,EAAa,sBAAuB,WACpEy/C,GAAwBz/C,EAAA,EAAa,sBAAuB,WAC5D0/C,GAA4B1/C,EAAA,EAAa,yBAA0B,eACnE2/C,GAAoC3/C,EAAA,EAAa,4BAA6B,uBAC9E4/C,GAAgC5/C,EAAA,EAAa,0BAA2B,+Fb4CjD,Oa3CvB6/C,GAAuB7/C,EAAA,EAAa,wBAAyB,cAC7D8/C,GAAiB9/C,EAAA,EAAa,kBAAmB,cAKjD+/C,GAA0B,GAC1BC,GAA0B,IAE3BD,GAA0B,EAAI,GAE/B,GAEI,EAGFE,GAAyB,GAIzBC,GAEJ,WASE,OARA,SAA4Bp/B,GAC1B5qB,KAAK4qB,gBAAkBA,EACvB5qB,KAAKiqD,WAAaF,GAClB/pD,KAAK8Y,mBAAoB,EACzB9Y,KAAKgrB,QAAUvW,SAASyE,cAAc,OACtClZ,KAAKgrB,QAAQrb,UAAY,sBAN7B,GAcI,GAEJ,SAAU5F,GAGR,SAASmgD,EAAWC,EAAYt/C,EAAY4Z,EAAO+8B,EAAqBhS,EAAmBp4B,EAAmBq4B,GAC5G,IAAIruC,EAAQ2I,EAAOE,KAAKjK,OAASA,KAuJjC,OArJAoB,EAAMgpD,YAAcD,EACpB/oD,EAAMipD,YAAcx/C,EACpBzJ,EAAMwe,OAAS6E,EACfrjB,EAAMkpD,qBAAuB9I,EAC7BpgD,EAAMolB,mBAAqBgpB,EAC3BpuC,EAAMk7B,mBAAqBllB,EAC3BhW,EAAMwuC,YAAa,EACnBxuC,EAAMmpD,mBAAoB,EAC1BnpD,EAAMopD,oBAAqB,EAC3BppD,EAAMqpD,sBAAwB,IAAI,IAAQ,KAE1CrpD,EAAMsK,UAAU,YAAa,WAC3B,OAAOtK,EAAMqpD,sBAAsBhtC,YAGrCrc,EAAMsK,UAAUtK,EAAMwe,OAAOupB,yBAAyB,SAAUj9B,GAC9D,OAAO9K,EAAMgoC,gBAAgBl9B,MAG/B9K,EAAMspD,gBAENtpD,EAAMupD,iBAENvpD,EAAMwpD,wBAENxpD,EAAMsK,UAAUtK,EAAMgpD,YAAY99C,yBAAyB,SAAUJ,GAoBnE,GAnBIA,EAAEkU,WACAhf,EAAMgpD,YAAYv+C,mBAAmBuU,UAEvChf,EAAMwe,OAAOuwB,OAAO,CAClB5G,mBAAmB,IAClB,GAGLnoC,EAAMupD,kBAGJz+C,EAAE2+C,YACJzpD,EAAMwpD,wBAGJ1+C,EAAE4+C,sBACJ1pD,EAAM2pD,6BAGJ7+C,EAAEJ,YAAa,CACjB,IAAIk/C,EAAqB5pD,EAAMgpD,YAAYv+C,mBAAmBC,YAAYm/C,KAAKD,mBAE3EA,IAAuB5pD,EAAM6sB,YAC/B7sB,EAAM6sB,UAAY,IAAI+7B,GAAmB,GAEzC5oD,EAAM8pD,kBAGHF,GAAsB5pD,EAAM6sB,WAC/B7sB,EAAM+pD,sBAKZ/pD,EAAM2pD,6BAEN3pD,EAAMsK,UAAUtK,EAAMgpD,YAAYprB,2BAA2B,WACvD59B,EAAMwuC,YACRxuC,EAAMgqD,sCAIVhqD,EAAMsK,UAAUtK,EAAMgpD,YAAYiB,uBAAuB,WACvD,GAAIjqD,EAAMwuC,WAAY,CACpB,IAAI0b,EAAmBlqD,EAAMipD,YAAYkB,sBAErCD,GAAoBA,IAAqBlqD,EAAMwe,OAAO0pB,eACxDloC,EAAMwe,OAAOuwB,OAAO,CAClB7G,aAAcgiB,IACb,GAEHlqD,EAAMoqD,WAAW/H,cAKvBriD,EAAMqqD,kBAAoBpkB,GAA2B7vB,OAAOJ,GAC5DhW,EAAMsqD,kBAAoBtqD,EAAMsK,UAAU0Y,GAAA,EAAehjB,EAAMoqD,WAAW9E,SAASrC,eAEnFjjD,EAAMsK,UAAUtK,EAAMsqD,kBAAkBC,WAAW,WACjDvqD,EAAMqqD,kBAAkBzzC,KAAI,GAE5B5W,EAAMwqD,wBAGRxqD,EAAMsK,UAAUtK,EAAMsqD,kBAAkBG,UAAU,WAChDzqD,EAAMqqD,kBAAkBzzC,KAAI,MAG9B5W,EAAM0qD,qBAAuBxkB,GAA8B9vB,OAAOJ,GAClEhW,EAAM2qD,qBAAuB3qD,EAAMsK,UAAU0Y,GAAA,EAAehjB,EAAM4qD,iBAAiB3H,eAEnFjjD,EAAMsK,UAAUtK,EAAM2qD,qBAAqBJ,WAAW,WACpDvqD,EAAM0qD,qBAAqB9zC,KAAI,GAE/B5W,EAAMwqD,wBAGRxqD,EAAMsK,UAAUtK,EAAM2qD,qBAAqBF,UAAU,WACnDzqD,EAAM0qD,qBAAqB9zC,KAAI,MAGjC5W,EAAMgpD,YAAY/Z,iBAAiBjvC,GAE/BA,EAAMgpD,YAAYv+C,mBAAmBC,YAAYm/C,KAAKD,qBACxD5pD,EAAM6sB,UAAY,IAAI+7B,GAAmB,IAG3C5oD,EAAMuvC,YAAYlB,EAAaM,YAE/B3uC,EAAMsK,UAAU+jC,EAAamB,cAAcxvC,EAAMuvC,YAAYE,KAAKzvC,KAElEA,EAAMsK,UAAUtK,EAAMgpD,YAAYh+C,iBAAiB,WAC5ChL,EAAMwuC,iBAIe5tC,IAAtBZ,EAAM8sB,aAIV9sB,EAAMgpD,YAAY75B,gBAAgB,SAAU5lB,GACtCvJ,EAAM8sB,aACRvjB,EAASyjB,WAAWhtB,EAAM8sB,aAG5B9sB,EAAM8sB,iBAAclsB,OAIxBZ,EAAMsK,UAAUtK,EAAMgpD,YAAYt5B,kBAAkB,SAAU5kB,GACxDA,EAAE6kB,iBACJ3vB,EAAM6qD,kBAMRnqD,WAAW,WACTV,EAAM6qD,mBACL,MAGE7qD,EA27BT,OArlCA,GAAU8oD,EAAYngD,GA8JtBmgD,EAAWvpD,UAAUgM,MAAQ,WAC3B,OAAOu9C,EAAWx9C,IAGpBw9C,EAAWvpD,UAAUiZ,WAAa,WAChC,OAAO5Z,KAAKiZ,UAGdixC,EAAWvpD,UAAUmT,YAAc,WACjC,OAAI9T,KAAK4vC,WACA,CACL51B,WAAY,GAMT,MAITkwC,EAAWvpD,UAAUyoC,gBAAkB,SAAUl9B,GAC/C,GAAIA,EAAEo9B,aAAc,CAClB,IACEtpC,KAAKwqD,oBAAqB,EAE1BxqD,KAAKwrD,WAAW1E,SAAS9mD,KAAK4f,OAAO0pB,cACrC,QACAtpC,KAAKwqD,oBAAqB,EAG5BxqD,KAAK2qD,iBAsDP,GAnDIz+C,EAAE6/B,gBACJ/rC,KAAKgsD,iBAAiBzpD,MAAQvC,KAAK4f,OAAOmsB,eAGxC7/B,EAAEqkC,aACAvwC,KAAK4f,OAAO2wB,WACdvwC,KAAKksD,UAELlsD,KAAK2vC,OAAM,IAIXzjC,EAAEq9B,oBACAvpC,KAAK4f,OAAO2pB,kBACTvpC,KAAKoqD,YAAYv+C,mBAAmBuU,UAAapgB,KAAKuqD,oBACzDvqD,KAAKuqD,mBAAoB,EACzBvqD,KAAKgsD,iBAAiB51B,MAAQp2B,KAAKwrD,WAAW9E,SAAStwB,MAEvDp2B,KAAK2qD,kBAGH3qD,KAAKuqD,oBACPvqD,KAAKuqD,mBAAoB,EAEzBvqD,KAAK2qD,mBAKPz+C,EAAEs9B,SACJxpC,KAAKwrD,WAAWnE,SAASrnD,KAAK4f,OAAO4pB,SAGnCt9B,EAAEu9B,WACJzpC,KAAKwrD,WAAWpE,cAAcpnD,KAAK4f,OAAO6pB,WAGxCv9B,EAAEw9B,WACJ1pC,KAAKwrD,WAAWtE,iBAAiBlnD,KAAK4f,OAAO8pB,WAG3Cx9B,EAAEm9B,cACArpC,KAAK4f,OAAOypB,YACdrpC,KAAKmsD,qBAAqB5d,SAAU,EAEpCvuC,KAAKmsD,qBAAqB5d,SAAU,EAGtCvuC,KAAKorD,oCAGHl/C,EAAEo9B,cAAgBp9B,EAAEm+B,cAAgBn+B,EAAEu+B,gBAAiB,CACzD,IAAI2hB,EAAiBpsD,KAAK4f,OAAO0pB,aAAa/8B,OAAS,GAAkC,IAA7BvM,KAAK4f,OAAOyqB,aACxEjmB,GAAA,EAAgBpkB,KAAKiZ,SAAU,aAAcmzC,GAE7CpsD,KAAKqsD,sBAELrsD,KAAK2qD,kBAGHz+C,EAAEo9B,cAAgBp9B,EAAEsmC,eACtBxyC,KAAKisD,kBAGH//C,EAAEwmC,eACJ1yC,KAAKssD,yBAITpC,EAAWvpD,UAAU2rD,sBAAwB,WAC3CtsD,KAAKyqD,sBAAsBn1C,QAAQtV,KAAKusD,eAAe1b,KAAK7wC,QAG9DkqD,EAAWvpD,UAAU4rD,eAAiB,WAChCvsD,KAAK4f,OAAO0pB,cACdtpC,KAAKwrD,WAAW9E,SAASxB,eAGvBllD,KAAK4f,OAAOmsB,eACd/rC,KAAKgsD,iBAAiB9G,gBAI1BgF,EAAWvpD,UAAU0rD,oBAAsB,WAczC,IAAIniD,EAEJ,GAfAlK,KAAKqyC,cAAcxmB,MAAM2gC,SAAW3C,GAA0B,KAE1D7pD,KAAK4f,OAAOyqB,cblRO,MamRrBrqC,KAAKqyC,cAAc7hC,MAAQk5C,GAE3B1pD,KAAKqyC,cAAc7hC,MAAQ,GAIzBxQ,KAAKqyC,cAAcoa,YACrBzsD,KAAKqyC,cAAcqa,YAAY1sD,KAAKqyC,cAAcoa,YAKhDzsD,KAAK4f,OAAOyqB,aAAe,EAAG,CAChC,IAAIA,EAAehe,OAAOrsB,KAAK4f,OAAOyqB,cAElCrqC,KAAK4f,OAAOyqB,cblSK,QamSnBA,GAAgB,KAGlB,IAAII,EAAkBpe,OAAOrsB,KAAK4f,OAAO6qB,iBAEjB,MAApBA,IACFA,EAAkB,KAGpBvgC,EAAQ+vB,GAAA,EAAe0vB,GAAsBlf,EAAiBJ,QAE9DngC,EAAQ0/C,GAGV5pD,KAAKqyC,cAAc/4B,YAAY7E,SAASkqC,eAAez0C,IAEvD2/C,GAA0BxoD,KAAKw5B,IAAIgvB,GAAyB7pD,KAAKqyC,cAAcsa,cASjFzC,EAAWvpD,UAAUyqD,iCAAmC,WACtD,IAAIl+C,EAAYlN,KAAKoqD,YAAYp0C,eAE7B42C,IAAc1/C,IAAYA,EAAUe,kBAAoBf,EAAUmE,eAAiBnE,EAAUgB,cAAgBhB,EAAUoE,WACvH08B,EAAYhuC,KAAKmsD,qBAAqB5d,QAE1CvuC,KAAKmsD,qBAAqBtI,WAAW7jD,KAAK4vC,aAAe5B,GAAa4e,KAGxE1C,EAAWvpD,UAAUgqD,eAAiB,WACpC3qD,KAAKwrD,WAAW3H,WAAW7jD,KAAK4vC,YAEhC5vC,KAAKgsD,iBAAiBnI,WAAW7jD,KAAK4vC,YAAc5vC,KAAKuqD,mBAEzDvqD,KAAKorD,mCAELprD,KAAK6sD,UAAUhJ,WAAW7jD,KAAK4vC,YAE/B,IAAIkd,EAAsB9sD,KAAK4f,OAAO0pB,aAAa/8B,OAAS,EACxD89B,IAAerqC,KAAK4f,OAAOyqB,aAE/BrqC,KAAK+sD,SAASlJ,WAAW7jD,KAAK4vC,YAAckd,GAAuBziB,GAEnErqC,KAAKgtD,SAASnJ,WAAW7jD,KAAK4vC,YAAckd,GAAuBziB,GAEnErqC,KAAKitD,YAAYpJ,WAAW7jD,KAAK4vC,YAAc5vC,KAAKuqD,mBAAqBuC,GAEzE9sD,KAAKktD,eAAerJ,WAAW7jD,KAAK4vC,YAAc5vC,KAAKuqD,mBAAqBuC,GAE5E1oC,GAAA,EAAgBpkB,KAAKiZ,SAAU,iBAAkBjZ,KAAKuqD,mBAEtDvqD,KAAKmtD,kBAAkBC,YAAY,YAAaptD,KAAKuqD,mBAErDvqD,KAAKmtD,kBAAkBC,YAAY,SAAUptD,KAAKuqD,mBAElDvqD,KAAKmtD,kBAAkBE,YAAYrtD,KAAKuqD,mBAExC,IAAI+C,GAActtD,KAAKoqD,YAAYv+C,mBAAmBuU,SAEtDpgB,KAAKmtD,kBAAkBtJ,WAAW7jD,KAAK4vC,YAAc0d,IAGvDpD,EAAWvpD,UAAUurD,QAAU,WAC7B,IAAI9qD,EAAQpB,KAEZ,IAAKA,KAAK4vC,WAAY,CACpB5vC,KAAK4vC,YAAa,EAElB,IAAI1iC,EAAYlN,KAAKoqD,YAAYp0C,iBAEf9I,IAAYA,EAAUe,kBAAoBf,EAAUmE,eAAiBnE,EAAUgB,cAAgBhB,EAAUoE,YAExGtR,KAAKoqD,YAAYv+C,mBAAmBC,YAAYm/C,KAAKsC,oBACtEvtD,KAAKmsD,qBAAqB5d,SAAU,EAEpCvuC,KAAKmsD,qBAAqB5d,SAAU,EAGtCvuC,KAAK4qD,wBAEL5qD,KAAK2qD,iBAEL7oD,WAAW,WACTsiB,GAAA,EAAahjB,EAAM6X,SAAU,WAE7B7X,EAAM6X,SAASk1B,aAAa,cAAe,UAC1C,GAEHrsC,WAAW,WACTV,EAAMoqD,WAAWvnD,YAChB,KAEHjE,KAAKoqD,YAAYoD,oBAAoBxtD,MAErC,IAAIytD,GAAwB,EAE5B,GAAIztD,KAAKoqD,YAAYv+C,mBAAmBC,YAAYm/C,KAAKyC,+BAAiCxgD,EAAW,CACnG,IAAI8d,EAAUhrB,KAAKoqD,YAAYxwC,aAE/B,GAAIoR,EAAS,CACX,IAAIpH,EAAeQ,GAAA,EAA2B4G,GAE1C2iC,EAAc3tD,KAAKoqD,YAAYzmC,2BAA2BzW,EAAUC,oBAEpEygD,EAAYhqC,EAAapS,MAAQm8C,EAAcA,EAAYn8C,KAAO,GAClEq8C,EAAWF,EAAcA,EAAY9pC,IAAM,EAE/C,GAAI7jB,KAAKiuB,WAAa4/B,EAAW7tD,KAAKiuB,UAAUg8B,WAAY,CACtD/8C,EAAUmE,cAAgBnE,EAAUe,kBACtCw/C,GAAwB,GAG1B,IAAIK,EAAmB1pC,GAAA,EAAqBpkB,KAAKiZ,UAAUzH,KAEvDo8C,EAAYE,IACdL,GAAwB,GAG1B,IAAIM,EAAY/tD,KAAKoqD,YAAYzmC,2BAA2BzW,EAAUiB,kBAExDyV,EAAapS,MAAQu8C,EAAYA,EAAUv8C,KAAO,GAElDs8C,IACZL,GAAwB,KAMhCztD,KAAKkrD,cAAcuC,KAIvBvD,EAAWvpD,UAAUgvC,MAAQ,SAAUqe,GACjChuD,KAAK4vC,aACP5vC,KAAK4vC,YAAa,EAElB5vC,KAAK2qD,iBAELvmC,GAAA,EAAgBpkB,KAAKiZ,SAAU,WAE/BjZ,KAAKiZ,SAASk1B,aAAa,cAAe,QAE1CnuC,KAAKwrD,WAAW5D,eAEZoG,GACFhuD,KAAKoqD,YAAY50C,QAGnBxV,KAAKoqD,YAAYoD,oBAAoBxtD,MAErCA,KAAKmrD,oBAITjB,EAAWvpD,UAAUsrD,gBAAkB,WACrC,IAAI7qD,EAAQpB,KAIZ,GAFyBA,KAAKoqD,YAAYv+C,mBAAmBC,YAAYm/C,KAAKD,oBAQ9E,GAAKhrD,KAAK4vC,WAAV,CAIA,IAAIqe,EAAWjuD,KAAKiuB,eAEKjsB,IAArBhC,KAAKkuB,aAA8B+/B,GAIvCjuD,KAAKoqD,YAAY75B,gBAAgB,SAAU5lB,GACrCvJ,EAAMwe,OAAO2pB,kBACf0kB,EAAShE,WAnfc,GAqfvBgE,EAAShE,WAAaF,GAGxB3oD,EAAM8sB,YAAcvjB,EAASwjB,QAAQ8/B,GAErC7sD,EAAMgpD,YAAY8D,aAAa9sD,EAAMgpD,YAAY+D,eAAiBF,EAAShE,oBAxB3EjqD,KAAKmrD,mBA4BTjB,EAAWvpD,UAAUuqD,cAAgB,SAAUkD,GAC7C,IAAIhtD,EAAQpB,UAES,IAAjBouD,IACFA,GAAe,GAGjB,IAAIH,EAAWjuD,KAAKiuB,UAEfjuB,KAAK4vC,YAAeqe,GAIzBjuD,KAAKoqD,YAAY75B,gBAAgB,SAAU5lB,GACzC,IAAI0jD,EAAmBtE,QAEG/nD,IAAtBZ,EAAM8sB,aACJ9sB,EAAMwe,OAAO2pB,mBACf0kB,EAAShE,WAhhBY,GAihBrBoE,EAjhBqB,GAihByBtE,KAE9CkE,EAAShE,WAAaF,GACtBsE,EAAmBtE,GAphBE,IAuhBvBp/C,EAASyjB,WAAWhtB,EAAM8sB,cAE1B+/B,EAAShE,WAAaF,GAGxB3oD,EAAM8sB,YAAcvjB,EAASwjB,QAAQ8/B,GAEjCG,GACFhtD,EAAMgpD,YAAY8D,aAAa9sD,EAAMgpD,YAAY+D,eAAiBE,MAKxEnE,EAAWvpD,UAAUwqD,gBAAkB,WACrC,IAAI/pD,EAAQpB,KAEZA,KAAKoqD,YAAY75B,gBAAgB,SAAU5lB,QACf3I,IAAtBZ,EAAM8sB,cACRvjB,EAASyjB,WAAWhtB,EAAM8sB,aAC1B9sB,EAAM8sB,iBAAclsB,EAEhBZ,EAAM6sB,YACR7sB,EAAMgpD,YAAY8D,aAAa9sD,EAAMgpD,YAAY+D,eAAiB/sD,EAAM6sB,UAAUg8B,YAElF7oD,EAAM6sB,eAAYjsB,OAM1BkoD,EAAWvpD,UAAUgwC,YAAc,SAAU5gC,GAC3C,IAAIkhC,EAAc,CAChBzD,wBAAyBz9B,EAAMG,SAAS,KACxC4wC,gBAAiB/wC,EAAMG,SAAS,KAChC6wC,gBAAiBhxC,EAAMG,SAAS,KAChC2xC,YAAa9xC,EAAMG,SAAS,KAC5B+wC,8BAA+BlxC,EAAMG,SAAS,KAC9C4xC,8BAA+B/xC,EAAMG,SAAS,KAC9C8wC,0BAA2BjxC,EAAMG,SAAS,KAC1CixC,iCAAkCpxC,EAAMG,SAAS,KACjD6xC,iCAAkChyC,EAAMG,SAAS,KACjDgxC,6BAA8BnxC,EAAMG,SAAS,KAC7CmxC,+BAAgCtxC,EAAMG,SAAS,KAC/C8xC,+BAAgCjyC,EAAMG,SAAS,KAC/CkxC,2BAA4BrxC,EAAMG,SAAS,MAG7ClQ,KAAKwrD,WAAW3/B,MAAMolB,GAEtBjxC,KAAKgsD,iBAAiBngC,MAAMolB,IAG9BiZ,EAAWvpD,UAAUiqD,sBAAwB,WAC3C,GAAK5qD,KAAK4vC,WAAV,CAIA,IAAI0e,EAActuD,KAAKoqD,YAAYv+C,mBAAmBg/C,WAAWz0B,MAE7Dm4B,EAAevuD,KAAKoqD,YAAYv+C,mBAAmBg/C,WAAW0D,aAE9DC,GAAsB,EACtBC,GAAoB,EACpBC,GAAmB,EAEvB,GAAI1uD,KAAK2uD,SAGP,GAFkBvqC,GAAA,EAAkBpkB,KAAKiZ,UAzmBf,IA+mBxB,OAFAjZ,KAAKiZ,SAAS4S,MAAM+iC,SAAWN,EAAc,GAAKC,EAAe,GAAK,UACtEvuD,KAAKgsD,iBAAiB3H,aAAax4B,MAAMuK,MAAQhS,GAAA,EAAkBpkB,KAAKwrD,WAAW9E,SAASrC,cAAgB,MA0BhH,GArBIwK,IAAiCN,GAAgBD,IACnDG,GAAoB,GAGlBI,IAAiCN,EAAe1E,IAA2ByE,IAC7EI,GAAmB,GAGjBG,IAAiCN,EAAe1E,IAA2ByE,EAAc,KAC3FE,GAAsB,GAGxBpqC,GAAA,EAAgBpkB,KAAKiZ,SAAU,wBAAyBu1C,GACxDpqC,GAAA,EAAgBpkB,KAAKiZ,SAAU,qBAAsBy1C,GACrDtqC,GAAA,EAAgBpkB,KAAKiZ,SAAU,sBAAuBw1C,GAEjDC,GAAqBF,IAExBxuD,KAAKiZ,SAAS4S,MAAM+iC,SAAWN,EAAc,GAAKC,EAAe,GAAK,MAGpEvuD,KAAK2uD,SAAU,CACjB,IAAIG,EAAiB1qC,GAAA,EAAkBpkB,KAAKwrD,WAAW9E,SAASrC,cAE5DyK,EAAiB,IACnB9uD,KAAKgsD,iBAAiB3H,aAAax4B,MAAMuK,MAAQ04B,EAAiB,SAMxE5E,EAAWvpD,UAAUouD,eAAiB,WACpC/uD,KAAKwrD,WAAW/H,SAGhBzjD,KAAKwrD,WAAWh2C,SAGlB00C,EAAWvpD,UAAUquD,kBAAoB,WACvChvD,KAAKgsD,iBAAiBvI,SAGtBzjD,KAAKgsD,iBAAiBx2C,SAGxB00C,EAAWvpD,UAAUqwC,qBAAuB,WAC1ChxC,KAAKwrD,WAAWxa,wBAGlBkZ,EAAWvpD,UAAUirD,mBAAqB,WACxC,GAAK5rD,KAAKoqD,YAAYx9C,YAIlB5M,KAAKmsD,qBAAqB5d,QAAS,CACrC,IAAIrhC,EAAYlN,KAAKoqD,YAAYp0C,eAEL,IAAxB9I,EAAUoE,WAAmBpE,EAAUmE,cAAgBnE,EAAUe,kBACnEf,EAAYA,EAAUsF,eAAetF,EAAUmE,cAAgB,EAAGrR,KAAKoqD,YAAYt9C,WAAWyE,iBAAiBrE,EAAUmE,cAAgB,KAG3I,IAAImhC,EAAexyC,KAAK4f,OAAO4yB,aAE3BtlC,EAAUe,kBAAoBf,EAAUmE,gBACrC,KAAM8xB,YAAYj2B,EAAWslC,IAEhCxyC,KAAK4f,OAAOuwB,OAAO,CACjB9G,YAAan8B,IACZ,MAMXg9C,EAAWvpD,UAAUsuD,sBAAwB,SAAU/iD,GAEjDA,EAAEgjD,cACJhjD,EAAE+wB,mBAINitB,EAAWvpD,UAAUwuD,oBAAsB,SAAUjjD,GACnD,OAAIA,EAAEuD,OAAO,IAGXzP,KAAKoqD,YAAYgF,UAAUznB,GAASG,qBAAqBp9B,MAAMpH,UAAKtB,EAAW,WAE/EkK,EAAE8wB,kBAIA9wB,EAAEuD,OAAO,OAKXzP,KAAKoqD,YAAYgF,UAAUznB,GAASI,yBAAyBr9B,MAAMpH,UAAKtB,EAAW,WAEnFkK,EAAE8wB,kBAIA9wB,EAAEuD,OAAO,IAGPzP,KAAKuqD,kBACPvqD,KAAKgsD,iBAAiBx2C,QAEtBxV,KAAKwrD,WAAWlE,4BAGlBp7C,EAAE8wB,kBAIA9wB,EAAEuD,OAAO,OAKXzP,KAAKoqD,YAAY50C,aAEjBtJ,EAAE8wB,uBAPJ,GAYFktB,EAAWvpD,UAAU0uD,uBAAyB,SAAUnjD,GACtD,OAAIA,EAAEuD,OAAO,IAGXzP,KAAKqqD,YAAYlyB,eAEjBjsB,EAAE8wB,kBAIA9wB,EAAEuD,OAAO,OAKXzP,KAAKqqD,YAAY7d,kBAEjBtgC,EAAE8wB,kBAIA9wB,EAAEuD,OAAO,IAGXzP,KAAKwrD,WAAWlE,4BAEhBp7C,EAAE8wB,kBAIA9wB,EAAEuD,OAAO,OAKXzP,KAAKwrD,WAAWh2C,aAEhBtJ,EAAE8wB,kBAIA9wB,EAAEuD,OAAO,OAKXzP,KAAKoqD,YAAY50C,aAEjBtJ,EAAE8wB,uBAPJ,GAaFktB,EAAWvpD,UAAU2uD,qBAAuB,SAAUC,GACpD,OAAO,GAGTrF,EAAWvpD,UAAU6uD,sBAAwB,SAAUD,GACrD,OAAO,GAGTrF,EAAWvpD,UAAU8uD,uBAAyB,SAAUF,GACtD,OAAO,KAITrF,EAAWvpD,UAAUsvC,oBAAsB,SAAUa,GACnD,IAAIxpB,EAAKtnB,KAAKwmB,mBAAmBe,iBAAiBupB,GAElD,OAAKxpB,EAIE,KAAOA,EAAGG,WAAa,IAHrB,IAMXyiC,EAAWvpD,UAAU+uD,eAAiB,WACpC,IAAItuD,EAAQpB,KAGZA,KAAKwrD,WAAaxrD,KAAK0L,UAAU,IAAI,GAAuB,KAAM1L,KAAKsqD,qBAAsB,CAC3Fl0B,MAl0BsBu5B,IAm0BtBzlD,MAAO6+C,GACPpH,YAAaqH,GACbzC,yBAA0BvmD,KAAKiwC,oBAAoBtI,GAASS,4BAC5Doe,sBAAuBxmD,KAAKiwC,oBAAoBtI,GAASU,wBACzDoe,iBAAkBzmD,KAAKiwC,oBAAoBtI,GAASW,oBACpD4Z,WAAY,SAAoB3/C,GAC9B,GAAqB,IAAjBA,EAAMgK,SAAiBnL,EAAMoqD,WAAW5V,WAC1C,OAAO,KAGT,IAGE,OADA,IAAI1vB,OAAO3jB,GACJ,KACP,MAAO2J,GACP,MAAO,CACLhL,QAASgL,EAAE4L,YAIhB9X,KAAKs8B,oBAAoB,IAE5Bt8B,KAAKwrD,WAAWnE,WAAWrnD,KAAK4f,OAAO4pB,SAEvCxpC,KAAKwrD,WAAWtE,mBAAmBlnD,KAAK4f,OAAO8pB,WAE/C1pC,KAAKwrD,WAAWpE,gBAAgBpnD,KAAK4f,OAAO6pB,WAE5CzpC,KAAK0L,UAAU1L,KAAKwrD,WAAW1uB,UAAU,SAAU5wB,GACjD,OAAO9K,EAAM+tD,oBAAoBjjD,MAGnClM,KAAK0L,UAAU1L,KAAKwrD,WAAW9E,SAASnpC,YAAY,WAC9Cnc,EAAMopD,oBAIVppD,EAAMwe,OAAOuwB,OAAO,CAClB7G,aAAcloC,EAAMoqD,WAAWx2B,aAC9B,MAGLh1B,KAAK0L,UAAU1L,KAAKwrD,WAAW1F,kBAAkB,WAC/C1kD,EAAMwe,OAAOuwB,OAAO,CAClB3G,QAASpoC,EAAMoqD,WAAW5V,WAC1BnM,UAAWroC,EAAMoqD,WAAWrE,gBAC5Bzd,UAAWtoC,EAAMoqD,WAAWvE,qBAC3B,MAGLjnD,KAAK0L,UAAU1L,KAAKwrD,WAAWrF,uBAAuB,SAAUj6C,GAC1DA,EAAEuD,OAAO,OAKPrO,EAAMmpD,oBACRnpD,EAAM4qD,iBAAiBx2C,QAEvBtJ,EAAE8wB,qBAKJxoB,GAAA,GACFxU,KAAK0L,UAAU1L,KAAKwrD,WAAWxrB,YAAY,SAAU9zB,GACnD,OAAO9K,EAAM6tD,sBAAsB/iD,MAIvClM,KAAKqyC,cAAgB59B,SAASyE,cAAc,OAC5ClZ,KAAKqyC,cAAc1iC,UAAY,eAE/B3P,KAAKqsD,sBAGLrsD,KAAK+sD,SAAW/sD,KAAK0L,UAAU,IAAI,GAAa,CAC9CxB,MAAO++C,GAA+BjpD,KAAKiwC,oBAAoBtI,GAASI,yBACxEp4B,UAAW,WACXigD,UAAW,WACTxuD,EAAMgpD,YAAYgF,UAAUznB,GAASI,yBAAyBr9B,MAAMpH,UAAKtB,EAAW,UAIxFhC,KAAKgtD,SAAWhtD,KAAK0L,UAAU,IAAI,GAAa,CAC9CxB,MAAOg/C,GAA2BlpD,KAAKiwC,oBAAoBtI,GAASG,qBACpEn4B,UAAW,OACXigD,UAAW,WACTxuD,EAAMgpD,YAAYgF,UAAUznB,GAASG,qBAAqBp9B,MAAMpH,UAAKtB,EAAW,UAGpF,IAAI6tD,EAAWp7C,SAASyE,cAAc,OA2DtC,OA1DA22C,EAASlgD,UAAY,YACrBkgD,EAASv2C,YAAYtZ,KAAKwrD,WAAWxgC,SACrC6kC,EAASv2C,YAAYtZ,KAAKqyC,eAC1Bwd,EAASv2C,YAAYtZ,KAAK+sD,SAAS/hC,SACnC6kC,EAASv2C,YAAYtZ,KAAKgtD,SAAShiC,SAEnChrB,KAAKmsD,qBAAuBnsD,KAAK0L,UAAU,IAAIokD,GAAe,CAC5D1P,OAAQyP,EACRr/C,MAAO24C,GAAkCnpD,KAAKiwC,oBAAoBtI,GAASY,0BAC3E2H,SAAU,WACR,GAAI9uC,EAAM+qD,qBAAqB5d,SAC7B,GAAIntC,EAAMgpD,YAAYx9C,WAAY,CAChC,IAAIM,EAAY9L,EAAMgpD,YAAYp0C,eAEN,IAAxB9I,EAAUoE,WAAmBpE,EAAUmE,cAAgBnE,EAAUe,kBACnEf,EAAYA,EAAUsF,eAAetF,EAAUmE,cAAgB,EAAGjQ,EAAMgpD,YAAYt9C,WAAWyE,iBAAiBrE,EAAUmE,cAAgB,KAGvInE,EAAU+B,WACb7N,EAAMwe,OAAOuwB,OAAO,CAClB9G,YAAan8B,IACZ,SAIP9L,EAAMwe,OAAOuwB,OAAO,CAClB9G,YAAa,OACZ,OAKTrpC,KAAK6sD,UAAY7sD,KAAK0L,UAAU,IAAI,GAAa,CAC/CxB,MAAOk/C,GAAsBppD,KAAKiwC,oBAAoBtI,GAASQ,wBAC/Dx4B,UAAW,WACXigD,UAAW,WACTxuD,EAAMwe,OAAOuwB,OAAO,CAClBI,YAAY,EACZlH,YAAa,OACZ,IAELvM,UAAW,SAAmB5wB,GACxBA,EAAEuD,OAAO,IAGPrO,EAAMmpD,oBACJnpD,EAAM6rD,YAAYx4B,YACpBrzB,EAAM6rD,YAAYz3C,QAElBpU,EAAMgpD,YAAY50C,QAGpBtJ,EAAE8wB,sBAKV6yB,EAASv2C,YAAYtZ,KAAK6sD,UAAU7hC,SAC7B6kC,GAGT3F,EAAWvpD,UAAUovD,kBAAoB,WACvC,IAAI3uD,EAAQpB,KAGRgwD,EAAev7C,SAASyE,cAAc,OAC1C82C,EAAargD,UAAY,gBACzBqgD,EAAankC,MAAMuK,MAAQ65B,QAC3BjwD,KAAKgsD,iBAAmBhsD,KAAK0L,UAAU,IAAI,GAA6BskD,OAAchuD,EAAW,CAC/F4/C,UAAWyH,GACX1H,YAAa2H,GACbzJ,QAAS,IACR7/C,KAAKs8B,qBAERt8B,KAAK0L,UAAU0Y,GAAA,EAAkCpkB,KAAKgsD,iBAAiB3H,aAAc,UAAW,SAAUn4C,GACxG,OAAO9K,EAAMiuD,uBAAuBnjD,MAGtClM,KAAK0L,UAAU1L,KAAKgsD,iBAAiBzuC,YAAY,WAC/Cnc,EAAMwe,OAAOuwB,OAAO,CAClBpE,cAAe3qC,EAAM4qD,iBAAiBzpD,QACrC,MAILvC,KAAKitD,YAAcjtD,KAAK0L,UAAU,IAAI,GAAa,CACjDxB,MAAOq/C,GAAwBvpD,KAAKiwC,oBAAoBtI,GAASa,kBACjE74B,UAAW,UACXigD,UAAW,WACTxuD,EAAMipD,YAAYlyB,WAEpB2E,UAAW,SAAmB5wB,GACxBA,EAAEuD,OAAO,QAKXrO,EAAMyrD,UAAUr3C,QAEhBtJ,EAAE8wB,sBAKRh9B,KAAKktD,eAAiBltD,KAAK0L,UAAU,IAAI,GAAa,CACpDxB,MAAOs/C,GAA4BxpD,KAAKiwC,oBAAoBtI,GAASc,kBACrE94B,UAAW,cACXigD,UAAW,WACTxuD,EAAMipD,YAAY7d,iBAGtB,IAAI0jB,EAAcz7C,SAASyE,cAAc,OAKzC,OAJAg3C,EAAYvgD,UAAY,eACxBugD,EAAY52C,YAAY02C,GACxBE,EAAY52C,YAAYtZ,KAAKitD,YAAYjiC,SACzCklC,EAAY52C,YAAYtZ,KAAKktD,eAAeliC,SACrCklC,GAGThG,EAAWvpD,UAAU+pD,cAAgB,WACnC,IAAItpD,EAAQpB,KAGR6vD,EAAW7vD,KAAK0vD,iBAGhBQ,EAAclwD,KAAK+vD,oBAGvB/vD,KAAKmtD,kBAAoBntD,KAAK0L,UAAU,IAAI,GAAa,CACvDxB,MAAOu/C,GACP95C,UAAW,cACXigD,UAAW,WACTxuD,EAAMwe,OAAOuwB,OAAO,CAClB5G,mBAAoBnoC,EAAMmpD,oBACzB,GAECnpD,EAAMmpD,oBACRnpD,EAAM4qD,iBAAiB51B,MAAQh1B,EAAMoqD,WAAW9E,SAAStwB,OAG3Dh1B,EAAM8pD,oBAIVlrD,KAAKmtD,kBAAkBC,YAAY,SAAUptD,KAAKuqD,mBAElDvqD,KAAKmtD,kBAAkBC,YAAY,YAAaptD,KAAKuqD,mBAErDvqD,KAAKmtD,kBAAkBE,YAAYrtD,KAAKuqD,mBAGxCvqD,KAAKiZ,SAAWxE,SAASyE,cAAc,OACvClZ,KAAKiZ,SAAStJ,UAAY,4BAE1B3P,KAAKiZ,SAASk1B,aAAa,cAAe,QAG1CnuC,KAAKiZ,SAAS4S,MAAMuK,MAAQy4B,QAE5B7uD,KAAKiZ,SAASK,YAAYtZ,KAAKmtD,kBAAkBniC,SAEjDhrB,KAAKiZ,SAASK,YAAYu2C,GAE1B7vD,KAAKiZ,SAASK,YAAY42C,GAE1BlwD,KAAKmwD,cAGPjG,EAAWvpD,UAAUwvD,WAAa,WAChC,IAAI/uD,EAAQpB,KAEZA,KAAKowD,YAAc,IAAI,KAAKpwD,KAAKiZ,SAAUjZ,KAAM,CAC/CqwD,YAAa,IAIfrwD,KAAK2uD,UAAW,EAChB,IAAI2B,EAnlCwB,IAqlC5BtwD,KAAK0L,UAAU1L,KAAKowD,YAAYG,WAAW,WACzCD,EAAgBlsC,GAAA,EAAkBhjB,EAAM6X,aAG1CjZ,KAAK0L,UAAU1L,KAAKowD,YAAY7yC,YAAY,SAAUizC,GACpDpvD,EAAMutD,UAAW,EACjB,IAAIv4B,EAAQk6B,EAAgBE,EAAIC,OAASD,EAAIE,SAE7C,KAAIt6B,EA7lCsB,KA6lC1B,CAKA,IAAIu6B,EAAgBv6B,EAAQ0zB,GAGxB1zB,GAFWw6B,WAAWxsC,GAAA,EAAqBhjB,EAAM6X,UAAU21C,WAAa,KAM5ExtD,EAAM6X,SAAS4S,MAAMuK,MAAQA,EAAQ,KAEjCh1B,EAAMmpD,oBACRnpD,EAAM4qD,iBAAiB51B,MAAQu6B,SAKrCzG,EAAWvpD,UAAUoqD,2BAA6B,WAChD,IAAIxoD,EAAQvC,KAAKoqD,YAAYv+C,mBAAmBi/C,qBAEhD9qD,KAAKwrD,WAAW3E,2BAAqC,IAAVtkD,IAK7C2nD,EAAWx9C,GAAK,4BACTw9C,EAtlCT,CAulCE,MAIE4F,GAEJ,SAAU/lD,GAGR,SAAS+lD,EAAep9C,GACtB,IAAItR,EAAQ2I,EAAOE,KAAKjK,OAASA,KA4BjC,OA1BAoB,EAAMysC,MAAQn7B,EACdtR,EAAM6X,SAAWxE,SAASyE,cAAc,OACxC9X,EAAM6X,SAAStJ,UAAY,kBAC3BvO,EAAM6X,SAASzI,MAAQpP,EAAMysC,MAAMr9B,MACnCpP,EAAM6X,SAASi1B,SAAW,EAC1B9sC,EAAMyvD,UAAYp8C,SAASyE,cAAc,SACzC9X,EAAMyvD,UAAU12C,KAAO,WACvB/Y,EAAMyvD,UAAUlhD,UAAY,WAC5BvO,EAAMyvD,UAAU7qD,GAAK,YAAc8pD,EAAegB,WAClD1vD,EAAMyvD,UAAU3iB,UAAY,EAC5B9sC,EAAMs0C,OAASjhC,SAASyE,cAAc,SACtC9X,EAAMs0C,OAAO/lC,UAAY,QAEzBvO,EAAMs0C,OAAOqb,QAAU3vD,EAAMyvD,UAAU7qD,GACvC5E,EAAMs0C,OAAOxH,UAAY,EAEzB9sC,EAAM6X,SAASK,YAAYlY,EAAMyvD,WAEjCzvD,EAAM6X,SAASK,YAAYlY,EAAMs0C,QAEjCt0C,EAAMysC,MAAMuS,OAAO9mC,YAAYlY,EAAM6X,UAErC7X,EAAM4vD,SAAS5vD,EAAMyvD,UAAW,WAC9BzvD,EAAMysC,MAAMqC,aAGP9uC,EAwCT,OAvEA,GAAU0uD,EAAgB/lD,GAkC1B3J,OAAOM,eAAeovD,EAAenvD,UAAW,UAAW,CACzDC,IAAK,WACH,OAAOZ,KAAKiZ,UAEdnY,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAeovD,EAAenvD,UAAW,UAAW,CACzDC,IAAK,WACH,OAAOZ,KAAK6wD,UAAUtiB,SAExBv2B,IAAK,SAAaqrC,GAChBrjD,KAAK6wD,UAAUtiB,QAAU8U,GAE3BviD,YAAY,EACZC,cAAc,IAGhB+uD,EAAenvD,UAAUmuC,OAAS,WAChC9uC,KAAK6wD,UAAUzN,gBAAgB,aAGjC0M,EAAenvD,UAAUouC,QAAU,WACjC/uC,KAAK6wD,UAAUjN,UAAW,GAG5BkM,EAAenvD,UAAUkjD,WAAa,SAAU/lB,GAC1CA,GACF99B,KAAK8uC,SACL9uC,KAAKgrB,QAAQkjB,SAAW,IAExBluC,KAAK+uC,UACL/uC,KAAKgrB,QAAQkjB,UAAY,IAI7B4hB,EAAegB,SAAW,EACnBhB,EAxET,CAyEE,MAEE,GAEJ,SAAU/lD,GAGR,SAASknD,EAAav+C,GACpB,IAAItR,EAAQ2I,EAAOE,KAAKjK,OAASA,KAmCjC,OAjCAoB,EAAMysC,MAAQn7B,EACdtR,EAAM6X,SAAWxE,SAASyE,cAAc,OACxC9X,EAAM6X,SAASzI,MAAQpP,EAAMysC,MAAM3jC,MACnC9I,EAAM6X,SAASi1B,SAAW,EAC1B9sC,EAAM6X,SAAStJ,UAAY,UAAYvO,EAAMysC,MAAMl+B,UAEnDvO,EAAM6X,SAASk1B,aAAa,OAAQ,UAEpC/sC,EAAM6X,SAASk1B,aAAa,aAAc/sC,EAAMysC,MAAM3jC,OAEtD9I,EAAMitC,QAAQjtC,EAAM6X,SAAU,SAAU/M,GACtC9K,EAAMysC,MAAM+hB,YAEZ1jD,EAAE8wB,mBAGJ57B,EAAMotC,UAAUptC,EAAM6X,SAAU,SAAU/M,GACxC,GAAIA,EAAEuD,OAAO,KAERvD,EAAEuD,OAAO,GAMZ,OAHArO,EAAMysC,MAAM+hB,iBAEZ1jD,EAAE8wB,iBAIA57B,EAAMysC,MAAM/Q,WACd17B,EAAMysC,MAAM/Q,UAAU5wB,KAInB9K,EAmCT,OAzEA,GAAU6vD,EAAclnD,GAyCxB3J,OAAOM,eAAeuwD,EAAatwD,UAAW,UAAW,CACvDC,IAAK,WACH,OAAOZ,KAAKiZ,UAEdnY,YAAY,EACZC,cAAc,IAGhBkwD,EAAatwD,UAAU8zB,UAAY,WACjC,OAAOz0B,KAAKiZ,SAASi1B,UAAY,GAGnC+iB,EAAatwD,UAAU6U,MAAQ,WAC7BxV,KAAKiZ,SAASzD,SAGhBy7C,EAAatwD,UAAUkjD,WAAa,SAAU/lB,GAC5C1Z,GAAA,EAAgBpkB,KAAKiZ,SAAU,YAAa6kB,GAE5C99B,KAAKiZ,SAASk1B,aAAa,gBAAiB9hB,QAAQyR,IAEpD99B,KAAKiZ,SAASi1B,SAAWpQ,EAAU,GAAK,GAG1CmzB,EAAatwD,UAAU0sD,YAAc,SAAU6D,GAC7ClxD,KAAKiZ,SAASk1B,aAAa,gBAAiB9hB,SAAS6kC,KAGvDD,EAAatwD,UAAUysD,YAAc,SAAUz9C,EAAWwhD,GACxD/sC,GAAA,EAAgBpkB,KAAKiZ,SAAUtJ,EAAWwhD,IAGrCF,EA1ET,CA2EE,MAIF,YAA2B,SAAUlhD,EAAOC,GAC1C,IAAIohD,EAAyB,SAAgCC,EAAUxhD,GACjEA,GACFG,EAAUG,QAAQ,kBAAoBkhD,EAAW,wBAA0BxhD,EAAQ,QAIvFuhD,EAAuB,aAAcrhD,EAAMG,SAAS,MACpDkhD,EAAuB,oBAAqBrhD,EAAMG,SAAS,MAC3DkhD,EAAuB,aAAcrhD,EAAMG,SAAS,MAEpDkhD,EAAuB,eADArhD,EAAMG,SAAS,MAEtC,IAAImhC,EAAoBthC,EAAMG,SAAS,MAEnCmhC,GACFrhC,EAAUG,QAAQ,uDAAyDkhC,EAAoB,OAGjG,IAAIigB,EAA2BvhD,EAAMG,SAAS,KAE1CohD,GACFthD,EAAUG,QAAQ,4CAA6D,OAAfJ,EAAMoK,KAAgB,SAAW,SAAW,IAAMm3C,EAA2B,+BAG/I,IAAIC,EAAkBxhD,EAAMG,SAAS,KAEjCqhD,GACFvhD,EAAUG,QAAQ,wDAA0DohD,EAAkB,6CAGhG,IAAIC,EAA2BzhD,EAAMG,SAAS,KAE1CshD,GACFxhD,EAAUG,QAAQ,4CAA6D,OAAfJ,EAAMoK,KAAgB,SAAW,SAAW,IAAMq3C,EAA2B,OAG/I,IAAIlgB,EAAWvhC,EAAMG,SAAS,KAE1BohC,GACFthC,EAAUG,QAAQ,mDAAqDmhC,EAAW,OAGpF,IAAI7f,EAAQ1hB,EAAMG,SAAS,KAEvBuhB,GACFzhB,EAAUG,QAAQ,iEAAmEshB,EAAQ,OAG/F,IAAIggC,EAAyB1hD,EAAMG,SAAS,KAE5C,GAAIuhD,EACFzhD,EAAUG,QAAQ,gEAAkEshD,EAAyB,oDACxG,CACL,IAAIx3C,EAASlK,EAAMG,SAAS,KAExB+J,GACFjK,EAAUG,QAAQ,gEAAkE8J,EAAS,gDAIjG,IAAIy3C,EAAoB3hD,EAAMG,SAAS,KAEnCwhD,GACF1hD,EAAUG,QAAQ,+FAAiGuhD,EAAkBnwD,WAAa,S,aCl5C3IowD,GAAoB,aAAgB,oB,UCD3C,GAAsC,WACxC,IAAI3oD,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA0BtC,GAAwC,SAAUgN,EAAY1T,EAAQ2N,EAAKgG,GAC7E,IAEIxN,EAFAyN,EAAIC,UAAUpK,OACdqK,EAAIF,EAAI,EAAI5T,EAAkB,OAAT2T,EAAgBA,EAAOrW,OAAOyW,yBAAyB/T,EAAQ2N,GAAOgG,EAE/F,GAAuB,kBAAZK,SAAoD,oBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASP,EAAY1T,EAAQ2N,EAAKgG,QAAW,IAAK,IAAIjI,EAAIgI,EAAWjK,OAAS,EAAGiC,GAAK,EAAGA,KAC1KvF,EAAIuN,EAAWhI,MAAIoI,GAAKF,EAAI,EAAIzN,EAAE2N,GAAKF,EAAI,EAAIzN,EAAEnG,EAAQ2N,EAAKmG,GAAK3N,EAAEnG,EAAQ2N,KAASmG,GAE5F,OAAOF,EAAI,GAAKE,GAAKxW,OAAOM,eAAeoC,EAAQ2N,EAAKmG,GAAIA,GAG1D,GAAkC,SAAUK,EAAYC,GAC1D,OAAO,SAAUpU,EAAQ2N,GACvByG,EAAUpU,EAAQ2N,EAAKwG,KAqBvB26C,GAA2B,OACxB,SAASC,GAAyBjnD,GACvC,IAAKA,EAAOgC,WACV,OAAO,KAGT,IAAIM,EAAYtC,EAAOoL,eAEvB,GAAI9I,EAAUe,kBAAoBf,EAAUmE,cAC1C,GAAInE,EAAU+B,UAAW,CACvB,IAAI6iD,EAAiBlnD,EAAOkC,WAAWilD,kBAAkB7kD,EAAUC,oBAEnE,GAAI2kD,EACF,OAAOA,EAAeE,UAGxB,GAAIpnD,EAAOkC,WAAWmlD,sBAAsB/kD,GAAa0kD,GACvD,OAAOhnD,EAAOkC,WAAWoH,gBAAgBhH,GAK/C,OAAO,KAGT,IAAI,GAEJ,SAAUnD,GAGR,SAASmoD,EAAqBtnD,EAAQwM,EAAmB+6C,EAAgBC,GACvE,IAAIhxD,EAAQ2I,EAAOE,KAAKjK,OAASA,KAkDjC,OAhDAoB,EAAMiK,QAAUT,EAChBxJ,EAAMixD,mBAAqBjrB,GAA4B5vB,OAAOJ,GAC9DhW,EAAMk7B,mBAAqBllB,EAC3BhW,EAAMkxD,gBAAkBH,EACxB/wD,EAAMmxD,kBAAoBH,EAC1BhxD,EAAMqpD,sBAAwB,IAAI,IAAQ,KAC1CrpD,EAAMwe,OAASxe,EAAMsK,UAAU,IAAI,IAEnCtK,EAAMoxD,iBAENpxD,EAAMsK,UAAUtK,EAAMwe,OAAOupB,yBAAyB,SAAUj9B,GAC9D,OAAO9K,EAAMgoC,gBAAgBl9B,MAG/B9K,EAAMslB,OAAS,KAEftlB,EAAMsK,UAAUtK,EAAMiK,QAAQe,iBAAiB,WAC7C,IAAIqmD,EAAoBrxD,EAAMiK,QAAQyB,YAAc1L,EAAMwe,OAAO2wB,WAEjEnvC,EAAMsxD,eAENtxD,EAAMwe,OAAOuwB,OAAO,CAClB9G,YAAa,KACbK,UAAWtoC,EAAMkxD,gBAAgBK,WAAW,mBAAoB,GAE9D,GACFlpB,UAAWroC,EAAMkxD,gBAAgBK,WAAW,mBAAoB,GAE9D,GACFnpB,QAASpoC,EAAMkxD,gBAAgBK,WAAW,iBAAkB,GAE1D,KACD,GAECF,GACFrxD,EAAMwxD,OAAO,CACXC,oBAAoB,EACpBnF,+BAA+B,EAC/BoF,qCAAqC,EACrCC,YAAa,EAGbC,eAAe,EACfC,mBAAmB,OAKlB7xD,EA6RT,OAlVA,GAAU8wD,EAAsBnoD,GAwDhCmoD,EAAqBtxD,IAAM,SAAUgK,GACnC,OAAOA,EAAO6B,gBAAgBylD,EAAqBxlD,KAGrDwlD,EAAqBvxD,UAAUc,QAAU,WACvCzB,KAAK0yD,eAEL3oD,EAAOpJ,UAAUc,QAAQwI,KAAKjK,OAGhCkyD,EAAqBvxD,UAAU+xD,aAAe,WACxC1yD,KAAK0mB,SACP1mB,KAAK0mB,OAAOjlB,UAEZzB,KAAK0mB,OAAS,OAIlBwrC,EAAqBvxD,UAAUgM,MAAQ,WACrC,OAAOulD,EAAqBxlD,IAG9BwlD,EAAqBvxD,UAAUyoC,gBAAkB,SAAUl9B,GACzDlM,KAAKkzD,eAAehnD,GAEhBA,EAAEqkC,aACAvwC,KAAK4f,OAAO2wB,WACdvwC,KAAKqyD,mBAAmBr6C,KAAI,IAE5BhY,KAAKqyD,mBAAmBz6C,QAExB5X,KAAK0yD,iBAILxmD,EAAEo9B,cACJtpC,KAAKmzD,oBAAoBnzD,KAAK4f,OAAO0pB,eAIzC4oB,EAAqBvxD,UAAUuyD,eAAiB,SAAUhnD,GACpDA,EAAEs9B,SACJxpC,KAAKsyD,gBAAgBc,MAAM,iBAAkBpzD,KAAK4f,OAAOyzC,cAAe,GAKtEnnD,EAAEu9B,WACJzpC,KAAKsyD,gBAAgBc,MAAM,mBAAoBpzD,KAAK4f,OAAO0zC,gBAAiB,GAK1EpnD,EAAEw9B,WACJ1pC,KAAKsyD,gBAAgBc,MAAM,mBAAoBpzD,KAAK4f,OAAO2zC,gBAAiB,IAMhFrB,EAAqBvxD,UAAU6xD,eAAiB,WAC9CxyD,KAAK4f,OAAOuwB,OAAO,CACjBzG,UAAW1pC,KAAKsyD,gBAAgBK,WAAW,mBAAoB,EAE7D3yD,KAAK4f,OAAO8pB,WACdD,UAAWzpC,KAAKsyD,gBAAgBK,WAAW,mBAAoB,EAE7D3yD,KAAK4f,OAAO6pB,WACdD,QAASxpC,KAAKsyD,gBAAgBK,WAAW,iBAAkB,EAEzD3yD,KAAK4f,OAAO4pB,WACb,IAGL0oB,EAAqBvxD,UAAU6yD,mBAAqB,WAClD,QAASnsB,GAA2BrS,SAASh1B,KAAKs8B,qBAGpD41B,EAAqBvxD,UAAU8yD,SAAW,WACxC,OAAOzzD,KAAK4f,QAGdsyC,EAAqBvxD,UAAU+yD,gBAAkB,WAC/C1zD,KAAK4f,OAAOuwB,OAAO,CACjBI,YAAY,EACZlH,YAAa,OACZ,GAEHrpC,KAAKqL,QAAQmK,SAGf08C,EAAqBvxD,UAAUgzD,oBAAsB,WACnD3zD,KAAK4f,OAAOuwB,OAAO,CACjBzG,WAAY1pC,KAAK4f,OAAO8pB,YACvB,GAEE1pC,KAAK4f,OAAO2wB,YACfvwC,KAAKgxC,wBAITkhB,EAAqBvxD,UAAUizD,iBAAmB,WAChD5zD,KAAK4f,OAAOuwB,OAAO,CACjB1G,WAAYzpC,KAAK4f,OAAO6pB,YACvB,GAEEzpC,KAAK4f,OAAO2wB,YACfvwC,KAAKgxC,wBAITkhB,EAAqBvxD,UAAUkzD,YAAc,WAC3C7zD,KAAK4f,OAAOuwB,OAAO,CACjB3G,SAAUxpC,KAAK4f,OAAO4pB,UACrB,GAEExpC,KAAK4f,OAAO2wB,YACfvwC,KAAKgxC,wBAITkhB,EAAqBvxD,UAAUmzD,kBAAoB,WACjD,GAAI9zD,KAAK4f,OAAOypB,YACdrpC,KAAK4f,OAAOuwB,OAAO,CACjB9G,YAAa,OACZ,QAEH,GAAIrpC,KAAKqL,QAAQuB,WAAY,CAC3B,IAAIM,EAAYlN,KAAKqL,QAAQ2K,eAED,IAAxB9I,EAAUoE,WAAmBpE,EAAUmE,cAAgBnE,EAAUe,kBACnEf,EAAYA,EAAUsF,eAAetF,EAAUmE,cAAgB,EAAGrR,KAAKqL,QAAQyB,WAAWyE,iBAAiBrE,EAAUmE,cAAgB,KAGlInE,EAAU+B,WACbjP,KAAK4f,OAAOuwB,OAAO,CACjB9G,YAAan8B,IACZ,KAMXglD,EAAqBvxD,UAAUozD,gBAAkB,SAAUzqB,GACrDtpC,KAAK4f,OAAO4pB,UACdF,EAAerP,GAAA,EAA+BqP,IAGhDtpC,KAAK4f,OAAOuwB,OAAO,CACjB7G,aAAcA,IACb,IAGL4oB,EAAqBvxD,UAAUqwC,qBAAuB,aAGtDkhB,EAAqBvxD,UAAUiyD,OAAS,SAAUlgD,GAGhD,GAFA1S,KAAK0yD,eAEA1yD,KAAKqL,QAAQuB,WAAlB,CAKA,IAiBMonD,EAjBFC,EAAe,CACjB1jB,YAAY,GAGd,GAAI79B,EAAKg7C,+BACHsG,EAAwBnC,GAAyB7xD,KAAKqL,YAGpDrL,KAAK4f,OAAO4pB,QACdyqB,EAAa3qB,aAAerP,GAAA,EAA+B+5B,GAE3DC,EAAa3qB,aAAe0qB,GAKlC,IAAKC,EAAa3qB,cAAgB52B,EAAKogD,qCACjCkB,EAAwBh0D,KAAKurD,yBAG/B0I,EAAa3qB,aAAe0qB,GAWhC,GANIthD,EAAKmgD,mBACPoB,EAAa1qB,mBAAoB,EACvBvpC,KAAKqyD,mBAAmBzxD,QAClCqzD,EAAa1qB,mBAAoB,GAG/B72B,EAAKugD,kBAAmB,CAC1B,IAAIiB,EAAmBl0D,KAAKqL,QAAQ2K,eAE/Bk+C,EAAiBjlD,YACpBglD,EAAa5qB,YAAc6qB,GAI/Bl0D,KAAK4f,OAAOuwB,OAAO8jB,GAAc,GAE5Bj0D,KAAK0mB,SACR1mB,KAAK0mB,OAAS,IAAI,GAA4B1mB,KAAKqL,QAASrL,KAAK4f,WAIrEsyC,EAAqBvxD,UAAU4S,MAAQ,SAAUb,GAC/C1S,KAAK4yD,OAAOlgD,IAGdw/C,EAAqBvxD,UAAUkrC,gBAAkB,WAC/C,QAAI7rC,KAAK0mB,SACP1mB,KAAK0mB,OAAOmlB,mBAEL,IAMXqmB,EAAqBvxD,UAAU0qC,gBAAkB,WAC/C,QAAIrrC,KAAK0mB,SACP1mB,KAAK0mB,OAAO2kB,mBAEL,IAMX6mB,EAAqBvxD,UAAUw3B,QAAU,WACvC,QAAIn4B,KAAK0mB,SACP1mB,KAAK0mB,OAAOyR,WAEL,IAMX+5B,EAAqBvxD,UAAU6rC,WAAa,WAC1C,QAAIxsC,KAAK0mB,SACP1mB,KAAK0mB,OAAO8lB,cAEL,IAMX0lB,EAAqBvxD,UAAU0sC,iBAAmB,WAChD,QAAIrtC,KAAK0mB,SACP1mB,KAAK0mB,OAAO2mB,mBAEZrtC,KAAKqL,QAAQmK,SAEN,IAMX08C,EAAqBvxD,UAAU4qD,oBAAsB,WACnD,OAAIvrD,KAAKqL,QAAQQ,mBAAmBC,YAAYm/C,KAAKkJ,qBAAuBn0D,KAAKuyD,mBAAqBvyD,KAAKqL,QAAQuB,aAAe5M,KAAKqL,QAAQyB,WAAW68B,uBACjJ3pC,KAAKuyD,kBAAkB6B,eAGzB,IAGTlC,EAAqBvxD,UAAUwyD,oBAAsB,SAAUv6C,GACzD5Y,KAAKqL,QAAQQ,mBAAmBC,YAAYm/C,KAAKkJ,qBAAuBn0D,KAAKuyD,mBAAqBvyD,KAAKqL,QAAQuB,aAAe5M,KAAKqL,QAAQyB,WAAW68B,wBACxJ3pC,KAAKuyD,kBAAkB8B,cAAcz7C,IAIzCs5C,EAAqBxlD,GAAK,gCAC1BwlD,EAAuB,GAAW,CAAC,GAAQ,EAAG,MAAqB,GAAQ,EAAG,MAAkB,GAAQ,EAAGP,KAAqBO,GAlVlI,CAoVE,KAIE,GAEJ,SAAUnoD,GAGR,SAASuqD,EAAe1pD,EAAQyxB,EAAqBC,EAAoB9V,EAAoB+tC,EAAepC,EAAgBC,GAC1H,IAAIhxD,EAAQ2I,EAAOE,KAAKjK,KAAM4K,EAAQ0xB,EAAoB61B,EAAgBC,IAAqBpyD,KAK/F,OAHAoB,EAAMi7B,oBAAsBA,EAC5Bj7B,EAAMolB,mBAAqBA,EAC3BplB,EAAMmzD,cAAgBA,EACfnzD,EA4CT,OApDA,GAAUkzD,EAAgBvqD,GAW1BuqD,EAAe3zD,UAAUiyD,OAAS,SAAUlgD,GACrC1S,KAAKw0D,SACRx0D,KAAKy0D,qBAGFz0D,KAAKw0D,QAAQ1gD,eAAiB9T,KAAKqL,QAAQQ,mBAAmBC,YAAYm/C,KAAKsC,sBAElF76C,EAAKugD,mBAAoB,GAG3BlpD,EAAOpJ,UAAUiyD,OAAO3oD,KAAKjK,KAAM0S,GAEV,IAArBA,EAAKqgD,YAGL/yD,KAAKw0D,QAAQxF,oBACiB,IAArBt8C,EAAKqgD,aAGd/yD,KAAKw0D,QAAQzF,kBAInBuF,EAAe3zD,UAAUqwC,qBAAuB,WACzChxC,KAAKw0D,SACRx0D,KAAKy0D,oBAGHz0D,KAAK4f,OAAO2wB,WACdvwC,KAAKw0D,QAAQxjB,uBAEbhxC,KAAK00D,mBAAmB1jB,wBAI5BsjB,EAAe3zD,UAAU8zD,kBAAoB,WAC3Cz0D,KAAKw0D,QAAUx0D,KAAK0L,UAAU,IAAI,GAAW1L,KAAKqL,QAASrL,KAAMA,KAAK4f,OAAQ5f,KAAKq8B,oBAAqBr8B,KAAKwmB,mBAAoBxmB,KAAKs8B,mBAAoBt8B,KAAKu0D,gBAC/Jv0D,KAAK00D,mBAAqB10D,KAAK0L,UAAU,IAAI,GAAkB1L,KAAKqL,QAASrL,KAAK4f,OAAQ5f,KAAKwmB,mBAAoBxmB,KAAKu0D,iBAG1HD,EAAiB,GAAW,CAAC,GAAQ,EAAG,MAAsB,GAAQ,EAAG,MAAqB,GAAQ,EAAG,MAAqB,GAAQ,EAAG,KAAgB,GAAQ,EAAG,MAAkB,GAAQ,EAAG,aAAS3C,MAAsB2C,GApDlO,CAsDE,IAIE,GAEJ,SAAUvqD,GAGR,SAAS69B,IACP,OAAO79B,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI2hC,GAASC,gBACb19B,MAAOJ,EAAA,EAAa,kBAAmB,QACvCK,MAAO,OACPC,aAAc,KACdC,OAAQ,CACNC,OAAQ,KACRE,QAAS,KAKTC,OAAQ,KAIVoL,YAAa,CACXC,OAAQ,GAGRxF,MAAO,SACPE,MAAO1G,EAAA,EAAa,CAClB2G,IAAK,SACLC,QAAS,CAAC,0BACT,UACHC,MAAO,MAEL3Q,KAoBR,OAlDA,GAAU4nC,EAAiB79B,GAiC3B69B,EAAgBjnC,UAAU+J,IAAM,SAAUC,EAAUC,GAClD,IAAIC,EAAa,GAAqBjK,IAAIgK,GAEtCC,GACFA,EAAW0I,MAAM,CACfs/C,oBAAoB,EACpBnF,8BAA+B9iD,EAAOiB,mBAAmBC,YAAYm/C,KAAKyC,8BAC1EoF,oCAAqCloD,EAAOiB,mBAAmBC,YAAYm/C,KAAKkJ,oBAChFpB,YAAa,EAGbC,eAAe,EACfC,mBAAmB,KAKlBrrB,EAnDT,CAoDE,KAIE,GAEJ,SAAU79B,GAGR,SAAS4qD,IACP,OAAO5qD,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI2hC,GAASE,uBACb39B,MAAOJ,EAAA,EAAa,+BAAgC,uBACpDK,MAAO,sBACPC,aAAc,KACdC,OAAQ,CACNC,OAAQ,KACRE,QAAS,EACT6I,IAAK,CACH7I,QAAS,MAMXC,OAAQ,QAINzK,KAqBR,OA3CA,GAAU20D,EAA8B5qD,GAyBxC4qD,EAA6Bh0D,UAAU+J,IAAM,SAAUC,EAAUC,GAC/D,IAAIC,EAAa,GAAqBjK,IAAIgK,GAEtCC,IACFA,EAAW0I,MAAM,CACfs/C,oBAAoB,EACpBnF,+BAA+B,EAC/BoF,qCAAqC,EACrCC,YAAa,EAGbC,eAAe,EACfC,mBAAmB,IAErBpoD,EAAWsoD,oBAAoBtoD,EAAW4oD,WAAWnqB,gBAIlDqrB,EA5CT,CA6CE,KAIEC,GAEJ,SAAU7qD,GAGR,SAAS6qD,IACP,OAAkB,OAAX7qD,GAAmBA,EAAOuW,MAAMtgB,KAAM2W,YAAc3W,KAsB7D,OAzBA,GAAU40D,EAAiB7qD,GAM3B6qD,EAAgBj0D,UAAU+J,IAAM,SAAUC,EAAUC,GAClD,IAAIC,EAAa,GAAqBjK,IAAIgK,GAEtCC,IAAe7K,KAAK60D,KAAKhqD,KAC3BA,EAAW0I,MAAM,CACfs/C,oBAAoB,EACpBnF,8BAA6E,IAA9C7iD,EAAW4oD,WAAWnqB,aAAa/8B,QAAgB3B,EAAOiB,mBAAmBC,YAAYm/C,KAAKyC,8BAC7HoF,qCAAqC,EACrCC,YAAa,EAGbC,eAAe,EACfC,mBAAmB,IAGrBjzD,KAAK60D,KAAKhqD,KAIP+pD,EA1BT,CA2BE,KAIE,GAEJ,SAAU7qD,GAGR,SAAS+9B,IACP,OAAO/9B,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI2hC,GAASG,oBACb59B,MAAOJ,EAAA,EAAa,sBAAuB,aAC3CK,MAAO,YACPC,aAAc,KACdC,OAAQ,CACNC,OAAQ,IAAkBkL,MAC1BhL,QAAS,GAGT6I,IAAK,CACH7I,QAAS,KAKTmL,UAAW,CAAC,KAIdlL,OAAQ,QAINzK,KAOR,OAlCA,GAAU8nC,EAAqB/9B,GA8B/B+9B,EAAoBnnC,UAAUk0D,KAAO,SAAUhqD,GAC7C,OAAOA,EAAWghC,mBAGb/D,EAnCT,CAoCE8sB,IAIE,GAEJ,SAAU7qD,GAGR,SAASg+B,IACP,OAAOh+B,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI2hC,GAASI,wBACb79B,MAAOJ,EAAA,EAAa,0BAA2B,iBAC/CK,MAAO,gBACPC,aAAc,KACdC,OAAQ,CACNC,OAAQ,IAAkBkL,MAC1BhL,QAAS,KAKT6I,IAAK,CACH7I,QAAS,KAOTmL,UAAW,CAAC,OAMdlL,OAAQ,QAINzK,KAOR,OAxCA,GAAU+nC,EAAyBh+B,GAoCnCg+B,EAAwBpnC,UAAUk0D,KAAO,SAAUhqD,GACjD,OAAOA,EAAWwgC,mBAGbtD,EAzCT,CA0CE6sB,IAIEE,GAEJ,SAAU/qD,GAGR,SAAS+qD,IACP,OAAkB,OAAX/qD,GAAmBA,EAAOuW,MAAMtgB,KAAM2W,YAAc3W,KAgC7D,OAnCA,GAAU80D,EAA0B/qD,GAMpC+qD,EAAyBn0D,UAAU+J,IAAM,SAAUC,EAAUC,GAC3D,IAAIC,EAAa,GAAqBjK,IAAIgK,GAE1C,GAAKC,EAAL,CAIA,IAAImpD,EAAwBnC,GAAyBjnD,GAEjDopD,GACFnpD,EAAWkpD,gBAAgBC,GAGxBh0D,KAAK60D,KAAKhqD,KACbA,EAAW0I,MAAM,CACfs/C,oBAAoB,EACpBnF,8BAA+B9iD,EAAOiB,mBAAmBC,YAAYm/C,KAAKyC,8BAC1EoF,qCAAqC,EACrCC,YAAa,EAGbC,eAAe,EACfC,mBAAmB,IAGrBjzD,KAAK60D,KAAKhqD,MAIPiqD,EApCT,CAqCE,KAIE,GAEJ,SAAU/qD,GAGR,SAASi+B,IACP,OAAOj+B,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI2hC,GAASK,6BACb99B,MAAOJ,EAAA,EAAa,+BAAgC,uBACpDK,MAAO,sBACPC,aAAc,KACdC,OAAQ,CACNC,OAAQ,IAAkBkL,MAC1BhL,QAAS,KAKTC,OAAQ,QAINzK,KAOR,OA1BA,GAAUgoC,EAA8Bj+B,GAsBxCi+B,EAA6BrnC,UAAUk0D,KAAO,SAAUhqD,GACtD,OAAOA,EAAWghC,mBAGb7D,EA3BT,CA4BE8sB,IAIE,GAEJ,SAAU/qD,GAGR,SAASk+B,IACP,OAAOl+B,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI2hC,GAASM,iCACb/9B,MAAOJ,EAAA,EAAa,mCAAoC,2BACxDK,MAAO,0BACPC,aAAc,KACdC,OAAQ,CACNC,OAAQ,IAAkBkL,MAC1BhL,QAAS,KAOTC,OAAQ,QAINzK,KAOR,OA5BA,GAAUioC,EAAkCl+B,GAwB5Ck+B,EAAiCtnC,UAAUk0D,KAAO,SAAUhqD,GAC1D,OAAOA,EAAWwgC,mBAGbpD,EA7BT,CA8BE6sB,IAIE,GAEJ,SAAU/qD,GAGR,SAASm+B,IACP,OAAOn+B,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI2hC,GAASO,uBACbh+B,MAAOJ,EAAA,EAAa,eAAgB,WACpCK,MAAO,UACPC,aAAc,KACdC,OAAQ,CACNC,OAAQ,KACRE,QAAS,KAKT6I,IAAK,CACH7I,QAAS,MAQXC,OAAQ,KAIVoL,YAAa,CACXC,OAAQ,GAGRxF,MAAO,SACPE,MAAO1G,EAAA,EAAa,CAClB2G,IAAK,YACLC,QAAS,CAAC,0BACT,aACHC,MAAO,MAEL3Q,KAuCR,OA9EA,GAAUkoC,EAAwBn+B,GA0ClCm+B,EAAuBvnC,UAAU+J,IAAM,SAAUC,EAAUC,GACzD,GAAKA,EAAOgC,aAAchC,EAAOiB,mBAAmBuU,SAApD,CAIA,IAAIvV,EAAa,GAAqBjK,IAAIgK,GACtCspD,EAAmBtpD,EAAOoL,eAC1B++C,EAAmBlqD,EAAW2oD,qBAG9B9F,GAAiCwG,EAAiBjlD,WAAailD,EAAiBjmD,kBAAoBimD,EAAiB7iD,eAAiBzG,EAAOiB,mBAAmBC,YAAYm/C,KAAKyC,gCAAkCqH,EAQnNhC,EAAcgC,GAAoBrH,EAAgC,EAEpE,EAIE7iD,GACFA,EAAW0I,MAAM,CACfs/C,oBAAoB,EACpBnF,8BAA+BA,EAC/BoF,oCAAqCloD,EAAOiB,mBAAmBC,YAAYm/C,KAAKyC,8BAChFqF,YAAaA,EACbC,eAAe,EACfC,mBAAmB,MAKlB/qB,EA/ET,CAgFE,KAGF,YAA2B,IAC3B,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,IAAI8sB,GAAc,IAAcx8C,mBAAmB,GAAqB5X,KACxE,YAAsB,IAAIo0D,GAAY,CACpChvD,GAAI2hC,GAASQ,uBACb/9B,aAAcg9B,GACd3uB,QAAS,SAAiB2K,GACxB,OAAOA,EAAEswC,mBAEXrpD,OAAQ,CACNI,OAAQ,IAGRH,OAAQ,IAAkBkL,MAC1BhL,QAAS,EAGTmL,UAAW,CAAC,UAOhB,YAAsB,IAAIq/C,GAAY,CACpChvD,GAAI2hC,GAASS,2BACbh+B,aAAc,KACdqO,QAAS,SAAiB2K,GACxB,OAAOA,EAAEuwC,uBAEXtpD,OAAQ,CACNI,OAAQ,IAGRH,OAAQ,IAAkBkL,MAC1BhL,QAAS+8B,GAA8B/8B,QACvC6I,IAAKk0B,GAA8Bl0B,IACnCqC,IAAK6xB,GAA8B7xB,IACnCwmB,MAAOqL,GAA8BrL,UAGzC,YAAsB,IAAI84B,GAAY,CACpChvD,GAAI2hC,GAASU,uBACbj+B,aAAc,KACdqO,QAAS,SAAiB2K,GACxB,OAAOA,EAAEwwC,oBAEXvpD,OAAQ,CACNI,OAAQ,IAGRH,OAAQ,IAAkBkL,MAC1BhL,QAASg9B,GAA0Bh9B,QACnC6I,IAAKm0B,GAA0Bn0B,IAC/BqC,IAAK8xB,GAA0B9xB,IAC/BwmB,MAAOsL,GAA0BtL,UAGrC,YAAsB,IAAI84B,GAAY,CACpChvD,GAAI2hC,GAASW,mBACbl+B,aAAc,KACdqO,QAAS,SAAiB2K,GACxB,OAAOA,EAAEywC,eAEXxpD,OAAQ,CACNI,OAAQ,IAGRH,OAAQ,IAAkBkL,MAC1BhL,QAASi9B,GAAsBj9B,QAC/B6I,IAAKo0B,GAAsBp0B,IAC3BqC,IAAK+xB,GAAsB/xB,IAC3BwmB,MAAOuL,GAAsBvL,UAGjC,YAAsB,IAAI84B,GAAY,CACpChvD,GAAI2hC,GAASY,yBACbn+B,aAAc,KACdqO,QAAS,SAAiB2K,GACxB,OAAOA,EAAE0wC,qBAEXzpD,OAAQ,CACNI,OAAQ,IAGRH,OAAQ,IAAkBkL,MAC1BhL,QAASk9B,GAA4Bl9B,QACrC6I,IAAKq0B,GAA4Br0B,IACjCqC,IAAKgyB,GAA4BhyB,IACjCwmB,MAAOwL,GAA4BxL,UAGvC,YAAsB,IAAI84B,GAAY,CACpChvD,GAAI2hC,GAASa,iBACbp+B,aAAcg9B,GACd3uB,QAAS,SAAiB2K,GACxB,OAAOA,EAAE+U,WAEX9tB,OAAQ,CACNI,OAAQ,IAGRH,OAAQ,IAAkBkL,MAC1BhL,QAAS,SASb,YAAsB,IAAIwqD,GAAY,CACpChvD,GAAI2hC,GAASc,iBACbr+B,aAAcg9B,GACd3uB,QAAS,SAAiB2K,GACxB,OAAOA,EAAEopB,cAEXniC,OAAQ,CACNI,OAAQ,IAGRH,OAAQ,IAAkBkL,MAC1BhL,QAAS,SASb,YAAsB,IAAIwqD,GAAY,CACpChvD,GAAI2hC,GAASe,uBACbt+B,aAAcg9B,GACd3uB,QAAS,SAAiB2K,GACxB,OAAOA,EAAEiqB,oBAEXhjC,OAAQ,CACNI,OAAQ,IAGRH,OAAQ,IAAkBkL,MAC1BhL,QAAS,Q,oBC7iCFyqD,GAAsB,MAI7BC,GAEJ,WACE,SAASA,EAAeC,EAAcC,EAAYC,GAChD,GAAIF,EAAa5oD,SAAW6oD,EAAW7oD,QAAU4oD,EAAa5oD,OAAS0oD,GACrE,MAAM,IAAInd,MAAM,2CAGlB93C,KAAKs1D,cAAgBH,EACrBn1D,KAAKu1D,YAAcH,EACnBp1D,KAAKw1D,gBAAkB,IAAIC,YAAYp0D,KAAK4iC,KAAKkxB,EAAa5oD,OAAS,KACvEvM,KAAK01D,OAASL,EAuJhB,OApJAH,EAAev0D,UAAUg1D,oBAAsB,WAC7C,IAAIv0D,EAAQpB,KAEZ,IAAKA,KAAK41D,iBAAkB,CAC1B51D,KAAK41D,kBAAmB,EAQxB,IAPA,IAAIC,EAAkB,GAElBC,EAAe,SAAsB7nD,EAAiBoD,GACxD,IAAImxB,EAAQqzB,EAAgBA,EAAgBtpD,OAAS,GACrD,OAAOnL,EAAM20D,mBAAmBvzB,IAAUv0B,GAAmB7M,EAAM40D,iBAAiBxzB,IAAUnxB,GAGvF7C,EAAI,EAAGC,EAAMzO,KAAKs1D,cAAc/oD,OAAQiC,EAAIC,EAAKD,IAAK,CAC7D,IAAIP,EAAkBjO,KAAKs1D,cAAc9mD,GACrC6C,EAAgBrR,KAAKu1D,YAAY/mD,GAErC,GAAIP,EAjCiB,UAiCoBoD,EAjCpB,SAkCnB,MAAM,IAAIymC,MAAM,6DAGlB,KAAO+d,EAAgBtpD,OAAS,IAAMupD,EAAa7nD,EAAiBoD,IAClEwkD,EAAgBxzC,MAGlB,IAAI4zC,EAAcJ,EAAgBtpD,OAAS,EAAIspD,EAAgBA,EAAgBtpD,OAAS,IAAM,EAC9FspD,EAAgBznD,KAAKI,GACrBxO,KAAKs1D,cAAc9mD,GAAKP,IAAkC,IAAdgoD,IAAuB,IACnEj2D,KAAKu1D,YAAY/mD,GAAK6C,IAAgC,MAAd4kD,IAAyB,OAKvE71D,OAAOM,eAAew0D,EAAev0D,UAAW,SAAU,CACxDC,IAAK,WACH,OAAOZ,KAAKs1D,cAAc/oD,QAE5BzL,YAAY,EACZC,cAAc,IAGhBm0D,EAAev0D,UAAUo1D,mBAAqB,SAAUvzB,GACtD,OA1DyB,SA0DlBxiC,KAAKs1D,cAAc9yB,IAG5B0yB,EAAev0D,UAAUq1D,iBAAmB,SAAUxzB,GACpD,OA9DyB,SA8DlBxiC,KAAKu1D,YAAY/yB,IAG1B0yB,EAAev0D,UAAUu1D,QAAU,SAAU1zB,GAC3C,OAAOxiC,KAAK01D,OAAS11D,KAAK01D,OAAOlzB,QAASxgC,GAG5CkzD,EAAev0D,UAAUw1D,SAAW,WAClC,QAASn2D,KAAK01D,QAGhBR,EAAev0D,UAAUy1D,YAAc,SAAU5zB,GAC/C,IAAI6zB,EAAa7zB,EAAQ,GAAK,EAC1B8zB,EAAM9zB,EAAQ,GAClB,OAAyD,KAAjDxiC,KAAKw1D,gBAAgBa,GAAc,GAAKC,IAGlDpB,EAAev0D,UAAU41D,aAAe,SAAU/zB,EAAOhiB,GACvD,IAAI61C,EAAa7zB,EAAQ,GAAK,EAC1B8zB,EAAM9zB,EAAQ,GACdjgC,EAAQvC,KAAKw1D,gBAAgBa,GAG/Br2D,KAAKw1D,gBAAgBa,GADnB71C,EACiCje,EAAQ,GAAK+zD,EAEb/zD,IAAU,GAAK+zD,IAItDpB,EAAev0D,UAAU61D,SAAW,SAAUh0B,GAC5C,OAAO,IAAIi0B,GAAcz2D,KAAMwiC,IAGjC0yB,EAAev0D,UAAU+1D,eAAiB,SAAUl0B,GAClDxiC,KAAK21D,sBACL,IAAIvV,IAhGU,WAgGCpgD,KAAKs1D,cAAc9yB,MAA0B,MAhG9C,WAgGsDxiC,KAAKu1D,YAAY/yB,MAA0B,IAE/G,OAAI4d,IAAW6U,IACL,EAGH7U,GAGT8U,EAAev0D,UAAU4Z,SAAW,SAAUioB,EAAOnjB,GACnD,OAAOrf,KAAK+1D,mBAAmBvzB,IAAUnjB,GAAQrf,KAAKg2D,iBAAiBxzB,IAAUnjB,GAGnF61C,EAAev0D,UAAUg2D,UAAY,SAAUt3C,GAC7C,IAAIu3C,EAAM,EACNC,EAAO72D,KAAKs1D,cAAc/oD,OAE9B,GAAa,IAATsqD,EACF,OAAQ,EAGV,KAAOD,EAAMC,GAAM,CACjB,IAAIC,EAAMz1D,KAAKkjB,OAAOqyC,EAAMC,GAAQ,GAEhCx3C,EAAOrf,KAAK+1D,mBAAmBe,GACjCD,EAAOC,EAEPF,EAAME,EAAM,EAIhB,OAAOF,EAAM,GAGf1B,EAAev0D,UAAUo2D,UAAY,SAAU13C,GAC7C,IAAImjB,EAAQxiC,KAAK22D,UAAUt3C,GAE3B,GAAImjB,GAAS,EAAG,CAGd,GAFoBxiC,KAAKg2D,iBAAiBxzB,IAErBnjB,EACnB,OAAOmjB,EAKT,IAFAA,EAAQxiC,KAAK02D,eAAel0B,IAEV,IAAXA,GAAc,CACnB,GAAIxiC,KAAKua,SAASioB,EAAOnjB,GACvB,OAAOmjB,EAGTA,EAAQxiC,KAAK02D,eAAel0B,IAIhC,OAAQ,GAGV0yB,EAAev0D,UAAUY,SAAW,WAGlC,IAFA,IAAI22B,EAAM,GAED1pB,EAAI,EAAGA,EAAIxO,KAAKuM,OAAQiC,IAC/B0pB,EAAI1pB,GAAK,KAAOxO,KAAKo2D,YAAY5nD,GAAK,IAAM,KAAO,KAAOxO,KAAK+1D,mBAAmBvnD,GAAK,IAAMxO,KAAKg2D,iBAAiBxnD,GAGrH,OAAO0pB,EAAI3X,KAAK,OAGX20C,EAhKT,GAqKIuB,GAEJ,WACE,SAASA,EAAc3xB,EAAQtC,GAC7BxiC,KAAK8kC,OAASA,EACd9kC,KAAKwiC,MAAQA,EA+Cf,OA5CApiC,OAAOM,eAAe+1D,EAAc91D,UAAW,kBAAmB,CAChEC,IAAK,WACH,OAAOZ,KAAK8kC,OAAOixB,mBAAmB/1D,KAAKwiC,QAE7C1hC,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAe+1D,EAAc91D,UAAW,gBAAiB,CAC9DC,IAAK,WACH,OAAOZ,KAAK8kC,OAAOkxB,iBAAiBh2D,KAAKwiC,QAE3C1hC,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAe+1D,EAAc91D,UAAW,cAAe,CAC5DC,IAAK,WACH,OAAOZ,KAAKwiC,OAEd1hC,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAe+1D,EAAc91D,UAAW,cAAe,CAC5DC,IAAK,WACH,OAAOZ,KAAK8kC,OAAO4xB,eAAe12D,KAAKwiC,QAEzC1hC,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAe+1D,EAAc91D,UAAW,cAAe,CAC5DC,IAAK,WACH,OAAOZ,KAAK8kC,OAAOsxB,YAAYp2D,KAAKwiC,QAEtC1hC,YAAY,EACZC,cAAc,IAGhB01D,EAAc91D,UAAUq2D,YAAc,SAAUvpD,GAC9C,OAAOA,EAAMQ,iBAAmBjO,KAAKiO,iBAAmBR,EAAM4D,eAAiBrR,KAAKqR,eAGtFolD,EAAc91D,UAAUs2D,aAAe,SAAUvpD,GAC/C,OAAO1N,KAAKiO,iBAAmBP,GAAcA,GAAc1N,KAAKqR,eAG3DolD,EAlDT,GC1KI,GAEJ,WACE,SAASS,EAAaC,EAAWC,GAC/Bp3D,KAAKq3D,oBAAsB,IAAI,KAC/Br3D,KAAKs3D,WAAaH,EAClBn3D,KAAKu3D,oBAAsBH,EAC3Bp3D,KAAKw3D,SAAW,IAAItC,GAAe,IAAIO,YAAY,GAAI,IAAIA,YAAY,IACvEz1D,KAAKy3D,qBAAuB,GAC5Bz3D,KAAK03D,gBAAiB,EA8SxB,OA3SAt3D,OAAOM,eAAew2D,EAAav2D,UAAW,UAAW,CACvDC,IAAK,WACH,OAAOZ,KAAKw3D,UAEd12D,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAew2D,EAAav2D,UAAW,cAAe,CAC3DC,IAAK,WACH,OAAOZ,KAAKq3D,oBAAoBx2D,OAElCC,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAew2D,EAAav2D,UAAW,YAAa,CACzDC,IAAK,WACH,OAAOZ,KAAKs3D,YAEdx2D,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAew2D,EAAav2D,UAAW,gBAAiB,CAC7DC,IAAK,WACH,OAAOZ,KAAK03D,gBAEd52D,YAAY,EACZC,cAAc,IAGhBm2D,EAAav2D,UAAUg3D,oBAAsB,SAAUC,GACrD,IAAIx2D,EAAQpB,KAEZ,GAAK43D,EAAQrrD,OAAb,CAIA,IAAIsrD,EAAY,GAEhB73D,KAAKu3D,oBAAoBjnC,kBAAkB,SAAU3lB,GACnD,IAAK,IAAIiI,EAAK,EAAGklD,EAAYF,EAAShlD,EAAKklD,EAAUvrD,OAAQqG,IAAM,CACjE,IACI4vB,EADSs1B,EAAUllD,GACJmlD,YACfC,EAAqB52D,EAAMq2D,qBAAqBj1B,GAEpD,GAAIw1B,IAAuBH,EAAUG,GAAqB,CACxDH,EAAUG,IAAsB,EAChC,IAAIC,GAAoB72D,EAAMo2D,SAASpB,YAAY5zB,GAEnDphC,EAAMo2D,SAASjB,aAAa/zB,EAAOy1B,GAEnCttD,EAASy4B,wBAAwB40B,EAAoB52D,EAAMm2D,oBAAoBW,oBAAoBD,QAKzGj4D,KAAKq3D,oBAAoBt1D,KAAK,CAC5B8K,MAAO7M,KACPm4D,qBAAsBP,MAI1BV,EAAav2D,UAAUiuB,OAAS,SAAUwpC,EAAYC,GACpD,IAAIj3D,EAAQpB,UAEc,IAAtBq4D,IACFA,EAAoB,IA4DtB,IAzDA,IAAIC,EAAuB,GAevBC,EAAY,SAAmB/1B,EAAO4zB,GACxC,IAAInoD,EAAkBmqD,EAAWrC,mBAAmBvzB,GAEhD4zB,GAhBU,SAAmBnoD,EAAiBoD,GAClD,IAAK,IAAIuB,EAAK,EAAG4lD,EAAsBH,EAAmBzlD,EAAK4lD,EAAoBjsD,OAAQqG,IAAM,CAC/F,IAAI6lD,EAAoBD,EAAoB5lD,GAE5C,GAAI3E,EAAkBwqD,GAAqBA,GAAqBpnD,EAE9D,OAAO,EAIX,OAAO,EAMYqnD,CAAUzqD,EAAiBmqD,EAAWpC,iBAAiBxzB,MACxE4zB,GAAc,GAGhBgC,EAAW7B,aAAa/zB,EAAO4zB,GAE/B,IAAIuC,EAAYv3D,EAAMk2D,WAAW/lD,iBAAiBtD,GAE9C2qD,EAAkB,CACpB3qD,gBAAiBA,EACjBC,YAAayqD,EACbtnD,cAAepD,EACfqD,UAAWqnD,GAEbL,EAAqBlqD,KAAK,CACxBX,MAAOmrD,EACPz2D,QAASf,EAAMm2D,oBAAoBW,oBAAoB9B,MAIvD5nD,EAAI,EAEJqqD,EAAgB,WAClB,KAAOrqD,EAAIpN,EAAMo2D,SAASjrD,QAAQ,CAChC,IAAI6pD,EAAch1D,EAAMo2D,SAASpB,YAAY5nD,GAI7C,GAFAA,IAEI4nD,EACF,OAAO5nD,EAAI,EAIf,OAAQ,GAGNsqD,EAAI,EACJC,EAAiBF,KAEM,IAApBE,GAAyBD,EAAIV,EAAW7rD,QAAQ,CAErD,IAAIysD,EAAWh5D,KAAKs3D,WAAWhpC,mBAAmBtuB,KAAKy3D,qBAAqBsB,IAE5E,GAAIC,EAAU,CACZ,IAAIC,EAA2BD,EAAS/qD,gBAExC,GAAIjO,KAAKs3D,WAAW/lD,iBAAiB0nD,KAA8BD,EAAS9qD,YAE1E,KAAO4qD,EAAIV,EAAW7rD,QAAQ,CAC5B,IAAI0B,EAAkBmqD,EAAWrC,mBAAmB+C,GAEpD,KAAIG,GAA4BhrD,GAI9B,MAHAsqD,EAAUO,EAAGG,IAA6BhrD,GAC1C6qD,KAQRC,EAAiBF,IAGnB,KAAOC,EAAIV,EAAW7rD,QACpBgsD,EAAUO,GAAG,GACbA,IAGF94D,KAAKy3D,qBAAuBz3D,KAAKu3D,oBAAoB/qD,iBAAiBxM,KAAKy3D,qBAAsBa,GACjGt4D,KAAKw3D,SAAWY,EAChBp4D,KAAK03D,gBAAiB,EAEtB13D,KAAKq3D,oBAAoBt1D,KAAK,CAC5B8K,MAAO7M,QAQXk3D,EAAav2D,UAAUu4D,WAAa,WAGlC,IAFA,IAAIC,EAAkB,GAEb3qD,EAAI,EAAGA,EAAIxO,KAAKw3D,SAASjrD,OAAQiC,IACxC,GAAIxO,KAAKw3D,SAASpB,YAAY5nD,GAAI,CAChC,IAAIf,EAAQzN,KAAKs3D,WAAWhpC,mBAAmBtuB,KAAKy3D,qBAAqBjpD,IAEzE,GAAIf,EAAO,CACT,IAAIQ,EAAkBR,EAAMQ,gBAExBoD,EAAgB5D,EAAM4D,cAAgBrR,KAAKw3D,SAASxB,iBAAiBxnD,GAAKxO,KAAKw3D,SAASzB,mBAAmBvnD,GAE/G2qD,EAAgB/qD,KAAK,CACnBH,gBAAiBA,EACjBoD,cAAeA,KAMvB,GAAI8nD,EAAgB5sD,OAAS,EAC3B,OAAO4sD,GAUXjC,EAAav2D,UAAUy4D,aAAe,SAAU30C,GAC9C,GAAKpb,MAAM2T,QAAQyH,GAAnB,CAMA,IAFA,IAAI40C,EAAW,GAENzmD,EAAK,EAAG0mD,EAAU70C,EAAO7R,EAAK0mD,EAAQ/sD,OAAQqG,IAAM,CAC3D,IAAInF,EAAQ6rD,EAAQ1mD,GAChB2mD,EAASv5D,KAAKw5D,gBAAgB/rD,EAAMQ,iBAEpCsrD,IAAWA,EAAOnD,aACpBiD,EAASjrD,KAAKmrD,GAIlBv5D,KAAK23D,oBAAoB0B,KAG3BnC,EAAav2D,UAAUc,QAAU,WAC/BzB,KAAKu3D,oBAAoB/qD,iBAAiBxM,KAAKy3D,qBAAsB,KAGvEP,EAAav2D,UAAU84D,oBAAsB,SAAU/rD,EAAYoO,GACjE,IAAIzJ,EAAS,GAEb,GAAIrS,KAAKw3D,SAKP,IAJA,IAAIh1B,EAAQxiC,KAAKw3D,SAAST,UAAUrpD,GAEhCsuC,EAAQ,EAELxZ,GAAS,GAAG,CACjB,IAAIwc,EAAUh/C,KAAKw3D,SAAShB,SAASh0B,GAEhC1mB,IAAUA,EAAOkjC,EAAShD,IAC7B3pC,EAAOjE,KAAK4wC,GAGdhD,IACAxZ,EAAQwc,EAAQiX,YAIpB,OAAO5jD,GAGT6kD,EAAav2D,UAAU64D,gBAAkB,SAAU9rD,GACjD,GAAI1N,KAAKw3D,SAAU,CACjB,IAAIh1B,EAAQxiC,KAAKw3D,SAAST,UAAUrpD,GAEpC,GAAI80B,GAAS,EACX,OAAOxiC,KAAKw3D,SAAShB,SAASh0B,GAIlC,OAAO,MAGT00B,EAAav2D,UAAU+4D,iBAAmB,SAAUH,EAAQz9C,GAC1D,IAAIzJ,EAAS,GACTmwB,EAAQ+2B,EAASA,EAAOxB,YAAc,EAAI,EAC1C1mD,EAAgBkoD,EAASA,EAAOloD,cAAgBoqB,OAAOC,UAE3D,GAAI5f,GAA4B,IAAlBA,EAAOvP,OAGnB,IAFA,IAAIotD,EAAa,GAERnrD,EAAIg0B,EAAO/zB,EAAMzO,KAAKw3D,SAASjrD,OAAQiC,EAAIC,EAAKD,IAAK,CAC5D,IAAIwwC,EAAUh/C,KAAKw3D,SAAShB,SAAShoD,GAErC,KAAIxO,KAAKw3D,SAASzB,mBAAmBvnD,GAAK6C,GAWxC,MAVA,KAAOsoD,EAAWptD,OAAS,IAAMyyC,EAAQgY,YAAY2C,EAAWA,EAAWptD,OAAS,KAClFotD,EAAWt3C,MAGbs3C,EAAWvrD,KAAK4wC,GAEZljC,EAAOkjC,EAAS2a,EAAWptD,SAC7B8F,EAAOjE,KAAK4wC,QAOlB,IAASxwC,EAAIg0B,EAAO/zB,EAAMzO,KAAKw3D,SAASjrD,OAAQiC,EAAIC,EAAKD,IAAK,CACxDwwC,EAAUh/C,KAAKw3D,SAAShB,SAAShoD,GAErC,KAAIxO,KAAKw3D,SAASzB,mBAAmBvnD,GAAK6C,GAKxC,MAJKyK,IAAUA,EAAOkjC,IACpB3sC,EAAOjE,KAAK4wC,GAQpB,OAAO3sC,GAGF6kD,EArTT,GAgUO,SAAS0C,GAA2BC,EAAcC,EAAYC,EAAQC,QAC5D,IAAXD,IACFA,EAASt+B,OAAOC,WAGlB,IAAIu+B,EAAW,GAEf,GAAID,GAAeA,EAAYztD,OAAS,EACtC,IAAK,IAAIqG,EAAK,EAAGsnD,EAAgBF,EAAapnD,EAAKsnD,EAAc3tD,OAAQqG,IAAM,CAC7E,IAAIlF,EAAawsD,EAActnD,GAC3B2mD,EAASM,EAAaL,gBAAgB9rD,GAE1C,GAAI6rD,IACEA,EAAOnD,cAAgB0D,GACzBG,EAAS7rD,KAAKmrD,GAGZQ,EAAS,GAAG,CACd,IAAII,EAAgBN,EAAaH,iBAAiBH,EAAQ,SAAU3iD,EAAGolC,GACrE,OAAOplC,EAAEw/C,cAAgB0D,GAAc9d,EAAQ+d,IAEjDE,EAAS7rD,KAAKkS,MAAM25C,EAAUE,QAI/B,CACDA,EAAgBN,EAAaH,iBAAiB,KAAM,SAAU9iD,EAAGolC,GACnE,OAAOplC,EAAEw/C,cAAgB0D,GAAc9d,EAAQ+d,IAEjDE,EAAS7rD,KAAKkS,MAAM25C,EAAUE,GAGhCN,EAAalC,oBAAoBsC,GAS5B,SAASG,GAAyBP,EAAcC,EAAYC,EAAQC,GAGzE,IAFA,IAAIC,EAAW,GAENrnD,EAAK,EAAGynD,EAAgBL,EAAapnD,EAAKynD,EAAc9tD,OAAQqG,IAAM,CAC7E,IAAIlF,EAAa2sD,EAAcznD,GAC3BglD,EAAUiC,EAAaJ,oBAAoB/rD,EAAY,SAAU6rD,EAAQvd,GAC3E,OAAOud,EAAOnD,cAAgB0D,GAAc9d,GAAS+d,IAEvDE,EAAS7rD,KAAKkS,MAAM25C,EAAUrC,GAGhCiC,EAAalC,oBAAoBsC,GAuB5B,SAASK,GAAiCT,EAAcU,EAAQT,GAKrE,IAJA,IAAI31C,EAAc01C,EAAa1C,UAC3BS,EAAUiC,EAAajC,QACvBqC,EAAW,GAENzrD,EAAIopD,EAAQrrD,OAAS,EAAGiC,GAAK,EAAGA,IACvC,GAAIsrD,IAAelC,EAAQxB,YAAY5nD,GAAI,CACzC,IAAIP,EAAkB2pD,EAAQ7B,mBAAmBvnD,GAE7C+rD,EAAOj7C,KAAK6E,EAAYtS,eAAe5D,KACzCgsD,EAAS7rD,KAAKwpD,EAAQpB,SAAShoD,IAKrCqrD,EAAalC,oBAAoBsC,GAO5B,SAASO,GAAwBX,EAAc1/C,EAAM2/C,GAI1D,IAHA,IAAIlC,EAAUiC,EAAajC,QACvBqC,EAAW,GAENzrD,EAAIopD,EAAQrrD,OAAS,EAAGiC,GAAK,EAAGA,IACnCsrD,IAAelC,EAAQxB,YAAY5nD,IAAM2L,IAASy9C,EAAQ1B,QAAQ1nD,IACpEyrD,EAAS7rD,KAAKwpD,EAAQpB,SAAShoD,IAInCqrD,EAAalC,oBAAoBsC,GC9anC,IAAI,GAEJ,WACE,SAASQ,EAA0B7vD,GACjC5K,KAAK4K,OAASA,EACd5K,KAAK06D,yBAA0B,EAwCjC,OArCAD,EAA0B95D,UAAUu3D,oBAAsB,SAAU9B,GAClE,OAAIA,EACKqE,EAA0BE,4BACxB36D,KAAK06D,wBACPD,EAA0BG,qCAE1BH,EAA0BI,4BAIrCJ,EAA0B95D,UAAU6L,iBAAmB,SAAUsuD,EAAgBxsD,GAC/E,OAAOtO,KAAK4K,OAAO4B,iBAAiBsuD,EAAgBxsD,IAGtDmsD,EAA0B95D,UAAU2vB,kBAAoB,SAAUpD,GAChE,OAAOltB,KAAK4K,OAAO0lB,kBAAkBpD,IAGvCutC,EAA0BE,4BAA8B,IAAuB50D,SAAS,CACtF2J,WAAY,EAGZqrD,sBAAuB,gBACvBC,0BAA2B,sBAE7BP,EAA0BG,qCAAuC,IAAuB70D,SAAS,CAC/F2J,WAAY,EAGZsrD,0BAA2B,YAE7BP,EAA0BI,2BAA6B,IAAuB90D,SAAS,CACrF2J,WAAY,EAGZsrD,0BAA2B,gCAEtBP,EA3CT,GCAI,GAEJ,WACE,SAASQ,EAAiBpuD,GACxB,IAAIzL,EAAQpB,KAEZA,KAAKq3D,oBAAsB,IAAI,KAC/Br3D,KAAKk7D,cAAgBruD,EACrB7M,KAAKm7D,sBAAwBtuD,EAAM0Q,YAAY,SAAUmE,GACvD,OAAOtgB,EAAMg6D,uBAEfp7D,KAAKq7D,cAAgB,GAEjBxuD,EAAM+qD,QAAQrrD,QAChBvM,KAAKo7D,qBAoKT,OAhKAh7D,OAAOM,eAAeu6D,EAAiBt6D,UAAW,cAAe,CAC/DC,IAAK,WACH,OAAOZ,KAAKq3D,oBAAoBx2D,OAElCC,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAeu6D,EAAiBt6D,UAAW,eAAgB,CAChEC,IAAK,WACH,OAAOZ,KAAKq7D,eAEdv6D,YAAY,EACZC,cAAc,IAGhBk6D,EAAiBt6D,UAAUy6D,mBAAqB,WAU9C,IATA,IAAIE,GAAoB,EACpBC,EAAiB,GACjB/sD,EAAI,EAEJsqD,EAAI,EACJ0C,EAAqB//B,OAAOC,UAC5B+/B,GAAoB,EACpB32B,EAAS9kC,KAAKk7D,cAActD,QAEzBppD,EAAIs2B,EAAOv4B,OAAQiC,IACxB,GAAKs2B,EAAOsxB,YAAY5nD,GAAxB,CAIA,IAAIP,EAAkB62B,EAAOixB,mBAAmBvnD,GAAK,EAEjD6C,EAAgByzB,EAAOkxB,iBAAiBxnD,GAExCgtD,GAAsBvtD,GAAmBoD,GAAiBoqD,KAKzDH,GAAqBxC,EAAI94D,KAAKq7D,cAAc9uD,QAAUvM,KAAKq7D,cAAcvC,GAAG7qD,kBAAoBA,GAAmBjO,KAAKq7D,cAAcvC,GAAGznD,gBAAkBA,GAE9JkqD,EAAentD,KAAKpO,KAAKq7D,cAAcvC,IACvCA,MAEAwC,GAAoB,EACpBC,EAAentD,KAAK,IAAI,KAAMH,EAAiB,EAAGoD,EAAe,KAGnEmqD,EAAqBvtD,EACrBwtD,EAAmBpqD,IAGjBiqD,GAAqBxC,EAAI94D,KAAKq7D,cAAc9uD,SAC9CvM,KAAK07D,kBAAkBH,IAI3BN,EAAiBt6D,UAAUy4D,aAAe,SAAU30C,GAClD,IAAKpb,MAAM2T,QAAQyH,IAA2B,IAAjBA,EAAMlY,OACjC,OAAO,EAKT,IAFA,IAAIovD,EAAe,GAEV/oD,EAAK,EAAG0mD,EAAU70C,EAAO7R,EAAK0mD,EAAQ/sD,OAAQqG,IAAM,CAC3D,IAAIgE,EAAI0iD,EAAQ1mD,GAEhB,IAAKgE,EAAE3I,kBAAoB2I,EAAEvF,cAC3B,OAAO,EAGTsqD,EAAavtD,KAAK,IAAI,KAAMwI,EAAE3I,gBAAkB,EAAG,EAAG2I,EAAEvF,cAAe,IAIzE,OADArR,KAAK07D,kBAAkBC,IAChB,GAOTV,EAAiBt6D,UAAUu4D,WAAa,WACtC,OAAOl5D,KAAKq7D,cAAcpuD,IAAI,SAAU2J,GACtC,MAAO,CACL3I,gBAAiB2I,EAAE3I,gBAAkB,EACrCoD,cAAeuF,EAAEvF,kBAKvB4pD,EAAiBt6D,UAAU+6D,kBAAoB,SAAUH,GACvDv7D,KAAKq7D,cAAgBE,EAErBv7D,KAAKq3D,oBAAoBt1D,KAAKw5D,IAGhCN,EAAiBt6D,UAAUi7D,UAAY,WACrC,OAAO57D,KAAKq7D,cAAc9uD,OAAS,GAGrC0uD,EAAiBt6D,UAAUk7D,SAAW,SAAUx8C,GAC9C,OAA+C,OAAxC03C,GAAU/2D,KAAKq7D,cAAeh8C,IAGvC47C,EAAiBt6D,UAAUm7D,iBAAmB,SAAUhtD,GAmBtD,IAlBA,IAAI1N,EAAQpB,KAER+7D,GAAa,EACb53C,EAAcnkB,KAAKk7D,cAAc/D,UACjC6E,EAAY,KAEZC,EAAa,SAAoB58C,GAKnC,OAJK28C,GAoDX,SAAkB38C,EAAM5R,GACtB,OAAO4R,GAAQ5R,EAAMQ,iBAAmBoR,GAAQ5R,EAAM4D,cArD/B6qD,CAAS78C,EAAM28C,KAChCA,EAAYjF,GAAU31D,EAAMi6D,cAAeh8C,IAGzC28C,EACKA,EAAU/tD,gBAAkB,EAG9B,MAGAO,EAAI,EAAGC,EAAMK,EAAWvC,OAAQiC,EAAIC,EAAKD,IAAK,CACrD,IAAItB,EAAY4B,EAAWN,GACvB2tD,EAAoBF,EAAW/uD,EAAUe,iBAEzCkuD,IACFjvD,EAAYA,EAAUqF,iBAAiB4pD,EAAmBh4C,EAAY5S,iBAAiB4qD,IACvFJ,GAAa,GAGf,IAAIK,EAAkBH,EAAW/uD,EAAUmE,eAEvC+qD,IACFlvD,EAAYA,EAAUsF,eAAe4pD,EAAiBj4C,EAAY5S,iBAAiB6qD,IACnFL,GAAa,GAGfjtD,EAAWN,GAAKtB,EAGlB,OAAO6uD,GAGTd,EAAiBt6D,UAAUc,QAAU,WAC/BzB,KAAK27D,aAAapvD,OAAS,IAC7BvM,KAAKq7D,cAAgB,GAErBr7D,KAAKq3D,oBAAoBt1D,KAAK/B,KAAKq7D,gBAGjCr7D,KAAKm7D,wBACPn7D,KAAKm7D,sBAAsB15D,UAE3BzB,KAAKm7D,sBAAwB,OAI1BF,EAhLT,GAyLA,SAASlE,GAAUjyB,EAAQzlB,GACzB,IAAI7Q,EAAI,aAAkBs2B,EAAQ,SAAUluB,GAC1C,OAAOyI,EAAOzI,EAAE3I,kBACb,EAEL,OAAIO,GAAK,GAAKs2B,EAAOt2B,GAAG6C,eAAiBgO,EAChCylB,EAAOt2B,GAGT,KCrMT,IAAI6tD,GAAuC,IAChCC,GAAqB,SAE5B,GAEJ,WACE,SAASC,EAAoBp4C,GAC3BnkB,KAAKmkB,YAAcA,EACnBnkB,KAAKgG,GAAKs2D,GAYZ,OATAC,EAAoB57D,UAAUc,QAAU,aAExC86D,EAAoB57D,UAAU67D,QAAU,SAAUC,GAChD,IAAIC,EAAe,KAA8BC,gBAAgB38D,KAAKmkB,YAAY2Q,wBAAwB9uB,IACtG42D,EAAUF,KAAkBA,EAAaE,QACzCC,EAAUH,GAAgBA,EAAaG,QAC3C,OAAOlgD,QAAQC,QAwFZ,SAAuB/P,EAAO+vD,EAASC,EAASC,QAC1B,IAAvBA,IACFA,EAAqBT,IAGvB,IAAI91D,EAAUsG,EAAMuY,aAAa7e,QAC7B8L,EAAS,IAAI,GAAgByqD,GAC7BC,OAAU/6D,EAEV66D,IACFE,EAAU,IAAI72C,OAAO,IAAM22C,EAAQtpD,MAAMizB,OAAS,QAAUq2B,EAAQlZ,IAAInd,OAAS,MAGnF,IAAIw2B,EAAkB,GACtBA,EAAgB5uD,KAAK,CACnBiX,QAAS,EACThG,KAAMxS,EAAM8G,eAAiB,EAC7BuL,QAAQ,IAGV,IAAK,IAAIG,EAAOxS,EAAM8G,eAAgB0L,EAAO,EAAGA,IAAQ,CACtD,IAAIzN,EAAc/E,EAAMgF,eAAewN,GACnCgG,EAAS,IAAUC,mBAAmB1T,EAAarL,GACnD45C,EAAW6c,EAAgBA,EAAgBzwD,OAAS,GAExD,IAAgB,IAAZ8Y,EAAJ,CASA,IAAI+nB,OAAI,EAER,GAAI2vB,IAAY3vB,EAAIx7B,EAAY44B,MAAMuyB,IAAW,CAE/C,IAAI3vB,EAAE,GAoBC,CAEL4vB,EAAgB5uD,KAAK,CACnBiX,QAAS,EACThG,KAAMA,EACNH,QAAQ,IAEV,SAtBA,IAFA,IAAI1Q,EAAIwuD,EAAgBzwD,OAAS,EAE1BiC,EAAI,IAAMwuD,EAAgBxuD,GAAG0Q,QAClC1Q,IAGF,GAAIA,EAAI,EAAG,CACTwuD,EAAgBzwD,OAASiC,EAAI,EAC7B2xC,EAAW6c,EAAgBxuD,GAE3B6D,EAAO4qD,YAAY59C,EAAM8gC,EAAS9gC,KAAMgG,GACxC86B,EAASjhC,QAAS,EAClBihC,EAAS96B,OAASA,EAClB86B,EAAS9gC,KAAOA,EAChB,UAcN,GAAI8gC,EAAS96B,OAASA,EAAQ,CAE5B,GACE23C,EAAgB36C,MAChB89B,EAAW6c,EAAgBA,EAAgBzwD,OAAS,SAC7C4zC,EAAS96B,OAASA,GAG3B,IAAIhU,EAAgB8uC,EAAS9gC,KAAO,EAEhChO,EAAgBgO,GAAQ,GAE1BhN,EAAO4qD,YAAY59C,EAAMhO,EAAegU,GAIxC86B,EAAS96B,SAAWA,EACtB86B,EAAS9gC,KAAOA,EAIhB29C,EAAgB5uD,KAAK,CACnBiX,OAAQA,EACRhG,KAAMA,EACNH,QAAQ,SAnEN09C,IAAYzc,EAASjhC,SAEvBihC,EAAS9gC,KAAOA,GAsEtB,OAAOhN,EAAO6qD,eAAerwD,GA1LJswD,CAAcn9D,KAAKmkB,YAAay4C,EAASC,KAG3DN,EAfT,GAoBI,GAEJ,WACE,SAASa,EAAgBN,GACvB98D,KAAKs1D,cAAgB,GACrBt1D,KAAKu1D,YAAc,GACnBv1D,KAAKq9D,mBAAqB,GAC1Br9D,KAAKs9D,QAAU,EACft9D,KAAKu9D,oBAAsBT,EAoE7B,OAjEAM,EAAgBz8D,UAAUs8D,YAAc,SAAUhvD,EAAiBoD,EAAegU,GAChF,KAAIpX,EJvCqB,UIuCgBoD,EJvChB,UIuCzB,CAIA,IAAImxB,EAAQxiC,KAAKs9D,QACjBt9D,KAAKs1D,cAAc9yB,GAASv0B,EAC5BjO,KAAKu1D,YAAY/yB,GAASnxB,EAC1BrR,KAAKs9D,UAEDj4C,EAAS,MACXrlB,KAAKq9D,mBAAmBh4C,IAAWrlB,KAAKq9D,mBAAmBh4C,IAAW,GAAK,KAI/E+3C,EAAgBz8D,UAAUu8D,eAAiB,SAAUrwD,GACnD,GAAI7M,KAAKs9D,SAAWt9D,KAAKu9D,oBAAqB,CAK5C,IAHA,IAAIpI,EAAe,IAAIM,YAAYz1D,KAAKs9D,SACpClI,EAAa,IAAIK,YAAYz1D,KAAKs9D,SAE7B9uD,EAAIxO,KAAKs9D,QAAU,EAAGxE,EAAI,EAAGtqD,GAAK,EAAGA,IAAKsqD,IACjD3D,EAAa2D,GAAK94D,KAAKs1D,cAAc9mD,GACrC4mD,EAAW0D,GAAK94D,KAAKu1D,YAAY/mD,GAGnC,OAAO,IAAI0mD,GAAeC,EAAcC,GAExC,IAAIoI,EAAU,EACVC,EAAYz9D,KAAKq9D,mBAAmB9wD,OAExC,IAASiC,EAAI,EAAGA,EAAIxO,KAAKq9D,mBAAmB9wD,OAAQiC,IAAK,CACvD,IAAIyT,EAAIjiB,KAAKq9D,mBAAmB7uD,GAEhC,GAAIyT,EAAG,CACL,GAAIA,EAAIu7C,EAAUx9D,KAAKu9D,oBAAqB,CAC1CE,EAAYjvD,EACZ,MAGFgvD,GAAWv7C,GAIf,IAAI1b,EAAUsG,EAAMuY,aAAa7e,QAKjC,IAHI4uD,EAAe,IAAIM,YAAYz1D,KAAKu9D,qBACpCnI,EAAa,IAAIK,YAAYz1D,KAAKu9D,qBAE7B/uD,EAAIxO,KAAKs9D,QAAU,EAAGxE,EAAI,EAAGtqD,GAAK,EAAGA,IAAK,CACjD,IAAIkvD,EAAa19D,KAAKs1D,cAAc9mD,GAChCoD,EAAc/E,EAAMgF,eAAe6rD,GACnCr4C,EAAS,IAAUC,mBAAmB1T,EAAarL,IAEnD8e,EAASo4C,GAAap4C,IAAWo4C,GAAaD,IAAYx9D,KAAKu9D,uBACjEpI,EAAa2D,GAAK4E,EAClBtI,EAAW0D,GAAK94D,KAAKu1D,YAAY/mD,GACjCsqD,KAIJ,OAAO,IAAI5D,GAAeC,EAAcC,IAIrCgI,EA1ET,GC5BA,IAAI,GAAsB,IACtBO,GAAiB,GACVC,GAAqB,SAE5BC,GAEJ,WACE,SAASA,EAAoB15C,EAAajI,EAAW4jC,QACrC,IAAVA,IACFA,EAAQ,IAGV9/C,KAAKmkB,YAAcA,EACnBnkB,KAAKkc,UAAYA,EACjBlc,KAAK8/C,MAAQA,EACb9/C,KAAKgG,GAAK43D,GAkBZ,OAfAC,EAAoBl9D,UAAU67D,QAAU,SAAUsB,GAChD,IAAI18D,EAAQpB,KAEZ,OAiBJ,SAA6Bkc,EAAWrP,EAAOixD,GAC7C,IAAIC,EAAY,KACZrhD,EAAWR,EAAUjP,IAAI,SAAUmP,EAAU5N,GAC/C,OAAOmO,QAAQC,QAAQR,EAAS4hD,qBAAqBnxD,EAAO8wD,GAAgBG,IAAoBx6D,KAAK,SAAUwhC,GAC7G,IAAIg5B,EAAkB/gD,yBAIlB1T,MAAM2T,QAAQ8nB,GAAS,CACpBz7B,MAAM2T,QAAQ+gD,KACjBA,EAAY,IAKd,IAFA,IAAIE,EAASpxD,EAAM8G,eAEVf,EAAK,EAAGsrD,EAAWp5B,EAAQlyB,EAAKsrD,EAAS3xD,OAAQqG,IAAM,CAC9D,IAAIgE,EAAIsnD,EAAStrD,GAEbgE,EAAErD,MAAQ,GAAKqD,EAAE+sC,IAAM/sC,EAAErD,OAASqD,EAAE+sC,KAAOsa,GAC7CF,EAAU3vD,KAAK,CACbmF,MAAOqD,EAAErD,MACTowC,IAAK/sC,EAAE+sC,IACPwa,KAAM3vD,EACNiN,KAAM7E,EAAE6E,UAKf,QAEL,OAAOkB,QAAQR,IAAIO,GAAUpZ,KAAK,SAAUoe,GAC1C,OAAOq8C,IAhDAK,CAAoBp+D,KAAKkc,UAAWlc,KAAKmkB,YAAa25C,GAAmBx6D,KAAK,SAAUwhC,GAC7F,OAAIA,EACQu5B,GAAev5B,EAAQ1jC,EAAM0+C,OAIlC,QAIX+d,EAAoBl9D,UAAUc,QAAU,aAEjCo8D,EA3BT,GAmEA,IAAI,GAEJ,WACE,SAAST,EAAgBN,GACvB98D,KAAKs1D,cAAgB,GACrBt1D,KAAKu1D,YAAc,GACnBv1D,KAAKs+D,eAAiB,GACtBt+D,KAAKu+D,oBAAsB,GAC3Bv+D,KAAK01D,OAAS,GACd11D,KAAKs9D,QAAU,EACft9D,KAAKu9D,oBAAsBT,EAmE7B,OAhEAM,EAAgBz8D,UAAUyY,IAAM,SAAUnL,EAAiBoD,EAAe8I,EAAMqkD,GAC9E,KAAIvwD,ELxFqB,UKwFgBoD,ELxFhB,UKwFzB,CAIA,IAAImxB,EAAQxiC,KAAKs9D,QACjBt9D,KAAKs1D,cAAc9yB,GAASv0B,EAC5BjO,KAAKu1D,YAAY/yB,GAASnxB,EAC1BrR,KAAKs+D,eAAe97B,GAASg8B,EAC7Bx+D,KAAK01D,OAAOlzB,GAASroB,EACrBna,KAAKs9D,UAEDkB,EAAe,KACjBx+D,KAAKu+D,oBAAoBC,IAAiBx+D,KAAKu+D,oBAAoBC,IAAiB,GAAK,KAI7FpB,EAAgBz8D,UAAUu8D,eAAiB,WACzC,GAAIl9D,KAAKs9D,SAAWt9D,KAAKu9D,oBAAqB,CAI5C,IAHA,IAAIpI,EAAe,IAAIM,YAAYz1D,KAAKs9D,SACpClI,EAAa,IAAIK,YAAYz1D,KAAKs9D,SAE7B9uD,EAAI,EAAGA,EAAIxO,KAAKs9D,QAAS9uD,IAChC2mD,EAAa3mD,GAAKxO,KAAKs1D,cAAc9mD,GACrC4mD,EAAW5mD,GAAKxO,KAAKu1D,YAAY/mD,GAGnC,OAAO,IAAI0mD,GAAeC,EAAcC,EAAYp1D,KAAK01D,QAEzD,IAAI8H,EAAU,EACViB,EAAWz+D,KAAKu+D,oBAAoBhyD,OAExC,IAASiC,EAAI,EAAGA,EAAIxO,KAAKu+D,oBAAoBhyD,OAAQiC,IAAK,CACxD,IAAIyT,EAAIjiB,KAAKu+D,oBAAoB/vD,GAEjC,GAAIyT,EAAG,CACL,GAAIA,EAAIu7C,EAAUx9D,KAAKu9D,oBAAqB,CAC1CkB,EAAWjwD,EACX,MAGFgvD,GAAWv7C,GAIXkzC,EAAe,IAAIM,YAAYz1D,KAAKu9D,qBACpCnI,EAAa,IAAIK,YAAYz1D,KAAKu9D,qBAGtC,IAJA,IAEIlI,EAAQ,GAEIyD,GAAPtqD,EAAI,EAAO,GAAGA,EAAIxO,KAAKs9D,QAAS9uD,IAAK,CAC5C,IAAIwtC,EAAQh8C,KAAKs+D,eAAe9vD,IAE5BwtC,EAAQyiB,GAAYziB,IAAUyiB,GAAYjB,IAAYx9D,KAAKu9D,uBAC7DpI,EAAa2D,GAAK94D,KAAKs1D,cAAc9mD,GACrC4mD,EAAW0D,GAAK94D,KAAKu1D,YAAY/mD,GACjC6mD,EAAMyD,GAAK94D,KAAK01D,OAAOlnD,GACvBsqD,KAIJ,OAAO,IAAI5D,GAAeC,EAAcC,EAAYC,IAIjD+H,EA3ET,GA+EO,SAASiB,GAAeN,EAAWje,GAcxC,IAbA,IAAI4e,EAASX,EAAU7uD,KAAK,SAAUyvD,EAAIC,GACxC,IAAIC,EAAOF,EAAGprD,MAAQqrD,EAAGrrD,MAMzB,OAJa,IAATsrD,IACFA,EAAOF,EAAGR,KAAOS,EAAGT,MAGfU,IAEL7uD,EAAY,IAAI,GAAgB8vC,GAChCj8B,OAAM7hB,EACNm+C,EAAW,GAENvtC,EAAK,EAAGksD,EAAWJ,EAAQ9rD,EAAKksD,EAASvyD,OAAQqG,IAAM,CAC9D,IAAI+tC,EAAQme,EAASlsD,GAErB,GAAKiR,GAIH,GAAI88B,EAAMptC,MAAQsQ,EAAItQ,MACpB,GAAIotC,EAAMgD,KAAO9/B,EAAI8/B,IACnBxD,EAAS/xC,KAAKyV,GACdA,EAAM88B,EACN3wC,EAAUoJ,IAAIunC,EAAMptC,MAAOotC,EAAMgD,IAAKhD,EAAMllC,MAAQklC,EAAMllC,KAAKlZ,MAAO49C,EAAS5zC,YAC1E,CACL,GAAIo0C,EAAMptC,MAAQsQ,EAAI8/B,IAAK,CACzB,GACE9/B,EAAMs8B,EAAS99B,YACRwB,GAAO88B,EAAMptC,MAAQsQ,EAAI8/B,KAE9B9/B,GACFs8B,EAAS/xC,KAAKyV,GAGhBA,EAAM88B,EAGR3wC,EAAUoJ,IAAIunC,EAAMptC,MAAOotC,EAAMgD,IAAKhD,EAAMllC,MAAQklC,EAAMllC,KAAKlZ,MAAO49C,EAAS5zC,cArBnFsX,EAAM88B,EACN3wC,EAAUoJ,IAAIunC,EAAMptC,MAAOotC,EAAMgD,IAAKhD,EAAMllC,MAAQklC,EAAMllC,KAAKlZ,MAAO49C,EAAS5zC,QA0BnF,OAAOyD,EAAUktD,iBCxMZ,IAAI6B,GAAmB,OAE1B,GAEJ,WACE,SAASC,EAA0B76C,EAAa86C,EAAeC,EAAWC,GAIxE,GAHAn/D,KAAKmkB,YAAcA,EACnBnkB,KAAKgG,GAAK+4D,GAENE,EAAc1yD,OAAQ,CAiBxBvM,KAAKo/D,cAAgBj7C,EAAY3X,iBAAiB,GAAIyyD,EAAchyD,IAhB5C,SAA2BQ,GACjD,MAAO,CACLA,MAAO,CACLQ,gBAAiBR,EAAMQ,gBACvBC,YAAa,EACbmD,cAAe5D,EAAM4D,cACrBC,UAAW6S,EAAYk7C,cAAc5xD,EAAM4D,gBAE7ClP,QAAS,CACPuN,WAAY,OAQlB1P,KAAKs/D,QAAUx9D,WAAWo9D,EAAWC,IAqCzC,OAjCAH,EAA0Br+D,UAAUc,QAAU,WACxCzB,KAAKo/D,gBACPp/D,KAAKmkB,YAAY3X,iBAAiBxM,KAAKo/D,cAAe,IACtDp/D,KAAKo/D,mBAAgBp9D,GAGK,kBAAjBhC,KAAKs/D,UACd3lD,aAAa3Z,KAAKs/D,SAClBt/D,KAAKs/D,aAAUt9D,IAInBg9D,EAA0Br+D,UAAU67D,QAAU,SAAUC,GACtD,IAAI8C,EAAmB,GAEvB,GAAIv/D,KAAKo/D,cACP,IAAK,IAAIxsD,EAAK,EAAG+F,EAAK3Y,KAAKo/D,cAAexsD,EAAK+F,EAAGpM,OAAQqG,IAAM,CAC9D,IAAI5M,EAAK2S,EAAG/F,GACRnF,EAAQzN,KAAKmkB,YAAYmK,mBAAmBtoB,GAE5CyH,GACF8xD,EAAiBnxD,KAAK,CACpBmF,MAAO9F,EAAMQ,gBACb01C,IAAKl2C,EAAM4D,cACX8sD,KAAM,IAMd,OAAOxhD,QAAQC,QAAQyhD,GAAekB,EAAkB9jC,OAAOC,aAG1DsjC,EA5DT,GCLI,GAAsC,WACxC,IAAIh2D,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA4C/BkD,GAAK,yBAEZ,GAEJ,WACE,SAAS8yD,EAAkB50D,GACzB,IAAIxJ,EAAQpB,KAEZA,KAAK4K,OAASA,EACd5K,KAAKmvB,WAAanvB,KAAK4K,OAAOiB,mBAAmBC,YAAY2zD,QAC7Dz/D,KAAK0/D,yBAA8F,cAAnE1/D,KAAK4K,OAAOiB,mBAAmBC,YAAY6zD,oBAC3E3/D,KAAK4/D,qBAAsF,gBAA/D5/D,KAAK4K,OAAOiB,mBAAmBC,YAAY+zD,gBACvE7/D,KAAK8/D,gBAAkB,GACvB9/D,KAAK+/D,eAAiB,GACtB//D,KAAKggE,0BAA4B,IAAI,GAA0Bp1D,GAC/D5K,KAAKggE,0BAA0BtF,wBAA0B16D,KAAK0/D,yBAC9D1/D,KAAK8/D,gBAAgB1xD,KAAKpO,KAAK4K,OAAOwB,iBAAiB,WACrD,OAAOhL,EAAMszB,oBAEf10B,KAAK8/D,gBAAgB1xD,KAAKpO,KAAK4K,OAAO0B,yBAAyB,SAAUJ,GACvE,GAAIA,EAAEJ,YAAa,CACjB,IAAIm0D,EAAe7+D,EAAM+tB,WACzB/tB,EAAM+tB,WAAa/tB,EAAMwJ,OAAOiB,mBAAmBC,YAAY2zD,QAE3DQ,IAAiB7+D,EAAM+tB,YACzB/tB,EAAMszB,iBAGR,IAAIwrC,EAAyB9+D,EAAMs+D,yBACnCt+D,EAAMs+D,yBAA+F,cAApEt+D,EAAMwJ,OAAOiB,mBAAmBC,YAAY6zD,oBAEzEO,IAA2B9+D,EAAMs+D,2BACnCt+D,EAAM4+D,0BAA0BtF,wBAA0Bt5D,EAAMs+D,yBAEhEt+D,EAAM++D,yBAGR,IAAIC,EAAyBh/D,EAAMw+D,qBACnCx+D,EAAMw+D,qBAAuF,gBAAhEx+D,EAAMwJ,OAAOiB,mBAAmBC,YAAY+zD,gBAErEO,IAA2Bh/D,EAAMw+D,sBACnCx+D,EAAMi/D,+BAIZrgE,KAAK8/D,gBAAgB1xD,KAAK,CACxB3M,QAAS,WACP,OAAO,YAASL,EAAM2+D,mBAG1B//D,KAAK00B,iBA0aP,OAvaA8qC,EAAkB5+D,IAAM,SAAUgK,GAChC,OAAOA,EAAO6B,gBAAgBC,KAGhC8yD,EAAkB7+D,UAAUgM,MAAQ,WAClC,OAAOD,IAGT8yD,EAAkB7+D,UAAUc,QAAU,WACpCzB,KAAK8/D,gBAAkB,YAAS9/D,KAAK8/D,kBAOvCN,EAAkB7+D,UAAU2/D,cAAgB,WAC1C,IAAIzzD,EAAQ7M,KAAK4K,OAAOkC,WAExB,IAAKD,IAAU7M,KAAKmvB,YAActiB,EAAM0zD,4BACtC,MAAO,GAGT,GAAIvgE,KAAK65D,aAAc,CAErB,IAAI2G,EAAmBxgE,KAAK65D,aAAa4G,cAAgBzgE,KAAK65D,aAAaX,aAAel5D,KAAK0gE,iBAAiBxH,aAC5G98C,EAAWpc,KAAK2gE,cAAgB3gE,KAAK2gE,cAAc36D,QAAKhE,EAC5D,MAAO,CACLw+D,iBAAkBA,EAClBhnC,UAAW3sB,EAAM8G,eACjByI,SAAUA,KAWhBojD,EAAkB7+D,UAAUigE,iBAAmB,SAAUn8C,GACvD,IAAI5X,EAAQ7M,KAAK4K,OAAOkC,WAExB,GAAKD,GAAU7M,KAAKmvB,aAActiB,EAAM0zD,6BAAgCvgE,KAAK0gE,kBAIxEj8C,GAAUA,EAAM+7C,kBAAoB/7C,EAAM+U,YAAc3sB,EAAM8G,eAAnE,CAII8Q,EAAMrI,WAAawhD,IAAsBn5C,EAAMrI,WAAa2iD,KAC9D/+D,KAAK6gE,oBAAsBp8C,GAG7B,IAAI+7C,EAAmB/7C,EAAM+7C,iBAE7B,GAAIxgE,KAAK0gE,iBAAiBtH,aAAaoH,GAAmB,CACxD,IAAI3G,EAAe75D,KAAK8gE,kBAEpBjH,GACFA,EAAav2D,KAAK,SAAUu2D,GACtBA,GACFA,EAAaT,aAAaoH,KAE3Bl9D,UAAKtB,EAAW,SAKzBw9D,EAAkB7+D,UAAU+zB,eAAiB,WAC3C,IAAItzB,EAAQpB,KAEZA,KAAK+/D,eAAiB,YAAS//D,KAAK+/D,gBACpC,IAAIlzD,EAAQ7M,KAAK4K,OAAOkC,WAEnB9M,KAAKmvB,YAAetiB,IAASA,EAAM0zD,8BAKxCvgE,KAAK65D,aAAe,IAAI,GAAahtD,EAAO7M,KAAKggE,2BACjDhgE,KAAK+/D,eAAe3xD,KAAKpO,KAAK65D,cAC9B75D,KAAK0gE,iBAAmB,IAAI,GAAiB1gE,KAAK65D,cAClD75D,KAAK+/D,eAAe3xD,KAAKpO,KAAK0gE,kBAC9B1gE,KAAK+/D,eAAe3xD,KAAKpO,KAAK0gE,iBAAiBnjD,YAAY,SAAUk3B,GACnE,OAAOrzC,EAAM2/D,sBAAsBtsB,MAErCz0C,KAAKghE,gBAAkB,IAAI,IAAQ,KACnChhE,KAAKihE,uBAAyB,IAAI,IAAiB,WACjD,OAAO7/D,EAAM8/D,gBACZ,KACHlhE,KAAK+/D,eAAe3xD,KAAKpO,KAAKihE,wBAC9BjhE,KAAK+/D,eAAe3xD,KAAK,KAA6BmP,YAAY,WAChE,OAAOnc,EAAMi/D,8BAEfrgE,KAAK+/D,eAAe3xD,KAAKpO,KAAK4K,OAAOyB,sCAAsC,WACzE,OAAOjL,EAAMi/D,8BAGfrgE,KAAK+/D,eAAe3xD,KAAKpO,KAAK4K,OAAOuB,wBAAwB,WAC3D,OAAO/K,EAAM++D,2BAEfngE,KAAK+/D,eAAe3xD,KAAKpO,KAAK4K,OAAOqB,0BAA0B,WAC7D,OAAO7K,EAAM+/D,6BAEfnhE,KAAK+/D,eAAe3xD,KAAKpO,KAAK4K,OAAOo1B,YAAY,SAAU9zB,GACzD,OAAO9K,EAAMggE,kBAAkBl1D,MAEjClM,KAAK+/D,eAAe3xD,KAAKpO,KAAK4K,OAAOymB,UAAU,SAAUnlB,GACvD,OAAO9K,EAAMigE,gBAAgBn1D,MAE/BlM,KAAK+/D,eAAe3xD,KAAK,CACvB3M,QAAS,WACHL,EAAMkgE,uBACRlgE,EAAMkgE,qBAAqB7jD,SAE3Brc,EAAMkgE,qBAAuB,MAG3BlgE,EAAM4/D,iBACR5/D,EAAM4/D,gBAAgBvjD,SAGxBrc,EAAM4/D,gBAAkB,KACxB5/D,EAAMy4D,aAAe,KACrBz4D,EAAMmgE,oBAAsB,KAC5BngE,EAAMs/D,iBAAmB,KACzBt/D,EAAM6/D,uBAAyB,KAC/B7/D,EAAMy/D,oBAAsB,KAExBz/D,EAAMu/D,eACRv/D,EAAMu/D,cAAcl/D,UAGtBL,EAAMu/D,cAAgB,QAG1B3gE,KAAKmgE,0BAGPX,EAAkB7+D,UAAU0/D,yBAA2B,WACjDrgE,KAAK2gE,eACP3gE,KAAK2gE,cAAcl/D,UAGrBzB,KAAK2gE,cAAgB,KACrB3gE,KAAKmgE,yBAGPX,EAAkB7+D,UAAU6gE,iBAAmB,SAAUr9C,GACvD,IAAI/iB,EAAQpB,KAEZ,GAAIA,KAAK2gE,cACP,OAAO3gE,KAAK2gE,cAKd,GAFA3gE,KAAK2gE,cAAgB,IAAI,GAAoBx8C,GAEzCnkB,KAAK4/D,sBAAwB5/D,KAAK65D,aAAc,CAClD,IAAI4H,EAAmB,KAA6Bz3C,QAAQhqB,KAAK65D,aAAa1C,WAE9E,GAAgC,IAA5BsK,EAAiBl1D,QAAgBvM,KAAK6gE,qBAAuB7gE,KAAK6gE,oBAAoBL,iBAOxF,OANoBxgE,KAAK2gE,cAAgB,IAAI,GAA0Bx8C,EAAankB,KAAK6gE,oBAAoBL,iBAAkB,WAE7Hp/D,EAAMy/D,oBAAsB,KAE5Bz/D,EAAMi/D,4BACL,KAEMoB,EAAiBl1D,OAAS,IACnCvM,KAAK2gE,cAAgB,IAAI9C,GAAoB15C,EAAas9C,IAK9D,OADAzhE,KAAK6gE,oBAAsB,KACpB7gE,KAAK2gE,eAGdnB,EAAkB7+D,UAAUmgE,gBAAkB,WAC5C,OAAO9gE,KAAKuhE,qBAGd/B,EAAkB7+D,UAAUw/D,sBAAwB,WAClD,IAAI/+D,EAAQpB,KAERA,KAAKghE,kBACHhhE,KAAKshE,uBACPthE,KAAKshE,qBAAqB7jD,SAC1Bzd,KAAKshE,qBAAuB,MAG9BthE,KAAKuhE,oBAAsBvhE,KAAKghE,gBAAgB1rD,QAAQ,WACtD,IAAIukD,EAAez4D,EAAMy4D,aAEzB,IAAKA,EAEH,OAAO,KAGT,IAAIyH,EAAuBlgE,EAAMkgE,qBAAuB,YAAwB,SAAUzlD,GACxF,OAAOza,EAAMogE,iBAAiB3H,EAAa1C,WAAWqF,QAAQ3gD,KAEhE,OAAOylD,EAAqBh+D,KAAK,SAAUo+D,GACzC,GAAIA,GAAiBJ,IAAyBlgE,EAAMkgE,qBAAsB,CAGxE,IAAIxyD,EAAa1N,EAAMwJ,OAAOoC,gBAE1B20D,EAAuB7yD,EAAaA,EAAW7B,IAAI,SAAUiE,GAC/D,OAAOA,EAAEjD,kBACN,GACL4rD,EAAajrC,OAAO8yC,EAAeC,GAGrC,OAAO9H,MAERv2D,UAAKtB,EAAW,SAAUqb,GAE3B,OADA,aAAkBA,GACX,SAKbmiD,EAAkB7+D,UAAUogE,sBAAwB,SAAUpF,GAC5D,GAAI37D,KAAK0gE,kBAAoB/E,EAAapvD,OAAQ,CAChD,IAAIuC,EAAa9O,KAAK4K,OAAOoC,gBAEzB8B,GACE9O,KAAK0gE,iBAAiB5E,iBAAiBhtD,IACzC9O,KAAK4K,OAAOgD,cAAckB,GAKhC9O,KAAK4K,OAAOg3D,eAAejG,IAG7B6D,EAAkB7+D,UAAUwgE,wBAA0B,WAChDnhE,KAAK0gE,kBAAoB1gE,KAAK0gE,iBAAiB9E,aACjD57D,KAAKihE,uBAAuBj1D,YAIhCwzD,EAAkB7+D,UAAUugE,aAAe,WACzC,IAAI9/D,EAAQpB,KAER65D,EAAe75D,KAAK8gE,kBAEnBjH,GAILA,EAAav2D,KAAK,SAAUu2D,GAC1B,GAAIA,EAAc,CAChB,IAAI/qD,EAAa1N,EAAMwJ,OAAOoC,gBAE9B,GAAI8B,GAAcA,EAAWvC,OAAS,EAAG,CAavC,IAZA,IAAI0tD,EAAW,GAEX3vC,EAAU,SAAiBpd,GAC7B,IAAIQ,EAAaR,EAAUyE,yBAEvBvQ,EAAMs/D,kBAAoBt/D,EAAMs/D,iBAAiB7E,SAASnuD,IAC5DusD,EAAS7rD,KAAKkS,MAAM25C,EAAUJ,EAAaJ,oBAAoB/rD,EAAY,SAAUkJ,GACnF,OAAOA,EAAEw/C,aAAe1oD,EAAakJ,EAAE3I,oBAKpC2E,EAAK,EAAGC,EAAe/D,EAAY8D,EAAKC,EAAatG,OAAQqG,IAAM,CAG1E0X,EAFgBzX,EAAaD,IAK3BqnD,EAAS1tD,SACXstD,EAAalC,oBAAoBsC,GAEjC74D,EAAMygE,OAAO/yD,EAAW,GAAGgF,oBAIhCxQ,UAAKtB,EAAW,OAGrBw9D,EAAkB7+D,UAAUygE,kBAAoB,SAAUl1D,GAGxD,GAFAlM,KAAK8hE,cAAgB,KAEhB9hE,KAAK0gE,kBAAqBx0D,EAAEpJ,QAAWoJ,EAAEpJ,OAAO2K,QAIhDvB,EAAErL,MAAMkhE,YAAe71D,EAAErL,MAAMquD,cAApC,CAIA,IAAIzhD,EAAQvB,EAAEpJ,OAAO2K,MACjBu0D,GAAc,EAElB,OAAQ91D,EAAEpJ,OAAOqX,MACf,KAAK,EAGH,IAAIkR,EAAOnf,EAAEpJ,OAAOm/D,OAChBC,EAAqBh2D,EAAEpJ,OAAOwuB,QAAQ6wC,WAI1C,GAHoB92C,EAAK+2C,QAAUF,EAGf,EAElB,OAGFF,GAAc,EACd,MAEF,KAAK,EAID,GAAIhiE,KAAK0gE,iBAAiB9E,YAGxB,IAFa1vD,EAAEpJ,OAAOm/D,OAEVI,aACV,MAIJ,OAGJ,KAAK,EAID,GAAIriE,KAAK0gE,iBAAiB9E,YAAa,CACrC,IAAI/uD,EAAQ7M,KAAK4K,OAAOkC,WAExB,GAAID,GAASY,EAAMS,cAAgBrB,EAAM0E,iBAAiB9D,EAAMQ,iBAC9D,MAIJ,OAGJ,QACE,OAGJjO,KAAK8hE,cAAgB,CACnBp0D,WAAYD,EAAMQ,gBAClB+zD,YAAaA,KAIjBxC,EAAkB7+D,UAAU0gE,gBAAkB,SAAUn1D,GACtD,IAAI9K,EAAQpB,KAER65D,EAAe75D,KAAK8gE,kBAExB,GAAKjH,GAAiB75D,KAAK8hE,eAAkB51D,EAAEpJ,OAA/C,CAIA,IAAI4K,EAAa1N,KAAK8hE,cAAcp0D,WAChCs0D,EAAchiE,KAAK8hE,cAAcE,YACjCv0D,EAAQvB,EAAEpJ,OAAO2K,MAErB,GAAKA,GAASA,EAAMQ,kBAAoBP,EAAxC,CAIA,GAAIs0D,GACF,GAAsB,IAAlB91D,EAAEpJ,OAAOqX,KAGT,WAEC,CACL,IAAItN,EAAQ7M,KAAK4K,OAAOkC,WAExB,IAAKD,GAASY,EAAMS,cAAgBrB,EAAM0E,iBAAiB7D,GACzD,OAIJmsD,EAAav2D,KAAK,SAAUu2D,GAC1B,GAAIA,EAAc,CAChB,IAAIN,EAASM,EAAaL,gBAAgB9rD,GAE1C,GAAI6rD,GAAUA,EAAOtrD,kBAAoBP,EAAY,CACnD,IAAI40D,EAAgB/I,EAAOnD,YAE3B,GAAI4L,GAAeM,EAAe,CAChC,IAAIrI,EAAW,CAACV,IAEZrtD,EAAErL,MAAMquD,cAAgBhjD,EAAErL,MAAM6gC,WAClCu4B,EAAS7rD,KAAKkS,MAAM25C,EAAUJ,EAAaH,iBAAiBH,EAAQ,SAAU3iD,GAC5E,OAAOA,EAAEw/C,cAAgBkM,KAI7BzI,EAAalC,oBAAoBsC,GAEjC74D,EAAMygE,OAAO,CACXn0D,WAAYA,EACZC,OAAQ,SAKfrK,UAAKtB,EAAW,SAGrBw9D,EAAkB7+D,UAAUkhE,OAAS,SAAU32D,GAC7ClL,KAAK4K,OAAO23D,wCAAwCr3D,EAAU,IAKzDs0D,EAxdT,GA6dIgD,GAEJ,SAAUz4D,GAGR,SAASy4D,IACP,OAAkB,OAAXz4D,GAAmBA,EAAOuW,MAAMtgB,KAAM2W,YAAc3W,KAiD7D,OApDA,GAAUwiE,EAAez4D,GAMzBy4D,EAAc7hE,UAAU2oB,iBAAmB,SAAU3e,EAAUC,EAAQsK,GACrE,IAAI9T,EAAQpB,KAERyiE,EAAoB,GAAkB7hE,IAAIgK,GAE9C,GAAK63D,EAAL,CAIA,IAAIlB,EAAsBkB,EAAkB3B,kBAE5C,OAAIS,GACFvhE,KAAK0iE,gBAAgB/3D,EAAUC,GACxB22D,EAAoBj+D,KAAK,SAAUu2D,GACxC,GAAIA,EAAc,CAChBz4D,EAAMuhE,OAAOF,EAAmB5I,EAAcjvD,EAAQsK,GAEtD,IAAIhI,EAAYtC,EAAOoL,eAEnB9I,GACFu1D,EAAkBZ,OAAO30D,EAAUC,6BAT3C,IAgBFq1D,EAAc7hE,UAAUiiE,iBAAmB,SAAUh4D,GACnD,IAAIkE,EAAalE,EAAOoC,gBACxB,OAAO8B,EAAaA,EAAW7B,IAAI,SAAUiE,GAC3C,OAAOA,EAAEjD,kBACN,IAGPu0D,EAAc7hE,UAAUkiE,eAAiB,SAAU3tD,EAAMtK,GACvD,OAAIsK,GAAQA,EAAK4tD,eACR5tD,EAAK4tD,eAAe71D,IAAI,SAAU2jB,GACvC,OAAOA,EAAI,IAIR5wB,KAAK4iE,iBAAiBh4D,IAG/B43D,EAAc7hE,UAAU+J,IAAM,SAAU4d,EAAWjd,KAE5Cm3D,EArDT,CAsDE,KAEF,SAASO,GAA2B7tD,GAClC,IAAK,KAAkBA,GAAO,CAC5B,IAAK,KAAeA,GAClB,OAAO,EAGT,IAAI8tD,EAAc9tD,EAElB,IAAK,KAAkB8tD,EAAYjJ,UAAY,KAAeiJ,EAAYjJ,QACxE,OAAO,EAGT,IAAK,KAAkBiJ,EAAYC,aAAe,KAAeD,EAAYC,WAC3E,OAAO,EAGT,IAAK,KAAkBD,EAAYF,mBAAqB,KAAcE,EAAYF,kBAAoBE,EAAYF,eAAe/uB,MAAM,OACrI,OAAO,EAIX,OAAO,EAGT,IAAI,GAEJ,SAAUhqC,GAGR,SAASm5D,IACP,OAAOn5D,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,gBACJkE,MAAOJ,EAAA,EAAa,qBAAsB,UAC1CK,MAAO,SACPC,aAAc,KACdC,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,KAOT6I,IAAK,CACH7I,QAAS,MAQXC,OAAQ,KAIV0e,YAAa,CACXA,YAAa,mCACbjU,KAAM,CAAC,CACLkU,KAAM,yBACND,YAAa,kaACbg6C,WAAYJ,GACZ15C,OAAQ,CACN,KAAQ,SACR,WAAc,CACZ,OAAU,CACR,KAAQ,SACR,QAAW,GAEb,UAAa,CACX,KAAQ,SACR,KAAQ,CAAC,KAAM,QACf,QAAW,QAEb,eAAkB,CAChB,KAAQ,QACR,MAAS,CACP,KAAQ,mBAOhBrpB,KAcR,OAxEA,GAAUkjE,EAAcn5D,GA6DxBm5D,EAAaviE,UAAUgiE,OAAS,SAAUS,EAAoBvJ,EAAcjvD,EAAQsK,GAClF,IAAI6kD,EAAS7kD,GAAQA,EAAK6kD,QAAU,EAChCC,EAAch6D,KAAK6iE,eAAe3tD,EAAMtK,GAExCsK,GAA2B,OAAnBA,EAAK+tD,UACf7I,GAAyBP,GAAc,EAAOE,EAAQC,GAEtDJ,GAA2BC,GAAc,EAAOE,EAAQC,IAIrDkJ,EAzET,CA0EEV,IAEE,GAEJ,SAAUz4D,GAGR,SAASs5D,IACP,OAAOt5D,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,2BACJkE,MAAOJ,EAAA,EAAa,gCAAiC,sBACrDK,MAAO,qBACPC,aAAc,KACdC,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,aAAS,KAIhB,MAKFC,OAAQ,QAINzK,KAOR,OA9BA,GAAUqjE,EAAyBt5D,GA0BnCs5D,EAAwB1iE,UAAUgiE,OAAS,SAAUS,EAAoBvJ,EAAcjvD,EAAQ04D,GAC7F1J,GAA2BC,GAAc,EAAOp+B,OAAOC,UAAW17B,KAAK4iE,iBAAiBh4D,KAGnFy4D,EA/BT,CAgCEb,IAEE,GAEJ,SAAUz4D,GAGR,SAASw5D,IACP,OAAOx5D,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,cACJkE,MAAOJ,EAAA,EAAa,mBAAoB,QACxCK,MAAO,OACPC,aAAc,KACdC,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,KAOT6I,IAAK,CACH7I,QAAS,MAQXC,OAAQ,KAIV0e,YAAa,CACXA,YAAa,iCACbjU,KAAM,CAAC,CACLkU,KAAM,uBACND,YAAa,qZACbg6C,WAAYJ,GACZ15C,OAAQ,CACN,KAAQ,SACR,WAAc,CACZ,OAAU,CACR,KAAQ,SACR,QAAW,GAEb,UAAa,CACX,KAAQ,SACR,KAAQ,CAAC,KAAM,QACf,QAAW,QAEb,eAAkB,CAChB,KAAQ,QACR,MAAS,CACP,KAAQ,mBAOhBrpB,KAcR,OAxEA,GAAUujE,EAAYx5D,GA6DtBw5D,EAAW5iE,UAAUgiE,OAAS,SAAUS,EAAoBvJ,EAAcjvD,EAAQsK,GAChF,IAAI6kD,EAAS7kD,GAAQA,EAAK6kD,QAAU,EAChCC,EAAch6D,KAAK6iE,eAAe3tD,EAAMtK,GAExCsK,GAA2B,OAAnBA,EAAK+tD,UACf7I,GAAyBP,GAAc,EAAME,EAAQC,GAErDJ,GAA2BC,GAAc,EAAME,EAAQC,IAIpDuJ,EAzET,CA0EEf,IAEE,GAEJ,SAAUz4D,GAGR,SAASy5D,IACP,OAAOz5D,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,yBACJkE,MAAOJ,EAAA,EAAa,8BAA+B,oBACnDK,MAAO,mBACPC,aAAc,KACdC,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,aAAS,KAIhB,MAKFC,OAAQ,QAINzK,KAQR,OA/BA,GAAUwjE,EAAuBz5D,GA0BjCy5D,EAAsB7iE,UAAUgiE,OAAS,SAAUS,EAAoBvJ,EAAcjvD,GACnF,IAAI64D,EAAgBzjE,KAAK4iE,iBAAiBh4D,GAC1CgvD,GAA2BC,GAAc,EAAMp+B,OAAOC,UAAW+nC,IAG5DD,EAhCT,CAiCEhB,IAEE,GAEJ,SAAUz4D,GAGR,SAAS25D,IACP,OAAO35D,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,8BACJkE,MAAOJ,EAAA,EAAa,6BAA8B,2BAClDK,MAAO,0BACPC,aAAc,KACdC,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,aAAS,KAIhB,MAKFC,OAAQ,QAINzK,KAsBR,OA7CA,GAAU0jE,EAA4B35D,GA0BtC25D,EAA2B/iE,UAAUgiE,OAAS,SAAUS,EAAoBvJ,EAAcjvD,GACxF,GAAIivD,EAAajC,QAAQzB,WACvBqE,GAAwBX,EAAc,KAAiB8J,QAAQphE,OAAO,OACjE,CACL,IAAI4hB,EAAcvZ,EAAOkC,WAEzB,IAAKqX,EACH,OAGF,IAAIy/C,EAAW,KAA8BrrC,YAAYpU,EAAY2Q,wBAAwB9uB,IAE7F,GAAI49D,GAAYA,EAASprC,uBAEvB8hC,GAAiCT,EADpB,IAAI3zC,OAAO,QAAU,aAAuB09C,EAASprC,0BACX,KAKtDkrC,EA9CT,CA+CElB,IAEE,GAEJ,SAAUz4D,GAGR,SAAS85D,IACP,OAAO95D,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,8BACJkE,MAAOJ,EAAA,EAAa,6BAA8B,oBAClDK,MAAO,mBACPC,aAAc,KACdC,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,aAAS,KAIhB,MAKFC,OAAQ,QAINzK,KAsBR,OA7CA,GAAU6jE,EAAsB95D,GA0BhC85D,EAAqBljE,UAAUgiE,OAAS,SAAUS,EAAoBvJ,EAAcjvD,GAClF,GAAIivD,EAAajC,QAAQzB,WACvBqE,GAAwBX,EAAc,KAAiBiK,OAAOvhE,OAAO,OAChE,CACL,IAAI4hB,EAAcvZ,EAAOkC,WAEzB,IAAKqX,EACH,OAGF,IAAIu4C,EAAe,KAA8BC,gBAAgBx4C,EAAY2Q,wBAAwB9uB,IAErG,GAAI02D,GAAgBA,EAAaG,SAAWH,EAAaG,QAAQtpD,MAE/D+mD,GAAiCT,EADpB,IAAI3zC,OAAOw2C,EAAaG,QAAQtpD,QACU,KAKtDswD,EA9CT,CA+CErB,IAEE,GAEJ,SAAUz4D,GAGR,SAASg6D,IACP,OAAOh6D,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,gCACJkE,MAAOJ,EAAA,EAAa,+BAAgC,sBACpDK,MAAO,qBACPC,aAAc,KACdC,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,aAAS,KAIhB,MAKFC,OAAQ,QAINzK,KAsBR,OA7CA,GAAU+jE,EAAwBh6D,GA0BlCg6D,EAAuBpjE,UAAUgiE,OAAS,SAAUS,EAAoBvJ,EAAcjvD,GACpF,GAAIivD,EAAajC,QAAQzB,WACvBqE,GAAwBX,EAAc,KAAiBiK,OAAOvhE,OAAO,OAChE,CACL,IAAI4hB,EAAcvZ,EAAOkC,WAEzB,IAAKqX,EACH,OAGF,IAAIu4C,EAAe,KAA8BC,gBAAgBx4C,EAAY2Q,wBAAwB9uB,IAErG,GAAI02D,GAAgBA,EAAaG,SAAWH,EAAaG,QAAQtpD,MAE/D+mD,GAAiCT,EADpB,IAAI3zC,OAAOw2C,EAAaG,QAAQtpD,QACU,KAKtDwwD,EA9CT,CA+CEvB,IAEE,GAEJ,SAAUz4D,GAGR,SAASi6D,IACP,OAAOj6D,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,iBACJkE,MAAOJ,EAAA,EAAa,sBAAuB,YAC3CK,MAAO,WACPC,aAAc,KACdC,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,aAAS,KAIhB,MAKFC,OAAQ,QAINzK,KAOR,OA9BA,GAAUgkE,EAAej6D,GA0BzBi6D,EAAcrjE,UAAUgiE,OAAS,SAAUS,EAAoBvJ,EAAcxuD,GAC3EuuD,GAA2BC,GAAc,IAGpCmK,EA/BT,CAgCExB,IAEE,GAEJ,SAAUz4D,GAGR,SAASk6D,IACP,OAAOl6D,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,mBACJkE,MAAOJ,EAAA,EAAa,wBAAyB,cAC7CK,MAAO,aACPC,aAAc,KACdC,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,aAAS,KAIhB,MAKFC,OAAQ,QAINzK,KAOR,OA9BA,GAAUikE,EAAiBl6D,GA0B3Bk6D,EAAgBtjE,UAAUgiE,OAAS,SAAUS,EAAoBvJ,EAAcxuD,GAC7EuuD,GAA2BC,GAAc,IAGpCoK,EA/BT,CAgCEzB,IAEE,GAEJ,SAAUz4D,GAGR,SAASm6D,IACP,OAAkB,OAAXn6D,GAAmBA,EAAOuW,MAAMtgB,KAAM2W,YAAc3W,KAiB7D,OApBA,GAAUkkE,EAAiBn6D,GAM3Bm6D,EAAgBvjE,UAAUwjE,gBAAkB,WAC1C,OAAOxqB,SAAS35C,KAAKgG,GAAG+3C,OAAOmmB,EAAgBE,UAAU73D,UAG3D23D,EAAgBvjE,UAAUgiE,OAAS,SAAUS,EAAoBvJ,EAAcjvD,INjrB1E,SAAiCivD,EAAcwK,EAAWvK,EAAYwK,GAC3E,IAMIrK,EAAWJ,EAAaH,iBAAiB,KANhC,SAAgBH,EAAQvd,GACnC,OAAOA,IAAUqoB,GAAa9K,EAAOnD,cAAgB0D,IAAewK,EAAmB/oD,KAAK,SAAU8D,GACpG,OAAOk6C,EAAOtC,aAAa53C,OAK/Bw6C,EAAalC,oBAAoBsC,GM0qB/BsK,CAAwB1K,EAAc75D,KAAKmkE,mBAAmB,EAAMnkE,KAAK4iE,iBAAiBh4D,KAG5Fs5D,EAAgBE,UAAY,mBAE5BF,EAAgBx3D,GAAK,SAAUsvC,GAC7B,OAAOkoB,EAAgBE,UAAYpoB,GAG9BkoB,EArBT,CAsBE1B,IAEF,YAA2B,IAC3B,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IAErB,IAAK,IAAI,GAAI,EAAG,IAAK,EAAG,KACtB,YAAiC,IAAI,GAAgB,CACnDx8D,GAAI,GAAgB0G,GAAG,IACvBxC,MAAOJ,EAAA,EAAa,wBAAyB,iBAAkB,IAC/DK,MAAO,cAAgB,GACvBC,aAAc,KACdC,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,aAAS,KAIhB,KAEA,GAEA,IACFC,OAAQ,Q,cC3lCV,GAAsC,WACxC,IAAIzB,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA8BtC,GAEJ,SAAUO,GAGR,SAASy6D,IACP,OAAOz6D,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,2BACJkE,MAAOJ,EAAA,EAAa,yBAA0B,uBAC9CK,MAAO,sBACPC,aAAc,QACVpK,KAOR,OAfA,GAAUwkE,EAAkBz6D,GAW5By6D,EAAiB7jE,UAAU+J,IAAM,SAAUC,EAAUC,GACnD,KAAW65D,aAAa,KAAWC,eAAiB,IAG/CF,EAhBT,CAiBE,KAEE,GAEJ,SAAUz6D,GAGR,SAAS46D,IACP,OAAO56D,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,4BACJkE,MAAOJ,EAAA,EAAa,0BAA2B,wBAC/CK,MAAO,uBACPC,aAAc,QACVpK,KAOR,OAfA,GAAU2kE,EAAmB56D,GAW7B46D,EAAkBhkE,UAAU+J,IAAM,SAAUC,EAAUC,GACpD,KAAW65D,aAAa,KAAWC,eAAiB,IAG/CC,EAhBT,CAiBE,KAEE,GAEJ,SAAU56D,GAGR,SAAS66D,IACP,OAAO76D,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,8BACJkE,MAAOJ,EAAA,EAAa,4BAA6B,0BACjDK,MAAO,yBACPC,aAAc,QACVpK,KAOR,OAfA,GAAU4kE,EAAqB76D,GAW/B66D,EAAoBjkE,UAAU+J,IAAM,SAAUC,EAAUC,GACtD,KAAW65D,aAAa,IAGnBG,EAhBT,CAiBE,KAEF,YAAqB,IACrB,YAAqB,IACrB,YAAqB,I,kCC5FjB,GAEJ,WACE,SAASC,KAyDT,OAvDAA,EAAeC,gBAAkB,SAAUl6D,EAAQm6D,GAIjD,IAHA,IAAIC,OAAShjE,EACTijE,EAAc,GAETryD,EAAK,EAAGsyD,EAAUH,EAAOnyD,EAAKsyD,EAAQ34D,OAAQqG,IAAM,CAC3D,IAAIiV,EAAOq9C,EAAQtyD,GAEK,kBAAbiV,EAAKs9C,MACdH,EAASn9C,EAAKs9C,KAGZt9C,EAAKpa,OAA8B,kBAAdoa,EAAKjP,MAC5BqsD,EAAY72D,KAAKyZ,GAUrB,MANsB,kBAAXm9C,GACLp6D,EAAOgC,YACThC,EAAOkC,WAAWs4D,QAAQJ,GAIvBC,GAGTJ,EAAeQ,wBAA0B,SAAUz6D,EAAQid,GACzD,IAAKjd,EAAOgC,WACV,OAAO,EAGT,IAAIC,EAAQjC,EAAOkC,WACfw4D,EAAYz4D,EAAMgR,cAAcgK,EAAKpa,OAEzC,OADqBZ,EAAMk9B,oBACL5G,YAAYmiC,IAGpCT,EAAeU,QAAU,SAAU36D,EAAQ46D,GACzC56D,EAAOkI,eAEP,IAAIiyD,EAAQF,EAAeC,gBAAgBl6D,EAAQ46D,GAE9B,IAAjBT,EAAMx4D,QAAgBs4D,EAAeQ,wBAAwBz6D,EAAQm6D,EAAM,IAE7En6D,EAAO66D,aAAa,qBAAsBV,EAAM93D,IAAI,SAAU4a,GAC5D,OAAO,KAAcsQ,QAAQ,KAAM/Y,KAAKyI,EAAKpa,OAAQoa,EAAKjP,SAG5DhO,EAAO66D,aAAa,qBAAsBV,EAAM93D,IAAI,SAAU4a,GAC5D,OAAO,KAAc69C,YAAY,KAAMtmD,KAAKyI,EAAKpa,OAAQoa,EAAKjP,SAIlEhO,EAAOkI,gBAGF+xD,EA1DT,GCOIc,GAEJ,WACE,SAASA,EAAoBpjE,GAC3BvC,KAAKuC,MAAQA,EACbvC,KAAK4lE,OAASrjE,EAAMymB,cAetB,OARA28C,EAAoBE,MAAQ,SAAU7/D,GACpC,MAAkB,kBAAPA,EACFA,EAAGgjB,cAGLhjB,EAAG4/D,QAGLD,EAlBT,G,UCdI,GAAsC,SAAUjlD,EAASC,EAAYC,EAAGC,GAC1E,OAAO,IAAKD,IAAMA,EAAIjE,UAAU,SAAUC,EAASkE,GACjD,SAASC,EAAUxe,GACjB,IACEye,EAAKH,EAAUI,KAAK1e,IACpB,MAAO2J,GACP4U,EAAO5U,IAIX,SAASgV,EAAS3e,GAChB,IACEye,EAAKH,EAAiB,MAAEte,IACxB,MAAO2J,GACP4U,EAAO5U,IAIX,SAAS8U,EAAK3O,GACZA,EAAO8O,KAAOvE,EAAQvK,EAAO9P,OAAS,IAAIqe,EAAE,SAAUhE,GACpDA,EAAQvK,EAAO9P,SACde,KAAKyd,EAAWG,GAGrBF,GAAMH,EAAYA,EAAUP,MAAMI,EAASC,GAAc,KAAKM,WAI9D,GAA0C,SAAUP,EAASW,GAC/D,IASIC,EACAC,EACAC,EACAC,EAZAC,EAAI,CACNxX,MAAO,EACPyX,KAAM,WACJ,GAAW,EAAPH,EAAE,GAAQ,MAAMA,EAAE,GACtB,OAAOA,EAAE,IAEXI,KAAM,GACNC,IAAK,IAMP,OAAOJ,EAAI,CACTR,KAAMa,EAAK,GACX,MAASA,EAAK,GACd,OAAUA,EAAK,IACI,oBAAXC,SAA0BN,EAAEM,OAAOC,UAAY,WACvD,OAAOhiB,OACLyhB,EAEJ,SAASK,EAAKG,GACZ,OAAO,SAAUC,GACf,OAIJ,SAAcC,GACZ,GAAIb,EAAG,MAAM,IAAIc,UAAU,mCAE3B,KAAOV,GACL,IACE,GAAIJ,EAAI,EAAGC,IAAMC,EAAY,EAARW,EAAG,GAASZ,EAAU,OAAIY,EAAG,GAAKZ,EAAS,SAAOC,EAAID,EAAU,SAAMC,EAAEvX,KAAKsX,GAAI,GAAKA,EAAEN,SAAWO,EAAIA,EAAEvX,KAAKsX,EAAGY,EAAG,KAAKhB,KAAM,OAAOK,EAG3J,OAFID,EAAI,EAAGC,IAAGW,EAAK,CAAS,EAARA,EAAG,GAAQX,EAAEjf,QAEzB4f,EAAG,IACT,KAAK,EACL,KAAK,EACHX,EAAIW,EACJ,MAEF,KAAK,EAEH,OADAT,EAAExX,QACK,CACL3H,MAAO4f,EAAG,GACVhB,MAAM,GAGV,KAAK,EACHO,EAAExX,QACFqX,EAAIY,EAAG,GACPA,EAAK,CAAC,GACN,SAEF,KAAK,EACHA,EAAKT,EAAEG,IAAIQ,MAEXX,EAAEE,KAAKS,MAEP,SAEF,QACE,KAAkBb,GAAZA,EAAIE,EAAEE,MAAYrV,OAAS,GAAKiV,EAAEA,EAAEjV,OAAS,MAAkB,IAAV4V,EAAG,IAAsB,IAAVA,EAAG,IAAW,CACtFT,EAAI,EACJ,SAGF,GAAc,IAAVS,EAAG,MAAcX,GAAKW,EAAG,GAAKX,EAAE,IAAMW,EAAG,GAAKX,EAAE,IAAK,CACvDE,EAAExX,MAAQiY,EAAG,GACb,MAGF,GAAc,IAAVA,EAAG,IAAYT,EAAExX,MAAQsX,EAAE,GAAI,CACjCE,EAAExX,MAAQsX,EAAE,GACZA,EAAIW,EACJ,MAGF,GAAIX,GAAKE,EAAExX,MAAQsX,EAAE,GAAI,CACvBE,EAAExX,MAAQsX,EAAE,GAEZE,EAAEG,IAAIzT,KAAK+T,GAEX,MAGEX,EAAE,IAAIE,EAAEG,IAAIQ,MAEhBX,EAAEE,KAAKS,MAEP,SAGJF,EAAKd,EAAKpX,KAAKyW,EAASgB,GACxB,MAAOxV,GACPiW,EAAK,CAAC,EAAGjW,GACTqV,EAAI,EACJ,QACAD,EAAIE,EAAI,EAIZ,GAAY,EAARW,EAAG,GAAQ,MAAMA,EAAG,GACxB,MAAO,CACL5f,MAAO4f,EAAG,GAAKA,EAAG,QAAK,EACvBhB,MAAM,GAlFCH,CAAK,CAACiB,EAAGC,OA0Gf,SAAS4jD,GAAqBf,GAKnC,IAJAA,EAAQA,EAAMjpD,OAAO,SAAU+L,GAC7B,OAAOA,EAAKpa,SAGHlB,OAAX,CAMA,IAFA,IAAIkB,EAAQs3D,EAAM,GAAGt3D,MAEZe,EAAI,EAAGA,EAAIu2D,EAAMx4D,OAAQiC,IAChCf,EAAQ,KAAMsgB,UAAUtgB,EAAOs3D,EAAMv2D,GAAGf,OAG1C,IAAIQ,EAAkBR,EAAMQ,gBACxBoD,EAAgB5D,EAAM4D,cAEtBpD,IAAoBoD,EACD,IAAjB0zD,EAAMx4D,OACR,aAAMzC,EAAA,EAAa,SAAU,qCAAsCmE,IAEnE,aAAMnE,EAAA,EAAa,SAAU,wCAAyCi7D,EAAMx4D,OAAQ0B,IAGjE,IAAjB82D,EAAMx4D,OACR,aAAMzC,EAAA,EAAa,SAAU,mDAAoDmE,EAAiBoD,IAElG,aAAMvH,EAAA,EAAa,SAAU,sDAAuDi7D,EAAMx4D,OAAQ0B,EAAiBoD,KAIlH,SAAS00D,GAA6Cl5D,GAM3D,IALA,IAAIwF,EAAS,GACT4mC,EAAO,IAAIwH,IAIN7tC,EAAK,EAAGozD,EAFE,KAAuCh8C,QAAQnd,GAElB+F,EAAKozD,EAAez5D,OAAQqG,IAAM,CAChF,IAAIqzD,EAAYD,EAAepzD,GAC/BP,EAAOjE,KAAK63D,GAERA,EAAUC,aACZjtB,EAAK7/B,IAAIusD,GAAoBE,MAAMI,EAAUC,cAyBjD,IApBA,IAEI57C,EAAU,SAAiB27C,GAC7B,GAAIA,EAAUC,YAAa,CACzB,GAAIjtB,EAAK94B,IAAIwlD,GAAoBE,MAAMI,EAAUC,cAC/C,MAAO,WAGTjtB,EAAK7/B,IAAIusD,GAAoBE,MAAMI,EAAUC,cAG/C7zD,EAAOjE,KAAK,CACV+3D,YAAaF,EAAUE,YACvBD,YAAaD,EAAUC,YACvBE,+BAAgC,SAAwCv5D,EAAO1K,EAAS0Z,GACtF,OAAOoqD,EAAUI,oCAAoCx5D,EAAOA,EAAMk9B,oBAAqB5nC,EAAS0Z,OAK7FlD,EAAK,EAAG2tD,EApBI,KAA4Ct8C,QAAQnd,GAoBrB8L,EAAK2tD,EAAiB/5D,OAAQoM,IAAM,CAGtF2R,EAFI27C,EAAYK,EAAiB3tD,IAKnC,OAAOtG,EAGT,IAAI,GAEJ,WACE,SAASk0D,KAqCT,OAnCAA,EAAoB9iB,OAAS,SAAUwiB,EAAWxxD,EAAUlR,GAC1D,OAAO,GAAUvD,UAAM,OAAQ,EAAQ,WACrC,IAAIqxD,EACJ,OAAO,GAAYrxD,KAAM,SAAU2Y,GACjC,OAAQA,EAAGzO,OACT,KAAK,EACH,OAAyB,IAArB+7D,EAAU15D,OACL,CAAC,OAENvK,IAGJqvD,EAAWkV,EAAoBC,WAAWxkD,WAAWf,OAAO1e,OAIrD,CAAC,EAEN8uD,EAAS4U,EAAWxxD,EAAUlR,IALV,CAAC,EAErB,GAKJ,KAAK,EACH,MAAO,CAAC,EAENoV,EAAGgJ,QAEP,KAAK,EACH,MAAO,CAAC,EAENskD,EAAU,UAMtBM,EAAoBC,WAAa,IAAI,KAC9BD,EAtCT,GA0CO,SAASE,GAAwC97D,EAAU+7D,EAAej5D,EAAOlK,EAAMsY,GAC5F,OAAO,GAAU7b,UAAM,OAAQ,EAAQ,WACrC,IAAI2mE,EAAc95D,EAAOuP,EAAUwqD,EACnC,OAAO,GAAY5mE,KAAM,SAAU2Y,GACjC,OAAQA,EAAGzO,OACT,KAAK,EAIH,OAHAy8D,EAAeh8D,EAAS/J,IAAI,MAC5BiM,EAAQ,aAAa65D,GAAiBA,EAAc55D,WAAa45D,EACjEtqD,EAAW,KAA4C4N,QAAQnd,GACxD,CAAC,EAEN,GAAoB42C,OAAOrnC,EAAUvP,EAAOtJ,IAEhD,KAAK,EAEH,OADAqjE,EAAWjuD,EAAGgJ,QAIP,CAAC,EAENglD,EAAaE,eAAeC,GAAiCF,EAAUF,EAAej5D,EAAOoO,IALzE,CAAC,EAErB,GAKJ,KAAK,EACHlD,EAAGgJ,OAEHhJ,EAAGzO,MAAQ,EAEb,KAAK,EACH,MAAO,CAAC,QAOX,SAAS48D,GAAgCn8D,EAAUyR,EAAUsqD,EAAej5D,EAAOoO,GACxF,OAAO,GAAU7b,UAAM,OAAQ,EAAQ,WACrC,IAAI+mE,EAAel6D,EAAO5I,EAAUq1D,EAAS0N,EAAcC,EAAUlC,EAAOmC,EAASC,EACrF,OAAO,GAAYnnE,KAAM,SAAU2Y,GACjC,OAAQA,EAAGzO,OACT,KAAK,EAuBH,OAtBA68D,EAAgBp8D,EAAS/J,IAAI,MAEzB,aAAa8lE,IACf75D,EAAQ65D,EAAc55D,WACtBwsD,EAAU,IAAI,KAAYoN,EAAe,GAMzCziE,EAAW,WACT,OAAOq1D,EAAQr1D,SAASyiE,MAG1B75D,EAAQ65D,EACRM,EAAeN,EAAc93D,eAE7B3K,EAAW,WACT,OAAO+iE,IAAiBN,EAAc93D,iBAInC,CAAC,EAENwN,EAASiqD,oCAAoCx5D,EAAOY,EAAOZ,EAAMu6D,uBAAwBvrD,IAE7F,KAAK,EAEH,OADAorD,EAAWtuD,EAAGgJ,OACP,CAAC,EAENolD,EAAcM,wBAAwBx6D,EAAMiS,IAAKmoD,IAErD,KAAK,EAGH,OAFAlC,EAAQpsD,EAAGgJ,OAEN1d,IAMA8gE,GAA0B,IAAjBA,EAAMx4D,QAMhB,aAAam6D,IAEf,GAAenB,QAAQmB,EAAe3B,GACtCe,GAAqBf,GACrB2B,EAAc5zD,eACd4zD,EAAclxD,QACdkxD,EAAcnE,wCAAwCmE,EAAc5yD,cAAe,KAInFozD,EAAUnC,EAAM,GAAGt3D,MACnB05D,EAAqB,IAAI,IAAUD,EAAQj5D,gBAAiBi5D,EAAQh5D,YAAag5D,EAAQ71D,cAAe61D,EAAQ51D,WAChHzE,EAAMy6D,mBAAmB,CAACH,GAAqBpC,EAAM93D,IAAI,SAAU4a,GACjE,MAAO,CACLjP,KAAMiP,EAAKjP,KACXnL,MAAO,KAAM2R,KAAKyI,EAAKpa,OACvB85D,kBAAkB,KAElB,SAAUC,GACZ,IAAK,IAAI50D,EAAK,EAAG60D,EAAcD,EAAW50D,EAAK60D,EAAYl7D,OAAQqG,IAAM,CACvE,IAAI80D,EAAUD,EAAY70D,GAAInF,MAE9B,GAAI,KAAMk6D,0BAA0BD,EAASP,GAC3C,MAAO,CAAC,IAAI,IAAUO,EAAQz5D,gBAAiBy5D,EAAQx5D,YAAaw5D,EAAQr2D,cAAeq2D,EAAQp2D,YAIvG,OAAO,QAIJ,CAAC,GAEN,IAtCO,CAAC,GAEN,GARK,CAAC,GAEN,QA+CP,SAASs2D,GAAmCj9D,EAAU+7D,EAAenjE,EAAMsY,GAChF,OAAO,GAAU7b,UAAM,OAAQ,EAAQ,WACrC,IAAI2mE,EAAc95D,EAAOuP,EAAUwqD,EACnC,OAAO,GAAY5mE,KAAM,SAAU2Y,GACjC,OAAQA,EAAGzO,OACT,KAAK,EAIH,OAHAy8D,EAAeh8D,EAAS/J,IAAI,MAC5BiM,EAAQ,aAAa65D,GAAiBA,EAAc55D,WAAa45D,EACjEtqD,EAAW2pD,GAA6Cl5D,GACjD,CAAC,EAEN,GAAoB42C,OAAOrnC,EAAUvP,EAAOtJ,IAEhD,KAAK,EAEH,OADAqjE,EAAWjuD,EAAGgJ,QAIP,CAAC,EAENglD,EAAaE,eAAegB,GAA4BjB,EAAUF,EAAenjE,EAAMsY,IALnE,CAAC,EAErB,GAKJ,KAAK,EACHlD,EAAGgJ,OAEHhJ,EAAGzO,MAAQ,EAEb,KAAK,EACH,MAAO,CAAC,QAOX,SAAS29D,GAA2Bl9D,EAAUyR,EAAUsqD,EAAenjE,EAAMsY,GAClF,OAAO,GAAU7b,UAAM,OAAQ,EAAQ,WACrC,IAAI+mE,EAAel6D,EAAOoP,EAAKgrD,EAAUlC,EAAOt3D,EAAOq6D,EACvD,OAAO,GAAY9nE,KAAM,SAAU2Y,GACjC,OAAQA,EAAGzO,OACT,KAAK,EAeH,OAdA68D,EAAgBp8D,EAAS/J,IAAI,MAEzB,aAAa8lE,IACf75D,EAAQ65D,EAAc55D,WACtBmP,EAAM,IAAI,KAAmCyqD,EAAe,EAI1D7qD,KAEFhP,EAAQ65D,EACRzqD,EAAM,IAAI,KAAiCyqD,EAAe7qD,IAGrD,CAAC,EAENO,EAASgqD,+BAA+Bv5D,EAAOA,EAAMu6D,uBAAwBnrD,EAAIJ,QAErF,KAAK,EAEH,OADAorD,EAAWtuD,EAAGgJ,OACP,CAAC,EAENolD,EAAcM,wBAAwBx6D,EAAMiS,IAAKmoD,IAErD,KAAK,EAGH,OAFAlC,EAAQpsD,EAAGgJ,OAEP1F,EAAIJ,MAAMkB,wBACL,CAAC,GAEN,GAGCgoD,GAA0B,IAAjBA,EAAMx4D,QAMhB,aAAam6D,IAEf,GAAenB,QAAQmB,EAAe3B,GAEzB,IAATxhE,IAGAuiE,GAAqBf,GACrB2B,EAAc5zD,eACd4zD,EAAclxD,QACdkxD,EAAcnE,wCAAwCmE,EAAc5yD,cAAe,MAKvFrG,EAAQs3D,EAAM,GAAGt3D,MACjBq6D,EAAqB,IAAI,IAAUr6D,EAAMQ,gBAAiBR,EAAMS,YAAaT,EAAM4D,cAAe5D,EAAM6D,WACxGzE,EAAMy6D,mBAAmB,CAACQ,GAAqB/C,EAAM93D,IAAI,SAAU4a,GACjE,MAAO,CACLjP,KAAMiP,EAAKjP,KACXnL,MAAO,KAAM2R,KAAKyI,EAAKpa,OACvB85D,kBAAkB,KAElB,SAAUC,GACZ,IAAK,IAAI50D,EAAK,EAAGm1D,EAAcP,EAAW50D,EAAKm1D,EAAYx7D,OAAQqG,IAAM,CACvE,IAAIo1D,EAAUD,EAAYn1D,GAAInF,MAE9B,GAAI,KAAMk6D,0BAA0BK,EAASF,GAC3C,MAAO,CAAC,IAAI,IAAUE,EAAQ/5D,gBAAiB+5D,EAAQ95D,YAAa85D,EAAQ32D,cAAe22D,EAAQ12D,YAIvG,OAAO,QAIJ,CAAC,GAEN,IA3CO,CAAC,GAEN,QA8IP,SAAS22D,GAAyBlB,EAAel6D,EAAO3B,EAAUmuC,EAAIl3C,GAC3E,IAAI+Z,EAAY,KAAqC8N,QAAQnd,GAE7D,OAAyB,IAArBqP,EAAU3P,OACLoQ,QAAQC,aAAQ5a,GAGrBka,EAAU,GAAGgsD,4BAA4B99C,QAAQivB,GAAM,EAClD18B,QAAQC,aAAQ5a,GAGlB2a,QAAQC,QAAQV,EAAU,GAAGisD,6BAA6Bt7D,EAAO3B,EAAUmuC,EAAIl3C,EAAS,KAAkB2b,OAAOoH,MAAM,MAA2B5hB,KAAK,SAAUyhE,GACtK,OAAOgC,EAAcM,wBAAwBx6D,EAAMiS,IAAKimD,KAG5D,YAAwB,8BAA+B,SAAUp6D,EAAUuK,GACzE,IAAIyI,EAAWzI,EAAKyI,SAChBlQ,EAAQyH,EAAKzH,MACbtL,EAAU+S,EAAK/S,QAEnB,KAAMwb,aAAoB,QAAS,KAAMC,SAASnQ,GAChD,MAAM,eAGR,IAAIZ,EAAQlC,EAAS/J,IAAI,MAAekM,SAAS6Q,GAEjD,IAAK9Q,EACH,MAAM,aAAgB,YAGxB,OA9HK,SAAoDk6D,EAAel6D,EAAOY,EAAOtL,EAAS0Z,GAC/F,OAAO,GAAU7b,UAAM,OAAQ,EAAQ,WACrC,IAAIkc,EAAWtJ,EAAIw1D,EAAahsD,EAAU6qD,EAE1C,OAAO,GAAYjnE,KAAM,SAAU2Y,GACjC,OAAQA,EAAGzO,OACT,KAAK,EACHgS,EAAY,KAA4C8N,QAAQnd,GAChE+F,EAAK,EAAGw1D,EAAclsD,EACtBvD,EAAGzO,MAAQ,EAEb,KAAK,EACH,OAAM0I,EAAKw1D,EAAY77D,QAGvB6P,EAAWgsD,EAAYx1D,GAChB,CAAC,EAEN+J,QAAQC,QAAQR,EAASiqD,oCAAoCx5D,EAAOY,EAAOtL,EAAS0Z,IAAQqJ,MAAM,QAN7D,CAAC,EAEtC,GAMJ,KAAK,EAEH,OADA+hD,EAAWtuD,EAAGgJ,OACT,aAAgBslD,GAGd,CAAC,EAENF,EAAcM,wBAAwBx6D,EAAMiS,IAAKmoD,IALZ,CAAC,EAEtC,GAKJ,KAAK,EACH,MAAO,CAAC,EAENtuD,EAAGgJ,QAEP,KAAK,EAEH,OADA/O,IACO,CAAC,EAEN,GAEJ,KAAK,EACH,MAAO,CAAC,OAEN5Q,QAmFHqmE,CAA2C19D,EAAS/J,IAAI,MAAuBiM,EAAO,KAAMuS,KAAK3R,GAAQtL,EAAS,KAAkB2b,QAE7I,YAAwB,iCAAkC,SAAUnT,EAAUuK,GAC5E,IAAIyI,EAAWzI,EAAKyI,SAChBxb,EAAU+S,EAAK/S,QAEnB,KAAMwb,aAAoB,MACxB,MAAM,aAAgB,YAGxB,IAAI9Q,EAAQlC,EAAS/J,IAAI,MAAekM,SAAS6Q,GAEjD,IAAK9Q,EACH,MAAM,aAAgB,YAGxB,OA9FK,SAA+Ck6D,EAAel6D,EAAO1K,EAAS0Z,GACnF,OAAO,GAAU7b,UAAM,OAAQ,EAAQ,WACrC,IAAIkc,EAAWtJ,EAAI01D,EAAalsD,EAAU6qD,EAE1C,OAAO,GAAYjnE,KAAM,SAAU2Y,GACjC,OAAQA,EAAGzO,OACT,KAAK,EACHgS,EAAY6pD,GAA6Cl5D,GACzD+F,EAAK,EAAG01D,EAAcpsD,EACtBvD,EAAGzO,MAAQ,EAEb,KAAK,EACH,OAAM0I,EAAK01D,EAAY/7D,QAGvB6P,EAAWksD,EAAY11D,GAChB,CAAC,EAEN+J,QAAQC,QAAQR,EAASgqD,+BAA+Bv5D,EAAO1K,EAAS0Z,IAAQqJ,MAAM,QANjD,CAAC,EAEtC,GAMJ,KAAK,EAEH,OADA+hD,EAAWtuD,EAAGgJ,OACT,aAAgBslD,GAGd,CAAC,EAENF,EAAcM,wBAAwBx6D,EAAMiS,IAAKmoD,IALZ,CAAC,EAEtC,GAKJ,KAAK,EACH,MAAO,CAAC,EAENtuD,EAAGgJ,QAEP,KAAK,EAEH,OADA/O,IACO,CAAC,EAEN,GAEJ,KAAK,EACH,MAAO,CAAC,OAEN5Q,QAmDHumE,CAAsC59D,EAAS/J,IAAI,MAAuBiM,EAAO1K,EAAS,KAAkB2b,QAErH,YAAwB,+BAAgC,SAAUnT,EAAUuK,GAC1E,IAAIyI,EAAWzI,EAAKyI,SAChBzS,EAAWgK,EAAKhK,SAChBmuC,EAAKnkC,EAAKmkC,GACVl3C,EAAU+S,EAAK/S,QAEnB,KAAMwb,aAAoB,QAAS,IAASuF,YAAYhY,IAA2B,kBAAPmuC,EAC1E,MAAM,eAGR,IAAIxsC,EAAQlC,EAAS/J,IAAI,MAAekM,SAAS6Q,GAEjD,IAAK9Q,EACH,MAAM,aAAgB,YAGxB,OAAOo7D,GAAyBt9D,EAAS/J,IAAI,MAAuBiM,EAAO,IAASuS,KAAKlU,GAAWmuC,EAAIl3C,KChrB1G,IAAI,GAAsC,WACxC,IAAI6G,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA0BtC,GAAwC,SAAUgN,EAAY1T,EAAQ2N,EAAKgG,GAC7E,IAEIxN,EAFAyN,EAAIC,UAAUpK,OACdqK,EAAIF,EAAI,EAAI5T,EAAkB,OAAT2T,EAAgBA,EAAOrW,OAAOyW,yBAAyB/T,EAAQ2N,GAAOgG,EAE/F,GAAuB,kBAAZK,SAAoD,oBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASP,EAAY1T,EAAQ2N,EAAKgG,QAAW,IAAK,IAAIjI,EAAIgI,EAAWjK,OAAS,EAAGiC,GAAK,EAAGA,KAC1KvF,EAAIuN,EAAWhI,MAAIoI,GAAKF,EAAI,EAAIzN,EAAE2N,GAAKF,EAAI,EAAIzN,EAAEnG,EAAQ2N,EAAKmG,GAAK3N,EAAEnG,EAAQ2N,KAASmG,GAE5F,OAAOF,EAAI,GAAKE,GAAKxW,OAAOM,eAAeoC,EAAQ2N,EAAKmG,GAAIA,GAG1D,GAAkC,SAAUK,EAAYC,GAC1D,OAAO,SAAUpU,EAAQ2N,GACvByG,EAAUpU,EAAQ2N,EAAKwG,KAIvB,GAAsC,SAAUyJ,EAASC,EAAYC,EAAGC,GAC1E,OAAO,IAAKD,IAAMA,EAAIjE,UAAU,SAAUC,EAASkE,GACjD,SAASC,EAAUxe,GACjB,IACEye,EAAKH,EAAUI,KAAK1e,IACpB,MAAO2J,GACP4U,EAAO5U,IAIX,SAASgV,EAAS3e,GAChB,IACEye,EAAKH,EAAiB,MAAEte,IACxB,MAAO2J,GACP4U,EAAO5U,IAIX,SAAS8U,EAAK3O,GACZA,EAAO8O,KAAOvE,EAAQvK,EAAO9P,OAAS,IAAIqe,EAAE,SAAUhE,GACpDA,EAAQvK,EAAO9P,SACde,KAAKyd,EAAWG,GAGrBF,GAAMH,EAAYA,EAAUP,MAAMI,EAASC,GAAc,KAAKM,WAI9D,GAA0C,SAAUP,EAASW,GAC/D,IASIC,EACAC,EACAC,EACAC,EAZAC,EAAI,CACNxX,MAAO,EACPyX,KAAM,WACJ,GAAW,EAAPH,EAAE,GAAQ,MAAMA,EAAE,GACtB,OAAOA,EAAE,IAEXI,KAAM,GACNC,IAAK,IAMP,OAAOJ,EAAI,CACTR,KAAMa,EAAK,GACX,MAASA,EAAK,GACd,OAAUA,EAAK,IACI,oBAAXC,SAA0BN,EAAEM,OAAOC,UAAY,WACvD,OAAOhiB,OACLyhB,EAEJ,SAASK,EAAKG,GACZ,OAAO,SAAUC,GACf,OAIJ,SAAcC,GACZ,GAAIb,EAAG,MAAM,IAAIc,UAAU,mCAE3B,KAAOV,GACL,IACE,GAAIJ,EAAI,EAAGC,IAAMC,EAAY,EAARW,EAAG,GAASZ,EAAU,OAAIY,EAAG,GAAKZ,EAAS,SAAOC,EAAID,EAAU,SAAMC,EAAEvX,KAAKsX,GAAI,GAAKA,EAAEN,SAAWO,EAAIA,EAAEvX,KAAKsX,EAAGY,EAAG,KAAKhB,KAAM,OAAOK,EAG3J,OAFID,EAAI,EAAGC,IAAGW,EAAK,CAAS,EAARA,EAAG,GAAQX,EAAEjf,QAEzB4f,EAAG,IACT,KAAK,EACL,KAAK,EACHX,EAAIW,EACJ,MAEF,KAAK,EAEH,OADAT,EAAExX,QACK,CACL3H,MAAO4f,EAAG,GACVhB,MAAM,GAGV,KAAK,EACHO,EAAExX,QACFqX,EAAIY,EAAG,GACPA,EAAK,CAAC,GACN,SAEF,KAAK,EACHA,EAAKT,EAAEG,IAAIQ,MAEXX,EAAEE,KAAKS,MAEP,SAEF,QACE,KAAkBb,GAAZA,EAAIE,EAAEE,MAAYrV,OAAS,GAAKiV,EAAEA,EAAEjV,OAAS,MAAkB,IAAV4V,EAAG,IAAsB,IAAVA,EAAG,IAAW,CACtFT,EAAI,EACJ,SAGF,GAAc,IAAVS,EAAG,MAAcX,GAAKW,EAAG,GAAKX,EAAE,IAAMW,EAAG,GAAKX,EAAE,IAAK,CACvDE,EAAExX,MAAQiY,EAAG,GACb,MAGF,GAAc,IAAVA,EAAG,IAAYT,EAAExX,MAAQsX,EAAE,GAAI,CACjCE,EAAExX,MAAQsX,EAAE,GACZA,EAAIW,EACJ,MAGF,GAAIX,GAAKE,EAAExX,MAAQsX,EAAE,GAAI,CACvBE,EAAExX,MAAQsX,EAAE,GAEZE,EAAEG,IAAIzT,KAAK+T,GAEX,MAGEX,EAAE,IAAIE,EAAEG,IAAIQ,MAEhBX,EAAEE,KAAKS,MAEP,SAGJF,EAAKd,EAAKpX,KAAKyW,EAASgB,GACxB,MAAOxV,GACPiW,EAAK,CAAC,EAAGjW,GACTqV,EAAI,EACJ,QACAD,EAAIE,EAAI,EAIZ,GAAY,EAARW,EAAG,GAAQ,MAAMA,EAAG,GACxB,MAAO,CACL5f,MAAO4f,EAAG,GAAKA,EAAG,QAAK,EACvBhB,MAAM,GAlFCH,CAAK,CAACiB,EAAGC,OA4GlB,GAEJ,WACE,SAASsmD,EAAa59D,EAAQ69D,GAC5B,IAAIrnE,EAAQpB,KAEZA,KAAKyoE,eAAiBA,EACtBzoE,KAAK0oE,eAAiB,GACtB1oE,KAAK2oE,aAAe,GACpB3oE,KAAKqL,QAAUT,EAEf5K,KAAK0oE,eAAet6D,KAAKxD,EAAO0B,yBAAyB,WACvD,OAAOlL,EAAM2e,aAGf/f,KAAK0oE,eAAet6D,KAAKxD,EAAOwB,iBAAiB,WAC/C,OAAOhL,EAAM2e,aAGf/f,KAAK0oE,eAAet6D,KAAKxD,EAAOoV,yBAAyB,WACvD,OAAO5e,EAAM2e,aAGf/f,KAAK0oE,eAAet6D,KAAK,KAAqCmP,YAAYvd,KAAK+f,QAAS/f,OAgH1F,OA7GAwoE,EAAa7nE,UAAUgM,MAAQ,WAC7B,OAAO67D,EAAa97D,IAGtB87D,EAAa7nE,UAAUc,QAAU,WAC/BzB,KAAK0oE,eAAiB,YAAQ1oE,KAAK0oE,gBACnC1oE,KAAK2oE,aAAe,YAAQ3oE,KAAK2oE,eAGnCH,EAAa7nE,UAAUof,QAAU,WAC/B,IAAI3e,EAAQpB,KAKZ,GAFAA,KAAK2oE,aAAe,YAAQ3oE,KAAK2oE,cAE5B3oE,KAAKqL,QAAQQ,mBAAmBC,YAAY88D,cAK5C5oE,KAAKqL,QAAQuB,WAAlB,CAIA,IAAIC,EAAQ7M,KAAKqL,QAAQyB,WAGrB+7D,EAAU,KAAqC7+C,QAAQnd,GAAO,GAElE,GAAKg8D,GAAYA,EAAQX,4BAAzB,CAOA,IAFA,IAAIY,EAAe,IAAI,KAEdl2D,EAAK,EAAG+F,EAAKkwD,EAAQX,4BAA6Bt1D,EAAK+F,EAAGpM,OAAQqG,IAAM,CAC/E,IAAIymC,EAAK1gC,EAAG/F,GACZk2D,EAAa1vD,IAAIigC,EAAG5lC,WAAW,IAGjCzT,KAAK2oE,aAAav6D,KAAKpO,KAAKqL,QAAQ09D,UAAU,SAAUnwD,GACtD,IAAIowD,EAAepwD,EAAKnF,WAAWmF,EAAKrM,OAAS,GAE7Cu8D,EAAa3oD,IAAI6oD,IACnB5nE,EAAM6nE,SAAS58C,OAAOqtB,aAAasvB,UAKzCR,EAAa7nE,UAAUsoE,SAAW,SAAU5vB,GAC1C,IAAIj4C,EAAQpB,KAEZ,GAAKA,KAAKqL,QAAQuB,cAId5M,KAAKqL,QAAQ2B,gBAAgBT,OAAS,GAA1C,CAIA,IAAIM,EAAQ7M,KAAKqL,QAAQyB,WAErB5B,EAAWlL,KAAKqL,QAAQyI,cAExBo1D,GAAW,EAIXC,EAASnpE,KAAKqL,QAAQc,wBAAwB,SAAUD,GAC1D,GAAIA,EAAEg9B,QAKJ,OAFAggC,GAAW,OACXC,EAAO1nE,UAIT,IAAK,IAAI+M,EAAI,EAAGC,EAAMvC,EAAEk9D,QAAQ78D,OAAQiC,EAAIC,EAAKD,IAAK,CAGpD,GAFatC,EAAEk9D,QAAQ56D,GAEZf,MAAM4D,eAAiBnG,EAASwC,WAIzC,OAFAw7D,GAAW,OACXC,EAAO1nE,aAMbwmE,GAAyBjoE,KAAKyoE,eAAgB57D,EAAO3B,EAAUmuC,EAAIxsC,EAAMu6D,wBAAwB9jE,KAAK,SAAUyhE,GAC9GoE,EAAO1nE,UAEHynE,GAIA,aAAgBnE,KAClB,GAAeQ,QAAQnkE,EAAMiK,QAAS05D,GACtCe,GAAqBf,KAEtB,SAAU1nD,GAEX,MADA8rD,EAAO1nE,UACD4b,MAIVmrD,EAAa97D,GAAK,4BAClB87D,EAAe,GAAW,CAAC,GAAQ,EAAG,OAAwBA,GApIhE,GAwII,GAEJ,WACE,SAASa,EAAcz+D,EAAQ0+D,GAC7B,IAAIloE,EAAQpB,KAEZA,KAAK4K,OAASA,EACd5K,KAAKspE,sBAAwBA,EAC7BtpE,KAAK0oE,eAAiB,GACtB1oE,KAAK2oE,aAAe,GAEpB3oE,KAAK0oE,eAAet6D,KAAKxD,EAAO0B,yBAAyB,WACvD,OAAOlL,EAAM2e,aAGf/f,KAAK0oE,eAAet6D,KAAKxD,EAAOwB,iBAAiB,WAC/C,OAAOhL,EAAM2e,aAGf/f,KAAK0oE,eAAet6D,KAAKxD,EAAOoV,yBAAyB,WACvD,OAAO5e,EAAM2e,aAGf/f,KAAK0oE,eAAet6D,KAAK,KAA4CmP,YAAYvd,KAAK+f,QAAS/f,OAqDjG,OAlDAqpE,EAAc1oE,UAAUgM,MAAQ,WAC9B,OAAO08D,EAAc38D,IAGvB28D,EAAc1oE,UAAUc,QAAU,WAChCzB,KAAK0oE,eAAiB,YAAQ1oE,KAAK0oE,gBACnC1oE,KAAK2oE,aAAe,YAAQ3oE,KAAK2oE,eAGnCU,EAAc1oE,UAAUof,QAAU,WAChC,IAAI3e,EAAQpB,KAGZA,KAAK2oE,aAAe,YAAQ3oE,KAAK2oE,cAE5B3oE,KAAK4K,OAAOiB,mBAAmBC,YAAYy9D,eAK3CvpE,KAAK4K,OAAOgC,YAKZ,KAA4CuT,IAAIngB,KAAK4K,OAAOkC,aAIjE9M,KAAK2oE,aAAav6D,KAAKpO,KAAK4K,OAAO4+D,WAAW,SAAU/7D,GACtD,OAAOrM,EAAM6nE,SAASx7D,OAI1B47D,EAAc1oE,UAAUsoE,SAAW,SAAUx7D,GACtCzN,KAAK4K,OAAOgC,aAIb5M,KAAK4K,OAAOoC,gBAAgBT,OAAS,GAIzCvM,KAAKspE,sBAAsBzC,eAAeJ,GAAyCzmE,KAAK4K,OAAQ6C,EAAO,EAErG,KAAkBqQ,MAAMoH,MAAM,QAGlCmkD,EAAc38D,GAAK,+BACnB28D,EAAgB,GAAW,CAAC,GAAQ,EAAG,OAAyBA,GAzElE,GA6EI,GAEJ,SAAUt/D,GAGR,SAAS0/D,IACP,OAAO1/D,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,+BACJkE,MAAOJ,EAAA,EAAa,uBAAwB,mBAC5CK,MAAO,kBACPC,aAAc,KAAege,IAAI,IAAkBnV,SAAU,IAAkBy2D,+BAC/Er/D,OAAQ,CACNC,OAAQ,KAAe8d,IAAI,IAAkB7d,gBAAiB,IAAkBm/D,+BAChFl/D,QAAS,KAOT0xB,MAAO,CACL1xB,QAAS,MAQXC,OAAQ,KAIVmL,SAAU,CACR6T,KAAM,IAAkBigD,8BACxBp5D,MAAO,iBACPK,MAAO,QAEL3Q,KAiCR,OApEA,GAAUypE,EAAsB1/D,GAsChC0/D,EAAqB9oE,UAAU+J,IAAM,SAAUC,EAAUC,GACvD,OAAO,GAAU5K,UAAM,OAAQ,EAAQ,WAErC,OAAO,GAAYA,KAAM,SAAU2Y,GACjC,OAAQA,EAAGzO,OACT,KAAK,EACH,OAAKU,EAAOgC,WAIL,CAAC,EADOjC,EAAS/J,IAAI,MAGbimE,eAAee,GAAoCh9D,EAAQ,EAExE,KAAkBkT,OARW,CAAC,EAE9B,GAQJ,KAAK,EACHnF,EAAGgJ,OAEHhJ,EAAGzO,MAAQ,EAEb,KAAK,EACH,MAAO,CAAC,SAQXu/D,EArET,CAsEE,KAEE,GAEJ,SAAU1/D,GAGR,SAAS4/D,IACP,OAAO5/D,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,gCACJkE,MAAOJ,EAAA,EAAa,wBAAyB,oBAC7CK,MAAO,cACPC,aAAc,KAAege,IAAI,IAAkBnV,SAAU,IAAkB22D,wCAC/Ev/D,OAAQ,CACNC,OAAQ,KAAe8d,IAAI,IAAkB7d,gBAAiB,IAAkBq/D,wCAChFp/D,QAAS,aAAS,KAIhB,MAKFC,OAAQ,KAIVmL,SAAU,CACR6T,KAAM,KAAerB,IAAI,IAAkBwhD,uCAAwC,IAAkBC,sBACrGv5D,MAAO,iBACPK,MAAO,SAEL3Q,KAwCR,OApEA,GAAU2pE,EAAuB5/D,GA+BjC4/D,EAAsBhpE,UAAU+J,IAAM,SAAUC,EAAUC,GACxD,OAAO,GAAU5K,UAAM,OAAQ,EAAQ,WACrC,IAAI2mE,EAAc95D,EAAOY,EACzB,OAAO,GAAYzN,KAAM,SAAU2Y,GACjC,OAAQA,EAAGzO,OACT,KAAK,EACH,OAAKU,EAAOgC,YAMZ+5D,EAAeh8D,EAAS/J,IAAI,MAC5BiM,EAAQjC,EAAOkC,YACfW,EAAQ7C,EAAOoL,gBAEL/G,YACRxB,EAAQ,IAAI,KAAMA,EAAMQ,gBAAiB,EAAGR,EAAMQ,gBAAiBpB,EAAM0E,iBAAiB9D,EAAMQ,mBAG3F,CAAC,EAEN04D,EAAaE,eAAeJ,GAAyC77D,EAAQ6C,EAAO,EAEpF,KAAkBqQ,QAjBX,CAAC,GAmBZ,KAAK,EAGH,OAFAnF,EAAGgJ,OAEI,CAAC,SAQXgoD,EArET,CAsEE,KAEF,YAA2B,IAC3B,YAA2B,IAC3B,YAAqB,IACrB,YAAqB,IAGrB,KAAiBG,gBAAgB,uBAAwB,SAAUn/D,GACjE,OAAO,QAzYG,OAyYc,OAAQ,EAAQ,WACtC,IAAIC,EAAQgd,EACZ,OAAO,GAAY5nB,KAAM,SAAU2Y,GACjC,OAAQA,EAAGzO,OACT,KAAK,EAGH,OAFAU,EAASD,EAAS/J,IAAI,MAAoBwU,yBAE1BxK,EAAOgC,YAMvBgb,EAAiBjd,EAAS/J,IAAI,MACzBgK,EAAOoL,eAAe/G,UAGpB,CAAC,EAEN2Y,EAAeE,eAAe,iCALa,CAAC,EAE5C,IARO,CAAC,GAaZ,KAAK,EAGH,OAFAnP,EAAGgJ,OAEI,CAAC,EAEN,GAEJ,KAAK,EACH,MAAO,CAAC,EAENiG,EAAeE,eAAe,kCAElC,KAAK,EACHnP,EAAGgJ,OAEHhJ,EAAGzO,MAAQ,EAEb,KAAK,EACH,MAAO,CAAC,U,WCxhBP,GAEA6/D,G,UC/EP,GAAsC,WACxC,IAAI/gE,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA0BtC,GAAwC,SAAUgN,EAAY1T,EAAQ2N,EAAKgG,GAC7E,IAEIxN,EAFAyN,EAAIC,UAAUpK,OACdqK,EAAIF,EAAI,EAAI5T,EAAkB,OAAT2T,EAAgBA,EAAOrW,OAAOyW,yBAAyB/T,EAAQ2N,GAAOgG,EAE/F,GAAuB,kBAAZK,SAAoD,oBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASP,EAAY1T,EAAQ2N,EAAKgG,QAAW,IAAK,IAAIjI,EAAIgI,EAAWjK,OAAS,EAAGiC,GAAK,EAAGA,KAC1KvF,EAAIuN,EAAWhI,MAAIoI,GAAKF,EAAI,EAAIzN,EAAE2N,GAAKF,EAAI,EAAIzN,EAAEnG,EAAQ2N,EAAKmG,GAAK3N,EAAEnG,EAAQ2N,KAASmG,GAE5F,OAAOF,EAAI,GAAKE,GAAKxW,OAAOM,eAAeoC,EAAQ2N,EAAKmG,GAAIA,GAG1D,GAAkC,SAAUK,EAAYC,GAC1D,OAAO,SAAUpU,EAAQ2N,GACvByG,EAAUpU,EAAQ2N,EAAKwG,KAcvB,GAEJ,SAAUlN,GAGR,SAASigE,EAAyBC,EAAY9nE,EAAS+nE,EAAcC,EAAsBC,EAAmBxiD,EAAgBxQ,EAAmBq4B,EAAc46B,EAAqBC,GAClL,IAAIlpE,EAAQ2I,EAAOE,KAAKjK,KAAMiqE,EAAYC,EAAaK,sBAAuB,GAAIJ,EAAsBC,EAAmBxiD,EAAgBxQ,EAAmBq4B,EAAc46B,EAAqBC,IAAyBtqE,KAW1N,OATAoB,EAAMopE,cAAgBN,EACtB9oE,EAAMqpE,kBAAoBtoE,EAE1B4H,EAAOpJ,UAAUk9B,cAAc5zB,KAAK7I,EAAOA,EAAMqpE,mBAEjDrpE,EAAMsK,UAAUw+D,EAAa59D,yBAAyB,SAAUJ,GAC9D,OAAO9K,EAAMspE,8BAA8Bx+D,MAGtC9K,EAoBT,OAlCA,GAAU4oE,EAA0BjgE,GAiBpCigE,EAAyBrpE,UAAUgqE,gBAAkB,WACnD,OAAO3qE,KAAKwqE,eAGdR,EAAyBrpE,UAAU+pE,8BAAgC,SAAUx+D,GAC3EnC,EAAOpJ,UAAUk9B,cAAc5zB,KAAKjK,KAAMA,KAAKwqE,cAAcD,uBAE7DxgE,EAAOpJ,UAAUk9B,cAAc5zB,KAAKjK,KAAMA,KAAKyqE,oBAGjDT,EAAyBrpE,UAAUk9B,cAAgB,SAAU+sC,GAC3D98B,GAAA,EAAc9tC,KAAKyqE,kBAAmBG,GAAY,GAElD7gE,EAAOpJ,UAAUk9B,cAAc5zB,KAAKjK,KAAMA,KAAKyqE,oBAGjDT,EAA2B,GAAW,CAAC,GAAQ,EAAG,MAAwB,GAAQ,EAAG,MAAqB,GAAQ,EAAG,MAAkB,GAAQ,EAAG,MAAqB,GAAQ,EAAG,KAAgB,GAAQ,EAAG,MAAuB,GAAQ,EAAG,OAAyBA,GAlC1Q,CAoCE,KCjFEa,I,OAAe,IAAI,KAAM,IAAI,KAAK,EAAG,IAAK,OAC1CC,GAAiB,CACnBC,WAAW,EACXC,WAAW,EACXr7D,UAAW,GACXs7D,WAAYJ,GACZK,WAAYL,GACZM,qBAAqB,GAInBC,GAEJ,WACE,SAASA,EAAiBpgD,EAASJ,EAAiBygD,EAAatgD,EAAeugD,EAAcrgD,GAC5FjrB,KAAKgrB,QAAUA,EACfhrB,KAAK4qB,gBAAkBA,EACvB5qB,KAAKqrE,YAAcA,EACnBrrE,KAAK+qB,cAAgBA,EACrB/qB,KAAKurE,cAAgBD,EACrBtrE,KAAKwrE,kBAAoBvgD,EAW3B,OARAmgD,EAAiBzqE,UAAU2qE,aAAe,SAAUznD,GAClD7jB,KAAKurE,cAAc1nD,IAGrBunD,EAAiBzqE,UAAUsqB,iBAAmB,SAAUnH,GACtD9jB,KAAKwrE,kBAAkB1nD,IAGlBsnD,EAlBT,GAuBIK,GAEJ,WACE,SAASA,EAAsBzlE,EAAIglB,GACjChrB,KAAK2X,IAAM3R,EACXhG,KAAKiZ,SAAW+R,EAelB,OAZAygD,EAAsB9qE,UAAUgM,MAAQ,WACtC,OAAO3M,KAAK2X,KAGd8zD,EAAsB9qE,UAAUiZ,WAAa,WAC3C,OAAO5Z,KAAKiZ,UAGdwyD,EAAsB9qE,UAAUmT,YAAc,WAC5C,OAAO,MAGF23D,EAlBT,GAuBI,GAEJ,WACE,SAASC,EAAMrgE,GACbrL,KAAKqL,QAAUA,EACfrL,KAAK2rE,UAAYD,EAAME,aAAav4B,SACpCrzC,KAAKwL,aAAe,GAqDtB,OAlDAkgE,EAAM/qE,UAAUc,QAAU,WACxBzB,KAAK2kB,OACLP,GAAA,EAAqCpkB,KAAK2rE,YAG5CvrE,OAAOM,eAAegrE,EAAM/qE,UAAW,QAAS,CAC9CqX,IAAK,SAAazV,GACZvC,KAAK6rE,SAAWtpE,IAClBvC,KAAK6rE,OAAStpE,EAEdvC,KAAK8rE,iBAGThrE,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAegrE,EAAM/qE,UAAW,SAAU,CAC/CqX,IAAK,SAAazV,GACZvC,KAAK+rE,UAAYxpE,IACnBvC,KAAK+rE,QAAUxpE,EAEfvC,KAAK8rE,iBAGThrE,YAAY,EACZC,cAAc,IAGhB2qE,EAAM/qE,UAAUmrE,aAAe,WAC7B1nD,GAAA,EAAqCpkB,KAAK2rE,WAC1CvnD,GAAA,EAAkB,kBAAoBpkB,KAAK2rE,UAAW,wEAA0E3rE,KAAK6rE,OAAS,mBAAqB7rE,KAAK+rE,QAAU,gBAAkB/rE,KAAK+rE,QAAU,qBAAuB/rE,KAAK+rE,QAAU,SAG3PL,EAAM/qE,UAAUgiB,KAAO,SAAUqpD,GAC/BhsE,KAAKwL,aAAexL,KAAKqL,QAAQmB,iBAAiBxM,KAAKwL,aAAc,CAAC,CACpEiC,MAAO,KAAM0G,cAAc63D,GAC3B7pE,QAAS,CACPwN,UAAW3P,KAAK2rE,UAChBj8D,WAAY,OAOlBg8D,EAAM/qE,UAAUgkB,KAAO,WACrB3kB,KAAKqL,QAAQmB,iBAAiBxM,KAAKwL,aAAc,KAGnDkgE,EAAME,aAAe,IAAI34B,GAAY,sBAC9By4B,EAzDT,GA4DI,GAEJ,WACE,SAASO,EAAWrhE,EAAQzI,GAC1B,IAAIf,EAAQpB,UAEI,IAAZmC,IACFA,EAAU,IAGZnC,KAAKksE,kBAAoB,GACzBlsE,KAAKse,aAAe,GACpBte,KAAKmsE,YAAa,EAClBnsE,KAAK4K,OAASA,EACd5K,KAAKmC,QAAU2rC,GAAA,EAAkB3rC,GACjC2rC,GAAA,EAAc9tC,KAAKmC,QAAS2oE,IAAgB,GAC5C9qE,KAAKgrB,QAAUvW,SAASyE,cAAc,OAEjClZ,KAAKmC,QAAQiqE,eAChBpsE,KAAKgrB,QAAQmjB,aAAa,cAAe,QACzCnuC,KAAKgrB,QAAQmjB,aAAa,OAAQ,iBAGpCnuC,KAAKse,aAAalQ,KAAKpO,KAAK4K,OAAOomB,kBAAkB,SAAUq7C,GAC7D,IAAIj2C,EAAQh1B,EAAMkrE,UAAUD,GAE5BjrE,EAAM4pB,QAAQa,MAAMuK,MAAQA,EAAQ,KACpCh1B,EAAM4pB,QAAQa,MAAMra,KAAOpQ,EAAMmrE,SAASF,GAAQ,KAElDjrE,EAAMorE,SAASp2C,MAgXnB,OA5WA61C,EAAWtrE,UAAUc,QAAU,WAC7B,IAAIL,EAAQpB,KAEZ,YAAQA,KAAKse,cAETte,KAAKysE,iBACPzsE,KAAK4K,OAAOmmC,oBAAoB/wC,KAAKysE,gBACrCzsE,KAAKysE,eAAiB,MAGpBzsE,KAAKiuB,WACPjuB,KAAK4K,OAAO2lB,gBAAgB,SAAU5lB,GAChCvJ,EAAM6sB,WACRtjB,EAASyjB,WAAWhtB,EAAM6sB,UAAUjoB,IAGtC5E,EAAM6sB,UAAY,OAItBjuB,KAAK4K,OAAO4B,iBAAiBxM,KAAKksE,kBAAmB,IACrDlsE,KAAKksE,kBAAoB,IAG3BD,EAAWtrE,UAAUN,OAAS,WAC5B+jB,GAAA,EAAapkB,KAAKgrB,QAAS,eAEvBhrB,KAAKmC,QAAQwN,WACfyU,GAAA,EAAapkB,KAAKgrB,QAAShrB,KAAKmC,QAAQwN,WAG1C3P,KAAKuhD,UAAY9sC,SAASyE,cAAc,OACxCkL,GAAA,EAAapkB,KAAKuhD,UAAW,yBAC7BvhD,KAAKgrB,QAAQ1R,YAAYtZ,KAAKuhD,WAE1BvhD,KAAKmC,QAAQ4oE,YACf/qE,KAAK0sE,OAAS,IAAI,GAAM1sE,KAAK4K,QAE7B5K,KAAKse,aAAalQ,KAAKpO,KAAK0sE,SAG9B1sE,KAAK2sE,eAAe3sE,KAAKuhD,WAEzBvhD,KAAK4sE,YAEL5sE,KAAK6sE,gBAGPZ,EAAWtrE,UAAUkrB,MAAQ,SAAU+iB,GACjCA,EAAOq8B,aACTjrE,KAAKmC,QAAQ8oE,WAAar8B,EAAOq8B,YAG/Br8B,EAAOs8B,aACTlrE,KAAKmC,QAAQ+oE,WAAat8B,EAAOs8B,YAGnClrE,KAAK6sE,gBAGPZ,EAAWtrE,UAAUksE,aAAe,WAClC,GAAI7sE,KAAKuhD,WAAavhD,KAAKmC,QAAQ8oE,WAAY,CAC7C,IAAIA,EAAajrE,KAAKmC,QAAQ8oE,WAAW1pE,WACzCvB,KAAKuhD,UAAU11B,MAAMihD,eAAiB7B,EACtCjrE,KAAKuhD,UAAU11B,MAAMkhD,kBAAoB9B,EAG3C,GAAIjrE,KAAK0sE,QAAU1sE,KAAKmC,QAAQ+oE,WAAY,CAC1C,IAAIA,EAAalrE,KAAKmC,QAAQ+oE,WAAW3pE,WACzCvB,KAAK0sE,OAAO78D,MAAQq7D,IAIxBe,EAAWtrE,UAAU2rE,UAAY,SAAUD,GACzC,OAAOA,EAAKj2C,MAAQi2C,EAAK9d,aAAe8d,EAAKW,wBAG/Cf,EAAWtrE,UAAU4rE,SAAW,SAAUF,GAExC,OAAIA,EAAK9d,aAAe,GAA0B,IAArB8d,EAAKY,YACzBZ,EAAK9d,aAGP,GAGT0d,EAAWtrE,UAAUusE,eAAiB,SAAUrpD,GAC9C7jB,KAAKgrB,QAAQa,MAAMhI,IAAMA,EAAM,MAGjCooD,EAAWtrE,UAAUwsE,kBAAoB,SAAUrpD,GACjD9jB,KAAKgrB,QAAQa,MAAM/H,OAASA,EAAS,KAErC,IAAIspD,EAAkBtpD,EAAS9jB,KAAKqtE,4BAEpCrtE,KAAKuhD,UAAU11B,MAAM/H,OAASspD,EAAkB,KAChD,IAAIviB,EAAa7qD,KAAK4K,OAAOm5B,gBAE7B/jC,KAAKstE,UAAUF,EAAiBptE,KAAKssE,UAAUzhB,IAE/C7qD,KAAKowD,YAAY7L,UAGnBnkD,OAAOM,eAAeurE,EAAWtrE,UAAW,WAAY,CACtDC,IAAK,WACH,IAAIoF,EAAKhG,KAAKksE,kBAAkB,GAEhC,GAAKlmE,EAAL,CAIA,IAAI6G,EAAQ7M,KAAK4K,OAAOkC,WAExB,GAAKD,EAAL,CAIA,IAAIY,EAAQZ,EAAMyhB,mBAAmBtoB,GAErC,GAAKyH,EAIL,OAAOA,EAAMN,sBAEfrM,YAAY,EACZC,cAAc,IAGhBkrE,EAAWtrE,UAAUgiB,KAAO,SAAU4qD,EAAYxiD,GAChD,IAAItd,EAAQ,KAAMmQ,SAAS2vD,GAAcA,EAAa,IAAI,KAAMA,EAAW7/D,WAAY6/D,EAAW5/D,OAAQ4/D,EAAW7/D,WAAY6/D,EAAW5/D,QAC5I3N,KAAKmsE,YAAa,EAElBnsE,KAAKwtE,UAAU//D,EAAOsd,GAEtB/qB,KAAKmsE,YAAa,EAClBnsE,KAAKksE,kBAAoBlsE,KAAK4K,OAAO4B,iBAAiBxM,KAAKksE,kBAAmB,CAAC,CAC7Ez+D,MAAOA,EACPtL,QAAS,IAAuB2rB,UAIpCm+C,EAAWtrE,UAAUgkB,KAAO,WAC1B,IAAIvjB,EAAQpB,KAERA,KAAKiuB,YACPjuB,KAAK4K,OAAO2lB,gBAAgB,SAAU5lB,GAChCvJ,EAAM6sB,WACRtjB,EAASyjB,WAAWhtB,EAAM6sB,UAAUjoB,MAGxChG,KAAKiuB,UAAY,MAGfjuB,KAAKysE,iBACPzsE,KAAK4K,OAAOmmC,oBAAoB/wC,KAAKysE,gBACrCzsE,KAAKysE,eAAiB,MAGpBzsE,KAAK0sE,QACP1sE,KAAK0sE,OAAO/nD,QAIhBsnD,EAAWtrE,UAAU0sE,0BAA4B,WAC/C,IAAIhpD,EAAarkB,KAAK4K,OAAOiB,mBAAmBwY,WAC5ChS,EAAS,EAETrS,KAAKmC,QAAQ4oE,YAEf14D,GAAU,EADQhR,KAAKyqB,MAAMzH,EAAa,IAIxCrkB,KAAKmC,QAAQ6oE,YAEf34D,GAAU,EADWhR,KAAKyqB,MAAMzH,EAAa,IAI/C,OAAOhS,GAGT45D,EAAWtrE,UAAU6sE,UAAY,SAAUxB,EAAOjhD,GAChD,IAAI3pB,EAAQpB,KAERkL,EAAW,CACbwC,WAAYs+D,EAAM/9D,gBAClBN,OAAQq+D,EAAM99D,aAEZ28C,EAAa7qD,KAAK4K,OAAOm5B,gBAEzB3N,EAAQp2B,KAAKssE,UAAUzhB,GAE3B7qD,KAAKgrB,QAAQa,MAAMuK,MAAQA,EAAQ,KACnCp2B,KAAKgrB,QAAQa,MAAMra,KAAOxR,KAAKusE,SAAS1hB,GAAc,KAEtD,IAAI4iB,EAAkBh5D,SAASyE,cAAc,OAC7Cu0D,EAAgB5hD,MAAM6hD,SAAW,SACjC,IAAIrpD,EAAarkB,KAAK4K,OAAOiB,mBAAmBwY,WAE5CspD,EAAmB3tE,KAAK4K,OAAOm5B,gBAAgBjgB,OAASO,EAAa,GAErE0G,GAAiB4iD,IACnB5iD,EAAgB4iD,GAGlB,IAAIC,EAAc,EACdC,EAAiB,EAsCrB,GApCI7tE,KAAKmC,QAAQ4oE,YACf6C,EAAcvsE,KAAKyqB,MAAMzH,EAAa,GACtCrkB,KAAK0sE,OAAO5oD,OAAS8pD,EAErB5tE,KAAK0sE,OAAO/pD,KAAKzX,IAIflL,KAAKmC,QAAQ6oE,YACf6C,EAAiBxsE,KAAKyqB,MAAMzH,EAAa,IAI3CrkB,KAAK4K,OAAO2lB,gBAAgB,SAAU5lB,GAChCvJ,EAAM6sB,WACRtjB,EAASyjB,WAAWhtB,EAAM6sB,UAAUjoB,IAGlC5E,EAAMqrE,iBACRrrE,EAAMwJ,OAAOmmC,oBAAoB3vC,EAAMqrE,gBAEvCrrE,EAAMqrE,eAAiB,MAGzBrrE,EAAM4pB,QAAQa,MAAMhI,IAAM,UAC1BziB,EAAM6sB,UAAY,IAAIm9C,GAAiBqC,EAAiBviE,EAASwC,WAAYxC,EAASyC,OAAQod,EAAe,SAAUlH,GACrH,OAAOziB,EAAM8rE,eAAerpD,IAC3B,SAAUC,GACX,OAAO1iB,EAAM+rE,kBAAkBrpD,KAEjC1iB,EAAM6sB,UAAUjoB,GAAK2E,EAASwjB,QAAQ/sB,EAAM6sB,WAC5C7sB,EAAMqrE,eAAiB,IAAIhB,GAlYjB,+BAkYmDrqE,EAAM6sB,UAAUjoB,GAAI5E,EAAM4pB,SAEvF5pB,EAAMwJ,OAAOylC,iBAAiBjvC,EAAMqrE,kBAGlCzsE,KAAKmC,QAAQ6oE,UAAW,CAC1B,IAAI8C,EAAU9tE,KAAKmC,QAAQ4rE,WAAa/tE,KAAKmC,QAAQ4rE,WAAaF,EAClE7tE,KAAKuhD,UAAU11B,MAAMmiD,eAAiBF,EAAU,KAChD9tE,KAAKuhD,UAAU11B,MAAMoiD,kBAAoBH,EAAU,KAGrD,IAAIV,EAAkBriD,EAAgB1G,EAAarkB,KAAKqtE,4BAExDrtE,KAAKuhD,UAAU11B,MAAMhI,IAAM+pD,EAAc,KACzC5tE,KAAKuhD,UAAU11B,MAAM/H,OAASspD,EAAkB,KAChDptE,KAAKuhD,UAAU11B,MAAM6hD,SAAW,SAEhC1tE,KAAKstE,UAAUF,EAAiBh3C,GAE3Bp2B,KAAKmC,QAAQgpE,qBAChBnrE,KAAK4K,OAAO8/B,aAAashC,GAG3B,IAAIn/D,EAAQ7M,KAAK4K,OAAOkC,WAExB,GAAID,EAAO,CAET,IAAIqhE,EAAmB7sE,KAAK8sE,IAAIthE,EAAM8G,eAAgBtS,KAAKw5B,IAAI,EAAGmxC,EAAM36D,cAAgB,IACxFrR,KAAKouE,WAAWF,KAIpBjC,EAAWtrE,UAAUytE,WAAa,SAAU1gE,GAC1C1N,KAAK4K,OAAOwjE,WAAW1gE,EAAY,IAKrCu+D,EAAWtrE,UAAU0tE,YAAc,SAAU1+D,EAAW2+D,GAClDA,GACFtuE,KAAKuhD,UAAUpoC,UAAUw1B,OAAO2/B,GAGlClqD,GAAA,EAAapkB,KAAKuhD,UAAW5xC,IAG/Bs8D,EAAWtrE,UAAU6rE,SAAW,SAAU+B,KAG1CtC,EAAWtrE,UAAU2sE,UAAY,SAAUkB,EAAeD,KAG1DtC,EAAWtrE,UAAU8tE,UAAY,SAAUC,GACzC,IAAIttE,EAAQpB,KAERA,KAAKiuB,WAAajuB,KAAKiuB,UAAUlD,gBAAkB2jD,GACrD1uE,KAAK4K,OAAO2lB,gBAAgB,SAAU5lB,GAChCvJ,EAAM6sB,YACR7sB,EAAM6sB,UAAUlD,cAAgB2jD,EAChC/jE,EAASkkB,WAAWztB,EAAM6sB,UAAUjoB,QAO5CimE,EAAWtrE,UAAUisE,UAAY,WAC/B,IAgBIvhD,EAhBAjqB,EAAQpB,KAEZA,KAAKowD,YAAc,IAAI,KAAKpwD,KAAKgrB,QAAShrB,KAAM,CAC9CqwD,YAAa,IAKVrwD,KAAKmC,QAAQwsE,eAChB3uE,KAAKowD,YAAYzrC,OAEjB3kB,KAAKowD,YAAY3rC,MAAQ,GAO3BzkB,KAAKse,aAAalQ,KAAKpO,KAAKowD,YAAYG,WAAW,SAAUrkD,GACvD9K,EAAM6sB,YACR5C,EAAO,CACLujD,OAAQ1iE,EAAE0iE,OACV7jD,cAAe3pB,EAAM6sB,UAAUlD,mBAKrC/qB,KAAKse,aAAalQ,KAAKpO,KAAKowD,YAAYye,SAAS,WAC/CxjD,OAAOrpB,KAGThC,KAAKse,aAAalQ,KAAKpO,KAAKowD,YAAY7yC,YAAY,SAAUizC,GAC5D,GAAInlC,EAAM,CACR,IAAIyjD,GAAate,EAAIue,SAAW1jD,EAAKujD,QAAUxtE,EAAMwJ,OAAOiB,mBAAmBwY,WAE3E2qD,EAAmBF,EAAY,EAAIztE,KAAK4iC,KAAK6qC,GAAaztE,KAAKkjB,MAAMuqD,GACrEJ,EAAmBrjD,EAAKN,cAAgBikD,EAExCN,EAAmB,GAAKA,EAAmB,IAC7CttE,EAAMqtE,UAAUC,QAMxBzC,EAAWtrE,UAAU6uD,sBAAwB,WAC3C,OAAO,GAGTyc,EAAWtrE,UAAU2uD,qBAAuB,WAC1C,OAAsC,OAA9BtvD,KAAKgrB,QAAQa,MAAM/H,OAAkB,EAAI61B,SAAS35C,KAAKgrB,QAAQa,MAAM/H,SAAW9jB,KAAKqtE,4BAA8B,GAG7HpB,EAAWtrE,UAAU8uD,uBAAyB,WAC5C,IAAI5E,EAAa7qD,KAAK4K,OAAOm5B,gBAC7B,OAAO8mB,EAAWz0B,MAAQy0B,EAAW0D,cAGhC0d,EA3YT,G,UFtII,GAAsC,WACxC,IAAIjjE,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GAyC/BylE,GAAmB,aAAgB,oBAC9C,aAAkBA,GAElB,WACE,SAASC,IACPlvE,KAAKmvE,SAAW,IAAI5jD,IA6BtB,OA1BA2jD,EAAQvuE,UAAUyuE,mBAAqB,SAAUxkE,EAAQu9C,GACvD,IAAI/mD,EAAQpB,KAERqvE,EAAWrvE,KAAKmvE,SAASvuE,IAAIgK,GAE7BykE,IACFA,EAAS/xD,SAAS7b,UAClB4tE,EAASlnB,OAAO1mD,WAalBzB,KAAKmvE,SAASn3D,IAAIpN,EAAQ,CACxBu9C,OAAQA,EACR7qC,SAAU6qC,EAAOmnB,WAZN,WACX,IAAIjkD,EAAOjqB,EAAM+tE,SAASvuE,IAAIgK,GAE1BygB,GAAQA,EAAK88B,SAAWA,IAC1B98B,EAAK/N,SAAS7b,UAEdL,EAAM+tE,SAASx9C,OAAO/mB,SAUrBskE,EA/BT,KAmCWnF,GAGR,KAAgB,GAAc,KAFnBwF,aAAe,IAAI,KAAc,2BAA2B,GACxExF,GAAYyF,gBAAkBzF,GAAYwF,aAAaE,YAYzD,IAAI,GAAiB,CACnBC,sBAAuB,KAAMC,MAC7BC,oBAAqB,KAAMniC,QAAQ,WACnCoiC,sBAAuB,KAAMpiC,QAAQ,cAGnC,GAEJ,SAAU1jC,GAGR,SAAS+lE,EAAellE,EAAQzI,QACd,IAAZA,IACFA,EAAU,IAGZ,IAAIf,EAAQ2I,EAAOE,KAAKjK,KAAM4K,EAAQzI,IAAYnC,KAIlD,OAFAoB,EAAM2uE,YAAc,IAAI,KACxBjiC,GAAA,EAAc1sC,EAAMe,QAAS,IAAgB,GACtCf,EA+JT,OA1KA,GAAU0uE,EAAgB/lE,GAc1B+lE,EAAenvE,UAAUc,QAAU,WACjCsI,EAAOpJ,UAAUc,QAAQwI,KAAKjK,MAE9BA,KAAK+vE,YAAYhuE,KAAK/B,OAGxBI,OAAOM,eAAeovE,EAAenvE,UAAW,aAAc,CAC5DC,IAAK,WACH,OAAOZ,KAAK+vE,YAAYlvE,OAE1BC,YAAY,EACZC,cAAc,IAGhB+uE,EAAenvE,UAAUkrB,MAAQ,SAAU+iB,GACzC,IAAIzsC,EAAUnC,KAAKmC,QAEfysC,EAAO8gC,wBACTvtE,EAAQutE,sBAAwB9gC,EAAO8gC,uBAGrC9gC,EAAOghC,sBACTztE,EAAQytE,oBAAsBhhC,EAAOghC,qBAGnChhC,EAAOihC,wBACT1tE,EAAQ0tE,sBAAwBjhC,EAAOihC,uBAGzC9lE,EAAOpJ,UAAUkrB,MAAM5hB,KAAKjK,KAAM4uC,IAGpCkhC,EAAenvE,UAAUksE,aAAe,WACtC9iE,EAAOpJ,UAAUksE,aAAa5iE,KAAKjK,MAEnC,IAAImC,EAAUnC,KAAKmC,QAEfnC,KAAKgwE,cAAgB7tE,EAAQutE,wBAC/B1vE,KAAKgwE,aAAankD,MAAMwK,gBAAkBl0B,EAAQutE,sBAAsBnuE,YAGtEvB,KAAKiwE,iBAAmB9tE,EAAQytE,sBAClC5vE,KAAKiwE,gBAAgBpkD,MAAMhc,MAAQ1N,EAAQytE,oBAAoBruE,YAG7DvB,KAAKkwE,mBAAqB/tE,EAAQ0tE,wBACpC7vE,KAAKkwE,kBAAkBrkD,MAAMhc,MAAQ1N,EAAQ0tE,sBAAsBtuE,YAGjEvB,KAAKmwE,cAAgBhuE,EAAQ8oE,aAC/BjrE,KAAKmwE,aAAatkD,MAAMgjB,YAAc1sC,EAAQ8oE,WAAW1pE,aAI7DuuE,EAAenvE,UAAUgsE,eAAiB,SAAUprB,GAClDvhD,KAAKquE,YAAY,mBACjBruE,KAAKgwE,aAAe5rD,GAAA,EAAM,SAC1BpkB,KAAKmwE,aAAe/rD,GAAA,EAAM,SAE1BpkB,KAAKowE,UAAUpwE,KAAKgwE,cAEpBhwE,KAAKqwE,UAAUrwE,KAAKmwE,cAEpB5uB,EAAUjoC,YAAYtZ,KAAKgwE,cAC3BzuB,EAAUjoC,YAAYtZ,KAAKmwE,eAG7BL,EAAenvE,UAAUyvE,UAAY,SAAU7uB,GAC7C,IAAIngD,EAAQpB,KAERswE,EAAelsD,GAAA,EAAM,mBACzBA,GAAA,EAAWpkB,KAAKgwE,aAAcM,GAC9BlsD,GAAA,EAAkCksD,EAAc,QAAS,SAAUzvE,GACjE,OAAOO,EAAMmvE,cAAc1vE,KAE7Bb,KAAKwwE,aAAepsD,GAAA,EAAM,QAC1BpkB,KAAKiwE,gBAAkB7rD,GAAA,EAAM,iBAC7BpkB,KAAKkwE,kBAAoB9rD,GAAA,EAAM,gBAC/BpkB,KAAKywE,aAAersD,GAAA,EAAM,aAC1BA,GAAA,EAAWksD,EAActwE,KAAKwwE,aAAcxwE,KAAKiwE,gBAAiBjwE,KAAKkwE,kBAAmBlwE,KAAKywE,cAC/F,IAAIC,EAAmBtsD,GAAA,EAAM,qBAC7BA,GAAA,EAAWpkB,KAAKgwE,aAAcU,GAE9B,IAAIC,EAAmB3wE,KAAK4wE,uBAE5B5wE,KAAK6wE,iBAAmB,IAAI,KAAUH,EAAkBC,GAExD3wE,KAAKse,aAAalQ,KAAKpO,KAAK6wE,kBAE5B7wE,KAAK6wE,iBAAiBziE,KAAK,IAAI,KAAO,iBAAkBtE,EAAA,EAAa,cAAe,SAAU,yBAAyB,EAAM,WAG3H,OAFA1I,EAAMK,UAECkb,QAAQC,YACb,CACF1S,OAAO,EACPk0B,MAAM,KAIV0xC,EAAenvE,UAAUiwE,qBAAuB,WAC9C,MAAO,IAGTd,EAAenvE,UAAU4vE,cAAgB,SAAU1vE,KAGnDivE,EAAenvE,UAAUmwE,aAAe,SAAUC,GAChD/wE,KAAKwwE,aAAa7gE,UAAYohE,EAAgB,QAAUA,EAAgB,IAG1EjB,EAAenvE,UAAUqwE,SAAW,SAAUC,EAAgBC,GAC5DlxE,KAAKiwE,gBAAgBvkD,UAAYuO,GAAA,EAAeg3C,GAEhDjxE,KAAKiwE,gBAAgB9hC,aAAa,aAAc8iC,GAE5CC,EACFlxE,KAAKkwE,kBAAkBxkD,UAAYuO,GAAA,EAAei3C,GAElD9sD,GAAA,EAAcpkB,KAAKkwE,oBAIvBJ,EAAenvE,UAAUwwE,aAAe,SAAU5uE,GAC5CA,EACFvC,KAAKywE,aAAa/kD,UAAYuO,GAAA,EAAe13B,GAE7C6hB,GAAA,EAAcpkB,KAAKywE,eAIvBX,EAAenvE,UAAU2sE,UAAY,SAAUkB,EAAeD,GAC5D,IAAKvuE,KAAKmsE,YAAcqC,EAAgB,EAEtCxuE,KAAKyB,cAFP,CAMA,IAAI2vE,EAAa/vE,KAAK4iC,KAAiD,IAA5CjkC,KAAK4K,OAAOiB,mBAAmBwY,YACtDgtD,EAAa7C,GAAiB4C,EAAa,GAI/CpxE,KAAKsxE,cAAcF,EAAY7C,GAE/BvuE,KAAKuxE,cAAcF,EAAY9C,KAGjCuB,EAAenvE,UAAU2wE,cAAgB,SAAU9C,EAAeD,GAChEvuE,KAAKgwE,aAAankD,MAAM/H,OAAS0qD,EAAgB,KACjDxuE,KAAKgwE,aAAankD,MAAMxH,WAAarkB,KAAKgwE,aAAankD,MAAM/H,QAG/DgsD,EAAenvE,UAAU4wE,cAAgB,SAAU/C,EAAeD,GAChEvuE,KAAKmwE,aAAatkD,MAAM/H,OAAS0qD,EAAgB,MAG5CsB,EA3KT,CA4KE,I,uCGzQE,GAEJ,WACE,SAAS0B,EAAapxB,EAAQqxB,EAAQC,GACpC1xE,KAAKogD,OAASA,EACdpgD,KAAKyxE,OAASA,EACdzxE,KAAK0xE,gBAAkBA,EACvB1xE,KAAK2xE,cAAgB,IAAI,KACzB3xE,KAAK4xE,aAAe5xE,KAAK2xE,cAAc9wE,MACvCb,KAAKgG,GAAKstC,GAAiBD,SA2B7B,OAxBAjzC,OAAOM,eAAe8wE,EAAa7wE,UAAW,MAAO,CACnDC,IAAK,WACH,OAAOZ,KAAKogD,OAAOthC,KAErBhe,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAe8wE,EAAa7wE,UAAW,QAAS,CACrDC,IAAK,WACH,OAAOZ,KAAKyxE,QAEdz5D,IAAK,SAAazV,GAChBvC,KAAKyxE,OAASlvE,EAEdvC,KAAK2xE,cAAc5vE,KAAK/B,OAE1Bc,YAAY,EACZC,cAAc,IAGhBywE,EAAa7wE,UAAUkxE,eAAiB,WACtC,OAAO,YAAS,oBAAqB,0CAA2C,aAAS7xE,KAAK8e,KAAM9e,KAAKyN,MAAMQ,gBAAiBjO,KAAKyN,MAAMS,cAGtIsjE,EAlCT,GAuCI,GAEJ,WACE,SAASM,EAAYC,GACnB/xE,KAAK+xE,gBAAkBA,EAoCzB,OAjCAD,EAAYnxE,UAAUc,QAAU,WAC9B,YAAQzB,KAAK+xE,kBAGfD,EAAYnxE,UAAUqxE,QAAU,SAAUvkE,EAAOwU,QACrC,IAANA,IACFA,EAAI,GAGN,IAAIpV,EAAQ7M,KAAK+xE,gBAAgBE,OAAOC,gBAExC,GAAKrlE,EAAL,CAIA,IAAIoB,EAAkBR,EAAMQ,gBACxBC,EAAcT,EAAMS,YACpBmD,EAAgB5D,EAAM4D,cACtBC,EAAY7D,EAAM6D,UAClB0gD,EAAOnlD,EAAMslE,qBAAqB,CACpCzkE,WAAYO,EACZN,OAAQO,EAAc+T,IAEpBmwD,EAAc,IAAI,KAAMnkE,EAAiB+jD,EAAK9jD,YAAaD,EAAiBC,GAC5EmkE,EAAa,IAAI,KAAMhhE,EAAeC,EAAWD,EAAeoqB,OAAOC,WAM3E,MALU,CACRzF,OAAQppB,EAAMqH,gBAAgBk+D,GAAaj6C,QAAQ,OAAQ8B,GAAA,GAC3Dq4C,OAAQzlE,EAAMqH,gBAAgBzG,GAC9B89B,MAAO1+B,EAAMqH,gBAAgBm+D,GAAYl6C,QAAQ,OAAQ8B,GAAA,MAKtD63C,EAtCT,GA2CI,GAEJ,WACE,SAASS,EAAeC,EAASC,GAC/BzyE,KAAKwyE,QAAUA,EACfxyE,KAAKyyE,KAAOA,EACZzyE,KAAK0yE,UAAY,GA2FnB,OAxFAtyE,OAAOM,eAAe6xE,EAAe5xE,UAAW,KAAM,CACpDC,IAAK,WACH,OAAOZ,KAAKyyE,KAAKlxE,YAEnBT,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAe6xE,EAAe5xE,UAAW,SAAU,CACxDC,IAAK,WACH,OAAOZ,KAAKwyE,SAEd1xE,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAe6xE,EAAe5xE,UAAW,WAAY,CAC1DC,IAAK,WACH,OAAOZ,KAAK0yE,WAEd5xE,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAe6xE,EAAe5xE,UAAW,MAAO,CACrDC,IAAK,WACH,OAAOZ,KAAKyyE,MAEd3xE,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAe6xE,EAAe5xE,UAAW,UAAW,CACzDC,IAAK,WACH,OAAOZ,KAAK2yE,UAEd7xE,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAe6xE,EAAe5xE,UAAW,UAAW,CACzDC,IAAK,WACH,OAAOZ,KAAK4yE,cAEd9xE,YAAY,EACZC,cAAc,IAGhBwxE,EAAe5xE,UAAUkxE,eAAiB,WACxC,IAAIpjE,EAAMzO,KAAK6+C,SAAStyC,OAExB,OAAY,IAARkC,EACK,YAAS,wBAAyB,iCAAkC,aAASzO,KAAK8e,KAAM9e,KAAK8e,IAAI+zD,QAEjG,YAAS,wBAAyB,oCAAqCpkE,EAAK,aAASzO,KAAK8e,KAAM9e,KAAK8e,IAAI+zD,SAIpHN,EAAe5xE,UAAUic,QAAU,SAAUk2D,GAC3C,IAAI1xE,EAAQpB,KAEZ,OAAIA,KAAK+yE,UACAp2D,QAAQC,QAAQ5c,MAGlB2c,QAAQC,QAAQk2D,EAAyBE,qBAAqBhzE,KAAKyyE,MAAMnvE,KAAK,SAAU2vE,GAG7F,IAFYA,EAAehB,OAIzB,MADAgB,EAAexxE,UACT,IAAIq2C,MAKZ,OAFA12C,EAAMuxE,SAAW,IAAI,GAAYM,GACjC7xE,EAAM2xE,WAAY,EACX3xE,GACN,SAAUic,GAKX,OAHAjc,EAAMsxE,UAAY,GAClBtxE,EAAM2xE,WAAY,EAClB3xE,EAAMwxE,aAAev1D,EACdjc,MAIXmxE,EAAe5xE,UAAUc,QAAU,WAC7BzB,KAAK2yE,WACP3yE,KAAK2yE,SAASlxE,UAEdzB,KAAK2yE,cAAW3wE,IAIbuwE,EA/FT,GAoGI,GAEJ,WACE,SAASW,EAAgBC,GACvB,IAAI/xE,EAAQpB,KAEZA,KAAK+xB,OAAS,GACd/xB,KAAKmzE,WAAa,GAClBnzE,KAAKozE,2BAA6B,IAAI,KACtCpzE,KAAKqzE,0BAA4BrzE,KAAKozE,2BAA2BvyE,MACjEb,KAAKse,aAAe,GAEpB,IAEI0gC,EAFAs0B,EAAiBH,EAAW,GAChCA,EAAWjkE,KAAKgkE,EAAgBK,oBAGhC,IAAK,IAAI3gE,EAAK,EAAG4gE,EAAeL,EAAYvgE,EAAK4gE,EAAajnE,OAAQqG,IAAM,CAC1E,IAAI6gE,EAAMD,EAAa5gE,GASvB,GAPKosC,GAAWA,EAAQlgC,IAAIvd,aAAekyE,EAAI30D,IAAIvd,aAEjDy9C,EAAU,IAAI,GAAeh/C,KAAMyzE,EAAI30D,KACvC9e,KAAK+xB,OAAO3jB,KAAK4wC,IAIa,IAA5BA,EAAQH,SAAStyC,SAAiB,KAAM42B,YAAYswC,EAAIhmE,MAAOuxC,EAAQH,SAASG,EAAQH,SAAStyC,OAAS,GAAGkB,OAAQ,CACvH,IAAIimE,EAAS,IAAI,GAAa10B,EAASy0B,EAAIE,sBAAwBF,EAAIhmE,MAAO6lE,IAAmBG,GAEjGzzE,KAAKse,aAAalQ,KAAKslE,EAAO9B,aAAa,SAAU1lE,GACnD,OAAO9K,EAAMgyE,2BAA2BrxE,KAAKmK,MAG/ClM,KAAKmzE,WAAW/kE,KAAKslE,GACrB10B,EAAQH,SAASzwC,KAAKslE,KAiH5B,OA5GAtzE,OAAOM,eAAewyE,EAAgBvyE,UAAW,QAAS,CACxDC,IAAK,WACH,OAA8B,IAAvBZ,KAAK+xB,OAAOxlB,QAErBzL,YAAY,EACZC,cAAc,IAGhBmyE,EAAgBvyE,UAAUkxE,eAAiB,WACzC,OAAI7xE,KAAK4zE,MACA,YAAS,gBAAiB,oBACG,IAA3B5zE,KAAKmzE,WAAW5mE,OAClB,YAAS,gBAAiB,wBAAyBvM,KAAKmzE,WAAW,GAAGr0D,IAAI+zD,QACjD,IAAvB7yE,KAAK+xB,OAAOxlB,OACd,YAAS,iBAAkB,2BAA4BvM,KAAKmzE,WAAW5mE,OAAQvM,KAAK+xB,OAAO,GAAGjT,IAAI+zD,QAElG,YAAS,iBAAkB,iCAAkC7yE,KAAKmzE,WAAW5mE,OAAQvM,KAAK+xB,OAAOxlB,SAI5G2mE,EAAgBvyE,UAAUkzE,wBAA0B,SAAUC,EAAW7yD,GACvE,IAAIm/B,EAAS0zB,EAAU1zB,OACnB2zB,EAAM3zB,EAAOvB,SAASz0B,QAAQ0pD,GAC9BE,EAAa5zB,EAAOvB,SAAStyC,OAC7B0nE,EAAa7zB,EAAOA,OAAOruB,OAAOxlB,OAEtC,OAAmB,IAAf0nE,GAAoBhzD,GAAQ8yD,EAAM,EAAIC,IAAe/yD,GAAQ8yD,EAAM,GAGnEA,EADE9yD,GACK8yD,EAAM,GAAKC,GAEXD,EAAMC,EAAa,GAAKA,EAG1B5zB,EAAOvB,SAASk1B,KAGzBA,EAAM3zB,EAAOA,OAAOruB,OAAO3H,QAAQg2B,GAE/Bn/B,GACF8yD,GAAOA,EAAM,GAAKE,EACX7zB,EAAOA,OAAOruB,OAAOgiD,GAAKl1B,SAAS,KAE1Ck1B,GAAOA,EAAME,EAAa,GAAKA,EACxB7zB,EAAOA,OAAOruB,OAAOgiD,GAAKl1B,SAASuB,EAAOA,OAAOruB,OAAOgiD,GAAKl1B,SAAStyC,OAAS,MAI1F2mE,EAAgBvyE,UAAUuzE,iBAAmB,SAAUv2D,EAAUzS,GAC/D,IAAIipE,EAAUn0E,KAAKmzE,WAAWlmE,IAAI,SAAUwmE,EAAKM,GAC/C,MAAO,CACLA,IAAKA,EACLK,UAAWn6C,GAAA,EAA2Bw5C,EAAI30D,IAAIvd,WAAYoc,EAASpc,YACnE8yE,WAAwE,IAA5DhzE,KAAKizE,IAAIb,EAAIhmE,MAAMQ,gBAAkB/C,EAASwC,YAAoBrM,KAAKizE,IAAIb,EAAIhmE,MAAMS,YAAchD,EAASyC,WAEzHuB,KAAK,SAAUkM,EAAGlS,GACnB,OAAIkS,EAAEg5D,UAAYlrE,EAAEkrE,WACV,EACCh5D,EAAEg5D,UAAYlrE,EAAEkrE,UAClB,EACEh5D,EAAEi5D,WAAanrE,EAAEmrE,YAClB,EACCj5D,EAAEi5D,WAAanrE,EAAEmrE,WACnB,EAEA,IAER,GAEH,GAAIF,EACF,OAAOn0E,KAAKmzE,WAAWgB,EAAQJ,MAMnCb,EAAgBvyE,UAAU4zE,eAAiB,WACzC,IAAK,IAAI3hE,EAAK,EAAG+F,EAAK3Y,KAAKmzE,WAAYvgE,EAAK+F,EAAGpM,OAAQqG,IAAM,CAC3D,IAAI6gE,EAAM96D,EAAG/F,GAEb,GAAI6gE,EAAI/B,gBACN,OAAO+B,EAIX,OAAOzzE,KAAKmzE,WAAW,IAGzBD,EAAgBvyE,UAAUc,QAAU,WAClC,YAAQzB,KAAK+xB,QACb,YAAQ/xB,KAAKse,cACbte,KAAK+xB,OAAOxlB,OAAS,EACrBvM,KAAKse,aAAa/R,OAAS,GAG7B2mE,EAAgBK,mBAAqB,SAAUn4D,EAAGlS,GAChD,IAAIsrE,EAAOp5D,EAAE0D,IAAIvd,WACbkzE,EAAOvrE,EAAE4V,IAAIvd,WAEjB,OAAIizE,EAAOC,GACD,EACCD,EAAOC,EACT,EAEA,KAAMpvC,yBAAyBjqB,EAAE3N,MAAOvE,EAAEuE,QAI9CylE,EAjJT,G,OCrMO,SAASwB,GAAe97D,GAC7B,OAAO,aAAOA,GCEhB,IAAI,GAEJ,WACE,SAAS+7D,EAAiBpzB,EAAWqzB,GACnC50E,KAAK40E,gBAAkBA,EACvB50E,KAAKgrB,QAAUvW,SAASyE,cAAc,QACtClZ,KAAKgrB,QAAQrb,UAAY,2BACzB3P,KAAK60E,eAAgB,EACrBtzB,EAAUjoC,YAAYtZ,KAAKgrB,SA6G7B,OA1GA5qB,OAAOM,eAAei0E,EAAiBh0E,UAAW,UAAW,CAC3DC,IAAK,WACH,OAAOZ,KAAKgrB,SAEdlqB,YAAY,EACZC,cAAc,IAGhB4zE,EAAiBh0E,UAAUqX,IAAM,SAAUY,EAAMk8D,EAAYtkE,EAAOukE,QAC/C,IAAfD,IACFA,EAAa,SAGD,IAAVtkE,IACFA,EAAQ,IAGLoI,IACHA,EAAO,IAGLm8D,IAEFn8D,EAAO+7D,EAAiBI,eAAen8D,EAAMk8D,IAG3C90E,KAAK60E,eAAiB70E,KAAK4Y,OAASA,GAAQ5Y,KAAKwQ,QAAUA,GAASs9B,GAAA,EAAe9tC,KAAK80E,WAAYA,KAInGzrE,MAAM2T,QAAQ83D,KACjBA,EAAa,IAGf90E,KAAK4Y,KAAOA,EACZ5Y,KAAKwQ,MAAQA,EACbxQ,KAAK80E,WAAaA,EAClB90E,KAAKyjB,WAGPkxD,EAAiBh0E,UAAU8iB,OAAS,WAIlC,IAHA,IAAIuxD,EAAc,GACd9sD,EAAM,EAEDtV,EAAK,EAAG+F,EAAK3Y,KAAK80E,WAAYliE,EAAK+F,EAAGpM,OAAQqG,IAAM,CAC3D,IAAIipC,EAAYljC,EAAG/F,GAEnB,GAAIipC,EAAU8H,MAAQ9H,EAAUtoC,MAAhC,CAIA,GAAI2U,EAAM2zB,EAAUtoC,MAAO,CACzByhE,GAAe,SACf,IAAIC,EAAcj1E,KAAK4Y,KAAKpX,UAAU0mB,EAAK2zB,EAAUtoC,OACrDyhE,GAAeh1E,KAAK40E,gBAAkBF,GAAeO,GAAe,aAAOA,GAC3ED,GAAe,UACf9sD,EAAM2zB,EAAU8H,IAGlBqxB,GAAe,2BACf,IAAIxzE,EAAYxB,KAAK4Y,KAAKpX,UAAUq6C,EAAUtoC,MAAOsoC,EAAU8H,KAC/DqxB,GAAeh1E,KAAK40E,gBAAkBF,GAAelzE,GAAa,aAAOA,GACzEwzE,GAAe,UACf9sD,EAAM2zB,EAAU8H,KAGlB,GAAIz7B,EAAMloB,KAAK4Y,KAAKrM,OAAQ,CAC1ByoE,GAAe,SACXxzE,EAAYxB,KAAK4Y,KAAKpX,UAAU0mB,GACpC8sD,GAAeh1E,KAAK40E,gBAAkBF,GAAelzE,GAAa,aAAOA,GACzEwzE,GAAe,UAGjBh1E,KAAKgrB,QAAQU,UAAYspD,EACzBh1E,KAAKgrB,QAAQxa,MAAQxQ,KAAKwQ,MAC1BxQ,KAAK60E,eAAgB,GAGvBF,EAAiBI,eAAiB,SAAUn8D,EAAMk8D,GAChD,IAAII,EAAQ,EACRC,EAAQ,EACZ,OAAOv8D,EAAKuf,QAAQ,cAAe,SAAUqS,EAAOxT,GAClDm+C,EAAkB,SAAV3qC,GAAoB,EAAI,EAChCxT,GAAUk+C,EAEV,IAAK,IAAItiE,EAAK,EAAGwiE,EAAeN,EAAYliE,EAAKwiE,EAAa7oE,OAAQqG,IAAM,CAC1E,IAAIipC,EAAYu5B,EAAaxiE,GAEzBipC,EAAU8H,KAAO3sB,IAIjB6kB,EAAUtoC,OAASyjB,IACrB6kB,EAAUtoC,OAAS4hE,GAGjBt5B,EAAU8H,KAAO3sB,IACnB6kB,EAAU8H,KAAOwxB,IAKrB,OADAD,GAASC,EACF,YAIJR,EAnHT,GCNI,GAAsC,WACxC,IAAI3rE,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA+BtC6rE,GAEJ,WACE,SAASA,EAAcC,GACrBt1E,KAAKs1E,SAAWA,EAoElB,OAjEAl1E,OAAOM,eAAe20E,EAAc10E,UAAW,UAAW,CACxDC,IAAK,WACH,OAAOZ,KAAKs1E,UAEdx0E,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAe20E,EAAc10E,UAAW,cAAe,CAC5DqX,IAAK,SAAa9W,GACZlB,KAAKu1E,UAAYr0E,IAAYlB,KAAKw1E,eAItCx1E,KAAKw1E,aAAet0E,EACpBlB,KAAKs1E,SAASj8D,YAAcnY,IAE9BJ,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAe20E,EAAc10E,UAAW,YAAa,CAC1DqX,IAAK,SAAarI,GACZ3P,KAAKu1E,UAAY5lE,IAAc3P,KAAKy1E,aAIxCz1E,KAAKy1E,WAAa9lE,EAClB3P,KAAKs1E,SAAS3lE,UAAYA,IAE5B7O,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAe20E,EAAc10E,UAAW,QAAS,CACtDqX,IAAK,SAAaxH,GACZxQ,KAAKu1E,UAAY/kE,IAAUxQ,KAAK21C,SAIpC31C,KAAK21C,OAASnlC,EAEVxQ,KAAK21C,OACP31C,KAAKs1E,SAAS9kE,MAAQA,EAEtBxQ,KAAKs1E,SAASlyB,gBAAgB,WAGlCtiD,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAe20E,EAAc10E,UAAW,QAAS,CACtDqX,IAAK,SAAa47D,GACZ5zE,KAAKu1E,UAAY3B,IAAU5zE,KAAK01E,SAIpC11E,KAAK01E,OAAS9B,EACd5zE,KAAKs1E,SAASzpD,MAAM8pD,WAAa/B,EAAQ,IAAM,OAEjD9yE,YAAY,EACZC,cAAc,IAGhBs0E,EAAc10E,UAAUc,QAAU,WAChCzB,KAAKu1E,UAAW,GAGXF,EAtET,GAyEI,GAEJ,SAAUtrE,GAGR,SAAS6rE,EAAUr0B,EAAWp/C,GAC5B,IAAIf,EAAQ2I,EAAOE,KAAKjK,OAASA,KAqBjC,OAnBAoB,EAAM4pB,QAAU5pB,EAAMsK,UAAU,IAAI2pE,GAAcjxD,GAAA,EAAWm9B,EAAWn9B,GAAA,EAAM,yBAC9EhjB,EAAMy0E,0BAA4Bz0E,EAAMsK,UAAU,IAAI2pE,GAAcjxD,GAAA,EAAWhjB,EAAM4pB,QAAQsG,QAASlN,GAAA,EAAM,+CAExGjiB,GAAWA,EAAQ2zE,kBACrB10E,EAAM20E,UAAY,IAAI,GAAiB3xD,GAAA,EAAWhjB,EAAMy0E,0BAA0BvkD,QAASlN,GAAA,EAAM,kBAAmBjiB,EAAQ6zE,sBAE5H50E,EAAM20E,UAAY30E,EAAMsK,UAAU,IAAI2pE,GAAcjxD,GAAA,EAAWhjB,EAAMy0E,0BAA0BvkD,QAASlN,GAAA,EAAM,mBAG5GjiB,GAAWA,EAAQ8zE,6BACrB70E,EAAM80E,uBAAyB,WAC7B,OAAO,IAAI,GAAiB9xD,GAAA,EAAWhjB,EAAMy0E,0BAA0BvkD,QAASlN,GAAA,EAAM,4BAA6BjiB,EAAQ6zE,uBAG7H50E,EAAM80E,uBAAyB,WAC7B,OAAO90E,EAAMsK,UAAU,IAAI2pE,GAAcjxD,GAAA,EAAWhjB,EAAMy0E,0BAA0BvkD,QAASlN,GAAA,EAAM,8BAIhGhjB,EA8CT,OAtEA,GAAUw0E,EAAW7rE,GA2BrB6rE,EAAUj1E,UAAUw1E,SAAW,SAAUjsE,EAAOif,EAAahnB,GAC3D,IAAIi0E,EAAU,CAAC,qBAEXj0E,IACEA,EAAQk0E,cACVD,EAAQhoE,KAAKkS,MAAM81D,EAASj0E,EAAQk0E,cAGlCl0E,EAAQm0E,QACVF,EAAQhoE,KAAK,WAIjBpO,KAAKgrB,QAAQrb,UAAYymE,EAAQ71D,KAAK,KACtCvgB,KAAKgrB,QAAQxa,MAAQrO,GAAWA,EAAQqO,MAAQrO,EAAQqO,MAAQ,GAE5DxQ,KAAK+1E,qBAAqB,GAC5B/1E,KAAK+1E,UAAU/9D,IAAI9N,GAAS,GAAI/H,EAAUA,EAAQ+jC,aAAUlkC,EAAWG,GAAWA,EAAQqO,MAAQrO,EAAQqO,WAAQxO,EAAWG,GAAWA,EAAQo0E,qBAEhJv2E,KAAK+1E,UAAU18D,YAAcnP,GAAS,IAGpCif,GAAenpB,KAAKw2E,mBACjBx2E,KAAKw2E,kBACRx2E,KAAKw2E,gBAAkBx2E,KAAKk2E,0BAG1Bl2E,KAAKw2E,2BAA2B,IAClCx2E,KAAKw2E,gBAAgBx+D,IAAImR,GAAe,GAAIhnB,EAAUA,EAAQs0E,wBAAqBz0E,GAE/EG,GAAWA,EAAQu0E,iBACrB12E,KAAKw2E,gBAAgBllD,QAAQ9gB,MAAQrO,EAAQu0E,iBAE7C12E,KAAKw2E,gBAAgBllD,QAAQ8xB,gBAAgB,WAG/CpjD,KAAKw2E,gBAAgBn9D,YAAc8P,GAAe,GAClDnpB,KAAKw2E,gBAAgBhmE,MAAQrO,GAAWA,EAAQu0E,iBAAmBv0E,EAAQu0E,iBAAmB,GAC9F12E,KAAKw2E,gBAAgB5C,OAASzqD,KAK7BysD,EAvET,CAwEE,KC/KE,I,OAAc,CAChBe,gBAAiB,KAAMlpC,QAAQ,WAC/BmpC,gBAAiB,KAAMnpC,QAAQ,aAG7B,GAEJ,WACE,SAASopC,EAAWt1B,EAAWp/C,GAC7BnC,KAAKmC,QAAUA,GAAW/B,OAAOC,OAAO,MACxC,aAAML,KAAKmC,QAAS,IAAa,GACjCnC,KAAK22E,gBAAkB32E,KAAKmC,QAAQw0E,gBACpC32E,KAAK42E,gBAAkB52E,KAAKmC,QAAQy0E,gBACpC52E,KAAK82E,YAAc92E,KAAKmC,QAAQ20E,YAChC92E,KAAKsxB,QAAU,aAAOiwB,EAAW,aAAE,wBACnCvhD,KAAK+2E,YAAc/2E,KAAKmC,QAAQ40E,aAAe,MAC/C/2E,KAAKg3E,YAAch3E,KAAKmC,QAAQ60E,aAAe,GAC/Ch3E,KAAKi3E,SAASj3E,KAAKmC,QAAQs7C,OAAS,GAuCtC,OApCAo5B,EAAWl2E,UAAUs2E,SAAW,SAAUx5B,GACxCz9C,KAAKy9C,MAAQA,EACbz9C,KAAKyjB,UAGPozD,EAAWl2E,UAAUu2E,eAAiB,SAAUF,GAC9Ch3E,KAAKg3E,YAAcA,EACnBh3E,KAAKyjB,UAGPozD,EAAWl2E,UAAU8iB,OAAS,WAC5BzjB,KAAKsxB,QAAQjY,YAAc,aAAOrZ,KAAK+2E,YAAa/2E,KAAKy9C,OACzDz9C,KAAKsxB,QAAQ9gB,MAAQ,aAAOxQ,KAAKg3E,YAAah3E,KAAKy9C,OACnDz9C,KAAKouC,eAGPyoC,EAAWl2E,UAAUkrB,MAAQ,SAAU+iB,GACrC5uC,KAAK22E,gBAAkB/nC,EAAO+nC,gBAC9B32E,KAAK42E,gBAAkBhoC,EAAOgoC,gBAC9B52E,KAAK82E,YAAcloC,EAAOkoC,YAC1B92E,KAAKouC,eAGPyoC,EAAWl2E,UAAUytC,YAAc,WACjC,GAAIpuC,KAAKsxB,QAAS,CAChB,IAAIlX,EAAapa,KAAK22E,gBAAkB32E,KAAK22E,gBAAgBp1E,WAAa,KACtE8Y,EAAara,KAAK42E,gBAAkB52E,KAAK42E,gBAAgBr1E,WAAa,KACtE0Y,EAASja,KAAK82E,YAAc92E,KAAK82E,YAAYv1E,WAAa,KAC9DvB,KAAKsxB,QAAQzF,MAAMwK,gBAAkBjc,EACrCpa,KAAKsxB,QAAQzF,MAAMhc,MAAQwK,EAC3Bra,KAAKsxB,QAAQzF,MAAM3R,YAAcD,EAAS,MAAQ,KAClDja,KAAKsxB,QAAQzF,MAAMk5B,YAAc9qC,EAAS,QAAU,KACpDja,KAAKsxB,QAAQzF,MAAMgjB,YAAc50B,IAI9B48D,EAjDT,G,8BCFO,SAASM,GAAax5D,EAAUy5D,EAAkBC,GAMvD,GALwB,kBAAb15D,IACTA,EAAW,KAAI25D,KAAK35D,IAIlB05D,EAAc,CAChB,IAAIE,EAAeF,EAAaG,mBAAmB75D,GAEnD,GAAI45D,EAAc,CAChB,IAAIE,EAAmBJ,EAAaK,eAAeC,QAAQprE,OAAS,EAChEqrE,OAAY,EAQhB,GALEA,EADE,aAAQL,EAAaz4D,IAAKnB,GAChB,GAEA,aAAa45D,EAAaz4D,IAAKnB,GAGzC85D,EAAkB,CACpB,IAAII,EAAWN,GAAgBA,EAAanuD,KAAOmuD,EAAanuD,KAAO,aAASmuD,EAAaz4D,KAC7F84D,EAAYA,EAAYC,EAAW,WAAQD,EAAYC,EAGzD,OAAOD,GAKX,GAAIj6D,EAASm6D,SAAW,KAAQR,MAAQ35D,EAASm6D,SAAW,KAAQC,SAClE,OAAOp6D,EAASq6D,KAAK,CACnBC,MAAO,KACPC,SAAU,OACT32E,UAAS,GAId,GAAI42E,GAAex6D,EAASk1D,QAC1B,OAAO,qBAAUuF,GAAqBz6D,EAASk1D,SAIjD,IAAI36C,EAAM,qBAAUva,EAASk1D,QAM7B,OAJK,MAAauE,IAChBl/C,EAqCG,SAAiBmgD,EAAMC,GAC5B,GAAI,OAAcD,IAASC,EACzB,OAAOD,EAIT,IAAIE,EAAqBC,GAAyBC,WAAaH,EAAWE,GAAyBE,gBAAa12E,EAE3Gu2E,IACHA,EAAqB,GAAK,aAAMD,EAAU,SAAM79D,KAAO,SAAMA,IAC7D+9D,GAA2B,CACzBC,SAAUH,EACVI,WAAYH,KAKZ,KAAU,aAAWF,EAAME,GAAsB,aAAqBF,EAAME,MAC9EF,EAAO,KAAOA,EAAKt6B,OAAOw6B,EAAmBhsE,SAG/C,OAAO8rE,EA1DCM,CAAQzgD,EAAKk/C,EAAiBkB,WAG/BpgD,EAEF,SAAS0gD,GAAaj7D,GAC3B,GAAKA,EAAL,CAIwB,kBAAbA,IACTA,EAAW,KAAI25D,KAAK35D,IAGtB,IAAIm8B,EAAO,aAASn8B,KAAcA,EAASm6D,SAAW,KAAQR,KAAO35D,EAASk1D,OAASl1D,EAAS06D,MAIhG,OAAIF,GAAer+B,GACVs+B,GAAqBt+B,GAGvBA,GAGT,SAASq+B,GAAeE,GACtB,SAAU,OAAaA,GAAoB,MAAZA,EAAK,IAG/B,SAASD,GAAqBC,GACnC,OAAIF,GAAeE,GACVA,EAAK7gC,OAAO,GAAGqhC,cAAgBR,EAAK/qC,MAAM,GAG5C+qC,EAET,IAAIG,GAA2Bp4E,OAAOC,OAAO,M,ICpDzCy4E,GAOOC,G,UC9CP,GAAsC,WACxC,IAAI/vE,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA0BtC,GAAwC,SAAUgN,EAAY1T,EAAQ2N,EAAKgG,GAC7E,IAEIxN,EAFAyN,EAAIC,UAAUpK,OACdqK,EAAIF,EAAI,EAAI5T,EAAkB,OAAT2T,EAAgBA,EAAOrW,OAAOyW,yBAAyB/T,EAAQ2N,GAAOgG,EAE/F,GAAuB,kBAAZK,SAAoD,oBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASP,EAAY1T,EAAQ2N,EAAKgG,QAAW,IAAK,IAAIjI,EAAIgI,EAAWjK,OAAS,EAAGiC,GAAK,EAAGA,KAC1KvF,EAAIuN,EAAWhI,MAAIoI,GAAKF,EAAI,EAAIzN,EAAE2N,GAAKF,EAAI,EAAIzN,EAAEnG,EAAQ2N,EAAKmG,GAAK3N,EAAEnG,EAAQ2N,KAASmG,GAE5F,OAAOF,EAAI,GAAKE,GAAKxW,OAAOM,eAAeoC,EAAQ2N,EAAKmG,GAAIA,GAG1D,GAAkC,SAAUK,EAAYC,GAC1D,OAAO,SAAUpU,EAAQ2N,GACvByG,EAAUpU,EAAQ2N,EAAKwG,KAqBvB,GAEJ,WACE,SAAS+hE,EAAWC,GAClBj5E,KAAKi5E,iBAAmBA,EAmC1B,OAhCAD,EAAWr4E,UAAUu4E,YAAc,SAAU5nD,GAC3C,OAAIA,aAAmB,IAInBA,aAAmB,KAAmBA,EAAQ6nD,SAOpDH,EAAWr4E,UAAUy4E,YAAc,SAAU9nD,GAC3C,GAAIA,aAAmB,GACrB,OAAOA,EAAQS,OAGjB,GAAIT,aAAmB,GACrB,OAAOA,EAAQ1U,QAAQ5c,KAAKi5E,kBAAkB31E,KAAK,SAAU6vB,GAM3D,OAAOA,EAAI0rB,WAIf,MAAM,IAAI/G,MAAM,aAGlBkhC,EAAa,GAAW,CAAC,GAAQ,EAAG,OAAqBA,GApC3D,GA0CI,GAEJ,WACE,SAASK,KAcT,OAZAA,EAAS14E,UAAU24E,UAAY,WAC7B,OAAO,IAGTD,EAAS14E,UAAU44E,cAAgB,SAAUjoD,GAC3C,OAAIA,aAAmB,GACd,GAAuBtrB,GAEvBwzE,GAAqBxzE,IAIzBqzE,EAfT,GAoBI,GAEJ,WACE,SAASI,EAA6BjzD,GACpCxmB,KAAKwmB,mBAAqBA,EAc5B,OAXAizD,EAA6B94E,UAAU+4E,2BAA6B,SAAUpoD,GAG5E,OAAO,aAASA,EAAQxS,MAG1B26D,EAA6B94E,UAAUg5E,+BAAiC,SAAU94E,GAChF,OAAOb,KAAKwmB,mBAAmBmzD,+BAA+B94E,IAGhE44E,EAA+B,GAAW,CAAC,GAAQ,EAAG,OAAsBA,GAf9E,GAqBIG,GAEJ,WACE,SAASA,KAMT,OAJAA,EAAiBj5E,UAAUgM,MAAQ,SAAU2kB,GAC3C,OAAOA,EAAQtrB,IAGV4zE,EAPT,GAYI,GAEJ,SAAU7vE,GAGR,SAAS8vE,EAAuBt4B,EAAWu4B,EAAWrqC,GACpD,IAAIruC,EAAQ2I,EAAOE,KAAKjK,OAASA,KAEjCoB,EAAM04E,UAAYA,EAClB,IAAI15B,EAAS3rC,SAASyE,cAAc,OAUpC,OATAkL,GAAA,EAAag8B,EAAQ,kBACrBh/C,EAAMk2E,KAAOl2E,EAAMsK,UAAU,IAAI,GAAU00C,EAAQ,CACjD01B,mBAAmB,KAErB10E,EAAM24E,MAAQ,IAAI,GAAW31D,GAAA,EAAWg8B,EAAQh8B,GAAA,EAAM,YAEtDhjB,EAAMsK,UAAU,aAAkBtK,EAAM24E,MAAOtqC,IAE/C8R,EAAUjoC,YAAY8mC,GACfh/C,EAwBT,OAxCA,GAAUy4E,EAAwB9vE,GAmBlC8vE,EAAuBl5E,UAAUqX,IAAM,SAAUsZ,EAAS4U,GACxD,IAAIka,EAAS,aAAQ9uB,EAAQxS,KAC7B9e,KAAKs3E,KAAKnB,SAASyC,GAAatnD,EAAQxS,KAAM9e,KAAK85E,UAAUE,YAAY55B,EAAQ,CAC/E65B,UAAU,IACR,CACFzpE,MAAOxQ,KAAK85E,UAAUE,YAAY1oD,EAAQxS,KAC1ConB,QAASA,IAEX,IAAIz3B,EAAM6iB,EAAQutB,SAAStyC,OAC3BvM,KAAK+5E,MAAM9C,SAASxoE,GAEhB6iB,EAAQ6nD,QACVn5E,KAAK+5E,MAAM7C,eAAe,YAAS,mBAAoB,4BAC9CzoE,EAAM,EACfzO,KAAK+5E,MAAM7C,eAAe,YAAS,kBAAmB,iBAAkBzoE,IAExEzO,KAAK+5E,MAAM7C,eAAe,YAAS,iBAAkB,gBAAiBzoE,KAI1EorE,EAAyB,GAAW,CAAC,GAAQ,EAAG,MAAgB,GAAQ,EAAG,MAAiBA,GAxC9F,CA0CE,KAEE,GAEJ,WACE,SAASK,EAAuB5Q,GAC9BtpE,KAAKspE,sBAAwBA,EAC7BtpE,KAAKm6E,WAAaD,EAAuBl0E,GAiB3C,OAdAk0E,EAAuBv5E,UAAUy5E,eAAiB,SAAU74B,GAC1D,OAAOvhD,KAAKspE,sBAAsB+Q,eAAe,GAAwB94B,IAG3E24B,EAAuBv5E,UAAU25E,cAAgB,SAAUC,EAAM/3C,EAAOg4C,GACtEA,EAASxiE,IAAIuiE,EAAKjpD,QAAS,aAAcipD,EAAKE,cAGhDP,EAAuBv5E,UAAU+5E,gBAAkB,SAAUC,GAC3DA,EAAal5E,WAGfy4E,EAAuBl0E,GAAK,yBAC5Bk0E,EAAyB,GAAW,CAAC,GAAQ,EAAG,OAAyBA,GAnB3E,GA0BI,GAEJ,WACE,SAASU,EAAqBr5B,GAC5B,IAAInB,EAAS3rC,SAASyE,cAAc,OACpClZ,KAAKi2B,OAASxhB,SAASyE,cAAc,QACrClZ,KAAKsyE,OAAS79D,SAASyE,cAAc,QACrClZ,KAAKurC,MAAQ92B,SAASyE,cAAc,QACpCkL,GAAA,EAAapkB,KAAKsyE,OAAQ,kBAC1BluD,GAAA,EAAag8B,EAAQ,aACrBA,EAAO9mC,YAAYtZ,KAAKi2B,QACxBmqB,EAAO9mC,YAAYtZ,KAAKsyE,QACxBlyB,EAAO9mC,YAAYtZ,KAAKurC,OACxBgW,EAAUjoC,YAAY8mC,GAiBxB,OAdAw6B,EAAqBj6E,UAAUqX,IAAM,SAAUsZ,GAC7C,IAAIupD,EAAcvpD,EAAQ8uB,OAAO4xB,QAC7BA,EAAU6I,GAAeA,EAAY7I,QAAQ1gD,EAAQ7jB,OAEzD,GAAIukE,EAAS,CACX,IAAI/7C,EAAS+7C,EAAQ/7C,OACjBq8C,EAASN,EAAQM,OACjB/mC,EAAQymC,EAAQzmC,MACpBvrC,KAAKi2B,OAAOvK,UAAY,aAAOuK,GAC/Bj2B,KAAKsyE,OAAO5mD,UAAY,aAAO4mD,GAC/BtyE,KAAKurC,MAAM7f,UAAY,aAAO6f,KAI3BqvC,EA5BT,GA+BIpB,GAEJ,WACE,SAASA,IACPx5E,KAAKm6E,WAAaX,EAAqBxzE,GAezC,OAZAwzE,EAAqB74E,UAAUy5E,eAAiB,SAAU74B,GACxD,OAAO,IAAI,GAAqBA,IAGlCi4B,EAAqB74E,UAAU25E,cAAgB,SAAUhpD,EAASkR,EAAOm4C,GACvEA,EAAa3iE,IAAIsZ,EAAQA,UAG3BkoD,EAAqB74E,UAAU+5E,gBAAkB,aAGjDlB,EAAqBxzE,GAAK,uBACnBwzE,EAjBT,GAsBI,GAEJ,WACE,SAASsB,KAYT,OAVAA,EAAan6E,UAAUo6E,aAAe,SAAUzpD,GAC9C,OAAIA,aAAmB,GACdA,EAAQugD,iBACNvgD,aAAmB,GACrBA,EAAQugD,iBAER,MAIJiJ,EAbT,G,uCDvSI,GAAsC,WACxC,IAAI9xE,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GAoCtCwxE,GAAgB,CAClBC,gBAAiB,KAAMC,cAIzB,SAAWpC,GACTA,EAAMA,EAAY,KAAI,GAAK,OAC3BA,EAAMA,EAAY,KAAI,GAAK,OAF7B,CAGGA,KAAUA,GAAQ,KAIrB,SAAWC,GACTA,EAAOoC,WAAa,CAClBhhE,KAAM,cAUR4+D,EAAOqC,MAPP,SAAe54C,GACb,MAAO,CACLroB,KAAM,QACNqoB,MAAOA,IARb,CAaGu2C,KAAWA,GAAS,KAEvB,IAAI,GAEJ,SAAUhvE,GAGR,SAASsxE,EAAU95B,EAAWp/C,QACZ,IAAZA,IACFA,EAAU,IAGZ,IAAIf,EAAQ2I,EAAOE,KAAKjK,OAASA,KA2BjC,OAzBAoB,EAAMk6E,KAAO,EACbl6E,EAAMm6E,YAAc,EACpBn6E,EAAMo6E,iBAAcx5E,EACpBZ,EAAMq6E,UAAY,GAClBr6E,EAAMs6E,UAAY,GAClBt6E,EAAMqjB,MAAQq0D,GAAM6C,KACpBv6E,EAAMw6E,iBAAmBx6E,EAAMsK,UAAU,IAAI,MAC7CtK,EAAMy6E,gBAAkBz6E,EAAMw6E,iBAAiB/6E,MAC/CO,EAAM06E,gBAAkB16E,EAAMsK,UAAU,IAAI,MAC5CtK,EAAMivD,YAAc,KAAkBluD,EAAQkuD,aAAe,EAE3DluD,EAAQkuD,YACVjvD,EAAM26E,qBAAuB55E,EAAQ45E,mBACrC36E,EAAM46E,qBAAqB,KAAkB75E,EAAQ65E,uBAA+B75E,EAAQ65E,mBAC5F56E,EAAM66E,GAAKxnE,SAASyE,cAAc,OAClCkL,GAAA,EAAahjB,EAAM66E,GAAI,sBACvB73D,GAAA,EAAahjB,EAAM66E,GAA0B,IAAtB76E,EAAMivD,YAE3B,WAAa,cACf9O,EAAUjoC,YAAYlY,EAAM66E,IAC5B76E,EAAM86E,cAAgB93D,GAAA,EAAWhjB,EAAM66E,GAAI73D,GAAA,EAAM,oBACjDhjB,EAAM+6E,cAAgB/3D,GAAA,EAAWhjB,EAAM66E,GAAI73D,GAAA,EAAM,0BAEjDhjB,EAAMyqB,MAAM1pB,EAAQysC,QAAUosC,IAEvB55E,EA2lBT,OA7nBA,GAAUi6E,EAAWtxE,GAqCrB3J,OAAOM,eAAe26E,EAAU16E,UAAW,sBAAuB,CAChEC,IAAK,WACH,OAAOZ,KAAKo8E,sBAEdpkE,IAAK,SAAaqkE,GAChB,IAAK,IAAIzpE,EAAK,EAAG+F,EAAK3Y,KAAK07E,UAAW9oE,EAAK+F,EAAGpM,OAAQqG,IAAM,CAC3C+F,EAAG/F,GACTypE,KAAKC,oBAAsBD,EAGtCr8E,KAAKo8E,qBAAuBC,GAE9Bv7E,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAe26E,EAAU16E,UAAW,oBAAqB,CAC9DC,IAAK,WACH,OAAOZ,KAAKu8E,oBAEdvkE,IAAK,SAAaqkE,GAChB,IAAK,IAAIzpE,EAAK,EAAG+F,EAAK3Y,KAAK07E,UAAW9oE,EAAK+F,EAAGpM,OAAQqG,IAAM,CAC3C+F,EAAG/F,GACTypE,KAAKG,kBAAoBH,EAGpCr8E,KAAKu8E,mBAAqBF,GAE5Bv7E,YAAY,EACZC,cAAc,IAGhBs6E,EAAU16E,UAAUkrB,MAAQ,SAAU+iB,GAChCA,EAAOqsC,gBAAgBwB,iBACzBr4D,GAAA,EAAgBpkB,KAAKi8E,GAAI,oBACzBj8E,KAAKi8E,GAAGpwD,MAAM6wD,eAAe,wBAE7Bt4D,GAAA,EAAapkB,KAAKi8E,GAAI,oBACtBj8E,KAAKi8E,GAAGpwD,MAAM8wD,YAAY,qBAAsB/tC,EAAOqsC,gBAAgB15E,cAI3E85E,EAAU16E,UAAUi8E,QAAU,SAAUC,EAAMvB,EAAM94C,GAClD,IAAIphC,EAAQpB,KAMZ,QAJc,IAAVwiC,IACFA,EAAQxiC,KAAKy7E,UAAUlvE,QAGrBvM,KAAKykB,QAAUq0D,GAAM6C,KACvB,MAAM,IAAI7jC,MAAM,yBAGlB93C,KAAKykB,MAAQq0D,GAAMgE,KAEnB,IAAIv7B,EAAYn9B,GAAA,EAAM,oBAElBoe,IAAUxiC,KAAKy7E,UAAUlvE,OAC3BvM,KAAKm8E,cAAc7iE,YAAYioC,GAE/BvhD,KAAKm8E,cAAcY,aAAax7B,EAAWvhD,KAAKm8E,cAAct9B,SAASt0B,KAAKiY,IAG9E,IAoBIw6C,EApBAC,EAAqBJ,EAAKt/D,YAAY,SAAU+9D,GAClD,OAAOl6E,EAAM87E,aAAa3yD,EAAM+wD,KAE9B6B,EAAsB,YAAa,WACrC,OAAO/7E,EAAM+6E,cAAczvB,YAAYnL,KAErC67B,EAAa,YAAmB,CAACH,EAAoBE,IACrDE,EAAuC,IAArBr9E,KAAKqwD,YAEzB,WACA,OAAO9lC,EAAKg3B,UAAU11B,MAAM/H,OAASyG,EAAK+wD,KAAO,MAC/C,WACF,OAAO/wD,EAAKg3B,UAAU11B,MAAMuK,MAAQ7L,EAAK+wD,KAAO,MAWhD0B,EADkB,kBAAT1B,EACEA,EACY,UAAdA,EAAKnhE,KACHna,KAAKs9E,YAAYhC,EAAK94C,OAAS,EAE/Bq6C,EAAKU,YAGlB,IA0EIC,EA1EAjzD,EAAO,CACTsyD,KAAMA,EACNt7B,UAAWA,EACX+5B,KAAM0B,EACNz4B,OAnBW,WACX84B,IACA9yD,EAAKsyD,KAAKt4B,OAAOh6B,EAAK+wD,KAAMl6E,EAAMivD,cAkBlC+sB,WAAYA,GAId,GAFAp9E,KAAKy7E,UAAU5qD,OAAO2R,EAAO,EAAGjY,GAE5BvqB,KAAKy7E,UAAUlvE,OAAS,EAAG,CAC7B,IAAIkxE,EAAqC,IAArBz9E,KAAKqwD,YAEvB,EAEA,EAGEqtB,EAAsC,IAArB19E,KAAKqwD,YAExB,CACAf,qBAAsB,SAA8B+sB,GAClD,OAAOj7E,EAAMu8E,gBAAgBtB,KAE7B,CACFuB,oBAAqB,SAA6BvB,GAChD,OAAOj7E,EAAMu8E,gBAAgBtB,KAG7BwB,EAAS,IAAI,KAAK79E,KAAKk8E,cAAewB,EAAgB,CACxDrtB,YAAaotB,EACbnB,oBAAqBt8E,KAAKs8E,oBAC1BE,kBAAmBx8E,KAAKw8E,oBAEtBsB,EAAuC,IAArB99E,KAAKqwD,YAEzB,SAAUnkD,GACV,MAAO,CACLmwE,KAAMwB,EACNtqE,MAAOrH,EAAE0iE,OACT5vB,QAAS9yC,EAAE6iE,SACXgP,IAAK7xE,EAAE0zB,SAEP,SAAU1zB,GACZ,MAAO,CACLmwE,KAAMwB,EACNtqE,MAAOrH,EAAEukD,OACTzR,QAAS9yC,EAAEwkD,SACXqtB,IAAK7xE,EAAE0zB,SAIPo+C,EADU,KAAM/wE,IAAI4wE,EAAOttB,WAAYutB,EACnBG,CAAQj+E,KAAKk+E,YAAal+E,MAE9Cm+E,EADW,KAAMlxE,IAAI4wE,EAAOtgE,YAAaugE,EAClB5tC,CAASlwC,KAAKo+E,aAAcp+E,MAMnDq+E,EALQ,KAAMpxE,IAAI4wE,EAAOhP,SAAU,WACrC,OAAO,aAAWztE,EAAMs6E,UAAW,SAAUnxD,GAC3C,OAAOA,EAAK8xD,OAASwB,KAGHS,CAAMt+E,KAAKu+E,UAAWv+E,MACxCw+E,EAAuBX,EAAOY,WAAW,WAC3C,OAAOr9E,EAAM06E,gBAAgB/5E,KAAK,aAAWX,EAAMs6E,UAAW,SAAUnxD,GACtE,OAAOA,EAAK8xD,OAASwB,OAGrBa,EAAe,YAAmB,CAACV,EAAmBG,EAAsBE,EAAiBG,EAAsBX,IACnHc,EAAW,CACbtC,KAAMwB,EACNT,WAAYsB,GAEd1+E,KAAK07E,UAAU7qD,OAAO2R,EAAQ,EAAG,EAAGm8C,GAGtCp9B,EAAUjoC,YAAYujE,EAAKvrD,SAGP,kBAATgqD,GAAmC,UAAdA,EAAKnhE,OACnCqjE,EAAoBlC,EAAK94C,OAG3BxiC,KAAK4+E,SAASp8C,EAAOg7C,GACrBx9E,KAAKykB,MAAQq0D,GAAM6C,KAEC,kBAATL,GAAmC,eAAdA,EAAKnhE,MACnCna,KAAK6+E,uBAITxD,EAAU16E,UAAUi+E,SAAW,SAAUE,EAAkBtB,GACzD,IAAIjC,EAAcv7E,KAAKy7E,UAAU1oD,OAAO,SAAUnc,EAAGpI,GACnD,OAAOoI,EAAIpI,EAAE8sE,MACZ,GACCyD,EAAiD,kBAArBD,EAAgC,CAACA,QAAoB98E,EACjFg9E,EAAmD,kBAAtBxB,EAAiC,CAACA,QAAqBx7E,EACxFhC,KAAKi/E,OAAOj/E,KAAKy7E,UAAUlvE,OAAS,EAAGvM,KAAKs7E,KAAOC,OAAav5E,EAAW+8E,EAAoBC,GAC/Fh/E,KAAKk/E,uBACLl/E,KAAKm/E,cACLn/E,KAAKo/E,mBAGP/D,EAAU16E,UAAU4jD,OAAS,SAAU+2B,GACrC,IAAIl6E,EAAQpB,KAERq/E,EAAeh+E,KAAKw5B,IAAI76B,KAAKs7E,KAAMt7E,KAAKu7E,aAG5C,GAFAv7E,KAAKs7E,KAAOA,EAEPt7E,KAAKw7E,YAcR,IAAK,IAAIhtE,EAAI,EAAGA,EAAIxO,KAAKy7E,UAAUlvE,OAAQiC,IAAK,CAC9C,IAAI+b,EAAOvqB,KAAKy7E,UAAUjtE,GAC1B+b,EAAK+wD,KAAO,aAAMj6E,KAAKyqB,MAAM9rB,KAAKw7E,YAAYhtE,GAAK8sE,GAAO/wD,EAAKsyD,KAAKU,YAAahzD,EAAKsyD,KAAKyC,iBAhBxE,CACrB,IAAI73B,EAAU,aAAMznD,KAAKy7E,UAAUlvE,QAC/BwyE,EAAqBt3B,EAAQ3rC,OAAO,SAAUtN,GAChD,OAA4C,IAArCpN,EAAMq6E,UAAUjtE,GAAGquE,KAAK0C,WAI7BP,EAAsBv3B,EAAQ3rC,OAAO,SAAUtN,GACjD,OAA4C,IAArCpN,EAAMq6E,UAAUjtE,GAAGquE,KAAK0C,WAIjCv/E,KAAKi/E,OAAOj/E,KAAKy7E,UAAUlvE,OAAS,EAAG+uE,EAAO+D,OAAcr9E,EAAW+8E,EAAoBC,GAQ7Fh/E,KAAKk/E,uBACLl/E,KAAKm/E,eAGP9D,EAAU16E,UAAUy+E,gBAAkB,WACpC,IAAIh+E,EAAQpB,KAERA,KAAKg8E,oBAAsBh8E,KAAKu7E,YAAc,IAChDv7E,KAAKw7E,YAAcx7E,KAAKy7E,UAAUxuE,IAAI,SAAUuB,GAC9C,OAAOA,EAAE8sE,KAAOl6E,EAAMm6E,gBAK5BF,EAAU16E,UAAUu9E,YAAc,SAAUvlE,GAC1C,IAAIvX,EAAQpB,KAERq8E,EAAO1jE,EAAG0jE,KACV9oE,EAAQoF,EAAGpF,MACXwqE,EAAMplE,EAAGolE,IACTv7C,EAAQ,aAAWxiC,KAAK07E,UAAW,SAAUnxD,GAC/C,OAAOA,EAAK8xD,OAASA,IAGnBe,EAAa,YAAmB,CAAC,aAAS3oE,SAAS4M,KAAM,UAAxB,CAAmC,SAAUnV,GAChF,OAAOszE,EAAmBp+E,EAAMq+E,cAAczgC,QAAS9yC,EAAE0zB,UACvD,aAASnrB,SAAS4M,KAAM,QAAxB,CAAiC,WACnC,OAAOm+D,EAAmBp+E,EAAMq+E,cAAczgC,SAAS,OAGrDwgC,EAAqB,SAA4BjsE,EAAOwqE,GAC1D,IAsBQ2B,EAtBJC,EAAQv+E,EAAMq6E,UAAUxuE,IAAI,SAAUuB,GACxC,OAAOA,EAAE8sE,OAGPsE,EAAWnkD,OAAOokD,kBAClBC,EAAWrkD,OAAOskD,mBAElB3+E,EAAM26E,qBACRgC,GAAOA,GAGLA,KAIev7C,IAAUphC,EAAMs6E,UAAUnvE,OAAS,GAIlDqzE,IADIF,EAAWt+E,EAAMq6E,UAAUj5C,IACVq6C,KAAKU,YAAcmC,EAASpE,MAAQ,EACzDwE,GAAYJ,EAAS7C,KAAKyC,YAAcI,EAASpE,MAAQ,IAGzDsE,IADIF,EAAWt+E,EAAMq6E,UAAUj5C,EAAQ,IAClB84C,KAAOoE,EAAS7C,KAAKyC,aAAe,EACzDQ,GAAYJ,EAASpE,KAAOoE,EAAS7C,KAAKU,aAAe,IAI7Dn8E,EAAMq+E,cAAgB,CACpBlsE,MAAOA,EACPyrC,QAASzrC,EACTivB,MAAOA,EACPm9C,MAAOA,EACPC,SAAUA,EACVE,SAAUA,EACV/B,IAAKA,EACLX,WAAYA,IAIhBoC,EAAmBjsE,EAAOwqE,IAG5B1C,EAAU16E,UAAUy9E,aAAe,SAAUzlE,GAC3C,IAAIqmC,EAAUrmC,EAAGqmC,QACbxtB,EAAKxxB,KAAKy/E,cACVj9C,EAAQhR,EAAGgR,MACXjvB,EAAQie,EAAGje,MACXosE,EAAQnuD,EAAGmuD,MACX5B,EAAMvsD,EAAGusD,IACT6B,EAAWpuD,EAAGouD,SACdE,EAAWtuD,EAAGsuD,SAClB9/E,KAAKy/E,cAAczgC,QAAUA,EAC7B,IAAIghC,EAAQhhC,EAAUzrC,EAClB0sE,EAAWjgF,KAAKi/E,OAAOz8C,EAAOw9C,EAAOL,OAAO39E,OAAWA,EAAW49E,EAAUE,GAEhF,GAAI/B,EAAK,CACP,IAAImC,EAAa19C,IAAUxiC,KAAK07E,UAAUnvE,OAAS,EAC/C4zE,EAAWngF,KAAKy7E,UAAUxuE,IAAI,SAAUuB,GAC1C,OAAOA,EAAE8sE,OAEP8E,EAAgBF,EAAa19C,EAAQA,EAAQ,EAC7Ck9C,EAAW1/E,KAAKy7E,UAAU2E,GAC1BC,EAAcX,EAASpE,KAAOoE,EAAS7C,KAAKyC,YAC5CgB,EAAcZ,EAASpE,KAAOoE,EAAS7C,KAAKU,YAC5CgD,EAAcL,EAAa19C,EAAQ,EAAIA,EAAQ,EACnDxiC,KAAKi/E,OAAOsB,GAAcN,EAAUE,OAAUn+E,OAAWA,EAAWq+E,EAAaC,GAGnFtgF,KAAKk/E,uBACLl/E,KAAKm/E,eAGP9D,EAAU16E,UAAU49E,UAAY,SAAU/7C,GACxCxiC,KAAK47E,iBAAiB75E,KAAKygC,GAE3BxiC,KAAKy/E,cAAcrC,WAAW37E,UAC9BzB,KAAKo/E,mBAGP/D,EAAU16E,UAAUu8E,aAAe,SAAU3yD,EAAM+wD,GACjD,IAAI94C,EAAQxiC,KAAKy7E,UAAUrxD,QAAQG,GAE/BiY,EAAQ,GAAKA,GAASxiC,KAAKy7E,UAAUlvE,SAIzC+uE,EAAuB,kBAATA,EAAoBA,EAAO/wD,EAAK+wD,KAC9CA,EAAO,aAAMA,EAAM/wD,EAAKsyD,KAAKU,YAAahzD,EAAKsyD,KAAKyC,aAEhDt/E,KAAK+7E,oBAAsBv5C,EAAQ,GAGrCxiC,KAAKi/E,OAAOz8C,EAAQ,EAAGnhC,KAAKkjB,OAAOgG,EAAK+wD,KAAOA,GAAQ,IACvDt7E,KAAKk/E,uBACLl/E,KAAKm/E,gBAEL50D,EAAK+wD,KAAOA,EACZt7E,KAAK4+E,SAASp8C,OAAOxgC,MAIzBq5E,EAAU16E,UAAU6/E,WAAa,SAAUh+C,EAAO84C,GAChD,IAAIl6E,EAAQpB,KAEZ,GAAIA,KAAKykB,QAAUq0D,GAAM6C,KACvB,MAAM,IAAI7jC,MAAM,yBAKlB,GAFA93C,KAAKykB,MAAQq0D,GAAMgE,OAEft6C,EAAQ,GAAKA,GAASxiC,KAAKy7E,UAAUlvE,QAAzC,CAIA,IAAIge,EAAOvqB,KAAKy7E,UAAUj5C,GAC1B84C,EAAOj6E,KAAKyqB,MAAMwvD,GAElB,IAAI0E,GADJ1E,EAAO,aAAMA,EAAM/wD,EAAKsyD,KAAKU,YAAahzD,EAAKsyD,KAAKyC,cACjC/0D,EAAK+wD,KAExB,GAAc,IAAV0E,GAAex9C,EAAQxiC,KAAKy7E,UAAUlvE,OAAS,EAAG,CACpD,IAAIk0E,EAAc,aAAMj+C,EAAQ,EAAGxiC,KAAKy7E,UAAUlvE,QAC9Cm0E,EAAeD,EAAY1tD,OAAO,SAAUnc,EAAGpI,GACjD,OAAOoI,GAAKxV,EAAMq6E,UAAUjtE,GAAG8sE,KAAOl6E,EAAMq6E,UAAUjtE,GAAGquE,KAAKU,cAC7D,GACCoD,EAAaF,EAAY1tD,OAAO,SAAUnc,EAAGpI,GAC/C,OAAOoI,GAAKxV,EAAMq6E,UAAUjtE,GAAGquE,KAAKyC,YAAcl+E,EAAMq6E,UAAUjtE,GAAG8sE,OACpE,GACCsF,EAAY,aAAMZ,GAAQW,EAAYD,GAC1C1gF,KAAKi/E,OAAOz8C,EAAOo+C,GACnBZ,GAASY,EAGX,GAAc,IAAVZ,GAAex9C,EAAQ,EAAG,CAC5B,IAAIq+C,EAAY,aAAMr+C,EAAQ,GAAI,GAC9Bs+C,EAAaD,EAAU9tD,OAAO,SAAUnc,EAAGpI,GAC7C,OAAOoI,GAAKxV,EAAMq6E,UAAUjtE,GAAG8sE,KAAOl6E,EAAMq6E,UAAUjtE,GAAGquE,KAAKU,cAC7D,GACCwD,EAAWF,EAAU9tD,OAAO,SAAUnc,EAAGpI,GAC3C,OAAOoI,GAAKxV,EAAMq6E,UAAUjtE,GAAGquE,KAAKyC,YAAcl+E,EAAMq6E,UAAUjtE,GAAG8sE,OACpE,GACC0F,EAAU,cAAOhB,GAAQc,EAAYC,GACzC/gF,KAAKi/E,OAAOz8C,EAAQ,EAAGw+C,GAGzBhhF,KAAKk/E,uBACLl/E,KAAKm/E,cACLn/E,KAAKo/E,kBACLp/E,KAAKykB,MAAQq0D,GAAM6C,OAGrBN,EAAU16E,UAAUk+E,oBAAsB,WAGxC,IAFA,IAAIvD,EAAOj6E,KAAKkjB,MAAMvkB,KAAKs7E,KAAOt7E,KAAKy7E,UAAUlvE,QAExCiC,EAAI,EAAGA,EAAIxO,KAAKy7E,UAAUlvE,OAAS,EAAGiC,IAC7CxO,KAAKwgF,WAAWhyE,EAAG8sE,IAIvBD,EAAU16E,UAAU28E,YAAc,SAAU96C,GAC1C,OAAIA,EAAQ,GAAKA,GAASxiC,KAAKy7E,UAAUlvE,QAC/B,EAGHvM,KAAKy7E,UAAUj5C,GAAO84C,MAG/BD,EAAU16E,UAAUs+E,OAAS,SAAUz8C,EAAOw9C,EAAOL,EAAOZ,EAAoBC,EAAqBiC,EAAkBC,GACrH,IAAI9/E,EAAQpB,KAgBZ,QAdc,IAAV2/E,IACFA,EAAQ3/E,KAAKy7E,UAAUxuE,IAAI,SAAUuB,GACnC,OAAOA,EAAE8sE,aAIY,IAArB2F,IACFA,EAAmBxlD,OAAOokD,wBAGH,IAArBqB,IACFA,EAAmBzlD,OAAOskD,mBAGxBv9C,EAAQ,GAAKA,GAASxiC,KAAKy7E,UAAUlvE,OACvC,OAAO,EAGT,IAAIs0E,EAAY,aAAMr+C,GAAQ,GAC1Bi+C,EAAc,aAAMj+C,EAAQ,EAAGxiC,KAAKy7E,UAAUlvE,QAElD,GAAIyyE,EACF,IAAK,IAAIpsE,EAAK,EAAGuuE,EAAwBnC,EAAqBpsE,EAAKuuE,EAAsB50E,OAAQqG,IAAM,CACrG,IAAIwuE,EAAUD,EAAsBvuE,GACpC,aAAYiuE,EAAWO,GACvB,aAAYX,EAAaW,GAI7B,GAAIrC,EACF,IAAK,IAAIpmE,EAAK,EAAG0oE,EAAuBtC,EAAoBpmE,EAAK0oE,EAAqB90E,OAAQoM,IAAM,CAClG,IAAI2oE,EAAUD,EAAqB1oE,GACnC,aAAUkoE,EAAWS,GACrB,aAAUb,EAAaa,GAgC3B,IA5BA,IAAIC,EAAUV,EAAU5zE,IAAI,SAAUuB,GACpC,OAAOpN,EAAMq6E,UAAUjtE,KAErBgzE,EAAUX,EAAU5zE,IAAI,SAAUuB,GACpC,OAAOmxE,EAAMnxE,KAEXizE,EAAYhB,EAAYxzE,IAAI,SAAUuB,GACxC,OAAOpN,EAAMq6E,UAAUjtE,KAErBkzE,EAAYjB,EAAYxzE,IAAI,SAAUuB,GACxC,OAAOmxE,EAAMnxE,KAEXmzE,EAAad,EAAU9tD,OAAO,SAAUnc,EAAGpI,GAC7C,OAAOoI,GAAKxV,EAAMq6E,UAAUjtE,GAAGquE,KAAKU,YAAcoC,EAAMnxE,KACvD,GACCozE,EAAaf,EAAU9tD,OAAO,SAAUnc,EAAGpI,GAC7C,OAAOoI,GAAKxV,EAAMq6E,UAAUjtE,GAAGquE,KAAKyC,YAAcK,EAAMnxE,KACvD,GACCqzE,EAAsC,IAAvBpB,EAAYl0E,OAAekvB,OAAOskD,kBAAoBU,EAAY1tD,OAAO,SAAUnc,EAAGpI,GACvG,OAAOoI,GAAK+oE,EAAMnxE,GAAKpN,EAAMq6E,UAAUjtE,GAAGquE,KAAKU,cAC9C,GACCuE,EAAsC,IAAvBrB,EAAYl0E,OAAekvB,OAAOokD,kBAAoBY,EAAY1tD,OAAO,SAAUnc,EAAGpI,GACvG,OAAOoI,GAAK+oE,EAAMnxE,GAAKpN,EAAMq6E,UAAUjtE,GAAGquE,KAAKyC,cAC9C,GACCM,EAAWv+E,KAAKw5B,IAAI8mD,EAAYG,EAAcb,GAC9CnB,EAAWz+E,KAAK8sE,IAAI0T,EAAcD,EAAYV,GAGzC1yE,EAAI,EAAGwyE,EAFhBhB,EAAQ,aAAMA,EAAOJ,EAAUE,GAEEtxE,EAAI+yE,EAAQh1E,OAAQiC,IAAK,CACxD,IAAI+b,EAAOg3D,EAAQ/yE,GAGnBwyE,IAFI1F,EAAO,aAAMkG,EAAQhzE,GAAKwyE,EAASz2D,EAAKsyD,KAAKU,YAAahzD,EAAKsyD,KAAKyC,cACjDkC,EAAQhzE,GAE/B+b,EAAK+wD,KAAOA,EAGL9sE,EAAI,EAAb,IAAK,IAAWoyE,EAAYZ,EAAOxxE,EAAIizE,EAAUl1E,OAAQiC,IAAK,CAC5D,IACI8sE,EADA/wD,EAAOk3D,EAAUjzE,GAGrBoyE,IAFItF,EAAO,aAAMoG,EAAUlzE,GAAKoyE,EAAWr2D,EAAKsyD,KAAKU,YAAahzD,EAAKsyD,KAAKyC,cACrDoC,EAAUlzE,GAEjC+b,EAAK+wD,KAAOA,EAGd,OAAO0E,GAGT3E,EAAU16E,UAAUu+E,qBAAuB,WAMzC,IALA,IAAI3D,EAAcv7E,KAAKy7E,UAAU1oD,OAAO,SAAUnc,EAAGpI,GACnD,OAAOoI,EAAIpI,EAAE8sE,MACZ,GACCyG,EAAa/hF,KAAKs7E,KAAOC,EAEpB/sE,EAAIxO,KAAKy7E,UAAUlvE,OAAS,EAAkB,IAAfw1E,GAAoBvzE,GAAK,EAAGA,IAAK,CACvE,IAAI+b,EAAOvqB,KAAKy7E,UAAUjtE,GACtB8sE,EAAO,aAAM/wD,EAAK+wD,KAAOyG,EAAYx3D,EAAKsyD,KAAKU,YAAahzD,EAAKsyD,KAAKyC,aAE1EyC,GADgBzG,EAAO/wD,EAAK+wD,KAE5B/wD,EAAK+wD,KAAOA,IAIhBD,EAAU16E,UAAUw+E,YAAc,WAEhCn/E,KAAKu7E,YAAcv7E,KAAKy7E,UAAU1oD,OAAO,SAAUnc,EAAGpI,GACpD,OAAOoI,EAAIpI,EAAE8sE,MACZ,GAEHt7E,KAAKy7E,UAAU3tE,QAAQ,SAAUyc,GAC/B,OAAOA,EAAKg6B,WAGdvkD,KAAK07E,UAAU5tE,QAAQ,SAAUyc,GAC/B,OAAOA,EAAK8xD,KAAK93B,WAGnB,IAAIpE,GAAW,EACX6hC,EAAgBhiF,KAAKy7E,UAAUxuE,IAAI,SAAUuB,GAC/C,OAAO2xC,EAAW3xC,EAAE8sE,KAAO9sE,EAAEquE,KAAKU,YAAc,GAAKp9B,IAEvDA,GAAW,EACX,IAAI8hC,EAAcjiF,KAAKy7E,UAAUxuE,IAAI,SAAUuB,GAC7C,OAAO2xC,EAAW3xC,EAAEquE,KAAKyC,YAAc9wE,EAAE8sE,KAAO,GAAKn7B,IAEnD+hC,EAAeliF,KAAKy7E,UAAUnuC,QAAQ7Z,UAC1C0sB,GAAW,EACX,IAAIgiC,EAAcD,EAAaj1E,IAAI,SAAUuB,GAC3C,OAAO2xC,EAAW3xC,EAAE8sE,KAAO9sE,EAAEquE,KAAKU,YAAc,GAAKp9B,IACpD1sB,UACH0sB,GAAW,EACX,IAAIiiC,EAAYF,EAAaj1E,IAAI,SAAUuB,GACzC,OAAO2xC,EAAW3xC,EAAEquE,KAAKyC,YAAc9wE,EAAE8sE,KAAO,GAAKn7B,IACpD1sB,UACHzzB,KAAK07E,UAAU5tE,QAAQ,SAAUoD,EAAG1C,GAClC,IAAI2/D,IAAQ6T,EAAcxzE,IAAM4zE,EAAU5zE,EAAI,IAC1CqsB,IAAQonD,EAAYzzE,IAAM2zE,EAAY3zE,EAAI,IAG5C0C,EAAEmrE,KAAK53D,MADL0pD,GAAOtzC,EACM,EAGNszC,IAAQtzC,EACF,GAGLszC,GAAOtzC,EACF,EAIA,KAOrBwgD,EAAU16E,UAAUg9E,gBAAkB,SAAUtB,GAG9C,IAFA,IAAInxE,EAAW,EAENsD,EAAI,EAAGA,EAAIxO,KAAK07E,UAAUnvE,OAAQiC,IAGzC,GAFAtD,GAAYlL,KAAKy7E,UAAUjtE,GAAG8sE,KAE1Bt7E,KAAK07E,UAAUltE,GAAG6tE,OAASA,EAC7B,OAAOnxE,EAIX,OAAO,GAGTmwE,EAAU16E,UAAUc,QAAU,WAC5BsI,EAAOpJ,UAAUc,QAAQwI,KAAKjK,MAE9BA,KAAKy7E,UAAU3tE,QAAQ,SAAUU,GAC/B,OAAOA,EAAE4uE,WAAW37E,YAEtBzB,KAAKy7E,UAAY,GACjBz7E,KAAK07E,UAAU5tE,QAAQ,SAAUU,GAC/B,OAAOA,EAAE4uE,WAAW37E,YAEtBzB,KAAK07E,UAAY,IAGZL,EA9nBT,CA+nBE,KEhsBE,GAAsC,WACxC,IAAIryE,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA0BtC,GAAwC,SAAUgN,EAAY1T,EAAQ2N,EAAKgG,GAC7E,IAEIxN,EAFAyN,EAAIC,UAAUpK,OACdqK,EAAIF,EAAI,EAAI5T,EAAkB,OAAT2T,EAAgBA,EAAOrW,OAAOyW,yBAAyB/T,EAAQ2N,GAAOgG,EAE/F,GAAuB,kBAAZK,SAAoD,oBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASP,EAAY1T,EAAQ2N,EAAKgG,QAAW,IAAK,IAAIjI,EAAIgI,EAAWjK,OAAS,EAAGiC,GAAK,EAAGA,KAC1KvF,EAAIuN,EAAWhI,MAAIoI,GAAKF,EAAI,EAAIzN,EAAE2N,GAAKF,EAAI,EAAIzN,EAAEnG,EAAQ2N,EAAKmG,GAAK3N,EAAEnG,EAAQ2N,KAASmG,GAE5F,OAAOF,EAAI,GAAKE,GAAKxW,OAAOM,eAAeoC,EAAQ2N,EAAKmG,GAAIA,GAG1D,GAAkC,SAAUK,EAAYC,GAC1D,OAAO,SAAUpU,EAAQ2N,GACvByG,EAAUpU,EAAQ2N,EAAKwG,KAIvB,GAAsC,SAAUyJ,EAASC,EAAYC,EAAGC,GAC1E,OAAO,IAAKD,IAAMA,EAAIjE,UAAU,SAAUC,EAASkE,GACjD,SAASC,EAAUxe,GACjB,IACEye,EAAKH,EAAUI,KAAK1e,IACpB,MAAO2J,GACP4U,EAAO5U,IAIX,SAASgV,EAAS3e,GAChB,IACEye,EAAKH,EAAiB,MAAEte,IACxB,MAAO2J,GACP4U,EAAO5U,IAIX,SAAS8U,EAAK3O,GACZA,EAAO8O,KAAOvE,EAAQvK,EAAO9P,OAAS,IAAIqe,EAAE,SAAUhE,GACpDA,EAAQvK,EAAO9P,SACde,KAAKyd,EAAWG,GAGrBF,GAAMH,EAAYA,EAAUP,MAAMI,EAASC,GAAc,KAAKM,WAI9D,GAA0C,SAAUP,EAASW,GAC/D,IASIC,EACAC,EACAC,EACAC,EAZAC,EAAI,CACNxX,MAAO,EACPyX,KAAM,WACJ,GAAW,EAAPH,EAAE,GAAQ,MAAMA,EAAE,GACtB,OAAOA,EAAE,IAEXI,KAAM,GACNC,IAAK,IAMP,OAAOJ,EAAI,CACTR,KAAMa,EAAK,GACX,MAASA,EAAK,GACd,OAAUA,EAAK,IACI,oBAAXC,SAA0BN,EAAEM,OAAOC,UAAY,WACvD,OAAOhiB,OACLyhB,EAEJ,SAASK,EAAKG,GACZ,OAAO,SAAUC,GACf,OAIJ,SAAcC,GACZ,GAAIb,EAAG,MAAM,IAAIc,UAAU,mCAE3B,KAAOV,GACL,IACE,GAAIJ,EAAI,EAAGC,IAAMC,EAAY,EAARW,EAAG,GAASZ,EAAU,OAAIY,EAAG,GAAKZ,EAAS,SAAOC,EAAID,EAAU,SAAMC,EAAEvX,KAAKsX,GAAI,GAAKA,EAAEN,SAAWO,EAAIA,EAAEvX,KAAKsX,EAAGY,EAAG,KAAKhB,KAAM,OAAOK,EAG3J,OAFID,EAAI,EAAGC,IAAGW,EAAK,CAAS,EAARA,EAAG,GAAQX,EAAEjf,QAEzB4f,EAAG,IACT,KAAK,EACL,KAAK,EACHX,EAAIW,EACJ,MAEF,KAAK,EAEH,OADAT,EAAExX,QACK,CACL3H,MAAO4f,EAAG,GACVhB,MAAM,GAGV,KAAK,EACHO,EAAExX,QACFqX,EAAIY,EAAG,GACPA,EAAK,CAAC,GACN,SAEF,KAAK,EACHA,EAAKT,EAAEG,IAAIQ,MAEXX,EAAEE,KAAKS,MAEP,SAEF,QACE,KAAkBb,GAAZA,EAAIE,EAAEE,MAAYrV,OAAS,GAAKiV,EAAEA,EAAEjV,OAAS,MAAkB,IAAV4V,EAAG,IAAsB,IAAVA,EAAG,IAAW,CACtFT,EAAI,EACJ,SAGF,GAAc,IAAVS,EAAG,MAAcX,GAAKW,EAAG,GAAKX,EAAE,IAAMW,EAAG,GAAKX,EAAE,IAAK,CACvDE,EAAExX,MAAQiY,EAAG,GACb,MAGF,GAAc,IAAVA,EAAG,IAAYT,EAAExX,MAAQsX,EAAE,GAAI,CACjCE,EAAExX,MAAQsX,EAAE,GACZA,EAAIW,EACJ,MAGF,GAAIX,GAAKE,EAAExX,MAAQsX,EAAE,GAAI,CACvBE,EAAExX,MAAQsX,EAAE,GAEZE,EAAEG,IAAIzT,KAAK+T,GAEX,MAGEX,EAAE,IAAIE,EAAEG,IAAIQ,MAEhBX,EAAEE,KAAKS,MAEP,SAGJF,EAAKd,EAAKpX,KAAKyW,EAASgB,GACxB,MAAOxV,GACPiW,EAAK,CAAC,EAAGjW,GACTqV,EAAI,EACJ,QACAD,EAAIE,EAAI,EAIZ,GAAY,EAARW,EAAG,GAAQ,MAAMA,EAAG,GACxB,MAAO,CACL5f,MAAO4f,EAAG,GAAKA,EAAG,QAAK,EACvBhB,MAAM,GAlFCH,CAAK,CAACiB,EAAGC,OA8GlB,GAEJ,WACE,SAASmgE,EAAmBh3E,EAASqb,GACnC,IAAItlB,EAAQpB,KAEZA,KAAKqL,QAAUA,EACfrL,KAAK0mB,OAASA,EACd1mB,KAAKwL,aAAe,IAAI+f,IACxBvrB,KAAKsiF,qBAAuB,IAAI7hC,IAChCzgD,KAAK0oE,eAAiB,GACtB1oE,KAAKuiF,mBAAqB,GAE1BviF,KAAK0oE,eAAet6D,KAAKpO,KAAKqL,QAAQe,iBAAiB,WACrD,OAAOhL,EAAMohF,qBAGfxiF,KAAKwiF,kBAiIP,OA9HAH,EAAmB1hF,UAAUc,QAAU,WACrCzB,KAAKuiF,mBAAqB,YAAQviF,KAAKuiF,oBACvCviF,KAAK0oE,eAAiB,YAAQ1oE,KAAK0oE,gBACnC1oE,KAAKyiF,qBAGPJ,EAAmB1hF,UAAU6hF,gBAAkB,WAC7CxiF,KAAKuiF,mBAAqB,YAAQviF,KAAKuiF,oBAEvC,IAAI11E,EAAQ7M,KAAKqL,QAAQyB,WAEzB,GAAID,EACF,IAAK,IAAI+F,EAAK,EAAG+F,EAAK3Y,KAAK0mB,OAAOqL,OAAQnf,EAAK+F,EAAGpM,OAAQqG,IAAM,CAC9D,IAAI6gE,EAAM96D,EAAG/F,GAEb,GAAI6gE,EAAI30D,IAAIvd,aAAesL,EAAMiS,IAAIvd,WAGnC,YAFAvB,KAAK8sB,gBAAgB2mD,KAQ7B4O,EAAmB1hF,UAAUmsB,gBAAkB,SAAUgnD,GACvD,IAAI1yE,EAAQpB,KAEZ,GAAKA,KAAKqL,QAAQuB,WAAlB,CAIA5M,KAAKuiF,mBAAmBn0E,KAAKpO,KAAKqL,QAAQyB,WAAW41E,uBAAuB,SAAU7hF,GACpF,OAAOO,EAAMuhF,0BAMf,IAHA,IAAIr0E,EAAiB,GACjBs0E,EAA4B,GAEvBp0E,EAAI,EAAGC,EAAMqlE,EAAUj1B,SAAStyC,OAAQiC,EAAIC,EAAKD,IAAK,CAC7D,IAAIq0E,EAAe/O,EAAUj1B,SAASrwC,GAElCxO,KAAKsiF,qBAAqBniE,IAAI0iE,EAAa78E,MAI/CsI,EAAeF,KAAK,CAClBX,MAAOo1E,EAAap1E,MACpBtL,QAASkgF,EAAmBS,oBAE9BF,EAA0Bx0E,KAAKI,IAGjC,IAAImnB,EAAc31B,KAAKqL,QAAQmB,iBAAiB,GAAI8B,GAEpD,IAASE,EAAI,EAAGA,EAAImnB,EAAYppB,OAAQiC,IACtCxO,KAAKwL,aAAawM,IAAI2d,EAAYnnB,GAAIslE,EAAUj1B,SAAS+jC,EAA0Bp0E,OAIvF6zE,EAAmB1hF,UAAUgiF,qBAAuB,WAClD,IAAIvhF,EAAQpB,KAER+iF,EAAW,GAEXl2E,EAAQ7M,KAAKqL,QAAQyB,WAEzB,GAAKD,EAAL,CAIA7M,KAAKwL,aAAasC,QAAQ,SAAUgmE,EAAW1mD,GAC7C,IAAI41D,EAAWn2E,EAAMyhB,mBAAmBlB,GAExC,GAAK41D,EAAL,CAIA,IAAIvpD,GAAS,EAEb,IAAI,KAAM0J,YAAY6/C,EAAUlP,EAAUrmE,OAE/B,KAAMw1E,mBAAmBD,GAClCvpD,GAAS,EAEQq6C,EAAUrmE,MAAM6D,UAAYwiE,EAAUrmE,MAAMS,cACzC80E,EAAS1xE,UAAY0xE,EAAS90E,cAGhDurB,GAAS,GAITA,GACFr4B,EAAMkhF,qBAAqBlpE,IAAI06D,EAAU9tE,IAEzC+8E,EAAS30E,KAAKgf,IAEd0mD,EAAUrmE,MAAQu1E,KAItB,IAAK,IAAIx0E,EAAI,EAAGC,EAAMs0E,EAASx2E,OAAQiC,EAAIC,EAAKD,IAC9CxO,KAAKwL,aAAammB,OAAOoxD,EAASv0E,IAGpCxO,KAAKqL,QAAQmB,iBAAiBu2E,EAAU,MAG1CV,EAAmB1hF,UAAU8hF,kBAAoB,WAC/C,IAAIM,EAAW,GAEf/iF,KAAKwL,aAAasC,QAAQ,SAAUvL,EAAOkO,GACzCsyE,EAAS30E,KAAKqC,KAGhBzQ,KAAKqL,QAAQmB,iBAAiBu2E,EAAU,IAExC/iF,KAAKwL,aAAa2gB,SAGpBk2D,EAAmBS,kBAAoB,IAAuB/8E,SAAS,CACrE2J,WAAY,EAGZC,UAAW,yBAEN0yE,EAhJT,GAmJIa,GAEJ,WACE,SAASA,KAmBT,OAjBAA,EAAWC,SAAW,SAAUlnC,GAC9B,IAAImnC,EACAr4D,EAEJ,IACE,IAAIM,EAAOg4D,KAAKzmC,MAAMX,GACtBmnC,EAAQ/3D,EAAK+3D,MACbr4D,EAAgBM,EAAKN,cACrB,MAAOpS,IAGT,MAAO,CACLyqE,MAAOA,GAAS,GAChBr4D,cAAeA,GAAiB,KAI7Bm4D,EApBT,GAwBWI,GAAsC,IAAI,KAAc,8BAA8B,GAK7F,GAEJ,SAAUv5E,GAGR,SAASw5E,EAAgB34E,EAAQ44E,EAA6BC,EAAYh0C,EAAci0C,EAA2Bpa,EAAuBqa,EAAkB7J,GAC1J,IAAI14E,EAAQ2I,EAAOE,KAAKjK,KAAM4K,EAAQ,CACpCogE,WAAW,EACXD,WAAW,EACX4D,cAAc,EACdvC,cAAc,KACVpsE,KAwBN,OAtBAoB,EAAMoiF,4BAA8BA,EACpCpiF,EAAMqiF,WAAaA,EACnBriF,EAAMsiF,0BAA4BA,EAClCtiF,EAAMkoE,sBAAwBA,EAC9BloE,EAAMuiF,iBAAmBA,EACzBviF,EAAM04E,UAAYA,EAClB14E,EAAMwiF,mBAAqB,GAC3BxiF,EAAMsnE,eAAiB,GACvBtnE,EAAMyiF,sBAAwB,IAAI,KAClCziF,EAAM0iF,KAAO,CACXhgE,OAAQ,EACRsS,MAAO,GAGTh1B,EAAMuvC,YAAYlB,EAAaM,YAE/B3uC,EAAMsnE,eAAet6D,KAAKqhC,EAAamB,cAAcxvC,EAAMuvC,YAAYE,KAAKzvC,KAE5EA,EAAMuiF,iBAAiBvU,mBAAmBxkE,EAAQxJ,GAElDA,EAAMf,SAECe,EAmZT,OAnbA,GAAUmiF,EAAiBx5E,GAmC3Bw5E,EAAgB5iF,UAAUc,QAAU,WAClCzB,KAAK+jF,cAAS/hF,GACdhC,KAAK0oE,eAAiB,YAAQ1oE,KAAK0oE,gBACnC,YAAQ1oE,KAAK2yE,SAAU3yE,KAAKgkF,4BAA6BhkF,KAAKikF,MAAOjkF,KAAKkkF,wBAE1ElkF,KAAKmkF,WAAW1iF,UAEhBsI,EAAOpJ,UAAUc,QAAQwI,KAAKjK,OAGhCujF,EAAgB5iF,UAAUgwC,YAAc,SAAU5gC,GAChD,IAAI8+B,EAAc9+B,EAAMG,SAASk0E,KAAmB,KAAMlJ,YAC1Dl7E,KAAK6rB,MAAM,CACTq/C,WAAYr8B,EACZo8B,WAAYp8B,EACZ6gC,sBAAuB3/D,EAAMG,SAASm0E,KAA4B,KAAMnJ,YACxEtL,oBAAqB7/D,EAAMG,SAASo0E,IACpCzU,sBAAuB9/D,EAAMG,SAASq0E,OAI1CnkF,OAAOM,eAAe6iF,EAAgB5iF,UAAW,uBAAwB,CACvEC,IAAK,WACH,OAAOZ,KAAK6jF,sBAAsBhjF,OAEpCC,YAAY,EACZC,cAAc,IAGhBwiF,EAAgB5iF,UAAUgiB,KAAO,SAAUqpD,GACzChsE,KAAK4K,OAAOy0B,qCAAqC2sC,EAAO,GAIxDjiE,EAAOpJ,UAAUgiB,KAAK1Y,KAAKjK,KAAMgsE,EAAOhsE,KAAKyjF,WAAW14D,eAAiB,KAG3Ew4D,EAAgB5iF,UAAU6U,MAAQ,WAChCxV,KAAKikF,MAAMO,YAGbjB,EAAgB5iF,UAAU4vE,cAAgB,SAAUrkE,GAC9ClM,KAAK2yE,UAAY3yE,KAAK2yE,SAAS7lE,YACjC9M,KAAK6jF,sBAAsB9hF,KAAK,CAC9BuvB,QAAStxB,KAAKykF,uBACdhpE,KAAMvP,EAAE2zB,SAAW3zB,EAAEw4E,SAAWx4E,EAAE0zB,OAAS,OAAS,OACpD4G,OAAQ,WAKd+8C,EAAgB5iF,UAAU0vE,UAAY,SAAUsU,GAC9C,IAAIvjF,EAAQpB,KAEZA,KAAKquE,YAAY,yBAEjBruE,KAAK4kF,kBAAoBxgE,GAAA,EAAWugE,EAAkBvgE,GAAA,EAAM,iBAC5DA,GAAA,EAASpkB,KAAK4kF,mBACd5kF,KAAKmkF,WAAa,IAAI,GAAUQ,EAAkB,CAChDt0B,YAAa,IAKfrwD,KAAK6kF,kBAAoBzgE,GAAA,EAAWugE,EAAkBvgE,GAAA,EAAM,uBAgB5DpkB,KAAK2yE,SAAW3yE,KAAKspE,sBAAsB+Q,eAAe,GAA0Br6E,KAAK6kF,kBAf3E,CACZC,sBAAsB,EACtBC,UAAW,CACTC,sBAAuB,GACvBC,WAAY,OACZC,YAAY,EACZC,mBAAmB,EACnBC,qBAAqB,GAEvBC,mBAAoB,EACpBC,sBAAsB,EACtBC,QAAS,CACPznD,SAAS,IAGwG99B,KAAK4K,QAC1HwZ,GAAA,EAASpkB,KAAK6kF,mBACd7kF,KAAKgkF,4BAA8B,IAAUwB,iBAAiB17E,EAAA,EAAa,wBAAyB,yBAEpG9J,KAAKylF,eAAiBrhE,GAAA,EAAWugE,EAAkBvgE,GAAA,EAAM,wBACzD,IAAIshE,EAAc,CAChB9jC,UAAW93C,EAAA,EAAa,gBAAiB,cACzC67E,gBAAiB3lF,KAAKwjF,4BACtBoC,sBAAuB,IAAI,GAC3BC,gCAAiC7lF,KAAKspE,sBAAsB+Q,eAAe,IAC3EyL,iBAAkB,IAAIlM,IAExB55E,KAAKikF,MAAQjkF,KAAKspE,sBAAsB+Q,eAAe,KAAwBr6E,KAAKylF,eAAgB,IAAI,GAAY,CAACzlF,KAAKspE,sBAAsB+Q,eAAe,IAAyBr6E,KAAKspE,sBAAsB+Q,eAAeb,KAAwBx5E,KAAKspE,sBAAsB+Q,eAAe,IAAaqL,GACjTpC,GAAoC9rE,OAAOxX,KAAKikF,MAAM7sE,mBAEtDpX,KAAKmkF,WAAWvH,QAAQ,CACtBr/D,YAAa,KAAMO,KACnBwT,QAAStxB,KAAK6kF,kBACdtH,YAAa,IACb+B,YAAa7jD,OAAOC,UACpB6oB,OAAQ,SAAgBnuB,GACtBh1B,EAAMuxE,SAASpuB,OAAO,CACpBzgC,OAAQ1iB,EAAM0iF,KAAKhgE,OACnBsS,MAAOA,MAGV2iD,GAAOoC,YAEVn7E,KAAKmkF,WAAWvH,QAAQ,CACtBr/D,YAAa,KAAMO,KACnBwT,QAAStxB,KAAKylF,eACdlI,YAAa,IACb+B,YAAa7jD,OAAOC,UACpB6oB,OAAQ,SAAgBnuB,GACtBh1B,EAAMqkF,eAAe55D,MAAM/H,OAAS1iB,EAAM0iF,KAAKhgE,OAAS,KACxD1iB,EAAMqkF,eAAe55D,MAAMuK,MAAQA,EAAQ,KAE3Ch1B,EAAM6iF,MAAM1/B,OAAOnjD,EAAM0iF,KAAKhgE,OAAQsS,KAEvC2iD,GAAOoC,YAEVn7E,KAAKmkF,WAAWtI,gBAAgB,WAC1Bz6E,EAAM0iF,KAAK1tD,QACbh1B,EAAMqiF,WAAWL,MAAQhiF,EAAM+iF,WAAW7G,YAAY,GAAKl8E,EAAM0iF,KAAK1tD,aAEvEp0B,EAAWhC,KAAKse,cAGnB,IAAIynE,EAAU,SAAiBz0D,EAAS7V,GAClC6V,aAAmB,KACR,SAAT7V,GACFra,EAAM4kF,iBAAiB10D,GAAS,GAGlClwB,EAAMyiF,sBAAsB9hF,KAAK,CAC/BuvB,QAASA,EACT7V,KAAMA,EACN+qB,OAAQ,WAKdxmC,KAAKikF,MAAMgC,iBAAiB,SAAU/5E,GACpC65E,EAAQ75E,EAAE00C,SAAS,GAAI,UAGzB5gD,KAAKikF,MAAMiC,qBAAqB,SAAUh6E,GACxC,IACIi6E,GAAQ,EAERj6E,EAAEk6E,wBAAwBC,gBAE5BF,GAAQ,GAMRJ,EAAQ75E,EAAE00C,SAAS,GADVulC,EACc,OAEA,UAI3BnmF,KAAKikF,MAAMqC,UAAU,SAAUp6E,GAC7B,IAAIq6E,EAAQr6E,EAAEk6E,wBAAwBI,aAAet6E,EAAEk6E,aAAavmD,SAAW3zB,EAAEk6E,aAAa1B,SAAWx4E,EAAEk6E,aAAaxmD,QAEpH6mD,GAAUv6E,EAAEk6E,cAAgBl6E,EAAEk6E,wBAAwBI,YAAwC,IAA1Bt6E,EAAEk6E,aAAankB,OAGrF8jB,EAAQ75E,EAAE00C,SAAS,GADjB2lC,EACqB,OACdE,EACc,OAEA,UAI3BriE,GAAA,EAASpkB,KAAKylF,iBAGhBlC,EAAgB5iF,UAAU6rE,SAAW,SAAUp2C,GACzCp2B,KAAK8jF,MACP9jF,KAAKuxE,cAAcvxE,KAAK8jF,KAAKhgE,OAAQsS,IAIzCmtD,EAAgB5iF,UAAU4wE,cAAgB,SAAU/C,EAAeD,GACjExkE,EAAOpJ,UAAU4wE,cAActnE,KAAKjK,KAAMwuE,EAAeD,GAEzDvuE,KAAK8jF,KAAO,CACVhgE,OAAQ0qD,EACRp4C,MAAOm4C,GAETvuE,KAAKyjF,WAAW14D,cAAgB/qB,KAAKiuB,UAAYjuB,KAAKiuB,UAAUlD,cAAgB/qB,KAAKyjF,WAAW14D,cAEhG/qB,KAAKmkF,WAAW5/B,OAAOgqB,GAEvBvuE,KAAKmkF,WAAW3D,WAAW,EAAGjS,EAAevuE,KAAKyjF,WAAWL,QAG/DG,EAAgB5iF,UAAU+pC,aAAe,SAAUx9B,GACjD,IAAI9L,EAAQpB,KAEZ,OAAOA,KAAKgmF,iBAAiB94E,GAAW,GAAM5J,KAAK,WAC5ClC,EAAMslB,SAMXtlB,EAAM6iF,MAAMv5C,aAAa,CAACx9B,IAE1B9L,EAAM6iF,MAAMyC,SAAS,CAACx5E,QAI1Bq2E,EAAgB5iF,UAAUojF,SAAW,SAAU4C,GAK7C,OAHA3mF,KAAK4jF,mBAAqB,YAAQ5jF,KAAK4jF,oBACvC5jF,KAAK0mB,OAASigE,EAEV3mF,KAAK0mB,OACA1mB,KAAK4mF,cAGPjqE,QAAQC,WAGjB2mE,EAAgB5iF,UAAUimF,YAAc,WACtC,IAAIxlF,EAAQpB,KAEZ,OAAKA,KAAK0mB,OAIN1mB,KAAK0mB,OAAOktD,OACd5zE,KAAKgxE,SAAS,IACdhxE,KAAK4kF,kBAAkBl5D,UAAY5hB,EAAA,EAAa,YAAa,cAC7Dsa,GAAA,EAASpkB,KAAK4kF,mBACPjoE,QAAQC,aAAQ5a,KAGzBoiB,GAAA,EAASpkB,KAAK4kF,mBACd5kF,KAAK6mF,oBAAsB,IAAI,GAAmB7mF,KAAK2yE,SAAU3yE,KAAK0mB,QAEtE1mB,KAAK4jF,mBAAmBx1E,KAAKpO,KAAK6mF,qBAGlC7mF,KAAK4jF,mBAAmBx1E,KAAKpO,KAAK0mB,OAAO2sD,0BAA0B,SAAUS,GAC3E,OAAO1yE,EAAM6iF,MAAM6C,SAAShT,MAI9B9zE,KAAK4jF,mBAAmBx1E,KAAKpO,KAAK2yE,SAAS3yC,YAAY,SAAU9zB,GAC/D,IAAIrL,EAAQqL,EAAErL,MACViC,EAASoJ,EAAEpJ,OAEf,GAAqB,IAAjBjC,EAAMohE,OAAV,CAIA,IAAI3wC,EAAUlwB,EAAMqjF,uBAEfnzD,GAILlwB,EAAMyiF,sBAAsB9hF,KAAK,CAC/BuvB,QAAS,CACPxS,IAAKwS,EAAQxS,IACbrR,MAAO3K,EAAO2K,OAEhBgO,KAAM5a,EAAMg/B,SAAWh/B,EAAM6jF,SAAW7jF,EAAM++B,OAAS,OAAS,OAChE4G,OAAQ,eAKZpiB,GAAA,EAAapkB,KAAKuhD,UAAW,kBAC7Bn9B,GAAA,EAASpkB,KAAKylF,gBACdrhE,GAAA,EAASpkB,KAAK6kF,mBAEd7kF,KAAKmkF,WAAW5/B,OAAOvkD,KAAK8jF,KAAK1tD,OAEjCp2B,KAAKwV,QAEExV,KAAKikF,MAAM8C,SAAuC,IAA9B/mF,KAAK0mB,OAAOqL,OAAOxlB,OAAevM,KAAK0mB,OAAOqL,OAAO,GAAK/xB,KAAK0mB,SAtDjF/J,QAAQC,aAAQ5a,IAyD3BuhF,EAAgB5iF,UAAU8jF,qBAAuB,WAC/C,IAAInzD,EAAUtxB,KAAKikF,MAAM+C,WAAW,GAEpC,OAAI11D,aAAmB,GACdA,EACEA,aAAmB,IACxBA,EAAQutB,SAAStyC,OAAS,EACrB+kB,EAAQutB,SAAS,QAFrB,GAST0kC,EAAgB5iF,UAAUqlF,iBAAmB,SAAUlS,EAAWmT,GAChE,OAAO,GAAUjnF,UAAM,OAAQ,EAAQ,WACrC,IAAIknF,EAASzT,EAAK5mE,EAAOs6E,EAAYC,EACrC,OAAO,GAAYpnF,KAAM,SAAU2Y,GACjC,OAAQA,EAAGzO,OACT,KAAK,EAEH,OAAIlK,KAAKqnF,qBAAuBvT,EACvB,CAAC,IAKV9zE,KAAKqnF,mBAAqBvT,EAEtBA,EAAUh1D,IAAIg5D,SAAW,KAAQwP,SACnCtnF,KAAKgxE,SAAS,aAAoB8C,EAAUh1D,KAAM9e,KAAK85E,UAAUE,YAAY,aAAQlG,EAAUh1D,OAE/F9e,KAAKgxE,SAASlnE,EAAA,EAAa,0BAA2B,eAGxDo9E,EAAUlnF,KAAK0jF,0BAA0B1Q,qBAAqBc,EAAUh1D,KAClE9e,KAAKikF,MAAMsD,aAAezT,EAAU1zB,OAAgB,CAAC,EAEzD,IAEFpgD,KAAKikF,MAAMpiB,OAAOiS,GAEX,CAAC,EAEN,KAEJ,KAAK,EAKH,OAJImT,GACFjnF,KAAKikF,MAAMpiB,OAAOiS,EAAU1zB,QAGvB,CAAC,EAENpgD,KAAKikF,MAAMuD,OAAO1T,EAAU1zB,SAEhC,KAAK,EACHznC,EAAGgJ,OAEH3hB,KAAKikF,MAAMpiB,OAAOiS,GAElBn7D,EAAGzO,MAAQ,EAEb,KAAK,EACH,MAAO,CAAC,EAENg9E,GAEJ,KAAK,EAGH,OAFAzT,EAAM96D,EAAGgJ,OAEJ3hB,KAAK0mB,QAQV,YAAQ1mB,KAAKkkF,yBACbr3E,EAAQ4mE,EAAIxB,SAGVkV,EAAannF,KAAK2yE,SAAS7lE,aAAeD,EAAMqlE,gBAAkB,EAEhE,EAGFkV,EAAM,KAAMhoE,KAAK00D,EAAUrmE,OAAOg6E,kBAClCznF,KAAKkkF,uBAAyBzQ,EAE9BzzE,KAAK2yE,SAASoR,SAASl3E,EAAMqlE,iBAE7BlyE,KAAK2yE,SAASjoC,aAAa08C,GAE3BpnF,KAAK2yE,SAAS+U,oBAAoBN,EAAKD,KAEvCnnF,KAAK2yE,SAASoR,SAAS/jF,KAAKgkF,6BAE5BvQ,EAAIhyE,WAGC,CAAC,KA7BNgyE,EAAIhyE,UACG,CAAC,UAoCpB8hF,EAAkB,GAAW,CAAC,GAAQ,EAAG,KAAgB,GAAQ,EAAG,MAAoB,GAAQ,EAAG,MAAwB,GAAQ,EAAGtU,IAAmB,GAAQ,EAAG,OAAiBsU,GAnbvL,CAqbE,IAISc,GAA0B,aAAc,2BAA4B,CAC7E16E,KAAM,UACNC,MAAO,UACPC,GAAI,WACHC,EAAA,EAAa,0BAA2B,kDAChCw6E,GAA0B,aAAc,gCAAiC,CAClF36E,KAAM,UACNC,MAAO,UACPC,GAAI,WACHC,EAAA,EAAa,0BAA2B,kCAChCy6E,GAA8B,aAAc,sCAAuC,CAC5F56E,KAAM,YACNC,MAAO,YACPC,GAAI,aACHC,EAAA,EAAa,8BAA+B,uCACpCs6E,GAAiB,aAAc,kBAAmB,CAC3Dz6E,KAAM,UACNC,MAAO,UACPC,GAAI,KACHC,EAAA,EAAa,iBAAkB,8CACvB69E,GAA4B,aAAc,4BAA6B,CAChFh+E,KAAM,UACNC,MAAO,UACPC,GAAI,KAAM+9E,OACT99E,EAAA,EAAa,4BAA6B,mDAClC+9E,GAAiC,aAAc,gCAAiC,CACzFl+E,KAAM,UACNC,MAAO,UACPC,GAAI,KAAM8lE,OACT7lE,EAAA,EAAa,iCAAkC,kEACvCg+E,GAAgC,aAAc,gCAAiC,CACxFn+E,KAAM,KAAMgmE,MACZ/lE,MAAO,UACPC,GAAI,KAAM8lE,OACT7lE,EAAA,EAAa,gCAAiC,kEACtCi+E,GAAqC,aAAc,qCAAsC,CAClGp+E,KAAM,YACNC,MAAO,YACPC,GAAI,MACHC,EAAA,EAAa,qCAAsC,yEAC3Ck+E,GAAqC,aAAc,qCAAsC,CAClGr+E,KAAM,KAAMgmE,MACZ/lE,MAAO,UACPC,GAAI,KAAM8lE,OACT7lE,EAAA,EAAa,qCAAsC,yEAC3Cm+E,GAA2B,aAAc,4BAA6B,CAC/Et+E,KAAM,UACNC,MAAO,UACPC,GAAI,KAAM+9E,OACT99E,EAAA,EAAa,2BAA4B,8CACjCo+E,GAAiC,aAAc,kCAAmC,CAC3Fv+E,KAAMs+E,GACNr+E,MAAOq+E,GACPp+E,GAAIo+E,IACHn+E,EAAA,EAAa,iCAAkC,4DACvCq+E,GAAgC,aAAc,0CAA2C,CAClGx+E,KAAM,YACNC,MAAO,YACPC,GAAI,MACHC,EAAA,EAAa,gCAAiC,wDACtCs+E,GAA+B,aAAc,0CAA2C,CACjGz+E,KAAM,YACNC,MAAO,YACPC,GAAI,MACHC,EAAA,EAAa,+BAAgC,mDACrCu+E,GAAqC,aAAc,sCAAuC,CACnG1+E,KAAM,KACNC,MAAO,KACPC,GAAI,KACHC,EAAA,EAAa,qCAAsC,oDACtD,YAA2B,SAAUiG,EAAOC,GAC1C,IAAIs4E,EAA0Bv4E,EAAMG,SAASi4E,IAEzCG,GACFt4E,EAAUG,QAAQ,uFAAyFm4E,EAA0B,OAGvI,IAAIC,EAA0Bx4E,EAAMG,SAASk4E,IAEzCG,GACFv4E,EAAUG,QAAQ,4FAA8Fo4E,EAA0B,OAG5I,IAAIC,EAA2Bz4E,EAAMG,SAASm4E,IAE1CG,GACFx4E,EAAUG,QAAQ,4FAA8Fq4E,EAA2B,+BAG7I,IAAIC,EAAY14E,EAAMG,SAAS,KAE3Bu4E,GACFz4E,EAAUG,QAAQ,wFAA0Fs4E,EAAY,+BAG1H,IAAIC,EAAoB34E,EAAMG,SAASy3E,IAEnCe,GACF14E,EAAUG,QAAQ,uEAAyEu4E,EAAoB,OAGjH,IAAIC,EAAyB54E,EAAMG,SAAS23E,IAExCc,GACF34E,EAAUG,QAAQ,4DAA8Dw4E,EAAyB,OAG3G,IAAIC,EAAwB74E,EAAMG,SAAS43E,IAEvCc,GACF54E,EAAUG,QAAQ,4EAA8Ey4E,EAAwB,OAG1H,IAAIC,EAA4B94E,EAAMG,SAAS63E,IAE3Cc,GACF74E,EAAUG,QAAQ,0JAA4J04E,EAA4B,OAG5M,IAAIC,EAA4B/4E,EAAMG,SAAS83E,IAE3Cc,GACF94E,EAAUG,QAAQ,+IAAiJ24E,EAA4B,kBAGjM,IAAIC,EAAmBh5E,EAAMG,SAAS+3E,IAElCc,GACF/4E,EAAUG,QAAQ,mMAAgN44E,EAAmB,MAGvP,IAAIC,EAAyBj5E,EAAMG,SAASg4E,IAExCc,GACFh5E,EAAUG,QAAQ,8FAAsG64E,EAAyB,QCj8BrJ,IAAI,GAAwC,SAAUxyE,EAAY1T,EAAQ2N,EAAKgG,GAC7E,IAEIxN,EAFAyN,EAAIC,UAAUpK,OACdqK,EAAIF,EAAI,EAAI5T,EAAkB,OAAT2T,EAAgBA,EAAOrW,OAAOyW,yBAAyB/T,EAAQ2N,GAAOgG,EAE/F,GAAuB,kBAAZK,SAAoD,oBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASP,EAAY1T,EAAQ2N,EAAKgG,QAAW,IAAK,IAAIjI,EAAIgI,EAAWjK,OAAS,EAAGiC,GAAK,EAAGA,KAC1KvF,EAAIuN,EAAWhI,MAAIoI,GAAKF,EAAI,EAAIzN,EAAE2N,GAAKF,EAAI,EAAIzN,EAAEnG,EAAQ2N,EAAKmG,GAAK3N,EAAEnG,EAAQ2N,KAASmG,GAE5F,OAAOF,EAAI,GAAKE,GAAKxW,OAAOM,eAAeoC,EAAQ2N,EAAKmG,GAAIA,GAG1D,GAAkC,SAAUK,EAAYC,GAC1D,OAAO,SAAUpU,EAAQ2N,GACvByG,EAAUpU,EAAQ2N,EAAKwG,KAIvB,GAAsC,SAAUyJ,EAASC,EAAYC,EAAGC,GAC1E,OAAO,IAAKD,IAAMA,EAAIjE,UAAU,SAAUC,EAASkE,GACjD,SAASC,EAAUxe,GACjB,IACEye,EAAKH,EAAUI,KAAK1e,IACpB,MAAO2J,GACP4U,EAAO5U,IAIX,SAASgV,EAAS3e,GAChB,IACEye,EAAKH,EAAiB,MAAEte,IACxB,MAAO2J,GACP4U,EAAO5U,IAIX,SAAS8U,EAAK3O,GACZA,EAAO8O,KAAOvE,EAAQvK,EAAO9P,OAAS,IAAIqe,EAAE,SAAUhE,GACpDA,EAAQvK,EAAO9P,SACde,KAAKyd,EAAWG,GAGrBF,GAAMH,EAAYA,EAAUP,MAAMI,EAASC,GAAc,KAAKM,WAI9D,GAA0C,SAAUP,EAASW,GAC/D,IASIC,EACAC,EACAC,EACAC,EAZAC,EAAI,CACNxX,MAAO,EACPyX,KAAM,WACJ,GAAW,EAAPH,EAAE,GAAQ,MAAMA,EAAE,GACtB,OAAOA,EAAE,IAEXI,KAAM,GACNC,IAAK,IAMP,OAAOJ,EAAI,CACTR,KAAMa,EAAK,GACX,MAASA,EAAK,GACd,OAAUA,EAAK,IACI,oBAAXC,SAA0BN,EAAEM,OAAOC,UAAY,WACvD,OAAOhiB,OACLyhB,EAEJ,SAASK,EAAKG,GACZ,OAAO,SAAUC,GACf,OAIJ,SAAcC,GACZ,GAAIb,EAAG,MAAM,IAAIc,UAAU,mCAE3B,KAAOV,GACL,IACE,GAAIJ,EAAI,EAAGC,IAAMC,EAAY,EAARW,EAAG,GAASZ,EAAU,OAAIY,EAAG,GAAKZ,EAAS,SAAOC,EAAID,EAAU,SAAMC,EAAEvX,KAAKsX,GAAI,GAAKA,EAAEN,SAAWO,EAAIA,EAAEvX,KAAKsX,EAAGY,EAAG,KAAKhB,KAAM,OAAOK,EAG3J,OAFID,EAAI,EAAGC,IAAGW,EAAK,CAAS,EAARA,EAAG,GAAQX,EAAEjf,QAEzB4f,EAAG,IACT,KAAK,EACL,KAAK,EACHX,EAAIW,EACJ,MAEF,KAAK,EAEH,OADAT,EAAExX,QACK,CACL3H,MAAO4f,EAAG,GACVhB,MAAM,GAGV,KAAK,EACHO,EAAExX,QACFqX,EAAIY,EAAG,GACPA,EAAK,CAAC,GACN,SAEF,KAAK,EACHA,EAAKT,EAAEG,IAAIQ,MAEXX,EAAEE,KAAKS,MAEP,SAEF,QACE,KAAkBb,GAAZA,EAAIE,EAAEE,MAAYrV,OAAS,GAAKiV,EAAEA,EAAEjV,OAAS,MAAkB,IAAV4V,EAAG,IAAsB,IAAVA,EAAG,IAAW,CACtFT,EAAI,EACJ,SAGF,GAAc,IAAVS,EAAG,MAAcX,GAAKW,EAAG,GAAKX,EAAE,IAAMW,EAAG,GAAKX,EAAE,IAAK,CACvDE,EAAExX,MAAQiY,EAAG,GACb,MAGF,GAAc,IAAVA,EAAG,IAAYT,EAAExX,MAAQsX,EAAE,GAAI,CACjCE,EAAExX,MAAQsX,EAAE,GACZA,EAAIW,EACJ,MAGF,GAAIX,GAAKE,EAAExX,MAAQsX,EAAE,GAAI,CACvBE,EAAExX,MAAQsX,EAAE,GAEZE,EAAEG,IAAIzT,KAAK+T,GAEX,MAGEX,EAAE,IAAIE,EAAEG,IAAIQ,MAEhBX,EAAEE,KAAKS,MAEP,SAGJF,EAAKd,EAAKpX,KAAKyW,EAASgB,GACxB,MAAOxV,GACPiW,EAAK,CAAC,EAAGjW,GACTqV,EAAI,EACJ,QACAD,EAAIE,EAAI,EAIZ,GAAY,EAARW,EAAG,GAAQ,MAAMA,EAAG,GACxB,MAAO,CACL5f,MAAO4f,EAAG,GAAKA,EAAG,QAAK,EACvBhB,MAAM,GAlFCH,CAAK,CAACiB,EAAGC,OAmGX+mE,GAA4B,IAAI,KAAc,0BAA0B,GAE/E,GAEJ,WACE,SAASC,EAAqB1F,EAA6B54E,EAAQwM,EAAmB+xE,EAAgBl6D,EAAsBq6C,EAAuBhX,EAAiBl+B,GAClKp0B,KAAKwjF,4BAA8BA,EACnCxjF,KAAKmpF,eAAiBA,EACtBnpF,KAAKivB,qBAAuBA,EAC5BjvB,KAAKspE,sBAAwBA,EAC7BtpE,KAAKsyD,gBAAkBA,EACvBtyD,KAAKo0B,sBAAwBA,EAC7Bp0B,KAAKopF,eAAiB,EACtBppF,KAAKse,aAAe,GACpBte,KAAKqpF,yBAA0B,EAC/BrpF,KAAKqL,QAAUT,EACf5K,KAAKspF,wBAA0BL,GAA0BzxE,OAAOJ,GA+RlE,OA5RA8xE,EAAqBtoF,IAAM,SAAUgK,GACnC,OAAOA,EAAO6B,gBAAgBy8E,EAAqBx8E,KAGrDw8E,EAAqBvoF,UAAUgM,MAAQ,WACrC,OAAOu8E,EAAqBx8E,IAG9Bw8E,EAAqBvoF,UAAUc,QAAU,WACvCzB,KAAKspF,wBAAwB1xE,QAE7B,YAAQ5X,KAAKse,cAETte,KAAKw0D,UACP,YAAQx0D,KAAKw0D,SACbx0D,KAAKw0D,QAAU,MAGbx0D,KAAK0mB,SACP,YAAQ1mB,KAAK0mB,QACb1mB,KAAK0mB,OAAS,OAIlBwiE,EAAqBvoF,UAAU4oF,aAAe,SAAU97E,EAAO+7E,EAAcrnF,GAC3E,IAGIsnF,EAHAroF,EAAQpB,KAWZ,GANIA,KAAKw0D,UACPi1B,EAAiBzpF,KAAKw0D,QAAQtpD,UAGhClL,KAAK0pF,eAECD,IAAkBh8E,EAAMH,iBAAiBm8E,GAA/C,CAIAzpF,KAAKspF,wBAAwBtxE,KAAI,GAGjChY,KAAKse,aAAalQ,KAAKpO,KAAKqL,QAAQ2U,yBAAyB,WAC3D5e,EAAMsoF,iBAGR1pF,KAAKse,aAAalQ,KAAKpO,KAAKqL,QAAQe,iBAAiB,WAC9ChL,EAAMioF,yBACTjoF,EAAMsoF,iBAIV,IACIr+D,EAAO63D,GAAWC,SAASnjF,KAAKsyD,gBAAgB1xD,IADnC,iBACmD,EAElE,OACFZ,KAAKw0D,QAAUx0D,KAAKspE,sBAAsB+Q,eAAe,GAAiBr6E,KAAKqL,QAASrL,KAAKwjF,4BAA6Bn4D,GAE1HrrB,KAAKw0D,QAAQwc,SAASlnE,EAAA,EAAa,eAAgB,eAEnD9J,KAAKw0D,QAAQ7xC,KAAKlV,GAElBzN,KAAKse,aAAalQ,KAAKpO,KAAKw0D,QAAQ8a,WAAW,WAC7Cka,EAAa/rE,SAETrc,EAAMozD,UACRpzD,EAAMkxD,gBAAgBc,MAdT,iBAc2BiwB,KAAKsG,UAAUvoF,EAAMozD,QAAQivB,YAAa,GAIlFriF,EAAMozD,QAAU,MAGlBpzD,EAAMsoF,iBAGR1pF,KAAKse,aAAalQ,KAAKpO,KAAKw0D,QAAQo1B,qBAAqB,SAAU/oF,GACjE,IAAIywB,EAAUzwB,EAAMywB,QAChB7V,EAAO5a,EAAM4a,KAEjB,OAAQA,GACN,IAAK,OACH,GAAqB,WAAjB5a,EAAM2lC,QAAuBplC,EAAMgzB,sBAAsBY,SAAS,qBAGpE,MAGJ,IAAK,OACC1D,GACFlwB,EAAMyoF,cAAcv4D,EAAkB,SAAT7V,GAG/B,MAEF,IAAK,OACC6V,IACEnvB,EAAQ2nF,OACV3nF,EAAQ2nF,OAAOx4D,GAEflwB,EAAM2oF,eAAez4D,QAQ/B,IAAI04D,IAAchqF,KAAKopF,eACvBI,EAAalmF,KAAK,SAAUuJ,GAE1B,GAAIm9E,IAAc5oF,EAAMgoF,gBAAmBhoF,EAAMozD,QAUjD,OANIpzD,EAAMslB,QACRtlB,EAAMslB,OAAOjlB,UAGfL,EAAMslB,OAAS7Z,EAERzL,EAAMozD,QAAQuvB,SAAS3iF,EAAMslB,QAAQpjB,KAAK,WAC/C,GAAIlC,EAAMozD,SAAWpzD,EAAMslB,QAAUtlB,EAAMiK,QAAQuB,WAAY,CAG7DxL,EAAMozD,QAAQ2c,aAAahvE,EAAQ8nF,aAAa7oF,EAAMslB,SAGtD,IAAI5H,EAAM1d,EAAMiK,QAAQyB,WAAWgS,IAE/BoJ,EAAM,IAAI,IAASza,EAAMQ,gBAAiBR,EAAMS,aAEhDhB,EAAY9L,EAAMslB,OAAOwtD,iBAAiBp1D,EAAKoJ,GAEnD,GAAIhb,EACF,OAAO9L,EAAMozD,QAAQ9pB,aAAax9B,OAMvC,SAAUukB,GACXrwB,EAAM6tB,qBAAqBwC,MAAMA,OAIrCy3D,EAAqBvoF,UAAUupF,4BAA8B,SAAUC,GACrE,OAAO,GAAUnqF,UAAM,OAAQ,EAAQ,WACrC,IAAIoqF,EAAiB5jD,EAAQ1jC,EAAQunF,EACrC,OAAO,GAAYrqF,KAAM,SAAU2Y,GACjC,OAAQA,EAAGzO,OACT,KAAK,EACH,OAAKlK,KAAKqL,QAAQuB,YAAe5M,KAAK0mB,QAAW1mB,KAAKw0D,WAOtD41B,EAAkBpqF,KAAKw0D,QAAQtpD,YAQ/Bs7B,EAASxmC,KAAK0mB,OAAOwtD,iBAAiBl0E,KAAKqL,QAAQyB,WAAWgS,IAAKsrE,MAQnEtnF,EAAS9C,KAAK0mB,OAAOmtD,wBAAwBrtC,EAAQ2jD,GACrDE,EAAcrqF,KAAKqL,QAAQgK,eACpB,CAAC,EAENrV,KAAKw0D,QAAQ9pB,aAAa5nC,KAzBnB,CAAC,GA2BZ,KAAK,EAGH,OAFA6V,EAAGgJ,OAEI,CAAC,EAEN3hB,KAAK+pF,eAAejnF,IAExB,KAAK,EAOH,OANA6V,EAAGgJ,OAEC0oE,GACFrqF,KAAKqL,QAAQmK,QAGR,CAAC,SAQlB0zE,EAAqBvoF,UAAU+oF,YAAc,WACvC1pF,KAAKw0D,UACP,YAAQx0D,KAAKw0D,SACbx0D,KAAKw0D,QAAU,MAGjBx0D,KAAKspF,wBAAwB1xE,QAE7B5X,KAAKse,aAAe,YAAQte,KAAKse,cAE7Bte,KAAK0mB,SACP,YAAQ1mB,KAAK0mB,QACb1mB,KAAK0mB,OAAS,MAGhB1mB,KAAKqL,QAAQmK,QAEbxV,KAAKopF,gBAAkB,GAGzBF,EAAqBvoF,UAAUopF,eAAiB,SAAUtW,GACxD,IAAIryE,EAAQpB,KAERA,KAAKw0D,SACPx0D,KAAKw0D,QAAQ7vC,OAGf3kB,KAAKqpF,yBAA0B,EAC/B,IAAI57E,EAAQ,KAAM2R,KAAKq0D,EAAIhmE,OAAOg6E,kBAClC,OAAOznF,KAAKmpF,eAAemB,eAAe,CACxC3sE,SAAU81D,EAAI30D,IACd3c,QAAS,CACP+K,UAAWO,IAEZzN,KAAKqL,SAAS/H,KAAK,SAAUinF,GAC9BnpF,EAAMioF,yBAA0B,EAE3BkB,GAAgBA,IAAiBnpF,EAAMiK,QAaxCjK,EAAMozD,UACRpzD,EAAMozD,QAAQ7xC,KAAKlV,GAEnBrM,EAAMozD,QAAQh/C,SARdpU,EAAMsoF,eAUP,SAAUrsE,GACXjc,EAAMioF,yBAA0B,EAChC,aAAkBhsE,MAItB6rE,EAAqBvoF,UAAUkpF,cAAgB,SAAUpW,EAAK+W,GAEvDA,GACHxqF,KAAK0pF,cAGP,IAAI5qE,EAAM20D,EAAI30D,IACVrR,EAAQgmE,EAAIhmE,MAEhBzN,KAAKmpF,eAAemB,eAAe,CACjC3sE,SAAUmB,EACV3c,QAAS,CACP+K,UAAWO,IAEZzN,KAAKqL,QAASm/E,IAGnBtB,EAAqBx8E,GAAK,sCAC1Bw8E,EAAuB,GAAW,CAAC,GAAQ,EAAG,MAAqB,GAAQ,EAAG,MAAqB,GAAQ,EAAG,MAAuB,GAAQ,EAAG,MAAwB,GAAQ,EAAG,MAAkB,GAAQ,EAAG,OAAyBA,GA1S3O,GCrKA,SAASuB,GAAe59E,EAAO3B,EAAUw/E,EAAUC,GACjD,IAEIjuE,EAFWguE,EAAS1gE,QAAQnd,GAERI,IAAI,SAAUmP,GACpC,OAAOO,QAAQC,QAAQ+tE,EAAQvuE,EAAUvP,EAAO3B,IAAW5H,UAAKtB,EAAW,SAAUqb,GACnF,aAA0BA,OAI9B,OAAOV,QAAQR,IAAIO,GAAUpZ,KAAK,MAASA,KAAK,MAG3C,SAASsnF,GAAyB/9E,EAAO3B,EAAU2Q,GACxD,OAAO4uE,GAAe59E,EAAO3B,EAAU,KAA4B,SAAUkR,EAAUvP,EAAO3B,GAC5F,OAAOkR,EAASyuE,kBAAkBh+E,EAAO3B,EAAU2Q,KAGhD,SAASivE,GAA0Bj+E,EAAO3B,EAAU2Q,GACzD,OAAO4uE,GAAe59E,EAAO3B,EAAU,KAA6B,SAAUkR,EAAUvP,EAAO3B,GAC7F,OAAOkR,EAAS2uE,mBAAmBl+E,EAAO3B,EAAU2Q,KAGjD,SAASmvE,GAA6Bn+E,EAAO3B,EAAU2Q,GAC5D,OAAO4uE,GAAe59E,EAAO3B,EAAU,KAAgC,SAAUkR,EAAUvP,EAAO3B,GAChG,OAAOkR,EAAS6uE,sBAAsBp+E,EAAO3B,EAAU2Q,KAGpD,SAASqvE,GAA6Br+E,EAAO3B,EAAU2Q,GAC5D,OAAO4uE,GAAe59E,EAAO3B,EAAU,KAAgC,SAAUkR,EAAUvP,EAAO3B,GAChG,OAAOkR,EAAS+uE,sBAAsBt+E,EAAO3B,EAAU2Q,KAG3D,YAA+B,6BAA8B,SAAUhP,EAAO3B,GAC5E,OAAO0/E,GAAyB/9E,EAAO3B,EAAU,KAAkB4S,QAErE,YAA+B,8BAA+B,SAAUjR,EAAO3B,GAC7E,OAAO4/E,GAA0Bj+E,EAAO3B,EAAU,KAAkB4S,QAEtE,YAA+B,iCAAkC,SAAUjR,EAAO3B,GAChF,OAAO8/E,GAA6Bn+E,EAAO3B,EAAU,KAAkB4S,QAEzE,YAA+B,iCAAkC,SAAUjR,EAAO3B,GAChF,OAAOggF,GAA6Br+E,EAAO3B,EAAU,KAAkB4S,QChDzE,IAAI,GAAsC,WACxC,IAAI9U,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA0BtC,GAAsC,SAAUkX,EAASC,EAAYC,EAAGC,GAC1E,OAAO,IAAKD,IAAMA,EAAIjE,UAAU,SAAUC,EAASkE,GACjD,SAASC,EAAUxe,GACjB,IACEye,EAAKH,EAAUI,KAAK1e,IACpB,MAAO2J,GACP4U,EAAO5U,IAIX,SAASgV,EAAS3e,GAChB,IACEye,EAAKH,EAAiB,MAAEte,IACxB,MAAO2J,GACP4U,EAAO5U,IAIX,SAAS8U,EAAK3O,GACZA,EAAO8O,KAAOvE,EAAQvK,EAAO9P,OAAS,IAAIqe,EAAE,SAAUhE,GACpDA,EAAQvK,EAAO9P,SACde,KAAKyd,EAAWG,GAGrBF,GAAMH,EAAYA,EAAUP,MAAMI,EAASC,GAAc,KAAKM,WAI9D,GAA0C,SAAUP,EAASW,GAC/D,IASIC,EACAC,EACAC,EACAC,EAZAC,EAAI,CACNxX,MAAO,EACPyX,KAAM,WACJ,GAAW,EAAPH,EAAE,GAAQ,MAAMA,EAAE,GACtB,OAAOA,EAAE,IAEXI,KAAM,GACNC,IAAK,IAMP,OAAOJ,EAAI,CACTR,KAAMa,EAAK,GACX,MAASA,EAAK,GACd,OAAUA,EAAK,IACI,oBAAXC,SAA0BN,EAAEM,OAAOC,UAAY,WACvD,OAAOhiB,OACLyhB,EAEJ,SAASK,EAAKG,GACZ,OAAO,SAAUC,GACf,OAIJ,SAAcC,GACZ,GAAIb,EAAG,MAAM,IAAIc,UAAU,mCAE3B,KAAOV,GACL,IACE,GAAIJ,EAAI,EAAGC,IAAMC,EAAY,EAARW,EAAG,GAASZ,EAAU,OAAIY,EAAG,GAAKZ,EAAS,SAAOC,EAAID,EAAU,SAAMC,EAAEvX,KAAKsX,GAAI,GAAKA,EAAEN,SAAWO,EAAIA,EAAEvX,KAAKsX,EAAGY,EAAG,KAAKhB,KAAM,OAAOK,EAG3J,OAFID,EAAI,EAAGC,IAAGW,EAAK,CAAS,EAARA,EAAG,GAAQX,EAAEjf,QAEzB4f,EAAG,IACT,KAAK,EACL,KAAK,EACHX,EAAIW,EACJ,MAEF,KAAK,EAEH,OADAT,EAAExX,QACK,CACL3H,MAAO4f,EAAG,GACVhB,MAAM,GAGV,KAAK,EACHO,EAAExX,QACFqX,EAAIY,EAAG,GACPA,EAAK,CAAC,GACN,SAEF,KAAK,EACHA,EAAKT,EAAEG,IAAIQ,MAEXX,EAAEE,KAAKS,MAEP,SAEF,QACE,KAAkBb,GAAZA,EAAIE,EAAEE,MAAYrV,OAAS,GAAKiV,EAAEA,EAAEjV,OAAS,MAAkB,IAAV4V,EAAG,IAAsB,IAAVA,EAAG,IAAW,CACtFT,EAAI,EACJ,SAGF,GAAc,IAAVS,EAAG,MAAcX,GAAKW,EAAG,GAAKX,EAAE,IAAMW,EAAG,GAAKX,EAAE,IAAK,CACvDE,EAAExX,MAAQiY,EAAG,GACb,MAGF,GAAc,IAAVA,EAAG,IAAYT,EAAExX,MAAQsX,EAAE,GAAI,CACjCE,EAAExX,MAAQsX,EAAE,GACZA,EAAIW,EACJ,MAGF,GAAIX,GAAKE,EAAExX,MAAQsX,EAAE,GAAI,CACvBE,EAAExX,MAAQsX,EAAE,GAEZE,EAAEG,IAAIzT,KAAK+T,GAEX,MAGEX,EAAE,IAAIE,EAAEG,IAAIQ,MAEhBX,EAAEE,KAAKS,MAEP,SAGJF,EAAKd,EAAKpX,KAAKyW,EAASgB,GACxB,MAAOxV,GACPiW,EAAK,CAAC,EAAGjW,GACTqV,EAAI,EACJ,QACAD,EAAIE,EAAI,EAIZ,GAAY,EAARW,EAAG,GAAQ,MAAMA,EAAG,GACxB,MAAO,CACL5f,MAAO4f,EAAG,GAAKA,EAAG,QAAK,EACvBhB,MAAM,GAlFCH,CAAK,CAACiB,EAAGC,OA6GlBkpE,GAEJ,WAwBE,OAvBA,SAAgCC,EAAYC,EAAYC,EAAe1zE,QAClD,IAAfwzE,IACFA,GAAa,QAGI,IAAfC,IACFA,GAAa,QAGO,IAAlBC,IACFA,GAAgB,QAGE,IAAhB1zE,IACFA,GAAc,GAGhB7X,KAAKqrF,WAAaA,EAClBrrF,KAAKsrF,WAAaA,EAClBtrF,KAAKurF,cAAgBA,EACrBvrF,KAAK6X,YAAcA,GArBvB,GA6BI,GAEJ,SAAU9N,GAGR,SAASyhF,EAAiBC,EAAe/4E,GACvC,IAAItR,EAAQ2I,EAAOE,KAAKjK,KAAM0S,IAAS1S,KAGvC,OADAoB,EAAMsqF,eAAiBD,EAChBrqF,EAsMT,OA5MA,GAAUoqF,EAAkBzhF,GAS5ByhF,EAAiB7qF,UAAU+J,IAAM,SAAUC,EAAUC,GACnD,IAAIxJ,EAAQpB,KAEZ,IAAK4K,EAAOgC,WACV,OAAO+P,QAAQC,aAAQ5a,GAGzB,IAAIqoE,EAAsB1/D,EAAS/J,IAAI,MACnC+qF,EAAgBhhF,EAAS/J,IAAI,MAC7BylB,EAAkB1b,EAAS/J,IAAI,MAC/BiM,EAAQjC,EAAOkC,WACfob,EAAMtd,EAAOkJ,cACbmI,EAAM,IAAI,KAAmCrR,EAAQ,GAMrDghF,EAAoB5rF,KAAK6rF,8BAA8Bh/E,EAAOqb,EAAKjM,EAAIJ,OAAOvY,KAAK,SAAU6vE,GAC/F,OAAO,GAAU/xE,OAAO,OAAQ,EAAQ,WACtC,IAAI0qF,EAAcz5E,EAAQO,EAAI4gE,EAAcM,EAAWiY,EAAQ1f,EAAMrtB,EAErE,OAAO,GAAYh/C,KAAM,SAAU2Y,GACjC,GAAIsD,EAAIJ,MAAMkB,yBAA2BlQ,EAAMm/E,cAAgBphF,EAAOkC,aAAeD,EAEnF,MAAO,CAAC,GAQV,IAHAi/E,GAAgB,EAChBz5E,EAAS,GAEJO,EAAK,EAAG4gE,EAAeL,EAAYvgE,EAAK4gE,EAAajnE,OAAQqG,KAChEkhE,EAAYN,EAAa5gE,KAENkhE,EAAUrmE,QAI7Bs+E,EAAS15E,EAAOjE,KAAK0lE,GAEjB9zE,KAAK0rF,eAAeH,eAAiBzX,EAAUh1D,IAAIvd,aAAesL,EAAMiS,IAAIvd,YAAc,KAAM+L,iBAAiBwmE,EAAUrmE,MAAOya,KAA0B,IAAlB4jE,IAC5IA,EAAeC,EAAS,IAI5B,OAAsB,IAAlB15E,EAAO9F,OAMkB,IAAlB8F,EAAO9F,SAAkC,IAAlBu/E,GAChC9sC,EAAU3sC,EAAO,GACV,CAAC,EAENrS,KAAKisF,eAAerhF,EAAQ+gF,EAAe3sC,GAAS,GAAO17C,KAAK,gBAK3D,CAAC,EAENtD,KAAKksF,UAAUP,EAAe/gF,EAAQ,IAAI,GAAgByH,MAfxDrS,KAAK0rF,eAAe7zE,cACtBw0D,EAAOx/D,EAAMklD,kBAAkB7pC,GAC/B,GAAkBtnB,IAAIgK,GAAQiN,YAAY7X,KAAKmsF,yBAAyB9f,GAAOnkD,IAgB5E,CAAC,SAKX,SAAU7K,GAEXgtD,EAAoB54C,MAAMpU,KACzBK,QAAQ,WACTzB,EAAIxa,YAIN,OADA4kB,EAAgB5G,UAAUmsE,EAAmB,KACtCA,GAGTJ,EAAiB7qF,UAAUkrF,8BAAgC,SAAUh/E,EAAO3B,EAAU2Q,GACpF,OAAO+uE,GAAyB/9E,EAAO3B,EAAU2Q,IAGnD2vE,EAAiB7qF,UAAUwrF,yBAA2B,SAAU9f,GAC9D,OAAOA,GAAQA,EAAKra,KAAOloD,EAAA,EAAa,eAAgB,gCAAiCuiE,EAAKra,MAAQloD,EAAA,EAAa,oBAAqB,wBAG1I0hF,EAAiB7qF,UAAUyrF,cAAgB,SAAUv/E,GACnD,OAAOA,EAAMsmE,WAAW5mE,OAAS,EAAIzC,EAAA,EAAa,aAAc,0BAAsB+C,EAAMsmE,WAAW5mE,QAAU,IAGnHi/E,EAAiB7qF,UAAUurF,UAAY,SAAUP,EAAe/gF,EAAQiC,GACtE,OAAO,GAAU7M,UAAM,OAAQ,EAAQ,WACrC,IAAIqsF,EAAKC,EAAcrrE,EAAMsrE,EAC7B,OAAO,GAAYvsF,KAAM,SAAU2Y,GACjC,OAAQA,EAAGzO,OACT,KAAK,EAIH,OAHAmiF,EAAMx/E,EAAMglE,iBACZ,aAAMwa,GACNC,EAAe1hF,EAAOiB,mBAAmBC,YAAYwgF,aAC/CtsF,KAAK0rF,eAAeJ,YAAwC,SAA1BgB,EAAaE,UAAuB3/E,EAAMsmE,WAAW5mE,OAAS,GAItGvM,KAAKysF,YAAYd,EAAe/gF,EAAQiC,GAEjC,CAAC,EAEN,IAR+G,CAAC,EAEhH,GAQJ,KAAK,EACH,OAAKjC,EAAOgC,YAGZqU,EAAOpU,EAAM0nE,kBAQN,CAAC,EAENv0E,KAAKisF,eAAerhF,EAAQ+gF,EAAe1qE,EAAMjhB,KAAK0rF,eAAeL,aAP9D,CAAC,GANqB,CAAC,EAE9B,GAaJ,KAAK,GACHkB,EAAe5zE,EAAGgJ,SAEE9U,EAAMsmE,WAAW5mE,OAAS,GAA+B,gBAA1B+/E,EAAaE,SAC9DxsF,KAAKysF,YAAYd,EAAeY,EAAc1/E,GAE9CA,EAAMpL,UAGRkX,EAAGzO,MAAQ,EAEb,KAAK,EACH,MAAO,CAAC,SAQlBshF,EAAiB7qF,UAAUsrF,eAAiB,SAAUrhF,EAAQ+gF,EAAe7X,EAAW0W,GAGtF,IAAI/8E,OAAQzL,EAUZ,OARI,aAAe8xE,KACjBrmE,EAAQqmE,EAAUH,sBAGflmE,IACHA,EAAQqmE,EAAUrmE,OAGbk+E,EAAcrB,eAAe,CAClC3sE,SAAUm2D,EAAUh1D,IACpB3c,QAAS,CACP+K,UAAW,KAAMu6E,gBAAgBh6E,GACjCi/E,gBAAgB,EAChBC,iCAAiC,IAElC/hF,EAAQ4/E,IAGbgB,EAAiB7qF,UAAU8rF,YAAc,SAAUd,EAAe7oF,EAAQ+J,GACxE,IAAIzL,EAAQpB,KAER6K,EAAa,GAAqBjK,IAAIkC,GAEtC+H,GAAc/H,EAAO8J,WACvB/B,EAAW0+E,aAAazmF,EAAOkT,eAAgB,YAAwB,SAAU0L,GAC/E,OAAO/E,QAAQC,QAAQ/P,KACrB,CACFo9E,aAAc,SAAsBp9E,GAClC,OAAOzL,EAAMgrF,cAAcv/E,IAE7Bi9E,OAAQ,SAAgBhW,GAEtB,OADAjpE,EAAW6+E,cACJtoF,EAAM6qF,eAAenpF,EAAQ6oF,EAAe7X,GAAW,MAIlEjnE,EAAMpL,WAIH+pF,EA7MT,CA8ME,KAGEoB,GAAmBp4E,GAAA,EAAiB,KAItC,GAIE,GAEJ,SAAUzK,GAGR,SAAS8iF,IACP,IAAIzrF,EAAQ2I,EAAOE,KAAKjK,KAAM,IAAIorF,GAA0B,CAC1DplF,GAAI6mF,EAAqB7mF,GACzBkE,MAAOJ,EAAA,EAAa,yBAA0B,oBAC9CK,MAAO,mBACPC,aAAc,KAAege,IAAI,IAAkB0kE,sBAAuB,IAAkBC,mBAAmBtd,aAC/GplE,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAASoiF,GACTniF,OAAQ,KAIVmL,SAAU,CACRtF,MAAO,aACPK,MAAO,QAEL3Q,KAGN,OADA,KAAiBgtF,qBAAqB,gCAAiCH,EAAqB7mF,IACrF5E,EAIT,OA1BA,GAAUyrF,EAAsB9iF,GAyBhC8iF,EAAqB7mF,GAAK,iCACnB6mF,EA3BT,CA4BE,IAIE,GAEJ,SAAU9iF,GAGR,SAASkjF,IACP,IAAI7rF,EAAQ2I,EAAOE,KAAKjK,KAAM,IAAIorF,IAAuB,GAAO,CAC9DplF,GAAIinF,EAA2BjnF,GAC/BkE,MAAOJ,EAAA,EAAa,+BAAgC,+BACpDK,MAAO,8BACPC,aAAc,KAAege,IAAI,IAAkB0kE,sBAAuB,IAAkBC,mBAAmBtd,aAC/GplE,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,aAAS,KAIhBoiF,IACFniF,OAAQ,QAINzK,KAGN,OADA,KAAiBgtF,qBAAqB,yCAA0CC,EAA2BjnF,IACpG5E,EAIT,OA1BA,GAAU6rF,EAA4BljF,GAyBtCkjF,EAA2BjnF,GAAK,sCACzBinF,EA3BT,CA4BE,IAIE,GAEJ,SAAUljF,GAGR,SAASmjF,IACP,IAAI9rF,EAAQ2I,EAAOE,KAAKjK,KAAM,IAAIorF,QAAuBppF,GAAW,GAAM,GAAQ,CAChFgE,GAAIknF,EAAqBlnF,GACzBkE,MAAOJ,EAAA,EAAa,4BAA6B,mBACjDK,MAAO,kBACPC,aAAc,KAAege,IAAI,IAAkB0kE,sBAAuB,GAAYtd,gBAAiB,IAAkBud,mBAAmBtd,aAC5IplE,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,IAKT0xB,MAAO,CACL1xB,QAAS,MAQXC,OAAQ,KAIVmL,SAAU,CACRtF,MAAO,aACPK,MAAO,QAEL3Q,KAGN,OADA,KAAiBgtF,qBAAqB,mCAAoCE,EAAqBlnF,IACxF5E,EAIT,OAvCA,GAAU8rF,EAAsBnjF,GAsChCmjF,EAAqBlnF,GAAK,+BACnBknF,EAxCT,CAyCE,IAIE,GAEJ,SAAUnjF,GAGR,SAASojF,IACP,OAAkB,OAAXpjF,GAAmBA,EAAOuW,MAAMtgB,KAAM2W,YAAc3W,KAe7D,OAlBA,GAAUmtF,EAAmBpjF,GAM7BojF,EAAkBxsF,UAAUkrF,8BAAgC,SAAUh/E,EAAO3B,EAAU2Q,GACrF,OAAOivE,GAA0Bj+E,EAAO3B,EAAU2Q,IAGpDsxE,EAAkBxsF,UAAUwrF,yBAA2B,SAAU9f,GAC/D,OAAOA,GAAQA,EAAKra,KAAOloD,EAAA,EAAa,oBAAqB,iCAAkCuiE,EAAKra,MAAQloD,EAAA,EAAa,yBAA0B,yBAGrJqjF,EAAkBxsF,UAAUyrF,cAAgB,SAAUv/E,GACpD,OAAOA,EAAMsmE,WAAW5mE,OAAS,EAAIzC,EAAA,EAAa,kBAAmB,2BAAuB+C,EAAMsmE,WAAW5mE,QAAU,IAGlH4gF,EAnBT,CAoBE,IAIE,GAEJ,SAAUpjF,GAGR,SAASqjF,IACP,OAAOrjF,EAAOE,KAAKjK,KAAM,IAAIorF,GAA0B,CACrDplF,GAAIonF,EAAsBpnF,GAC1BkE,MAAOJ,EAAA,EAAa,gCAAiC,qBACrDK,MAAO,oBACPC,aAAc,KAAege,IAAI,IAAkBilE,uBAAwB,IAAkBN,mBAAmBtd,aAChH75D,SAAU,CACRtF,MAAO,aACPK,MAAO,QAEL3Q,KAYR,OAxBA,GAAUotF,EAAuBrjF,GAejCqjF,EAAsBzsF,UAAUwrF,yBAA2B,SAAU9f,GACnE,OAAOA,GAAQA,EAAKra,KAAOloD,EAAA,EAAa,oBAAqB,iCAAkCuiE,EAAKra,MAAQloD,EAAA,EAAa,yBAA0B,yBAGrJsjF,EAAsBzsF,UAAUyrF,cAAgB,SAAUv/E,GACxD,OAAOA,EAAMsmE,WAAW5mE,OAAS,EAAIzC,EAAA,EAAa,kBAAmB,2BAAuB+C,EAAMsmE,WAAW5mE,QAAU,IAGzH6gF,EAAsBpnF,GAAK,kCACpBonF,EAzBT,CA0BE,IAIE,GAEJ,SAAUrjF,GAGR,SAASujF,IACP,OAAOvjF,EAAOE,KAAKjK,KAAM,IAAIorF,QAAuBppF,GAAW,GAAM,GAAQ,CAC3EgE,GAAI,gCACJkE,MAAOJ,EAAA,EAAa,yBAA0B,oBAC9CK,MAAO,mBACPC,aAAc,KAAege,IAAI,IAAkBilE,uBAAwB,GAAY7d,gBAAiB,IAAkBud,mBAAmBtd,aAC7I75D,SAAU,CACRtF,MAAO,aACPK,MAAO,SAEL3Q,KAGR,OAfA,GAAUstF,EAAuBvjF,GAe1BujF,EAhBT,CAiBE,IAIE,GAEJ,SAAUvjF,GAGR,SAASwjF,IACP,OAAkB,OAAXxjF,GAAmBA,EAAOuW,MAAMtgB,KAAM2W,YAAc3W,KAe7D,OAlBA,GAAUutF,EAAsBxjF,GAMhCwjF,EAAqB5sF,UAAUkrF,8BAAgC,SAAUh/E,EAAO3B,EAAU2Q,GACxF,OAAOmvE,GAA6Bn+E,EAAO3B,EAAU2Q,IAGvD0xE,EAAqB5sF,UAAUwrF,yBAA2B,SAAU9f,GAClE,OAAOA,GAAQA,EAAKra,KAAOloD,EAAA,EAAa,kCAAmC,oCAAqCuiE,EAAKra,MAAQloD,EAAA,EAAa,uCAAwC,4BAGpLyjF,EAAqB5sF,UAAUyrF,cAAgB,SAAUv/E,GACvD,OAAOA,EAAMsmE,WAAW5mE,OAAS,EAAIzC,EAAA,EAAa,6BAA8B,8BAA0B+C,EAAMsmE,WAAW5mE,QAAU,IAGhIghF,EAnBT,CAoBE,IAIE,GAEJ,SAAUxjF,GAGR,SAASyjF,IACP,OAAOzjF,EAAOE,KAAKjK,KAAM,IAAIorF,GAA0B,CACrDplF,GAAIwnF,EAAyB9gF,GAC7BxC,MAAOJ,EAAA,EAAa,mCAAoC,wBACxDK,MAAO,uBACPC,aAAc,KAAege,IAAI,IAAkBqlE,0BAA2B,IAAkBV,mBAAmBtd,aACnHplE,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,KAKTC,OAAQ,QAINzK,KAIR,OAvBA,GAAUwtF,EAA0BzjF,GAsBpCyjF,EAAyB9gF,GAAK,mCACvB8gF,EAxBT,CAyBE,IAIE,GAEJ,SAAUzjF,GAGR,SAAS2jF,IACP,OAAO3jF,EAAOE,KAAKjK,KAAM,IAAIorF,IAAuB,GAAO,GAAM,GAAQ,CACvEplF,GAAI0nF,EAAyBhhF,GAC7BxC,MAAOJ,EAAA,EAAa,mCAAoC,uBACxDK,MAAO,sBACPC,aAAc,KAAege,IAAI,IAAkBqlE,0BAA2B,IAAkBV,mBAAmBtd,aACnHplE,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,KAOTC,OAAQ,QAINzK,KAIR,OAzBA,GAAU0tF,EAA0B3jF,GAwBpC2jF,EAAyBhhF,GAAK,mCACvBghF,EA1BT,CA2BE,IAIE,GAEJ,SAAU3jF,GAGR,SAAS4jF,IACP,OAAkB,OAAX5jF,GAAmBA,EAAOuW,MAAMtgB,KAAM2W,YAAc3W,KAe7D,OAlBA,GAAU2tF,EAAsB5jF,GAMhC4jF,EAAqBhtF,UAAUkrF,8BAAgC,SAAUh/E,EAAO3B,EAAU2Q,GACxF,OAAOqvE,GAA6Br+E,EAAO3B,EAAU2Q,IAGvD8xE,EAAqBhtF,UAAUwrF,yBAA2B,SAAU9f,GAClE,OAAOA,GAAQA,EAAKra,KAAOloD,EAAA,EAAa,kCAAmC,qCAAsCuiE,EAAKra,MAAQloD,EAAA,EAAa,uCAAwC,6BAGrL6jF,EAAqBhtF,UAAUyrF,cAAgB,SAAUv/E,GACvD,OAAOA,EAAMsmE,WAAW5mE,OAAS,EAAIzC,EAAA,EAAa,6BAA8B,+BAA2B+C,EAAMsmE,WAAW5mE,QAAU,IAGjIohF,EAnBT,CAoBE,IAIE,GAEJ,SAAU5jF,GAGR,SAAS6jF,IACP,OAAO7jF,EAAOE,KAAKjK,KAAM,IAAIorF,GAA0B,CACrDplF,GAAI4nF,EAAyBlhF,GAC7BxC,MAAOJ,EAAA,EAAa,mCAAoC,yBACxDK,MAAO,wBACPC,aAAc,KAAege,IAAI,IAAkBylE,0BAA2B,IAAkBd,mBAAmBtd,aACnHplE,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,EACTC,OAAQ,KAIVmL,SAAU,CACRtF,MAAO,aACPK,MAAO,QAEL3Q,KAIR,OAvBA,GAAU4tF,EAA0B7jF,GAsBpC6jF,EAAyBlhF,GAAK,mCACvBkhF,EAxBT,CAyBE,IAIE,GAEJ,SAAU7jF,GAGR,SAAS+jF,IACP,OAAO/jF,EAAOE,KAAKjK,KAAM,IAAIorF,IAAuB,GAAO,GAAM,GAAQ,CACvEplF,GAAI8nF,EAAyBphF,GAC7BxC,MAAOJ,EAAA,EAAa,mCAAoC,wBACxDK,MAAO,uBACPC,aAAc,KAAege,IAAI,IAAkBylE,0BAA2B,IAAkBd,mBAAmBtd,aACnHplE,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,EACTC,OAAQ,QAINzK,KAIR,OAnBA,GAAU8tF,EAA0B/jF,GAkBpC+jF,EAAyBphF,GAAK,mCACvBohF,EApBT,CAqBE,IAGF,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IAErB,IAAaz9E,eAAe,GAE1B,CACAC,MAAO,eACPC,QAAS,CACPvK,GAAI,gCACJwK,MAAO1G,EAAA,EAAa,CAClB2G,IAAK,mBACLC,QAAS,CAAC,0BACT,uBAELC,MAAO,IAET,IAAaN,eAAe,GAE1B,CACAC,MAAO,eACPC,QAAS,CACPvK,GAAI,mCACJwK,MAAO1G,EAAA,EAAa,CAClB2G,IAAK,uBACLC,QAAS,CAAC,0BACT,4BAELC,MAAO,IAET,IAAaN,eAAe,GAE1B,CACAC,MAAO,eACPC,QAAS,CACPvK,GAAI,mCACJwK,MAAO1G,EAAA,EAAa,CAClB2G,IAAK,uBACLC,QAAS,CAAC,0BACT,2BAELC,MAAO,I,qBCr1BL,GAAsC,WACxC,IAAI3H,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GAgC1C,SAASukF,GAAY7hF,EAAG8hF,GACtB,QAAS9hF,EAAE8hF,GAOb,IAAI,GAEJ,WAQE,OAPA,SAA6BxnD,EAAQ9zB,GACnC1S,KAAK8C,OAAS0jC,EAAO1jC,OACrB9C,KAAK2/B,mBAAqBouD,GAAYvnD,EAAO3lC,MAAO6R,EAAKu7E,iBACzDjuF,KAAKkuF,sBAAwBH,GAAYvnD,EAAO3lC,MAAO6R,EAAKy7E,2BAC5DnuF,KAAKouF,wBAA0Bv5E,GAAA,GAAgB2xB,EAAO3lC,MAAMohE,QAAU,GAL1E,GAgBIosB,GAEJ,WAOE,OANA,SAAgC7nD,EAAQ9zB,GACtC1S,KAAKsuF,oBAAsB9nD,EAAOzJ,UAAYrqB,EAAK67E,WACnDvuF,KAAKwuF,uBAAyBhoD,EAAOzJ,UAAYrqB,EAAK+7E,qBACtDzuF,KAAK2/B,mBAAqBouD,GAAYvnD,EAAQ9zB,EAAKu7E,kBAJvD,GAYIS,GAEJ,WACE,SAASA,EAAiBH,EAAYN,EAAiBQ,EAAsBN,GAC3EnuF,KAAKuuF,WAAaA,EAClBvuF,KAAKiuF,gBAAkBA,EACvBjuF,KAAKyuF,qBAAuBA,EAC5BzuF,KAAKmuF,0BAA4BA,EAOnC,OAJAO,EAAiB/tF,UAAU8O,OAAS,SAAU+K,GAC5C,OAAOxa,KAAKuuF,aAAe/zE,EAAM+zE,YAAcvuF,KAAKiuF,kBAAoBzzE,EAAMyzE,iBAAmBjuF,KAAKyuF,uBAAyBj0E,EAAMi0E,sBAAwBzuF,KAAKmuF,4BAA8B3zE,EAAM2zE,2BAGjMO,EAZT,GAiBA,SAASC,GAAcC,GACrB,MAA4B,WAAxBA,EACEp6E,GAAA,EACK,IAAIk6E,GAAiB,GAE1B,UAAW,EAEX,UAGG,IAAIA,GAAiB,EAE1B,UAAW,EAEX,UAGAl6E,GAAA,EACK,IAAIk6E,GAAiB,EAE1B,SAAU,GAEV,WAGG,IAAIA,GAAiB,EAE1B,SAAU,EAEV,WAGJ,IAAI,GAEJ,SAAU3kF,GAGR,SAAS8kF,EAAiBjkF,GACxB,IAAIxJ,EAAQ2I,EAAOE,KAAKjK,OAASA,KAuEjC,OArEAoB,EAAM0tF,8BAAgC1tF,EAAMsK,UAAU,IAAI,MAC1DtK,EAAM2tF,6BAA+B3tF,EAAM0tF,8BAA8BjuF,MACzEO,EAAM4tF,WAAa5tF,EAAMsK,UAAU,IAAI,MACvCtK,EAAM6tF,UAAY7tF,EAAM4tF,WAAWnuF,MACnCO,EAAM8tF,UAAY9tF,EAAMsK,UAAU,IAAI,MACtCtK,EAAM+tF,SAAW/tF,EAAM8tF,UAAUruF,MACjCO,EAAMiK,QAAUT,EAChBxJ,EAAMysC,MAAQ8gD,GAAcvtF,EAAMiK,QAAQQ,mBAAmB+iF,qBAC7DxtF,EAAMguF,mBAAqB,KAC3BhuF,EAAMiuF,0BAA2B,EAEjCjuF,EAAMsK,UAAUtK,EAAMiK,QAAQiB,yBAAyB,SAAUJ,GAC/D,GAAIA,EAAE0iF,oBAAqB,CACzB,IAAIU,EAAUX,GAAcvtF,EAAMiK,QAAQQ,mBAAmB+iF,qBAE7D,GAAIxtF,EAAMysC,MAAMp+B,OAAO6/E,GACrB,OAGFluF,EAAMysC,MAAQyhD,EACdluF,EAAMguF,mBAAqB,KAC3BhuF,EAAMiuF,0BAA2B,EAEjCjuF,EAAM8tF,UAAUntF,WAIpBX,EAAMsK,UAAUtK,EAAMiK,QAAQgN,YAAY,SAAUnM,GAClD,OAAO9K,EAAMmuF,kBAAkB,IAAI,GAAoBrjF,EAAG9K,EAAMysC,WAGlEzsC,EAAMsK,UAAUtK,EAAMiK,QAAQ20B,YAAY,SAAU9zB,GAClD,OAAO9K,EAAMggE,kBAAkB,IAAI,GAAoBl1D,EAAG9K,EAAMysC,WAGlEzsC,EAAMsK,UAAUtK,EAAMiK,QAAQgmB,UAAU,SAAUnlB,GAChD,OAAO9K,EAAMigE,gBAAgB,IAAI,GAAoBn1D,EAAG9K,EAAMysC,WAGhEzsC,EAAMsK,UAAUtK,EAAMiK,QAAQyxB,UAAU,SAAU5wB,GAChD,OAAO9K,EAAMm/B,gBAAgB,IAAI8tD,GAAuBniF,EAAG9K,EAAMysC,WAGnEzsC,EAAMsK,UAAUtK,EAAMiK,QAAQm1B,QAAQ,SAAUt0B,GAC9C,OAAO9K,EAAMq/B,cAAc,IAAI4tD,GAAuBniF,EAAG9K,EAAMysC,WAGjEzsC,EAAMsK,UAAUtK,EAAMiK,QAAQ80B,YAAY,WACxC,OAAO/+B,EAAMouF,kBAGfpuF,EAAMsK,UAAUtK,EAAMiK,QAAQ2zB,2BAA2B,SAAU9yB,GACjE,OAAO9K,EAAM49B,2BAA2B9yB,MAG1C9K,EAAMsK,UAAUtK,EAAMiK,QAAQe,iBAAiB,SAAUF,GACvD,OAAO9K,EAAMouF,kBAGfpuF,EAAMsK,UAAUtK,EAAMiK,QAAQc,wBAAwB,WACpD,OAAO/K,EAAMouF,kBAGfpuF,EAAMsK,UAAUtK,EAAMiK,QAAQylB,kBAAkB,SAAU5kB,IACpDA,EAAE6kB,kBAAoB7kB,EAAEujF,oBAC1BruF,EAAMouF,kBAIHpuF,EAqDT,OA/HA,GAAUytF,EAAkB9kF,GA6E5B8kF,EAAiBluF,UAAUq+B,2BAA6B,SAAU9yB,GAC5DA,EAAEgB,WAAahB,EAAEgB,UAAUgB,cAAgBhC,EAAEgB,UAAUoE,WACzDtR,KAAKwvF,gBAITX,EAAiBluF,UAAU4uF,kBAAoB,SAAUnuD,GACvDphC,KAAKovF,mBAAqBhuD,EAE1BphC,KAAK8uF,8BAA8B/sF,KAAK,CAACq/B,EAAY,QAGvDytD,EAAiBluF,UAAUygE,kBAAoB,SAAUhgC,GAKvDphC,KAAKqvF,yBAA2BjuD,EAAWzB,oBAG7CkvD,EAAiBluF,UAAU0gE,gBAAkB,SAAUjgC,GACjDphC,KAAKqvF,0BACPrvF,KAAKgvF,WAAWjtF,KAAKq/B,IAIzBytD,EAAiBluF,UAAU4/B,gBAAkB,SAAUr0B,GACjDlM,KAAKovF,qBAAuBljF,EAAEoiF,qBAC/BpiF,EAAEsiF,wBAA0BtiF,EAAEyzB,oBAE/B3/B,KAAK8uF,8BAA8B/sF,KAAK,CAAC/B,KAAKovF,mBAAoBljF,IACzDA,EAAEyzB,oBACX3/B,KAAKkvF,UAAUntF,QAKnB8sF,EAAiBluF,UAAU8/B,cAAgB,SAAUv0B,GAC/CA,EAAEoiF,qBACJtuF,KAAKkvF,UAAUntF,QAInB8sF,EAAiBluF,UAAU6uF,aAAe,WACxCxvF,KAAKovF,mBAAqB,KAC1BpvF,KAAKqvF,0BAA2B,EAEhCrvF,KAAKkvF,UAAUntF,QAGV8sF,EAhIT,CAiIE,KC9PE,GAAwC,SAAUr4E,EAAY1T,EAAQ2N,EAAKgG,GAC7E,IAEIxN,EAFAyN,EAAIC,UAAUpK,OACdqK,EAAIF,EAAI,EAAI5T,EAAkB,OAAT2T,EAAgBA,EAAOrW,OAAOyW,yBAAyB/T,EAAQ2N,GAAOgG,EAE/F,GAAuB,kBAAZK,SAAoD,oBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASP,EAAY1T,EAAQ2N,EAAKgG,QAAW,IAAK,IAAIjI,EAAIgI,EAAWjK,OAAS,EAAGiC,GAAK,EAAGA,KAC1KvF,EAAIuN,EAAWhI,MAAIoI,GAAKF,EAAI,EAAIzN,EAAE2N,GAAKF,EAAI,EAAIzN,EAAEnG,EAAQ2N,EAAKmG,GAAK3N,EAAEnG,EAAQ2N,KAASmG,GAE5F,OAAOF,EAAI,GAAKE,GAAKxW,OAAOM,eAAeoC,EAAQ2N,EAAKmG,GAAIA,GAG1D,GAAkC,SAAUK,EAAYC,GAC1D,OAAO,SAAUpU,EAAQ2N,GACvByG,EAAUpU,EAAQ2N,EAAKwG,KAwBvB,GAEJ,WACE,SAASy4E,EAA0C9kF,EAAQkoE,EAA0B6c,GACnF,IAAIvuF,EAAQpB,KAEZA,KAAK8yE,yBAA2BA,EAChC9yE,KAAK2vF,YAAcA,EACnB3vF,KAAK4vF,SAAW,GAChB5vF,KAAK21B,YAAc,GACnB31B,KAAK4K,OAASA,EACd5K,KAAK6vF,gBAAkB,KACvB,IAAIC,EAAc,IAAI,GAAiBllF,GACvC5K,KAAK4vF,SAASxhF,KAAK0hF,GACnB9vF,KAAK4vF,SAASxhF,KAAK0hF,EAAYf,6BAA6B,SAAUp2E,GACpE,IAAIyoB,EAAazoB,EAAG,GAChB81B,EAAgB91B,EAAG,GAEvBvX,EAAM2uF,oBAAoB3uD,EAAY,aAAoBqN,OAE5DzuC,KAAK4vF,SAASxhF,KAAK0hF,EAAYb,UAAU,SAAU7tD,GAC7ChgC,EAAMqzB,UAAU2M,IAClBhgC,EAAM4uF,eAAe5uD,EAAWt+B,OAAQs+B,EAAW8sD,uBAAuB5qF,KAAK,WAC7ElC,EAAMqhF,qBACL,SAAUhxD,GACXrwB,EAAMqhF,oBAEN,aAAkBhxD,QAIxBzxB,KAAK4vF,SAASxhF,KAAK0hF,EAAYX,SAAS,WACtC/tF,EAAMqhF,oBAENrhF,EAAM6uF,sBAAwB,QA8PlC,OA1PAP,EAA0C/uF,UAAUovF,oBAAsB,SAAU3uD,EAAY8uD,GAC9F,IAAI9uF,EAAQpB,KAGZ,KAA+B,IAA3BohC,EAAWt+B,OAAOqX,MAEnBna,KAAK21B,YAAYppB,OAAS,GAF7B,CAMA,IAAKvM,KAAK4K,OAAOgC,aAAe5M,KAAKy0B,UAAU2M,EAAY8uD,GAGzD,OAFAlwF,KAAKiwF,sBAAwB,UAC7BjwF,KAAKyiF,oBAKP,IAAIzwB,EAAO5wB,EAAWt+B,OAAOoI,SAAWlL,KAAK4K,OAAOkC,WAAWilD,kBAAkB3wB,EAAWt+B,OAAOoI,UAAY,KAE/G,IAAK8mD,EAGH,OAFAhyD,KAAKiwF,sBAAwB,UAC7BjwF,KAAKyiF,oBAIP,IAAIv3E,EAAWk2B,EAAWt+B,OAAOoI,SAEjC,IAAIlL,KAAKiwF,uBAAyBjwF,KAAKiwF,sBAAsB/hF,cAAgB8jD,EAAK9jD,aAAelO,KAAKiwF,sBAAsB3+E,YAAc0gD,EAAK1gD,WAAatR,KAAKiwF,sBAAsBj+B,OAASA,EAAKA,KAArM,CAIAhyD,KAAKiwF,sBAAwBj+B,EAE7B,IAAIvtC,EAAQ,IAAI,KAAYzkB,KAAK4K,OAAQ,IAUrC5K,KAAK6vF,kBACP7vF,KAAK6vF,gBAAgBpyE,SACrBzd,KAAK6vF,gBAAkB,MAGzB7vF,KAAK6vF,gBAAkB,YAAwB,SAAUh0E,GACvD,OAAOza,EAAM+uF,eAAe/uD,EAAWt+B,OAAQ+Y,KAEjD7b,KAAK6vF,gBAAgBvsF,KAAK,SAAU8sF,GAClC,GAAKA,GAAYA,EAAQ7jF,QAAWkY,EAAMxgB,SAAS7C,EAAMwJ,QAOzD,GAAIwlF,EAAQ7jF,OAAS,EACnBnL,EAAM4rB,cAAc,IAAI,KAAM9hB,EAASwC,WAAYskD,EAAK9jD,YAAahD,EAASwC,WAAYskD,EAAK1gD,YAAY,IAAIiiC,IAAiBC,WAAW1pC,EAAA,EAAa,kBAAmB,iCAAkCsmF,EAAQ7jF,cAElN,CACD,IAAI2d,EAAWkmE,EAAQ,GAEvB,IAAKlmE,EAASpL,IACZ,OAGF1d,EAAM0xE,yBAAyBE,qBAAqB9oD,EAASpL,KAAKxb,KAAK,SAAUmwE,GAC/E,GAAKA,EAAIxB,QAAWwB,EAAIxB,OAAOC,gBAA/B,CAKA,IAAIA,EAAkBuB,EAAIxB,OAAOC,gBAC7BjkE,EAAkBic,EAASzc,MAAMQ,gBAErC,GAAIA,EAAkB,GAAKA,EAAkBikE,EAAgBv+D,eAE3D8/D,EAAIhyE,cAFN,CAMA,IAEI4uF,EAFAC,EAAelvF,EAAMmvF,gBAAgBre,EAAiBjkE,GAKxDoiF,EADEnmE,EAASsmE,qBACC,KAAMpxE,KAAK8K,EAASsmE,sBAEpB,IAAI,KAAMtlF,EAASwC,WAAYskD,EAAK9jD,YAAahD,EAASwC,WAAYskD,EAAK1gD,WAGzF,IAAIm/E,EAASrvF,EAAMuuF,YAAYe,+BAA+Bxe,EAAgBpzD,IAAI+zD,QAElFzxE,EAAM4rB,cAAcqjE,GAAW,IAAI98C,IAAiBE,gBAAgBg9C,GAAkB,GAAIH,IAE1F7c,EAAIhyE,gBA3BFgyE,EAAIhyE,iBAlBVL,EAAMqhF,sBAgDPn/E,UAAKtB,EAAW,SAGrB0tF,EAA0C/uF,UAAU4vF,gBAAkB,SAAUre,EAAiBjkE,GAC/F,IAAI0iF,EAAa3wF,KAAK4wF,+BAA+B1e,EAAiBjkE,GAQtE,OAP2B0iF,EAAWt/E,cAAgBs/E,EAAW1iF,iBAErCyhF,EAA0CmB,2BACpEF,EAAa3wF,KAAK8wF,kCAAkC5e,EAAiBjkE,IAGpDjO,KAAK+wF,iCAAiC7e,EAAiBjkE,EAAiB0iF,IAI7FjB,EAA0C/uF,UAAUowF,iCAAmC,SAAU7e,EAAiBjkE,EAAiB+iF,GAIjI,IAHA,IACIC,EADc/e,EAAgBh8D,gCAAgCjI,GAGzDoD,EAAgBpD,EAAkB,EAAGoD,EAAgB2/E,EAAa3/E,cAAeA,IAAiB,CACzG,IAAI6/E,EAAYhf,EAAgBh8D,gCAAgC7E,GAChE4/E,EAAY5vF,KAAK8sE,IAAI8iB,EAAWC,GAIlC,OADmBhf,EAAgBh+D,gBAAgB88E,GAAc74D,QAAQ,IAAIjS,OAAO,SAAW+qE,EAAY,GAAK,IAAK,MAAO,IAAIj6C,QAIlI04C,EAA0C/uF,UAAUmwF,kCAAoC,SAAU5e,EAAiBjkE,GAKjH,IAJA,IAAIkjF,EAAcjf,EAAgBh8D,gCAAgCjI,GAC9D6jB,EAAgBzwB,KAAK8sE,IAAI+D,EAAgBv+D,eAAgB1F,EAAkByhF,EAA0CmB,0BACrHx/E,EAAgBpD,EAAkB,EAE/BoD,EAAgBygB,EAAezgB,IAAiB,CAGrD,GAAI8/E,IAFYjf,EAAgBh8D,gCAAgC7E,GAG9D,MAIJ,OAAO,IAAI,KAAMpD,EAAiB,EAAGoD,EAAgB,EAAG,IAG1Dq+E,EAA0C/uF,UAAUiwF,+BAAiC,SAAU1e,EAAiBjkE,GAM9G,IALA,IAAI6jB,EAAgBzwB,KAAK8sE,IAAI+D,EAAgBv+D,eAAgB1F,EAAkByhF,EAA0CmB,0BACrH1lF,EAAW,GACXimF,GAAmB,EACnBC,EAAiBnf,EAAgB1kE,gBAAgB,IAAI,IAASS,EAAiB,IAEzD,OAAnBojF,GAAyB,CAC9B,GAAwB,IAApBlmF,EAASoB,OACXpB,EAASiD,KAAKijF,OACT,CACL,IAAIC,EAAcnmF,EAASA,EAASoB,OAAS,GAQ7C,GANI+kF,EAAYC,OAASF,EAAeE,MAAQD,EAAYE,SAAWH,EAAeG,OACpFrmF,EAASkX,MAETlX,EAASiD,KAAKijF,GAGQ,IAApBlmF,EAASoB,OAAc,CACzB,IAAI6kF,EAGF,OAAO,IAAI,KAAMnjF,EAAiB,EAAGojF,EAAe5jF,MAAM4D,cAAgB,EAAG,GAF7E+/E,GAAmB,GAOzB,IAAIz4B,EAAYuZ,EAAgB3gE,iBAAiBtD,GAC7CwjF,EAAiBJ,EAAe5jF,MAAM4D,cACtCqgF,EAAaL,EAAe5jF,MAAM6D,UAOtC,GALIqnD,IAAc04B,EAAe5jF,MAAM6D,YACrCmgF,IACAC,EAAa,GAGXD,EAAiB3/D,EACnB,OAAO,IAAI,KAAM7jB,EAAiB,EAAG6jB,EAAgB,EAAG,GAG1Du/D,EAAiBnf,EAAgB1kE,gBAAgB,IAAI,IAASikF,EAAgBC,IAGhF,OAAO,IAAI,KAAMzjF,EAAiB,EAAG6jB,EAAgB,EAAG,IAG1D49D,EAA0C/uF,UAAUqsB,cAAgB,SAAUvf,EAAOkkF,GACnF,IAAIrjF,EAAiB,CACnBb,MAAOA,EACPtL,QAAS,CACPyvF,gBAAiB,uBACjBD,aAAcA,IAGlB3xF,KAAK21B,YAAc31B,KAAK4K,OAAO4B,iBAAiBxM,KAAK21B,YAAa,CAACrnB,KAGrEohF,EAA0C/uF,UAAU8hF,kBAAoB,WAClEziF,KAAK21B,YAAYppB,OAAS,IAC5BvM,KAAK21B,YAAc31B,KAAK4K,OAAO4B,iBAAiBxM,KAAK21B,YAAa,MAItE+5D,EAA0C/uF,UAAU8zB,UAAY,SAAU2M,EAAY8uD,GACpF,OAAOlwF,KAAK4K,OAAOgC,YAAcw0B,EAAWgtD,yBAAsD,IAA3BhtD,EAAWt+B,OAAOqX,OAErFinB,EAAWzB,sBAAuBuwD,GAAUA,EAAQ5B,sBAAiC,KAA2BnuE,IAAIngB,KAAK4K,OAAOkC,aAGtI4iF,EAA0C/uF,UAAUwvF,eAAiB,SAAUrtF,EAAQ+Y,GACrF,IAAIhP,EAAQ7M,KAAK4K,OAAOkC,WAExB,OAAKD,EAIE+9E,GAAyB/9E,EAAO/J,EAAOoI,SAAU2Q,GAH/Cc,QAAQC,QAAQ,OAM3B8yE,EAA0C/uF,UAAUqvF,eAAiB,SAAUltF,EAAQ0nF,GACrF,IAAIppF,EAAQpB,KAEZA,KAAK4K,OAAOuyB,YAAYr6B,EAAOoI,UAC/B,IAAI+R,EAAS,IAAI,GAAiB,IAAImuE,GAAuBZ,GAAY,GAAO,GAAM,GAAQ,CAC5FrgF,MAAO,GACPD,MAAO,GACPlE,GAAI,GACJoE,aAAc,OAEhB,OAAOpK,KAAK4K,OAAOinF,oBAAoB,SAAUlnF,GAC/C,OAAOsS,EAAOvS,IAAIC,EAAUvJ,EAAMwJ,WAItC8kF,EAA0C/uF,UAAUgM,MAAQ,WAC1D,OAAO+iF,EAA0ChjF,IAGnDgjF,EAA0C/uF,UAAUc,QAAU,WAC5DzB,KAAK4vF,SAAW,YAAQ5vF,KAAK4vF,WAG/BF,EAA0ChjF,GAAK,yCAC/CgjF,EAA0CmB,yBAA2B,EACrEnB,EAA4C,GAAW,CAAC,GAAQ,EAAG,MAAoB,GAAQ,EAAG,OAAgBA,GA7RpH,GAiSA,YAA2B,IAC3B,YAA2B,SAAU3/E,EAAOC,GAC1C,IAAI+e,EAAuBhf,EAAMG,SAAS,KAEtC6e,GACF/e,EAAUG,QAAQ,iDAAmD4e,EAAuB,oB,qBC5U5F,GAAsC,WACxC,IAAI/lB,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA4CtC,GAEJ,WACE,SAASkP,EAAc0nC,EAAQx1C,EAAQknF,GACrC,IAAI1wF,EAAQpB,KAEZA,KAAK+xF,OAAS,EACd/xF,KAAKgyF,mBAAqB,EAC1BhyF,KAAKiyF,oBAAsB,IAAIC,QAC/BlyF,KAAKse,aAAe,GACpBte,KAAKqL,QAAUT,EACf,IAAIogB,EAAUvW,SAASyE,cAAc,OACrC8R,EAAQrb,UAAY,uBACpBqb,EAAQmjB,aAAa,YAAa,aAClCnjB,EAAQmjB,aAAa,OAAQ,SAC7BnuC,KAAKmyF,cAAgB19E,SAASyE,cAAc,OAC5CkL,GAAA,EAAapkB,KAAKmyF,cAAe,WACjCnnE,EAAQ1R,YAAYtZ,KAAKmyF,eACzBnyF,KAAKoyF,cAAgB39E,SAASyE,cAAc,OAC5C8R,EAAQ1R,YAAYtZ,KAAKoyF,eAEzBpyF,KAAKse,aAAalQ,KAAKgW,GAAA,EAAkCpkB,KAAKoyF,cAAe,QAAS,SAAUvxF,GAC9FA,EAAMm8B,iBAEN,IAAIq1D,EAAUjxF,EAAM6wF,oBAAoBrxF,IAAIC,EAAMiC,QAE9CuvF,GACFP,EAAqBO,MAIzBryF,KAAKsyF,YAAc,IAAI,KAAkBtnE,EAAS,CAChDi6D,WAAY,EAGZsN,SAAU,EAGVrN,YAAY,EACZsN,wBAAyB,EACzBxN,sBAAuB,IAEzB5kC,EAAO9mC,YAAYtZ,KAAKsyF,YAAY14E,cAEpC5Z,KAAKse,aAAalQ,KAAKpO,KAAKsyF,YAAYG,SAAS,SAAUvmF,GACzD8e,EAAQa,MAAMra,KAAO,IAAMtF,EAAEwmF,WAAa,KAC1C1nE,EAAQa,MAAMhI,IAAM,IAAM3X,EAAEymF,UAAY,QAG1C3yF,KAAKse,aAAalQ,KAAKpO,KAAKsyF,aAiH9B,OA9GA55E,EAAc/X,UAAUc,QAAU,WAChC,YAAQzB,KAAKse,eAGf5F,EAAc/X,UAAUiuB,OAAS,SAAUjW,GACzC,IAAI6tB,EAAS7tB,EAAG6tB,OACZ1uB,EAAUa,EAAGb,QACb86E,EAAqBj6E,EAAGi6E,mBACxBj/C,EAAOh7B,EAAGg7B,KACVpa,EAAQzhB,EAAQu/B,MAAM,eAC1Br3C,KAAK+xF,OAASx4D,EAAMhtB,OACpBvM,KAAKgyF,mBAAqB,EAE1B,IAAK,IAAIp/E,EAAK,EAAGigF,EAAUt5D,EAAO3mB,EAAKigF,EAAQtmF,OAAQqG,IAAM,CAC3D,IAAIyM,EAAOwzE,EAAQjgF,GACnB5S,KAAKgyF,mBAAqB3wF,KAAKw5B,IAAIxb,EAAK9S,OAAQvM,KAAKgyF,oBAGvD5tE,GAAA,EAAcpkB,KAAKmyF,eAEnBnyF,KAAKqL,QAAQynF,cAAc9yF,KAAKmyF,eAIhC,IAFA,IAAIY,EAAkB/yF,KAAKmyF,cAElB3gE,EAAK,EAAGwhE,EAAUz5D,EAAO/H,EAAKwhE,EAAQzmF,OAAQilB,IAAM,CACvDnS,EAAO2zE,EAAQxhE,IACnBuhE,EAAkBt+E,SAASyE,cAAc,QACzB+5E,UAAY5zE,EAEf,KAATA,IACF0zE,EAAgBlnE,MAAM/H,OAAS9jB,KAAKmyF,cAActmE,MAAMxH,YAG1DrkB,KAAKmyF,cAAc74E,YAAYy5E,GAGjC,GAAIvsD,GAAUmN,EAAM,CAClB,IAAIu/C,EAAiBz+E,SAASyE,cAAc,QAI5C,GAHAkL,GAAA,EAAa8uE,EAAgB,WAC7BH,EAAgBz5E,YAAY45E,GAExB1sD,EAAQ,CACV,IAAI2sD,EAAgB1+E,SAASyE,cAAc,QAC3Ci6E,EAAcF,UAAYzsD,EAC1BpiB,GAAA,EAAa+uE,EAAe,UAC5BD,EAAe55E,YAAY65E,GAG7B,GAAIx/C,EAAM,CACR,IAAIy/C,EAAc3+E,SAASyE,cAAc,QACzCk6E,EAAYH,UAAY,IAAMt/C,EAAO,IACrCvvB,GAAA,EAAagvE,EAAa,QAC1BF,EAAe55E,YAAY85E,IAQ/B,GAJAhvE,GAAA,EAAcpkB,KAAKoyF,eAEnBpyF,KAAKqL,QAAQynF,cAAc9yF,KAAKoyF,eAE5B,aAAgBQ,GAAqB,CACvC,IAAIS,EAAyBrzF,KAAKoyF,cAAc94E,YAAY7E,SAASyE,cAAc,QAEnFm6E,EAAuBxnE,MAAMynE,WAAajyF,KAAKkjB,MAAmD,IAA7CvkB,KAAKqL,QAAQQ,mBAAmBwY,YAAqB,KAC1GrkB,KAAK+xF,QAAU,EAEf,IAAK,IAAIwB,EAAK,EAAGC,EAAuBZ,EAAoBW,EAAKC,EAAqBjnF,OAAQgnF,IAAM,CAClG,IAAIlB,EAAUmB,EAAqBD,GAC/BhyC,EAAY9sC,SAASyE,cAAc,OACnCu6E,EAAkBh/E,SAASyE,cAAc,KAC7CkL,GAAA,EAAaqvE,EAAiB,YAC9BA,EAAgB/nE,UAAYktD,GAAayZ,EAAQ10E,UAAY,IAAM00E,EAAQpkF,gBAAkB,KAAOokF,EAAQnkF,YAAc,MAC1HulF,EAAgBjjF,MAAQ2mE,GAAakb,EAAQ10E,cAAU3b,GAEvDhC,KAAKiyF,oBAAoBj6E,IAAIy7E,EAAiBpB,GAE9C,IAAIqB,EAAiBj/E,SAASyE,cAAc,QAC5Cw6E,EAAeT,UAAYZ,EAAQv6E,QACnCypC,EAAUjoC,YAAYm6E,GACtBlyC,EAAUjoC,YAAYo6E,GACtB1zF,KAAK+xF,QAAU,EACfsB,EAAuB/5E,YAAYioC,IAIvC,IAAI77B,EAAW1lB,KAAKqL,QAAQQ,mBAAmB6Z,SAE3CiuE,EAActyF,KAAK4iC,KAAKve,EAASkuE,+BAAiC5zF,KAAKgyF,mBAAqB,KAC5F6B,EAAenuE,EAASrB,WAAarkB,KAAK+xF,OAE9C/xF,KAAKsyF,YAAYwB,oBAAoB,CACnCH,YAAaA,EACbE,aAAcA,KAIlBn7E,EAAc/X,UAAU4jD,OAAS,SAAUzgC,EAAQsS,GACjDp2B,KAAKsyF,YAAY14E,aAAaiS,MAAM/H,OAASA,EAAS,KACtD9jB,KAAKsyF,YAAY14E,aAAaiS,MAAMuK,MAAQA,EAAQ,KAEpDp2B,KAAKsyF,YAAYwB,oBAAoB,CACnC19D,MAAOA,EACPtS,OAAQA,KAIZpL,EAAc/X,UAAUozF,iBAAmB,WACzC,OAAO1yF,KAAK8sE,IAAI,GAAInuE,KAAK+xF,SAGpBr5E,EAhKT,GAmKI,GAEJ,SAAU3O,GAGR,SAASiqF,EAAuBppF,EAAQsQ,EAASq5C,GAC/C,IAAInzD,EAAQ2I,EAAOE,KAAKjK,KAAM4K,EAAQ,CACpCmgE,WAAW,EACXC,WAAW,EACXoB,cAAc,KACVpsE,KAgBN,OAdAoB,EAAM8Z,QAAUA,EAChB9Z,EAAMmzD,cAAgBA,EACtBnzD,EAAMsnE,eAAiB,GACvBtnE,EAAM6yF,+BAAiC,IAAI,KAC3C7yF,EAAM8yF,8BAAgC9yF,EAAM6yF,+BAA+BpzF,MAC3EO,EAAM+yF,UAAY,KAAeC,QACjChzF,EAAMizF,iBAAmB,KAAM1kB,MAE/BvuE,EAAMuvC,YAAY4jB,EAAcxkB,YAEhC3uC,EAAMsnE,eAAet6D,KAAKmmD,EAAc3jB,cAAcxvC,EAAMuvC,YAAYE,KAAKzvC,KAE7EA,EAAMf,SAECe,EAiKT,OAxLA,GAAU4yF,EAAwBjqF,GA0BlCiqF,EAAuBrzF,UAAUgwC,YAAc,SAAU5gC,GACvD/P,KAAKq0F,iBAAmBtkF,EAAMG,SAASokF,IACvC,IAAIC,EAAUC,GAEVx0F,KAAKm0F,YAAc,KAAeC,QACpCG,EAAUE,GACDz0F,KAAKm0F,YAAc,KAAeO,OAC3CH,EAAUI,IAGZ,IAAI1pB,EAAal7D,EAAMG,SAASqkF,GAChCv0F,KAAK6rB,MAAM,CACTq/C,WAAYD,EACZA,WAAYA,EACZyE,sBAAuB1vE,KAAKq0F,iBAC5BzkB,oBAAqB7/D,EAAMG,SAASo0E,IACpCzU,sBAAuB9/D,EAAMG,SAASq0E,OAI1CyP,EAAuBrzF,UAAUksE,aAAe,WAC1C7sE,KAAK40F,mBACP50F,KAAK40F,iBAAiB/oE,MAAMwK,gBAAkBr2B,KAAKq0F,iBAAmBr0F,KAAKq0F,iBAAiB9yF,WAAa,IAG3GwI,EAAOpJ,UAAUksE,aAAa5iE,KAAKjK,OAGrCg0F,EAAuBrzF,UAAUc,QAAU,WACzCzB,KAAK0oE,eAAiB,YAAQ1oE,KAAK0oE,gBAEnC3+D,EAAOpJ,UAAUc,QAAQwI,KAAKjK,OAGhCg0F,EAAuBrzF,UAAU6U,MAAQ,WACvCxV,KAAK40F,iBAAiBp/E,SAGxBw+E,EAAuBrzF,UAAUyvE,UAAY,SAAU7uB,GACrDx3C,EAAOpJ,UAAUyvE,UAAUnmE,KAAKjK,KAAMuhD,GAEtCvhD,KAAK6wE,iBAAiBziE,KAAKpO,KAAKkb,QAAS,CACvChR,OAAO,EACPk0B,MAAM,KAIV41D,EAAuBrzF,UAAUiwE,qBAAuB,WACtD,MAAO,CACLvgB,YAAa,IAMjB2jC,EAAuBrzF,UAAU0vE,UAAY,SAAU9uB,GACrD,IAAIngD,EAAQpB,KAEZA,KAAK40F,iBAAmBrzC,EACxBn9B,GAAA,EAAam9B,EAAW,iBACxBvhD,KAAK40F,iBAAiB1mD,SAAW,EAEjCluC,KAAK40F,iBAAiBzmD,aAAa,OAAQ,WAE3CnuC,KAAK60F,WAAapgF,SAASyE,cAAc,OACzCqoC,EAAUjoC,YAAYtZ,KAAK60F,YAC3B70F,KAAK80F,SAAW,IAAI,GAAc90F,KAAK60F,WAAY70F,KAAK4K,OAAQ,SAAUynF,GACxE,OAAOjxF,EAAM6yF,+BAA+BlyF,KAAKswF,KAGnDryF,KAAKse,aAAalQ,KAAKpO,KAAK80F,WAG9Bd,EAAuBrzF,UAAUgiB,KAAO,SAAUqpD,EAAOjhD,GACvD,MAAM,IAAI+sB,MAAM,sBAGlBk8C,EAAuBrzF,UAAUo0F,aAAe,SAAU71E,EAAQ81E,EAAWC,GAI3Ej1F,KAAK60F,WAAW17E,UAAUw1B,OAAO,SAEjC3uC,KAAK80F,SAASlmE,OAAO1P,GAGrBlf,KAAKm0F,UAAYj1E,EAAOg2E,SAExBl1F,KAAK2wC,YAAY3wC,KAAKu0D,cAAcxkB,YAGpC,IAAItiC,EAAQ,KAAM2R,KAAKF,GACnBi2E,EAAiBn1F,KAAK4K,OAAOkJ,cAC7B5I,EAAWiqF,GAAkB1nF,EAAMH,iBAAiB6nF,GAAkBA,EAAiB1nF,EAAMN,mBAEjGpD,EAAOpJ,UAAUgiB,KAAK1Y,KAAKjK,KAAMkL,EAAUlL,KAAKo1F,yBAEhD,IAAIvoF,EAAQ7M,KAAK4K,OAAOkC,WAExB,GAAID,EAAO,CACT,IAAIo1D,EAASgzB,EAAc,EAAInrF,EAAA,EAAa,WAAY,sBAAuBkrF,EAAWC,GAAenrF,EAAA,EAAa,SAAU,qBAAsBkrF,EAAWC,GACjKj1F,KAAKgxE,SAAS,aAASnkE,EAAMiS,KAAMmjD,GAGrC,IAAIozB,EAAuB,QAEvBr1F,KAAKm0F,YAAc,KAAeC,QACpCiB,EAAuB,UACdr1F,KAAKm0F,YAAc,KAAeO,OAC3CW,EAAuB,QAGzBr1F,KAAK8wE,aAAaukB,GAClBr1F,KAAK4K,OAAO0qF,uBAAuBpqF,EAAU,GAIe,IAAxDlL,KAAK4K,OAAOiB,mBAAmBi/C,sBAG/B9qD,KAAKwV,SAIXw+E,EAAuBrzF,UAAU40F,aAAe,SAAUr2E,GACxDlf,KAAK60F,WAAW17E,UAAUw1B,OAAO,SAEjC3uC,KAAK80F,SAASlmE,OAAO1P,IAGvB80E,EAAuBrzF,UAAU60F,UAAY,WAC3Cx1F,KAAK60F,WAAW17E,UAAUC,IAAI,SAE9BpZ,KAAKyuE,aAGPulB,EAAuBrzF,UAAU4wE,cAAgB,SAAU/C,EAAeD,GACxExkE,EAAOpJ,UAAU4wE,cAActnE,KAAKjK,KAAMwuE,EAAeD,GAEzDvuE,KAAKy1F,eAAiBjnB,EAEtBxuE,KAAK80F,SAASvwC,OAAOiqB,EAAeD,GAEpCvuE,KAAK60F,WAAWhpE,MAAM/H,OAAS0qD,EAAgB,MAGjDwlB,EAAuBrzF,UAAU6rE,SAAW,SAAU+B,GACpDvuE,KAAK80F,SAASvwC,OAAOvkD,KAAKy1F,eAAgBlnB,IAG5CylB,EAAuBrzF,UAAU8tE,UAAY,WAC3C1kE,EAAOpJ,UAAU8tE,UAAUxkE,KAAKjK,KAAMA,KAAKo1F,0BAG7CpB,EAAuBrzF,UAAUy0F,sBAAwB,WACvD,OAAO,EAAIp1F,KAAK80F,SAASf,oBAGpBC,EAzLT,CA0LE,IAIE0B,GAAe,aAAM,IAAuB,KAC5CC,GAAiB,aAAM,IAAyB,KAChDC,GAAc,aAAM,IAAsB,KACnCpB,GAA8B,aAAc,yCAA0C,CAC/F7qF,KAAM+rF,GACN9rF,MAAO8rF,GACP7rF,GAAI6rF,IACH5rF,EAAA,EAAa,8BAA+B,iDACpC2qF,GAAgC,aAAc,2CAA4C,CACnG9qF,KAAMgsF,GACN/rF,MAAO+rF,GACP9rF,GAAI8rF,IACH7rF,EAAA,EAAa,gCAAiC,mDACtC6qF,GAA6B,aAAc,wCAAyC,CAC7FhrF,KAAMisF,GACNhsF,MAAOgsF,GACP/rF,GAAI+rF,IACH9rF,EAAA,EAAa,6BAA8B,gDACnCwqF,GAAmC,aAAc,oCAAqC,CAC/F3qF,KAAM,UACNC,MAAO,KAAM+lE,MACb9lE,GAAI,WACHC,EAAA,EAAa,mCAAoC,gDACpD,YAA2B,SAAUiG,EAAOC,GAC1C,IAAIwc,EAAOzc,EAAMG,SAAS,MAEtBsc,GACFxc,EAAUG,QAAQ,4CAA8Cqc,EAAO,SC5a3E,IAAI,GAAsC,WACxC,IAAIxjB,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA0BtC,GAAwC,SAAUgN,EAAY1T,EAAQ2N,EAAKgG,GAC7E,IAEIxN,EAFAyN,EAAIC,UAAUpK,OACdqK,EAAIF,EAAI,EAAI5T,EAAkB,OAAT2T,EAAgBA,EAAOrW,OAAOyW,yBAAyB/T,EAAQ2N,GAAOgG,EAE/F,GAAuB,kBAAZK,SAAoD,oBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASP,EAAY1T,EAAQ2N,EAAKgG,QAAW,IAAK,IAAIjI,EAAIgI,EAAWjK,OAAS,EAAGiC,GAAK,EAAGA,KAC1KvF,EAAIuN,EAAWhI,MAAIoI,GAAKF,EAAI,EAAIzN,EAAE2N,GAAKF,EAAI,EAAIzN,EAAEnG,EAAQ2N,EAAKmG,GAAK3N,EAAEnG,EAAQ2N,KAASmG,GAE5F,OAAOF,EAAI,GAAKE,GAAKxW,OAAOM,eAAeoC,EAAQ2N,EAAKmG,GAAIA,GAG1D,GAAkC,SAAUK,EAAYC,GAC1D,OAAO,SAAUpU,EAAQ2N,GACvByG,EAAUpU,EAAQ2N,EAAKwG,KAIvB,GAAsC,SAAUyJ,EAASC,EAAYC,EAAGC,GAC1E,OAAO,IAAKD,IAAMA,EAAIjE,UAAU,SAAUC,EAASkE,GACjD,SAASC,EAAUxe,GACjB,IACEye,EAAKH,EAAUI,KAAK1e,IACpB,MAAO2J,GACP4U,EAAO5U,IAIX,SAASgV,EAAS3e,GAChB,IACEye,EAAKH,EAAiB,MAAEte,IACxB,MAAO2J,GACP4U,EAAO5U,IAIX,SAAS8U,EAAK3O,GACZA,EAAO8O,KAAOvE,EAAQvK,EAAO9P,OAAS,IAAIqe,EAAE,SAAUhE,GACpDA,EAAQvK,EAAO9P,SACde,KAAKyd,EAAWG,GAGrBF,GAAMH,EAAYA,EAAUP,MAAMI,EAASC,GAAc,KAAKM,WAI9D,GAA0C,SAAUP,EAASW,GAC/D,IASIC,EACAC,EACAC,EACAC,EAZAC,EAAI,CACNxX,MAAO,EACPyX,KAAM,WACJ,GAAW,EAAPH,EAAE,GAAQ,MAAMA,EAAE,GACtB,OAAOA,EAAE,IAEXI,KAAM,GACNC,IAAK,IAMP,OAAOJ,EAAI,CACTR,KAAMa,EAAK,GACX,MAASA,EAAK,GACd,OAAUA,EAAK,IACI,oBAAXC,SAA0BN,EAAEM,OAAOC,UAAY,WACvD,OAAOhiB,OACLyhB,EAEJ,SAASK,EAAKG,GACZ,OAAO,SAAUC,GACf,OAIJ,SAAcC,GACZ,GAAIb,EAAG,MAAM,IAAIc,UAAU,mCAE3B,KAAOV,GACL,IACE,GAAIJ,EAAI,EAAGC,IAAMC,EAAY,EAARW,EAAG,GAASZ,EAAU,OAAIY,EAAG,GAAKZ,EAAS,SAAOC,EAAID,EAAU,SAAMC,EAAEvX,KAAKsX,GAAI,GAAKA,EAAEN,SAAWO,EAAIA,EAAEvX,KAAKsX,EAAGY,EAAG,KAAKhB,KAAM,OAAOK,EAG3J,OAFID,EAAI,EAAGC,IAAGW,EAAK,CAAS,EAARA,EAAG,GAAQX,EAAEjf,QAEzB4f,EAAG,IACT,KAAK,EACL,KAAK,EACHX,EAAIW,EACJ,MAEF,KAAK,EAEH,OADAT,EAAExX,QACK,CACL3H,MAAO4f,EAAG,GACVhB,MAAM,GAGV,KAAK,EACHO,EAAExX,QACFqX,EAAIY,EAAG,GACPA,EAAK,CAAC,GACN,SAEF,KAAK,EACHA,EAAKT,EAAEG,IAAIQ,MAEXX,EAAEE,KAAKS,MAEP,SAEF,QACE,KAAkBb,GAAZA,EAAIE,EAAEE,MAAYrV,OAAS,GAAKiV,EAAEA,EAAEjV,OAAS,MAAkB,IAAV4V,EAAG,IAAsB,IAAVA,EAAG,IAAW,CACtFT,EAAI,EACJ,SAGF,GAAc,IAAVS,EAAG,MAAcX,GAAKW,EAAG,GAAKX,EAAE,IAAMW,EAAG,GAAKX,EAAE,IAAK,CACvDE,EAAExX,MAAQiY,EAAG,GACb,MAGF,GAAc,IAAVA,EAAG,IAAYT,EAAExX,MAAQsX,EAAE,GAAI,CACjCE,EAAExX,MAAQsX,EAAE,GACZA,EAAIW,EACJ,MAGF,GAAIX,GAAKE,EAAExX,MAAQsX,EAAE,GAAI,CACvBE,EAAExX,MAAQsX,EAAE,GAEZE,EAAEG,IAAIzT,KAAK+T,GAEX,MAGEX,EAAE,IAAIE,EAAEG,IAAIQ,MAEhBX,EAAEE,KAAKS,MAEP,SAGJF,EAAKd,EAAKpX,KAAKyW,EAASgB,GACxB,MAAOxV,GACPiW,EAAK,CAAC,EAAGjW,GACTqV,EAAI,EACJ,QACAD,EAAIE,EAAI,EAIZ,GAAY,EAARW,EAAG,GAAQ,MAAMA,EAAG,GACxB,MAAO,CACL5f,MAAO4f,EAAG,GAAKA,EAAG,QAAK,EACvBhB,MAAM,GAlFCH,CAAK,CAACiB,EAAGC,OAyGlB,GAEJ,WACE,SAAS2zE,EAAYjrF,EAAQiyD,GAC3B,IAAIz7D,EAAQpB,KAEZA,KAAKqL,QAAUT,EACf5K,KAAK81F,SAAW,GAChB91F,KAAK+1F,UAAY,EACjB/1F,KAAKg2F,UAAY,GACjBh2F,KAAKi2F,wBAAyB,EAC9Bj2F,KAAKk2F,wBAA0B,IAAI,KACnCl2F,KAAKm2F,oBAAsB,IAAI,KAC/Bn2F,KAAKo2F,WAAWv5B,GAEhB78D,KAAKg2F,UAAU5nF,KAAKpO,KAAKqL,QAAQ+M,aAAa,WAC5C,OAAOhX,EAAMK,aAGfzB,KAAKg2F,UAAU5nF,KAAKpO,KAAKqL,QAAQY,0BAA0B,WACrD7K,EAAM60F,wBAIN70F,EAAMi1F,eAAiBj1F,EAAMiK,QAAQyI,eAAiB,KAAMxG,iBAAiBlM,EAAMi1F,cAAej1F,EAAMiK,QAAQyI,iBAIpH1S,EAAM20F,UAAY,MAoKtB,OAhKA31F,OAAOM,eAAem1F,EAAYl1F,UAAW,yBAA0B,CACrEC,IAAK,WACH,OAAOZ,KAAKk2F,wBAAwBr1F,OAEtCC,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAem1F,EAAYl1F,UAAW,qBAAsB,CACjEC,IAAK,WACH,OAAOZ,KAAKm2F,oBAAoBt1F,OAElCC,YAAY,EACZC,cAAc,IAGhB80F,EAAYl1F,UAAUy1F,WAAa,SAAUv5B,GAC3C,IAAIy5B,EAAYt2F,KAAK+1F,UAAY,EAAI/1F,KAAK81F,SAAS91F,KAAK+1F,eAAY/zF,EACpEhC,KAAK81F,SAAWj5B,GAAW,GAE3B78D,KAAK81F,SAAS5mF,KAAK,GAAuBqnF,eAKxCv2F,KAAK+1F,SAHFO,EAGaj1F,KAAKw5B,KAAK,EAAG,aAAa76B,KAAK81F,SAAUQ,EAAW,GAAuBC,iBAF1E,EAKnBv2F,KAAKm2F,oBAAoBp0F,KAAK/B,OAGhC61F,EAAYl1F,UAAU61F,8BAAgC,SAAUtpE,GAC9DltB,KAAKi2F,wBAAyB,EAE9B,IACE/oE,IACA,QACAltB,KAAKi2F,wBAAyB,IAIlCJ,EAAYl1F,UAAU81F,SAAW,SAAUtM,GAKzC,IAJA,IAAIuM,GAAQ,EAERxrF,EAAWlL,KAAKqL,QAAQyI,cAEnBtF,EAAI,EAAGA,EAAIxO,KAAK81F,SAASvpF,OAAQiC,IAAK,CAC7C,IAAIf,EAAQ,KAAM2R,KAAKpf,KAAK81F,SAAStnF,IAErC,GAAIf,EAAMwB,WAAajP,KAAKqL,QAAQyB,WAAY,CAC9C,IAAIklD,EAAOhyD,KAAKqL,QAAQyB,WAAWilD,kBAAkBtkD,EAAMN,oBAEvD6kD,IACFvkD,EAAQ,IAAI,KAAMA,EAAMQ,gBAAiB+jD,EAAK9jD,YAAaT,EAAMQ,gBAAiB+jD,EAAK1gD,YAI3F,GAAIpG,IAAauC,EAAMH,iBAAiBpC,IAAaA,EAASyrF,gBAAgBlpF,EAAMN,qBAAsB,CACxGnN,KAAK+1F,SAAWvnF,EAChBkoF,GAAQ,EACR,OAICA,IAEH12F,KAAK+1F,SAAW5L,EAAM,EAAInqF,KAAK81F,SAASvpF,OAAS,GAG/CvM,KAAK+1F,SAAW,IAClB/1F,KAAK+1F,SAAW/1F,KAAK81F,SAASvpF,OAAS,IAI3CnM,OAAOM,eAAem1F,EAAYl1F,UAAW,gBAAiB,CAC5DC,IAAK,WACH,OAAOZ,KAAK42F,cAAgB52F,KAAK81F,SAAS91F,KAAK+1F,eAAY/zF,GAE7DgW,IAAK,SAAakH,GAChB,IAAI60D,EAAM/zE,KAAK+1F,SACf/1F,KAAK+1F,UAAY,EAEb72E,IACFlf,KAAK+1F,SAAW/1F,KAAKoqB,QAAQlL,IAG3Blf,KAAK+1F,WAAahiB,GACpB/zE,KAAKk2F,wBAAwBn0F,KAAKmd,IAGtCpe,YAAY,EACZC,cAAc,IAGhB80F,EAAYl1F,UAAUk2F,KAAO,SAAU1M,EAAK2M,GAC1C,IAAK92F,KAAK42F,cAGR,OAFA52F,KAAKk2F,wBAAwBn0F,UAAKC,IAE1B80F,EAGV,IAAIC,EAAS/2F,KAAK+1F,SACdiB,GAAS,EAkBb,IAhBuB,IAAnBh3F,KAAK+1F,SACP/1F,KAAKy2F,SAAStM,GACLA,EACL2M,GAAa92F,KAAK+1F,SAAW,EAAI/1F,KAAK81F,SAASvpF,OACjDvM,KAAK+1F,UAAY/1F,KAAK+1F,SAAW,GAAK/1F,KAAK81F,SAASvpF,OAEpDyqF,GAAS,EAED7M,IACN2M,GAAa92F,KAAK+1F,SAAW,EAC/B/1F,KAAK+1F,UAAY/1F,KAAK+1F,SAAW,EAAI/1F,KAAK81F,SAASvpF,QAAUvM,KAAK81F,SAASvpF,OAE3EyqF,GAAS,GAITD,IAAW/2F,KAAK+1F,SAAU,CAC5B,IAAI72E,EAASlf,KAAK81F,SAAS91F,KAAK+1F,UAEhC/1F,KAAKk2F,wBAAwBn0F,KAAKmd,GAGpC,OAAO83E,GAGTnB,EAAYl1F,UAAUi2F,YAAc,WAClC,OAAO52F,KAAK81F,SAASvpF,OAAS,GAGhCspF,EAAYl1F,UAAUs2F,qBAAuB,SAAU/uE,GACrD,IAAK,IAAItV,EAAK,EAAG+F,EAAK3Y,KAAK81F,SAAUljF,EAAK+F,EAAGpM,OAAQqG,IAAM,CACzD,IAAIsM,EAASvG,EAAG/F,GAEhB,GAAI,KAAMtF,iBAAiB4R,EAAQgJ,GACjC,OAAOhJ,IAOb9e,OAAOM,eAAem1F,EAAYl1F,UAAW,QAAS,CACpDC,IAAK,WACH,OAAOZ,KAAK81F,SAASvpF,QAEvBzL,YAAY,EACZC,cAAc,IAGhB80F,EAAYl1F,UAAUypB,QAAU,SAAUlL,GACxC,OAAO,EAAIlf,KAAK81F,SAAS1rE,QAAQlL,IAGnC22E,EAAYl1F,UAAUc,QAAU,WAC9BzB,KAAKg2F,UAAY,YAAQh2F,KAAKg2F,YAGzBH,EA9LT,GAiMI,GAEJ,WACE,SAASqB,EAAiBtsF,EAAQsT,EAAgBoe,EAAoBi4B,EAAe40B,EAAgB3iE,GACnGxmB,KAAKke,eAAiBA,EACtBle,KAAKs8B,mBAAqBA,EAC1Bt8B,KAAKu0D,cAAgBA,EACrBv0D,KAAKmpF,eAAiBA,EACtBnpF,KAAKwmB,mBAAqBA,EAC1BxmB,KAAK0mB,OAAS,KACd1mB,KAAKw0D,QAAU,KACfx0D,KAAKm3F,gBAAkB,GACvBn3F,KAAKqL,QAAUT,EACf5K,KAAKo3F,eAAiBC,GAAmC7/E,OAAOxX,KAAKs8B,oBAqLvE,OAlLA46D,EAAiBt2F,IAAM,SAAUgK,GAC/B,OAAOA,EAAO6B,gBAAgByqF,EAAiBxqF,KAGjDwqF,EAAiBv2F,UAAUgM,MAAQ,WACjC,OAAOuqF,EAAiBxqF,IAG1BwqF,EAAiBv2F,UAAUc,QAAU,WACnCzB,KAAKs3F,YAGPJ,EAAiBv2F,UAAU22F,SAAW,WACpCt3F,KAAKo3F,eAAex/E,QAEpB5X,KAAKm3F,gBAAkB,YAAQn3F,KAAKm3F,iBACpCn3F,KAAKw0D,QAAU,KACfx0D,KAAK0mB,OAAS,MAGhBwwE,EAAiBv2F,UAAU42F,iBAAmB,WAC5C,IAEI5+E,EAFAvX,EAAQpB,KAIZ,GAAIA,KAAK0mB,OACP,OAAO1mB,KAAK0mB,OAGd,IAAIm2C,EAAU78D,KAAKw3F,cAEnBx3F,KAAK0mB,OAAS,IAAI,GAAY1mB,KAAKqL,QAASwxD,GAE5C78D,KAAKke,eAAeM,gBAAgBxe,KAAKy3F,iBAAkBz3F,KAAMA,KAAKm3F,iBAEtE,IAAIO,EAAuB13F,KAAKwmB,mBAAmBe,iBAAiB,GAAiB7a,IAEjFirF,EAAuB33F,KAAKwmB,mBAAmBe,iBAAiB,GAAiB7a,IAEjFwO,EAAU,CAAC,IAAI,KAAO,GAAiBxO,GAAI,GAAiBkrF,OAASF,EAAuB,KAAOA,EAAqBjwE,WAAa,IAAM,IAAK,mCAAoCznB,KAAK0mB,OAAOkwE,cAAe,WACjN,OAAO,GAAUx1F,OAAO,OAAQ,EAAQ,WACtC,OAAO,GAAYpB,KAAM,SAAU2Y,GAKjC,OAJI3Y,KAAK0mB,QACP1mB,KAAK0mB,OAAOmwE,MAAK,GAAO,GAGnB,CAAC,SAKV,IAAI,KAAO,GAAiBnqF,GAAI,GAAiBkrF,OAASD,EAAuB,KAAOA,EAAqBlwE,WAAa,IAAM,IAAK,iCAAkCznB,KAAK0mB,OAAOkwE,cAAe,WACpM,OAAO,GAAUx1F,OAAO,OAAQ,EAAQ,WACtC,OAAO,GAAYpB,KAAM,SAAU2Y,GAKjC,OAJI3Y,KAAK0mB,QACP1mB,KAAK0mB,OAAOmwE,MAAK,GAAM,GAGlB,CAAC,UAiEd,OA3DA72F,KAAKw0D,QAAU,IAAI,GAAuBx0D,KAAKqL,QAAS6P,EAASlb,KAAKu0D,eAEtEv0D,KAAKo3F,eAAep/E,KAAI,GAExBhY,KAAKw0D,QAAQ8a,WAAW,WACtB,OAAOluE,EAAMk2F,YACZt3F,KAAMA,KAAKm3F,iBAEdn3F,KAAKm3F,gBAAgB/oF,KAAKpO,KAAK0mB,QAE/B1mB,KAAKm3F,gBAAgB/oF,KAAKpO,KAAKw0D,UAE9B77C,EAAK3Y,KAAKm3F,iBAAiB/oF,KAAKkS,MAAM3H,EAAIuC,GAE3Clb,KAAKm3F,gBAAgB/oF,KAAKpO,KAAKw0D,QAAQ0/B,8BAA8B,SAAU7B,GAC7EjxF,EAAM+nF,eAAemB,eAAe,CAClC3sE,SAAU00E,EAAQ10E,SAClBxb,QAAS,CACP01F,QAAQ,EACRnL,gBAAgB,EAChBx/E,UAAW,KAAMkS,KAAKizE,GAAS5K,oBAEhCrmF,EAAMiK,SAAS/H,UAAKtB,EAAW,MAElCZ,EAAM02F,wBAAuB,MAG/B93F,KAAKm3F,gBAAgB/oF,KAAKpO,KAAKqL,QAAQe,iBAAiB,WACtD,OAAOhL,EAAMk2F,cAGft3F,KAAKm3F,gBAAgB/oF,KAAKpO,KAAK0mB,OAAOqxE,uBAAuB,SAAU74E,GAChEA,GAAW9d,EAAMslB,OAGpBtlB,EAAMslB,OAAO8vE,8BAA8B,WACpCp1F,EAAMozD,SAAYpzD,EAAMslB,QAI7BtlB,EAAMozD,QAAQugC,aAAa71E,EAAQ9d,EAAMslB,OAAO0D,QAAQlL,GAAS9d,EAAMslB,OAAOwuD,SAPhF9zE,EAAMk2F,cAYVt3F,KAAKm3F,gBAAgB/oF,KAAKpO,KAAK0mB,OAAOsxE,mBAAmB,WACvD,GAAK52F,EAAMozD,SAAYpzD,EAAMozD,QAAQtpD,UAAa9J,EAAMslB,OAAxD,CAIA,IAAIxH,EAAS9d,EAAMslB,OAAOuwE,qBAAqB71F,EAAMozD,QAAQtpD,UAEzDgU,EACF9d,EAAMozD,QAAQ+gC,aAAar2E,GAE3B9d,EAAMozD,QAAQghC,gBAIXx1F,KAAK0mB,QAGdwwE,EAAiBv2F,UAAUm3F,uBAAyB,SAAUG,QACxC,IAAhBA,IACFA,GAAc,GAGhBj4F,KAAKs3F,WAEDW,GACFj4F,KAAKqL,QAAQmK,SAIjB0hF,EAAiBv2F,UAAUgiB,KAAO,SAAUzD,GAC9Blf,KAAKu3F,mBACXlB,cAAgBn3E,GAGxBg4E,EAAiBv2F,UAAU82F,iBAAmB,SAAUS,GACtD,IAAI/zE,EAAcnkB,KAAKqL,QAAQyB,WAE1BqX,GAIAnkB,KAAK0mB,QAILwxE,EAAiB38E,KAAK,SAAU3E,GACnC,OAAOuN,EAAYrF,IAAIvd,aAAeqV,EAAErV,cAK1CvB,KAAK0mB,OAAO0vE,WAAWp2F,KAAKw3F,gBAG9BN,EAAiBv2F,UAAU62F,YAAc,WACvC,IAAI3qF,EAAQ7M,KAAKqL,QAAQyB,WAEzB,OAAKD,EAIE7M,KAAKke,eAAee,KAAK,CAC9BtB,SAAU9Q,EAAMiS,IAChBq5E,WAAY,KAAergD,MAAQ,KAAes8C,QAAU,KAAeM,OALpE,IASXwC,EAAiBxqF,GAAK,kCACtBwqF,EAAmB,GAAW,CAAC,GAAQ,EAAG,MAAiB,GAAQ,EAAG,MAAqB,GAAQ,EAAG,KAAgB,GAAQ,EAAG,MAAqB,GAAQ,EAAG,OAAsBA,GA/LzL,GAqMI,GAEJ,SAAUntF,GAGR,SAASquF,EAAuBn3E,EAAMo3E,EAAW3lF,GAC/C,IAAItR,EAAQ2I,EAAOE,KAAKjK,KAAM0S,IAAS1S,KAIvC,OAFAoB,EAAMk3F,QAAUr3E,EAChB7f,EAAMm3F,WAAaF,EACZj3F,EAmGT,OA1GA,GAAUg3F,EAAwBruF,GAUlCquF,EAAuBz3F,UAAU+J,IAAM,SAAUC,EAAUC,GACzD,IAAIxJ,EAAQpB,KAERomB,EAAgBzb,EAAS/J,IAAI,MAC7B+qF,EAAgBhhF,EAAS/J,IAAI,MAC7BiK,EAAa,GAAiBjK,IAAIgK,GAEtC,IAAKC,EACH,OAAO8R,QAAQC,aAAQ5a,GAGzB,IAAI6K,EAAQhC,EAAW0sF,mBAGvB,IAFa1qF,EAAMgqF,KAAK72F,KAAKs4F,SAAUt4F,KAAKu4F,cAE5Bv4F,KAAKu4F,WACnB,OAAO57E,QAAQC,aAAQ5a,GAIzB,IAAI66D,EAAUz2C,EAAcnH,KAAK,CAC/Bk5E,WAAY,KAAergD,MAAQ,KAAes8C,QAAU,KAAeM,OAC1ExlF,KAAKkpF,EAAuB7B,eAE/B,GAAuB,IAAnB15B,EAAQtwD,OACV,OAAOoQ,QAAQC,aAAQ5a,GAGzB,IAAImiB,EAAcvZ,EAAOkC,WAEzB,IAAKqX,EACH,OAAOxH,QAAQC,aAAQ5a,GAGzB,IAAIs0F,EAAYzpF,EAAMwpF,eAAiB,CACrC14E,SAAUwG,EAAYrF,IACtBo2E,SAAU,KAAep9C,MACzB7pC,gBAAiB,EACjBC,YAAa,EACbmD,cAAe,EACfC,UAAW,GAETyiE,EAAM,aAAalX,EAASy5B,EAAW8B,EAAuB7B,eAE9DxiB,EAAM,GAERA,GAAOA,EACPA,GAAOlX,EAAQtwD,QAEfwnE,EADS/zE,KAAKs4F,SACPvkB,EAAM,GAAKlX,EAAQtwD,QAEnBwnE,EAAMlX,EAAQtwD,OAAS,GAAKswD,EAAQtwD,OAG7C,IAAIisF,EAAY37B,EAAQkX,GAExB,OAAIykB,EAAU76E,SAASpc,aAAe4iB,EAAYrF,IAAIvd,YAGpDsL,EAAMgqF,KAAK72F,KAAKs4F,SAAS,GAClB37E,QAAQC,aAAQ5a,KAKzB6I,EAAWitF,yBACJnM,EAAcrB,eAAe,CAClC3sE,SAAU66E,EAAU76E,SACpBxb,QAAS,CACP01F,QAAQ,EACRnL,gBAAgB,EAChBC,iCAAiC,EACjCz/E,UAAWsrF,IAEZ5tF,GAAQtH,KAAK,SAAUsH,GACxB,GAAKA,EAIL,OAAOA,EAAOwkD,UAAUhuD,EAAM4E,IAAI0E,UAItC0tF,EAAuB7B,cAAgB,SAAUn7E,EAAGlS,GAClD,IAAIgvB,EAAM,aAAQ9c,EAAEuC,SAASpc,WAAY2H,EAAEyU,SAASpc,YAUpD,OARY,IAAR22B,IACFA,EAAM,KAAe/oB,QAAQiM,EAAE85E,SAAUhsF,EAAEgsF,WAGjC,IAARh9D,IACFA,EAAM,KAAMmN,yBAAyBjqB,EAAGlS,IAGnCgvB,GAGFkgE,EA3GT,CA4GE,KAEE,GAEJ,SAAUruF,GAGR,SAAS0uF,IACP,OAAO1uF,EAAOE,KAAKjK,MAAM,GAAM,EAAO,CACpCgG,GAAIyyF,EAAiB/rF,GACrBxC,MAAOuuF,EAAiBb,MACxBztF,MAAO,8BACPC,aAAc,IAAkB6I,SAChC5I,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,IAKTC,OAAQ,QAINzK,KAKR,OAxBA,GAAUy4F,EAAkB1uF,GAsB5B0uF,EAAiB/rF,GAAK,4BACtB+rF,EAAiBb,MAAQ9tF,EAAA,EAAa,0BAA2B,6CAC1D2uF,EAzBT,CA0BE,IAIE,GAEJ,SAAU1uF,GAGR,SAAS2uF,IACP,OAAO3uF,EAAOE,KAAKjK,MAAM,GAAO,EAAO,CACrCgG,GAAI0yF,EAAiBhsF,GACrBxC,MAAOwuF,EAAiBd,MACxBztF,MAAO,kCACPC,aAAc,IAAkB6I,SAChC5I,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,KAOTC,OAAQ,QAINzK,KAKR,OA1BA,GAAU04F,EAAkB3uF,GAwB5B2uF,EAAiBhsF,GAAK,4BACtBgsF,EAAiBd,MAAQ9tF,EAAA,EAAa,8BAA+B,iDAC9D4uF,EA3BT,CA4BE,IAEE,GAEJ,SAAU3uF,GAGR,SAAS4uF,IACP,OAAO5uF,EAAOE,KAAKjK,MAAM,GAAM,EAAM,CACnCgG,GAAI,mCACJkE,MAAOJ,EAAA,EAAa,iCAAkC,sDACtDK,MAAO,uCACPC,aAAc,IAAkB6I,SAChC5I,OAAQ,CACNC,OAAQ,IAAkBkL,MAC1BhL,QAAS,GAGTC,OAAQ,QAINzK,KAGR,OApBA,GAAU24F,EAAyB5uF,GAoB5B4uF,EArBT,CAsBE,IAEE,GAEJ,SAAU5uF,GAGR,SAAS6uF,IACP,OAAO7uF,EAAOE,KAAKjK,MAAM,GAAO,EAAM,CACpCgG,GAAI,mCACJkE,MAAOJ,EAAA,EAAa,qCAAsC,0DAC1DK,MAAO,2CACPC,aAAc,IAAkB6I,SAChC5I,OAAQ,CACNC,OAAQ,IAAkBkL,MAC1BhL,QAAS,KAKTC,OAAQ,QAINzK,KAGR,OAtBA,GAAU44F,EAAyB7uF,GAsB5B6uF,EAvBT,CAwBE,IAEF,YAA2B,IAC3B,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,IAAIvB,GAAqC,IAAI,KAAc,4BAA4B,GACnFwB,GAAgB,IAAcrgF,mBAAmB,GAAiB5X,KACtE,YAAsB,IAAIi4F,GAAc,CACtC7yF,GAAI,yBACJoE,aAAcitF,GACd5+E,QAAS,SAAiB2K,GACxB,OAAOA,EAAE00E,0BAEXztF,OAAQ,CACNI,OAAQ,IAGRH,OAAQ,IAAkBkL,MAC1BhL,QAAS,EAGTmL,UAAW,CAAC,UAQhB,IAAatF,eAAe,GAE1B,CACAC,MAAO,gBACPC,QAAS,CACPvK,GAAI,mCACJwK,MAAO1G,EAAA,EAAa,CAClB2G,IAAK,oBACLC,QAAS,CAAC,0BACT,mBAELC,MAAO,IAET,IAAaN,eAAe,GAE1B,CACAC,MAAO,gBACPC,QAAS,CACPvK,GAAI,mCACJwK,MAAO1G,EAAA,EAAa,CAClB2G,IAAK,wBACLC,QAAS,CAAC,0BACT,uBAELC,MAAO,I,WC12BL,GAEJ,WACE,SAASmoF,EAAiBjpF,EAAOkpF,EAA6BC,GAC5Dh5F,KAAKg5F,kBAAoBA,EACzBh5F,KAAKi5F,gBAAkB,IAAI,KAC3Bj5F,KAAKk5F,eAAiBl5F,KAAKi5F,gBAAgBp4F,MAC3Cb,KAAKm5F,kBAAoB,IAAI,KAC7Bn5F,KAAKo5F,iBAAmBp5F,KAAKm5F,kBAAkBt4F,MAC/Cb,KAAKq5F,yBAA2B,IAAI,KACpCr5F,KAAKs5F,wBAA0Bt5F,KAAKq5F,yBAAyBx4F,MAC7Db,KAAKu5F,cAAgB1pF,EACrB7P,KAAK6rE,OAASh8D,EACd7P,KAAKw5F,oBAAsBT,EAkE7B,OA/DA34F,OAAOM,eAAeo4F,EAAiBn4F,UAAW,QAAS,CACzDC,IAAK,WACH,OAAOZ,KAAK6rE,QAEd7zD,IAAK,SAAanI,GACZ7P,KAAK6rE,OAAOp8D,OAAOI,KAIvB7P,KAAK6rE,OAASh8D,EAEd7P,KAAKm5F,kBAAkBp3F,KAAK8N,KAE9B/O,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAeo4F,EAAiBn4F,UAAW,eAAgB,CAChEC,IAAK,WACH,OAAOZ,KAAKy5F,mBAAmBz5F,KAAKg5F,oBAEtCl4F,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAeo4F,EAAiBn4F,UAAW,qBAAsB,CACtEC,IAAK,WACH,OAAOZ,KAAKw5F,qBAEdxhF,IAAK,SAAayhF,GAChBz5F,KAAKw5F,oBAAsBC,EAEvBz5F,KAAKg5F,kBAAoBS,EAAmBltF,OAAS,IACvDvM,KAAKg5F,kBAAoB,GAG3Bh5F,KAAKq5F,yBAAyBt3F,KAAK/B,KAAK05F,eAE1C54F,YAAY,EACZC,cAAc,IAGhB+3F,EAAiBn4F,UAAUg5F,4BAA8B,WACvD35F,KAAKg5F,mBAAqBh5F,KAAKg5F,kBAAoB,GAAKh5F,KAAKy5F,mBAAmBltF,OAChFvM,KAAK45F,aAEL55F,KAAKq5F,yBAAyBt3F,KAAK/B,KAAK05F,eAG1CZ,EAAiBn4F,UAAUk5F,uBAAyB,SAAUhqF,EAAOiqF,GACnE,IAAK,IAAItrF,EAAI,EAAGA,EAAIxO,KAAKy5F,mBAAmBltF,OAAQiC,IAClD,GAAIsrF,IAAiB95F,KAAKy5F,mBAAmBjrF,GAAGtE,MAAO,CACrDlK,KAAKg5F,kBAAoBxqF,EAEzBxO,KAAKq5F,yBAAyBt3F,KAAK/B,KAAK05F,cAExC,QAKNZ,EAAiBn4F,UAAUi5F,WAAa,WACtC55F,KAAKi5F,gBAAgBl3F,KAAK/B,KAAK6rE,SAG1BitB,EA7ET,GCJI,I,OAAsC,WACxC,IAAI9vF,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,IAoCtC,GAAI4a,GAAA,EAEJ,GAEJ,SAAUra,GAGR,SAASgwF,EAAkBx4C,EAAW10C,EAAO4iC,GAC3C,IAAIruC,EAAQ2I,EAAOE,KAAKjK,OAASA,KAEjCoB,EAAMyL,MAAQA,EACdzL,EAAM4pB,QAAU,GAAE,uBAClB5G,GAAA,EAAWm9B,EAAWngD,EAAM4pB,SAC5B5pB,EAAM44F,gBAAkB51E,GAAA,EAAWhjB,EAAM4pB,QAAS,GAAE,kBACpD,IAAIivE,EAAW71E,GAAA,EAAWhjB,EAAM4pB,QAAS,GAAE,oBAwB3C,OAvBAivE,EAASpuE,MAAMwK,gBAAkB,KAAM6jE,OAAOC,IAAI/yF,OAAOhG,EAAMyL,MAAM0sF,eACrEn4F,EAAMi1B,gBAAkBoZ,EAAaM,WAAW7/B,SAAS,MAA0B,KAAMy/D,MAEzFvuE,EAAMsK,UAAU,YAA2B,SAAUqE,EAAOC,GAC1D5O,EAAMi1B,gBAAkBtmB,EAAMG,SAAS,MAA0B,KAAMy/D,SAGzEvuE,EAAMsK,UAAU0Y,GAAA,EAA0BhjB,EAAM44F,gBAAiB51E,GAAA,EAAcg2E,MAAO,WACpF,OAAOh5F,EAAMyL,MAAM8sF,iCAGrBv4F,EAAMsK,UAAU0Y,GAAA,EAA0B61E,EAAU71E,GAAA,EAAcg2E,MAAO,WACvEh5F,EAAMyL,MAAMgD,MAAQzO,EAAMyL,MAAM0sF,cAEhCn4F,EAAMyL,MAAM+sF,gBAGdx4F,EAAMsK,UAAUmB,EAAMusF,iBAAiBh4F,EAAMg4F,iBAAkBh4F,IAE/DA,EAAMsK,UAAUmB,EAAMysF,wBAAwBl4F,EAAMk4F,wBAAyBl4F,IAE7EA,EAAM44F,gBAAgBnuE,MAAMwK,gBAAkB,KAAM6jE,OAAOC,IAAI/yF,OAAOyF,EAAMgD,OAC5EuU,GAAA,EAAgBhjB,EAAM44F,gBAAiB,QAASntF,EAAMgD,MAAMimB,KAAK1a,EAAI,GAAMha,EAAMi1B,gBAAgBgkE,YAAcxtF,EAAMgD,MAAMwqF,aACpHj5F,EAaT,OA9CA,GAAU24F,EAAmBhwF,GAoC7BgwF,EAAkBp5F,UAAUy4F,iBAAmB,SAAUvpF,GACvD7P,KAAKg6F,gBAAgBnuE,MAAMwK,gBAAkB,KAAM6jE,OAAOC,IAAI/yF,OAAOyI,GACrEuU,GAAA,EAAgBpkB,KAAKg6F,gBAAiB,QAASnqF,EAAMimB,KAAK1a,EAAI,GAAMpb,KAAKq2B,gBAAgBgkE,YAAcxqF,EAAMwqF,aAC7Gr6F,KAAKs5F,2BAGPS,EAAkBp5F,UAAU24F,wBAA0B,WACpDt5F,KAAKg6F,gBAAgB3gF,YAAcrZ,KAAK6M,MAAM6sF,aAAe15F,KAAK6M,MAAM6sF,aAAaxvF,MAAQ,IAGxF6vF,EA/CT,CAgDE,KAIE,GAEJ,SAAUhwF,GAGR,SAASuwF,EAAgB/4C,EAAW10C,EAAO0tF,GACzC,IAAIn5F,EAAQ2I,EAAOE,KAAKjK,OAASA,KA8BjC,OA5BAoB,EAAMyL,MAAQA,EACdzL,EAAMm5F,WAAaA,EACnBn5F,EAAM4pB,QAAU,GAAE,qBAClB5G,GAAA,EAAWm9B,EAAWngD,EAAM4pB,SAC5B5pB,EAAMo5F,cAAgB,IAAI,GAAcp5F,EAAM4pB,QAAS5pB,EAAMyL,MAAOzL,EAAMm5F,YAE1En5F,EAAMsK,UAAUtK,EAAMo5F,eAEtBp5F,EAAMsK,UAAUtK,EAAMo5F,cAAcj9E,YAAYnc,EAAMq5F,2BAA4Br5F,IAElFA,EAAMsK,UAAUtK,EAAMo5F,cAActB,eAAe93F,EAAMw4F,WAAYx4F,IAErEA,EAAMs5F,aAAe,IAAI,GAAat5F,EAAM4pB,QAAS5pB,EAAMyL,OAE3DzL,EAAMsK,UAAUtK,EAAMs5F,cAEtBt5F,EAAMsK,UAAUtK,EAAMs5F,aAAan9E,YAAYnc,EAAMu5F,mBAAoBv5F,IAEzEA,EAAMsK,UAAUtK,EAAMs5F,aAAaxB,eAAe93F,EAAMw4F,WAAYx4F,IAEpEA,EAAMw5F,SAAW,IAAI,GAASx5F,EAAM4pB,QAAS5pB,EAAMyL,OAEnDzL,EAAMsK,UAAUtK,EAAMw5F,UAEtBx5F,EAAMsK,UAAUtK,EAAMw5F,SAASr9E,YAAYnc,EAAMy5F,eAAgBz5F,IAEjEA,EAAMsK,UAAUtK,EAAMw5F,SAAS1B,eAAe93F,EAAMw4F,WAAYx4F,IAEzDA,EA+BT,OAhEA,GAAUk5F,EAAiBvwF,GAoC3BuwF,EAAgB35F,UAAUi5F,WAAa,WACrC55F,KAAK6M,MAAM+sF,cAGbU,EAAgB35F,UAAU85F,2BAA6B,SAAU9hF,GAC/D,IAAIzH,EAAIyH,EAAGzH,EACPgR,EAAIvJ,EAAGuJ,EACP44E,EAAO96F,KAAK6M,MAAMgD,MAAMirF,KAC5B96F,KAAK6M,MAAMgD,MAAQ,IAAI,KAAM,IAAI,KAAKirF,EAAKC,EAAG7pF,EAAGgR,EAAG44E,EAAK1/E,KAG3Dk/E,EAAgB35F,UAAUg6F,mBAAqB,SAAUv/E,GACvD,IAAI0/E,EAAO96F,KAAK6M,MAAMgD,MAAMirF,KAC5B96F,KAAK6M,MAAMgD,MAAQ,IAAI,KAAM,IAAI,KAAKirF,EAAKC,EAAGD,EAAK5pF,EAAG4pF,EAAK54E,EAAG9G,KAGhEk/E,EAAgB35F,UAAUk6F,eAAiB,SAAUt4F,GACnD,IAAIu4F,EAAO96F,KAAK6M,MAAMgD,MAAMirF,KACxBC,EAAkB,KAAb,EAAIx4F,GACbvC,KAAK6M,MAAMgD,MAAQ,IAAI,KAAM,IAAI,KAAW,MAANkrF,EAAY,EAAIA,EAAGD,EAAK5pF,EAAG4pF,EAAK54E,EAAG44E,EAAK1/E,KAGhFk/E,EAAgB35F,UAAU4jD,OAAS,WACjCvkD,KAAKw6F,cAAcj2C,SACnBvkD,KAAK06F,aAAan2C,SAClBvkD,KAAK46F,SAASr2C,UAGT+1C,EAjET,CAkEE,KAIE,GAEJ,SAAUvwF,GAGR,SAASixF,EAAcz5C,EAAW10C,EAAO0tF,GACvC,IAAIn5F,EAAQ2I,EAAOE,KAAKjK,OAASA,KA2BjC,OAzBAoB,EAAMyL,MAAQA,EACdzL,EAAMm5F,WAAaA,EACnBn5F,EAAMnB,aAAe,IAAI,KACzBmB,EAAMmc,YAAcnc,EAAMnB,aAAaY,MACvCO,EAAM63F,gBAAkB,IAAI,KAC5B73F,EAAM83F,eAAiB93F,EAAM63F,gBAAgBp4F,MAC7CO,EAAM4pB,QAAU,GAAE,oBAClB5G,GAAA,EAAWm9B,EAAWngD,EAAM4pB,SAE5B5pB,EAAM65F,OAASxmF,SAASyE,cAAc,UACtC9X,EAAM65F,OAAOtrF,UAAY,iBACzByU,GAAA,EAAWhjB,EAAM4pB,QAAS5pB,EAAM65F,QAEhC75F,EAAM8L,UAAY,GAAE,yBACpBkX,GAAA,EAAWhjB,EAAM4pB,QAAS5pB,EAAM8L,WAEhC9L,EAAMmjD,SAENnjD,EAAMsK,UAAU0Y,GAAA,EAA0BhjB,EAAM4pB,QAAS5G,GAAA,EAAc82E,WAAY,SAAUhvF,GAC3F,OAAO9K,EAAM4+B,YAAY9zB,MAG3B9K,EAAMsK,UAAUtK,EAAMyL,MAAMusF,iBAAiBh4F,EAAMg4F,iBAAkBh4F,IAErEA,EAAMwjB,QAAU,KACTxjB,EAqFT,OAnHA,GAAU45F,EAAejxF,GAiCzBixF,EAAcr6F,UAAUq/B,YAAc,SAAU9zB,GAC9C,IAAI9K,EAAQpB,KAEZA,KAAK4kB,QAAU5kB,KAAK0L,UAAU,IAAI,MAClC,IAAIyvF,EAAS/2E,GAAA,EAA2BpkB,KAAKgrB,SAEzC9e,EAAEpJ,SAAW9C,KAAKkN,WACpBlN,KAAKo7F,oBAAoBlvF,EAAEk2D,QAASl2D,EAAEmvF,SAGxCr7F,KAAK4kB,QAAQC,gBAAgB,KAAyB,SAAUhkB,GAC9D,OAAOO,EAAMg6F,oBAAoBv6F,EAAM2jB,KAAO22E,EAAO3pF,KAAM3Q,EAAMu8B,KAAO+9D,EAAOt3E,MAC9E,WACD,OAAO,OAET,IAAIy3E,EAAkBl3E,GAAA,EAA0B3P,SAAU2P,GAAA,EAAcm3E,SAAU,WAChFn6F,EAAM63F,gBAAgBl3F,OAEtBu5F,EAAgB75F,UAEZL,EAAMwjB,UACRxjB,EAAMwjB,QAAQ42E,gBAAe,GAE7Bp6F,EAAMwjB,QAAU,QAEjB,IAGLo2E,EAAcr6F,UAAUy6F,oBAAsB,SAAU5pF,EAAMqS,GAC5D,IAAI3S,EAAI7P,KAAKw5B,IAAI,EAAGx5B,KAAK8sE,IAAI,EAAG38D,EAAOxR,KAAKo2B,QACxClU,EAAI7gB,KAAKw5B,IAAI,EAAGx5B,KAAK8sE,IAAI,EAAG,EAAItqD,EAAM7jB,KAAK8jB,SAC/C9jB,KAAKy7F,eAAevqF,EAAGgR,GAEvBliB,KAAKC,aAAa8B,KAAK,CACrBmP,EAAGA,EACHgR,EAAGA,KAIP84E,EAAcr6F,UAAU4jD,OAAS,WAC/BvkD,KAAKo2B,MAAQp2B,KAAKgrB,QAAQ0wE,YAC1B17F,KAAK8jB,OAAS9jB,KAAKgrB,QAAQ2wE,aAC3B37F,KAAKi7F,OAAO7kE,MAAQp2B,KAAKo2B,MAAQp2B,KAAKu6F,WACtCv6F,KAAKi7F,OAAOn3E,OAAS9jB,KAAK8jB,OAAS9jB,KAAKu6F,WACxCv6F,KAAK47F,QACL,IAAId,EAAO96F,KAAK6M,MAAMgD,MAAMirF,KAC5B96F,KAAKy7F,eAAeX,EAAK5pF,EAAG4pF,EAAK54E,IAGnC84E,EAAcr6F,UAAUi7F,MAAQ,WAC9B,IAAId,EAAO96F,KAAK6M,MAAMgD,MAAMirF,KACxBe,EAAiB,IAAI,KAAM,IAAI,KAAKf,EAAKC,EAAG,EAAG,EAAG,IAClDe,EAAM97F,KAAKi7F,OAAOhzC,WAAW,MAC7B8zC,EAAgBD,EAAIE,qBAAqB,EAAG,EAAGh8F,KAAKi7F,OAAO7kE,MAAO,GACtE2lE,EAAcE,aAAa,EAAG,0BAC9BF,EAAcE,aAAa,GAAK,4BAChCF,EAAcE,aAAa,EAAG,0BAC9B,IAAIC,EAAgBJ,EAAIE,qBAAqB,EAAG,EAAG,EAAGh8F,KAAKi7F,OAAOn3E,QAClEo4E,EAAcD,aAAa,EAAG,oBAC9BC,EAAcD,aAAa,EAAG,oBAC9BH,EAAIK,KAAK,EAAG,EAAGn8F,KAAKi7F,OAAO7kE,MAAOp2B,KAAKi7F,OAAOn3E,QAC9Cg4E,EAAIM,UAAY,KAAMlC,OAAOC,IAAI/yF,OAAOy0F,GACxCC,EAAIO,OACJP,EAAIM,UAAYL,EAChBD,EAAIO,OACJP,EAAIM,UAAYF,EAChBJ,EAAIO,QAGNrB,EAAcr6F,UAAU86F,eAAiB,SAAUvqF,EAAGgR,GACpDliB,KAAKkN,UAAU2e,MAAMra,KAAON,EAAIlR,KAAKo2B,MAAQ,KAC7Cp2B,KAAKkN,UAAU2e,MAAMhI,IAAM7jB,KAAK8jB,OAAS5B,EAAIliB,KAAK8jB,OAAS,MAG7Dk3E,EAAcr6F,UAAUy4F,iBAAmB,WACrCp5F,KAAK4kB,SAAW5kB,KAAK4kB,QAAQ03E,gBAIjCt8F,KAAK47F,SAGAZ,EApHT,CAqHE,KAEE,GAEJ,SAAUjxF,GAGR,SAASwyF,EAAMh7C,EAAW10C,GACxB,IAAIzL,EAAQ2I,EAAOE,KAAKjK,OAASA,KAkBjC,OAhBAoB,EAAMyL,MAAQA,EACdzL,EAAMnB,aAAe,IAAI,KACzBmB,EAAMmc,YAAcnc,EAAMnB,aAAaY,MACvCO,EAAM63F,gBAAkB,IAAI,KAC5B73F,EAAM83F,eAAiB93F,EAAM63F,gBAAgBp4F,MAC7CO,EAAM4pB,QAAU5G,GAAA,EAAWm9B,EAAW,GAAE,WACxCngD,EAAMo7F,QAAUp4E,GAAA,EAAWhjB,EAAM4pB,QAAS,GAAE,aAC5C5pB,EAAMq7F,OAASr4E,GAAA,EAAWhjB,EAAM4pB,QAAS,GAAE,YAC3C5pB,EAAMq7F,OAAO5wE,MAAMhI,IAAM,MAEzBziB,EAAMsK,UAAU0Y,GAAA,EAA0BhjB,EAAM4pB,QAAS5G,GAAA,EAAc82E,WAAY,SAAUhvF,GAC3F,OAAO9K,EAAM4+B,YAAY9zB,MAG3B9K,EAAMmjD,SAECnjD,EA8CT,OAnEA,GAAUm7F,EAAOxyF,GAwBjBwyF,EAAM57F,UAAU4jD,OAAS,WACvBvkD,KAAK8jB,OAAS9jB,KAAKgrB,QAAQ2wE,aAAe37F,KAAKy8F,OAAOd,aACtD,IAAIp5F,EAAQvC,KAAKg1B,SAASh1B,KAAK6M,MAAMgD,OACrC7P,KAAK08F,qBAAqBn6F,IAG5Bg6F,EAAM57F,UAAUq/B,YAAc,SAAU9zB,GACtC,IAAI9K,EAAQpB,KAER4kB,EAAU5kB,KAAK0L,UAAU,IAAI,MAE7ByvF,EAAS/2E,GAAA,EAA2BpkB,KAAKgrB,SAC7C5G,GAAA,EAAapkB,KAAKgrB,QAAS,YAEvB9e,EAAEpJ,SAAW9C,KAAKy8F,QACpBz8F,KAAK28F,eAAezwF,EAAEmvF,SAGxBz2E,EAAQC,gBAAgB,KAAyB,SAAUhkB,GACzD,OAAOO,EAAMu7F,eAAe97F,EAAMu8B,KAAO+9D,EAAOt3E,MAC/C,WACD,OAAO,OAET,IAAIy3E,EAAkBl3E,GAAA,EAA0B3P,SAAU2P,GAAA,EAAcm3E,SAAU,WAChFn6F,EAAM63F,gBAAgBl3F,OAEtBu5F,EAAgB75F,UAChBmjB,EAAQ42E,gBAAe,GACvBp3E,GAAA,EAAgBhjB,EAAM4pB,QAAS,cAC9B,IAGLuxE,EAAM57F,UAAUg8F,eAAiB,SAAU94E,GACzC,IAAIthB,EAAQlB,KAAKw5B,IAAI,EAAGx5B,KAAK8sE,IAAI,EAAG,EAAItqD,EAAM7jB,KAAK8jB,SACnD9jB,KAAK08F,qBAAqBn6F,GAE1BvC,KAAKC,aAAa8B,KAAKQ,IAGzBg6F,EAAM57F,UAAU+7F,qBAAuB,SAAUn6F,GAC/CvC,KAAKy8F,OAAO5wE,MAAMhI,KAAO,EAAIthB,GAASvC,KAAK8jB,OAAS,MAG/Cy4E,EApET,CAqEE,KAEE,GAEJ,SAAUxyF,GAGR,SAAS6yF,EAAar7C,EAAW10C,GAC/B,IAAIzL,EAAQ2I,EAAOE,KAAKjK,KAAMuhD,EAAW10C,IAAU7M,KAQnD,OANAokB,GAAA,EAAahjB,EAAM4pB,QAAS,iBAE5B5pB,EAAMsK,UAAUmB,EAAMusF,iBAAiBh4F,EAAMg4F,iBAAkBh4F,IAE/DA,EAAMg4F,iBAAiBh4F,EAAMyL,MAAMgD,OAE5BzO,EAiBT,OA5BA,GAAUw7F,EAAc7yF,GAcxB6yF,EAAaj8F,UAAUy4F,iBAAmB,SAAUvpF,GAClD,IAAI8I,EAAK9I,EAAMimB,KACXlf,EAAI+B,EAAG/B,EACP6K,EAAI9I,EAAG8I,EACPvY,EAAIyP,EAAGzP,EACP2zF,EAAS,IAAI,KAAM,IAAI,KAAKjmF,EAAG6K,EAAGvY,EAAG,IACrCgyE,EAAc,IAAI,KAAM,IAAI,KAAKtkE,EAAG6K,EAAGvY,EAAG,IAC9ClJ,KAAKw8F,QAAQ3wE,MAAMzR,WAAa,8BAAgCyiF,EAAS,QAAU3hB,EAAc,UAGnG0hB,EAAaj8F,UAAUq0B,SAAW,SAAUnlB,GAC1C,OAAOA,EAAMirF,KAAK1/E,GAGbwhF,EA7BT,CA8BE,IAEE,GAEJ,SAAU7yF,GAGR,SAAS+yF,EAASv7C,EAAW10C,GAC3B,IAAIzL,EAAQ2I,EAAOE,KAAKjK,KAAMuhD,EAAW10C,IAAU7M,KAGnD,OADAokB,GAAA,EAAahjB,EAAM4pB,QAAS,aACrB5pB,EAOT,OAbA,GAAU07F,EAAU/yF,GASpB+yF,EAASn8F,UAAUq0B,SAAW,SAAUnlB,GACtC,OAAO,EAAIA,EAAMirF,KAAKC,EAAI,KAGrB+B,EAdT,CAeE,IAEE,GAEJ,SAAU/yF,GAGR,SAASgzF,EAAkBx7C,EAAW10C,EAAO0tF,EAAY9qD,GACvD,IAAIruC,EAAQ2I,EAAOE,KAAKjK,OAASA,KAEjCoB,EAAMyL,MAAQA,EACdzL,EAAMm5F,WAAaA,EAEnBn5F,EAAMsK,UAAU,aAAqB,WACnC,OAAOtK,EAAMmjD,YAGf,IAAIjzB,EAAU,GAAE,uBAChBiwB,EAAUjoC,YAAYgY,GACtB,IAAI4lB,EAAS,IAAI,GAAkB5lB,EAASlwB,EAAMyL,MAAO4iC,GAOzD,OANAruC,EAAMigB,KAAO,IAAI,GAAgBiQ,EAASlwB,EAAMyL,MAAOzL,EAAMm5F,YAE7Dn5F,EAAMsK,UAAUwrC,GAEhB91C,EAAMsK,UAAUtK,EAAMigB,MAEfjgB,EAOT,OA5BA,GAAU27F,EAAmBhzF,GAwB7BgzF,EAAkBp8F,UAAU4jD,OAAS,WACnCvkD,KAAKqhB,KAAKkjC,UAGLw4C,EA7BT,CA8BE,MCtbK,SAASC,GAASnwF,EAAO3B,EAAU2Q,GACxC,IACIa,EADW,KAAsBsN,QAAQnd,GACrBI,IAAI,SAAU47D,GACpC,OAAOlsD,QAAQC,QAAQisD,EAAQo0B,aAAapwF,EAAO3B,EAAU2Q,IAAQvY,KAAK,SAAUs6B,GAClF,OAAOA,GAYb,SAAiBvrB,GACf,IAAI6qF,EAAmC,qBAAjB7qF,EAAO5E,MACzB0vF,EAA4C,qBAApB9qF,EAAO+qF,UAA4B/qF,EAAO+qF,UAAY/qF,EAAO+qF,SAAS7wF,OAAS,EAC3G,OAAO2wF,GAAYC,EAfC,CAAQv/D,GAASA,OAAQ57B,GACxC,SAAUqb,GACX,aAA0BA,OAI9B,OAAOV,QAAQR,IAAIO,GAAUpZ,KAAK,MAEpC,YAA+B,wBAAyB,SAAUuJ,EAAO3B,GACvE,OAAO8xF,GAASnwF,EAAO3B,EAAU,KAAkB4S,QCfrD,IAAI,GAEJ,WACE,SAASu/E,EAAeC,EAAUC,EAAS9rE,EAAO+rE,EAAUC,GAC1D,IAAIr8F,EAAQpB,KAEZA,KAAK09F,UAAYJ,EACjBt9F,KAAK4f,OAAS,EAGd5f,KAAK29F,WAAaF,EAClBz9F,KAAK49F,oBAAsB,IAAI,IAAiB,WAC9C,OAAOx8F,EAAMy8F,4BACZ,GACH79F,KAAK89F,qBAAuB,IAAI,IAAiB,WAC/C,OAAO18F,EAAM28F,2BACZ,GACH/9F,KAAKg+F,yBAA2B,IAAI,IAAiB,WACnD,OAAO58F,EAAM68F,uBACZ,GACHj+F,KAAKk+F,yBAA2B,KAChCl+F,KAAKm+F,8BAA+B,EACpCn+F,KAAKo+F,kBAAoBb,EACzBv9F,KAAKq+F,eAAiB5sE,EACtBzxB,KAAKs+F,kBAAoBd,EA0L3B,OAvLAH,EAAe18F,UAAU49F,aAAe,SAAUd,GAChDz9F,KAAK29F,WAAaF,GAGpBJ,EAAe18F,UAAU69F,eAAiB,WACxC,OAAOx+F,KAAK29F,WAAa,GAG3BN,EAAe18F,UAAU89F,gBAAkB,WACzC,OAAOz+F,KAAK29F,WAAa,GAG3BN,EAAe18F,UAAU+9F,oBAAsB,WAC7C,OAAO,EAAI1+F,KAAK29F,YAGlBN,EAAe18F,UAAUk9F,yBAA2B,WAClD,IAAIz8F,EAAQpB,KAEZA,KAAK4f,OAAS,EAId5f,KAAK89F,qBAAqB9xF,SAAShM,KAAKy+F,mBAEpCz+F,KAAK09F,UAAUiB,cACjB3+F,KAAKm+F,8BAA+B,EACpCn+F,KAAKk+F,yBAA2B,YAAwB,SAAUriF,GAChE,OAAOza,EAAMs8F,UAAUiB,aAAa9iF,KAGtC7b,KAAKk+F,yBAAyB56F,KAAK,SAAUs7F,GAC3Cx9F,EAAM+8F,8BAA+B,EAErC/8F,EAAMy9F,iBAAiBD,IACtB,SAAU1yF,GACX,OAAO9K,EAAM09F,SAAS5yF,MAGxBlM,KAAKm+F,8BAA+B,GAIxCd,EAAe18F,UAAUo9F,wBAA0B,WAC7C/9F,KAAK09F,UAAUqB,aACjB/+F,KAAK09F,UAAUsB,SAASh/F,KAAK09F,UAAUqB,eAAe,GAGpD/+F,KAAKm+F,8BACPn+F,KAAK4f,OAAS,EAId5f,KAAKi/F,YAAYj/F,KAAK09F,UAAUwB,eAEhCl/F,KAAK4f,OAAS,EAId5f,KAAKm/F,YAAYn/F,KAAK09F,UAAUwB,eAIpC7B,EAAe18F,UAAUs9F,oBAAsB,WACzB,IAAhBj+F,KAAK4f,QAGL5f,KAAKm/F,YAAYn/F,KAAK09F,UAAU0B,gCAItC/B,EAAe18F,UAAUk+F,iBAAmB,SAAUD,GAChDA,GACF5+F,KAAK09F,UAAUsB,SAASJ,GAAa,GAGnB,IAAhB5+F,KAAK4f,SAGL5f,KAAK4f,OAAS,EAId5f,KAAKi/F,YAAYj/F,KAAK09F,UAAUwB,eAItC7B,EAAe18F,UAAUs+F,YAAc,SAAU18F,GAC3CvC,KAAKo+F,mBACPp+F,KAAKo+F,kBAAkB77F,IAI3B86F,EAAe18F,UAAUm+F,SAAW,SAAUrtE,GACxCzxB,KAAKq+F,eACPr+F,KAAKq+F,eAAe5sE,GAEpB,aAAkBA,IAItB4rE,EAAe18F,UAAUw+F,YAAc,SAAU58F,GAC3CvC,KAAKs+F,mBACPt+F,KAAKs+F,kBAAkB/7F,IAI3B86F,EAAe18F,UAAU4S,MAAQ,SAAUhQ,GACzC,GAAa,IAATA,EAGoB,IAAhBvD,KAAK4f,SAGL5f,KAAK4f,OAAS,EAId5f,KAAK49F,oBAAoB5xF,SAAShM,KAAKw+F,kBAEvCx+F,KAAKg+F,yBAAyBhyF,SAAShM,KAAK0+F,6BAGlD,OAAQ1+F,KAAK4f,QACX,KAAK,EAGH5f,KAAK69F,2BAEL79F,KAAK89F,qBAAqBrgF,SAE1Bzd,KAAK+9F,0BAEL,MAEF,KAAK,EAGH/9F,KAAK89F,qBAAqBrgF,SAE1Bzd,KAAK+9F,4BAObV,EAAe18F,UAAU8c,OAAS,WAChCzd,KAAKg+F,yBAAyBvgF,SAEV,IAAhBzd,KAAK4f,QAGL5f,KAAK49F,oBAAoBngF,SAGT,IAAhBzd,KAAK4f,SAGL5f,KAAK89F,qBAAqBrgF,SAEtBzd,KAAKk+F,2BACPl+F,KAAKk+F,yBAAyBzgF,SAE9Bzd,KAAKk+F,yBAA2B,OAIlB,IAAhBl+F,KAAK4f,QAGD5f,KAAKk+F,2BACPl+F,KAAKk+F,yBAAyBzgF,SAE9Bzd,KAAKk+F,yBAA2B,MAItCl+F,KAAK4f,OAAS,GAKTy9E,EAhNT,GCLI,GAAsC,WACxC,IAAIr0F,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA+BtC,GAEJ,SAAUO,GAGR,SAASs1F,EAAmBr5F,EAAI4E,GAC9B,IAAIxJ,EAAQ2I,EAAOE,KAAKjK,OAASA,KA2CjC,OAzCAoB,EAAMk+F,YAAc,GAEpBl+F,EAAMyX,qBAAsB,EAC5BzX,EAAMuW,IAAM3R,EACZ5E,EAAMiK,QAAUT,EAChBxJ,EAAMwuC,YAAa,EACnBxuC,EAAMm+F,kBAAoB9qF,SAASyE,cAAc,OACjD9X,EAAMm+F,kBAAkB5vF,UAAY,6BACpCvO,EAAMm+F,kBAAkBrxD,SAAW,EACnC9sC,EAAM6X,SAAWxE,SAASyE,cAAc,OACxC9X,EAAM6X,SAAStJ,UAAY,8BAC3BvO,EAAM2jF,UAAY,IAAI,KAAqB3jF,EAAM6X,SAAU,IAE3D7X,EAAMk+F,YAAYlxF,KAAKhN,EAAM2jF,WAE7B3jF,EAAMm+F,kBAAkBjmF,YAAYlY,EAAM2jF,UAAUnrE,cAEpDxY,EAAMotC,UAAUptC,EAAMm+F,kBAAmB,SAAUrzF,GAC7CA,EAAEuD,OAAO,IAGXrO,EAAMujB,SAIVvjB,EAAMsK,UAAUtK,EAAMiK,QAAQiB,yBAAyB,SAAUJ,GAC3DA,EAAEwZ,UACJtkB,EAAMo+F,gBAIVp+F,EAAMiK,QAAQ2lB,kBAAkB,SAAU9kB,GACxC,OAAO9K,EAAMmjD,WAGfnjD,EAAMmjD,SAENnjD,EAAMiK,QAAQmO,iBAAiBpY,GAE/BA,EAAMq+F,gBAAkB,KACxBr+F,EAAMs+F,aAAe,KACdt+F,EAsHT,OApKA,GAAUi+F,EAAoBt1F,GAiD9B3J,OAAOM,eAAe2+F,EAAmB1+F,UAAW,YAAa,CAC/DC,IAAK,WACH,OAAOZ,KAAK4vC,YAEd53B,IAAK,SAAazV,GAChBvC,KAAK4vC,WAAartC,EAClB,aAAYvC,KAAKu/F,kBAAmB,UAAWv/F,KAAK4vC,aAEtD9uC,YAAY,EACZC,cAAc,IAGhBs+F,EAAmB1+F,UAAUgM,MAAQ,WACnC,OAAO3M,KAAK2X,KAGd0nF,EAAmB1+F,UAAUiZ,WAAa,WACxC,OAAO5Z,KAAKu/F,mBAGdF,EAAmB1+F,UAAU2gC,OAAS,SAAUp2B,EAAUuC,EAAO+H,GAE/DxV,KAAKy/F,gBAAkBv0F,EACvBlL,KAAK0/F,aAAejyF,EACpBzN,KAAKonB,WAAY,EAEjBpnB,KAAKqL,QAAQya,oBAAoB9lB,MAIjCA,KAAKqL,QAAQoY,SAEbzjB,KAAK2/F,YAAcnqF,EAEfA,GACFxV,KAAKu/F,kBAAkB/pF,SAI3B6pF,EAAmB1+F,UAAUgkB,KAAO,WAC7B3kB,KAAKonB,YAIVpnB,KAAKonB,WAAY,EAEjBpnB,KAAKqL,QAAQya,oBAAoB9lB,MAE7BA,KAAK2/F,aACP3/F,KAAKqL,QAAQmK,UAIjB6pF,EAAmB1+F,UAAUmT,YAAc,WACzC,OAAI9T,KAAKonB,UACA,CACLlc,SAAUlL,KAAKy/F,gBACfhyF,MAAOzN,KAAK0/F,aACZ1lF,WAAY,CAAC,EAEX,IAMC,MAGTqlF,EAAmB1+F,UAAUc,QAAU,WACrCzB,KAAKqL,QAAQ0O,oBAAoB/Z,MAEjCA,KAAKs/F,YAAc,YAAQt/F,KAAKs/F,aAEhCv1F,EAAOpJ,UAAUc,QAAQwI,KAAKjK,OAGhCq/F,EAAmB1+F,UAAU6+F,WAAa,WACxC,IAAIp+F,EAAQpB,KAEMqJ,MAAM1I,UAAU2sC,MAAMrjC,KAAKjK,KAAKiZ,SAAS2mF,uBAAuB,SACtE9xF,QAAQ,SAAUysE,GAC5B,OAAOn5E,EAAMiK,QAAQynF,cAAcvY,MAIvC8kB,EAAmB1+F,UAAUk/F,eAAiB,SAAUtlB,GACtDv6E,KAAKiZ,SAASI,YAAc,GAE5BrZ,KAAKiZ,SAASK,YAAYihE,GAE1Bv6E,KAAKw/F,aAELx/F,KAAKqL,QAAQya,oBAAoB9lB,MAEjCA,KAAK8/F,oBAGPT,EAAmB1+F,UAAUm/F,iBAAmB,WAC9C9/F,KAAK+kF,UAAUgb,eAGjBV,EAAmB1+F,UAAU4jD,OAAS,WACpC,IAAIzgC,EAASziB,KAAKw5B,IAAI76B,KAAKqL,QAAQ04B,gBAAgBjgB,OAAS,EAAG,KAE3DnL,EAAK3Y,KAAKqL,QAAQQ,mBAAmB6Z,SACrCqG,EAAWpT,EAAGoT,SACd1H,EAAa1L,EAAG0L,WAEpBrkB,KAAKiZ,SAAS4S,MAAME,SAAWA,EAAW,KAC1C/rB,KAAKiZ,SAAS4S,MAAMxH,WAAaA,EAAa,KAC9CrkB,KAAKiZ,SAAS4S,MAAMm0E,UAAYl8E,EAAS,KACzC9jB,KAAKiZ,SAAS4S,MAAM+iC,SAAWvtD,KAAKw5B,IAAyC,IAArC76B,KAAKqL,QAAQ04B,gBAAgB3N,MAAc,KAAO,MAGrFipE,EArKT,CAsKE,MAIE,GAEJ,SAAUt1F,GAGR,SAASk2F,EAAiBj6F,EAAI4E,GAC5B,IAAIxJ,EAAQ2I,EAAOE,KAAKjK,OAASA,KAsBjC,OApBAoB,EAAMuW,IAAM3R,EACZ5E,EAAMiK,QAAUT,EAChBxJ,EAAMwuC,YAAa,EACnBxuC,EAAM6X,SAAWxE,SAASyE,cAAc,OACxC9X,EAAM6X,SAAStJ,UAAY,6BAE3BvO,EAAM6X,SAASk1B,aAAa,cAAe,QAE3C/sC,EAAM6X,SAASk1B,aAAa,OAAQ,gBAEpC/sC,EAAM8+F,mBAAqB,EAE3B9+F,EAAMsK,UAAUtK,EAAMiK,QAAQiB,yBAAyB,SAAUJ,GAC3DA,EAAEwZ,UACJtkB,EAAMo+F,gBAIVp+F,EAAMiK,QAAQglC,iBAAiBjvC,GAExBA,EAgFT,OAzGA,GAAU6+F,EAAkBl2F,GA4B5B3J,OAAOM,eAAeu/F,EAAiBt/F,UAAW,YAAa,CAC7DC,IAAK,WACH,OAAOZ,KAAK4vC,YAEd53B,IAAK,SAAazV,GAChBvC,KAAK4vC,WAAartC,EAClB,aAAYvC,KAAKiZ,SAAU,UAAWjZ,KAAK4vC,aAE7C9uC,YAAY,EACZC,cAAc,IAGhBk/F,EAAiBt/F,UAAUgM,MAAQ,WACjC,OAAO3M,KAAK2X,KAGdsoF,EAAiBt/F,UAAUiZ,WAAa,WACtC,OAAO5Z,KAAKiZ,UAGdgnF,EAAiBt/F,UAAU2gC,OAAS,SAAU5zB,GAC5C1N,KAAKkgG,kBAAoBxyF,EAEpB1N,KAAKonB,YACRpnB,KAAKonB,WAAY,GAGnB,IAAI+4E,EAAengG,KAAKqL,QAAQ04B,gBAE5Bq8D,EAAmBpgG,KAAKqL,QAAQma,oBAAoBxlB,KAAKkgG,mBAEzDG,EAAkBrgG,KAAKqL,QAAQ8iD,eAE/B9pC,EAAarkB,KAAKqL,QAAQQ,mBAAmBwY,WAG7CR,EAAMu8E,EAAmBC,GADZrgG,KAAKiZ,SAASqnF,aAC8Bj8E,GAAc,EAC3ErkB,KAAKiZ,SAAS4S,MAAMra,KAAO2uF,EAAaI,gBAAkBJ,EAAaK,iBAAmB,KAC1FxgG,KAAKiZ,SAAS4S,MAAMhI,IAAMxiB,KAAKw5B,IAAIx5B,KAAKyqB,MAAMjI,GAAM,GAAK,MAG3Do8E,EAAiBt/F,UAAUgkB,KAAO,WAC3B3kB,KAAKonB,YAIVpnB,KAAKonB,WAAY,IAGnB64E,EAAiBt/F,UAAUmT,YAAc,WACvC,OAAO,MAGTmsF,EAAiBt/F,UAAUc,QAAU,WACnCzB,KAAKqL,QAAQ0lC,oBAAoB/wC,MAEjC+J,EAAOpJ,UAAUc,QAAQwI,KAAKjK,OAGhCigG,EAAiBt/F,UAAU6+F,WAAa,WACtC,IAAIp+F,EAAQpB,KAERygG,EAAWp3F,MAAM1I,UAAU2sC,MAAMrjC,KAAKjK,KAAKiZ,SAASynF,qBAAqB,SACzEC,EAAct3F,MAAM1I,UAAU2sC,MAAMrjC,KAAKjK,KAAKiZ,SAAS2mF,uBAAuB,SAClFa,EAAS14E,OAAO44E,GAAa7yF,QAAQ,SAAUysE,GAC7C,OAAOn5E,EAAMiK,QAAQynF,cAAcvY,MAIvC0lB,EAAiBt/F,UAAUk/F,eAAiB,SAAUtlB,GACpDv6E,KAAKiZ,SAASI,YAAc,GAE5BrZ,KAAKiZ,SAASK,YAAYihE,GAE1Bv6E,KAAKw/F,cAGAS,EA1GT,CA2GE,M,oBCxTE,GAAwC,SAAUzpF,EAAY1T,EAAQ2N,EAAKgG,GAC7E,IAEIxN,EAFAyN,EAAIC,UAAUpK,OACdqK,EAAIF,EAAI,EAAI5T,EAAkB,OAAT2T,EAAgBA,EAAOrW,OAAOyW,yBAAyB/T,EAAQ2N,GAAOgG,EAE/F,GAAuB,kBAAZK,SAAoD,oBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASP,EAAY1T,EAAQ2N,EAAKgG,QAAW,IAAK,IAAIjI,EAAIgI,EAAWjK,OAAS,EAAGiC,GAAK,EAAGA,KAC1KvF,EAAIuN,EAAWhI,MAAIoI,GAAKF,EAAI,EAAIzN,EAAE2N,GAAKF,EAAI,EAAIzN,EAAEnG,EAAQ2N,EAAKmG,GAAK3N,EAAEnG,EAAQ2N,KAASmG,GAE5F,OAAOF,EAAI,GAAKE,GAAKxW,OAAOM,eAAeoC,EAAQ2N,EAAKmG,GAAIA,GAG1D,GAAkC,SAAUK,EAAYC,GAC1D,OAAO,SAAUpU,EAAQ2N,GACvByG,EAAUpU,EAAQ2N,EAAKwG,KAevB,GAEJ,WACE,SAAS2pF,EAAiBv1F,EAASw1F,EAAcC,QACxB,IAAnBA,IACFA,EAAiB,MAGnB9gG,KAAKqL,QAAUA,EACfrL,KAAK6gG,aAAeA,EACpB7gG,KAAK8gG,eAAiBA,EACtB9gG,KAAK+gG,sBAAwB,IAAI,KACjC/gG,KAAKghG,qBAAuBhhG,KAAK+gG,sBAAsBlgG,MA+EzD,OA5EA+/F,EAAiBjgG,UAAUykB,WAAa,SAAUw5B,GAChD,IAAIx9C,EAAQpB,KAEZ,MAAO,CACLihG,kBAAmB,SAA2BC,EAAe3+F,GAI3D,IAAIkuF,EAAS,KAEb,GAAIyQ,EACFzQ,EAASrvF,EAAMy/F,aAAaM,yBAAyBD,OAChD,CACL,IAAIr0F,EAAQzL,EAAMiK,QAAQyB,WAEtBD,IACF4jF,EAAS5jF,EAAMioB,wBAAwBvsB,UAM3C,OAFAnH,EAAMy/F,aAAaO,YAAY3Q,GAAU,IAElC9zE,QAAQC,SAAQ,GAAMtZ,KAAK,SAAUoe,GAC1C,IAAIwlE,EAAU,KAAqBma,WAAW5Q,GAAU,IAExD,OAAIvJ,EACKA,EAAQ5jF,KAAK,SAAUulE,GAC5B,OAAO,aAAiBtmE,EAAOsmE,KAI5B,aAAiBtmE,OAAOP,KAC9BsB,KAAK,SAAUqwC,GAChB,MAAO,6BAAgCvyC,EAAMiK,QAAQQ,mBAAmB6Z,SAAS47E,WAAa,KAAQ3tD,EAAO,aAGjH4tD,wBAAyB,WACvB,OAAOngG,EAAM2/F,sBAAsBh/F,QAErC08C,cAAe,CACbvxB,SAAU,SAAkBhsB,GAC1B,IAAI4d,EAEJ,IACEA,EAAM,KAAI89B,MAAM17C,GAChB,MAAOyX,IAGLmG,GAAO1d,EAAM0/F,gBACf1/F,EAAM0/F,eAAevP,KAAKzyE,GAAKoG,MAAM,OAGzC05B,aAAcA,KAKpBgiD,EAAiBjgG,UAAU8iB,OAAS,SAAU+9E,GAC5C,IAAI5iD,EAAe,GASnB,MAAO,CACLttB,QAPGkwE,E7C1DF,SAAwBA,EAAUr/F,QACvB,IAAZA,IACFA,EAAU,IAGZ,IAgDIs/F,EAhDAnwE,EAAUpY,GAAc/W,GAExBu/F,EAAc,SAAqBt1E,GACrC,IAAIf,EAEJ,IACEA,EAAO,aAAM2uB,mBAAmB5tB,IAChC,MAAOlgB,IAGT,OAAKmf,GAILA,EAAO,aAAeA,EAAM,SAAU9oB,GACpC,OAAIi/F,EAASG,MAAQH,EAASG,KAAKp/F,GAC1B,KAAIq/F,OAAOJ,EAASG,KAAKp/F,SAEhC,IAGGs/F,mBAAmBxe,KAAKsG,UAAUt+D,KAVhCe,GAaPsuB,EAAQ,SAAe7C,GACzB,IAAIxsB,EAAOm2E,EAASG,MAAQH,EAASG,KAAK9pD,GAE1C,IAAKxsB,EACH,OAAOwsB,EAGT,IAAI/4B,EAAM,KAAI8iF,OAAOv2E,GAYrB,OAVIvM,EAAIm5D,QACNn5D,EAAMA,EAAIk5D,KAAK,CACbC,MAAOypB,EAAY5iF,EAAIm5D,UAIvB5sD,IACFwsB,EAAO/4B,EAAIvd,UAAS,IAGfs2C,GAMLiqD,EAAgB,IAAInlF,QAAQ,SAAUjG,GACxC,OAAO+qF,EAAkB/qF,IAEvBgiC,EAAW,IAAI,GAEnBA,EAASgD,MAAQ,SAAU7D,EAAMrnC,EAAOoI,GAEtC,IAAImpF,EAAa,GAEjB,GAHAlqD,EAAO6C,EAAM7C,GAGH,CACR,IAAImqD,EAAWnqD,EAAKR,MAAM,KAAKpqC,IAAI,SAAUiE,GAC3C,OAAOA,EAAE8lC,SAEXa,EAAOmqD,EAAS,GAChB,IAAIC,EAAaD,EAAS,GAE1B,GAAIC,EAAY,CACd,IAAIC,EAAmB,eAAerrD,KAAKorD,GACvCE,EAAkB,cAActrD,KAAKorD,GACrCn+E,EAASo+E,EAAmBA,EAAiB,GAAK,GAClD9rE,EAAQ+rE,EAAkBA,EAAgB,GAAK,GAC/CC,EAAgBC,SAAS1oD,SAASvjB,IAClCksE,EAAiBD,SAAS1oD,SAAS71B,IAEnCs+E,GACFL,EAAW3zF,KAAK,UAAagoB,EAAQ,KAGnCksE,GACFP,EAAW3zF,KAAK,WAAc0V,EAAS,MAK7C,IAAIy+E,EAAa,GAkBjB,OAhBI1qD,GACF0qD,EAAWn0F,KAAK,QAAWypC,EAAO,KAGhCj/B,GACF2pF,EAAWn0F,KAAK,QAAWwK,EAAO,KAGhCpI,GACF+xF,EAAWn0F,KAAK,UAAaoC,EAAQ,KAGnCuxF,EAAWx1F,SACbg2F,EAAaA,EAAWx6E,OAAOg6E,IAG1B,QAAUQ,EAAWhiF,KAAK,KAAO,KAG1Cm4B,EAASlsB,KAAO,SAAUqrB,EAAMrnC,EAAOoI,GAWrC,OATIi/B,IAASj/B,IAEXA,EAAOu7B,GAAsBv7B,IAG/Bi/B,EAAO6C,EAAM7C,GACbrnC,EAAQ2jC,GAAsB3jC,KAC9BqnC,EAAO1D,GAAsB0D,KAEhBA,EAAKrN,MAAM,wBAA0BqN,EAAKrN,MAAM,gBAAkBg3D,EAASvtD,WAAa4D,EAAKrN,MAAM,mDAEvG5xB,EAIA,2BADPi/B,EAAOA,EAAK1f,QAAQ,KAAM,SAASA,QAAQ,KAAM,QAAQA,QAAQ,KAAM,QAAQA,QAAQ,KAAM,UAAUA,QAAQ,KAAM,UACxE,aAAiB3nB,GAASqnC,GAAQ,KAAQj/B,EAAO,QAIlG8/B,EAAS1D,UAAY,SAAUp8B,GAC7B,MAAO,MAAQA,EAAO,QAGpBzW,EAAQ8+F,oBACVvoD,EAAS/E,KAAO,SAAUA,EAAMoD,GAC9B,IAAIx0C,EAAQJ,EAAQ8+F,kBAAkBlqD,EAAMpD,GAGxC3tC,EAAKstC,GAAiBD,SACtB6zC,EAAUvqE,QAAQR,IAAI,CAAC5Z,EAAOu/F,IAAgBx+F,KAAK,SAAUk/F,GAC/D,IAAIC,EAAWD,EAAO,GAClBE,EAAOpxE,EAAQqxE,cAAc,kBAAqB38F,EAAK,MAEvD08F,IACFA,EAAKh3E,UAAY+2E,KAElBv9E,MAAM,SAAU7H,MAOnB,OAJIlb,EAAQo/F,yBACVra,EAAQ5jF,KAAKnB,EAAQo/F,yBAGhB,gCAAqCv7F,EAAK,KAAQ,aAAO2tC,GAAQ,WAIxExxC,EAAQs8C,eACVt8C,EAAQs8C,cAAcG,aAAaxwC,KAAK,KAAkCkjB,EAAS,QAAS,SAAUzwB,GACpG,IAAIiC,EAASjC,EAAMiC,OAEnB,GAAuB,MAAnBA,EAAOyuB,UACTzuB,EAASA,EAAO2pB,gBAEkB,MAAnB3pB,EAAOyuB,QAKxB,IACE,IAAIsmB,EAAO/0C,EAAO8/F,QAAc,KAE5B/qD,GACF11C,EAAQs8C,cAAcvxB,SAAS2qB,EAAMh3C,GAEvC,MAAOwc,GACP,aAAkBA,GAClB,QACAxc,EAAMm8B,qBAKZ,IAAI6lE,EAAgB,CAClBnrD,UAAU,EACVgB,SAAUA,GAIZ,OAFApnB,EAAQ5F,UAAY,GAAa81E,EAASj/F,MAAOsgG,GACjDpB,IACOnwE,E6CjIOwxE,CAAetB,EAAUxhG,KAAKolB,WAAWw5B,IAFzCnqC,SAASyE,cAAc,QAOjCzX,QAAS,WACP,OAAO,YAASm9C,MAKtBgiD,EAAmB,GAAW,CAAC,GAAQ,EAAG,MAAe,GAAQ,EAAG,aAAS,QAAmBA,GAxFlG,GC7BI,GAAsC,WACxC,IAAI53F,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA0BtC,GAAsC,SAAUkX,EAASC,EAAYC,EAAGC,GAC1E,OAAO,IAAKD,IAAMA,EAAIjE,UAAU,SAAUC,EAASkE,GACjD,SAASC,EAAUxe,GACjB,IACEye,EAAKH,EAAUI,KAAK1e,IACpB,MAAO2J,GACP4U,EAAO5U,IAIX,SAASgV,EAAS3e,GAChB,IACEye,EAAKH,EAAiB,MAAEte,IACxB,MAAO2J,GACP4U,EAAO5U,IAIX,SAAS8U,EAAK3O,GACZA,EAAO8O,KAAOvE,EAAQvK,EAAO9P,OAAS,IAAIqe,EAAE,SAAUhE,GACpDA,EAAQvK,EAAO9P,SACde,KAAKyd,EAAWG,GAGrBF,GAAMH,EAAYA,EAAUP,MAAMI,EAASC,GAAc,KAAKM,WAI9D,GAA0C,SAAUP,EAASW,GAC/D,IASIC,EACAC,EACAC,EACAC,EAZAC,EAAI,CACNxX,MAAO,EACPyX,KAAM,WACJ,GAAW,EAAPH,EAAE,GAAQ,MAAMA,EAAE,GACtB,OAAOA,EAAE,IAEXI,KAAM,GACNC,IAAK,IAMP,OAAOJ,EAAI,CACTR,KAAMa,EAAK,GACX,MAASA,EAAK,GACd,OAAUA,EAAK,IACI,oBAAXC,SAA0BN,EAAEM,OAAOC,UAAY,WACvD,OAAOhiB,OACLyhB,EAEJ,SAASK,EAAKG,GACZ,OAAO,SAAUC,GACf,OAIJ,SAAcC,GACZ,GAAIb,EAAG,MAAM,IAAIc,UAAU,mCAE3B,KAAOV,GACL,IACE,GAAIJ,EAAI,EAAGC,IAAMC,EAAY,EAARW,EAAG,GAASZ,EAAU,OAAIY,EAAG,GAAKZ,EAAS,SAAOC,EAAID,EAAU,SAAMC,EAAEvX,KAAKsX,GAAI,GAAKA,EAAEN,SAAWO,EAAIA,EAAEvX,KAAKsX,EAAGY,EAAG,KAAKhB,KAAM,OAAOK,EAG3J,OAFID,EAAI,EAAGC,IAAGW,EAAK,CAAS,EAARA,EAAG,GAAQX,EAAEjf,QAEzB4f,EAAG,IACT,KAAK,EACL,KAAK,EACHX,EAAIW,EACJ,MAEF,KAAK,EAEH,OADAT,EAAExX,QACK,CACL3H,MAAO4f,EAAG,GACVhB,MAAM,GAGV,KAAK,EACHO,EAAExX,QACFqX,EAAIY,EAAG,GACPA,EAAK,CAAC,GACN,SAEF,KAAK,EACHA,EAAKT,EAAEG,IAAIQ,MAEXX,EAAEE,KAAKS,MAEP,SAEF,QACE,KAAkBb,GAAZA,EAAIE,EAAEE,MAAYrV,OAAS,GAAKiV,EAAEA,EAAEjV,OAAS,MAAkB,IAAV4V,EAAG,IAAsB,IAAVA,EAAG,IAAW,CACtFT,EAAI,EACJ,SAGF,GAAc,IAAVS,EAAG,MAAcX,GAAKW,EAAG,GAAKX,EAAE,IAAMW,EAAG,GAAKX,EAAE,IAAK,CACvDE,EAAExX,MAAQiY,EAAG,GACb,MAGF,GAAc,IAAVA,EAAG,IAAYT,EAAExX,MAAQsX,EAAE,GAAI,CACjCE,EAAExX,MAAQsX,EAAE,GACZA,EAAIW,EACJ,MAGF,GAAIX,GAAKE,EAAExX,MAAQsX,EAAE,GAAI,CACvBE,EAAExX,MAAQsX,EAAE,GAEZE,EAAEG,IAAIzT,KAAK+T,GAEX,MAGEX,EAAE,IAAIE,EAAEG,IAAIQ,MAEhBX,EAAEE,KAAKS,MAEP,SAGJF,EAAKd,EAAKpX,KAAKyW,EAASgB,GACxB,MAAOxV,GACPiW,EAAK,CAAC,EAAGjW,GACTqV,EAAI,EACJ,QACAD,EAAIE,EAAI,EAIZ,GAAY,EAARW,EAAG,GAAQ,MAAMA,EAAG,GACxB,MAAO,CACL5f,MAAO4f,EAAG,GAAKA,EAAG,QAAK,EACvBhB,MAAM,GAlFCH,CAAK,CAACiB,EAAGC,OAqHlB,GAAIkC,GAAA,EAEJ2+E,GAEJ,WAOE,OANA,SAAoBt1F,EAAOoC,EAAOuM,GAChCpc,KAAKyN,MAAQA,EACbzN,KAAK6P,MAAQA,EACb7P,KAAKoc,SAAWA,GAJpB,GAUI4mF,GAEJ,WAME,OALA,SAAqBv1F,EAAOyR,GAC1Blf,KAAKyN,MAAQA,EACbzN,KAAKkf,OAASA,GAHlB,GASI,GAEJ,WACE,SAAS+jF,EAAqBr4F,EAAQs4F,GACpCljG,KAAKkjG,0BAA4BA,EACjCljG,KAAKqL,QAAUT,EACf5K,KAAKyxE,OAAS,KAyHhB,OAtHAwxB,EAAqBtiG,UAAUwiG,SAAW,SAAU11F,GAClDzN,KAAKyxE,OAAShkE,EACdzN,KAAK2mC,QAAU,IAGjBs8D,EAAqBtiG,UAAUyiG,YAAc,WAC3CpjG,KAAK2mC,QAAU,IAGjBs8D,EAAqBtiG,UAAUg+F,aAAe,SAAU9iF,GACtD,IAAK7b,KAAKqL,QAAQuB,aAAe5M,KAAKyxE,OACpC,OAAO90D,QAAQC,QAAQ,IAGzB,IAAI/P,EAAQ7M,KAAKqL,QAAQyB,WAEzB,OAAK,KAAsBqT,IAAItT,GAIxBmwF,GAASnwF,EAAO,IAAI,IAAS7M,KAAKyxE,OAAOxjE,gBAAiBjO,KAAKyxE,OAAOvjE,aAAc2N,GAHlFc,QAAQC,QAAQ,KAM3BqmF,EAAqBtiG,UAAUo+F,YAAc,WAC3C,IAAI39F,EAAQpB,KAEZ,IAAKA,KAAKqL,QAAQuB,aAAe5M,KAAKyxE,OACpC,MAAO,GAGT,IAAI5kE,EAAQ7M,KAAKqL,QAAQyB,WAErBY,EAAa1N,KAAKyxE,OAAOxjE,gBAE7B,GAAIP,EAAa1N,KAAKqL,QAAQyB,WAAW6G,eAEvC,MAAO,GAGT,IAAI0vF,EAAgB,GAAcziG,IAAIZ,KAAKqL,SACvCstD,EAAY9rD,EAAM0E,iBAAiB7D,GAEnC41F,EAAkBtjG,KAAKqL,QAAQk4F,mBAAmB71F,GAElD81F,GAAe,EACfC,EAAazjG,KAAKyxE,OAClBp/D,EAASixF,EAAgBr2F,IAAI,SAAUhE,GACzC,IAAIiF,EAAcjF,EAAEwE,MAAMQ,kBAAoBP,EAAazE,EAAEwE,MAAMS,YAAc,EAC7EoD,EAAYrI,EAAEwE,MAAM4D,gBAAkB3D,EAAazE,EAAEwE,MAAM6D,UAAYqnD,EAE3E,GAAIzqD,EAAcu1F,EAAWv1F,aAAeu1F,EAAWnyF,UAAYA,EACjE,OAAO,KAGT,IAAI7D,EAAQ,IAAI,KAAMg2F,EAAWx1F,gBAAiBC,EAAau1F,EAAWx1F,gBAAiBqD,GAEvF4N,EAAS9d,EAAM8hG,0BAA0BQ,UAAU72F,EAAO5D,GAE9D,GAAIiW,EACF,OAAO,IAAI8jF,GAAYv1F,EAAOyR,GAGhC,IAAI0W,EAAYytE,EAAc5sE,aAAaxtB,EAAEwE,MAAMN,oBAEnD,IAAKq2F,GAAgB5tE,EAAW,CAC9B4tE,GAAe,EACf,IAAI7qF,EAAKid,EAAUtC,UACfzjB,EAAQ8I,EAAG9I,MACXq3D,EAAUvuD,EAAGlL,MACjB,OAAO,IAAIs1F,GAAW77B,EAASr3D,EAAO+lB,EAAUxZ,UAEhD,OAAIw3B,GAAsB3qC,EAAE9G,QAAQwvF,cAC3B,KAIF,CACLyL,SAFan0F,EAAE9G,QAAQwvF,aAAe,aAAQ1oF,EAAE9G,QAAQwvF,cAAgB,GAGxElkF,MAAOA,KAIb,OAAO,aAAS4E,IAGlB4wF,EAAqBtiG,UAAUq+F,SAAW,SAAU3sF,EAAQsxF,GAGxD3jG,KAAK2mC,QADHg9D,EACatxF,EAAO0V,OAAO/nB,KAAK2mC,QAAQz3B,KAAK,SAAUkM,EAAGlS,GAC1D,OAAIkS,aAAa2nF,IAEP,EACC75F,aAAa65F,GACf,EAGF,KAGM/iG,KAAK2mC,QAAQ5e,OAAO1V,IAIvC4wF,EAAqBtiG,UAAUu+F,UAAY,WACzC,OAAOl/F,KAAK2mC,QAAQ2G,MAAM,IAG5B21D,EAAqBtiG,UAAUy+F,4BAA8B,WAC3D,OAAOp/F,KAAK2mC,QAAQ2G,MAAM,GAAGvlB,OAAO,CAAC/nB,KAAK4jG,wBAG5CX,EAAqBtiG,UAAUijG,mBAAqB,WAClD,MAAO,CACLn2F,MAAO,aAAoBzN,KAAKyxE,QAChC2rB,SAAU,EAAC,IAAI7pD,IAAiBC,WAAW1pC,EAAA,EAAa,4BAA6B,kBAIlFm5F,EA7HT,GAgII,GAEJ,SAAUl5F,GAGR,SAAS85F,EAAwBj5F,EAAQk5F,EAA0BvvC,EAAe/tC,EAAoBjE,EAAqBkE,EAAkBF,EAAiBs6E,EAAcC,QACnJ,IAAnBA,IACFA,EAAiB,MAGnB,IAAI1/F,EAAQ2I,EAAOE,KAAKjK,KAAM6jG,EAAwBn3F,GAAI9B,IAAW5K,KAmCrE,OAjCAoB,EAAMmzD,cAAgBA,EACtBnzD,EAAMolB,mBAAqBA,EAC3BplB,EAAMmhB,oBAAsBA,EAC5BnhB,EAAMqlB,iBAAmBA,EACzBrlB,EAAMmlB,gBAAkBA,EACxBnlB,EAAMy/F,aAAeA,EACrBz/F,EAAM0/F,eAAiBA,EACvB1/F,EAAM2iG,iBAAmB,IAAWjmF,KACpC1c,EAAM4iG,UAAY,GAClB5iG,EAAM6iG,WAAa,KACnB7iG,EAAMs8F,UAAY,IAAI,GAAqBt8F,EAAMiK,QAASy4F,GAC1D1iG,EAAM8iG,sBAAwB,GAC9B9iG,EAAM+iG,wBAAyB,EAC/B/iG,EAAMgjG,gBAAkB,IAAI,GAAehjG,EAAMs8F,UAAW,SAAUrrF,GACpE,OAAOjR,EAAMijG,YAAYhyF,GAAQ,IAChC,KAAM,SAAUA,GACjB,OAAOjR,EAAMijG,YAAYhyF,GAAQ,IAChCjR,EAAMiK,QAAQQ,mBAAmBC,YAAY8xB,MAAM0mE,OAEtDljG,EAAMsK,UAAU0Y,GAAA,EAAkChjB,EAAMwY,aAAcwK,GAAA,EAAcmgF,MAAO,WACrFnjG,EAAMojG,cACRpgF,GAAA,EAAahjB,EAAMwY,aAAc,wBAIrCxY,EAAMsK,UAAU0Y,GAAA,EAAkChjB,EAAMwY,aAAcwK,GAAA,EAAcqgF,KAAM,WACxFrgF,GAAA,EAAgBhjB,EAAMwY,aAAc,wBAGtCxY,EAAMsK,UAAUd,EAAO0B,yBAAyB,SAAUJ,GACxD9K,EAAMgjG,gBAAgB7F,aAAan9F,EAAMiK,QAAQQ,mBAAmBC,YAAY8xB,MAAM0mE,UAGjFljG,EAqeT,OA/gBA,GAAUyiG,EAAyB95F,GA6CnC85F,EAAwBljG,UAAUc,QAAU,WAC1CzB,KAAK+jG,iBAAiBtiG,UACtBzB,KAAK+jG,iBAAmB,IAAWjmF,KAEnC9d,KAAKokG,gBAAgB3mF,SAErB1T,EAAOpJ,UAAUc,QAAQwI,KAAKjK,OAGhC6jG,EAAwBljG,UAAU+jG,0BAA4B,WACxD1kG,KAAKmkG,wBAILnkG,KAAKonB,YAGPpnB,KAAKokG,gBAAgB3mF,SAErBzd,KAAK09F,UAAU0F,cAEVpjG,KAAKwkG,cAERxkG,KAAKokG,gBAAgB7wF,MAAM,KAOjCswF,EAAwBljG,UAAUgkG,eAAiB,SAAUl3F,EAAOlK,EAAMiS,GACxE,IAAIxV,KAAKikG,aAAcjkG,KAAKikG,WAAW9gE,YAAY11B,GAAnD,CAOA,GAFAzN,KAAKokG,gBAAgB3mF,SAEjBzd,KAAKonB,UAIP,GAAKpnB,KAAKy/F,iBAAmBz/F,KAAKy/F,gBAAgB/xF,aAAeD,EAAMQ,gBAEhE,CAGL,IAFA,IAAI22F,EAAmB,GAEdp2F,EAAI,EAAGC,EAAMzO,KAAKgkG,UAAUz3F,OAAQiC,EAAIC,EAAKD,IAAK,CACzD,IAAI69E,EAAMrsF,KAAKgkG,UAAUx1F,GACrB60B,EAAMgpD,EAAI5+E,MAEV41B,GAAOA,EAAIn1B,aAAeT,EAAMS,aAAem1B,EAAI/xB,WAAa7D,EAAM6D,WACxEszF,EAAiBx2F,KAAKi+E,GAI1B,GAAIuY,EAAiBr4F,OAAS,EAAG,CAC/B,GA8aV,SAA6B8zC,EAAOwkD,GAClC,IAAKxkD,GAASwkD,GAAUxkD,IAAUwkD,GAAUxkD,EAAM9zC,SAAWs4F,EAAOt4F,OAClE,OAAO,EAGT,IAAK,IAAIiC,EAAI,EAAGA,EAAI6xC,EAAM9zC,OAAQiC,IAAK,CACrC,IAAIs2F,EAAezkD,EAAM7xC,GACrBu2F,EAAgBF,EAAOr2F,GAE3B,GAAIs2F,aAAwB9B,IAAe+B,aAAyB/B,GAClE,OAAO,KAAYgC,QAAQF,EAAa5lF,UAAY,KAAY8lF,QAAQD,EAAc7lF,QAGxF,GAAI4lF,aAAwB/B,IAAcgC,aAAyBhC,GACjE,OAAO,EAGT,GAAI+B,aAAwB9B,IAAe+B,aAAyB/B,GAClE,OAAO,EAGT,G/Cx1BgC5nF,E+Cw1BP0pF,EAAa1H,S/Cx1BHl0F,E+Cw1Ba67F,EAAc3H,Y/Cv1B3DhiF,IAAMlS,GAECkS,GAAMlS,IAEPG,MAAM2T,QAAQ5B,IAAM/R,MAAM2T,QAAQ9T,GACpC,aAAOkS,EAAGlS,EAAGgrC,IACXJ,GAAiB14B,IAAM04B,GAAiB5qC,IAC1CgrC,GAAoB94B,EAAGlS,K+Ci1B5B,OAAO,E/Cz1BN,IAA6BkS,EAAGlS,E+C61BrC,OAAO,EAxcK+7F,CAAoBL,EAAkB5kG,KAAKgkG,WAC7C,OAGFhkG,KAAKklG,gBAAgBz3F,EAAOm3F,QAE5B5kG,KAAK2kB,YApBP3kB,KAAK2kB,OAyBT3kB,KAAKikG,WAAax2F,EAElBzN,KAAK09F,UAAUyF,SAAS11F,GAExBzN,KAAKmlG,aAAe3vF,EAEpBxV,KAAKokG,gBAAgB7wF,MAAMhQ,KAG7BsgG,EAAwBljG,UAAUgkB,KAAO,WACvC3kB,KAAKikG,WAAa,KAElBjkG,KAAKokG,gBAAgB3mF,SAErB1T,EAAOpJ,UAAUgkB,KAAK1a,KAAKjK,MAE3BA,KAAKmkG,wBAAyB,EAC9BnkG,KAAKkkG,sBAAwBlkG,KAAKqL,QAAQmB,iBAAiBxM,KAAKkkG,sBAAuB,IACvFlkG,KAAKmkG,wBAAyB,EAC9BnkG,KAAK+jG,iBAAiBtiG,UACtBzB,KAAK+jG,iBAAmB,IAAWjmF,KACnC9d,KAAKwkG,aAAe,MAGtBX,EAAwBljG,UAAUykG,qBAAuB,WACvD,QAAIplG,KAAKwkG,cAOXX,EAAwBljG,UAAU0jG,YAAc,SAAUhyF,EAAQgzF,GAChErlG,KAAKgkG,UAAY3xF,EAEbrS,KAAKikG,YAAcjkG,KAAKgkG,UAAUz3F,OAAS,EAC7CvM,KAAKklG,gBAAgBllG,KAAKikG,WAAYjkG,KAAKgkG,WAClCqB,GACTrlG,KAAK2kB,QAITk/E,EAAwBljG,UAAUukG,gBAAkB,SAAUI,EAAaC,GACzE,IAAInkG,EAAQpB,KAEZA,KAAK+jG,iBAAiBtiG,UACtBzB,KAAKwkG,aAAe,KAEpB,IAAIgB,EAAe/pE,OAAOC,UACtB+pE,EAAiBF,EAAS,GAAG93F,MAAQ,KAAM2R,KAAKmmF,EAAS,GAAG93F,OAAS,KACrEyqE,EAAWzjE,SAASixF,yBACpBC,GAAsB,EACtBC,GAAqB,EACrBC,EAAuB,GACvBC,EAAiB,GAsIrB,GArIAP,EAASz3F,QAAQ,SAAUu+E,GACzB,GAAKA,EAAI5+E,MAOT,GAHA+3F,EAAenkG,KAAK8sE,IAAIq3B,EAAcnZ,EAAI5+E,MAAMS,aAChDu3F,EAAiBA,EAAiB,KAAM13E,UAAU03E,EAAgBpZ,EAAI5+E,OAAS,KAAM2R,KAAKitE,EAAI5+E,OAE1F4+E,aAAe0W,GAAY,CAC7B6C,GAAqB,EACrB,IAAIjtF,EAAK0zE,EAAIx8E,MACTgkB,EAAMlb,EAAGkb,IACTC,EAAQnb,EAAGmb,MACXC,EAAOpb,EAAGob,KACVC,EAAQrb,EAAGqb,MACX8B,EAAO,IAAI,KAAW,IAANjC,EAAmB,IAARC,EAAoB,IAAPC,EAAYC,GACpD+xE,EAAU,IAAI,KAAMjwE,GAExB,IAAK10B,EAAMiK,QAAQuB,WACjB,OAGF,IAAIo5F,EAAgB5kG,EAAMiK,QAAQyB,WAE9B46D,EAAU,IAAI,KAAM2kB,EAAI5+E,MAAMQ,gBAAiBo+E,EAAI5+E,MAAMS,YAAam+E,EAAI5+E,MAAM4D,cAAeg7E,EAAI5+E,MAAM6D,WACzGgiB,EAAY,CACd7lB,MAAO4+E,EAAI5+E,MACXoC,MAAOw8E,EAAIx8E,OAGT0P,EAAU,IAAI,GAAiBwmF,EAAS,GAAI,GAC5CE,EAAW,IAAI,GAAkB/tB,EAAU34D,EAASne,EAAMiK,QAAQQ,mBAAmB0uF,WAAYn5F,EAAMmzD,eAC3GlhC,GAAsB2yE,EAAe1yE,EAAW+4D,EAAIjwE,SAAU,KAAkB0B,MAAMxa,KAAK,SAAUm2F,GAGnG,GAFAl6E,EAAQk6E,mBAAqBA,GAAsB,GAE9Cr4F,EAAMiK,QAAQuB,WAAnB,CAKA,IAAIktF,EAAe14F,EAAMiK,QAAQyB,WAAWoH,gBAAgBm4E,EAAI5+E,OAEhE8R,EAAQs6E,uBAAuBkM,EAASjM,GAExC,IAAIoM,EAAoB,WACtB,IAAIC,EACAnjB,EAEAzjE,EAAQm6E,aAAa0M,UACvBD,EAAY,CAAC5mF,EAAQm6E,aAAa0M,UAElCpjB,GADAA,EAAW,IAAI,KAAMzjE,EAAQm6E,aAAa0M,SAAS34F,MAAMQ,gBAAiBsR,EAAQm6E,aAAa0M,SAAS34F,MAAMS,YAAaqR,EAAQm6E,aAAa0M,SAAS34F,MAAM4D,cAAekO,EAAQm6E,aAAa0M,SAAS34F,MAAM6D,YAC9LkB,eAAewwE,EAAS3xE,cAAe2xE,EAAS90E,YAAcqR,EAAQm6E,aAAa0M,SAASxtF,KAAKrM,UAErH45F,EAAY,CAAC,CACXE,WAAY,KACZ54F,MAAOi6D,EACP9uD,KAAM2G,EAAQm6E,aAAaxvF,MAC3Bq9D,kBAAkB,IAEpByb,EAAWtb,EAAQl1D,eAAek1D,EAAQr2D,cAAeq2D,EAAQx5D,YAAcqR,EAAQm6E,aAAaxvF,MAAMqC,SAG5GnL,EAAMiK,QAAQyH,eAEd1R,EAAMiK,QAAQo6D,aAAa,cAAe0gC,GAEtC5mF,EAAQm6E,aAAa4M,sBACvBH,EAAY5mF,EAAQm6E,aAAa4M,oBAAoBh5D,QAErDlsC,EAAMiK,QAAQo6D,aAAa,cAAe0gC,GAE1C/kG,EAAMujB,QAGRvjB,EAAMiK,QAAQyH,eAEd40D,EAAUsb,GAGRujB,EAA2B,SAAkC12F,GAC/D,OAAOwjB,GAAsB2yE,EAAe,CAC1Cv4F,MAAOi6D,EACP73D,MAAO,CACLgkB,IAAKhkB,EAAMimB,KAAKlf,EAAI,IACpBkd,MAAOjkB,EAAMimB,KAAKrU,EAAI,IACtBsS,KAAMlkB,EAAMimB,KAAK5sB,EAAI,IACrB8qB,MAAOnkB,EAAMimB,KAAK1a,IAEnBixE,EAAIjwE,SAAU,KAAkB0B,MAAMxa,KAAK,SAAUm2F,GACtDl6E,EAAQk6E,mBAAqBA,GAAsB,MAInD+M,EAAgBjnF,EAAQ25E,eAAe,SAAUrpF,GACnD02F,EAAyB12F,GAAOvM,KAAK4iG,KAEnCO,EAAsBlnF,EAAQ65E,iBAAiBmN,GACnDnlG,EAAMojG,aAAeyB,EAErB7kG,EAAMkgC,OAAOomC,EAAQv6D,mBAAoBu6D,EAAStmE,EAAM+jG,cAExD/jG,EAAMy+F,eAAe3nB,GAErB92E,EAAMojG,aAAajgD,SAEnBnjD,EAAM2iG,iBAAmB,YAAmB,CAACyC,EAAeC,EAAqBR,GAAUl+E,OAAO89E,YAGhGxZ,aAAe2W,IACjB8C,EAAe13F,KAAKi+E,GACpBsZ,GAAsB,GAEtBtZ,EAAI+Q,SAASthF,OAAO,SAAUshF,GAC5B,OAAQxpD,GAAsBwpD,KAC7BtvF,QAAQ,SAAUsvF,GACnB,IAAIsJ,EAAuB,GAAE,gCACzBC,EAAuBviF,GAAA,EAAWsiF,EAAsB,GAAE,uBAC1DhuD,EAAW,IAAI,GAAiBt3C,EAAMiK,QAASjK,EAAMy/F,aAAcz/F,EAAM0/F,gBAC7E+E,EAAqBz3F,KAAKsqC,EAASsoD,qBAAqB,WACtD2F,EAAqBh3F,UAAY,qCAEjCvO,EAAM0+F,sBAER,IAAI8G,EAAmBluD,EAASj1B,OAAO25E,GACvCuJ,EAAqBrtF,YAAYstF,EAAiBt1E,SAClD4mD,EAAS5+D,YAAYotF,GACrBb,EAAqBz3F,KAAKw4F,GAC1BjB,GAAsB,MAM1BG,EAAev5F,OAAQ,CACzBu5F,EAAeh4F,QAAQ,SAAUu+E,GAC/B,OAAOnU,EAAS5+D,YAAYlY,EAAMylG,kBAAkBxa,MAEtD,IAAIya,EAAoD,IAA1BhB,EAAev5F,OAAeu5F,EAAe,GAAKA,EAAe52F,KAAK,SAAUkM,EAAGlS,GAC/G,OAAO,KAAeiG,QAAQiM,EAAE8D,OAAOg2E,SAAUhsF,EAAEgW,OAAOg2E,YACzD,GACHhd,EAAS5+D,YAAYtZ,KAAK+mG,sBAAsBD,IAI7ClB,GAAuBD,IAC1B3lG,KAAKshC,OAAO,IAAI,IAASgkE,EAAYr3F,gBAAiBu3F,GAAeC,EAAgBzlG,KAAKmlG,cAC1FnlG,KAAK6/F,eAAe3nB,IAGtBl4E,KAAKmkG,wBAAyB,EAC9BnkG,KAAKkkG,sBAAwBlkG,KAAKqL,QAAQmB,iBAAiBxM,KAAKkkG,sBAAuBuB,EAAiB,CAAC,CACvGh4F,MAAOg4F,EACPtjG,QAAS0hG,EAAwBn1F,sBAC9B,IACL1O,KAAKmkG,wBAAyB,GAGhCN,EAAwBljG,UAAUkmG,kBAAoB,SAAUG,GAC9D,IAAI5lG,EAAQpB,KAERinG,EAAe,GAAE,iBACjBC,EAAgB9iF,GAAA,EAAW6iF,EAAc,GAAE,8BAC3CtuF,EAAKquF,EAAY9nF,OACjBsnB,EAAS7tB,EAAG6tB,OACZ1uB,EAAUa,EAAGb,QACb67B,EAAOh7B,EAAGg7B,KACVi/C,EAAqBj6E,EAAGi6E,mBAE5B5yF,KAAKqL,QAAQynF,cAAcoU,GAE3B,IAAIC,EAAiB/iF,GAAA,EAAW8iF,EAAe,GAAE,SAIjD,GAHAC,EAAet7E,MAAMu7E,WAAa,WAClCD,EAAelU,UAAYn7E,EAEvB0uB,GAAUmN,EAAM,CAClB,IAAIu/C,EAAiB9uE,GAAA,EAAW8iF,EAAe,GAAE,SACjDhU,EAAernE,MAAMw7E,QAAU,MAC/BnU,EAAernE,MAAMy7E,YAAc,MACnCpU,EAAeD,UAAYzsD,GAAUmN,EAAOnN,EAAS,IAAMmN,EAAO,IAAMnN,GAAkB,IAAMmN,EAAO,IAGzG,GAAI,aAAgBi/C,GA2BlB,IA1BA,IAAItoE,EAAU,SAAiBi9E,EAAW5pF,EAAU1P,EAAiBC,GACnE,IAAIs5F,EAAuBpjF,GAAA,EAAW8iF,EAAe,GAAE,QACvDM,EAAqB37E,MAAM47E,UAAY,MACvC,IAAIrsF,EAAIgJ,GAAA,EAAWojF,EAAsB,GAAE,MAC3CpsF,EAAE63E,UAAY,aAASt1E,GAAY,IAAM1P,EAAkB,KAAOC,EAAc,MAChFkN,EAAEyQ,MAAM67E,OAAS,UAEjBtsF,EAAEizB,QAAU,SAAUniC,GACpBA,EAAE+wB,kBACF/wB,EAAE8wB,iBAEE57B,EAAM0/F,gBACR1/F,EAAM0/F,eAAevP,KAAK5zE,EAASq6D,KAAK,CACtCE,SAAUjqE,EAAkB,IAAMC,KAChCgX,MAAM,OAId,IAAIyiF,EAAmBvjF,GAAA,EAAWojF,EAAsB,GAAE,SAC1DG,EAAiB1U,UAAYsU,EAE7BK,EAAOv8F,QAAQynF,cAAc6U,IAG3BC,EAAS5nG,KAEJ4S,EAAK,EAAG4gF,EAAuBZ,EAAoBhgF,EAAK4gF,EAAqBjnF,OAAQqG,IAAM,CAClG,IAAI4e,EAAKgiE,EAAqB5gF,GAM9B0X,EALgBkH,EAAG1Z,QACJ0Z,EAAG7T,SACI6T,EAAGvjB,gBACPujB,EAAGtjB,aAMzB,OAAO+4F,GAGTpD,EAAwBljG,UAAUomG,sBAAwB,SAAUC,GAClE,IAAI5lG,EAAQpB,KAERinG,EAAe,GAAE,4BACjB3H,EAAc,GACduI,EAAiBzjF,GAAA,EAAW6iF,EAAc,GAAE,gBA0DhD,OAzDA3H,EAAYlxF,KAAKpO,KAAK8nG,aAAaD,EAAgB,CACjD39F,MAAOJ,EAAA,EAAa,cAAe,gBACnCi+F,UAAW,GAAevgF,GAC1B9c,IAAK,SAAa5H,GAChB,OAAO,GAAU1B,OAAO,OAAQ,EAAQ,WACtC,IAAI4mG,EAAoB9sF,EAAS+sF,EACjC,OAAO,GAAYjoG,KAAM,SAAU2Y,GACjC,OAAQA,EAAGzO,OACT,KAAK,EAKH,OAJA89F,EAAqBhoG,KAAK2b,eAAeqrF,EAAY9nF,QACrDogF,EAAYlxF,KAAK,YAAa,WAC5B,OAAO45F,EAAmBvqF,YAErB,CAAC,EAENuqF,GAEJ,KAAK,EAgBH,OAfA9sF,EAAUvC,EAAGgJ,OACbsmF,EAAkB7jF,GAAA,EAA2BthB,GAE7C9C,KAAKuiB,oBAAoBS,gBAAgB,CACvCC,UAAW,WACT,MAAO,CACLG,EAAG6kF,EAAgBz2F,KAAO,EAC1B+P,EAAG0mF,EAAgBpkF,IAAMokF,EAAgBnkF,OAAS,IAGtDT,WAAY,WACV,OAAOnI,KAIJ,CAAC,YAShB8rF,EAAY9nF,OAAOg2E,WAAa,KAAep9C,OAASkvD,EAAY9nF,OAAOg2E,WAAa,KAAed,SAAW4S,EAAY9nF,OAAOg2E,WAAa,KAAeR,MACnK4K,EAAYlxF,KAAKpO,KAAK8nG,aAAaD,EAAgB,CACjD39F,MAAOJ,EAAA,EAAa,eAAgB,gBACpCi+F,UAAW,GAAiBr7F,GAC5BhC,IAAK,WACHtJ,EAAMujB,OAEN,GAAiB/jB,IAAIQ,EAAMiK,SAASsX,KAAKqkF,EAAY9nF,QAErD9d,EAAMiK,QAAQmK,YAKpBxV,KAAK+jG,iBAAmB,YAAmBzE,GACpC2H,GAGTpD,EAAwBljG,UAAUgb,eAAiB,SAAUuD,GAC3D,IAAI9d,EAAQpB,KAEZ,OAAO,YAAwB,SAAU89D,GACvC,OAAO,GAAU18D,OAAO,OAAQ,EAAQ,WACtC,IAAI0hB,EAEA1hB,EAAQpB,KAEZ,OAAO,GAAYA,KAAM,SAAU2Y,GACjC,OAAQA,EAAGzO,OACT,KAAK,EACH,MAAO,CAAC,EAENyR,GAAe3b,KAAKqL,QAAQyB,WAAY,IAAI,KAAMoS,EAAOjR,gBAAiBiR,EAAOhR,YAAagR,EAAO7N,cAAe6N,EAAO5N,WAAY,CACvI6I,KAAM,SACN2B,OAAQ,CACNL,KAAM,GAAeb,WAEtBkjD,IAEL,KAAK,EAGH,OAFAh7C,EAAcnK,EAAGgJ,QAEDzG,QAAQ3O,OACf,CAAC,EAENuW,EAAY5H,QAAQjO,IAAI,SAAUi7F,GAClC,OAAO,IAAI,KAAOA,EAAW33F,QAAU23F,EAAW33F,QAAQvK,GAAKkiG,EAAW13F,MAAO03F,EAAW13F,WAAOxO,GAAW,EAAM,WAClH,OAAO0lB,GAAgBwgF,EAAY9mG,EAAMqlB,iBAAkBrlB,EAAMmlB,sBAKhE,CAAC,EAEN,CAAC,IAAI,KAAO,GAAIzc,EAAA,EAAa,qCAAsC,wCAOjF+5F,EAAwBljG,UAAUmnG,aAAe,SAAU1nD,EAAQ+nD,GACjE,IAAIC,EAAkBhkF,GAAA,EAAWg8B,EAAQ,GAAE,yBACvCnjC,EAASmH,GAAA,EAAWgkF,EAAiB,GAAE,aAEvCD,EAAcE,WAChBjkF,GAAA,EAAWnH,EAAQ,GAAE,aAAekrF,EAAcE,YAGpD,IAAIn+F,EAAQka,GAAA,EAAWnH,EAAQ,GAAE,SACjC/S,EAAMmP,YAAc8uF,EAAcj+F,MAElC,IAAI8zB,EAAah+B,KAAKwmB,mBAAmBe,iBAAiB4gF,EAAcJ,WAMxE,OAJI/pE,IACF9zB,EAAMsG,MAAQ23F,EAAcj+F,MAAQ,KAAO8zB,EAAWvW,WAAa,KAG9DrD,GAAA,EAA0BgkF,EAAiBhkF,GAAA,EAAcg2E,MAAO,SAAUluF,GAC/EA,EAAE+wB,kBACF/wB,EAAE8wB,iBACFmrE,EAAcz9F,IAAI09F,MAItBvE,EAAwBn3F,GAAK,yCAC7Bm3F,EAAwBn1F,oBAAsB,IAAuB3I,SAAS,CAC5E4J,UAAW,mBAENk0F,EAhhBT,CAihBE,ICj3BF,IAAI,GAAsC,WACxC,IAAI76F,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GAmCtC,GAEJ,WACE,SAAS8+F,EAAe19F,GACtB5K,KAAKqL,QAAUT,EACf5K,KAAKuoG,aAAe,EA0DtB,OAvDAD,EAAe3nG,UAAU6nG,cAAgB,SAAU96F,GACjD1N,KAAKuoG,YAAc76F,EACnB1N,KAAK2mC,QAAU,IAGjB2hE,EAAe3nG,UAAUyiG,YAAc,WACrCpjG,KAAK2mC,QAAU,IAGjB2hE,EAAe3nG,UAAUo+F,YAAc,WACrC,IAAI0J,EAAiB,SAAwBrL,GAC3C,MAAO,CACL76F,MAAO66F,IAIPkG,EAAkBtjG,KAAKqL,QAAQk4F,mBAAmBvjG,KAAKuoG,aAEvDl2F,EAAS,GAEb,IAAKixF,EACH,OAAOjxF,EAGT,IAAK,IAAIO,EAAK,EAAG81F,EAAoBpF,EAAiB1wF,EAAK81F,EAAkBn8F,OAAQqG,IAAM,CACzF,IAAI3J,EAAIy/F,EAAkB91F,GAE1B,GAAK3J,EAAE9G,QAAQwmG,qBAAf,CAIA,IAAIhX,EAAe1oF,EAAE9G,QAAQymG,wBAExBjX,IAAgB/9C,GAAsB+9C,IAI3Ct/E,EAAOjE,KAAKkS,MAAMjO,EAAQ,aAAQs/E,GAAc1kF,IAAIw7F,KAGtD,OAAOp2F,GAGTi2F,EAAe3nG,UAAUq+F,SAAW,SAAU3sF,EAAQsxF,GACpD3jG,KAAK2mC,QAAU3mC,KAAK2mC,QAAQ5e,OAAO1V,IAGrCi2F,EAAe3nG,UAAUu+F,UAAY,WACnC,OAAOl/F,KAAK2mC,SAGd2hE,EAAe3nG,UAAUy+F,4BAA8B,WACrD,OAAOp/F,KAAKk/F,aAGPoJ,EA7DT,GAgEI,GAEJ,SAAUv+F,GAGR,SAAS8+F,EAAsBj+F,EAAQ+kF,EAAamZ,QAC5B,IAAlBA,IACFA,EAAgB,MAGlB,IAAI1nG,EAAQ2I,EAAOE,KAAKjK,KAAM6oG,EAAsBn8F,GAAI9B,IAAW5K,KAUnE,OARAoB,EAAM2nG,iBAAmB,EACzB3nG,EAAM4nG,kBAAoB,IAAI,GAAiB5nG,EAAMiK,QAASskF,EAAamZ,GAC3E1nG,EAAMs8F,UAAY,IAAI,GAAet8F,EAAMiK,SAC3CjK,EAAMgjG,gBAAkB,IAAI,GAAehjG,EAAMs8F,UAAW,SAAUrrF,GACpE,OAAOjR,EAAMijG,YAAYhyF,SACxBrQ,EAAW,SAAUqQ,GACtB,OAAOjR,EAAMijG,YAAYhyF,IACxB,KACIjR,EA+ET,OAhGA,GAAUynG,EAAuB9+F,GAoBjC8+F,EAAsBloG,UAAUc,QAAU,WACxCzB,KAAKipG,oBAAsB,YAAQjpG,KAAKipG,qBAExCjpG,KAAKokG,gBAAgB3mF,SAErB1T,EAAOpJ,UAAUc,QAAQwI,KAAKjK,OAGhC6oG,EAAsBloG,UAAU+jG,0BAA4B,WACtD1kG,KAAKonB,YAGPpnB,KAAKokG,gBAAgB3mF,SAErBzd,KAAK09F,UAAU0F,cAEfpjG,KAAKokG,gBAAgB7wF,MAAM,KAM/Bs1F,EAAsBloG,UAAUgkG,eAAiB,SAAUj3F,GACrD1N,KAAK+oG,kBAAoBr7F,IAK7B1N,KAAKokG,gBAAgB3mF,SAErBzd,KAAK2kB,OACL3kB,KAAK+oG,gBAAkBr7F,EAEvB1N,KAAK09F,UAAU8K,cAAc96F,GAE7B1N,KAAKokG,gBAAgB7wF,MAAM,KAK7Bs1F,EAAsBloG,UAAUgkB,KAAO,WACrC3kB,KAAK+oG,iBAAmB,EAExB/oG,KAAKokG,gBAAgB3mF,SAErB1T,EAAOpJ,UAAUgkB,KAAK1a,KAAKjK,OAG7B6oG,EAAsBloG,UAAU0jG,YAAc,SAAUhyF,GACtDrS,KAAKgkG,UAAY3xF,EAEbrS,KAAKgkG,UAAUz3F,OAAS,EAC1BvM,KAAKklG,gBAAgBllG,KAAK+oG,gBAAiB/oG,KAAKgkG,WAEhDhkG,KAAK2kB,QAITkkF,EAAsBloG,UAAUukG,gBAAkB,SAAUx3F,EAAY63F,GACtE,IAAInkG,EAAQpB,KAEZ,YAAQA,KAAKipG,qBACbjpG,KAAKipG,oBAAsB,GAC3B,IAAI/wB,EAAWzjE,SAASixF,yBACxBH,EAASz3F,QAAQ,SAAUu+E,GACzB,IAAIua,EAAmBxlG,EAAM4nG,kBAAkBvlF,OAAO4oE,EAAI9pF,OAE1DnB,EAAM6nG,oBAAoB76F,KAAKw4F,GAE/B1uB,EAAS5+D,YAAY,aAAE,qBAAiBtX,EAAW4kG,EAAiBt1E,YAEtEtxB,KAAK6/F,eAAe3nB,GACpBl4E,KAAKshC,OAAO5zB,IAGdm7F,EAAsBn8F,GAAK,uCACpBm8F,EAjGT,CAkGE,I,UCzME,GAAsC,WACxC,IAAI7/F,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA0BtC,GAAwC,SAAUgN,EAAY1T,EAAQ2N,EAAKgG,GAC7E,IAEIxN,EAFAyN,EAAIC,UAAUpK,OACdqK,EAAIF,EAAI,EAAI5T,EAAkB,OAAT2T,EAAgBA,EAAOrW,OAAOyW,yBAAyB/T,EAAQ2N,GAAOgG,EAE/F,GAAuB,kBAAZK,SAAoD,oBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASP,EAAY1T,EAAQ2N,EAAKgG,QAAW,IAAK,IAAIjI,EAAIgI,EAAWjK,OAAS,EAAGiC,GAAK,EAAGA,KAC1KvF,EAAIuN,EAAWhI,MAAIoI,GAAKF,EAAI,EAAIzN,EAAE2N,GAAKF,EAAI,EAAIzN,EAAEnG,EAAQ2N,EAAKmG,GAAK3N,EAAEnG,EAAQ2N,KAASmG,GAE5F,OAAOF,EAAI,GAAKE,GAAKxW,OAAOM,eAAeoC,EAAQ2N,EAAKmG,GAAIA,GAG1D,GAAkC,SAAUK,EAAYC,GAC1D,OAAO,SAAUpU,EAAQ2N,GACvByG,EAAUpU,EAAQ2N,EAAKwG,KAuBvB,GAEJ,WACE,SAASiyF,EAAqB79F,EAASy1F,EAAgBD,EAAcqC,EAA2B18E,EAAoBjE,EAAqBkE,EAAkBF,EAAiBguC,GAC1K,IAAInzD,EAAQpB,KAEZA,KAAKqL,QAAUA,EACfrL,KAAK8gG,eAAiBA,EACtB9gG,KAAK6gG,aAAeA,EACpB7gG,KAAKkjG,0BAA4BA,EACjCljG,KAAKwmB,mBAAqBA,EAC1BxmB,KAAKuiB,oBAAsBA,EAC3BviB,KAAKymB,iBAAmBA,EACxBzmB,KAAKumB,gBAAkBA,EACvBvmB,KAAKu0D,cAAgBA,EACrBv0D,KAAK+/B,UAAY,GACjB//B,KAAKmpG,cAAe,EACpBnpG,KAAKopG,eAAgB,EAErBppG,KAAKqpG,cAELrpG,KAAKspG,+BAAiCtpG,KAAKqL,QAAQiB,yBAAyB,SAAUJ,GAChFA,EAAEJ,cACJ1K,EAAMmoG,eAENnoG,EAAMooG,gBAENpoG,EAAMioG,iBA6OZ,OAxOAjpG,OAAOM,eAAewoG,EAAqBvoG,UAAW,gBAAiB,CACrEC,IAAK,WAKH,OAJKZ,KAAKguB,gBACRhuB,KAAKypG,qBAGAzpG,KAAKguB,gBAEdltB,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAewoG,EAAqBvoG,UAAW,cAAe,CACnEC,IAAK,WAKH,OAJKZ,KAAK0pG,cACR1pG,KAAKypG,qBAGAzpG,KAAK0pG,cAEd5oG,YAAY,EACZC,cAAc,IAGhBmoG,EAAqBtoG,IAAM,SAAUgK,GACnC,OAAOA,EAAO6B,gBAAgBy8F,EAAqBx8F,KAGrDw8F,EAAqBvoG,UAAU0oG,YAAc,WAC3C,IAAIjoG,EAAQpB,KAER2pG,EAA0B,WAC5B,OAAOvoG,EAAMmoG,gBAGXK,EAAY5pG,KAAKqL,QAAQQ,mBAAmBC,YAAY8xB,MAE5D59B,KAAK6pG,gBAAkBD,EAAU9rE,QACjC99B,KAAK8pG,eAAiBF,EAAUG,OAE5B/pG,KAAK6pG,iBACP7pG,KAAK+/B,UAAU3xB,KAAKpO,KAAKqL,QAAQ20B,YAAY,SAAU9zB,GACrD,OAAO9K,EAAM6+B,mBAAmB/zB,MAGlClM,KAAK+/B,UAAU3xB,KAAKpO,KAAKqL,QAAQgmB,UAAU,SAAUnlB,GACnD,OAAO9K,EAAM8+B,iBAAiBh0B,MAGhClM,KAAK+/B,UAAU3xB,KAAKpO,KAAKqL,QAAQgN,YAAY,SAAUnM,GACrD,OAAO9K,EAAM4oG,mBAAmB99F,MAGlClM,KAAK+/B,UAAU3xB,KAAKpO,KAAKqL,QAAQyxB,UAAU,SAAU5wB,GACnD,OAAO9K,EAAMwsC,WAAW1hC,MAG1BlM,KAAK+/B,UAAU3xB,KAAKpO,KAAKqL,QAAQ4+F,4BAA4B,WAC3D,OAAO7oG,EAAM8oG,iCAGflqG,KAAK+/B,UAAU3xB,KAAKpO,KAAKqL,QAAQgN,YAAYsxF,IAG/C3pG,KAAK+/B,UAAU3xB,KAAKpO,KAAKqL,QAAQ8+F,aAAaR,IAE9C3pG,KAAK+/B,UAAU3xB,KAAKpO,KAAKqL,QAAQe,iBAAiBu9F,IAElD3pG,KAAK+/B,UAAU3xB,KAAKpO,KAAKqL,QAAQylB,kBAAkB,SAAU5kB,GAC3D,OAAO9K,EAAMgpG,uBAAuBl+F,OAIxCg9F,EAAqBvoG,UAAU6oG,cAAgB,WAC7CxpG,KAAK+/B,UAAY,YAAQ//B,KAAK+/B,YAGhCmpE,EAAqBvoG,UAAUupG,2BAA6B,WAC1DlqG,KAAKqqG,cAAc3F,4BACnB1kG,KAAKsqG,YAAY5F,6BAGnBwE,EAAqBvoG,UAAUypG,uBAAyB,SAAUl+F,IAC5DA,EAAE6kB,kBAAoB7kB,EAAEujF,oBAC1BzvF,KAAKupG,gBAITL,EAAqBvoG,UAAUs/B,mBAAqB,SAAUmB,GAC5DphC,KAAKmpG,cAAe,EACpB,IAAIoB,EAAanpE,EAAWt+B,OAAOqX,KAEhB,IAAfowF,GAEDnpE,EAAWt+B,OAAOm/D,SAAW,GAAwBv1D,GAMrC,KAAf69F,GAEDnpE,EAAWt+B,OAAOm/D,SAAW,GAAsBv1D,KAKnC,KAAf69F,GAEDnpE,EAAWt+B,OAAOm/D,SAAW,GAAsBv1D,KACpD1M,KAAKopG,eAAgB,GAGvBppG,KAAKupG,gBAlBHvpG,KAAKopG,eAAgB,GAqBzBF,EAAqBvoG,UAAUu/B,iBAAmB,SAAUkB,GAC1DphC,KAAKmpG,cAAe,GAGtBD,EAAqBvoG,UAAUqpG,mBAAqB,SAAU5oE,GAE5D,IAAImpE,EAAanpE,EAAWt+B,OAAOqX,KAEnC,KAAIna,KAAKmpG,cAAgBnpG,KAAKopG,eAAiBppG,KAAKqqG,cAAcjF,2BAI9DplG,KAAK8pG,gBAAiC,IAAfS,GAExBnpE,EAAWt+B,OAAOm/D,SAAW,GAAwBv1D,OAKpD1M,KAAK8pG,gBAAiC,KAAfS,GAExBnpE,EAAWt+B,OAAOm/D,SAAW,GAAsBv1D,IAFtD,CAOA,GAAmB,IAAf69F,EAEF,CACE,IAAIC,EAAUxqG,KAAKqL,QAAQQ,mBAAmB6Z,SAAS+kF,+BAAiC,EACpFp/E,EAAO+V,EAAWt+B,OAAOm/D,OAEzB52C,IAASA,EAAKg3C,cAAyD,kBAAlCh3C,EAAKq/E,0BAAyCr/E,EAAKq/E,yBAA2BF,IAErHD,EAAa,GAMA,IAAfA,GAGAvqG,KAAKsqG,YAAY3lF,OAEb3kB,KAAK6pG,iBAAmBzoE,EAAWt+B,OAAO2K,OAC5CzN,KAAKqqG,cAAc1F,eAAevjE,EAAWt+B,OAAO2K,MAAO,GAEzD,IAEoB,IAAf88F,GAGTvqG,KAAKqqG,cAAc1lF,OAEf3kB,KAAK6pG,iBAAmBzoE,EAAWt+B,OAAOoI,UAC5ClL,KAAKsqG,YAAY3F,eAAevjE,EAAWt+B,OAAOoI,SAASwC,aAG/D1N,KAAKupG,iBAITL,EAAqBvoG,UAAUitC,WAAa,SAAU1hC,GAClC,IAAdA,EAAE6wB,SAEW,IAAd7wB,EAAE6wB,SAEY,KAAd7wB,EAAE6wB,SAEY,IAAd7wB,EAAE6wB,SAID/8B,KAAKupG,gBAIXL,EAAqBvoG,UAAU4oG,aAAe,YACvCvpG,KAAKguB,gBAAkBhuB,KAAKmpG,cAAgBnpG,KAAKopG,eAAiBppG,KAAKguB,eAAeo3E,yBAI3FplG,KAAK0pG,aAAa/kF,OAElB3kB,KAAKguB,eAAerJ,SAGtBukF,EAAqBvoG,UAAU8oG,mBAAqB,WAClDzpG,KAAKguB,eAAiB,IAAI,GAAwBhuB,KAAKqL,QAASrL,KAAKkjG,0BAA2BljG,KAAKu0D,cAAev0D,KAAKwmB,mBAAoBxmB,KAAKuiB,oBAAqBviB,KAAKymB,iBAAkBzmB,KAAKumB,gBAAiBvmB,KAAK6gG,aAAc7gG,KAAK8gG,gBAC5O9gG,KAAK0pG,aAAe,IAAI,GAAsB1pG,KAAKqL,QAASrL,KAAK6gG,aAAc7gG,KAAK8gG,iBAGtFoI,EAAqBvoG,UAAUgqG,iBAAmB,SAAUl9F,EAAOlK,EAAMiS,GACvExV,KAAKqqG,cAAc1F,eAAel3F,EAAOlK,EAAMiS,IAGjD0zF,EAAqBvoG,UAAUgM,MAAQ,WACrC,OAAOu8F,EAAqBx8F,IAG9Bw8F,EAAqBvoG,UAAUc,QAAU,WACvCzB,KAAKwpG,gBAELxpG,KAAKspG,+BAA+B7nG,UAEhCzB,KAAK0pG,cACP1pG,KAAK0pG,aAAajoG,UAGhBzB,KAAKguB,gBACPhuB,KAAKguB,eAAevsB,WAIxBynG,EAAqBx8F,GAAK,uBAC1Bw8F,EAAuB,GAAW,CAAC,GAAQ,EAAG,MAAiB,GAAQ,EAAG,MAAe,GAAQ,EAAG,MAA4B,GAAQ,EAAG,MAAqB,GAAQ,EAAG,MAAsB,GAAQ,EAAG,MAAmB,GAAQ,EAAG,MAAkB,GAAQ,EAAG,MAAiBA,GArQ1R,GA2QI,GAEJ,SAAUn/F,GAGR,SAAS6gG,IACP,OAAO7gG,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,0BACJkE,MAAOJ,EAAA,EAAa,CAClB2G,IAAK,YACLC,QAAS,CAAC,2EAA4E,qEACrF,cACHvG,MAAO,aACPC,aAAc,KACdC,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,aAAS,KAIhB,MAKFC,OAAQ,QAINzK,KAwBR,OAlDA,GAAU4qG,EAAiB7gG,GA6B3B6gG,EAAgBjqG,UAAU+J,IAAM,SAAUC,EAAUC,GAClD,GAAKA,EAAOgC,WAAZ,CAIA,IAAI/B,EAAa,GAAqBjK,IAAIgK,GAE1C,GAAKC,EAAL,CAIA,IAAIK,EAAWN,EAAOkJ,cAClBrG,EAAQ,IAAI,KAAMvC,EAASwC,WAAYxC,EAASyC,OAAQzC,EAASwC,WAAYxC,EAASyC,QACtF6H,EAA2D,IAAnD5K,EAAOiB,mBAAmBi/C,qBAGtCjgD,EAAW8/F,iBAAiBl9F,EAAO,EAEjC+H,MAGGo1F,EAnDT,CAoDE,KAEF,YAA2B,IAC3B,YAAqB,IAErB,YAA2B,SAAU76F,EAAOC,GAC1C,IAAI66F,EAA4B96F,EAAMG,SAAS,KAE3C26F,GACF76F,EAAUG,QAAQ,sDAAwD06F,EAA4B,OAGxG,IAAIC,EAAkB/6F,EAAMG,SAAS,KAEjC46F,GACF96F,EAAUG,QAAQ,2DAA6D26F,EAAkB,OAGnG,IAAIC,EAAch7F,EAAMG,SAAS,KAE7B66F,IACF/6F,EAAUG,QAAQ,2DAA6D46F,EAAc,OAC7F/6F,EAAUG,QAAQ,wGAA0G46F,EAAY7vB,YAAY,IAAO,OAC3JlrE,EAAUG,QAAQ,kEAAoE46F,EAAY7vB,YAAY,IAAO,OACrHlrE,EAAUG,QAAQ,qEAAuE46F,EAAY7vB,YAAY,IAAO,QAG1H,IAAI1uD,EAAOzc,EAAMG,SAAS,MAEtBsc,GACFxc,EAAUG,QAAQ,kDAAoDqc,EAAO,OAG/E,IAAIw+E,EAAoBj7F,EAAMG,SAAS,KAEnC86F,GACFh7F,EAAUG,QAAQ,+EAAiF66F,EAAoB,OAGzH,IAAIC,EAAiBl7F,EAAMG,SAAS,MAEhC+6F,GACFj7F,EAAUG,QAAQ,gEAAkE86F,EAAiB,SCxazG,IAAI,GAEJ,WACE,SAASC,EAAsB5lC,EAAW6lC,EAAmBvyF,GAC3D5Y,KAAKorG,WAAa9lC,EAClBtlE,KAAKqrG,mBAAqBF,EAC1BnrG,KAAKsrG,MAAQ1yF,EAmBf,OAhBAsyF,EAAsBvqG,UAAUqQ,kBAAoB,SAAUnE,EAAOoE,GACnEA,EAAQgnB,wBAAwBj4B,KAAKorG,WAAYprG,KAAKsrG,QAGxDJ,EAAsBvqG,UAAUwR,mBAAqB,SAAUtF,EAAOuF,GACpE,IACI0mB,EADwB1mB,EAAOumB,2BACE,GAAGlrB,MAExC,OAAKzN,KAAKqrG,mBAAmBp8F,UAKtB,IAAI,IAAU6pB,EAASznB,cAAehQ,KAAK8sE,IAAInuE,KAAKqrG,mBAAmB3wE,eAAgB5B,EAASxnB,WAAYwnB,EAASznB,cAAehQ,KAAK8sE,IAAInuE,KAAKqrG,mBAAmB3wE,eAAgB5B,EAASxnB,YAH5L,IAAI,IAAUwnB,EAASznB,cAAeynB,EAASxnB,UAAYtR,KAAKsrG,MAAM/+F,OAAQusB,EAASznB,cAAeynB,EAASxnB,YAMnH45F,EAvBT,GCJI,GAAsC,WACxC,IAAIliG,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA0BtC,GAAwC,SAAUgN,EAAY1T,EAAQ2N,EAAKgG,GAC7E,IAEIxN,EAFAyN,EAAIC,UAAUpK,OACdqK,EAAIF,EAAI,EAAI5T,EAAkB,OAAT2T,EAAgBA,EAAOrW,OAAOyW,yBAAyB/T,EAAQ2N,GAAOgG,EAE/F,GAAuB,kBAAZK,SAAoD,oBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASP,EAAY1T,EAAQ2N,EAAKgG,QAAW,IAAK,IAAIjI,EAAIgI,EAAWjK,OAAS,EAAGiC,GAAK,EAAGA,KAC1KvF,EAAIuN,EAAWhI,MAAIoI,GAAKF,EAAI,EAAIzN,EAAE2N,GAAKF,EAAI,EAAIzN,EAAEnG,EAAQ2N,EAAKmG,GAAK3N,EAAEnG,EAAQ2N,KAASmG,GAE5F,OAAOF,EAAI,GAAKE,GAAKxW,OAAOM,eAAeoC,EAAQ2N,EAAKmG,GAAIA,GAG1D,GAAkC,SAAUK,EAAYC,GAC1D,OAAO,SAAUpU,EAAQ2N,GACvByG,EAAUpU,EAAQ2N,EAAKwG,KAkBvB,GAEJ,WACE,SAASs0F,EAAyB3gG,EAAQ4gG,GACxCxrG,KAAKo/D,cAAgB,GACrBp/D,KAAK4K,OAASA,EACd5K,KAAKwrG,oBAAsBA,EA4G7B,OAzGAD,EAAyB3qG,IAAM,SAAUgK,GACvC,OAAOA,EAAO6B,gBAAgB8+F,EAAyB7+F,KAGzD6+F,EAAyB5qG,UAAUc,QAAU,aAE7C8pG,EAAyB5qG,UAAUgM,MAAQ,WACzC,OAAO4+F,EAAyB7+F,IAGlC6+F,EAAyB5qG,UAAU+J,IAAM,SAAU87B,EAAQilE,GACzD,IAAIrqG,EAAQpB,KAGRA,KAAK0rG,gBACP1rG,KAAK0rG,eAAejuF,SAGtB,IAAIonB,EAAkB7kC,KAAK4K,OAAOoL,eAC9BnJ,EAAQ7M,KAAK4K,OAAOkC,WAExB,GAAKD,GAAUg4B,EAAf,CAIA,IAAI33B,EAAY23B,EAEhB,GAAI33B,EAAUe,kBAAoBf,EAAUmE,cAA5C,CAKA,IAAIoT,EAAQ,IAAI,KAAYzkB,KAAK4K,OAAQ,GAKrC+gG,EAAW9+F,EAAMiS,IAErB,OAAK9e,KAAKwrG,oBAAoBI,oBAAoBD,IAIlD3rG,KAAK0rG,eAAiB,YAAwB,SAAU7vF,GACtD,OAAOza,EAAMoqG,oBAAoBK,iBAAiBF,EAAUz+F,EAAWu+F,KAElEzrG,KAAK0rG,eAAepoG,KAAK,SAAU+O,GACxC,GAAKA,GAAWA,EAAO5E,OAAU4E,EAAO9P,OAKnCkiB,EAAMxgB,SAAS7C,EAAMwJ,QAA1B,CAMA,IAAI06D,EAAY,KAAMlmD,KAAK/M,EAAO5E,OAC9Bg4F,EAAiBpzF,EAAO5E,MACxBoxD,EAAOxsD,EAAO9P,MAAMgK,QAAUW,EAAUoE,UAAYpE,EAAUgB,aAElEu3F,EAAiB,CACfx3F,gBAAiBw3F,EAAex3F,gBAChCC,YAAau3F,EAAev3F,YAC5BmD,cAAeo0F,EAAep0F,cAC9BC,UAAWm0F,EAAev3F,YAAcmE,EAAO9P,MAAMgK,QAGnDsyD,EAAO,IACT3xD,EAAY,IAAI,IAAUA,EAAUe,gBAAiBf,EAAUgB,YAAahB,EAAUmE,cAAenE,EAAUoE,UAAYutD,EAAO,IAIpI,IAAItuD,EAAU,IAAI,GAAsB+0D,EAAWp4D,EAAWmF,EAAO9P,OAErEnB,EAAMwJ,OAAOkI,eAEb1R,EAAMwJ,OAAOkd,eAAe0e,EAAQj2B,GAEpCnP,EAAMwJ,OAAOkI,eAGb1R,EAAMg+D,cAAgBh+D,EAAMwJ,OAAO4B,iBAAiBpL,EAAMg+D,cAAe,CAAC,CACxE3xD,MAAOg4F,EACPtjG,QAASopG,EAAyBO,cAGhC1qG,EAAM2qG,mBACR3qG,EAAM2qG,kBAAkBtuF,SAG1Brc,EAAM2qG,kBAAoB,YAAQ,KAElC3qG,EAAM2qG,kBAAkBzoG,KAAK,WAC3B,OAAOlC,EAAMg+D,cAAgBh+D,EAAMwJ,OAAO4B,iBAAiBpL,EAAMg+D,cAAe,MAC/El6C,MAAM,SACRA,MAAM,OAzDAvI,QAAQC,aAAQ5a,MA4D3BupG,EAAyB7+F,GAAK,0CAC9B6+F,EAAyBO,WAAa,IAAuB/lG,SAAS,CACpE4J,UAAW,wBAEb47F,EAA2B,GAAW,CAAC,GAAQ,EAAG,OAAwBA,GA/G5E,GAmHI,GAEJ,SAAUxhG,GAGR,SAASiiG,IACP,OAAOjiG,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,kCACJkE,MAAOJ,EAAA,EAAa,sCAAuC,+BAC3DK,MAAO,8BACPC,aAAc,IAAkB6I,SAChC5I,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,KAOTC,OAAQ,QAINzK,KAaR,OAlCA,GAAUgsG,EAAkBjiG,GAwB5BiiG,EAAiBrrG,UAAU+J,IAAM,SAAUC,EAAUC,GACnD,IAAIC,EAAa,GAAyBjK,IAAIgK,GAE9C,OAAKC,EAIEA,EAAWH,IAAI1K,KAAKgG,IAAI,GAHtB2W,QAAQC,aAAQ5a,IAMpBgqG,EAnCT,CAoCE,KAEE,GAEJ,SAAUjiG,GAGR,SAASkiG,IACP,OAAOliG,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,oCACJkE,MAAOJ,EAAA,EAAa,kCAAmC,2BACvDK,MAAO,0BACPC,aAAc,IAAkB6I,SAChC5I,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,KAOTC,OAAQ,QAINzK,KAaR,OAlCA,GAAUisG,EAAoBliG,GAwB9BkiG,EAAmBtrG,UAAU+J,IAAM,SAAUC,EAAUC,GACrD,IAAIC,EAAa,GAAyBjK,IAAIgK,GAE9C,OAAKC,EAIEA,EAAWH,IAAI1K,KAAKgG,IAAI,GAHtB2W,QAAQC,aAAQ5a,IAMpBiqG,EAnCT,CAoCE,KAEF,YAA2B,IAC3B,YAAqB,IACrB,YAAqB,IACrB,YAA2B,SAAUl8F,EAAOC,GAC1C,IAAIiK,EAASlK,EAAMG,SAAS,KAExB+J,GACFjK,EAAUG,QAAQ,+DAAiE8J,EAAS,SChQhG,IAAIiyF,GAEJ,WACE,SAASA,EAA8Bh/F,EAAWi/F,GAChDnsG,KAAKkN,UAAYA,EACjBlN,KAAKmsG,QAAUA,EAkBjB,OAfAD,EAA8BvrG,UAAUqQ,kBAAoB,SAAUnE,EAAOoE,GAG3E,IAFA,IAAI4Q,EAsBD,SAAgChV,EAAOs/F,GAE5CA,EAAQj9F,KAAK,SAAUkM,EAAGlS,GACxB,OAAIkS,EAAE1N,aAAexE,EAAEwE,WACd0N,EAAEzN,OAASzE,EAAEyE,OAGfyN,EAAE1N,WAAaxE,EAAEwE,aAG1B,IAAK,IAAIc,EAAI29F,EAAQ5/F,OAAS,EAAGiC,GAAK,EAAGA,IACnC29F,EAAQ39F,GAAGd,aAAey+F,EAAQ39F,EAAI,GAAGd,YAE3Cy+F,EAAQt7E,OAAOriB,EAAG,GAStB,IALA,IAAIoI,EAAI,GACJw1F,EAAO,EACPC,EAAc,EACdC,EAAYH,EAAQ5/F,OAEfmB,EAAa,EAAG8rB,EAAY3sB,EAAM8G,eAAgBjG,GAAc8rB,EAAW9rB,IAAc,CAChG,IAAIkE,EAAc/E,EAAMgF,eAAenE,GACnC6+F,EAAgB36F,EAAYrF,OAAS,EACrCigG,EAAgB,EAEpB,KAAIH,EAAcC,GAAaH,EAAQE,GAAa3+F,aAAeA,IACjE8+F,EAAgBL,EAAQE,GAAa1+F,OACrC0+F,IAEIG,IAAkBD,KAMG,IAAvB36F,EAAYrF,OAAhB,CAIA,IAAIkgG,EAAyBxyE,GAAA,EAA+BroB,GACxD86F,EAAa,EAEjB,IAAgC,IAA5BD,EAEFC,EAAa,MACR,IAAID,IAA2B76F,EAAYrF,OAAS,EAKzD,SAHAmgG,EAAaD,EAAyB,EAMxCC,EAAarrG,KAAKw5B,IAAI2xE,EAAeE,GACrC91F,EAAEw1F,KAAU,KAAcz6E,OAAO,IAAI,KAAMjkB,EAAYg/F,EAAYh/F,EAAY6+F,KAGjF,OAAO31F,EAjFK+1F,CAAuB9/F,EAAO7M,KAAKmsG,SAEpC39F,EAAI,EAAGC,EAAMoT,EAAItV,OAAQiC,EAAIC,EAAKD,IAAK,CAC9C,IAAI2T,EAAKN,EAAIrT,GACbyC,EAAQc,iBAAiBoQ,EAAG1U,MAAO0U,EAAGvJ,MAGxC5Y,KAAK4sG,YAAc37F,EAAQG,eAAepR,KAAKkN,YAGjDg/F,EAA8BvrG,UAAUwR,mBAAqB,SAAUtF,EAAOuF,GAC5E,OAAOA,EAAOE,oBAAoBtS,KAAK4sG,cAGlCV,EArBT,G,cCHI,GAEJ,WACE,SAASW,EAAiB3/F,EAAW4/F,GACnC9sG,KAAK8Q,WAAa5D,EAClBlN,KAAK+sG,eAAiBD,EAgExB,OA7DAD,EAAiBlsG,UAAUqQ,kBAAoB,SAAUnE,EAAOoE,GAC9D,IAAIC,EAAIlR,KAAK8Q,WACb9Q,KAAKgtG,sBAAwB,EAC7BhtG,KAAKitG,oBAAsB,EAEvB/7F,EAAEjD,gBAAkBiD,EAAEG,eAAiC,IAAhBH,EAAEI,YAC3CtR,KAAKitG,oBAAsB,EAC3B/7F,EAAIA,EAAEsB,eAAetB,EAAEG,cAAgB,EAAGxE,EAAM0E,iBAAiBL,EAAEG,cAAgB,KAKrF,IAFA,IAAI67F,EAAc,GAET1+F,EAAI0C,EAAEjD,gBAAiBO,GAAK0C,EAAEG,cAAe7C,IACpD0+F,EAAY9+F,KAAKvB,EAAMgF,eAAerD,IAGxC,IAAI2+F,EAAaD,EAAY3sF,KAAK,MAEf,KAAf4sF,GAEEntG,KAAK+sG,iBACP/sG,KAAKgtG,wBACLhtG,KAAKitG,uBAIJjtG,KAAK+sG,eAGR97F,EAAQc,iBAAiB,IAAI,KAAMb,EAAEjD,gBAAiB,EAAGiD,EAAEjD,gBAAiB,GAAIk/F,EAAa,MAF7Fl8F,EAAQc,iBAAiB,IAAI,KAAMb,EAAEG,cAAexE,EAAM0E,iBAAiBL,EAAEG,eAAgBH,EAAEG,cAAexE,EAAM0E,iBAAiBL,EAAEG,gBAAiB,KAAO87F,GAKjKntG,KAAKmR,aAAeF,EAAQG,eAAeF,GAC3ClR,KAAKotG,oBAAsBptG,KAAK8Q,WAAWu8F,gBAG7CR,EAAiBlsG,UAAUwR,mBAAqB,SAAUtF,EAAOuF,GAC/D,IAAIC,EAASD,EAAOE,oBAAoBtS,KAAKmR,cAE7C,GAAmC,IAA/BnR,KAAKgtG,uBAA4D,IAA7BhtG,KAAKitG,oBAA2B,CACtE,IAAIh/F,EAAkBoE,EAAOpE,gBACzBC,EAAcmE,EAAOnE,YACrBmD,EAAgBgB,EAAOhB,cACvBC,EAAYe,EAAOf,UAEY,IAA/BtR,KAAKgtG,wBACP/+F,GAAoCjO,KAAKgtG,sBACzC9+F,EAAc,GAGiB,IAA7BlO,KAAKitG,sBACP57F,GAAgCrR,KAAKitG,oBACrC37F,EAAY,GAGde,EAAS,IAAUi7F,oBAAoBr/F,EAAiBC,EAAamD,EAAeC,EAAWtR,KAAKotG,qBAGtG,OAAO/6F,GAGFw6F,EAnET,G,oBCLO,SAASU,GAAY7vD,EAAKn3C,GAG/B,IAFA,IAAIinG,EAAY,EAEPh/F,EAAI,EAAGA,EAAIkvC,EAAInxC,OAAQiC,IACR,OAAlBkvC,EAAIlG,OAAOhpC,GACbg/F,GAAajnG,EAEbinG,IAIJ,OAAOA,EAEF,SAASC,GAAeD,EAAWjnG,EAASC,GACjDgnG,EAAYA,EAAY,EAAI,EAAIA,EAChC,IAAIn7F,EAAS,GAEb,IAAK7L,EAAc,CACjB,IAAIknG,EAAUrsG,KAAKkjB,MAAMipF,EAAYjnG,GACrCinG,GAAwBjnG,EAExB,IAAK,IAAIiI,EAAI,EAAGA,EAAIk/F,EAASl/F,IAC3B6D,GAAU,KAId,IAAS7D,EAAI,EAAGA,EAAIg/F,EAAWh/F,IAC7B6D,GAAU,IAGZ,OAAOA,ECtBT,IAAI,GAEJ,WACE,SAASs7F,EAAiBzgG,EAAW0gG,EAAcC,GACjD7tG,KAAK8Q,WAAa5D,EAClBlN,KAAK8tG,cAAgBF,EACrB5tG,KAAK+tG,YAAcF,EACnB7tG,KAAKguG,6BAA8B,EAoUrC,OAjUAL,EAAiBhtG,UAAUqQ,kBAAoB,SAAUnE,EAAOoE,GAC9D,IAAIg9F,EAAiBphG,EAAM8G,eAE3B,KAAI3T,KAAK8tG,eAAiB9tG,KAAK8Q,WAAWO,gBAAkB48F,KAIvDjuG,KAAK8tG,eAAqD,IAApC9tG,KAAK8Q,WAAW7C,iBAA3C,CAIAjO,KAAKg7B,sBAAuB,EAC5B,IAAI9pB,EAAIlR,KAAK8Q,WAETI,EAAEjD,gBAAkBiD,EAAEG,eAAiC,IAAhBH,EAAEI,YAC3CtR,KAAKg7B,sBAAuB,EAC5B9pB,EAAIA,EAAEsB,eAAetB,EAAEG,cAAgB,EAAGxE,EAAM0E,iBAAiBL,EAAEG,cAAgB,KAGrF,IAAIsH,EAAK9L,EAAMuY,aACX7e,EAAUoS,EAAGpS,QACb2nG,EAAav1F,EAAGu1F,WAChB1nG,EAAemS,EAAGnS,aAElB2nG,EAAkBnuG,KAAKouG,qBAAqB7nG,EAAS2nG,EAAY1nG,GACjE6nG,EAAe,CACjBC,cAAe,SAAuB5gG,GACpC,OAAOb,EAAMyhG,cAAc5gG,IAE7BonB,sBAAuB,WACrB,OAAOjoB,EAAMioB,yBAEfwD,wBAAyB,SAAiC5qB,EAAYC,GACpE,OAAOd,EAAMyrB,wBAAwB5qB,EAAYC,IAEnDkE,eAAgB,MAGlB,GAAIX,EAAEjD,kBAAoBiD,EAAEG,eAA+D,IAA9CxE,EAAM0E,iBAAiBL,EAAEjD,iBAAwB,CAE5F,IAAIP,EAAawD,EAAEjD,gBACfsgG,EAAkBvuG,KAAK8tG,cAAgBpgG,EAAa,EAAIA,EAAa,EAEzB,IAA5Cb,EAAM0E,iBAAiBg9F,GAGzBt9F,EAAQc,iBAAiB,IAAI,KAAM,EAAG,EAAG,EAAG,GAAI,OAGhDd,EAAQc,iBAAiB,IAAI,KAAMrE,EAAY,EAAGA,EAAY,GAAIb,EAAMgF,eAAe08F,IAEvFt9F,EAAQc,iBAAiB,IAAI,KAAMw8F,EAAiB,EAAGA,EAAiB1hG,EAAM0E,iBAAiBg9F,IAAmB,OAIpHr9F,EAAI,IAAI,IAAUq9F,EAAiB,EAAGA,EAAiB,OAClD,CACL,IAAIC,EACAC,OAAiB,EAErB,GAAIzuG,KAAK8tG,cAAe,CACtBU,EAAqBt9F,EAAEG,cAAgB,EACvCo9F,EAAiB5hG,EAAMgF,eAAe28F,GAEtCv9F,EAAQc,iBAAiB,IAAI,KAAMy8F,EAAqB,EAAG3hG,EAAM0E,iBAAiBi9F,EAAqB,GAAIA,EAAoB3hG,EAAM0E,iBAAiBi9F,IAAsB,MAC5K,IAAIE,EAAkBD,EAEtB,GAAIzuG,KAAK2uG,iBAAiB9hG,EAAOqE,GAAI,CACnC,IAAI09F,EAAwB5uG,KAAK6uG,eAAehiG,EAAOshG,EAAiB5nG,EAASioG,EAAoBt9F,EAAEjD,gBAAkB,GAEzH,GAA8B,OAA1B2gG,EAAgC,CAClC,IAEIE,EAAiB,GADjBC,EAAcH,EAAwB,GADtCI,EAAiB/0E,GAAA,EAA6BptB,EAAMgF,eAAe28F,IACWjoG,GACrBA,EAASC,GACtEkoG,EAAkBI,EAAiB9uG,KAAKivG,SAASR,OAC5C,CAELJ,EAAax8F,eAAiB,SAAUnE,GACtC,OAAIA,IAAewD,EAAEjD,gBACZpB,EAAMgF,eAAe28F,GAErB3hG,EAAMgF,eAAenE,IAIhC,IAAIwhG,EAAqB,KAA8BC,qBAAqBd,EAAcxhG,EAAMyrB,wBAAwBk2E,EAAoB,GAAIt9F,EAAEjD,gBAAiBkgG,GAEnK,GAA2B,OAAvBe,EAA6B,CAC/B,IAAIF,EAAiB/0E,GAAA,EAA6BptB,EAAMgF,eAAe28F,IAIvE,IAHIO,EAAc,GAAwBG,EAAoB3oG,OAC1D6oG,EAAc,GAAwBJ,EAAgBzoG,IAEzB,CAC3BuoG,EAAiB,GAA2BC,EAAaxoG,EAASC,GACtEkoG,EAAkBI,EAAiB9uG,KAAKivG,SAASR,KAUvD,GAHAx9F,EAAQc,iBAAiB,IAAI,KAAMb,EAAEjD,gBAAiB,EAAGiD,EAAEjD,gBAAiB,GAAIygG,EAAkB,MAGtF,QAFRW,EAAMrvG,KAAK6uG,eAAehiG,EAAOshG,EAAiB5nG,EAAS2K,EAAEjD,gBAAiBiD,EAAEjD,gBAAiBygG,IAGvF,IAARW,GACFrvG,KAAKsvG,4BAA4BziG,EAAOoE,EAASC,EAAG3K,EAASC,EAAc6oG,OAExE,CAELhB,EAAax8F,eAAiB,SAAUnE,GACtC,OAAIA,IAAewD,EAAEjD,gBACZygG,EACEhhG,GAAcwD,EAAEjD,gBAAkB,GAAKP,GAAcwD,EAAEG,cAAgB,EACzExE,EAAMgF,eAAenE,EAAa,GAElCb,EAAMgF,eAAenE,IAIhC,IAAI6hG,EAA2B,KAA8BJ,qBAAqBd,EAAcxhG,EAAMyrB,wBAAwBk2E,EAAoB,GAAIt9F,EAAEjD,gBAAkB,EAAGkgG,GAE7K,GAAiC,OAA7BoB,EAAmC,CACjCP,EAAiB/0E,GAAA,EAA6BptB,EAAMgF,eAAeX,EAAEjD,kBAIzE,IAHI8gG,EAAc,GAAwBQ,EAA0BhpG,OAChE6oG,EAAc,GAAwBJ,EAAgBzoG,IAEzB,CAC/B,IAAIipG,EAAiBT,EAAcK,EACnCpvG,KAAKsvG,4BAA4BziG,EAAOoE,EAASC,EAAG3K,EAASC,EAAcgpG,WAMjFv+F,EAAQc,iBAAiB,IAAI,KAAMb,EAAEjD,gBAAiB,EAAGiD,EAAEjD,gBAAiB,GAAIygG,EAAkB,UAE/F,CAiBH,IAAIW,EATN,GAPAb,EAAqBt9F,EAAEjD,gBAAkB,EACzCwgG,EAAiB5hG,EAAMgF,eAAe28F,GAEtCv9F,EAAQc,iBAAiB,IAAI,KAAMy8F,EAAoB,EAAGA,EAAqB,EAAG,GAAI,MAEtFv9F,EAAQc,iBAAiB,IAAI,KAAMb,EAAEG,cAAexE,EAAM0E,iBAAiBL,EAAEG,eAAgBH,EAAEG,cAAexE,EAAM0E,iBAAiBL,EAAEG,gBAAiB,KAAOo9F,GAE3JzuG,KAAK2uG,iBAAiB9hG,EAAOqE,GAW/B,GAVAm9F,EAAax8F,eAAiB,SAAUnE,GACtC,OAAIA,IAAe8gG,EACV3hG,EAAMgF,eAAeX,EAAEjD,iBAEvBpB,EAAMgF,eAAenE,IAMpB,QAFR2hG,EAAMrvG,KAAK6uG,eAAehiG,EAAOshG,EAAiB5nG,EAAS2K,EAAEjD,gBAAiBiD,EAAEjD,gBAAkB,IAGxF,IAARohG,GACFrvG,KAAKsvG,4BAA4BziG,EAAOoE,EAASC,EAAG3K,EAASC,EAAc6oG,OAExE,CAEL,IAAII,EAAoB,KAA8BN,qBAAqBd,EAAcxhG,EAAMyrB,wBAAwBpnB,EAAEjD,gBAAiB,GAAIugG,EAAoBL,GAElK,GAA0B,OAAtBsB,EAA4B,CAE9B,IACIV,EACAK,EAFAM,EAAYz1E,GAAA,EAA6BptB,EAAMgF,eAAeX,EAAEjD,kBAIpE,IAHI8gG,EAAc,GAAwBU,EAAmBlpG,OACzD6oG,EAAc,GAAwBM,EAAWnpG,IAEpB,CAC3BipG,EAAiBT,EAAcK,EACnCpvG,KAAKsvG,4BAA4BziG,EAAOoE,EAASC,EAAG3K,EAASC,EAAcgpG,OAQvFxvG,KAAKmR,aAAeF,EAAQG,eAAeF,KAG7Cy8F,EAAiBhtG,UAAUytG,qBAAuB,SAAU7nG,EAAS2nG,EAAY1nG,GAC/E,MAAO,CACLmpG,YAAa,SAAqBC,GAChC,OAAO,KAAaD,YAAYC,EAAaA,EAAYrjG,OAAS,EAAGhG,EAAS2nG,EAAY1nG,IAE5FqpG,cAAe,SAAuBD,GACpC,OAAO,KAAaC,cAAcD,EAAaA,EAAYrjG,OAAS,EAAGhG,EAAS2nG,EAAY1nG,MAKlGmnG,EAAiBhtG,UAAUkuG,eAAiB,SAAUhiG,EAAOshG,EAAiB5nG,EAAS8Y,EAAMywF,EAAcC,GAGzG,IAFA,IAAIC,EAAqBF,EAElBE,GAAsB,GAAG,CAE9B,IAAIp+F,OAAc,EAUlB,GAPEA,EADEo+F,IAAuBF,QAAqC9tG,IAArB+tG,EAC3BA,EAEAljG,EAAMgF,eAAem+F,GAGd/1E,GAAA,EAA+BroB,IAE9B,EACtB,MAGFo+F,IAGF,GAAIA,EAAqB,GAAK3wF,EAAOxS,EAAM8G,eACzC,OAAO,KAGT,IAAIglD,EAAY9rD,EAAM0E,iBAAiBy+F,GACnCC,EAAQ,KAA8BC,eAAerjG,EAAO,IAAI,KAAMmjG,EAAoBr3C,EAAWq3C,EAAoBr3C,IAE7H,GAAIs3C,EAAO,CACT,IAAIE,EAAcF,EAAML,YACpBQ,EAAcH,EAAMG,YAEpBA,EAAYC,eAAiB,KAAavyF,KAC5CqyF,EAAcF,EAAML,YAAcQ,EAAY58D,WACrC48D,EAAYC,eAAiB,KAAaC,OACnDH,EAAcF,EAAML,YAAcQ,EAAY58D,WACrC48D,EAAYC,eAAiB,KAAaE,cACnDJ,EAAcF,EAAML,YACXQ,EAAYC,eAAiB,KAAaG,UACnDL,EAAchC,EAAgB0B,cAAcI,EAAML,aAAeQ,EAAY58D,YAG/E,IAAIi7D,EAAiB5hG,EAAMgF,eAAewN,GAE1C,GAAIrf,KAAKivG,SAASR,GAAgBrkF,QAAQpqB,KAAKivG,SAASkB,KAAiB,EAAG,CAC1E,IAAInB,EAAiB/0E,GAAA,EAA6BptB,EAAMgF,eAAewN,IACnEyvF,EAAiB70E,GAAA,EAA6Bk2E,GAC9CM,EAA+B,KAA8BC,kBAAkB7jG,EAAOwS,GAU1F,OARqC,OAAjCoxF,GAAwE,EAA/BA,IAGzC3B,EAAiBX,EAAgB0B,cAAcf,IAGjC,GAAwBA,EAAgBvoG,GACxC,GAAwByoG,EAAgBzoG,IAK9D,OAAO,MAGTonG,EAAiBhtG,UAAUsuG,SAAW,SAAUvxD,GAC9C,OAAOA,EAAIvlB,QAAQ,OAAQ,KAG7Bw1E,EAAiBhtG,UAAUguG,iBAAmB,SAAU9hG,EAAOK,GAC7D,IAAKlN,KAAK+tG,YACR,OAAO,EAIT,IAAKlhG,EAAM8jG,kBAAkBzjG,EAAUe,iBACrC,OAAO,EAGT,IAAI2iG,EAA2B/jG,EAAMyrB,wBAAwBprB,EAAUe,gBAAiB,GAGxF,OAAI2iG,IAFyB/jG,EAAMyrB,wBAAwBprB,EAAUmE,cAAe,IAME,OAAlF,KAA8Bw/F,sBAAsBD,IAO1DjD,EAAiBhtG,UAAU2uG,4BAA8B,SAAUziG,EAAOoE,EAASC,EAAG3K,EAASC,EAAcwwB,GAC3G,IAAK,IAAIxoB,EAAI0C,EAAEjD,gBAAiBO,GAAK0C,EAAEG,cAAe7C,IAAK,CACzD,IAAIoD,EAAc/E,EAAMgF,eAAerD,GACnCsiG,EAAiB72E,GAAA,EAA6BroB,GAG9Cm/F,EAAY,GAFQ,GAAwBD,EAAgBvqG,GACzBywB,EACkBzwB,EAASC,GAE9DuqG,IAAcD,IAChB7/F,EAAQc,iBAAiB,IAAI,KAAMvD,EAAG,EAAGA,EAAGsiG,EAAevkG,OAAS,GAAIwkG,GAEpEviG,IAAM0C,EAAEG,eAAiBH,EAAEI,WAAaw/F,EAAevkG,OAAS,GAAmB,KAAdwkG,IAGvE/wG,KAAKguG,6BAA8B,MAM3CL,EAAiBhtG,UAAUwR,mBAAqB,SAAUtF,EAAOuF,GAC/D,IAAIC,EAASD,EAAOE,oBAAoBtS,KAAKmR,cAU7C,OARInR,KAAKg7B,uBACP3oB,EAASA,EAAOG,eAAeH,EAAOhB,cAAgB,EAAG,IAGvDrR,KAAKguG,6BAA+B37F,EAAOpE,gBAAkBoE,EAAOhB,gBACtEgB,EAASA,EAAOG,eAAeH,EAAOhB,cAAe,IAGhDgB,GAGFs7F,EAzUT,GCPIqD,GAEJ,WACE,SAASA,EAAiB9jG,EAAW+jG,GACnCjxG,KAAKkN,UAAYA,EACjBlN,KAAKixG,WAAaA,EAqCpB,OAlCAD,EAAiBrwG,UAAUqQ,kBAAoB,SAAUnE,EAAOoE,GAC9D,IAAIkR,EA8ER,SAAmBtV,EAAOK,EAAW+jG,GACnC,IAAI5lF,EAAO6lF,GAAYrkG,EAAOK,EAAW+jG,GAEzC,IAAK5lF,EACH,OAAO,KAGT,OAAO,KAAc8M,QAAQ,IAAI,KAAM9M,EAAKpd,gBAAiB,EAAGod,EAAKha,cAAexE,EAAM0E,iBAAiB8Z,EAAKha,gBAAiBga,EAAKkgB,MAAMhrB,KAAK,OArFtI4wF,CAAUtkG,EAAO7M,KAAKkN,UAAWlN,KAAKixG,YAE3C9uF,GACFlR,EAAQc,iBAAiBoQ,EAAG1U,MAAO0U,EAAGvJ,MAGxC5Y,KAAK4sG,YAAc37F,EAAQG,eAAepR,KAAKkN,YAGjD8jG,EAAiBrwG,UAAUwR,mBAAqB,SAAUtF,EAAOuF,GAC/D,OAAOA,EAAOE,oBAAoBtS,KAAK4sG,cAGzCoE,EAAiBI,OAAS,SAAUvkG,EAAOK,EAAW+jG,GACpD,GAAc,OAAVpkG,EACF,OAAO,EAGT,IAAIwe,EAAO6lF,GAAYrkG,EAAOK,EAAW+jG,GAEzC,IAAK5lF,EACH,OAAO,EAGT,IAAK,IAAI7c,EAAI,EAAGC,EAAM4c,EAAK4K,OAAO1pB,OAAQiC,EAAIC,EAAKD,IACjD,GAAI6c,EAAK4K,OAAOznB,KAAO6c,EAAKkgB,MAAM/8B,GAChC,OAAO,EAIX,OAAO,GAGFwiG,EAxCT,GA6CA,SAASE,GAAYrkG,EAAOK,EAAW+jG,GACrC,IAAIhjG,EAAkBf,EAAUe,gBAC5BoD,EAAgBnE,EAAUmE,cAO9B,GAL4B,IAAxBnE,EAAUoE,WACZD,IAIEpD,GAAmBoD,EACrB,OAAO,KAKT,IAFA,IAAIggG,EAAc,GAET3jG,EAAaO,EAAiBP,GAAc2D,EAAe3D,IAClE2jG,EAAYjjG,KAAKvB,EAAMgF,eAAenE,IAGxC,IAAIgxD,EAAS2yC,EAAY/jE,MAAM,GAS/B,OARAoxB,EAAOxvD,KAAK,SAAUkM,EAAGlS,GACvB,OAAOkS,EAAE4N,cAAc1N,cAAcpS,EAAE8f,kBAGtB,IAAfioF,IACFvyC,EAASA,EAAOjrC,WAGX,CACLxlB,gBAAiBA,EACjBoD,cAAeA,EACf4kB,OAAQo7E,EACR9lE,MAAOmzB,GClFX,IAAI,GAAsC,WACxC,IAAI11D,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA0CtC,GAEJ,SAAUO,GAGR,SAASunG,EAAwBC,EAAM7+F,GACrC,IAAItR,EAAQ2I,EAAOE,KAAKjK,KAAM0S,IAAS1S,KAGvC,OADAoB,EAAMmwG,KAAOA,EACNnwG,EAiBT,OAvBA,GAAUkwG,EAAyBvnG,GASnCunG,EAAwB3wG,UAAU+J,IAAM,SAAU4d,EAAW1d,GAI3D,IAHA,IAAI+H,EAAW,GAGNC,EAAK,EAAGC,EAFAjI,EAAOoC,iBAAmB,GAEC4F,EAAKC,EAAatG,OAAQqG,IAAM,CAC1E,IAAI1F,EAAY2F,EAAaD,GAC7BD,EAASvE,KAAK,IAAI,GAAiBlB,EAAWlN,KAAKuxG,OAGrD3mG,EAAOkI,eACPlI,EAAOmI,gBAAgB/S,KAAKgG,GAAI2M,GAChC/H,EAAOkI,gBAGFw+F,EAxBT,CAyBE,KAEE,GAEJ,SAAUvnG,GAGR,SAASynG,IACP,OAAOznG,EAAOE,KAAKjK,MAAM,EAAO,CAC9BgG,GAAI,kCACJkE,MAAOJ,EAAA,EAAa,eAAgB,gBACpCK,MAAO,eACPC,aAAc,IAAkB6I,SAChC5I,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,KAOT0xB,MAAO,CACL1xB,QAAS,MAUXC,OAAQ,KAIVoL,YAAa,CACXC,OAAQ,GAGRxF,MAAO,SACPE,MAAO1G,EAAA,EAAa,CAClB2G,IAAK,gBACLC,QAAS,CAAC,0BACT,kBACHC,MAAO,MAEL3Q,KAGR,OA9CA,GAAUwxG,EAAmBznG,GA8CtBynG,EA/CT,CAgDE,IAEE,GAEJ,SAAUznG,GAGR,SAAS0nG,IACP,OAAO1nG,EAAOE,KAAKjK,MAAM,EAAM,CAC7BgG,GAAI,oCACJkE,MAAOJ,EAAA,EAAa,iBAAkB,kBACtCK,MAAO,iBACPC,aAAc,IAAkB6I,SAChC5I,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,KAOT0xB,MAAO,CACL1xB,QAAS,MAUXC,OAAQ,KAIVoL,YAAa,CACXC,OAAQ,GAGRxF,MAAO,SACPE,MAAO1G,EAAA,EAAa,CAClB2G,IAAK,kBACLC,QAAS,CAAC,0BACT,oBACHC,MAAO,MAEL3Q,KAGR,OA9CA,GAAUyxG,EAAqB1nG,GA8CxB0nG,EA/CT,CAgDE,IAGE,GAEJ,SAAU1nG,GAGR,SAAS2nG,EAAwBH,EAAM7+F,GACrC,IAAItR,EAAQ2I,EAAOE,KAAKjK,KAAM0S,IAAS1S,KAGvC,OADAoB,EAAMmwG,KAAOA,EACNnwG,EAkBT,OAxBA,GAAUswG,EAAyB3nG,GASnC2nG,EAAwB/wG,UAAU+J,IAAM,SAAU4d,EAAW1d,GAK3D,IAJA,IAAI+H,EAAW,GACX7D,EAAalE,EAAOoC,iBAAmB,GACvC6gG,EAAajjG,EAAOiB,mBAAmBgiG,WAElCj7F,EAAK,EAAGupB,EAAertB,EAAY8D,EAAKupB,EAAa5vB,OAAQqG,IAAM,CAC1E,IAAI1F,EAAYivB,EAAavpB,GAC7BD,EAASvE,KAAK,IAAI,GAAiBlB,EAAWlN,KAAKuxG,KAAM1D,IAG3DjjG,EAAOkI,eACPlI,EAAOmI,gBAAgB/S,KAAKgG,GAAI2M,GAChC/H,EAAOkI,gBAGF4+F,EAzBT,CA0BE,KAEE,GAEJ,SAAU3nG,GAGR,SAAS4nG,IACP,OAAO5nG,EAAOE,KAAKjK,MAAM,EAAO,CAC9BgG,GAAI,kCACJkE,MAAOJ,EAAA,EAAa,eAAgB,gBACpCK,MAAO,eACPC,aAAc,IAAkB6I,SAChC5I,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,IAKT0xB,MAAO,CACL1xB,QAAS,KAMXC,OAAQ,KAIVoL,YAAa,CACXC,OAAQ,GAGRxF,MAAO,SACPE,MAAO1G,EAAA,EAAa,CAClB2G,IAAK,gBACLC,QAAS,CAAC,0BACT,kBACHC,MAAO,MAEL3Q,KAGR,OAxCA,GAAU2xG,EAAmB5nG,GAwCtB4nG,EAzCT,CA0CE,IAEE,GAEJ,SAAU5nG,GAGR,SAAS6nG,IACP,OAAO7nG,EAAOE,KAAKjK,MAAM,EAAM,CAC7BgG,GAAI,oCACJkE,MAAOJ,EAAA,EAAa,iBAAkB,kBACtCK,MAAO,iBACPC,aAAc,IAAkB6I,SAChC5I,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,IAKT0xB,MAAO,CACL1xB,QAAS,KAMXC,OAAQ,KAIVoL,YAAa,CACXC,OAAQ,GAGRxF,MAAO,SACPE,MAAO1G,EAAA,EAAa,CAClB2G,IAAK,kBACLC,QAAS,CAAC,0BACT,oBACHC,MAAO,MAEL3Q,KAGR,OAxCA,GAAU4xG,EAAqB7nG,GAwCxB6nG,EAzCT,CA0CE,IAEE,GAEJ,SAAU7nG,GAGR,SAAS8nG,EAAwBZ,EAAYv+F,GAC3C,IAAItR,EAAQ2I,EAAOE,KAAKjK,KAAM0S,IAAS1S,KAGvC,OADAoB,EAAM6vG,WAAaA,EACZ7vG,EAyBT,OA/BA,GAAUywG,EAAyB9nG,GASnC8nG,EAAwBlxG,UAAU+J,IAAM,SAAU4d,EAAW1d,GAG3D,IAFA,IAAIkE,EAAalE,EAAOoC,iBAAmB,GAElC4F,EAAK,EAAGk/F,EAAehjG,EAAY8D,EAAKk/F,EAAavlG,OAAQqG,IAAM,CAC1E,IAAI1F,EAAY4kG,EAAal/F,GAE7B,IAAKo+F,GAAiBI,OAAOxmG,EAAOkC,WAAYI,EAAWlN,KAAKixG,YAC9D,OAMJ,IAFA,IAAIt+F,EAAW,GAENnE,EAAI,EAAGC,EAAMK,EAAWvC,OAAQiC,EAAIC,EAAKD,IAChDmE,EAASnE,GAAK,IAAIwiG,GAAiBliG,EAAWN,GAAIxO,KAAKixG,YAGzDrmG,EAAOkI,eACPlI,EAAOmI,gBAAgB/S,KAAKgG,GAAI2M,GAChC/H,EAAOkI,gBAGF++F,EAhCT,CAiCE,KAIE,GAEJ,SAAU9nG,GAGR,SAASgoG,IACP,OAAOhoG,EAAOE,KAAKjK,MAAM,EAAO,CAC9BgG,GAAI,mCACJkE,MAAOJ,EAAA,EAAa,sBAAuB,wBAC3CK,MAAO,uBACPC,aAAc,IAAkB6I,YAC5BjT,KAGR,OAXA,GAAU+xG,EAA0BhoG,GAW7BgoG,EAZT,CAaE,IAIE,GAEJ,SAAUhoG,GAGR,SAASioG,IACP,OAAOjoG,EAAOE,KAAKjK,MAAM,EAAM,CAC7BgG,GAAI,oCACJkE,MAAOJ,EAAA,EAAa,uBAAwB,yBAC5CK,MAAO,wBACPC,aAAc,IAAkB6I,YAC5BjT,KAGR,OAXA,GAAUgyG,EAA2BjoG,GAW9BioG,EAZT,CAaE,IAIE,GAEJ,SAAUjoG,GAGR,SAASkoG,IACP,OAAOloG,EAAOE,KAAKjK,KAAM,CACvBgG,GAAIisG,EAA6BvlG,GACjCxC,MAAOJ,EAAA,EAAa,+BAAgC,4BACpDK,MAAO,2BACPC,aAAc,IAAkB6I,SAChC5I,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,aAAS,KAIhB,MAKFC,OAAQ,QAINzK,KA4BR,OAnDA,GAAUiyG,EAA8BloG,GA0BxCkoG,EAA6BtxG,UAAU+J,IAAM,SAAU4d,EAAW1d,EAAQsK,GACxE,IAAIi3F,EAAU,GAEM,cAAhBj3F,EAAK8zB,SAIPmjE,GAAWvhG,EAAOoC,iBAAmB,IAAIC,IAAI,SAAUiE,GACrD,OAAO,IAAI,IAASA,EAAEiF,mBAAoBjF,EAAEwpB,mBAIhD,IAAIxtB,EAAYtC,EAAOoL,eAEvB,GAAkB,OAAd9I,EAAJ,CAIA,IAAIqD,EAAU,IAAI27F,GAA8Bh/F,EAAWi/F,GAC3DvhG,EAAOkI,eACPlI,EAAOmI,gBAAgB/S,KAAKgG,GAAI,CAACuK,IACjC3F,EAAOkI,iBAGTm/F,EAA6BvlG,GAAK,uCAC3BulG,EApDT,CAqDE,KAIE,GAEJ,SAAUloG,GAGR,SAASmoG,IACP,OAAOnoG,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,4BACJkE,MAAOJ,EAAA,EAAa,eAAgB,eACpCK,MAAO,cACPC,aAAc,IAAkB6I,SAChC5I,OAAQ,CACNC,OAAQ,IAAkB8I,eAC1B5I,QAAS,KAOTC,OAAQ,QAINzK,KA0FR,OA/GA,GAAUkyG,EAAmBnoG,GAwB7BmoG,EAAkBvxG,UAAU+J,IAAM,SAAU4d,EAAW1d,GACrD,GAAKA,EAAOgC,WAAZ,CAIA,IAAIiV,EAAM7hB,KAAKmyG,kBAAkBvnG,GAE7BiC,EAAQjC,EAAOkC,WAEnB,GAA6B,IAAzBD,EAAM8G,gBAAsD,IAA9B9G,EAAM0E,iBAAiB,GAAzD,CASA,IAJA,IAAI6gG,EAAe,EACfrtC,EAAQ,GACRstC,EAAc,GAET7jG,EAAI,EAAGC,EAAMoT,EAAItV,OAAQiC,EAAIC,EAAKD,IAAK,CAC9C,IAAI2T,EAAKN,EAAIrT,GACTP,EAAkBkU,EAAGlU,gBACrBoD,EAAgB8Q,EAAG9Q,cACnBnD,EAAc,EACdoD,EAAYzE,EAAM0E,iBAAiBF,GAEnCA,EAAgBxE,EAAM8G,gBACxBtC,GAAiB,EACjBC,EAAY,GACHrD,EAAkB,IAC3BA,GAAmB,EACnBC,EAAcrB,EAAM0E,iBAAiBtD,IAGvC82D,EAAM32D,KAAK,KAAc+pB,QAAQ,IAAI,IAAUlqB,EAAiBC,EAAamD,EAAeC,GAAY,KACxG+gG,EAAYjkG,KAAK,IAAI,IAAUH,EAAkBmkG,EAAcjwF,EAAGuY,eAAgBzsB,EAAkBmkG,EAAcjwF,EAAGuY,iBACrH03E,GAAgBjwF,EAAG9Q,cAAgB8Q,EAAGlU,gBAAkB,EAG1DrD,EAAOkI,eACPlI,EAAO66D,aAAazlE,KAAKgG,GAAI++D,EAAOstC,GACpCznG,EAAOkI,kBAGTo/F,EAAkBvxG,UAAUwxG,kBAAoB,SAAUvnG,GAExD,IAAI0nG,EAAa1nG,EAAOoC,gBAAgBC,IAAI,SAAUiE,GACpD,IAAIG,EAAgBH,EAAEG,cAMtB,OAJIH,EAAEjD,gBAAkBiD,EAAEG,eAAiC,IAAhBH,EAAEI,YAC3CD,GAAiB,GAGZ,CACLpD,gBAAiBiD,EAAEjD,gBACnBgtB,qBAAsB/pB,EAAE+pB,qBACxB5pB,cAAeA,EACfqpB,eAAgBxpB,EAAEwpB,kBAItB43E,EAAWpjG,KAAK,SAAUkM,EAAGlS,GAC3B,OAAIkS,EAAEnN,kBAAoB/E,EAAE+E,gBACnBmN,EAAE/J,cAAgBnI,EAAEmI,cAGtB+J,EAAEnN,gBAAkB/E,EAAE+E,kBAM/B,IAHA,IAAIskG,EAAmB,GACnBC,EAAoBF,EAAW,GAE1B9jG,EAAI,EAAGA,EAAI8jG,EAAW/lG,OAAQiC,IACjCgkG,EAAkBnhG,cAAgB,GAAKihG,EAAW9jG,GAAGP,gBAEvDukG,EAAkBnhG,cAAgBihG,EAAW9jG,GAAG6C,eAGhDkhG,EAAiBnkG,KAAKokG,GACtBA,EAAoBF,EAAW9jG,IAMnC,OADA+jG,EAAiBnkG,KAAKokG,GACfD,GAGFL,EAhHT,CAiHE,KAIE,GAEJ,SAAUnoG,GAGR,SAAS0oG,IACP,OAAO1oG,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,4BACJkE,MAAOJ,EAAA,EAAa,eAAgB,eACpCK,MAAO,cACPC,aAAc,IAAkB6I,SAChC5I,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,KAKTC,OAAQ,QAINzK,KAeR,OAlCA,GAAUyyG,EAAmB1oG,GAsB7B0oG,EAAkB9xG,UAAU+J,IAAM,SAAU4d,EAAW1d,GACrD,IAAIuhG,EAAUvhG,EAAO8nG,cAEhBvG,IAILvhG,EAAOkI,eACPlI,EAAOmI,gBAAgB/S,KAAKgG,GAAI,KAAeqf,OAAO8mF,EAAQwG,QAAQxtF,OAAQva,EAAOkC,WAAYlC,EAAOoC,kBACxGpC,EAAOkI,iBAGF2/F,EAnCT,CAoCE,KAIE,GAEJ,SAAU1oG,GAGR,SAAS6oG,IACP,OAAO7oG,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,6BACJkE,MAAOJ,EAAA,EAAa,gBAAiB,gBACrCK,MAAO,eACPC,aAAc,IAAkB6I,SAChC5I,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,KAKTC,OAAQ,QAINzK,KAOR,OA1BA,GAAU4yG,EAAoB7oG,GAsB9B6oG,EAAmBjyG,UAAU+J,IAAM,SAAU4d,EAAW1d,GACtD,IAAoB4lG,QAAQlnF,iBAAiBhB,EAAW1d,EAAQ,OAG3DgoG,EA3BT,CA4BE,KAEE,GAEJ,SAAU7oG,GAGR,SAAS8oG,IACP,OAAO9oG,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,iCACJkE,MAAOJ,EAAA,EAAa,qBAAsB,qBAC1CK,MAAO,oBACPC,aAAc,IAAkB6I,SAChC5I,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,KAOTC,OAAQ,QAINzK,KAcR,OAnCA,GAAU6yG,EAAwB9oG,GAwBlC8oG,EAAuBlyG,UAAU+J,IAAM,SAAU4d,EAAW1d,GAC1D,IAAIuhG,EAAUvhG,EAAO8nG,cAEhBvG,IAILvhG,EAAOkI,eACPlI,EAAOmI,gBAAgB/S,KAAKgG,GAAI,KAAe8sG,iBAAiB3G,EAAQwG,QAAQxtF,OAAQva,EAAOkC,WAAYlC,EAAOoC,oBAG7G6lG,EApCT,CAqCE,KAIE,GAEJ,SAAU9oG,GAGR,SAASgpG,IACP,OAAOhpG,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,gCACJkE,MAAOJ,EAAA,EAAa,oBAAqB,qBACzCK,MAAO,oBACPC,aAAc,IAAkB6I,SAChC5I,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,KAKTC,OAAQ,QAINzK,KAcR,OAjCA,GAAU+yG,EAAuBhpG,GAsBjCgpG,EAAsBpyG,UAAU+J,IAAM,SAAU4d,EAAW1d,GACzD,IAAIuhG,EAAUvhG,EAAO8nG,cAEhBvG,IAILvhG,EAAOkI,eACPlI,EAAOmI,gBAAgB/S,KAAKgG,GAAI,KAAegtG,gBAAgB7G,EAAQwG,QAAQxtF,OAAQva,EAAOkC,WAAYlC,EAAOoC,oBAG5G+lG,EAlCT,CAmCE,KAIE,GAEJ,SAAUhpG,GAGR,SAASkpG,IACP,OAAkB,OAAXlpG,GAAmBA,EAAOuW,MAAMtgB,KAAM2W,YAAc3W,KAsC7D,OAzCA,GAAUizG,EAAmClpG,GAM7CkpG,EAAkCtyG,UAAU+J,IAAM,SAAU4d,EAAW1d,GACrE,GAAKA,EAAOgC,WAAZ,CAWA,IAPA,IAAIsmG,EAAgBtoG,EAAOoL,eAEvBm9F,EAAiBnzG,KAAKozG,mBAAmBxoG,GAGzCyoG,EAAkB,GAEb7kG,EAAI,EAAGivC,EAAQ01D,EAAe5mG,OAAS,EAAGiC,EAAIivC,EAAOjvC,IAAK,CACjE,IAAIf,EAAQ0lG,EAAe3kG,GACvB8kG,EAAYH,EAAe3kG,EAAI,GAEa,OAA5C,KAAM2Q,gBAAgB1R,EAAO6lG,GAC/BD,EAAgBjlG,KAAKX,GAErB0lG,EAAe3kG,EAAI,GAAK,KAAMuf,UAAUtgB,EAAO6lG,GAInDD,EAAgBjlG,KAAK+kG,EAAeA,EAAe5mG,OAAS,IAE5D,IAAIgnG,EAAiBvzG,KAAKwzG,mBAAmBN,EAAeG,GAExDtuC,EAAQsuC,EAAgBpmG,IAAI,SAAUQ,GACxC,OAAO,KAAc0qB,QAAQ1qB,EAAO,MAEtC7C,EAAOkI,eACPlI,EAAO66D,aAAazlE,KAAKgG,GAAI++D,EAAOwuC,GACpC3oG,EAAOkI,iBAGFmgG,EA1CT,CA2CE,KAIE,GAEJ,SAAUlpG,GAGR,SAAS0pG,IACP,OAAO1pG,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,gBACJkE,MAAOJ,EAAA,EAAa,sBAAuB,mBAC3CK,MAAO,kBACPC,aAAc,IAAkB6I,SAChC5I,OAAQ,CACNC,OAAQ,IAAkB8I,eAC1B5I,QAAS,EACT6I,IAAK,CACH7I,QAAS,MAMXC,OAAQ,QAINzK,KAgER,OAtFA,GAAUyzG,EAAqB1pG,GAyB/B0pG,EAAoB9yG,UAAU6yG,mBAAqB,SAAUN,EAAeC,GAC1E,IAAIO,EAAmB,KACnBH,EAAiB,GACjBI,EAAe,EAwBnB,OAvBAR,EAAerlG,QAAQ,SAAUL,GAC/B,IAAImmG,EAEJ,GAAwB,IAApBnmG,EAAM6D,WAAmBqiG,EAAe,EAAG,CAC7C,IAAIE,EAAepmG,EAAMQ,gBAAkB0lG,EAC3CC,EAAY,IAAI,IAAUC,EAAcpmG,EAAMS,YAAa2lG,EAAcpmG,EAAMS,kBAE/E0lG,EAAY,IAAI,IAAUnmG,EAAMQ,gBAAiBR,EAAMS,YAAaT,EAAMQ,gBAAiBR,EAAMS,aAGnGylG,GAAgBlmG,EAAM4D,cAAgB5D,EAAMQ,gBAExCR,EAAM0R,gBAAgB+zF,GACxBQ,EAAmBE,EAEnBL,EAAenlG,KAAKwlG,KAIpBF,GACFH,EAAeO,QAAQJ,GAGlBH,GAGTE,EAAoB9yG,UAAUyyG,mBAAqB,SAAUxoG,GAC3D,IAAIkE,EAAalE,EAAOoC,gBAExB,GAAmB,OAAf8B,EACF,MAAO,GAGT,IAAIqkG,EAAiBrkG,EACjBjC,EAAQjC,EAAOkC,WAEnB,OAAc,OAAVD,EACK,IAGTsmG,EAAejkG,KAAK,KAAMm2B,0BAC1B8tE,EAAiBA,EAAelmG,IAAI,SAAUC,GAC5C,GAAIA,EAAU+B,UAAW,CACvB,GAA8B,IAA1B/B,EAAUgB,YAAmB,CAC/B,IAAI6lG,EAAiB1yG,KAAKw5B,IAAI,EAAG3tB,EAAUe,gBAAkB,GACzD+lG,EAAiD,IAA9B9mG,EAAUe,gBAAwB,EAAIpB,EAAMgF,eAAekiG,GAAgBxnG,OAAS,EAC3G,OAAO,IAAI,KAAMwnG,EAAgBC,EAAkB9mG,EAAUe,gBAAiB,GAE9E,OAAO,IAAI,KAAMf,EAAUe,gBAAiB,EAAGf,EAAUe,gBAAiBf,EAAUgB,aAGtF,OAAOhB,MAMNumG,EAvFT,CAwFE,IAIE,GAEJ,SAAU1pG,GAGR,SAASkqG,IACP,OAAOlqG,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,iBACJkE,MAAOJ,EAAA,EAAa,uBAAwB,oBAC5CK,MAAO,mBACPC,aAAc,IAAkB6I,SAChC5I,OAAQ,CACNC,OAAQ,IAAkB8I,eAC1B5I,QAAS,EACT6I,IAAK,CACH7I,QAAS,IAKTmL,UAAW,CAAC,OAMdlL,OAAQ,QAINzK,KAuDR,OAlFA,GAAUi0G,EAAsBlqG,GA8BhCkqG,EAAqBtzG,UAAU6yG,mBAAqB,SAAUN,EAAeC,GAI3E,IAHA,IAAIO,EAAmB,KACnBH,EAAiB,GAEZ/kG,EAAI,EAAGC,EAAM0kG,EAAe5mG,OAAoBiC,EAAIC,EAAKD,IAAK,CACrE,IAAIf,EAAQ0lG,EAAe3kG,GACvBolG,EAAY,IAAI,IAAUnmG,EAAMQ,gBAFgB,EAEUR,EAAMS,YAAaT,EAAMQ,gBAFnC,EAE6DR,EAAMS,aAEnHT,EAAM0R,gBAAgB+zF,GACxBQ,EAAmBE,EAEnBL,EAAenlG,KAAKwlG,GAQxB,OAJIF,GACFH,EAAeO,QAAQJ,GAGlBH,GAGTU,EAAqBtzG,UAAUyyG,mBAAqB,SAAUxoG,GAC5D,IAAIiC,EAAQjC,EAAOkC,WAEnB,GAAc,OAAVD,EACF,MAAO,GAGT,IAAIiC,EAAalE,EAAOoC,gBAExB,GAAmB,OAAf8B,EACF,MAAO,GAGT,IAAIqkG,EAAiBrkG,EAAW7B,IAAI,SAAUm6E,GAC5C,GAAIA,EAAIn4E,UAAW,CACjB,IAAI0pD,EAAY9rD,EAAM0E,iBAAiB61E,EAAIn5E,iBAE3C,OAAIm5E,EAAIl5E,cAAgByqD,EACf,IAAI,KAAMyuB,EAAIn5E,gBAAiBm5E,EAAIl5E,YAAak5E,EAAIn5E,gBAAkB,EAAG,GAEzE,IAAI,KAAMm5E,EAAIn5E,gBAAiBm5E,EAAIl5E,YAAak5E,EAAIn5E,gBAAiB0qD,GAIhF,OAAOyuB,IAGT,OADA+rB,EAAejkG,KAAK,KAAMm2B,0BACnB8tE,GAGFc,EAnFT,CAoFE,IAIE,GAEJ,SAAUlqG,GAGR,SAASmqG,IACP,OAAOnqG,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,0BACJkE,MAAOJ,EAAA,EAAa,kBAAmB,cACvCK,MAAO,aACPC,aAAc,IAAkB6I,SAChC5I,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,EACT6I,IAAK,CACH7I,QAAS,KAMXC,OAAQ,QAINzK,KAgJR,OAtKA,GAAUk0G,EAAiBnqG,GAyB3BmqG,EAAgBvzG,UAAU+J,IAAM,SAAU4d,EAAW1d,GACnD,IAAIkE,EAAalE,EAAOoC,gBAExB,GAAmB,OAAf8B,EAAJ,CAIA,IAAIokG,EAAgBtoG,EAAOoL,eAE3B,GAAsB,OAAlBk9F,EAAJ,CAIApkG,EAAWI,KAAK,KAAMm2B,0BACtB,IAAI8uE,EAAoB,GACpBC,EAAgBtlG,EAAWikB,OAAO,SAAUshF,EAAe7uD,GAC7D,OAAI6uD,EAAcplG,UACZolG,EAAchjG,gBAAkBm0C,EAAav3C,iBAC3CilG,EAAcx0E,gBAAgB21E,KAChCnB,EAAgB1tD,GAGXA,GAGLA,EAAav3C,gBAAkBomG,EAAchjG,cAAgB,GAC/D8iG,EAAkB/lG,KAAKimG,GAChB7uD,GAEA,IAAI,IAAU6uD,EAAcpmG,gBAAiBomG,EAAcnmG,YAAas3C,EAAan0C,cAAem0C,EAAal0C,WAGtHk0C,EAAav3C,gBAAkBomG,EAAchjG,eAC/C8iG,EAAkB/lG,KAAKimG,GAChB7uD,GAEA,IAAI,IAAU6uD,EAAcpmG,gBAAiBomG,EAAcnmG,YAAas3C,EAAan0C,cAAem0C,EAAal0C,aAI9H6iG,EAAkB/lG,KAAKgmG,GACvB,IAAIvnG,EAAQjC,EAAOkC,WAEnB,GAAc,OAAVD,EAAJ,CASA,IALA,IAAIk4D,EAAQ,GACRwuC,EAAiB,GACjBG,EAAmBR,EACnBoB,EAAa,EAER9lG,EAAI,EAAGC,EAAM0lG,EAAkB5nG,OAAQiC,EAAIC,EAAKD,IAAK,CAC5D,IAAItB,EAAYinG,EAAkB3lG,GAC9BP,EAAkBf,EAAUe,gBAE5BsmG,EAAoB,EACpBljG,OAAgB,EAChBC,OAAY,EACZkjG,EAA6B3nG,EAAMgF,eAAe3E,EAAUmE,eAAe9E,OAASW,EAAUoE,UAElG,GAAIpE,EAAU+B,WAAa/B,EAAUe,kBAAoBf,EAAUmE,cAAe,CAChF,IAAInG,EAAWgC,EAAUC,mBAErBjC,EAASwC,WAAab,EAAM8G,gBAC9BtC,EAAgBpD,EAAkB,EAClCqD,EAAYzE,EAAM0E,iBAAiBF,KAEnCA,EAAgBnG,EAASwC,WACzB4D,EAAYzE,EAAM0E,iBAAiBrG,EAASwC,kBAG9C2D,EAAgBnE,EAAUmE,cAC1BC,EAAYzE,EAAM0E,iBAAiBF,GAKrC,IAFA,IAAIojG,EAAsB5nG,EAAMgF,eAAe5D,GAEtCymG,EAAMzmG,EAAkB,EAAGymG,GAAOrjG,EAAeqjG,IAAO,CAC/D,IAAIC,EAAW9nG,EAAMgF,eAAe6iG,GAChCE,EAAwB/nG,EAAMqJ,gCAAgCw+F,GAElE,GAAIE,GAAyB,EAAG,CAC9B,IAAIC,GAAc,EAEU,KAAxBJ,IACFI,GAAc,IAGZA,GAA+E,MAA/DJ,EAAoBj9D,OAAOi9D,EAAoBloG,OAAS,IAA6E,OAA/DkoG,EAAoBj9D,OAAOi9D,EAAoBloG,OAAS,KAChJsoG,GAAc,EACdJ,EAAsBA,EAAoBt8E,QAAQ,oBAAqB,MAGzE,IAAI28E,EAAwBH,EAAS52D,OAAO62D,EAAwB,GACpEH,IAAwBI,EAAc,IAAM,IAAMC,EAGhDP,EADEM,EACkBC,EAAsBvoG,OAAS,EAE/BuoG,EAAsBvoG,YAG5CgoG,EAAoB,EAIxB,IAAIQ,EAAkB,IAAI,KAAM9mG,EApDd,EAoD4CoD,EAAeC,GAE7E,IAAKyjG,EAAgB9lG,UAAW,CAC9B,IAAI+lG,OAAkB,EAElB9nG,EAAU+B,WACZ81D,EAAM32D,KAAK,KAAc+pB,QAAQ48E,EAAiBN,IAClDO,EAAkB,IAAI,IAAUD,EAAgB9mG,gBAAkBqmG,EAAYG,EAAoBloG,OAASgoG,EAAoB,EAAGtmG,EAAkBqmG,EAAYG,EAAoBloG,OAASgoG,EAAoB,IAE7MrnG,EAAUe,kBAAoBf,EAAUmE,eAC1C0zD,EAAM32D,KAAK,KAAc+pB,QAAQ48E,EAAiBN,IAClDO,EAAkB,IAAI,IAAU9nG,EAAUe,gBAAkBqmG,EAAYpnG,EAAUgB,YAAahB,EAAUmE,cAAgBijG,EAAYpnG,EAAUoE,aAE/IyzD,EAAM32D,KAAK,KAAc+pB,QAAQ48E,EAAiBN,IAClDO,EAAkB,IAAI,IAAU9nG,EAAUe,gBAAkBqmG,EAAYpnG,EAAUgB,YAAahB,EAAUe,gBAAkBqmG,EAAYG,EAAoBloG,OAASioG,IAI1G,OAA1D,KAAMr1F,gBAAgB41F,EAAiB7B,GACzCQ,EAAmBsB,EAEnBzB,EAAenlG,KAAK4mG,GAIxBV,GAAcS,EAAgB1jG,cAAgB0jG,EAAgB9mG,gBAGhEslG,EAAeO,QAAQJ,GACvB9oG,EAAOkI,eACPlI,EAAO66D,aAAazlE,KAAKgG,GAAI++D,EAAOwuC,GACpC3oG,EAAOkI,mBAGFohG,EAvKT,CAwKE,KAIE,GAEJ,SAAUnqG,GAGR,SAASkrG,IACP,OAAOlrG,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,0BACJkE,MAAOJ,EAAA,EAAa,mBAAoB,0CACxCK,MAAO,yCACPC,aAAc,IAAkB6I,YAC5BjT,KAkDR,OA1DA,GAAUi1G,EAAiBlrG,GAW3BkrG,EAAgBt0G,UAAU+J,IAAM,SAAU4d,EAAW1d,GACnD,IAAIkE,EAAalE,EAAOoC,gBAExB,GAAmB,OAAf8B,EAAJ,CAIA,IAAIjC,EAAQjC,EAAOkC,WAEnB,GAAc,OAAVD,EAAJ,CAMA,IAFA,IAAI8F,EAAW,GAENnE,EAAI,EAAGC,EAAMK,EAAWvC,OAAQiC,EAAIC,EAAKD,IAAK,CACrD,IAAItB,EAAY4B,EAAWN,GAE3B,GAAKtB,EAAU+B,UAAf,CAIA,IAAIy4F,EAASx6F,EAAUC,mBACnBwrD,EAAY9rD,EAAM0E,iBAAiBm2F,EAAOh6F,YAE9C,GAAIg6F,EAAO/5F,QAAUgrD,EAAW,CAC9B,GAAI+uC,EAAOh6F,aAAeb,EAAM8G,eAC9B,SAKF,IAAIohG,EAAkB,IAAI,KAAMrN,EAAOh6F,WAAYrM,KAAKw5B,IAAI,EAAG6sE,EAAO/5F,OAAS,GAAI+5F,EAAOh6F,WAAa,EAAG,GACtGwnG,EAAQroG,EAAMqH,gBAAgB6gG,GAAiB19D,MAAM,IAAI5jB,UAAUlT,KAAK,IAC5E5N,EAASvE,KAAK,IAAI,KAAe,IAAI,IAAUs5F,EAAOh6F,WAAYrM,KAAKw5B,IAAI,EAAG6sE,EAAO/5F,OAAS,GAAI+5F,EAAOh6F,WAAa,EAAG,GAAIwnG,QACxH,CACDH,EAAkB,IAAI,KAAMrN,EAAOh6F,WAAYrM,KAAKw5B,IAAI,EAAG6sE,EAAO/5F,OAAS,GAAI+5F,EAAOh6F,WAAYg6F,EAAO/5F,OAAS,GAClHunG,EAAQroG,EAAMqH,gBAAgB6gG,GAAiB19D,MAAM,IAAI5jB,UAAUlT,KAAK,IAC5E5N,EAASvE,KAAK,IAAI,KAAqC2mG,EAAiBG,EAAO,IAAI,IAAUxN,EAAOh6F,WAAYg6F,EAAO/5F,OAAS,EAAG+5F,EAAOh6F,WAAYg6F,EAAO/5F,OAAS,OAI1K/C,EAAOkI,eACPlI,EAAOmI,gBAAgB/S,KAAKgG,GAAI2M,GAChC/H,EAAOkI,kBAGFmiG,EA3DT,CA4DE,KAIE,GAEJ,SAAUlrG,GAGR,SAASorG,IACP,OAAkB,OAAXprG,GAAmBA,EAAOuW,MAAMtgB,KAAM2W,YAAc3W,KA4C7D,OA/CA,GAAUm1G,EAAoBprG,GAM9BorG,EAAmBx0G,UAAU+J,IAAM,SAAU4d,EAAW1d,GACtD,IAAIkE,EAAalE,EAAOoC,gBAExB,GAAmB,OAAf8B,EAAJ,CAIA,IAAIjC,EAAQjC,EAAOkC,WAEnB,GAAc,OAAVD,EAAJ,CAOA,IAHA,IAAIs+B,EAAiBvgC,EAAOiB,mBAAmBs/B,eAC3Cx4B,EAAW,GAENnE,EAAI,EAAGC,EAAMK,EAAWvC,OAAQiC,EAAIC,EAAKD,IAAK,CACrD,IAAItB,EAAY4B,EAAWN,GAE3B,GAAItB,EAAU+B,UAAW,CACvB,IAAIy4F,EAASx6F,EAAUC,mBACnB6kD,EAAOnlD,EAAMklD,kBAAkB21C,GAEnC,IAAK11C,EACH,SAGF,IAAIq+B,EAAY,IAAI,KAAMqX,EAAOh6F,WAAYskD,EAAK9jD,YAAaw5F,EAAOh6F,WAAYskD,EAAK1gD,WACnFsH,EAAO/L,EAAMqH,gBAAgBm8E,GACjC19E,EAASvE,KAAK,IAAI,KAAqCiiF,EAAWrwF,KAAKo1G,YAAYx8F,EAAMuyB,GAAiB,IAAI,IAAUu8D,EAAOh6F,WAAYg6F,EAAO/5F,OAAQ+5F,EAAOh6F,WAAYg6F,EAAO/5F,cAC/K,CACDiL,EAAO/L,EAAMqH,gBAAgBhH,GACjCyF,EAASvE,KAAK,IAAI,KAAqClB,EAAWlN,KAAKo1G,YAAYx8F,EAAMuyB,GAAiBj+B,KAI9GtC,EAAOkI,eACPlI,EAAOmI,gBAAgB/S,KAAKgG,GAAI2M,GAChC/H,EAAOkI,kBAGFqiG,EAhDT,CAiDE,KAIE,GAEJ,SAAUprG,GAGR,SAASsrG,IACP,OAAOtrG,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,qCACJkE,MAAOJ,EAAA,EAAa,8BAA+B,0BACnDK,MAAO,yBACPC,aAAc,IAAkB6I,YAC5BjT,KAOR,OAfA,GAAUq1G,EAAiBtrG,GAW3BsrG,EAAgB10G,UAAUy0G,YAAc,SAAUx8F,EAAMuyB,GACtD,OAAOvyB,EAAK08F,qBAGPD,EAhBT,CAiBE,IAIE,GAEJ,SAAUtrG,GAGR,SAASwrG,IACP,OAAOxrG,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,qCACJkE,MAAOJ,EAAA,EAAa,8BAA+B,0BACnDK,MAAO,yBACPC,aAAc,IAAkB6I,YAC5BjT,KAOR,OAfA,GAAUu1G,EAAiBxrG,GAW3BwrG,EAAgB50G,UAAUy0G,YAAc,SAAUx8F,EAAMuyB,GACtD,OAAOvyB,EAAK48F,qBAGPD,EAhBT,CAiBE,IAIE,GAEJ,SAAUxrG,GAGR,SAAS0rG,IACP,OAAO1rG,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,qCACJkE,MAAOJ,EAAA,EAAa,8BAA+B,2BACnDK,MAAO,0BACPC,aAAc,IAAkB6I,YAC5BjT,KA0BR,OAlCA,GAAUy1G,EAAiB1rG,GAW3B0rG,EAAgB90G,UAAUy0G,YAAc,SAAUx8F,EAAMuyB,GAMtD,IALA,IACIuqE,GADa,UAAYvqE,GACEkM,MAAM,IACjC7mC,EAAQ,GACRmlG,GAAiB,EAEZnnG,EAAI,EAAGA,EAAIoK,EAAKrM,OAAQiC,IAAK,CACpC,IAAIonG,EAAch9F,EAAKpK,GAEnBknG,EAActrF,QAAQwrF,IAAgB,GACxCD,GAAiB,EACjBnlG,GAASolG,GACAD,GACTA,GAAiB,EACjBnlG,GAASolG,EAAYN,qBAErB9kG,GAASolG,EAAYJ,oBAIzB,OAAOhlG,GAGFilG,EAnCT,CAoCE,IAGF,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,I,WCh0CjB,GAAsC,WACxC,IAAIzsG,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA0BtC,GAAsC,SAAUkX,EAASC,EAAYC,EAAGC,GAC1E,OAAO,IAAKD,IAAMA,EAAIjE,UAAU,SAAUC,EAASkE,GACjD,SAASC,EAAUxe,GACjB,IACEye,EAAKH,EAAUI,KAAK1e,IACpB,MAAO2J,GACP4U,EAAO5U,IAIX,SAASgV,EAAS3e,GAChB,IACEye,EAAKH,EAAiB,MAAEte,IACxB,MAAO2J,GACP4U,EAAO5U,IAIX,SAAS8U,EAAK3O,GACZA,EAAO8O,KAAOvE,EAAQvK,EAAO9P,OAAS,IAAIqe,EAAE,SAAUhE,GACpDA,EAAQvK,EAAO9P,SACde,KAAKyd,EAAWG,GAGrBF,GAAMH,EAAYA,EAAUP,MAAMI,EAASC,GAAc,KAAKM,WAI9D,GAA0C,SAAUP,EAASW,GAC/D,IASIC,EACAC,EACAC,EACAC,EAZAC,EAAI,CACNxX,MAAO,EACPyX,KAAM,WACJ,GAAW,EAAPH,EAAE,GAAQ,MAAMA,EAAE,GACtB,OAAOA,EAAE,IAEXI,KAAM,GACNC,IAAK,IAMP,OAAOJ,EAAI,CACTR,KAAMa,EAAK,GACX,MAASA,EAAK,GACd,OAAUA,EAAK,IACI,oBAAXC,SAA0BN,EAAEM,OAAOC,UAAY,WACvD,OAAOhiB,OACLyhB,EAEJ,SAASK,EAAKG,GACZ,OAAO,SAAUC,GACf,OAIJ,SAAcC,GACZ,GAAIb,EAAG,MAAM,IAAIc,UAAU,mCAE3B,KAAOV,GACL,IACE,GAAIJ,EAAI,EAAGC,IAAMC,EAAY,EAARW,EAAG,GAASZ,EAAU,OAAIY,EAAG,GAAKZ,EAAS,SAAOC,EAAID,EAAU,SAAMC,EAAEvX,KAAKsX,GAAI,GAAKA,EAAEN,SAAWO,EAAIA,EAAEvX,KAAKsX,EAAGY,EAAG,KAAKhB,KAAM,OAAOK,EAG3J,OAFID,EAAI,EAAGC,IAAGW,EAAK,CAAS,EAARA,EAAG,GAAQX,EAAEjf,QAEzB4f,EAAG,IACT,KAAK,EACL,KAAK,EACHX,EAAIW,EACJ,MAEF,KAAK,EAEH,OADAT,EAAExX,QACK,CACL3H,MAAO4f,EAAG,GACVhB,MAAM,GAGV,KAAK,EACHO,EAAExX,QACFqX,EAAIY,EAAG,GACPA,EAAK,CAAC,GACN,SAEF,KAAK,EACHA,EAAKT,EAAEG,IAAIQ,MAEXX,EAAEE,KAAKS,MAEP,SAEF,QACE,KAAkBb,GAAZA,EAAIE,EAAEE,MAAYrV,OAAS,GAAKiV,EAAEA,EAAEjV,OAAS,MAAkB,IAAV4V,EAAG,IAAsB,IAAVA,EAAG,IAAW,CACtFT,EAAI,EACJ,SAGF,GAAc,IAAVS,EAAG,MAAcX,GAAKW,EAAG,GAAKX,EAAE,IAAMW,EAAG,GAAKX,EAAE,IAAK,CACvDE,EAAExX,MAAQiY,EAAG,GACb,MAGF,GAAc,IAAVA,EAAG,IAAYT,EAAExX,MAAQsX,EAAE,GAAI,CACjCE,EAAExX,MAAQsX,EAAE,GACZA,EAAIW,EACJ,MAGF,GAAIX,GAAKE,EAAExX,MAAQsX,EAAE,GAAI,CACvBE,EAAExX,MAAQsX,EAAE,GAEZE,EAAEG,IAAIzT,KAAK+T,GAEX,MAGEX,EAAE,IAAIE,EAAEG,IAAIQ,MAEhBX,EAAEE,KAAKS,MAEP,SAGJF,EAAKd,EAAKpX,KAAKyW,EAASgB,GACxB,MAAOxV,GACPiW,EAAK,CAAC,EAAGjW,GACTqV,EAAI,EACJ,QACAD,EAAIE,EAAI,EAIZ,GAAY,EAARW,EAAG,GAAQ,MAAMA,EAAG,GACxB,MAAO,CACL5f,MAAO4f,EAAG,GAAKA,EAAG,QAAK,EACvBhB,MAAM,GAlFCH,CAAK,CAACiB,EAAGC,OAmGlB,GAEJ,WACE,SAAS2zF,EAAKrpF,EAAMpQ,GAClBpc,KAAK81G,MAAQtpF,EACbxsB,KAAK+1G,UAAY35F,EAwDnB,OArDAy5F,EAAKl1G,UAAUq1G,OAAS,WACtB,MAAO,CACLvoG,MAAOzN,KAAKyN,MACZyqC,IAAKl4C,KAAKk4C,MAId93C,OAAOM,eAAem1G,EAAKl1G,UAAW,QAAS,CAC7CC,IAAK,WACH,OAAOZ,KAAK81G,MAAMroG,OAEpB3M,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAem1G,EAAKl1G,UAAW,MAAO,CAC3CC,IAAK,WACH,OAAOZ,KAAK81G,MAAM59D,KAEpBp3C,YAAY,EACZC,cAAc,IAGhB80G,EAAKl1G,UAAUic,QAAU,SAAUf,GACjC,IAAIza,EAAQpB,KAEZ,GAAIA,KAAK81G,MAAM59D,IACb,IACE,MAA8B,kBAAnBl4C,KAAK81G,MAAM59D,IACbv7B,QAAQC,QAAQ,KAAIggC,MAAM58C,KAAK81G,MAAM59D,MAErCv7B,QAAQC,QAAQ5c,KAAK81G,MAAM59D,KAEpC,MAAOhsC,GACP,OAAOyQ,QAAQmE,OAAO,IAAIg3B,MAAM,YAIpC,MAA0C,oBAA/B93C,KAAK+1G,UAAUE,YACjBt5F,QAAQC,QAAQ5c,KAAK+1G,UAAUE,YAAYj2G,KAAK81G,MAAOj6F,IAAQvY,KAAK,SAAUf,GAGnF,OAFAnB,EAAM00G,MAAQvzG,GAASnB,EAAM00G,MAEzB10G,EAAM00G,MAAM59D,IAEP92C,EAAMwb,QAAQf,GAGhBc,QAAQmE,OAAO,IAAIg3B,MAAM,cAI7Bn7B,QAAQmE,OAAO,IAAIg3B,MAAM,aAG3B+9D,EA3DT,GAgEI,GAEJ,SAAU9rG,GAGR,SAASmsG,EAAUC,GAmBjB,IAlBA,IAAI/0G,EAAQ2I,EAAOE,KAAKjK,OAASA,KAE7Bm1C,EAAQ,GAER7qB,EAAU,SAAiBuqB,EAAMz4B,GAEnC,IAAIg6F,EAAWvhE,EAAKM,MAAMloC,IAAI,SAAUuf,GACtC,OAAO,IAAI,GAAKA,EAAMpQ,KAExB+4B,EAAQ+gE,EAAUG,OAAOlhE,EAAOihE,GAE5B,YAAah6F,IACfwrF,EAAOl8F,UAAU0Q,IAIjBwrF,EAAS5nG,KAEJ4S,EAAK,EAAG0jG,EAAWH,EAAQvjG,EAAK0jG,EAAS/pG,OAAQqG,IAAM,CAC9D,IAAI+F,EAAK29F,EAAS1jG,GAIlB0X,EAHW3R,EAAG,GACCA,EAAG,IAMpB,OADAvX,EAAM+zC,MAAQA,EACP/zC,EA6CT,OA3EA,GAAU80G,EAAWnsG,GAiCrBmsG,EAAUG,OAAS,SAAUE,EAAUH,GAErC,IACII,EACAC,EACA/uD,EACAqkC,EAJA15E,EAAS,GAMb,IAAKmkG,EAAW,EAAG9uD,EAAW,EAAG+uD,EAASF,EAAShqG,OAAQw/E,EAASqqB,EAAS7pG,OAAQiqG,EAAWC,GAAU/uD,EAAWqkC,GAAS,CAC5H,IAAI2qB,EAAUH,EAASC,GACnBG,EAAUP,EAAS1uD,GAEvB,GAAI,KAAMigB,0BAA0B+uC,EAAQjpG,MAAOkpG,EAAQlpG,OAEzD+oG,SAIqB,KAAMnxE,yBAAyBqxE,EAAQjpG,MAAOkpG,EAAQlpG,OAEtD,GAErB4E,EAAOjE,KAAKsoG,GACZF,MAGAnkG,EAAOjE,KAAKuoG,GACZjvD,KAIJ,KAAO8uD,EAAWC,EAAQD,IACxBnkG,EAAOjE,KAAKmoG,EAASC,IAGvB,KAAO9uD,EAAWqkC,EAAQrkC,IACxBr1C,EAAOjE,KAAKgoG,EAAS1uD,IAGvB,OAAOr1C,GAGF6jG,EA5ET,CA6EE,KAGK,SAASU,GAAS/pG,EAAOgP,GAC9B,IAAIg7F,EAAQ,GAERn6F,EAAW,KAAqBsN,QAAQnd,GAAO4mB,UAAUxmB,IAAI,SAAUmP,EAAU5N,GACnF,OAAOmO,QAAQC,QAAQR,EAAS06F,aAAajqG,EAAOgP,IAAQvY,KAAK,SAAU+O,GACrEA,IACFwkG,EAAMroG,GAAK,CAAC6D,EAAQ+J,KAErB,QAEL,OAAOO,QAAQR,IAAIO,GAAUpZ,KAAK,WAChC,OAAO,IAAI,GAAU,aAASuzG,MAGlC,KAAiB/sC,gBAAgB,uBAAwB,SAAUn/D,GAGjE,IAFA,IAAIuK,EAAO,GAEFtC,EAAK,EAAGA,EAAK+D,UAAUpK,OAAQqG,IACtCsC,EAAKtC,EAAK,GAAK+D,UAAU/D,GAG3B,OAAO,QArLG,OAqLc,OAAQ,EAAQ,WACtC,IAAIkM,EAAKjS,EAAOgoC,EAAMxiC,EACtB,OAAO,GAAYrS,KAAM,SAAU2Y,GACjC,OAAQA,EAAGzO,OACT,KAAK,EAGH,OAFA4U,EAAM5J,EAAK,cAEU,OAMrBrI,EAAQlC,EAAS/J,IAAI,MAAekM,SAASgS,IAQtC,CAAC,EAEN83F,GAAS/pG,EAAO,KAAkBiR,OAf3B,CAAC,EAEN,IAeN,KAAK,EAGH,OAFA+2B,EAAOl8B,EAAGgJ,SAQVtP,EAASwiC,EAAKM,MAAM7H,MAAM,GAC1BuH,EAAKpzC,UACE,CAAC,EAEN4Q,IATO,CAAC,EAEN,WCzXd,IAAI,GAAsC,WACxC,IAAIrJ,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA0BtC,GAAwC,SAAUgN,EAAY1T,EAAQ2N,EAAKgG,GAC7E,IAEIxN,EAFAyN,EAAIC,UAAUpK,OACdqK,EAAIF,EAAI,EAAI5T,EAAkB,OAAT2T,EAAgBA,EAAOrW,OAAOyW,yBAAyB/T,EAAQ2N,GAAOgG,EAE/F,GAAuB,kBAAZK,SAAoD,oBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASP,EAAY1T,EAAQ2N,EAAKgG,QAAW,IAAK,IAAIjI,EAAIgI,EAAWjK,OAAS,EAAGiC,GAAK,EAAGA,KAC1KvF,EAAIuN,EAAWhI,MAAIoI,GAAKF,EAAI,EAAIzN,EAAE2N,GAAKF,EAAI,EAAIzN,EAAEnG,EAAQ2N,EAAKmG,GAAK3N,EAAEnG,EAAQ2N,KAASmG,GAE5F,OAAOF,EAAI,GAAKE,GAAKxW,OAAOM,eAAeoC,EAAQ2N,EAAKmG,GAAIA,GAG1D,GAAkC,SAAUK,EAAYC,GAC1D,OAAO,SAAUpU,EAAQ2N,GACvByG,EAAUpU,EAAQ2N,EAAKwG,KAIvB,GAAsC,SAAUyJ,EAASC,EAAYC,EAAGC,GAC1E,OAAO,IAAKD,IAAMA,EAAIjE,UAAU,SAAUC,EAASkE,GACjD,SAASC,EAAUxe,GACjB,IACEye,EAAKH,EAAUI,KAAK1e,IACpB,MAAO2J,GACP4U,EAAO5U,IAIX,SAASgV,EAAS3e,GAChB,IACEye,EAAKH,EAAiB,MAAEte,IACxB,MAAO2J,GACP4U,EAAO5U,IAIX,SAAS8U,EAAK3O,GACZA,EAAO8O,KAAOvE,EAAQvK,EAAO9P,OAAS,IAAIqe,EAAE,SAAUhE,GACpDA,EAAQvK,EAAO9P,SACde,KAAKyd,EAAWG,GAGrBF,GAAMH,EAAYA,EAAUP,MAAMI,EAASC,GAAc,KAAKM,WAI9D,GAA0C,SAAUP,EAASW,GAC/D,IASIC,EACAC,EACAC,EACAC,EAZAC,EAAI,CACNxX,MAAO,EACPyX,KAAM,WACJ,GAAW,EAAPH,EAAE,GAAQ,MAAMA,EAAE,GACtB,OAAOA,EAAE,IAEXI,KAAM,GACNC,IAAK,IAMP,OAAOJ,EAAI,CACTR,KAAMa,EAAK,GACX,MAASA,EAAK,GACd,OAAUA,EAAK,IACI,oBAAXC,SAA0BN,EAAEM,OAAOC,UAAY,WACvD,OAAOhiB,OACLyhB,EAEJ,SAASK,EAAKG,GACZ,OAAO,SAAUC,GACf,OAIJ,SAAcC,GACZ,GAAIb,EAAG,MAAM,IAAIc,UAAU,mCAE3B,KAAOV,GACL,IACE,GAAIJ,EAAI,EAAGC,IAAMC,EAAY,EAARW,EAAG,GAASZ,EAAU,OAAIY,EAAG,GAAKZ,EAAS,SAAOC,EAAID,EAAU,SAAMC,EAAEvX,KAAKsX,GAAI,GAAKA,EAAEN,SAAWO,EAAIA,EAAEvX,KAAKsX,EAAGY,EAAG,KAAKhB,KAAM,OAAOK,EAG3J,OAFID,EAAI,EAAGC,IAAGW,EAAK,CAAS,EAARA,EAAG,GAAQX,EAAEjf,QAEzB4f,EAAG,IACT,KAAK,EACL,KAAK,EACHX,EAAIW,EACJ,MAEF,KAAK,EAEH,OADAT,EAAExX,QACK,CACL3H,MAAO4f,EAAG,GACVhB,MAAM,GAGV,KAAK,EACHO,EAAExX,QACFqX,EAAIY,EAAG,GACPA,EAAK,CAAC,GACN,SAEF,KAAK,EACHA,EAAKT,EAAEG,IAAIQ,MAEXX,EAAEE,KAAKS,MAEP,SAEF,QACE,KAAkBb,GAAZA,EAAIE,EAAEE,MAAYrV,OAAS,GAAKiV,EAAEA,EAAEjV,OAAS,MAAkB,IAAV4V,EAAG,IAAsB,IAAVA,EAAG,IAAW,CACtFT,EAAI,EACJ,SAGF,GAAc,IAAVS,EAAG,MAAcX,GAAKW,EAAG,GAAKX,EAAE,IAAMW,EAAG,GAAKX,EAAE,IAAK,CACvDE,EAAExX,MAAQiY,EAAG,GACb,MAGF,GAAc,IAAVA,EAAG,IAAYT,EAAExX,MAAQsX,EAAE,GAAI,CACjCE,EAAExX,MAAQsX,EAAE,GACZA,EAAIW,EACJ,MAGF,GAAIX,GAAKE,EAAExX,MAAQsX,EAAE,GAAI,CACvBE,EAAExX,MAAQsX,EAAE,GAEZE,EAAEG,IAAIzT,KAAK+T,GAEX,MAGEX,EAAE,IAAIE,EAAEG,IAAIQ,MAEhBX,EAAEE,KAAKS,MAEP,SAGJF,EAAKd,EAAKpX,KAAKyW,EAASgB,GACxB,MAAOxV,GACPiW,EAAK,CAAC,EAAGjW,GACTqV,EAAI,EACJ,QACAD,EAAIE,EAAI,EAIZ,GAAY,EAARW,EAAG,GAAQ,MAAMA,EAAG,GACxB,MAAO,CACL5f,MAAO4f,EAAG,GAAKA,EAAG,QAAK,EACvBhB,MAAM,GAlFCH,CAAK,CAACiB,EAAGC,OAwGlB60F,IAA6B,IAAIxjE,IAAiBC,WAAWh/B,GAAA,EAAuB1K,EAAA,EAAa,qBAAsB,8BAAgCA,EAAA,EAAa,iBAAkB,gCACtLktG,IAA6B,IAAIzjE,IAAiBC,WAAWh/B,GAAA,EAAuB1K,EAAA,EAAa,oBAAqB,kCAAoCA,EAAA,EAAa,gBAAiB,oCACxLmtG,IAA4B,IAAI1jE,IAAiBC,WAAWh/B,GAAA,EAAuB1K,EAAA,EAAa,wBAAyB,iCAAmCA,EAAA,EAAa,oBAAqB,+BAC9LotG,IAA4B,IAAI3jE,IAAiBC,WAAWh/B,GAAA,EAAuB1K,EAAA,EAAa,uBAAwB,qCAAuCA,EAAA,EAAa,mBAAoB,mCAChMmjB,GAAa,CACfkqF,KAAM,IAAuBpxG,SAAS,CACpC2J,WAAY,EAGZ0nG,uBAAuB,EACvBxlB,gBAAiB,gBACjBD,aAAcolB,KAEhBM,WAAY,IAAuBtxG,SAAS,CAC1C2J,WAAY,EAGZ0nG,uBAAuB,EACvBxlB,gBAAiB,uBACjBD,aAAcolB,KAEhBh5B,IAAK,IAAuBh4E,SAAS,CACnC2J,WAAY,EAGZ0nG,uBAAuB,EACvBxlB,gBAAiB,gBACjBD,aAAcslB,KAEhBK,UAAW,IAAuBvxG,SAAS,CACzC2J,WAAY,EAGZ0nG,uBAAuB,EACvBxlB,gBAAiB,uBACjBD,aAAcslB,KAEhBM,WAAY,IAAuBxxG,SAAS,CAC1C2J,WAAY,EAGZ0nG,uBAAuB,EACvBxlB,gBAAiB,gBACjBD,aAAculB,KAEhBM,iBAAkB,IAAuBzxG,SAAS,CAChD2J,WAAY,EAGZ0nG,uBAAuB,EACvBxlB,gBAAiB,uBACjBD,aAAculB,KAEhBO,YAAa,IAAuB1xG,SAAS,CAC3C2J,WAAY,EAGZ0nG,uBAAuB,EACvBxlB,gBAAiB,gBACjBD,aAAcqlB,KAEhBU,kBAAmB,IAAuB3xG,SAAS,CACjD2J,WAAY,EAGZ0nG,uBAAuB,EACvBxlB,gBAAiB,uBACjBD,aAAcqlB,MAIdW,GAEJ,WACE,SAASA,EAAenrF,EAAMY,GAC5BptB,KAAKwsB,KAAOA,EACZxsB,KAAKotB,aAAeA,EAkCtB,OA/BAuqF,EAAe1qF,WAAa,SAAUT,EAAMorF,GAC1C,MAAO,CACLnqG,MAAO+e,EAAK/e,MACZtL,QAASw1G,EAAeE,YAAYrrF,EAAMorF,GAAY,KAI1DD,EAAeE,YAAc,SAAUrrF,EAAMorF,EAAYE,GACvD,OAAItrF,EAAK0rB,KAAO,aAAa54B,KAAKkN,EAAK0rB,IAAI32C,YACrCq2G,EACKE,EAAW7qF,GAAWyqF,kBAAoBzqF,GAAWwqF,YAErDK,EAAW7qF,GAAWuqF,iBAAmBvqF,GAAWsqF,WAGzDK,EACKE,EAAW7qF,GAAWoqF,WAAapqF,GAAWkqF,KAE9CW,EAAW7qF,GAAWqqF,UAAYrqF,GAAW8wD,KAK1D45B,EAAeh3G,UAAUo3G,SAAW,SAAUzqF,EAAgBsqF,GAC5DtqF,EAAe8V,wBAAwBpjC,KAAKotB,aAAcuqF,EAAeE,YAAY73G,KAAKwsB,KAAMorF,GAAY,KAG9GD,EAAeh3G,UAAUq3G,WAAa,SAAU1qF,EAAgBsqF,GAC9DtqF,EAAe8V,wBAAwBpjC,KAAKotB,aAAcuqF,EAAeE,YAAY73G,KAAKwsB,KAAMorF,GAAY,KAGvGD,EArCT,GAwCI,GAEJ,WACE,SAASM,EAAartG,EAAQk+F,EAAez+B,GAC3C,IAAIjpE,EAAQpB,KAEZA,KAAK4K,OAASA,EACd5K,KAAK8oG,cAAgBA,EACrB9oG,KAAKqqE,oBAAsBA,EAC3BrqE,KAAKk4G,kBAAoB,GACzB,IAAIC,EAAmB,IAAI,GAAiBvtG,GAC5C5K,KAAKk4G,kBAAkB9pG,KAAK+pG,GAC5Bn4G,KAAKk4G,kBAAkB9pG,KAAK+pG,EAAiBppB,6BAA6B,SAAUp2E,GAClF,IAAIyoB,EAAazoB,EAAG,GAChB81B,EAAgB91B,EAAG,GAEvBvX,EAAM4oG,mBAAmB5oE,EAAYqN,MAEvCzuC,KAAKk4G,kBAAkB9pG,KAAK+pG,EAAiBlpB,UAAU,SAAU/iF,GAC/D9K,EAAMigE,gBAAgBn1D,MAExBlM,KAAKk4G,kBAAkB9pG,KAAK+pG,EAAiBhpB,SAAS,SAAUjjF,GAC9D9K,EAAMg3G,iCAERp4G,KAAK89B,QAAUlzB,EAAOiB,mBAAmBC,YAAYqpC,MACrDn1C,KAAKk4G,kBAAkB9pG,KAAKxD,EAAO0B,yBAAyB,SAAUJ,GACpE,IAAI4xB,EAAUlzB,EAAOiB,mBAAmBC,YAAYqpC,MAEhD/zC,EAAM08B,UAAYA,IAKtB18B,EAAM08B,QAAUA,EAEhB18B,EAAMo0B,kBAAkB,IAGxBp0B,EAAM8zB,OAGN9zB,EAAM+zB,mBAERn1B,KAAKk4G,kBAAkB9pG,KAAKxD,EAAOuB,wBAAwB,SAAUD,GACnE,OAAO9K,EAAM8uC,cAEflwC,KAAKk4G,kBAAkB9pG,KAAKxD,EAAOwB,iBAAiB,SAAUF,GAC5D,OAAO9K,EAAMszB,oBAEf10B,KAAKk4G,kBAAkB9pG,KAAKxD,EAAOoV,yBAAyB,SAAU9T,GACpE,OAAO9K,EAAMi3G,wBAEfr4G,KAAKk4G,kBAAkB9pG,KAAK,KAAqBmP,YAAY,SAAUrR,GACrE,OAAO9K,EAAMi3G,wBAEfr4G,KAAKs/D,QAAU,IAAI,IACnBt/D,KAAKs4G,eAAiB,KACtBt4G,KAAKu4G,gBAAkB,KACvBv4G,KAAKw4G,mBAAqB,GAC1Bx4G,KAAKy4G,uBAAyB,KAC9Bz4G,KAAKm1B,eAmQP,OAhQA8iF,EAAar3G,IAAM,SAAUgK,GAC3B,OAAOA,EAAO6B,gBAAgBwrG,EAAavrG,KAG7CurG,EAAat3G,UAAUgM,MAAQ,WAC7B,OAAOsrG,EAAavrG,IAGtBurG,EAAat3G,UAAU+zB,eAAiB,WACtC10B,KAAKw4G,mBAAqB,GAC1Bx4G,KAAKy4G,uBAAyB,KAC9Bz4G,KAAKk1B,OACLl1B,KAAKm1B,gBAGP8iF,EAAat3G,UAAU03G,mBAAqB,WAC1Cr4G,KAAKk1B,OACLl1B,KAAKm1B,gBAGP8iF,EAAat3G,UAAUuvC,SAAW,WAChC,IAAI9uC,EAAQpB,KAEZA,KAAKs/D,QAAQ11B,YAAY,WACvB,OAAOxoC,EAAM+zB,gBACZ8iF,EAAa7iF,iBAGlB6iF,EAAat3G,UAAUw0B,aAAe,WACpC,OAAO,GAAUn1B,UAAM,OAAQ,EAAQ,WACrC,IAAI6M,EAAO8L,EAAI+/F,EAEf,OAAO,GAAY14G,KAAM,SAAUwxB,GACjC,OAAQA,EAAGtnB,OACT,KAAK,EACH,IAAKlK,KAAK4K,OAAOgC,aAAe5M,KAAK89B,QACnC,MAAO,CAAC,GAOV,GAFAjxB,EAAQ7M,KAAK4K,OAAOkC,YAEf,KAAqBqT,IAAItT,GAC5B,MAAO,CAAC,GAKN7M,KAAKu4G,kBACPv4G,KAAKu4G,gBAAgB92G,UACrBzB,KAAKu4G,gBAAkB,MAGzBv4G,KAAKs4G,eAAiB,IAA8B,SAAUz8F,GAC5D,OAAO+6F,GAAS/pG,EAAOgP,KAEzB2V,EAAGtnB,MAAQ,EAEb,KAAK,EAIH,OAHAsnB,EAAG5P,KAAKxT,KAAK,CAAC,EAAG,EAAG,EAAG,IAEvBuK,EAAK3Y,KACE,CAAC,EAENA,KAAKs4G,gBAET,KAAK,EAGH,OAFA3/F,EAAG4/F,gBAAkB/mF,EAAG7P,OACxB3hB,KAAKw1B,kBAAkBx1B,KAAKu4G,gBAAgBpjE,OACrC,CAAC,EAEN,GAEJ,KAAK,EAGH,OAFAujE,EAAQlnF,EAAG7P,OACX,aAAkB+2F,GACX,CAAC,EAEN,GAEJ,KAAK,EAEH,OADA14G,KAAKs4G,eAAiB,KACf,CAAC,GAIV,KAAK,EACH,MAAO,CAAC,SAQlBL,EAAat3G,UAAU60B,kBAAoB,SAAU2f,GAKnD,IAJA,IAAIyiE,EAAoE,WAAvD53G,KAAK4K,OAAOiB,mBAAmB+iF,oBAC5C9zB,EAAiB,GACjB70C,EAAO7lB,OAAO6lB,KAAKjmB,KAAKw4G,oBAEnBhqG,EAAI,EAAGC,EAAMwX,EAAK1Z,OAAQiC,EAAIC,EAAKD,IAAK,CAC/C,IAAI4e,EAAenH,EAAKzX,GACpBmqG,EAAY34G,KAAKw4G,mBAAmBprF,GACxC0tC,EAAe1sD,KAAKuqG,EAAUvrF,cAGhC,IAAI9e,EAAiB,GAErB,GAAI6mC,EAEF,IAAK,IAAIviC,EAAK,EAAGgmG,EAAUzjE,EAAOviC,EAAKgmG,EAAQrsG,OAAQqG,IAAM,CAC3D,IAAI4Z,EAAOosF,EAAQhmG,GACnBtE,EAAeF,KAAKupG,GAAe1qF,WAAWT,EAAMorF,IAIxD,IAAIjiF,EAAc31B,KAAK4K,OAAO4B,iBAAiBsuD,EAAgBxsD,GAC/DtO,KAAKw4G,mBAAqB,GAC1Bx4G,KAAKy4G,uBAAyB,KAE9B,IAASjqG,EAAI,EAAGC,EAAMknB,EAAYppB,OAAQiC,EAAIC,EAAKD,IAAK,CAClDmqG,EAAY,IAAIhB,GAAexiE,EAAM3mC,GAAImnB,EAAYnnB,IACzDxO,KAAKw4G,mBAAmBG,EAAUvrF,cAAgBurF,IAItDV,EAAat3G,UAAUqpG,mBAAqB,SAAU5oE,EAAY8uD,GAChE,IAAI9uF,EAAQpB,KAER43G,EAAoE,WAAvD53G,KAAK4K,OAAOiB,mBAAmB+iF,oBAEhD,GAAI5uF,KAAKy0B,UAAU2M,EAAY8uD,GAAU,CACvClwF,KAAKo4G,8BAEL,IAAIS,EAAe74G,KAAK84G,kBAAkB13E,EAAWt+B,OAAOoI,UAExD2tG,GACF74G,KAAK4K,OAAO0lB,kBAAkB,SAAUhD,GACtCurF,EAAad,SAASzqF,EAAgBsqF,GACtCx2G,EAAMq3G,uBAAyBI,EAAazrF,oBAIhDptB,KAAKo4G,+BAITH,EAAat3G,UAAUy3G,4BAA8B,WACnD,IAAIR,EAAoE,WAAvD53G,KAAK4K,OAAOiB,mBAAmB+iF,oBAEhD,GAAI5uF,KAAKy4G,uBAAwB,CAC/B,IAAIM,EAAe/4G,KAAKw4G,mBAAmBx4G,KAAKy4G,wBAE5CM,GACF/4G,KAAK4K,OAAO0lB,kBAAkB,SAAUhD,GACtCyrF,EAAaf,WAAW1qF,EAAgBsqF,KAI5C53G,KAAKy4G,uBAAyB,OAIlCR,EAAat3G,UAAU0gE,gBAAkB,SAAUjgC,GACjD,GAAKphC,KAAKy0B,UAAU2M,GAApB,CAIA,IAAI43E,EAAah5G,KAAK84G,kBAAkB13E,EAAWt+B,OAAOoI,UAErD8tG,GAILh5G,KAAKi5G,mBAAmBD,EAAY53E,EAAW8sD,yBAGjD+pB,EAAat3G,UAAUs4G,mBAAqB,SAAUD,EAAY3tB,GAChE,IAAIjqF,EAAQpB,KAEZ,GAAKA,KAAK8oG,cAAV,CAIA,IAAIt8E,EAAOwsF,EAAWxsF,KACtBA,EAAK5P,QAAQ,KAAkBkB,MAAMxa,KAAK,SAAUwb,GAElD,OAAO1d,EAAM0nG,cAAcvX,KAAKzyE,EAAK,CACnCusE,WAAYA,KAEb,SAAUhuE,GAEC,YAARA,EACFjc,EAAMipE,oBAAoB6uC,KAAKpvG,EAAA,EAAa,cAAe,8DAA+D0iB,EAAK0rB,IAAI32C,aAClH,YAAR8b,EACTjc,EAAMipE,oBAAoB6uC,KAAKpvG,EAAA,EAAa,cAAe,4DAE3D,aAAkBuT,OAKxB46F,EAAat3G,UAAUm4G,kBAAoB,SAAU5tG,GACnD,IAAKlL,KAAK4K,OAAOgC,aAAe1B,EAC9B,OAAO,KAUT,IAPA,IAOS0H,EAAK,EAAGumG,EAPCn5G,KAAK4K,OAAOkC,WAAW4pB,sBAAsB,CAC7DzoB,gBAAiB/C,EAASwC,WAC1BQ,YAAahD,EAASyC,OACtB0D,cAAenG,EAASwC,WACxB4D,UAAWpG,EAASyC,QACnB,GAAG,GAEwCiF,EAAKumG,EAAc5sG,OAAQqG,IAAM,CAC7E,IAAIwmG,EAAeD,EAAcvmG,GAC7BymG,EAAoBr5G,KAAKw4G,mBAAmBY,EAAapzG,IAE7D,GAAIqzG,EACF,OAAOA,EAIX,OAAO,MAGTpB,EAAat3G,UAAU8zB,UAAY,SAAU2M,EAAY8uD,GACvD,OAAO1lE,QAAmC,IAA3B4W,EAAWt+B,OAAOqX,OAE7BinB,EAAWzB,oBAAsBuwD,GAAWA,EAAQ5B,uBAG1D2pB,EAAat3G,UAAUu0B,KAAO,WAC5Bl1B,KAAKs/D,QAAQ7hD,SAETzd,KAAKu4G,iBACPv4G,KAAKu4G,gBAAgB92G,UAGnBzB,KAAKs4G,iBACPt4G,KAAKs4G,eAAe76F,SACpBzd,KAAKs4G,eAAiB,OAI1BL,EAAat3G,UAAUc,QAAU,WAC/BzB,KAAKk4G,kBAAoB,YAAQl4G,KAAKk4G,mBACtCl4G,KAAKk1B,OACLl1B,KAAKs/D,QAAQ79D,WAGfw2G,EAAavrG,GAAK,sBAClBurG,EAAa7iF,eAAiB,IAE9B6iF,EAAe,GAAW,CAAC,GAAQ,EAAG,MAAiB,GAAQ,EAAG,OAAwBA,GA5T5F,GAgUI,GAEJ,SAAUluG,GAGR,SAASuvG,IACP,OAAOvvG,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,yBACJkE,MAAOJ,EAAA,EAAa,QAAS,aAC7BK,MAAO,YACPC,aAAc,QACVpK,KA0BR,OAlCA,GAAUs5G,EAAgBvvG,GAW1BuvG,EAAe34G,UAAU+J,IAAM,SAAUC,EAAUC,GACjD,IAAI2uG,EAAe,GAAa34G,IAAIgK,GAEpC,GAAK2uG,GAIA3uG,EAAOgC,WAMZ,IAFA,IAESgG,EAAK,EAAGC,EAFAjI,EAAOoC,gBAEoB4F,EAAKC,EAAatG,OAAQqG,IAAM,CAC1E,IAAIw0E,EAAMv0E,EAAaD,GACnB4Z,EAAO+sF,EAAaT,kBAAkB1xB,EAAIj5E,kBAE1Cqe,GACF+sF,EAAaN,mBAAmBzsF,GAAM,KAKrC8sF,EAnCT,CAoCE,KAEF,YAA2B,IAC3B,YAAqB,IACrB,YAA2B,SAAUvpG,EAAOC,GAC1C,IAAI+e,EAAuBhf,EAAMG,SAAS,KAEtC6e,GACF/e,EAAUG,QAAQ,iDAAmD4e,EAAuB,oB,cCvqB5F,GAAsC,WACxC,IAAI/lB,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA0CtC,GAEJ,SAAUO,GAGR,SAASyvG,IACP,OAAOzvG,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,kCACJkE,MAAOJ,EAAA,EAAa,0BAA2B,oBAC/CK,MAAO,mBACPC,aAAc,KACdC,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,KAOT0xB,MAAO,CACL1xB,QAAS,KAOTmL,UAAW,CAAC,OAQdlL,OAAQ,KAIVoL,YAAa,CACXC,OAAQ,GAGRxF,MAAO,UACPE,MAAO1G,EAAA,EAAa,CAClB2G,IAAK,sBACLC,QAAS,CAAC,0BACT,sBACHC,MAAO,MAEL3Q,KA6BR,OA7EA,GAAUw5G,EAAmBzvG,GAmD7ByvG,EAAkB74G,UAAU+J,IAAM,SAAUC,EAAUC,EAAQsK,GAC5D,GAAKtK,EAAOgC,WAAZ,CAIA,IAAI6sG,EAAiBvkG,IAA6B,IAArBA,EAAKwkG,YAE9BvN,EAAUvhG,EAAO8nG,cAEjBC,EAAUxG,EAAQwG,QAElBA,EAAQxtF,OAAO/E,WAInBuyF,EAAQ9lG,MAAM8sG,mBACdxN,EAAQyN,UAAU1kG,EAAKsxB,OAAQ,EAE7B,KAAmBqzE,YAAYlH,EAASxG,EAAQ2N,SAAUL,IAC5DtN,EAAQtqC,QAAO,EAAM,EAEnB,MAKG23C,EA9ET,CA+EE,KAIE,GAEJ,SAAUzvG,GAGR,SAASgwG,IACP,OAAOhwG,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,kCACJkE,MAAOJ,EAAA,EAAa,0BAA2B,oBAC/CK,MAAO,mBACPC,aAAc,KACdC,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,KAOT0xB,MAAO,CACL1xB,QAAS,KAOTmL,UAAW,CAAC,OAQdlL,OAAQ,KAIVoL,YAAa,CACXC,OAAQ,GAGRxF,MAAO,UACPE,MAAO1G,EAAA,EAAa,CAClB2G,IAAK,sBACLC,QAAS,CAAC,0BACT,sBACHC,MAAO,MAEL3Q,KA6BR,OA7EA,GAAU+5G,EAAmBhwG,GAmD7BgwG,EAAkBp5G,UAAU+J,IAAM,SAAUC,EAAUC,EAAQsK,GAC5D,GAAKtK,EAAOgC,WAAZ,CAIA,IAAI6sG,EAAiBvkG,IAA6B,IAArBA,EAAKwkG,YAE9BvN,EAAUvhG,EAAO8nG,cAEjBC,EAAUxG,EAAQwG,QAElBA,EAAQxtF,OAAO/E,WAInBuyF,EAAQ9lG,MAAM8sG,mBACdxN,EAAQyN,UAAU1kG,EAAKsxB,OAAQ,EAE7B,KAAmBwzE,cAAcrH,EAASxG,EAAQ2N,SAAUL,IAC9DtN,EAAQtqC,QAAO,EAAM,EAEnB,MAKGk4C,EA9ET,CA+EE,KAIE,GAEJ,SAAUhwG,GAGR,SAASkwG,IACP,OAAOlwG,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,oDACJkE,MAAOJ,EAAA,EAAa,4CAA6C,4BACjEK,MAAO,2BACPC,aAAc,KACdC,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,KAOTC,OAAQ,KAIVoL,YAAa,CACXC,OAAQ,GAGRxF,MAAO,UACPE,MAAO1G,EAAA,EAAa,CAClB2G,IAAK,wCACLC,QAAS,CAAC,0BACT,8BACHC,MAAO,MAEL3Q,KAqCR,OArEA,GAAUi6G,EAAqClwG,GAmC/CkwG,EAAoCt5G,UAAUu5G,uBAAyB,SAAUhtG,EAAWL,EAAOwF,GACjG,IAAInF,EAAU+B,UAAd,CAIA,IAAK,IAAIT,EAAItB,EAAUe,gBAAiBO,EAAItB,EAAUmE,cAAe7C,IAAK,CACxE,IAAI2rG,EAAuBttG,EAAM0E,iBAAiB/C,GAClD6D,EAAOjE,KAAK,IAAI,IAAUI,EAAG2rG,EAAsB3rG,EAAG2rG,IAGpDjtG,EAAUoE,UAAY,GACxBe,EAAOjE,KAAK,IAAI,IAAUlB,EAAUmE,cAAenE,EAAUoE,UAAWpE,EAAUmE,cAAenE,EAAUoE,cAI/G2oG,EAAoCt5G,UAAU+J,IAAM,SAAUC,EAAUC,GACtE,IAAIxJ,EAAQpB,KAEZ,GAAK4K,EAAOgC,WAAZ,CAIA,IAAIC,EAAQjC,EAAOkC,WACfgC,EAAalE,EAAOoC,gBACpBD,EAAgB,GACpB+B,EAAWhB,QAAQ,SAAUs5E,GAC3B,OAAOhmF,EAAM84G,uBAAuB9yB,EAAKv6E,EAAOE,KAG9CA,EAAcR,OAAS,GACzB3B,EAAOgD,cAAcb,KAIlBktG,EAtET,CAuEE,KAEE,GAEJ,SAAUlwG,GAGR,SAASqwG,IACP,OAAOrwG,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,mCACJkE,MAAOJ,EAAA,EAAa,iCAAkC,yBACtDK,MAAO,wBACPC,aAAc,QACVpK,KAqBR,OA7BA,GAAUo6G,EAAiCrwG,GAW3CqwG,EAAgCz5G,UAAU+J,IAAM,SAAUC,EAAUC,GAClE,GAAKA,EAAOgC,WAAZ,CAQA,IAJA,IAAIkC,EAAalE,EAAOoC,gBACpBwsB,EAAY5uB,EAAOkC,WAAW6G,eAC9B5G,EAAgB,GAEXyB,EAAIM,EAAW,GAAGb,gBAAiBO,GAAKgrB,EAAWhrB,IAC1DzB,EAAcqB,KAAK,IAAI,IAAUI,EAAGM,EAAW,GAAGZ,YAAaM,EAAGM,EAAW,GAAGwC,YAG9EvE,EAAcR,OAAS,GACzB3B,EAAOgD,cAAcb,KAIlBqtG,EA9BT,CA+BE,KAEE,GAEJ,SAAUrwG,GAGR,SAASswG,IACP,OAAOtwG,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,gCACJkE,MAAOJ,EAAA,EAAa,8BAA+B,sBACnDK,MAAO,qBACPC,aAAc,QACVpK,KAoBR,OA5BA,GAAUq6G,EAAiCtwG,GAW3CswG,EAAgC15G,UAAU+J,IAAM,SAAUC,EAAUC,GAClE,GAAKA,EAAOgC,WAAZ,CAOA,IAHA,IAAIkC,EAAalE,EAAOoC,gBACpBD,EAAgB,GAEXyB,EAAIM,EAAW,GAAGb,gBAAiBO,GAAK,EAAGA,IAClDzB,EAAcqB,KAAK,IAAI,IAAUI,EAAGM,EAAW,GAAGZ,YAAaM,EAAGM,EAAW,GAAGwC,YAG9EvE,EAAcR,OAAS,GACzB3B,EAAOgD,cAAcb,KAIlBstG,EA7BT,CA8BE,KAEEC,GAEJ,WAOE,OANA,SAAkCxrG,EAAYjB,EAAa0sG,GACzDv6G,KAAK8O,WAAaA,EAClB9O,KAAK6N,YAAcA,EACnB7N,KAAKu6G,iBAAmBA,GAJ5B,GAYI,GAEJ,WACE,SAASC,EAAmBnvG,EAASovG,EAAgBC,EAAkCC,EAAYlxE,EAAWC,EAAW8I,GACvHxyC,KAAKqL,QAAUA,EACfrL,KAAKy6G,eAAiBA,EACtBz6G,KAAK06G,iCAAmCA,EACxC16G,KAAK26G,WAAaA,EAClB36G,KAAKypC,UAAYA,EACjBzpC,KAAK0pC,UAAYA,EACjB1pC,KAAKwyC,aAAeA,EA+LtB,OA5LAgoE,EAAmBn6G,OAAS,SAAUuK,EAAQ6vG,GAC5C,IAAK7vG,EAAOgC,WACV,OAAO,KAGT,IAAIguG,EAAYH,EAAehnD,WAK/B,IAAK7oD,EAAOyK,gBAAkBulG,EAAUrqE,YAAcqqE,EAAUtxE,aAAa/8B,OAAS,EAEpF,OAAO,IAAIiuG,EAAmB5vG,EAAQ6vG,GAAgB,EAAOG,EAAUtxE,aAAcsxE,EAAUnxE,UAAWmxE,EAAUlxE,UAAW,MAKjI,IACID,EACAC,EAFAgxE,GAAmC,EAGnC5rG,EAAalE,EAAOoC,gBAEE,IAAtB8B,EAAWvC,QAAgBuC,EAAW,GAAGG,WAC3CyrG,GAAmC,EACnCjxE,GAAY,EACZC,GAAY,IAEZD,EAAYmxE,EAAUnxE,UACtBC,EAAYkxE,EAAUlxE,WAIxB,IACIixE,EADAzpG,EAAItG,EAAOoL,eAEXw8B,EAAe,KAEnB,GAAIthC,EAAEjC,UAAW,CAEf,IAAI+iD,EAAOpnD,EAAOkC,WAAWilD,kBAAkB7gD,EAAE/D,oBAEjD,IAAK6kD,EACH,OAAO,KAGT2oD,EAAa3oD,EAAKA,KAClBxf,EAAe,IAAI,IAAUthC,EAAEjD,gBAAiB+jD,EAAK9jD,YAAagD,EAAEjD,gBAAiB+jD,EAAK1gD,gBAE1FqpG,EAAa/vG,EAAOkC,WAAWoH,gBAAgBhD,GAAGinB,QAAQ,QAAS,MAGrE,OAAO,IAAIqiF,EAAmB5vG,EAAQ6vG,EAAgBC,EAAkCC,EAAYlxE,EAAWC,EAAW8I,IAG5HgoE,EAAmB75G,UAAUk6G,4BAA8B,WACzD,IAAK76G,KAAKqL,QAAQuB,WAChB,OAAO,KAGT,IAAIo2B,EAAYhjC,KAAKyrC,gBAErB,IAAKzI,EACH,OAAO,KAGT,IAAI83E,EAAgB96G,KAAKqL,QAAQ2B,gBAEjC,OAAO,IAAIstG,GAAyBQ,EAAc/yF,OAAOib,GAAYA,EAAW,IAKlFw3E,EAAmB75G,UAAUo6G,6BAA+B,WAC1D,IAAK/6G,KAAKqL,QAAQuB,WAChB,OAAO,KAGT,IAAIo2B,EAAYhjC,KAAKyrC,gBAErB,IAAKzI,EACH,OAAO,KAGT,IAAI83E,EAAgB96G,KAAKqL,QAAQ2B,gBAEjC,OAAO,IAAIstG,GAAyBQ,EAAcxtE,MAAM,EAAGwtE,EAAcvuG,OAAS,GAAGwb,OAAOib,GAAYA,EAAW,IAKrHw3E,EAAmB75G,UAAU8qC,cAAgB,WAC3C,IAAKzrC,KAAKqL,QAAQuB,WAChB,OAAO,KAGT,GAAI5M,KAAKwyC,aAAc,CACrB,IAAIngC,EAASrS,KAAKwyC,aAElB,OADAxyC,KAAKwyC,aAAe,KACbngC,EAGTrS,KAAKy6G,eAAezpE,uBAEpB,IAAI8pE,EAAgB96G,KAAKqL,QAAQ2B,gBAE7BguG,EAAqBF,EAAcA,EAAcvuG,OAAS,GAE1Dy2B,EAAYhjC,KAAKqL,QAAQyB,WAAW8+B,cAAc5rC,KAAK26G,WAAYK,EAAmB7sG,kBAAkB,EAAOnO,KAAK0pC,UAAW1pC,KAAKypC,UAAYzpC,KAAKqL,QAAQQ,mBAAmBs/B,eAAiB,MAAM,GAE3M,OAAKnI,EAIE,IAAI,IAAUA,EAAUv1B,MAAMQ,gBAAiB+0B,EAAUv1B,MAAMS,YAAa80B,EAAUv1B,MAAM4D,cAAe2xB,EAAUv1B,MAAM6D,WAHzH,MAMXkpG,EAAmB75G,UAAUs6G,gCAAkC,WAC7D,IAAKj7G,KAAKqL,QAAQuB,WAChB,OAAO,KAGT,IAAIsuG,EAAgBl7G,KAAKm7G,oBAEzB,IAAKD,EACH,OAAO,KAGT,IAAIJ,EAAgB96G,KAAKqL,QAAQ2B,gBAEjC,OAAO,IAAIstG,GAAyBQ,EAAc/yF,OAAOmzF,GAAgBA,EAAe,IAK1FV,EAAmB75G,UAAUy6G,iCAAmC,WAC9D,IAAKp7G,KAAKqL,QAAQuB,WAChB,OAAO,KAGT,IAAIsuG,EAAgBl7G,KAAKm7G,oBAEzB,IAAKD,EACH,OAAO,KAGT,IAAIJ,EAAgB96G,KAAKqL,QAAQ2B,gBAEjC,OAAO,IAAIstG,GAAyBQ,EAAcxtE,MAAM,EAAGwtE,EAAcvuG,OAAS,GAAGwb,OAAOmzF,GAAgBA,EAAe,IAK7HV,EAAmB75G,UAAUw6G,kBAAoB,WAC/C,IAAKn7G,KAAKqL,QAAQuB,WAChB,OAAO,KAGT,GAAI5M,KAAKwyC,aAAc,CACrB,IAAIngC,EAASrS,KAAKwyC,aAElB,OADAxyC,KAAKwyC,aAAe,KACbngC,EAGTrS,KAAKy6G,eAAezpE,uBAEpB,IAAI8pE,EAAgB96G,KAAKqL,QAAQ2B,gBAE7BguG,EAAqBF,EAAcA,EAAcvuG,OAAS,GAE1D2uG,EAAgBl7G,KAAKqL,QAAQyB,WAAWo+B,kBAAkBlrC,KAAK26G,WAAYK,EAAmB7tG,oBAAoB,EAAOnN,KAAK0pC,UAAW1pC,KAAKypC,UAAYzpC,KAAKqL,QAAQQ,mBAAmBs/B,eAAiB,MAAM,GAErN,OAAK+vE,EAIE,IAAI,IAAUA,EAAcztG,MAAMQ,gBAAiBitG,EAAcztG,MAAMS,YAAagtG,EAAcztG,MAAM4D,cAAe6pG,EAAcztG,MAAM6D,WAHzI,MAMXkpG,EAAmB75G,UAAU06G,UAAY,WACvC,OAAKr7G,KAAKqL,QAAQuB,YAIlB5M,KAAKy6G,eAAezpE,uBACbhxC,KAAKqL,QAAQyB,WAAW22B,YAAYzjC,KAAK26G,YAAY,GAAM,EAAO36G,KAAK0pC,UAAW1pC,KAAKypC,UAAYzpC,KAAKqL,QAAQQ,mBAAmBs/B,eAAiB,MAAM,EAAO,aAJ/J,IASJqvE,EAvMT,GA4MI,GAEJ,SAAUzwG,GAGR,SAASuxG,EAA+B1wG,GACtC,IAAIxJ,EAAQ2I,EAAOE,KAAKjK,OAASA,KAMjC,OAJAoB,EAAMiK,QAAUT,EAChBxJ,EAAM60F,wBAAyB,EAC/B70F,EAAMm6G,SAAW,KACjBn6G,EAAMo6G,gBAAkB,GACjBp6G,EAwOT,OAjPA,GAAUk6G,EAAgCvxG,GAY1CuxG,EAA+B16G,IAAM,SAAUgK,GAC7C,OAAOA,EAAO6B,gBAAgB6uG,EAA+B5uG,KAG/D4uG,EAA+B36G,UAAUc,QAAU,WACjDzB,KAAKy7G,cAEL1xG,EAAOpJ,UAAUc,QAAQwI,KAAKjK,OAGhCs7G,EAA+B36G,UAAUgM,MAAQ,WAC/C,OAAO2uG,EAA+B5uG,IAGxC4uG,EAA+B36G,UAAU+6G,sBAAwB,SAAUjB,GACzE,IAAIr5G,EAAQpB,KAEZ,IAAKA,KAAKu7G,SAAU,CAElB,IAAII,EAAU,GAAmBt7G,OAAOL,KAAKqL,QAASovG,GAEtD,IAAKkB,EACH,OAGF37G,KAAKu7G,SAAWI,EAChB,IAAIn7F,EAAW,CACb8oB,aAActpC,KAAKu7G,SAASZ,YAG1B36G,KAAKu7G,SAASb,mCAChBl6F,EAASuyB,kBAAoB,EAG7BvyB,EAASwyB,kBAAoB,EAG7BxyB,EAASsyB,gBAAkB,GAK7B2nE,EAAehnD,WAAWtjB,OAAO3vB,GAAU,GAC3CxgB,KAAKw7G,gBAAkB,CAACx7G,KAAKqL,QAAQ2zB,2BAA2B,SAAU9yB,GACpE9K,EAAM60F,wBAIV70F,EAAMq6G,gBACJz7G,KAAKqL,QAAQ6M,oBAAoB,WACnC9W,EAAMq6G,gBACJhB,EAAehnD,WAAWtqB,yBAAyB,SAAUj9B,IAC3DA,EAAEw9B,WAAax9B,EAAEu9B,YACnBroC,EAAMq6G,mBAMdH,EAA+B36G,UAAU86G,YAAc,WAGrD,GAFAz7G,KAAKw7G,gBAAkB,YAAQx7G,KAAKw7G,iBAEhCx7G,KAAKu7G,UAAYv7G,KAAKu7G,SAASb,iCAAkC,CAanE16G,KAAKu7G,SAASd,eAAehnD,WAAWtjB,OAZzB,CACb4C,kBAAmB,EAGnBC,kBAAmB,EAGnBF,gBAAiB,IAKsC,GAG3D9yC,KAAKu7G,SAAW,MAGlBD,EAA+B36G,UAAUi7G,eAAiB,SAAU9sG,GAClE9O,KAAKi2F,wBAAyB,EAE9Bj2F,KAAKqL,QAAQuC,cAAckB,GAE3B9O,KAAKi2F,wBAAyB,GAGhCqlB,EAA+B36G,UAAUk7G,mBAAqB,SAAUhvG,EAAOK,GAC7E,IAAKA,EAAU+B,UACb,OAAO/B,EAGT,IAAI8kD,EAAOnlD,EAAMklD,kBAAkB7kD,EAAUC,oBAE7C,OAAK6kD,EAIE,IAAI,IAAU9kD,EAAUe,gBAAiB+jD,EAAK9jD,YAAahB,EAAUe,gBAAiB+jD,EAAK1gD,WAHzFpE,GAMXouG,EAA+B36G,UAAUm7G,oBAAsB,SAAUzpG,GAClEA,IAILrS,KAAK47G,eAAevpG,EAAOvD,YAEvBuD,EAAOxE,aACT7N,KAAKqL,QAAQg0B,qCAAqChtB,EAAOxE,YAAawE,EAAOkoG,oBAIjFe,EAA+B36G,UAAUo7G,WAAa,SAAUtB,GAC9D,OAAOz6G,KAAKu7G,UAGdD,EAA+B36G,UAAUk6G,4BAA8B,SAAUJ,GAC/E,GAAKz6G,KAAKqL,QAAQuB,WAAlB,CAIA,IAAK5M,KAAKu7G,SAAU,CAElB,IAAIT,EAAgB96G,KAAKqL,QAAQ2B,gBAEjC,GAAI8tG,EAAcvuG,OAAS,EAAG,CAC5B,IACIm9B,EADY+wE,EAAehnD,WACL/pB,UAG1B,IAFgCsyE,GAA2Bh8G,KAAKqL,QAAQyB,WAAYguG,EAAepxE,GAEnE,CAK9B,IAJA,IAAI78B,EAAQ7M,KAAKqL,QAAQyB,WAErBmvG,EAAsB,GAEjBztG,EAAI,EAAGC,EAAMqsG,EAAcvuG,OAAQiC,EAAIC,EAAKD,IACnDytG,EAAoBztG,GAAKxO,KAAK67G,mBAAmBhvG,EAAOiuG,EAActsG,IAKxE,YAFAxO,KAAKqL,QAAQuC,cAAcquG,KAOjCj8G,KAAK07G,sBAAsBjB,GAEvBz6G,KAAKu7G,UACPv7G,KAAK87G,oBAAoB97G,KAAKu7G,SAASV,iCAI3CS,EAA+B36G,UAAUs6G,gCAAkC,SAAUR,GACnFz6G,KAAK07G,sBAAsBjB,GAEvBz6G,KAAKu7G,UACPv7G,KAAK87G,oBAAoB97G,KAAKu7G,SAASN,oCAI3CK,EAA+B36G,UAAUo6G,6BAA+B,SAAUN,GAChFz6G,KAAK07G,sBAAsBjB,GAEvBz6G,KAAKu7G,UACPv7G,KAAK87G,oBAAoB97G,KAAKu7G,SAASR,iCAI3CO,EAA+B36G,UAAUy6G,iCAAmC,SAAUX,GACpFz6G,KAAK07G,sBAAsBjB,GAEvBz6G,KAAKu7G,UACPv7G,KAAK87G,oBAAoB97G,KAAKu7G,SAASH,qCAI3CE,EAA+B36G,UAAU06G,UAAY,SAAUZ,GAC7D,GAAKz6G,KAAKqL,QAAQuB,WAAlB,CAIA,IAAIs5B,EAAU,KACV00E,EAAYH,EAAehnD,WAM/B,GAAImnD,EAAUrqE,YAAcqqE,EAAUtxE,aAAa/8B,OAAS,GAAKquG,EAAUpxE,QACzEtD,EAAUlmC,KAAKqL,QAAQyB,WAAW22B,YAAYm3E,EAAUtxE,cAAc,EAAMsxE,EAAUpxE,QAASoxE,EAAUlxE,UAAWkxE,EAAUnxE,UAAYzpC,KAAKqL,QAAQQ,mBAAmBs/B,eAAiB,MAAM,EAAO,gBAGnM,CAGL,GAFAnrC,KAAK07G,sBAAsBjB,IAEtBz6G,KAAKu7G,SACR,OAGFr1E,EAAUlmC,KAAKu7G,SAASF,YAG1B,GAAIn1E,EAAQ35B,OAAS,EAAG,CAItB,IAHA,IAAIs4B,EAAkB7kC,KAAKqL,QAAQ2K,eAG1BxH,EAAI,EAAGC,EAAMy3B,EAAQ35B,OAAQiC,EAAIC,EAAKD,IAAK,CAClD,IAAIg8B,EAAQtE,EAAQ13B,GAGpB,GAFmBg8B,EAAM/8B,MAAM0R,gBAAgB0lB,GAE7B,CAEhBqB,EAAQ13B,GAAK03B,EAAQ,GACrBA,EAAQ,GAAKsE,EACb,OAIJxqC,KAAK47G,eAAe11E,EAAQj5B,IAAI,SAAUmgC,GACxC,OAAO,IAAI,IAAUA,EAAE3/B,MAAMQ,gBAAiBm/B,EAAE3/B,MAAMS,YAAak/B,EAAE3/B,MAAM4D,cAAe+7B,EAAE3/B,MAAM6D,iBAKxGgqG,EAA+B5uG,GAAK,uCAC7B4uG,EAlPT,CAmPE,KAIE,GAEJ,SAAUvxG,GAGR,SAASmyG,IACP,OAAkB,OAAXnyG,GAAmBA,EAAOuW,MAAMtgB,KAAM2W,YAAc3W,KAmB7D,OAtBA,GAAUk8G,EAAsCnyG,GAMhDmyG,EAAqCv7G,UAAU+J,IAAM,SAAUC,EAAUC,GACvE,IAAIuxG,EAAwB,GAA+Bv7G,IAAIgK,GAE/D,GAAKuxG,EAAL,CAIA,IAAI1B,EAAiB,GAAqB75G,IAAIgK,GAEzC6vG,GAILz6G,KAAK60D,KAAKsnD,EAAuB1B,KAG5ByB,EAvBT,CAwBE,KAIE,GAEJ,SAAUnyG,GAGR,SAASqyG,IACP,OAAOryG,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,4CACJkE,MAAOJ,EAAA,EAAa,8BAA+B,oCACnDK,MAAO,mCACPC,aAAc,KACdC,OAAQ,CACNC,OAAQ,IAAkBkL,MAC1BhL,QAAS,KAKTC,OAAQ,KAIVoL,YAAa,CACXC,OAAQ,GAGRxF,MAAO,UACPE,MAAO1G,EAAA,EAAa,CAClB2G,IAAK,gCACLC,QAAS,CAAC,0BACT,yBACHC,MAAO,MAEL3Q,KAOR,OArCA,GAAUo8G,EAAmCryG,GAiC7CqyG,EAAkCz7G,UAAUk0D,KAAO,SAAUsnD,EAAuB1B,GAClF0B,EAAsBtB,4BAA4BJ,IAG7C2B,EAtCT,CAuCE,IAIE,GAEJ,SAAUryG,GAGR,SAASsyG,IACP,OAAOtyG,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,gDACJkE,MAAOJ,EAAA,EAAa,kCAAmC,wCACvDK,MAAO,uCACPC,aAAc,KACdyL,YAAa,CACXC,OAAQ,GAGRxF,MAAO,UACPE,MAAO1G,EAAA,EAAa,CAClB2G,IAAK,oCACLC,QAAS,CAAC,0BACT,6BACHC,MAAO,MAEL3Q,KAOR,OA1BA,GAAUq8G,EAAuCtyG,GAsBjDsyG,EAAsC17G,UAAUk0D,KAAO,SAAUsnD,EAAuB1B,GACtF0B,EAAsBlB,gCAAgCR,IAGjD4B,EA3BT,CA4BE,IAIE,GAEJ,SAAUtyG,GAGR,SAASuyG,IACP,OAAOvyG,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,6CACJkE,MAAOJ,EAAA,EAAa,+BAAgC,0CACpDK,MAAO,yCACPC,aAAc,KACdC,OAAQ,CACNC,OAAQ,IAAkBkL,MAC1BhL,QAAS,aAAS,KAIhB,MAKFC,OAAQ,QAINzK,KAOR,OA9BA,GAAUs8G,EAAoCvyG,GA0B9CuyG,EAAmC37G,UAAUk0D,KAAO,SAAUsnD,EAAuB1B,GACnF0B,EAAsBpB,6BAA6BN,IAG9C6B,EA/BT,CAgCE,IAIE,GAEJ,SAAUvyG,GAGR,SAASwyG,IACP,OAAOxyG,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,iDACJkE,MAAOJ,EAAA,EAAa,mCAAoC,8CACxDK,MAAO,6CACPC,aAAc,QACVpK,KAOR,OAfA,GAAUu8G,EAAwCxyG,GAWlDwyG,EAAuC57G,UAAUk0D,KAAO,SAAUsnD,EAAuB1B,GACvF0B,EAAsBf,iCAAiCX,IAGlD8B,EAhBT,CAiBE,IAIE,GAEJ,SAAUxyG,GAGR,SAASyyG,IACP,OAAOzyG,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,iCACJkE,MAAOJ,EAAA,EAAa,kCAAmC,wCACvDK,MAAO,uCACPC,aAAc,KACdC,OAAQ,CACNC,OAAQ,IAAkBkL,MAC1BhL,QAAS,KAOTC,OAAQ,KAIVoL,YAAa,CACXC,OAAQ,GAGRxF,MAAO,UACPE,MAAO1G,EAAA,EAAa,CAClB2G,IAAK,qBACLC,QAAS,CAAC,0BACT,4BACHC,MAAO,MAEL3Q,KAOR,OAvCA,GAAUw8G,EAAwBzyG,GAmClCyyG,EAAuB77G,UAAUk0D,KAAO,SAAUsnD,EAAuB1B,GACvE0B,EAAsBd,UAAUZ,IAG3B+B,EAxCT,CAyCE,IAIE,GAEJ,SAAUzyG,GAGR,SAAS0yG,IACP,OAAO1yG,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,0BACJkE,MAAOJ,EAAA,EAAa,kBAAmB,0BACvCK,MAAO,yBACPC,aAAc,IAAkB6I,SAChC5I,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,KAKTC,OAAQ,KAIVmL,SAAU,CACRtF,MAAO,iBACPK,MAAO,QAEL3Q,KAOR,OA9BA,GAAUy8G,EAAiB1yG,GA0B3B0yG,EAAgB97G,UAAUk0D,KAAO,SAAUsnD,EAAuB1B,GAChE0B,EAAsBd,UAAUZ,IAG3BgC,EA/BT,CAgCE,IAIEC,GAEJ,WACE,SAASA,EAA0B/B,EAAYjxE,EAAWyB,GACxDnrC,KAAK26G,WAAaA,EAClB36G,KAAK0pC,UAAYA,EACjB1pC,KAAKmrC,eAAiBA,EAmBxB,OAZAuxE,EAA0BC,WAAa,SAAUvhG,EAAGlS,GAClD,OAAKkS,IAAMlS,MAINkS,IAAMlS,KAIJkS,EAAEu/F,aAAezxG,EAAEyxG,YAAcv/F,EAAEsuB,YAAcxgC,EAAEwgC,WAAatuB,EAAE+vB,iBAAmBjiC,EAAEiiC,iBAGzFuxE,EAvBT,GA0BI,GAEJ,SAAU3yG,GAGR,SAAS6yG,EAAqBhyG,GAC5B,IAAIxJ,EAAQ2I,EAAOE,KAAKjK,OAASA,KA+CjC,OA7CAoB,EAAMwJ,OAASA,EACfxJ,EAAM+tB,WAAavkB,EAAOiB,mBAAmBC,YAAY+wG,mBACzDz7G,EAAMu0B,YAAc,GACpBv0B,EAAM07G,WAAa17G,EAAMsK,UAAU,IAAI,IAAiB,WACtD,OAAOtK,EAAM2e,WACZ,MACH3e,EAAMqjB,MAAQ,KAEdrjB,EAAMsK,UAAUd,EAAO0B,yBAAyB,SAAUJ,GACxD9K,EAAM+tB,WAAavkB,EAAOiB,mBAAmBC,YAAY+wG,sBAG3Dz7G,EAAMsK,UAAUd,EAAOo0B,2BAA2B,SAAU9yB,GACrD9K,EAAM+tB,aAMPjjB,EAAEgB,UAAU+B,UACG,IAAb/C,EAAE88B,QAGE5nC,EAAMqjB,OAERrjB,EAAM27G,UAAU,MAGlB37G,EAAM07G,WAAW9wG,YAEnB5K,EAAM27G,UAAU,MAGlB37G,EAAM2e,cAIV3e,EAAMsK,UAAUd,EAAOwB,iBAAiB,SAAUF,GAChD9K,EAAM27G,UAAU,SAGlB37G,EAAMsK,UAAU,GAAqB9K,IAAIgK,GAAQ6oD,WAAWtqB,yBAAyB,SAAUj9B,GAC7F9K,EAAM2e,aAGD3e,EAqMT,OAvPA,GAAUw7G,EAAsB7yG,GAqDhC6yG,EAAqBj8G,UAAUgM,MAAQ,WACrC,OAAOiwG,EAAqBlwG,IAG9BkwG,EAAqBj8G,UAAUof,QAAU,WACvC/f,KAAK+8G,UAAUH,EAAqBI,aAAah9G,KAAKmvB,WAAYnvB,KAAK4K,UAGzEgyG,EAAqBI,aAAe,SAAUvoF,EAAW7pB,GACvD,IAAK6pB,EACH,OAAO,KAGT,IAAK7pB,EAAOgC,WACV,OAAO,KAGT,IAAIsE,EAAItG,EAAOoL,eAEf,GAAI9E,EAAEjD,kBAAoBiD,EAAEG,cAE1B,OAAO,KAGT,IAAI8qG,EAAwB,GAA+Bv7G,IAAIgK,GAE/D,IAAKuxG,EACH,OAAO,KAGT,IAAI1B,EAAiB,GAAqB75G,IAAIgK,GAE9C,IAAK6vG,EACH,OAAO,KAGT,IAAI7jG,EAAIulG,EAAsBJ,WAAWtB,GAEzC,IAAK7jG,EAAG,CACN,IAAIkkG,EAAgBlwG,EAAOoC,gBAE3B,GAAI8tG,EAAcvuG,OAAS,EAAG,CAC5B,IACIm9B,EADc+wE,EAAehnD,WACL/pB,UAG5B,IAFgCsyE,GAA2BpxG,EAAOkC,WAAYguG,EAAepxE,GAG3F,OAAO,KAIX9yB,EAAI,GAAmBvW,OAAOuK,EAAQ6vG,GAGxC,IAAK7jG,EACH,OAAO,KAGT,GAAIA,EAAE47B,aAGJ,OAAO,KAGT,GAAI,WAAWlzB,KAAK1I,EAAE+jG,YAEpB,OAAO,KAGT,GAAI/jG,EAAE+jG,WAAWpuG,OAAS,IAExB,OAAO,KAIT,IAAIquG,EAAYH,EAAehnD,WAC3BzjB,EAAgB4qE,EAAUlxE,UAE9B,GAAIkxE,EAAUrqE,WAAY,CACxB,IAAI0sE,EAAwBrC,EAAUtxE,aAEjC0G,IACHitE,EAAwBA,EAAsBj0F,eAGhD,IAAIk0F,EAAiBtmG,EAAE+jG,WAMvB,GAJK3qE,IACHktE,EAAiBA,EAAel0F,eAG9Bi0F,IAA0BC,GAAkBtmG,EAAE8yB,YAAckxE,EAAUlxE,WAAa9yB,EAAE6yB,YAAcmxE,EAAUnxE,YAAcmxE,EAAUpxE,QACvI,OAAO,KAIX,OAAO,IAAIkzE,GAA0B9lG,EAAE+jG,WAAY/jG,EAAE8yB,UAAW9yB,EAAE6yB,UAAY7+B,EAAOiB,mBAAmBs/B,eAAiB,OAG3HyxE,EAAqBj8G,UAAUo8G,UAAY,SAAUt4F,GACnD,GAAIi4F,GAA0BC,WAAW38G,KAAKykB,MAAOA,GACnDzkB,KAAKykB,MAAQA,OAMf,GAFAzkB,KAAKykB,MAAQA,EAERzkB,KAAKykB,OAKV,GAAKzkB,KAAK4K,OAAOgC,WAAjB,CAIA,IAAIC,EAAQ7M,KAAK4K,OAAOkC,WAExB,IAAID,EAAM0zD,4BAAV,CAKA,IAAI48C,EAAqB,KAAkCh9F,IAAItT,GAC3DuwG,EAAavwG,EAAM42B,YAAYzjC,KAAKykB,MAAMk2F,YAAY,GAAM,EAAO36G,KAAKykB,MAAMilB,UAAW1pC,KAAKykB,MAAM0mB,gBAAgB,GAAOl+B,IAAI,SAAUmgC,GAC3I,OAAOA,EAAE3/B,QAEX2vG,EAAWluG,KAAK,KAAMm2B,0BACtB,IAAIv2B,EAAa9O,KAAK4K,OAAOoC,gBAC7B8B,EAAWI,KAAK,KAAMm2B,0BAItB,IAFA,IAAIa,EAAU,GAEL13B,EAAI,EAAG8sB,EAAI,EAAG7sB,EAAM2uG,EAAW7wG,OAAQgvB,EAAOzsB,EAAWvC,OAAQiC,EAAIC,GAAM,CAClF,IAAI+7B,EAAQ4yE,EAAW5uG,GAEvB,GAAI8sB,GAAKC,EAEP2K,EAAQ93B,KAAKo8B,GACbh8B,QACK,CACL,IAAI6uG,EAAM,KAAMh4E,yBAAyBmF,EAAO17B,EAAWwsB,IAEvD+hF,EAAM,IAEJvuG,EAAWwsB,GAAGrsB,WAAc,KAAMquG,gBAAgB9yE,EAAO17B,EAAWwsB,KACtE4K,EAAQ93B,KAAKo8B,GAGfh8B,KACS6uG,EAAM,EAEf/hF,KAGA9sB,IACA8sB,MAKN,IAAI3F,EAAcuQ,EAAQj5B,IAAI,SAAU2J,GACtC,MAAO,CACLnJ,MAAOmJ,EAEPzU,QAASg7G,EAAqBP,EAAqBW,qBAAuBX,EAAqBY,iCAGnGx9G,KAAK21B,YAAc31B,KAAK4K,OAAO4B,iBAAiBxM,KAAK21B,YAAaA,UA5DhE31B,KAAK21B,YAAc31B,KAAK4K,OAAO4B,iBAAiBxM,KAAK21B,YAAa,KA+DtEinF,EAAqBj8G,UAAUc,QAAU,WACvCzB,KAAK+8G,UAAU,MAEfhzG,EAAOpJ,UAAUc,QAAQwI,KAAKjK,OAGhC48G,EAAqBlwG,GAAK,sCAC1BkwG,EAAqBY,8BAAgC,IAAuBz3G,SAAS,CACnF2J,WAAY,EAGZC,UAAW,qBACXC,cAAe,CACbC,MAAO,YAAiB,MACxB3E,SAAU,IAAkB4E,UAGhC8sG,EAAqBW,qBAAuB,IAAuBx3G,SAAS,CAC1E2J,WAAY,EAGZC,UAAW,uBAENitG,EAxPT,CAyPE,KAIF,SAASZ,GAA2BnvG,EAAOi4B,EAAQ4E,GAGjD,IAFA,IAAI+zE,EAAevpG,GAAgBrH,EAAOi4B,EAAO,IAAK4E,GAE7Cl7B,EAAI,EAAGC,EAAMq2B,EAAOv4B,OAAQiC,EAAIC,EAAKD,IAAK,CACjD,IAAIf,EAAQq3B,EAAOt2B,GAEnB,GAAIf,EAAMwB,UACR,OAAO,EAKT,GAAIwuG,IAFmBvpG,GAAgBrH,EAAOY,GAAQi8B,GAGpD,OAAO,EAIX,OAAO,EAGT,SAASx1B,GAAgBrH,EAAOY,EAAOub,GACrC,IAAIpQ,EAAO/L,EAAMqH,gBAAgBzG,GACjC,OAAOub,EAAcpQ,EAAKoQ,cAAgBpQ,EAG5C,YAA2B,IAC3B,YAA2B,IAC3B,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAAqB,I,WCl3CV8kG,GAAU,CACnBC,QAAS,IAAI,KAAc,yBAAyB,GACpDC,mBAAoB,IAAI,KAAc,oCAAoC,IAErE,SAASC,GAAqBhxG,EAAO3B,EAAUynG,EAAS92F,GAC7D,IAAIiiG,EAAWC,GAAA,EAAoC/zF,QAAQnd,GAC3D,OAAO,YAAMixG,EAAS7wG,IAAI,SAAU47D,GAClC,OAAO,WACL,OAAOlsD,QAAQC,QAAQisD,EAAQg1C,qBAAqBhxG,EAAO3B,EAAU2Q,EAAO82F,IAAUztF,MAAM,UAIlG,YAA+B,gCAAiC,SAAUrY,EAAO3B,EAAUgK,GACzF,OAAO2oG,GAAqBhxG,EAAO3B,EAAU,CAC3C8yG,YAAaD,GAAA,EAA+BE,OAC5CC,aAAa,EACbC,iBAAkBjpG,EAAuB,kBACxC,KAAkB4I,QCvBvB,IAiDIsgG,GAjDA,GAAsC,WACxC,IAAIp1G,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA0BtC60G,GAAoC,WAatC,OAZAA,GAAWj+G,OAAOk+G,QAAU,SAAU98F,GACpC,IAAK,IAAItQ,EAAG1C,EAAI,EAAGyT,EAAItL,UAAUpK,OAAQiC,EAAIyT,EAAGzT,IAG9C,IAAK,IAAIlF,KAFT4H,EAAIyF,UAAUnI,GAGRpO,OAAOO,UAAU4I,eAAeU,KAAKiH,EAAG5H,KAAIkY,EAAElY,GAAK4H,EAAE5H,IAI7D,OAAOkY,IAGOlB,MAAMtgB,KAAM2W,aAY9B,SAAWynG,GACTA,EAAmBG,QAAU,IAE7B,WAOE,OANA,WACEv+G,KAAKma,KAAO,GAJiB,IAYjC,IAAIqkG,EAEJ,WAQE,OAPA,SAAiBjsF,GACfvyB,KAAKuyB,QAAUA,EACfvyB,KAAKma,KAAO,GAHhB,GAWAikG,EAAmBI,QAAUA,EAE7B,IAAIC,EAEJ,WAQE,OAPA,SAAgBC,GACd1+G,KAAK0+G,MAAQA,EACb1+G,KAAKma,KAAO,GAHhB,GAWAikG,EAAmBK,OAASA,EAzC9B,CA0CGL,KAAuBA,GAAqB,KAE/C,IAAI,GAEJ,SAAUr0G,GAGR,SAAS40G,EAAoB/zG,EAAQ05F,QACrB,IAAVA,IACFA,EAAQqa,EAAoBC,eAG9B,IAAIx9G,EAAQ2I,EAAOE,KAAKjK,OAASA,KA0CjC,OAxCAoB,EAAMy9G,gBAAkBz9G,EAAMsK,UAAU,IAAI,MAC5CtK,EAAM09G,eAAiB19G,EAAMy9G,gBAAgBh+G,MAC7CO,EAAMwe,OAASw+F,GAAmBG,QAClCn9G,EAAM0nE,aAAe,IAAI,KACzB1nE,EAAM29G,eAAiB,IAAI,KAC3B39G,EAAM49G,UAAY,EAClB59G,EAAMwJ,OAASA,EACfxJ,EAAM08B,SAAU,EAChB18B,EAAM69G,iBAAmB,IAAI,IAAQ3a,GAErCljG,EAAMsK,UAAUtK,EAAMwJ,OAAO0B,yBAAyB,WACpD,OAAOlL,EAAM89G,iCAGf99G,EAAMsK,UAAUtK,EAAMwJ,OAAOwB,iBAAiB,SAAUF,GACtD,OAAO9K,EAAMszB,oBAGftzB,EAAMsK,UAAUtK,EAAMwJ,OAAOoV,yBAAyB,SAAU0B,GAC9D,OAAOtgB,EAAMszB,oBAGftzB,EAAMsK,UAAUtK,EAAMwJ,OAAOo0B,2BAA2B,SAAU9yB,GAChE,OAAO9K,EAAM+9G,eAAejzG,MAG9B9K,EAAMsK,UAAUtK,EAAMwJ,OAAOuB,wBAAwB,SAAUD,GAC7D,OAAO9K,EAAMg+G,0BAGfh+G,EAAMsK,UAAUqyG,GAAA,EAAoCxgG,YAAYnc,EAAMszB,eAAgBtzB,IAEtFA,EAAMsK,UAAUtK,EAAMwJ,OAAOm+D,UAAU,SAAUnwD,GAC/C,OAAOxX,EAAM2nE,UAAUnwD,MAGzBxX,EAAM89G,8BAEN99G,EAAMszB,iBAECtzB,EAoPT,OArSA,GAAUu9G,EAAqB50G,GAoD/B3J,OAAOM,eAAei+G,EAAoBh+G,UAAW,QAAS,CAC5DC,IAAK,WACH,OAAOZ,KAAK4f,QAEd5H,IAAK,SAAazV,GACS,IAArBvC,KAAK4f,OAAOzF,MAGZna,KAAK4f,OAAO2S,QAAQ9U,SAGxBzd,KAAK4f,OAASrd,GAEhBzB,YAAY,EACZC,cAAc,IAGhB49G,EAAoBh+G,UAAU8c,OAAS,SAAU2/B,QAChC,IAAXA,IACFA,GAAS,GAGXp9C,KAAKykB,MAAQ25F,GAAmBG,QAChCv+G,KAAKi/G,iBAAiBxhG,SAEjB2/B,GACHp9C,KAAK6+G,gBAAgB98G,UAAKC,IAI9B28G,EAAoBh+G,UAAU2U,QAAU,SAAUq9F,EAASrO,GACzD,IAAIljG,EAAQpB,KAER6M,EAAQ7M,KAAK4K,OAAOkC,WAExB,GAAKD,GAAUkxG,GAAA,EAAoC59F,IAAItT,GAAvD,CAIA,IAAImyG,IAAch/G,KAAKg/G,UACvBh/G,KAAKi/G,iBAAiB3pG,QAAQ,WAC5B,OAAOlU,EAAMi+G,UAAU,CACrBrB,YAAarL,EAAQqL,YACrBG,iBAAkBxL,EAAQwL,iBAC1BD,YAAkC,IAArB98G,EAAMqjB,MAAMtK,MAED,IAArB/Y,EAAMqjB,MAAMtK,KAGfmlG,oBAA0C,IAArBl+G,EAAMqjB,MAAMtK,KAE/B/Y,EAAMqjB,MAAMi6F,WAAQ18G,GACrBg9G,IACF1a,GAAOhhG,UAAKtB,EAAW,QAG5B28G,EAAoBh+G,UAAUsgB,KAAO,WACnC,GAAwB,IAApBjhB,KAAKykB,MAAMtK,KAAf,CAMA,IAAI5N,EAASvM,KAAKykB,MAAMi6F,MAAMa,WAAWhzG,OACrCizG,EAAkBx/G,KAAKykB,MAAMi6F,MAAMc,gBACnCl/D,EAAOk/D,EAAkBjzG,IAAWA,EAAS,EAC7CkzG,EAAQz/G,KAAK4K,OAAOiB,mBAAmBC,YAAY4zG,eAAeD,QAEjElzG,EAAS,GAAK+zC,IAAUm/D,EAK7Bz/G,KAAK2/G,sBAAsBr/D,GAAQm/D,EAAQ,EAAID,EAAkB,GAJ/Dx/G,KAAKyd,WAOTkhG,EAAoBh+G,UAAUw/C,SAAW,WACvC,GAAwB,IAApBngD,KAAKykB,MAAMtK,KAAf,CAMA,IAAI5N,EAASvM,KAAKykB,MAAMi6F,MAAMa,WAAWhzG,OACrCizG,EAAkBx/G,KAAKykB,MAAMi6F,MAAMc,gBACnCn/D,EAA4B,IAApBm/D,EACRC,EAAQz/G,KAAK4K,OAAOiB,mBAAmBC,YAAY4zG,eAAeD,QAEjElzG,EAAS,GAAK8zC,IAAWo/D,EAK9Bz/G,KAAK2/G,sBAAsBt/D,GAASo/D,EAAQlzG,EAAS,EAAIizG,EAAkB,GAJzEx/G,KAAKyd,WAOTkhG,EAAoBh+G,UAAUg/G,sBAAwB,SAAUH,GACtC,IAApBx/G,KAAKykB,MAAMtK,OAMfna,KAAKykB,MAAQ,IAAI25F,GAAmBK,OAAOJ,GAAS,GAAIr+G,KAAKykB,MAAMi6F,MAAO,CACxEc,gBAAiBA,KAGnBx/G,KAAK6+G,gBAAgB98G,KAAK/B,KAAKykB,MAAMi6F,SAGvCC,EAAoBh+G,UAAU0+G,UAAY,SAAUO,EAAgBZ,GAClE,IAAI59G,EAAQpB,KAIZ,GAFAA,KAAKyd,QAAO,IAEPzd,KAAK4K,OAAOgC,WACf,OAAO+P,QAAQC,SAAQ,GAGzB,IAAI/P,EAAQ7M,KAAK4K,OAAOkC,WACpB5B,EAAWlL,KAAK4K,OAAOkJ,cAI3B,OAHA9T,KAAKykB,MAAQ,IAAI25F,GAAmBI,QAAQ,YAAwB,SAAU3iG,GAC5E,OAAOgiG,GAAqBhxG,EAAO3B,EAAU00G,EAAgB/jG,MAExD7b,KAAKykB,MAAM8N,QAAQjvB,KAAK,SAAU+O,GAEvC,OAAI2sG,IAAc59G,EAAM49G,YAInB3sG,GAAWA,EAAOktG,YAA2C,IAA7BltG,EAAOktG,WAAWhzG,QAKrDnL,EAAMqjB,MAAQ,IAAI25F,GAAmBK,OAAOpsG,GAE5CjR,EAAMy9G,gBAAgB98G,KAAKX,EAAMqjB,MAAMi6F,QAEhC,IARPt9G,EAAMqc,UAEC,MAQRyH,MAAM,SAAUuM,GAMjB,OALIutF,IAAc59G,EAAM49G,YACtB59G,EAAMqjB,MAAQ25F,GAAmBG,SAGnC,aAAkB9sF,IACX,KAIXrxB,OAAOM,eAAei+G,EAAoBh+G,UAAW,cAAe,CAClEC,IAAK,WACH,OAA2B,IAApBZ,KAAKykB,MAAMtK,MAEK,IAApBna,KAAKykB,MAAMtK,MAEXna,KAAKi/G,iBAAiBY,eAE3B/+G,YAAY,EACZC,cAAc,IAGhB49G,EAAoBh+G,UAAU+zB,eAAiB,WAC7C10B,KAAKyd,SAELzd,KAAK8oE,aAAe,IAAI,KACxB9oE,KAAK++G,eAAiB,IAAI,KAC1B,IAAIlyG,EAAQ7M,KAAK4K,OAAOkC,WAExB,GAAKD,EAIL,IAAK,IAAI+F,EAAK,EAAG+F,EAAKolG,GAAA,EAAoC/zF,QAAQnd,GAAQ+F,EAAK+F,EAAGpM,OAAQqG,IAAM,CAG9F,IAFA,IAAIi2D,EAAUlwD,EAAG/F,GAER4e,EAAK,EAAG+hE,EAAK1qB,EAAQi3C,gCAAkC,GAAItuF,EAAK+hE,EAAGhnF,OAAQilB,IAAM,CACxF,IAAI6nB,EAAKk6C,EAAG/hE,GACZxxB,KAAK8oE,aAAa1vD,IAAIigC,EAAG5lC,WAAW,IAEpCzT,KAAK++G,eAAe3lG,IAAIigC,EAAG5lC,WAAW,IAGxC,IAAK,IAAIssG,EAAK,EAAGC,EAAKn3C,EAAQo3C,kCAAoC,GAAIF,EAAKC,EAAGzzG,OAAQwzG,IAAM,CACtF1mE,EAAK2mE,EAAGD,GACZ//G,KAAK++G,eAAe3lG,IAAIigC,EAAG5lC,WAAW,OAK5CkrG,EAAoBh+G,UAAUooE,UAAY,SAAUnwD,GAClD,GAAK5Y,KAAK89B,QAAV,CAIA,IAAIoiF,EAAgBtnG,EAAKrM,OAAS,EAC9B4zG,EAAkBvnG,EAAKnF,WAAWysG,IAElClgH,KAAK8oE,aAAa3oD,IAAIggG,IAAoBngH,KAAK6/G,aAAe7/G,KAAK++G,eAAe5+F,IAAIggG,KACxFngH,KAAKsV,QAAQ,CACX0oG,YAAaD,GAAA,EAA+BqC,iBAC5CjC,iBAAkBvlG,EAAK4+B,OAAO0oE,OAKpCvB,EAAoBh+G,UAAUw+G,eAAiB,SAAUjzG,GACtC,UAAbA,EAAEs6B,OACJxmC,KAAKyd,SACIzd,KAAK6/G,aACd7/G,KAAKsV,QAAQ,CACX0oG,YAAaD,GAAA,EAA+BsC,iBAKlD1B,EAAoBh+G,UAAUy+G,qBAAuB,WAC/Cp/G,KAAK6/G,aACP7/G,KAAKsV,QAAQ,CACX0oG,YAAaD,GAAA,EAA+BsC,iBAKlD1B,EAAoBh+G,UAAUu+G,4BAA8B,WAC1Dl/G,KAAK89B,QAAU99B,KAAK4K,OAAOiB,mBAAmBC,YAAY4zG,eAAe5hF,QAEpE99B,KAAK89B,SACR99B,KAAKyd,UAITkhG,EAAoBh+G,UAAUc,QAAU,WACtCzB,KAAKyd,QAAO,GAEZ1T,EAAOpJ,UAAUc,QAAQwI,KAAKjK,OAGhC2+G,EAAoBC,cAAgB,IAE7BD,EAtST,CAuSE,KCxYE,GAAwC,SAAUnoG,EAAY1T,EAAQ2N,EAAKgG,GAC7E,IAEIxN,EAFAyN,EAAIC,UAAUpK,OACdqK,EAAIF,EAAI,EAAI5T,EAAkB,OAAT2T,EAAgBA,EAAOrW,OAAOyW,yBAAyB/T,EAAQ2N,GAAOgG,EAE/F,GAAuB,kBAAZK,SAAoD,oBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASP,EAAY1T,EAAQ2N,EAAKgG,QAAW,IAAK,IAAIjI,EAAIgI,EAAWjK,OAAS,EAAGiC,GAAK,EAAGA,KAC1KvF,EAAIuN,EAAWhI,MAAIoI,GAAKF,EAAI,EAAIzN,EAAE2N,GAAKF,EAAI,EAAIzN,EAAEnG,EAAQ2N,EAAKmG,GAAK3N,EAAEnG,EAAQ2N,KAASmG,GAE5F,OAAOF,EAAI,GAAKE,GAAKxW,OAAOM,eAAeoC,EAAQ2N,EAAKmG,GAAIA,GAG1D,GAAkC,SAAUK,EAAYC,GAC1D,OAAO,SAAUpU,EAAQ2N,GACvByG,EAAUpU,EAAQ2N,EAAKwG,KAoBvB,GAAImN,GAAA,EAEJ,GAEJ,WACE,SAASk8F,EAAqB11G,EAAQwM,EAAmB0xF,EAAenZ,GACtE,IAAIvuF,EAAQpB,KAEZA,KAAK4K,OAASA,EAEd5K,KAAK6Y,qBAAsB,EAC3B7Y,KAAKugH,iBAAmB,IAAI,GAAiB31G,EAAQ+kF,EAAamZ,GAClE9oG,KAAK6M,MAAQ,IAAI,GAAoBjC,GACrC5K,KAAKwgH,WAAa9C,GAAQC,QAAQnmG,OAAOJ,GACzCpX,KAAKygH,sBAAwB/C,GAAQE,mBAAmBpmG,OAAOJ,GAC/DpX,KAAK0gH,SAAU,EACf1gH,KAAKs/F,YAAc,GACnBt/F,KAAKs/F,YAAYlxF,KAAKpO,KAAK6M,MAAMiyG,eAAe,SAAU6B,GACpDA,GACFv/G,EAAMuhB,OAENvhB,EAAMqiB,OAAOk9F,IAEbv/G,EAAMujB,UA4QZ,OAvQA27F,EAAqB3/G,UAAUigH,4BAA8B,WAC3D,IAAIx/G,EAAQpB,KAEZA,KAAKsxB,QAAU,GAAE,yCACjB,IAAI8wB,EAAUh+B,GAAA,EAAWpkB,KAAKsxB,QAAS,GAAE,aACzC8wB,EAAQlU,UAAY,EACpB,IAAIxpB,EAAUN,GAAA,EAAWg+B,EAAS,GAAE,aAChCjC,EAAW/7B,GAAA,EAAWM,EAAS,GAAE,qBACjCzD,EAAOmD,GAAA,EAAWM,EAAS,GAAE,iBACX,aAAK,aAASy7B,EAAU,SAC9C0gE,CAAgB7gH,KAAKmgD,SAAUngD,KAAMA,KAAKs/F,aACxB,aAAK,aAASr+E,EAAM,SACtC6/F,CAAY9gH,KAAKihB,KAAMjhB,KAAMA,KAAKs/F,aAClCt/F,KAAK+gH,UAAY38F,GAAA,EAAWg+B,EAAS,GAAE,eACvC,IAAI/gC,EAAO,GAAE,SACbrhB,KAAK+kF,UAAY,IAAI,KAAqB1jE,EAAM,IAChDrhB,KAAKs/F,YAAYlxF,KAAKpO,KAAK+kF,WAC3B3iC,EAAQ9oC,YAAYtZ,KAAK+kF,UAAUnrE,cACnC5Z,KAAKghH,UAAY58F,GAAA,EAAW/C,EAAM,GAAE,eACpCrhB,KAAKihH,KAAO78F,GAAA,EAAW/C,EAAM,GAAE,UAC/BrhB,KAAK4K,OAAO4O,iBAAiBxZ,MAC7BA,KAAK2kB,OACL3kB,KAAKsxB,QAAQzF,MAAMq1F,WAAa,OAChClhH,KAAKs/F,YAAYlxF,KAAKpO,KAAK4K,OAAOo0B,2BAA2B,SAAU9yB,GACjE9K,EAAMs/G,SACRt/G,EAAMwJ,OAAOkb,oBAAoB1kB,MAIrC,IAAIo+F,EAAa,WACf,IAAI95E,EAAWtkB,EAAMwJ,OAAOiB,mBAAmB6Z,SAE/CtkB,EAAMkwB,QAAQzF,MAAME,SAAWrG,EAASqG,SAAW,MAGrDyzE,IACA,KAAM2hB,MAAMnhH,KAAK4K,OAAO0B,yBAAyBukC,KAAK7wC,KAAK4K,SAASkR,OAAO,SAAU5P,GACnF,OAAOA,EAAEwZ,WACR07F,GAAG5hB,EAAY,KAAMx/F,KAAKs/F,aAC7Bt/F,KAAKs/F,YAAYlxF,KAAKpO,KAAK4K,OAAOomB,kBAAkB,SAAU9kB,GAC5D,OAAO9K,EAAMigH,qBAEfrhH,KAAKqhH,mBAGPf,EAAqB3/G,UAAUgiB,KAAO,WACpC,IAAIvhB,EAAQpB,KAEPA,KAAK6M,QAAS7M,KAAK0gH,UAInB1gH,KAAKsxB,SACRtxB,KAAK4gH,8BAGP5gH,KAAKwgH,WAAWxoG,KAAI,GACpBhY,KAAK0gH,SAAU,EACf5+G,WAAW,WACT,OAAOsiB,GAAA,EAAahjB,EAAMkwB,QAAS,YAClC,KACHtxB,KAAK4K,OAAOkb,oBAAoB9lB,QAGlCsgH,EAAqB3/G,UAAUgkB,KAAO,WAC/B3kB,KAAK6M,OAAU7M,KAAK0gH,UAIpB1gH,KAAKsxB,SACRtxB,KAAK4gH,8BAGP5gH,KAAKwgH,WAAW5oG,QAChB5X,KAAK0gH,SAAU,EACf1gH,KAAKshH,eAAiB,KACtBl9F,GAAA,EAAgBpkB,KAAKsxB,QAAS,WAC9BtxB,KAAK4K,OAAOkb,oBAAoB9lB,QAGlCsgH,EAAqB3/G,UAAUmT,YAAc,WAC3C,OAAI9T,KAAK0gH,QACA,CACLx1G,SAAUlL,KAAK4K,OAAOkJ,cACtBkG,WAAY,CAAC,EAEX,IAMC,MAGTsmG,EAAqB3/G,UAAU8iB,OAAS,SAAUi7F,GAChD,IAAIlyB,EAAWkyB,EAAMa,WAAWhzG,OAAS,EACzC6X,GAAA,EAAgBpkB,KAAKsxB,QAAS,WAAYk7D,GAC1CxsF,KAAKygH,sBAAsBzoG,IAAIw0E,GAC/BxsF,KAAKghH,UAAUt1F,UAAY,GAC3B1rB,KAAKihH,KAAKv1F,UAAY,GACtB,IAAIs1F,EAAYtC,EAAMa,WAAWb,EAAMc,iBAEvC,GAAKwB,EAAL,CAIA,IAAIrtE,EAAOvvB,GAAA,EAAWpkB,KAAKghH,UAAW,GAAE,UACpCO,EAAgBP,EAAU/e,WAAW11F,OAAS,EAC9CmZ,EAAW1lB,KAAK4K,OAAOiB,mBAAmB6Z,SAI9C,GAHAiuB,EAAK9nB,MAAME,SAAWrG,EAASqG,SAAW,KAC1C4nB,EAAK9nB,MAAMy1E,WAAa57E,EAAS47E,WAE5BigB,EAIHvhH,KAAKwhH,iBAAiB7tE,EAAMqtE,EAAWtC,EAAM+C,sBAHjCr9F,GAAA,EAAWuvB,EAAM,GAAE,SACzBt6B,YAAc2nG,EAAU92G,MAKhC,YAAQlK,KAAK0hH,oBACb1hH,KAAK0hH,mBAAqB,GAC1B,IAAID,EAAkBT,EAAU/e,WAAWyc,EAAM+C,iBAEjD,GAAIA,GAAmBA,EAAgBE,cAAe,CACpD,IAAIA,EAAgB,GAAE,sBAEtB,GAA6C,kBAAlCF,EAAgBE,cACzBA,EAActoG,YAAcooG,EAAgBE,kBACvC,CACL,IAAI/a,EAAmB5mG,KAAKugH,iBAAiB98F,OAAOg+F,EAAgBE,eACpEv9F,GAAA,EAAawiF,EAAiBt1E,QAAS,iBACvCtxB,KAAK0hH,mBAAmBtzG,KAAKw4F,GAC7B+a,EAAcroG,YAAYstF,EAAiBt1E,SAG7ClN,GAAA,EAAWpkB,KAAKihH,KAAM,GAAE,IAAK,GAAIU,IAKnC,GAFAv9F,GAAA,EAAgBpkB,KAAKghH,UAAW,aAAcA,EAAUW,oBAExB3/G,IAA5Bg/G,EAAUW,oBAEP,GAAuC,kBAA5BX,EAAUW,cAC1Bv9F,GAAA,EAAWpkB,KAAKihH,KAAM,GAAE,IAAK,GAAID,EAAUW,oBACtC,CACD/a,EAAmB5mG,KAAKugH,iBAAiB98F,OAAOu9F,EAAUW,eAC9Dv9F,GAAA,EAAawiF,EAAiBt1E,QAAS,iBACvCtxB,KAAK0hH,mBAAmBtzG,KAAKw4F,GAC7BxiF,GAAA,EAAWpkB,KAAKihH,KAAMra,EAAiBt1E,SAGzC,IAAIswF,EAAkBv1F,OAAOqyF,EAAMc,gBAAkB,GAQrD,GANId,EAAMa,WAAWhzG,OAAS,KAC5Bq1G,GAAmB,IAAMlD,EAAMa,WAAWhzG,QAG5CvM,KAAK+gH,UAAU1nG,YAAcuoG,EAEzBH,EAAiB,CACnB,IAAII,EAAkB7hH,KAAK8hH,kBAAkBd,EAAWtC,EAAM+C,iBAG1DzhH,KAAKshH,iBAAmBO,IAC1B39D,GAAA,EAAWp6C,EAAA,EAAa,OAAQ,YAAa+3G,IAC7C7hH,KAAKshH,eAAiBO,GAI1B7hH,KAAK4K,OAAOkb,oBAAoB9lB,MAChCA,KAAK+kF,UAAUgb,gBAGjBugB,EAAqB3/G,UAAU6gH,iBAAmB,SAAUphE,EAAQ4gE,EAAWe,GAC7E,IAAIppG,EAAK3Y,KAAKgiH,yBAAyBhB,EAAWe,GAC9CxuG,EAAQoF,EAAG,GACXgrC,EAAMhrC,EAAG,GAETspG,EAAaxtG,SAASyE,cAAc,QACxC+oG,EAAW5oG,YAAc2nG,EAAU92G,MAAM1I,UAAU,EAAG+R,GACtD,IAAI2uG,EAAYztG,SAASyE,cAAc,QACvCgpG,EAAU7oG,YAAc2nG,EAAU92G,MAAM1I,UAAU+R,EAAOowC,GACzDu+D,EAAUvyG,UAAY,mBACtB,IAAIwyG,EAAY1tG,SAASyE,cAAc,QACvCipG,EAAU9oG,YAAc2nG,EAAU92G,MAAM1I,UAAUmiD,GAClDv/B,GAAA,EAAWg8B,EAAQ6hE,EAAYC,EAAWC,IAG5C7B,EAAqB3/G,UAAUmhH,kBAAoB,SAAUd,EAAWoB,GACtE,IAAIC,EAAQrB,EAAU/e,WAAWmgB,GAEjC,MAA2B,kBAAhBC,EAAMn4G,MACRm4G,EAAMn4G,MAEN82G,EAAU92G,MAAM1I,UAAU6gH,EAAMn4G,MAAM,GAAIm4G,EAAMn4G,MAAM,KAIjEo2G,EAAqB3/G,UAAUqhH,yBAA2B,SAAUhB,EAAWoB,GAC7E,IAAIC,EAAQrB,EAAU/e,WAAWmgB,GAEjC,GAAKC,EAEE,IAAIh5G,MAAM2T,QAAQqlG,EAAMn4G,OAC7B,OAAOm4G,EAAMn4G,MAEb,IAAI6pE,EAAMitC,EAAU92G,MAAMwtB,YAAY2qF,EAAMn4G,OAC5C,OAAO6pE,GAAO,EAAI,CAACA,EAAKA,EAAMsuC,EAAMn4G,MAAMqC,QAAU,CAAC,EAAG,GALxD,MAAO,CAAC,EAAG,IASf+zG,EAAqB3/G,UAAUsgB,KAAO,WAChCjhB,KAAK6M,QACP7M,KAAK4K,OAAO4K,QACZxV,KAAK6M,MAAMoU,SAIfq/F,EAAqB3/G,UAAUw/C,SAAW,WACpCngD,KAAK6M,QACP7M,KAAK4K,OAAO4K,QACZxV,KAAK6M,MAAMszC,aAIfmgE,EAAqB3/G,UAAU8c,OAAS,WAClCzd,KAAK6M,OACP7M,KAAK6M,MAAM4Q,UAIf6iG,EAAqB3/G,UAAUiZ,WAAa,WAC1C,OAAO5Z,KAAKsxB,SAGdgvF,EAAqB3/G,UAAUgM,MAAQ,WACrC,OAAO2zG,EAAqB5zG,IAG9B4zG,EAAqB3/G,UAAU2U,QAAU,SAAUq9F,GAC7C3yG,KAAK6M,OACP7M,KAAK6M,MAAMyI,QAAQq9F,EAAS,IAIhC2N,EAAqB3/G,UAAU0gH,gBAAkB,WAC/C,IAAIv9F,EAASziB,KAAKw5B,IAAI76B,KAAK4K,OAAOm5B,gBAAgBjgB,OAAS,EAAG,KAC9D9jB,KAAKsxB,QAAQzF,MAAMm0E,UAAYl8E,EAAS,MAG1Cw8F,EAAqB3/G,UAAUc,QAAU,WACvCzB,KAAKs/F,YAAc,YAAQt/F,KAAKs/F,aAChCt/F,KAAK0hH,mBAAqB,YAAQ1hH,KAAK0hH,oBAEnC1hH,KAAK6M,QACP7M,KAAK6M,MAAMpL,UACXzB,KAAK6M,MAAQ,OAIjByzG,EAAqB5zG,GAAK,qCAC1B4zG,EAAuB,GAAW,CAAC,GAAQ,EAAG,MAAqB,GAAQ,EAAG,MAAiB,GAAQ,EAAG,OAAgBA,GA9R5H,GAmSA,YAA2B,SAAUvwG,EAAOC,GAC1C,IAAIiK,EAASlK,EAAMG,SAAS,KAE5B,GAAI+J,EAAQ,CACV,IAAIC,EAAcnK,EAAMoK,OAAS,IAAgB,EAAI,EACrDnK,EAAUG,QAAQ,oDAAsD+J,EAAc,YAAcD,EAAS,OAC7GjK,EAAUG,QAAQ,kFAAoF8J,EAAOihE,YAAY,IAAO,OAChIlrE,EAAUG,QAAQ,yFAA2F8J,EAAOihE,YAAY,IAAO,OAGzI,IAAI9gE,EAAarK,EAAMG,SAAS,KAE5BkK,GACFpK,EAAUG,QAAQ,8DAAgEiK,EAAa,OAGjG,IAAIoS,EAAOzc,EAAMG,SAAS,MAEtBsc,GACFxc,EAAUG,QAAQ,qDAAuDqc,EAAO,OAGlF,IAAIy+E,EAAiBl7F,EAAMG,SAAS,MAEhC+6F,GACFj7F,EAAUG,QAAQ,mEAAqE86F,EAAiB,SChW5G,IAAI,GAAsC,WACxC,IAAIjiG,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA0BtC,GAAwC,SAAUgN,EAAY1T,EAAQ2N,EAAKgG,GAC7E,IAEIxN,EAFAyN,EAAIC,UAAUpK,OACdqK,EAAIF,EAAI,EAAI5T,EAAkB,OAAT2T,EAAgBA,EAAOrW,OAAOyW,yBAAyB/T,EAAQ2N,GAAOgG,EAE/F,GAAuB,kBAAZK,SAAoD,oBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASP,EAAY1T,EAAQ2N,EAAKgG,QAAW,IAAK,IAAIjI,EAAIgI,EAAWjK,OAAS,EAAGiC,GAAK,EAAGA,KAC1KvF,EAAIuN,EAAWhI,MAAIoI,GAAKF,EAAI,EAAIzN,EAAE2N,GAAKF,EAAI,EAAIzN,EAAEnG,EAAQ2N,EAAKmG,GAAK3N,EAAEnG,EAAQ2N,KAASmG,GAE5F,OAAOF,EAAI,GAAKE,GAAKxW,OAAOM,eAAeoC,EAAQ2N,EAAKmG,GAAIA,GAG1D,GAAkC,SAAUK,EAAYC,GAC1D,OAAO,SAAUpU,EAAQ2N,GACvByG,EAAUpU,EAAQ2N,EAAKwG,KAcvB,GAEJ,WACE,SAASqrG,EAAyB13G,EAAQu/D,GACxCnqE,KAAK4K,OAASA,EACd5K,KAAKmoD,OAASgiB,EAAqBkQ,eAAe,GAAsBr6E,KAAK4K,QAiC/E,OA9BA03G,EAAyB1hH,IAAM,SAAUgK,GACvC,OAAOA,EAAO6B,gBAAgB61G,EAAyB51G,KAGzD41G,EAAyB3hH,UAAUgM,MAAQ,WACzC,OAAO21G,EAAyB51G,IAGlC41G,EAAyB3hH,UAAU8c,OAAS,WAC1Czd,KAAKmoD,OAAO1qC,UAGd6kG,EAAyB3hH,UAAUw/C,SAAW,WAC5CngD,KAAKmoD,OAAOhI,YAGdmiE,EAAyB3hH,UAAUsgB,KAAO,WACxCjhB,KAAKmoD,OAAOlnC,QAGdqhG,EAAyB3hH,UAAU2U,QAAU,SAAUq9F,GACrD3yG,KAAKmoD,OAAO7yC,QAAQq9F,IAGtB2P,EAAyB3hH,UAAUc,QAAU,WAC3C,YAAQzB,KAAKmoD,SAGfm6D,EAAyB51G,GAAK,mCAC9B41G,EAA2B,GAAW,CAAC,GAAQ,EAAG,OAAyBA,GAnC7E,GAuCI,GAEJ,SAAUv4G,GAGR,SAASw4G,IACP,OAAOx4G,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,sCACJkE,MAAOJ,EAAA,EAAa,+BAAgC,2BACpDK,MAAO,0BACPC,aAAc,IAAkBo4G,yBAChCn4G,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,KAOTC,OAAQ,QAINzK,KAaR,OAlCA,GAAUuiH,EAA6Bx4G,GAwBvCw4G,EAA4B5hH,UAAU+J,IAAM,SAAUC,EAAUC,GAC9D,IAAIC,EAAa,GAAyBjK,IAAIgK,GAE1CC,GACFA,EAAWyK,QAAQ,CACjB0oG,YAAaD,GAAA,EAA+BE,UAK3CsE,EAnCT,CAoCE,KAGF,YAA2B,IAC3B,YAAqB,IACrB,IAGIE,GAAwB,IAAcjqG,mBAAmB,GAAyB5X,KACtF,YAAsB,IAAI6hH,GAAsB,CAC9Cz8G,GAAI,sBACJoE,aAAcszG,GAAQC,QACtBllG,QAAS,SAAiB2K,GACxB,OAAOA,EAAE3F,UAEXpT,OAAQ,CACNI,OAXS,IAYTH,OAAQ,IAAkBkL,MAC1BhL,QAAS,EAGTmL,UAAW,CAAC,UAOhB,YAAsB,IAAI8sG,GAAsB,CAC9Cz8G,GAAI,wBACJoE,aAAc,KAAege,IAAIs1F,GAAQC,QAASD,GAAQE,oBAC1DnlG,QAAS,SAAiB2K,GACxB,OAAOA,EAAE+8B,YAEX91C,OAAQ,CACNI,OA9BS,IA+BTH,OAAQ,IAAkBkL,MAC1BhL,QAAS,GAGTmL,UAAW,CAAC,KAKZtC,IAAK,CACH7I,QAAS,GAGTmL,UAAW,CAAC,IAIV,UAQR,YAAsB,IAAI8sG,GAAsB,CAC9Cz8G,GAAI,wBACJoE,aAAc,KAAege,IAAIs1F,GAAQC,QAASD,GAAQE,oBAC1DnlG,QAAS,SAAiB2K,GACxB,OAAOA,EAAEnC,QAEX5W,OAAQ,CACNI,OA/DS,IAgETH,OAAQ,IAAkBkL,MAC1BhL,QAAS,GAGTmL,UAAW,CAAC,KAKZtC,IAAK,CACH7I,QAAS,GAGTmL,UAAW,CAAC,IAIV,UCzNR,IAAI,GAAsC,WACxC,IAAI3M,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA0BtC,GAAwC,SAAUgN,EAAY1T,EAAQ2N,EAAKgG,GAC7E,IAEIxN,EAFAyN,EAAIC,UAAUpK,OACdqK,EAAIF,EAAI,EAAI5T,EAAkB,OAAT2T,EAAgBA,EAAOrW,OAAOyW,yBAAyB/T,EAAQ2N,GAAOgG,EAE/F,GAAuB,kBAAZK,SAAoD,oBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASP,EAAY1T,EAAQ2N,EAAKgG,QAAW,IAAK,IAAIjI,EAAIgI,EAAWjK,OAAS,EAAGiC,GAAK,EAAGA,KAC1KvF,EAAIuN,EAAWhI,MAAIoI,GAAKF,EAAI,EAAIzN,EAAE2N,GAAKF,EAAI,EAAIzN,EAAEnG,EAAQ2N,EAAKmG,GAAK3N,EAAEnG,EAAQ2N,KAASmG,GAE5F,OAAOF,EAAI,GAAKE,GAAKxW,OAAOM,eAAeoC,EAAQ2N,EAAKmG,GAAIA,GAG1D,GAAkC,SAAUK,EAAYC,GAC1D,OAAO,SAAUpU,EAAQ2N,GACvByG,EAAUpU,EAAQ2N,EAAKwG,KAyBhByrG,GAAgC,CACzCz4B,aAAc,SAAsBp9E,GAClC,OAAOA,EAAMsmE,WAAW5mE,OAAS,EAAIzC,EAAA,EAAa,sBAAuB,yBAAqB+C,EAAMsmE,WAAW5mE,QAAU,KAIzH,GAEJ,WACE,SAASo2G,EAAoB/3G,EAAQwM,GAC/BxM,aAAkB,IACpB,GAAY2kE,aAAa/3D,OAAOJ,GAYpC,OARAurG,EAAoBhiH,UAAUc,QAAU,aAExCkhH,EAAoBhiH,UAAUgM,MAAQ,WACpC,OAAOg2G,EAAoBj2G,IAG7Bi2G,EAAoBj2G,GAAK,qCACzBi2G,EAAsB,GAAW,CAAC,GAAQ,EAAG,OAAsBA,GAdrE,GAoBI,GAEJ,SAAU54G,GAGR,SAAS64G,IACP,OAAO74G,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,wCACJkE,MAAOJ,EAAA,EAAa,0BAA2B,mBAC/CK,MAAO,sBACPC,aAAc,KAAege,IAAI,IAAkBy6F,qBAAsB,GAAYrzC,gBAAiB,IAAkBud,mBAAmBtd,aAC3IplE,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,KAKTC,OAAQ,KAIVmL,SAAU,CACRtF,MAAO,aACPK,MAAO,QAEL3Q,KAsBR,OA7CA,GAAU4iH,EAAiB74G,GA0B3B64G,EAAgBjiH,UAAU+J,IAAM,SAAU4d,EAAW1d,GACnD,IAAIC,EAAa,GAAqBjK,IAAIgK,GAE1C,GAAKC,GAIDD,EAAOgC,WAAY,CACrB,IAAIs6D,EAAUt8D,EAAOoL,eACjBuJ,EAAU3U,EAAOkC,WACjBqmE,EAAa,YAAwB,SAAUt3D,GACjD,OAAOinG,GAAkBvjG,EAAS2nD,EAAQ/5D,mBAAoB0O,GAAOvY,KAAK,SAAU6vE,GAClF,OAAO,IAAI,GAAgBA,OAG/BtoE,EAAW0+E,aAAariB,EAASiM,EAAYuvC,MAI1CE,EA9CT,CA+CE,KAGF,YAA2B,IAC3B,YAAqB,IA0FrB,SAASG,GAA2Bp4G,EAAUuK,GAC5C8tG,GAAer4G,EAAU,SAAUE,GACjC,OAAOA,EAAW6+E,gBAetB,SAASs5B,GAAer4G,EAAUs4G,GAChC,IAAIC,E3CxKC,SAAwBv4G,GAC7B,IAAIC,EAASD,EAAS/J,IAAI,MAAoBwU,uBAE9C,OAAIxK,aAAkB,GACbA,EAAO+/D,kBAGT//D,E2CiKWu4G,CAAex4G,GAEjC,GAAKu4G,EAAL,CAIA,IAAIr4G,EAAa,GAAqBjK,IAAIsiH,GAErCr4G,GAILo4G,EAAGp4G,IAuHE,SAASi4G,GAAkBj2G,EAAO3B,EAAU2Q,GAEjD,IAAIa,EAAW,KAA0BsN,QAAQnd,GAAOI,IAAI,SAAUmP,GACpE,OAAOO,QAAQC,QAAQR,EAAS0mG,kBAAkBj2G,EAAO3B,EAAU,CACjEk4G,oBAAoB,GACnBvnG,IAAQvY,KAAK,SAAU+O,GACxB,GAAIhJ,MAAM2T,QAAQ3K,GAChB,OAAOA,GAIR,SAAUgL,GACX,aAA0BA,OAG9B,OAAOV,QAAQR,IAAIO,GAAUpZ,KAAK,SAAU6vE,GAG1C,IAFA,IAAI9gE,EAAS,GAEJO,EAAK,EAAG4gE,EAAeL,EAAYvgE,EAAK4gE,EAAajnE,OAAQqG,IAAM,CAC1E,IAAI6gE,EAAMD,EAAa5gE,GAEnB6gE,GACFphE,EAAOjE,KAAKkS,MAAMjO,EAAQohE,GAI9B,OAAOphE,IAxMX,KAAiBy3D,gBAAgB,CAC/B9jE,GAAI,+BACJyS,QAjE0B,SAA+B9N,EAAUgT,EAAUzS,GAC7E,KAAMyS,aAAoB,MACxB,MAAM,IAAIm6B,MAAM,yBAGlB,IAAK5sC,EACH,MAAM,IAAI4sC,MAAM,8BAGlB,IAAIsyB,EAAoBz/D,EAAS/J,IAAI,MACrC,OAAOwpE,EAAkBkgB,eAAe,CACtC3sE,SAAUA,GACTysD,EAAkBh1D,wBAAwB9R,KAAK,SAAU+/G,GAC1D,GAAK,aAAaA,IAAaA,EAAQz2G,WAAvC,CAIA,IAAI/B,EAAa,GAAqBjK,IAAIyiH,GAE1C,GAAKx4G,EAAL,CAIA,IAAIsoE,EAAa,YAAwB,SAAUt3D,GACjD,OAAOinG,GAAkBO,EAAQv2G,WAAY,IAASsS,KAAKlU,GAAW2Q,GAAOvY,KAAK,SAAU6vE,GAC1F,OAAO,IAAI,GAAgBA,OAG3B1lE,EAAQ,IAAI,KAAMvC,EAASwC,WAAYxC,EAASyC,OAAQzC,EAASwC,WAAYxC,EAASyC,QAC1F,OAAOgP,QAAQC,QAAQ/R,EAAW0+E,aAAa97E,EAAO0lE,EAAYuvC,YAsCtE,KAAiB54C,gBAAgB,CAC/B9jE,GAAI,+BACJyS,QApC0B,SAA+B9N,EAAUgT,EAAUzS,EAAUioE,GACvF,KAAMx1D,aAAoB,MACxB,MAAM,IAAIm6B,MAAM,kCAGlB,IAAKq7B,EACH,MAAM,IAAIr7B,MAAM,sBAGlB,IAAIsyB,EAAoBz/D,EAAS/J,IAAI,MACrC,OAAOwpE,EAAkBkgB,eAAe,CACtC3sE,SAAUA,GACTysD,EAAkBh1D,wBAAwB9R,KAAK,SAAU+/G,GAC1D,GAAK,aAAaA,GAAlB,CAIA,IAAIx4G,EAAa,GAAqBjK,IAAIyiH,GAE1C,GAAKx4G,EAIL,OAAOA,EAAW0+E,aAAa,IAAI,KAAMr+E,EAASwC,WAAYxC,EAASyC,OAAQzC,EAASwC,WAAYxC,EAASyC,QAAS,YAAwB,SAAU+T,GACtJ,OAAO/E,QAAQC,QAAQ,IAAI,GAAgBu2D,MACzCuvC,QAYNv5F,YAAa,CACXA,YAAa,0CACbjU,KAAM,CAAC,CACLkU,KAAM,MACND,YAAa,gDACbg6C,WAAY,MACX,CACD/5C,KAAM,WACND,YAAa,gCACbg6C,WAAY,IAASjgD,aACpB,CACDkG,KAAM,YACND,YAAa,yBACbg6C,WAAY95D,WAsClB,KAAoBw/C,iCAAiC,CACnD7iD,GAAI,oBACJyE,OAAQ,IAGRD,QAAS,GAGTif,KAAMw/D,GACNxwE,QAAS,SAAiB9N,GACxBq4G,GAAer4G,EAAU,SAAUE,GACjCA,EAAWq/E,6BAA4B,QAI7C,KAAoBrhC,iCAAiC,CACnD7iD,GAAI,sCACJyE,OAAQ,IAGRD,QAAS,GAGTif,KAAM,GAAY8lD,aAClB92D,QAAS,SAAiB9N,GACxBq4G,GAAer4G,EAAU,SAAUE,GACjCA,EAAWq/E,6BAA4B,QAI7C,KAAoBrhC,iCAAiC,CACnD7iD,GAAI,wBACJyE,OAAQ,IAGRD,QAAS,KAKTif,KAAMw/D,GACNxwE,QAAS,SAAiB9N,GACxBq4G,GAAer4G,EAAU,SAAUE,GACjCA,EAAWq/E,6BAA4B,QAI7C,KAAoBrhC,iCAAiC,CACnD7iD,GAAI,0CACJyE,OAAQ,IAGRD,QAAS,KAKTif,KAAM,GAAY8lD,aAClB92D,QAAS,SAAiB9N,GACxBq4G,GAAer4G,EAAU,SAAUE,GACjCA,EAAWq/E,6BAA4B,QAI7C,KAAoBrhC,iCAAiC,CACnD7iD,GAAI,uBACJyE,OAAQ,IAGRD,QAAS,EAGTmL,UAAW,CAAC,MAKZ8T,KAAM,KAAerB,IAAI6gE,GAA2B,KAAeq6B,IAAI,6BACvE7qG,QAASsqG,KAEX,KAAoBl6D,iCAAiC,CACnD7iD,GAAI,6BACJyE,QAAQ,EAGRD,QAAS,EAGTmL,UAAW,CAAC,MAKZ8T,KAAM,KAAerB,IAAI,GAAYmnD,aAAc,KAAe+zC,IAAI,6BACtE7qG,QAASsqG,KAEX,KAAoBl6D,iCAAiC,CACnD7iD,GAAI,sBACJyE,OAAQ,IAGRD,QAAS,KAKT6I,IAAK,CACH7I,QAAS,KAMXif,KAAM,KAAerB,IAAI6gE,GAA2B3F,IACpD7qE,QA7IF,SAA6B9N,EAAUuK,GACrC,IAAIquG,EAAc54G,EAAS/J,IAAI,MAC3B4U,EAAQ+tG,EAAYC,iBAAmBD,EAAYC,gBAAgBx8B,WAEnExxE,aAAiB,IACnBwtG,GAAer4G,EAAU,SAAUE,GACjC,OAAOA,EAAWg/E,cAAcr0E,GAAO,QAsK7C,YAA+B,4BAA6B,SAAU3I,EAAO3B,GAC3E,OAAO43G,GAAkBj2G,EAAO3B,EAAU,KAAkB4S,Q,WCtZnD2lG,GAA+B,IAAI,KAAc,sBAAsB,GAE9E,GAEJ,WACE,SAASC,EAAiB94G,EAAQ6kC,EAAcr4B,GAC9C,IAAIhW,EAAQpB,KAEZA,KAAKyvC,aAAeA,EACpBzvC,KAAKse,aAAe,GAEpBte,KAAK6Y,qBAAsB,EAC3B7Y,KAAK2jH,oBAAsB,KAC3B3jH,KAAK4jH,oBAAsB,KAC3B5jH,KAAK6jH,mBAAqBJ,GAA6BjsG,OAAOJ,GAC9DpX,KAAKqL,QAAUT,EAEf5K,KAAKqL,QAAQmO,iBAAiBxZ,MAE9BA,KAAKse,aAAalQ,KAAKxD,EAAO0B,yBAAyB,SAAUJ,GAC3DA,EAAEwZ,UACJtkB,EAAMo+F,gBAIVx/F,KAAKse,aAAalQ,KAAKqhC,EAAamB,cAAc,SAAU7gC,GAC1D,OAAO3O,EAAMwvC,cAAc7gC,MAsL/B,OAlLA2zG,EAAiB/iH,UAAUiwC,cAAgB,SAAU7gC,GACnD/P,KAAK8jH,aAAa/zG,IAGpB2zG,EAAiB/iH,UAAUc,QAAU,WACnCzB,KAAKse,aAAe,YAAQte,KAAKse,cAEjCte,KAAKqL,QAAQ0O,oBAAoB/Z,OAGnC0jH,EAAiB/iH,UAAUgM,MAAQ,WACjC,MAAO,uBAGT+2G,EAAiB/iH,UAAUiZ,WAAa,WAkBtC,OAjBK5Z,KAAKiZ,WACRjZ,KAAK+jH,YAActvG,SAASyE,cAAc,SAC1ClZ,KAAK+jH,YAAYp0G,UAAY,eAC7B3P,KAAK+jH,YAAY5pG,KAAO,OAExBna,KAAK+jH,YAAY51E,aAAa,aAAc,YAAS,kBAAmB,2DAExEnuC,KAAKiZ,SAAWxE,SAASyE,cAAc,OACvClZ,KAAKiZ,SAAS4S,MAAM/H,OAAS9jB,KAAKqL,QAAQQ,mBAAmBwY,WAAa,KAC1ErkB,KAAKiZ,SAAStJ,UAAY,2BAE1B3P,KAAKiZ,SAASK,YAAYtZ,KAAK+jH,aAE/B/jH,KAAKw/F,aACLx/F,KAAK8jH,aAAa9jH,KAAKyvC,aAAaM,aAG/B/vC,KAAKiZ,UAGdyqG,EAAiB/iH,UAAUmjH,aAAe,SAAU/zG,GAClD,GAAK/P,KAAK+jH,YAAV,CAIA,IAAI3pG,EAAarK,EAAMG,SAAS,KAC5BmK,EAAatK,EAAMG,SAAS,KAC5BmhC,EAAoBthC,EAAMG,SAAS,MACnC+J,EAASlK,EAAMG,SAAS,KAC5BlQ,KAAK+jH,YAAYl4F,MAAMwK,gBAAkBjc,EAAaA,EAAW7Y,WAAa,KAC9EvB,KAAK+jH,YAAYl4F,MAAMhc,MAAQwK,EAAaA,EAAW9Y,WAAa,KACpEvB,KAAK+jH,YAAYl4F,MAAM3R,YAAcD,EAAS,MAAQ,MACtDja,KAAK+jH,YAAYl4F,MAAMk5B,YAAc9qC,EAAS,QAAU,OACxDja,KAAK+jH,YAAYl4F,MAAMgjB,YAAc50B,EAASA,EAAO1Y,WAAa,OAClEvB,KAAKiZ,SAAS4S,MAAMm4F,UAAY3yE,EAAoB,cAAgBA,EAAoB,OAG1FqyE,EAAiB/iH,UAAU6+F,WAAa,WACtC,GAAKx/F,KAAK+jH,YAAV,CAIA,IAAIr+F,EAAW1lB,KAAKqL,QAAQQ,mBAAmB6Z,SAE/C1lB,KAAK+jH,YAAYl4F,MAAMy1E,WAAa57E,EAAS47E,WAC7CthG,KAAK+jH,YAAYl4F,MAAMo4F,WAAav+F,EAASu+F,WAC7CjkH,KAAK+jH,YAAYl4F,MAAME,SAAWrG,EAASqG,SAAW,OAGxD23F,EAAiB/iH,UAAUmT,YAAc,WACvC,OAAO9T,KAAKsX,SAAW,CACrBpM,SAAUlL,KAAKgZ,UACfgB,WAAY,CAAC,EAEX,IAGA,MAGN0pG,EAAiB/iH,UAAUujH,YAAc,WACnClkH,KAAK2jH,qBACP3jH,KAAK2jH,uBAITD,EAAiB/iH,UAAUwjH,YAAc,SAAUlsB,GAC7Cj4F,KAAK4jH,qBACP5jH,KAAK4jH,oBAAoB3rB,IAI7ByrB,EAAiB/iH,UAAU4mF,SAAW,SAAUvb,EAAOzpE,EAAO6hH,EAAgBC,GAC5E,IAAIjjH,EAAQpB,KAEZA,KAAKgZ,UAAY,IAAI,IAASgzD,EAAM/9D,gBAAiB+9D,EAAM99D,aAC3DlO,KAAK+jH,YAAYxhH,MAAQA,EAEzBvC,KAAK+jH,YAAY51E,aAAa,iBAAkBi2E,EAAe7iH,YAE/DvB,KAAK+jH,YAAY51E,aAAa,eAAgBk2E,EAAa9iH,YAE3DvB,KAAK+jH,YAAYzoC,KAAOj6E,KAAKw5B,IAA4C,KAAvCmxC,EAAM16D,UAAY06D,EAAM99D,aAAoB,IAC9E,IAAIo2G,EAAgB,GAEhBC,EAAS,WACX,YAAQD,GAERljH,EAAMuuC,SAGR,OAAO,IAAIhzB,QAAQ,SAAUC,GAC3Bxb,EAAMwiH,oBAAsB,SAAU3rB,GAIpC,OAHA72F,EAAMuiH,oBAAsB,KAC5BviH,EAAMwiH,oBAAsB,KAC5BhnG,EAAQq7E,IACD,GAGT72F,EAAMuiH,oBAAsB,WACoB,IAA1CviH,EAAM2iH,YAAYxhH,MAAMy0C,OAAOzqC,QAAgBnL,EAAM2iH,YAAYxhH,QAAUA,GAO/EnB,EAAMuiH,oBAAsB,KAC5BviH,EAAMwiH,oBAAsB,KAC5BhnG,EAAQxb,EAAM2iH,YAAYxhH,QAPxBnB,EAAM+iH,aAAY,IAkBtBG,EAAcl2G,KAAKhN,EAAMiK,QAAQ2zB,2BARX,WACpB,IAAIm2D,EAAiB/zF,EAAMiK,QAAQyI,cAE9BqhF,GAAmB,KAAM7nF,iBAAiB0+D,EAAOmpB,IACpD/zF,EAAM+iH,aAAY,MAKtBG,EAAcl2G,KAAKhN,EAAMiK,QAAQq1B,sBAAsB,WACrD,OAAOt/B,EAAM+iH,aAAY,MAG3B/iH,EAAM6jB,UACL3hB,KAAK,SAAU+/C,GAEhB,OADAkhE,IACOlhE,GACN,SAAUhmC,GAEX,OADAknG,IACO5nG,QAAQmE,OAAOzD,MAI1BqmG,EAAiB/iH,UAAUskB,MAAQ,WACjC,IAAI7jB,EAAQpB,KAEZA,KAAKqL,QAAQm5G,oCAAoCxkH,KAAKgZ,UAAUtL,WAAY,GAI5E1N,KAAKsX,UAAW,EAEhBtX,KAAK6jH,mBAAmB7rG,KAAI,GAE5BhY,KAAKqL,QAAQya,oBAAoB9lB,MAEjC8B,WAAW,WACTV,EAAM2iH,YAAYvuG,QAElBpU,EAAM2iH,YAAYrgE,kBAAkB/J,SAASv4C,EAAM2iH,YAAYU,aAAa,mBAAoB9qE,SAASv4C,EAAM2iH,YAAYU,aAAa,mBACvI,MAGLf,EAAiB/iH,UAAUgvC,MAAQ,WACjC3vC,KAAKsX,UAAW,EAEhBtX,KAAK6jH,mBAAmBjsG,QAExB5X,KAAKqL,QAAQya,oBAAoB9lB,OAG5B0jH,EA5MT,GCXI,GAAsC,WACxC,IAAI16G,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA0BtC,GAAwC,SAAUgN,EAAY1T,EAAQ2N,EAAKgG,GAC7E,IAEIxN,EAFAyN,EAAIC,UAAUpK,OACdqK,EAAIF,EAAI,EAAI5T,EAAkB,OAAT2T,EAAgBA,EAAOrW,OAAOyW,yBAAyB/T,EAAQ2N,GAAOgG,EAE/F,GAAuB,kBAAZK,SAAoD,oBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASP,EAAY1T,EAAQ2N,EAAKgG,QAAW,IAAK,IAAIjI,EAAIgI,EAAWjK,OAAS,EAAGiC,GAAK,EAAGA,KAC1KvF,EAAIuN,EAAWhI,MAAIoI,GAAKF,EAAI,EAAIzN,EAAE2N,GAAKF,EAAI,EAAIzN,EAAEnG,EAAQ2N,EAAKmG,GAAK3N,EAAEnG,EAAQ2N,KAASmG,GAE5F,OAAOF,EAAI,GAAKE,GAAKxW,OAAOM,eAAeoC,EAAQ2N,EAAKmG,GAAIA,GAG1D,GAAkC,SAAUK,EAAYC,GAC1D,OAAO,SAAUpU,EAAQ2N,GACvByG,EAAUpU,EAAQ2N,EAAKwG,KAIvB,GAAsC,SAAUyJ,EAASC,EAAYC,EAAGC,GAC1E,OAAO,IAAKD,IAAMA,EAAIjE,UAAU,SAAUC,EAASkE,GACjD,SAASC,EAAUxe,GACjB,IACEye,EAAKH,EAAUI,KAAK1e,IACpB,MAAO2J,GACP4U,EAAO5U,IAIX,SAASgV,EAAS3e,GAChB,IACEye,EAAKH,EAAiB,MAAEte,IACxB,MAAO2J,GACP4U,EAAO5U,IAIX,SAAS8U,EAAK3O,GACZA,EAAO8O,KAAOvE,EAAQvK,EAAO9P,OAAS,IAAIqe,EAAE,SAAUhE,GACpDA,EAAQvK,EAAO9P,SACde,KAAKyd,EAAWG,GAGrBF,GAAMH,EAAYA,EAAUP,MAAMI,EAASC,GAAc,KAAKM,WAI9D,GAA0C,SAAUP,EAASW,GAC/D,IASIC,EACAC,EACAC,EACAC,EAZAC,EAAI,CACNxX,MAAO,EACPyX,KAAM,WACJ,GAAW,EAAPH,EAAE,GAAQ,MAAMA,EAAE,GACtB,OAAOA,EAAE,IAEXI,KAAM,GACNC,IAAK,IAMP,OAAOJ,EAAI,CACTR,KAAMa,EAAK,GACX,MAASA,EAAK,GACd,OAAUA,EAAK,IACI,oBAAXC,SAA0BN,EAAEM,OAAOC,UAAY,WACvD,OAAOhiB,OACLyhB,EAEJ,SAASK,EAAKG,GACZ,OAAO,SAAUC,GACf,OAIJ,SAAcC,GACZ,GAAIb,EAAG,MAAM,IAAIc,UAAU,mCAE3B,KAAOV,GACL,IACE,GAAIJ,EAAI,EAAGC,IAAMC,EAAY,EAARW,EAAG,GAASZ,EAAU,OAAIY,EAAG,GAAKZ,EAAS,SAAOC,EAAID,EAAU,SAAMC,EAAEvX,KAAKsX,GAAI,GAAKA,EAAEN,SAAWO,EAAIA,EAAEvX,KAAKsX,EAAGY,EAAG,KAAKhB,KAAM,OAAOK,EAG3J,OAFID,EAAI,EAAGC,IAAGW,EAAK,CAAS,EAARA,EAAG,GAAQX,EAAEjf,QAEzB4f,EAAG,IACT,KAAK,EACL,KAAK,EACHX,EAAIW,EACJ,MAEF,KAAK,EAEH,OADAT,EAAExX,QACK,CACL3H,MAAO4f,EAAG,GACVhB,MAAM,GAGV,KAAK,EACHO,EAAExX,QACFqX,EAAIY,EAAG,GACPA,EAAK,CAAC,GACN,SAEF,KAAK,EACHA,EAAKT,EAAEG,IAAIQ,MAEXX,EAAEE,KAAKS,MAEP,SAEF,QACE,KAAkBb,GAAZA,EAAIE,EAAEE,MAAYrV,OAAS,GAAKiV,EAAEA,EAAEjV,OAAS,MAAkB,IAAV4V,EAAG,IAAsB,IAAVA,EAAG,IAAW,CACtFT,EAAI,EACJ,SAGF,GAAc,IAAVS,EAAG,MAAcX,GAAKW,EAAG,GAAKX,EAAE,IAAMW,EAAG,GAAKX,EAAE,IAAK,CACvDE,EAAExX,MAAQiY,EAAG,GACb,MAGF,GAAc,IAAVA,EAAG,IAAYT,EAAExX,MAAQsX,EAAE,GAAI,CACjCE,EAAExX,MAAQsX,EAAE,GACZA,EAAIW,EACJ,MAGF,GAAIX,GAAKE,EAAExX,MAAQsX,EAAE,GAAI,CACvBE,EAAExX,MAAQsX,EAAE,GAEZE,EAAEG,IAAIzT,KAAK+T,GAEX,MAGEX,EAAE,IAAIE,EAAEG,IAAIQ,MAEhBX,EAAEE,KAAKS,MAEP,SAGJF,EAAKd,EAAKpX,KAAKyW,EAASgB,GACxB,MAAOxV,GACPiW,EAAK,CAAC,EAAGjW,GACTqV,EAAI,EACJ,QACAD,EAAIE,EAAI,EAIZ,GAAY,EAARW,EAAG,GAAQ,MAAMA,EAAG,GACxB,MAAO,CACL5f,MAAO4f,EAAG,GAAKA,EAAG,QAAK,EACvBhB,MAAM,GAlFCH,CAAK,CAACiB,EAAGC,OA6GlB,GAEJ,WACE,SAASwiG,EAAe73G,EAAO3B,GAC7BlL,KAAK6M,MAAQA,EACb7M,KAAKkL,SAAWA,EAChBlL,KAAK2kH,WAAa,KAAuB36F,QAAQnd,GAgGnD,OA7FA63G,EAAe/jH,UAAUikH,YAAc,WACrC,OAAO5kH,KAAK2kH,WAAWp4G,OAAS,GAGlCm4G,EAAe/jH,UAAUkkH,sBAAwB,SAAUhpG,GACzD,OAAO,GAAU7b,UAAM,OAAQ,EAAQ,WACrC,IAAI8kH,EAAe5sF,EAAK85B,EACxB,OAAO,GAAYhyD,KAAM,SAAU2Y,GACjC,OAAQA,EAAGzO,OACT,KAAK,EAGH,OAFA46G,EAAgB9kH,KAAK2kH,WAAW,IAQ3BG,EAAcD,sBAGZ,CAAC,EAENC,EAAcD,sBAAsB7kH,KAAK6M,MAAO7M,KAAKkL,SAAU2Q,IALhB,CAAC,EAEhD,GAPO,CAAC,OAEN7Z,GAUN,KAAK,EACHk2B,EAAMvf,EAAGgJ,OACThJ,EAAGzO,MAAQ,EAEb,KAAK,EACH,OAAKguB,IACH85B,EAAOhyD,KAAK6M,MAAMklD,kBAAkB/xD,KAAKkL,WAGhC,CAAC,EAEN,CACAuC,MAAO,IAAI,KAAMzN,KAAKkL,SAASwC,WAAYskD,EAAK9jD,YAAalO,KAAKkL,SAASwC,WAAYskD,EAAK1gD,WAC5FsH,KAAMo5C,EAAKA,OAKV,CAAC,EAEN95B,SAMZwsF,EAAe/jH,UAAUokH,mBAAqB,SAAUC,EAASx2G,EAAGy2G,EAASppG,GAC3E,OAAO,GAAU7b,UAAM,OAAQ,EAAQ,WACrC,IAAIoc,EAAU/J,EACd,OAAO,GAAYrS,KAAM,SAAU2Y,GACjC,OAAQA,EAAGzO,OACT,KAAK,EAGH,OAFAkS,EAAWpc,KAAK2kH,WAAWn2G,IAWpB,CAAC,EAEN4N,EAAS2oG,mBAAmB/kH,KAAK6M,MAAO7M,KAAKkL,SAAU85G,EAASnpG,IAVzD,CAAC,EAEN,CACAkpD,MAAO,GACPmgD,aAAcD,EAAQ1kG,KAAK,QAQjC,KAAK,EAGH,OAFAlO,EAASsG,EAAGgJ,QAMDtP,EAAO6yG,aACT,CAAC,EAENllH,KAAK+kH,mBAAmBC,EAASx2G,EAAI,EAAGy2G,EAAQl9F,OAAO1V,EAAO6yG,cAAerpG,IAG1E,CAAC,EAENxJ,GAXO,CAAC,EAENrS,KAAK+kH,mBAAmBC,EAASx2G,EAAI,EAAGy2G,EAAQl9F,OAAOje,EAAA,EAAa,YAAa,eAAgB+R,UAexG6oG,EApGT,GAiHA,IAAI,GAEJ,SAAU36G,GAGR,SAASo7G,EAAiBv6G,EAAQqkB,EAAsBxI,EAAkBpI,EAAkBie,EAAoBi4B,GAC9G,IAAInzD,EAAQ2I,EAAOE,KAAKjK,OAASA,KAsBjC,OApBAoB,EAAMwJ,OAASA,EACfxJ,EAAM6tB,qBAAuBA,EAC7B7tB,EAAMqlB,iBAAmBA,EACzBrlB,EAAMid,iBAAmBA,EACzBjd,EAAMk7B,mBAAqBA,EAC3Bl7B,EAAMmzD,cAAgBA,EACtBnzD,EAAMgkH,uBAAyB,EAE/BhkH,EAAMsK,UAAUtK,EAAMwJ,OAAOwB,iBAAiB,WAC5C,OAAOhL,EAAMszB,oBAGftzB,EAAMsK,UAAUtK,EAAMwJ,OAAOoV,yBAAyB,WACpD,OAAO5e,EAAMszB,oBAGftzB,EAAMsK,UAAUtK,EAAMwJ,OAAOo0B,2BAA2B,WACtD,OAAO59B,EAAMszB,oBAGRtzB,EAiNT,OA1OA,GAAU+jH,EAAkBp7G,GA4B5Bo7G,EAAiBvkH,IAAM,SAAUgK,GAC/B,OAAOA,EAAO6B,gBAAgB04G,EAAiBz4G,KAGjDtM,OAAOM,eAAeykH,EAAiBxkH,UAAW,mBAAoB,CACpEC,IAAK,WAKH,OAJKZ,KAAKqlH,oBACRrlH,KAAKqlH,kBAAoBrlH,KAAK0L,UAAU,IAAI,GAAiB1L,KAAK4K,OAAQ5K,KAAKu0D,cAAev0D,KAAKs8B,sBAG9Ft8B,KAAKqlH,mBAEdvkH,YAAY,EACZC,cAAc,IAGhBokH,EAAiBxkH,UAAUgM,MAAQ,WACjC,OAAOw4G,EAAiBz4G,IAG1By4G,EAAiBxkH,UAAU+J,IAAM,WAC/B,OAAO,GAAU1K,UAAM,OAAQ,EAAQ,WACrC,IAAIgG,EAEA5E,EAAQpB,KAEZ,OAAO,GAAYA,KAAM,SAAU2Y,GAYjC,OAXI3Y,KAAKslH,eACPtlH,KAAKslH,cAAcC,UAAU9nG,SAG/BzX,EAAKhG,KAAKolH,yBACVplH,KAAKslH,cAAgB,CACnBt/G,GAAIA,EACJu/G,UAAW,YAAwB,SAAU1pG,GAC3C,OAAOza,EAAMokH,SAAS3pG,EAAO7V,MAG1B,CAAC,EAENhG,KAAKslH,cAAcC,gBAK3BJ,EAAiBxkH,UAAU6kH,SAAW,SAAU3pG,EAAO7V,GACrD,OAAO,GAAUhG,UAAM,OAAQ,EAAQ,WACrC,IAAIkL,EAAUu6G,EAAUC,EAAKC,EAA0BC,EAAK14G,EAAWk3G,EAAgBC,EAEnFjjH,EAAQpB,KAEZ,OAAO,GAAYA,KAAM,SAAU2Y,GACjC,OAAQA,EAAGzO,OACT,KAAK,EACH,IAAKlK,KAAK4K,OAAOgC,WACf,MAAO,CAAC,OAEN5K,GAMJ,GAHAkJ,EAAWlL,KAAK4K,OAAOkJ,gBACvB2xG,EAAW,IAAI,GAAezlH,KAAK4K,OAAOkC,WAAY5B,IAExC05G,cACZ,MAAO,CAAC,OAEN5iH,GAGJ2W,EAAGzO,MAAQ,EAEb,KAAK,EAOH,OANAyO,EAAGiJ,KAAKxT,KAAK,CAAC,EAAG,EAAE,CAAE,IAErBu3G,EAA2BF,EAASZ,sBAAsBhpG,GAE1D7b,KAAKqe,iBAAiBoB,UAAUkmG,EAA0B,KAEnD,CAAC,EAENA,GAEJ,KAAK,EAEH,OADAD,EAAM/sG,EAAGgJ,OACF,CAAC,EAEN,GAEJ,KAAK,EAGH,OAFAikG,EAAMjtG,EAAGgJ,OACT,GAAkB/gB,IAAIZ,KAAK4K,QAAQiN,YAAY+tG,GAAO97G,EAAA,EAAa,8BAA+B,6DAA8DoB,GACzJ,CAAC,OAENlJ,GAEJ,KAAK,EACH,OAAK0jH,EAMDA,EAAIR,cACN,GAAkBtkH,IAAIZ,KAAK4K,QAAQiN,YAAY6tG,EAAIR,aAAch6G,GAC1D,CAAC,OAENlJ,IAGChC,KAAKslH,eAAiBtlH,KAAKslH,cAAct/G,KAAOA,GAMrDkH,EAAYlN,KAAK4K,OAAOoL,eACxBouG,EAAiB,EACjBC,EAAeqB,EAAI9sG,KAAKrM,OAEnB,KAAM0C,QAAQ/B,IAAe,KAAM+1E,mBAAmB/1E,KAAc,KAAMk+B,cAAcs6E,EAAIj4G,MAAOP,KACtGk3G,EAAiB/iH,KAAKw5B,IAAI,EAAG3tB,EAAUgB,YAAcw3G,EAAIj4G,MAAMS,aAC/Dm2G,EAAehjH,KAAK8sE,IAAIu3C,EAAIj4G,MAAM6D,UAAWpE,EAAUoE,WAAao0G,EAAIj4G,MAAMS,aAGzE,CAAC,EAENlO,KAAK6lH,iBAAiBt+B,SAASm+B,EAAIj4G,MAAOi4G,EAAI9sG,KAAMwrG,EAAgBC,GAAc/gH,KAAK,SAAUwiH,GACjG,GAAkC,mBAAvBA,EAAX,CAQA1kH,EAAMwJ,OAAO4K,QAEb,IAAIiP,EAAQ,IAAI,KAAYrjB,EAAMwJ,OAAQ,IAStCm7G,EAAkBppG,QAAQC,QAAQ6oG,EAASV,mBAAmBe,EAAoB,EAAG,GAAIjqG,GAAOvY,KAAK,SAAU+O,GACjH,GAAKjR,EAAMwJ,OAAOgC,WAAlB,CAIA,IAAIyF,EAAO6yG,aAUX,OAAO9jH,EAAMqlB,iBAAiBnG,MAAMjO,EAAQ,CAC1CzH,OAAQxJ,EAAMwJ,SACbtH,KAAK,SAAU+O,GAEZA,EAAO2zG,aACT,aAAMl8G,EAAA,EAAa,OAAQ,oDAAqD47G,EAAI9sG,KAAMktG,EAAoBzzG,EAAO2zG,gBAdnHvhG,EAAMxgB,SAAS7C,EAAMwJ,QACvB,GAAkBhK,IAAIQ,EAAMwJ,QAAQiN,YAAYxF,EAAO6yG,aAAc9jH,EAAMwJ,OAAOkJ,eAElF1S,EAAM6tB,qBAAqBo9C,KAAKh6D,EAAO6yG,gBAc1C,SAAU7nG,GAGX,OAFAjc,EAAM6tB,qBAAqBwC,MAAM3nB,EAAA,EAAa,gBAAiB,8BAExD6S,QAAQmE,OAAOzD,MAKxB,OAFAjc,EAAMid,iBAAiBoB,UAAUsmG,EAAiB,KAE3CA,EAjDDD,GACF1kH,EAAMwJ,OAAO4K,YAnBV,CAAC,OAENxT,GAfK,CAAC,OAENA,SAqFdmjH,EAAiBxkH,UAAUslH,kBAAoB,WACzCjmH,KAAKqlH,mBACPrlH,KAAKqlH,kBAAkBnB,eAI3BiB,EAAiBxkH,UAAUulH,kBAAoB,WACzClmH,KAAKqlH,mBACPrlH,KAAKqlH,kBAAkBlB,aAAY,IAIvCgB,EAAiBxkH,UAAU+zB,eAAiB,WACtC10B,KAAKslH,gBACPtlH,KAAKslH,cAAcC,UAAU9nG,SAE7Bzd,KAAKslH,mBAAgBtjH,IAIzBmjH,EAAiBz4G,GAAK,kCACtBy4G,EAAmB,GAAW,CAAC,GAAQ,EAAG,MAAuB,GAAQ,EAAG,MAAmB,GAAQ,EAAG,MAAmB,GAAQ,EAAG,MAAqB,GAAQ,EAAG,MAAiBA,GA1O3L,CA4OE,KAGE,GAEJ,SAAUp7G,GAGR,SAASo8G,IACP,OAAOp8G,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,uBACJkE,MAAOJ,EAAA,EAAa,eAAgB,iBACpCK,MAAO,gBACPC,aAAc,KAAege,IAAI,IAAkBnV,SAAU,IAAkBmzG,mBAC/E/7G,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,GAGTC,OAAQ,KAIVmL,SAAU,CACRtF,MAAO,iBACPK,MAAO,QAEL3Q,KA0CR,OA/DA,GAAUmmH,EAAcp8G,GAwBxBo8G,EAAaxlH,UAAUsU,WAAa,SAAUtK,EAAUuK,GACtD,IAAI9T,EAAQpB,KAER2rF,EAAgBhhF,EAAS/J,IAAI,MAE7B+X,EAAKtP,MAAM2T,QAAQ9H,IAASA,GAAQ,MAAClT,OAAWA,GAChD8c,EAAMnG,EAAG,GACTuP,EAAMvP,EAAG,GAEb,OAAI,KAAI0tG,MAAMvnG,IAAQ,IAASoE,YAAYgF,GAClCyjE,EAAcrB,eAAe,CAClC3sE,SAAUmB,GACT6sE,EAAc26B,uBAAuBhjH,KAAK,SAAUsH,GAChDA,IAILA,EAAOuyB,YAAYjV,GACnBtd,EAAOinF,oBAAoB,SAAUlnF,GAGnC,OAFAvJ,EAAMshE,gBAAgB/3D,EAAUC,GAEzBxJ,EAAMsJ,IAAIC,EAAUC,OAE5B,MAGEb,EAAOpJ,UAAUsU,WAAWhL,KAAKjK,KAAM2K,EAAUuK,IAG1DixG,EAAaxlH,UAAU+J,IAAM,SAAUC,EAAUC,GAC/C,IAAIC,EAAa,GAAiBjK,IAAIgK,GAEtC,OAAIC,EACKA,EAAWH,MAGbiS,QAAQC,WAGVupG,EAhET,CAiEE,KAGF,YAA2B,IAC3B,YAAqB,IACrB,IAAII,GAAgB,IAAc/tG,mBAAmB,GAAiB5X,KACtE,YAAsB,IAAI2lH,GAAc,CACtCvgH,GAAI,oBACJoE,aAAcq5G,GACdhrG,QAAS,SAAiB2K,GACxB,OAAOA,EAAE6iG,qBAEX57G,OAAQ,CACNI,OAAQ,IAGRH,OAAQ,IAAkBkL,MAC1BhL,QAAS,MAKb,YAAsB,IAAI+7G,GAAc,CACtCvgH,GAAI,oBACJoE,aAAcq5G,GACdhrG,QAAS,SAAiB2K,GACxB,OAAOA,EAAE8iG,qBAEX77G,OAAQ,CACNI,OAAQ,IAGRH,OAAQ,IAAkBkL,MAC1BhL,QAAS,EAGTmL,UAAW,CAAC,UAQhB,YAA+B,iCAAkC,SAAU9I,EAAO3B,EAAUgK,GAC1F,IAAI8vG,EAAU9vG,EAAK8vG,QAEnB,GAAuB,kBAAZA,EACT,MAAM,aAAgB,WAGxB,OAjXK,SAAgBn4G,EAAO3B,EAAU85G,GACtC,OAAO,GAAUhlH,UAAM,OAAQ,EAAQ,WACrC,OAAO,GAAYA,KAAM,SAAU2Y,GACjC,MAAO,CAAC,EAEN,IAAI,GAAe9L,EAAO3B,GAAU65G,mBAAmBC,EAAS,EAAG,GAAI,KAAkBlnG,WA4WxF0oG,CAAO35G,EAAO3B,EAAU85G,KClqBjC,IAAI,GAEJ,WACE,SAASyB,KAyGT,OAvGAA,EAA2B9lH,UAAU+lH,uBAAyB,SAAU75G,EAAOkC,GAG7E,IAFA,IAAIsD,EAAS,GAEJO,EAAK,EAAG+zG,EAAc53G,EAAW6D,EAAK+zG,EAAYp6G,OAAQqG,IAAM,CACvE,IAAI1H,EAAWy7G,EAAY/zG,GACvBg0G,EAAS,GACbv0G,EAAOjE,KAAKw4G,GAEZ5mH,KAAK6mH,iBAAiBD,EAAQ/5G,EAAO3B,GAErClL,KAAK8mH,eAAeF,EAAQ/5G,EAAO3B,GAEnClL,KAAK+mH,mBAAmBH,EAAQ/5G,EAAO3B,GAEvC07G,EAAOx4G,KAAK,CACVX,MAAOZ,EAAMk9B,oBACbtuB,KAAM,kBAIV,OAAOpJ,GAGTo0G,EAA2B9lH,UAAUkmH,iBAAmB,SAAUD,EAAQ/5G,EAAOqb,GAC/E,IAAIwK,EAAM7lB,EAAMklD,kBAAkB7pC,GAElC,GAAKwK,EAAL,CAWA,IAPA,IAAIs/B,EAAOt/B,EAAIs/B,KACX9jD,EAAcwkB,EAAIxkB,YAClB8oB,EAAS9O,EAAIva,OAASO,EACtBqF,EAAQyjB,EACR2sB,EAAM3sB,EACNgwF,EAAS,EAENzzG,GAAS,EAAGA,IAAS,CAG1B,GAAW,MAFP8lC,EAAK2Y,EAAKv+C,WAAWF,KAIf,KAAP8lC,EAIC,MACK,GAAI,aAAmBA,IAAO,aAAmB2tE,GAExD,MAGFA,EAAS3tE,EAKX,IAFA9lC,GAAS,EAEFowC,EAAMqO,EAAKzlD,OAAQo3C,IAAO,CAC/B,IAAItK,EAAK2Y,EAAKv+C,WAAWkwC,GAEzB,GAAI,aAAmBtK,IAAO,aAAmB2tE,GAE/C,MACK,GAAW,KAAP3tE,GAED,KAAPA,EAIC,MAGJ2tE,EAAS3tE,EAGP9lC,EAAQowC,GACVijE,EAAOx4G,KAAK,CACVX,MAAO,IAAI,KAAMya,EAAIxa,WAAYQ,EAAcqF,EAAO2U,EAAIxa,WAAYQ,EAAcy1C,GACpFloC,KAAM,0BAKZgrG,EAA2B9lH,UAAUmmH,eAAiB,SAAUF,EAAQ/5G,EAAOqb,GAC7E,IAAI8pC,EAAOnlD,EAAMklD,kBAAkB7pC,GAE/B8pC,GACF40D,EAAOx4G,KAAK,CACVX,MAAO,IAAI,KAAMya,EAAIxa,WAAYskD,EAAK9jD,YAAaga,EAAIxa,WAAYskD,EAAK1gD,WACxEmK,KAAM,oBAKZgrG,EAA2B9lH,UAAUomH,mBAAqB,SAAUH,EAAQ/5G,EAAOqb,GAC7Erb,EAAMwyD,cAAcn3C,EAAIxa,YAAc,GAA+D,IAA1Db,EAAMqJ,gCAAgCgS,EAAIxa,aAA8E,IAAzDb,EAAMo6G,+BAA+B/+F,EAAIxa,aACrJk5G,EAAOx4G,KAAK,CACVX,MAAO,IAAI,KAAMya,EAAIxa,WAAY,EAAGwa,EAAIxa,WAAYb,EAAM0E,iBAAiB2W,EAAIxa,aAC/E+N,KAAM,oBAKLgrG,EA1GT,GCLI,GAAsC,SAAU/lG,EAASC,EAAYC,EAAGC,GAC1E,OAAO,IAAKD,IAAMA,EAAIjE,UAAU,SAAUC,EAASkE,GACjD,SAASC,EAAUxe,GACjB,IACEye,EAAKH,EAAUI,KAAK1e,IACpB,MAAO2J,GACP4U,EAAO5U,IAIX,SAASgV,EAAS3e,GAChB,IACEye,EAAKH,EAAiB,MAAEte,IACxB,MAAO2J,GACP4U,EAAO5U,IAIX,SAAS8U,EAAK3O,GACZA,EAAO8O,KAAOvE,EAAQvK,EAAO9P,OAAS,IAAIqe,EAAE,SAAUhE,GACpDA,EAAQvK,EAAO9P,SACde,KAAKyd,EAAWG,GAGrBF,GAAMH,EAAYA,EAAUP,MAAMI,EAASC,GAAc,KAAKM,WAI9D,GAA0C,SAAUP,EAASW,GAC/D,IASIC,EACAC,EACAC,EACAC,EAZAC,EAAI,CACNxX,MAAO,EACPyX,KAAM,WACJ,GAAW,EAAPH,EAAE,GAAQ,MAAMA,EAAE,GACtB,OAAOA,EAAE,IAEXI,KAAM,GACNC,IAAK,IAMP,OAAOJ,EAAI,CACTR,KAAMa,EAAK,GACX,MAASA,EAAK,GACd,OAAUA,EAAK,IACI,oBAAXC,SAA0BN,EAAEM,OAAOC,UAAY,WACvD,OAAOhiB,OACLyhB,EAEJ,SAASK,EAAKG,GACZ,OAAO,SAAUC,GACf,OAIJ,SAAcC,GACZ,GAAIb,EAAG,MAAM,IAAIc,UAAU,mCAE3B,KAAOV,GACL,IACE,GAAIJ,EAAI,EAAGC,IAAMC,EAAY,EAARW,EAAG,GAASZ,EAAU,OAAIY,EAAG,GAAKZ,EAAS,SAAOC,EAAID,EAAU,SAAMC,EAAEvX,KAAKsX,GAAI,GAAKA,EAAEN,SAAWO,EAAIA,EAAEvX,KAAKsX,EAAGY,EAAG,KAAKhB,KAAM,OAAOK,EAG3J,OAFID,EAAI,EAAGC,IAAGW,EAAK,CAAS,EAARA,EAAG,GAAQX,EAAEjf,QAEzB4f,EAAG,IACT,KAAK,EACL,KAAK,EACHX,EAAIW,EACJ,MAEF,KAAK,EAEH,OADAT,EAAExX,QACK,CACL3H,MAAO4f,EAAG,GACVhB,MAAM,GAGV,KAAK,EACHO,EAAExX,QACFqX,EAAIY,EAAG,GACPA,EAAK,CAAC,GACN,SAEF,KAAK,EACHA,EAAKT,EAAEG,IAAIQ,MAEXX,EAAEE,KAAKS,MAEP,SAEF,QACE,KAAkBb,GAAZA,EAAIE,EAAEE,MAAYrV,OAAS,GAAKiV,EAAEA,EAAEjV,OAAS,MAAkB,IAAV4V,EAAG,IAAsB,IAAVA,EAAG,IAAW,CACtFT,EAAI,EACJ,SAGF,GAAc,IAAVS,EAAG,MAAcX,GAAKW,EAAG,GAAKX,EAAE,IAAMW,EAAG,GAAKX,EAAE,IAAK,CACvDE,EAAExX,MAAQiY,EAAG,GACb,MAGF,GAAc,IAAVA,EAAG,IAAYT,EAAExX,MAAQsX,EAAE,GAAI,CACjCE,EAAExX,MAAQsX,EAAE,GACZA,EAAIW,EACJ,MAGF,GAAIX,GAAKE,EAAExX,MAAQsX,EAAE,GAAI,CACvBE,EAAExX,MAAQsX,EAAE,GAEZE,EAAEG,IAAIzT,KAAK+T,GAEX,MAGEX,EAAE,IAAIE,EAAEG,IAAIQ,MAEhBX,EAAEE,KAAKS,MAEP,SAGJF,EAAKd,EAAKpX,KAAKyW,EAASgB,GACxB,MAAOxV,GACPiW,EAAK,CAAC,EAAGjW,GACTqV,EAAI,EACJ,QACAD,EAAIE,EAAI,EAIZ,GAAY,EAARW,EAAG,GAAQ,MAAMA,EAAG,GACxB,MAAO,CACL5f,MAAO4f,EAAG,GAAKA,EAAG,QAAK,EACvBhB,MAAM,GAlFCH,CAAK,CAACiB,EAAGC,OA2FlB,GAEJ,WACE,SAASglG,KA8PT,OA5PAA,EAA8BvmH,UAAU+lH,uBAAyB,SAAU75G,EAAOkC,GAChF,OAAO,GAAU/O,UAAM,OAAQ,EAAQ,WACrC,IAAIqS,EAAQiY,EAAS1X,EAAI+zG,EAAaz7G,EAEtC,OAAO,GAAYlL,KAAM,SAAU2Y,GACjC,OAAQA,EAAGzO,OACT,KAAK,EACHmI,EAAS,GAETiY,EAAU,SAAiBpf,GACzB,IAAI07G,EAAQ9hF,EACZ,OAAO,GAAY9kC,KAAM,SAAU2Y,GACjC,OAAQA,EAAGzO,OACT,KAAK,EAIH,OAHA08G,EAAS,GACTv0G,EAAOjE,KAAKw4G,GACZ9hF,EAAS,IAAIvZ,IACN,CAAC,EAEN,IAAI5O,QAAQ,SAAUC,GACtB,OAAOsqG,EAA8BC,oBAAoBvqG,EAAS,EAAG/P,EAAO3B,EAAU45B,MAG1F,KAAK,EAGH,OAFAnsB,EAAGgJ,OAEI,CAAC,EAEN,IAAIhF,QAAQ,SAAUC,GACtB,OAAOsqG,EAA8BE,mBAAmBxqG,EAAS,EAAG/P,EAAO3B,EAAU45B,EAAQ8hF,MAGjG,KAAK,EAGH,OAFAjuG,EAAGgJ,OAEI,CAAC,OAOhB/O,EAAK,EAAG+zG,EAAc53G,EACtB4J,EAAGzO,MAAQ,EAEb,KAAK,EACH,OAAM0I,EAAK+zG,EAAYp6G,QAGvBrB,EAAWy7G,EAAY/zG,GAChB,CAAC,EAEN0X,EAAQpf,KAN6B,CAAC,EAEtC,GAMJ,KAAK,EACHyN,EAAGgJ,OAEHhJ,EAAGzO,MAAQ,EAEb,KAAK,EAEH,OADA0I,IACO,CAAC,EAEN,GAEJ,KAAK,EACH,MAAO,CAAC,EAENP,SAMZ60G,EAA8BC,oBAAsB,SAAUvqG,EAASkP,EAAOjf,EAAOqb,EAAK4c,GAIxF,IAHA,IAAIuiF,EAAS,IAAI97F,IACb+7F,EAAKC,KAAKC,QAED,CACX,GAAI17F,GAASo7F,EAA8BO,WAAY,CACrD7qG,IACA,MAGF,IAAKsL,EAAK,CACRtL,IACA,MAGF,IAAI8qG,EAAU76G,EAAMW,gBAAgB0a,GAEpC,IAAKw/F,EAAS,CACZ9qG,IACA,MAKF,GAFQ2qG,KAAKC,MAAQF,EAEbJ,EAA8BS,aAAc,CAClD7lH,WAAW,WACT,OAAOolH,EAA8BC,oBAAoBvqG,EAASkP,EAAQ,EAAGjf,EAAOqb,EAAK4c,KAE3F,MAGF,IAAIr0B,EAAMi3G,EAAQE,MAElB,GAAIF,EAAQl2B,OAAQ,CAElB,IAAIr+D,EAAMk0F,EAAOlnG,IAAI1P,GAAO42G,EAAOzmH,IAAI6P,GAAO,EAC9C42G,EAAOrvG,IAAIvH,EAAK0iB,EAAM,OACjB,CAEDA,EAAMk0F,EAAOlnG,IAAI1P,GAAO42G,EAAOzmH,IAAI6P,GAAO,EAI9C,GAHA0iB,GAAO,EACPk0F,EAAOrvG,IAAIvH,EAAKpP,KAAKw5B,IAAI,EAAG1H,IAExBA,EAAM,EAAG,CACX,IAAI0hB,EAAO/P,EAAOlkC,IAAI6P,GAEjBokC,IACHA,EAAO,IAAI,KACX/P,EAAO9sB,IAAIvH,EAAKokC,IAGlBA,EAAKzmC,KAAKs5G,EAAQj6G,QAItBya,EAAMw/F,EAAQj6G,MAAMU,mBAIxB+4G,EAA8BE,mBAAqB,SAAUxqG,EAASkP,EAAOjf,EAAOqb,EAAK4c,EAAQ8hF,GAI/F,IAHA,IAAIS,EAAS,IAAI97F,IACb+7F,EAAKC,KAAKC,QAED,CACX,GAAI17F,GAASo7F,EAA8BO,YAA8B,IAAhB3iF,EAAOw2C,KAAY,CAC1E1+D,IACA,MAGF,IAAKsL,EAAK,CACRtL,IACA,MAGF,IAAI8qG,EAAU76G,EAAMg7G,gBAAgB3/F,GAEpC,IAAKw/F,EAAS,CACZ9qG,IACA,MAKF,GAFQ2qG,KAAKC,MAAQF,EAEbJ,EAA8BS,aAAc,CAClD7lH,WAAW,WACT,OAAOolH,EAA8BE,mBAAmBxqG,EAASkP,EAAQ,EAAGjf,EAAOqb,EAAK4c,EAAQ8hF,KAElG,MAGF,IAAIn2G,EAAMi3G,EAAQE,MAElB,GAAKF,EAAQl2B,OAIN,CAEDr+D,EAAMk0F,EAAOlnG,IAAI1P,GAAO42G,EAAOzmH,IAAI6P,GAAO,EAI9C,GAHA0iB,GAAO,EACPk0F,EAAOrvG,IAAIvH,EAAKpP,KAAKw5B,IAAI,EAAG1H,IAExBA,EAAM,EAAG,CACX,IAAI0hB,EAAO/P,EAAOlkC,IAAI6P,GAEtB,GAAIokC,EAAM,CACR,IAAIizE,EAAUjzE,EAAK5V,QAED,IAAd4V,EAAKymC,MACPx2C,EAAOnT,OAAOlhB,GAGhB,IAAIs3G,EAAe,KAAM5zG,cAAcuzG,EAAQj6G,MAAMU,iBAAkB25G,EAAQ36G,oBAC3E66G,EAAe,KAAM7zG,cAAcuzG,EAAQj6G,MAAMN,mBAAoB26G,EAAQ35G,kBACjFy4G,EAAOx4G,KAAK,CACVX,MAAOs6G,EACPtsG,KAAM,uBAERmrG,EAAOx4G,KAAK,CACVX,MAAOu6G,EACPvsG,KAAM,4BAGRyrG,EAA8Be,mBAAmBp7G,EAAOm7G,EAAcpB,SA/BvD,CAEnB,IAAIzzF,EAAMk0F,EAAOlnG,IAAI1P,GAAO42G,EAAOzmH,IAAI6P,GAAO,EAC9C42G,EAAOrvG,IAAIvH,EAAK0iB,EAAM,GAiCxBjL,EAAMw/F,EAAQj6G,MAAMN,qBAIxB+5G,EAA8Be,mBAAqB,SAAUp7G,EAAO66G,EAASd,GAC3E,GAAIc,EAAQz5G,kBAAoBy5G,EAAQr2G,cAAxC,CAOA,IAAI62G,EAAYR,EAAQz5G,gBACpBN,EAASd,EAAMqJ,gCAAgCgyG,GAEpC,IAAXv6G,GAAgBA,IAAW+5G,EAAQx5G,cACrC04G,EAAOx4G,KAAK,CACVX,MAAO,KAAM0G,cAAc,IAAI,IAAS+zG,EAAWv6G,GAAS+5G,EAAQv5G,kBACpEsN,KAAM,+BAERmrG,EAAOx4G,KAAK,CACVX,MAAO,KAAM0G,cAAc,IAAI,IAAS+zG,EAAW,GAAIR,EAAQv5G,kBAC/DsN,KAAM,qCAQV,IAAI0sG,EAAYD,EAAY,EAE5B,GAAIC,EAAY,EAAG,CACjB,IAAIC,EAAWv7G,EAAMqJ,gCAAgCiyG,GAEjDC,IAAaV,EAAQx5G,aAAek6G,IAAav7G,EAAMo6G,+BAA+BkB,KACxFvB,EAAOx4G,KAAK,CACVX,MAAO,KAAM0G,cAAc,IAAI,IAASg0G,EAAWC,GAAWV,EAAQv5G,kBACtEsN,KAAM,+BAERmrG,EAAOx4G,KAAK,CACVX,MAAO,KAAM0G,cAAc,IAAI,IAASg0G,EAAW,GAAIT,EAAQv5G,kBAC/DsN,KAAM,wCAMdyrG,EAA8BS,aAAe,GAC7CT,EAA8BO,WAAa,EACpCP,EA/PT,GCjJI,GAAsC,WACxC,IAAIl+G,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA0BtC,GAAsC,SAAUkX,EAASC,EAAYC,EAAGC,GAC1E,OAAO,IAAKD,IAAMA,EAAIjE,UAAU,SAAUC,EAASkE,GACjD,SAASC,EAAUxe,GACjB,IACEye,EAAKH,EAAUI,KAAK1e,IACpB,MAAO2J,GACP4U,EAAO5U,IAIX,SAASgV,EAAS3e,GAChB,IACEye,EAAKH,EAAiB,MAAEte,IACxB,MAAO2J,GACP4U,EAAO5U,IAIX,SAAS8U,EAAK3O,GACZA,EAAO8O,KAAOvE,EAAQvK,EAAO9P,OAAS,IAAIqe,EAAE,SAAUhE,GACpDA,EAAQvK,EAAO9P,SACde,KAAKyd,EAAWG,GAGrBF,GAAMH,EAAYA,EAAUP,MAAMI,EAASC,GAAc,KAAKM,WAI9D,GAA0C,SAAUP,EAASW,GAC/D,IASIC,EACAC,EACAC,EACAC,EAZAC,EAAI,CACNxX,MAAO,EACPyX,KAAM,WACJ,GAAW,EAAPH,EAAE,GAAQ,MAAMA,EAAE,GACtB,OAAOA,EAAE,IAEXI,KAAM,GACNC,IAAK,IAMP,OAAOJ,EAAI,CACTR,KAAMa,EAAK,GACX,MAASA,EAAK,GACd,OAAUA,EAAK,IACI,oBAAXC,SAA0BN,EAAEM,OAAOC,UAAY,WACvD,OAAOhiB,OACLyhB,EAEJ,SAASK,EAAKG,GACZ,OAAO,SAAUC,GACf,OAIJ,SAAcC,GACZ,GAAIb,EAAG,MAAM,IAAIc,UAAU,mCAE3B,KAAOV,GACL,IACE,GAAIJ,EAAI,EAAGC,IAAMC,EAAY,EAARW,EAAG,GAASZ,EAAU,OAAIY,EAAG,GAAKZ,EAAS,SAAOC,EAAID,EAAU,SAAMC,EAAEvX,KAAKsX,GAAI,GAAKA,EAAEN,SAAWO,EAAIA,EAAEvX,KAAKsX,EAAGY,EAAG,KAAKhB,KAAM,OAAOK,EAG3J,OAFID,EAAI,EAAGC,IAAGW,EAAK,CAAS,EAARA,EAAG,GAAQX,EAAEjf,QAEzB4f,EAAG,IACT,KAAK,EACL,KAAK,EACHX,EAAIW,EACJ,MAEF,KAAK,EAEH,OADAT,EAAExX,QACK,CACL3H,MAAO4f,EAAG,GACVhB,MAAM,GAGV,KAAK,EACHO,EAAExX,QACFqX,EAAIY,EAAG,GACPA,EAAK,CAAC,GACN,SAEF,KAAK,EACHA,EAAKT,EAAEG,IAAIQ,MAEXX,EAAEE,KAAKS,MAEP,SAEF,QACE,KAAkBb,GAAZA,EAAIE,EAAEE,MAAYrV,OAAS,GAAKiV,EAAEA,EAAEjV,OAAS,MAAkB,IAAV4V,EAAG,IAAsB,IAAVA,EAAG,IAAW,CACtFT,EAAI,EACJ,SAGF,GAAc,IAAVS,EAAG,MAAcX,GAAKW,EAAG,GAAKX,EAAE,IAAMW,EAAG,GAAKX,EAAE,IAAK,CACvDE,EAAExX,MAAQiY,EAAG,GACb,MAGF,GAAc,IAAVA,EAAG,IAAYT,EAAExX,MAAQsX,EAAE,GAAI,CACjCE,EAAExX,MAAQsX,EAAE,GACZA,EAAIW,EACJ,MAGF,GAAIX,GAAKE,EAAExX,MAAQsX,EAAE,GAAI,CACvBE,EAAExX,MAAQsX,EAAE,GAEZE,EAAEG,IAAIzT,KAAK+T,GAEX,MAGEX,EAAE,IAAIE,EAAEG,IAAIQ,MAEhBX,EAAEE,KAAKS,MAEP,SAGJF,EAAKd,EAAKpX,KAAKyW,EAASgB,GACxB,MAAOxV,GACPiW,EAAK,CAAC,EAAGjW,GACTqV,EAAI,EACJ,QACAD,EAAIE,EAAI,EAIZ,GAAY,EAARW,EAAG,GAAQ,MAAMA,EAAG,GACxB,MAAO,CACL5f,MAAO4f,EAAG,GAAKA,EAAG,QAAK,EACvBhB,MAAM,GAlFCH,CAAK,CAACiB,EAAGC,OAsGlBmmG,GAEJ,WACE,SAASA,EAAgB7lF,EAAOsC,GAC9B9kC,KAAKwiC,MAAQA,EACbxiC,KAAK8kC,OAASA,EAoBhB,OAjBAujF,EAAgB1nH,UAAU2nH,IAAM,SAAUn+B,GACxC,IAAI3nD,EAAQxiC,KAAKwiC,OAAS2nD,EAAM,GAAK,GAErC,GAAI3nD,EAAQ,GAAKA,GAASxiC,KAAK8kC,OAAOv4B,OACpC,OAAOvM,KAGT,IAAIk4B,EAAM,IAAImwF,EAAgB7lF,EAAOxiC,KAAK8kC,QAE1C,OAAI5M,EAAI4M,OAAOtC,GAAOW,YAAYnjC,KAAK8kC,OAAO9kC,KAAKwiC,QAE1CtK,EAAIowF,IAAIn+B,GAGVjyD,GAGFmwF,EAvBT,GA0BI,GAEJ,WACE,SAASE,EAAsB39G,GAC7B5K,KAAKwoH,kBAAmB,EACxBxoH,KAAKqL,QAAUT,EAoGjB,OAjGA29G,EAAsB3nH,IAAM,SAAUgK,GACpC,OAAOA,EAAO6B,gBAAgB87G,EAAsB5wG,MAGtD4wG,EAAsB5nH,UAAUc,QAAU,WACxC,YAAQzB,KAAKyoH,qBAGfF,EAAsB5nH,UAAUgM,MAAQ,WACtC,OAAO47G,EAAsB5wG,KAG/B4wG,EAAsB5nH,UAAU+J,IAAM,SAAUg+G,GAC9C,IAAItnH,EAAQpB,KAEZ,GAAKA,KAAKqL,QAAQuB,WAAlB,CAIA,IAAIkC,EAAa9O,KAAKqL,QAAQ2B,gBAE1BH,EAAQ7M,KAAKqL,QAAQyB,WAEzB,GAAKixG,GAAA,EAA6B59F,IAAItT,GAAtC,CAIA,IAAIq6E,EAAUvqE,QAAQC,aAAQ5a,GA6C9B,OA3CKhC,KAAK4f,SACRsnE,EAAUw/B,GAAuB75G,EAAOiC,EAAW7B,IAAI,SAAUiE,GAC/D,OAAOA,EAAE4C,gBACP,KAAkBgK,MAAMxa,KAAK,SAAUwhC,GACzC,GAAK6jF,GAAA,EAAuB7jF,IAAWA,EAAOv4B,SAAWuC,EAAWvC,QAK/DnL,EAAMiK,QAAQuB,YAAe+7G,GAAA,EAAcvnH,EAAMiK,QAAQ2B,gBAAiB8B,EAAY,SAAUsM,EAAGlS,GACtG,OAAOkS,EAAEsjB,gBAAgBx1B,KAD3B,CAgBA,IATA,IAAIohB,EAAU,SAAiB9b,GAC7Bs2B,EAAOt2B,GAAKs2B,EAAOt2B,GAAGsN,OAAO,SAAUrO,GAErC,OAAOA,EAAMH,iBAAiBwB,EAAWN,GAAGrB,qBAAuBM,EAAMH,iBAAiBwB,EAAWN,GAAGL,oBAG1G22B,EAAOt2B,GAAGslG,QAAQhlG,EAAWN,KAGtBA,EAAI,EAAGA,EAAIs2B,EAAOv4B,OAAQiC,IACjC8b,EAAQ9b,GAGVpN,EAAMwe,OAASklB,EAAO73B,IAAI,SAAU63B,GAClC,OAAO,IAAIujF,GAAgB,EAAGvjF,KAGhC,YAAQ1jC,EAAMqnH,oBACdrnH,EAAMqnH,mBAAqBrnH,EAAMiK,QAAQY,0BAA0B,WAC5D7K,EAAMonH,mBACT,YAAQpnH,EAAMqnH,oBACdrnH,EAAMwe,YAAS5d,SAMhBklF,EAAQ5jF,KAAK,WAClB,GAAKlC,EAAMwe,OAAX,CAKAxe,EAAMwe,OAASxe,EAAMwe,OAAO3S,IAAI,SAAUwX,GACxC,OAAOA,EAAM6jG,IAAII,KAGnB,IAAI55G,EAAa1N,EAAMwe,OAAO3S,IAAI,SAAUwX,GAC1C,OAAO,IAAUtQ,cAAcsQ,EAAMqgB,OAAOrgB,EAAM+d,OAAOr1B,mBAAoBsX,EAAMqgB,OAAOrgB,EAAM+d,OAAOr0B,oBAGzG/M,EAAMonH,kBAAmB,EAEzB,IACEpnH,EAAMiK,QAAQuC,cAAckB,GAC5B,QACA1N,EAAMonH,kBAAmB,SAK/BD,EAAsB5wG,IAAM,uCACrB4wG,EAvGT,GA0GIK,GAEJ,SAAU7+G,GAGR,SAAS6+G,EAAoBF,EAASh2G,GACpC,IAAItR,EAAQ2I,EAAOE,KAAKjK,KAAM0S,IAAS1S,KAGvC,OADAoB,EAAMynH,SAAWH,EACVtnH,EA+BT,OArCA,GAAUwnH,EAAqB7+G,GAS/B6+G,EAAoBjoH,UAAU+J,IAAM,SAAU4d,EAAW1d,GACvD,OAAO,GAAU5K,UAAM,OAAQ,EAAQ,WACrC,IAAI6K,EACJ,OAAO,GAAY7K,KAAM,SAAU2Y,GACjC,OAAQA,EAAGzO,OACT,KAAK,EAEH,OADAW,EAAa,GAAsBjK,IAAIgK,IAIhC,CAAC,EAENC,EAAWH,IAAI1K,KAAK6oH,WALE,CAAC,EAEvB,GAKJ,KAAK,EACHlwG,EAAGgJ,OAEHhJ,EAAGzO,MAAQ,EAEb,KAAK,EACH,MAAO,CAAC,SAQX0+G,EAtCT,CAuCE,KAEE,GAEJ,SAAU7+G,GAGR,SAAS++G,IACP,OAAO/+G,EAAOE,KAAKjK,MAAM,EAAM,CAC7BgG,GAAI,mCACJkE,MAAOJ,EAAA,EAAa,qBAAsB,oBAC1CK,MAAO,mBACPC,aAAc,KACdC,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,KAOT6I,IAAK,CACH7I,QAAS,MAUXC,OAAQ,KAIVoL,YAAa,CACXC,OAAQ,GAGRxF,MAAO,UACPE,MAAO1G,EAAA,EAAa,CAClB2G,IAAK,oBACLC,QAAS,CAAC,0BACT,sBACHC,MAAO,MAEL3Q,KAGR,OA9CA,GAAU8oH,EAAqB/+G,GA8CxB++G,EA/CT,CAgDEF,IAGF,KAAiB57B,qBAAqB,iCAAkC,oCAExE,IAAI,GAEJ,SAAUjjF,GAGR,SAASg/G,IACP,OAAOh/G,EAAOE,KAAKjK,MAAM,EAAO,CAC9BgG,GAAI,mCACJkE,MAAOJ,EAAA,EAAa,qBAAsB,oBAC1CK,MAAO,mBACPC,aAAc,KACdC,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,KAOT6I,IAAK,CACH7I,QAAS,MAUXC,OAAQ,KAIVoL,YAAa,CACXC,OAAQ,GAGRxF,MAAO,UACPE,MAAO1G,EAAA,EAAa,CAClB2G,IAAK,sBACLC,QAAS,CAAC,0BACT,sBACHC,MAAO,MAEL3Q,KAGR,OA9CA,GAAU+oH,EAAuBh/G,GA8C1Bg/G,EA/CT,CAgDEH,IAOK,SAASlC,GAAuB75G,EAAOkC,EAAW8M,GACvD,IAAIK,EAAY6hG,GAAA,EAA6B5hG,IAAItP,GAExB,IAArBqP,EAAU3P,QAEZ2P,EAAU43F,QAAQ,IAAI,IAMxB,IAHA,IAAIkV,EAAO,GACPC,EAAe,GAEVr2G,EAAK,EAAGw1D,EAAclsD,EAAWtJ,EAAKw1D,EAAY77D,OAAQqG,IAAM,CACvE,IAAIwJ,EAAWgsD,EAAYx1D,GAC3Bo2G,EAAK56G,KAAKuO,QAAQC,QAAQR,EAASsqG,uBAAuB75G,EAAOkC,EAAW8M,IAAQvY,KAAK,SAAU4lH,GACjG,GAAIP,GAAA,EAAuBO,IAAsBA,EAAkB38G,SAAWwC,EAAUxC,OACtF,IAAK,IAAIiC,EAAI,EAAGA,EAAIO,EAAUxC,OAAQiC,IAAK,CACpCy6G,EAAaz6G,KAChBy6G,EAAaz6G,GAAK,IAGpB,IAAK,IAAIoE,EAAK,EAAG+F,EAAKuwG,EAAkB16G,GAAIoE,EAAK+F,EAAGpM,OAAQqG,IAAM,CAChE,IAAIu2G,EAAoBxwG,EAAG/F,GAEvB,KAAMgL,SAASurG,EAAkB17G,QAAU,KAAMH,iBAAiB67G,EAAkB17G,MAAOsB,EAAUP,KACvGy6G,EAAaz6G,GAAGJ,KAAK,KAAMgR,KAAK+pG,EAAkB17G,WAKzD,OAGL,OAAOkP,QAAQR,IAAI6sG,GAAM1lH,KAAK,WAC5B,OAAO2lH,EAAah8G,IAAI,SAAUm8G,GAChC,GAA4B,IAAxBA,EAAa78G,OACf,MAAO,GAIT68G,EAAal6G,KAAK,SAAUkM,EAAGlS,GAC7B,OAAI,IAASsG,SAAS4L,EAAEjO,mBAAoBjE,EAAEiE,oBACrC,EACE,IAASqC,SAAStG,EAAEiE,mBAAoBiO,EAAEjO,qBAC3C,EACC,IAASqC,SAAS4L,EAAEjN,iBAAkBjF,EAAEiF,mBACzC,EACC,IAASqB,SAAStG,EAAEiF,iBAAkBiN,EAAEjN,kBAC1C,EAEA,IAQX,IAHA,IACImyC,EADA+oE,EAAY,GAGPz2G,EAAK,EAAG02G,EAAiBF,EAAcx2G,EAAK02G,EAAe/8G,OAAQqG,IAAM,CAChF,IAAInF,EAAQ67G,EAAe12G,KAEtB0tC,GAAQ,KAAMlV,cAAc39B,EAAO6yC,KAAU,KAAMnd,YAAY11B,EAAO6yC,MACzE+oE,EAAUj7G,KAAKX,GACf6yC,EAAO7yC,GAQX,IAFA,IAAI87G,EAAsB,CAACF,EAAU,IAE5B76G,EAAI,EAAGA,EAAI66G,EAAU98G,OAAQiC,IAAK,CACzC,IAAIg7G,EAAOH,EAAU76G,EAAI,GACrBi7G,EAAMJ,EAAU76G,GAEpB,GAAIi7G,EAAIx7G,kBAAoBu7G,EAAKv7G,iBAAmBw7G,EAAIp4G,gBAAkBm4G,EAAKn4G,cAAe,CAE5F,IAAIq4G,EAAoB,IAAI,KAAMF,EAAKv7G,gBAAiBpB,EAAMqJ,gCAAgCszG,EAAKv7G,iBAAkBu7G,EAAKn4G,cAAexE,EAAMo6G,+BAA+BuC,EAAKn4G,gBAE/Kq4G,EAAkBt+E,cAAco+E,KAAUE,EAAkBvmF,YAAYqmF,IAC1ED,EAAoBn7G,KAAKs7G,GAI3B,IAAIC,EAAY,IAAI,KAAMH,EAAKv7G,gBAAiB,EAAGu7G,EAAKn4G,cAAexE,EAAM0E,iBAAiBi4G,EAAKn4G,gBAE/Fs4G,EAAUv+E,cAAco+E,KAAUG,EAAUxmF,YAAYumF,IAC1DH,EAAoBn7G,KAAKu7G,GAI7BJ,EAAoBn7G,KAAKq7G,GAG3B,OAAOF,MAlGb,YAA2B,IAC3B,YAAqB,IACrB,YAAqB,IAErBxL,GAAA,EAA6Bh4G,SAAS,IAAK,IAAI,IAkG/C,YAA+B,iCAAkC,SAAU8G,EAAOmM,EAAW9D,GAC3F,OAAOwxG,GAAuB75G,EAAOqI,EAAKnG,UAAW,KAAkB+O,QChjBlE,IA6FH8rG,GA7FO,GAAU,CACnBjM,QAAS,IAAI,KAAc,wBAAwB,GACnDkM,oBAAqB,IAAI,KAAc,oCAAoC,GAC3EC,cAAe,IAAI,KAAc,2BAA2B,GAC5DC,yBAA0B,IAAI,KAAc,2BAA2B,IAGrE,GAEJ,WAkDE,OAjDA,SAAwB7+G,EAAU8+G,EAAYzoE,EAAWnlC,EAAUvP,GACjE7M,KAAKkL,SAAWA,EAChBlL,KAAKgqH,WAAaA,EAClBhqH,KAAKuhD,UAAYA,EACjBvhD,KAAKoc,SAAWA,EAEhBpc,KAAKiqH,MAAQ,KAAW1L,QACxBv+G,KAAKkqH,SAAW,EAEhBlqH,KAAKmqH,SAAWH,EAAW9/G,MAAM8e,cACjChpB,KAAKoqH,YAAcJ,EAAWK,UAAYL,EAAWK,SAASrhG,cAC9DhpB,KAAKsqH,cAAgBN,EAAWO,YAAcP,EAAWO,WAAWvhG,cAEpE,IAOMwhG,EAPFC,EAAwBruG,EAASquG,sBAGnCzqH,KAAK4c,QAD8B,oBAA1B6tG,EACM,WACb,OAAO9tG,QAAQC,WAKF,SAAUf,GACvB,IAAK2uG,EAAU,CACb,IAAIE,GAAW,EACfF,EAAW7tG,QAAQC,QAAQ6tG,EAAsBxgH,KAAKmS,EAAUvP,EAAO3B,EAAU8+G,EAAYnuG,IAAQvY,KAAK,SAAUf,GAClH,aAAOynH,EAAYznH,GACnBmoH,GAAW,GACV,SAAUrtG,GACP,aAAuBA,KAGzBmtG,OAAWxoH,KAGf6Z,EAAM8uG,wBAAwB,WACvBD,IAGHF,OAAWxoH,KAKjB,OAAOwoH,IA7Cf,GAuDII,GAEJ,WACE,SAASA,EAAkBC,EAAkBC,EAAYC,QAC9B,IAArBF,IACFA,EAAmB,QAKF,IAAfC,IACFA,EAAa,IAAIrqE,UAGI,IAAnBsqE,IACFA,EAAiB,IAAItqE,KAGvBzgD,KAAK6qH,iBAAmBA,EACxB7qH,KAAK8qH,WAAaA,EAClB9qH,KAAK+qH,eAAiBA,EAIxB,OADAH,EAAkBI,QAAU,IAAIJ,EACzBA,EAtBT,GAgCO,SAASK,GAAuBp+G,EAAO3B,EAAU/I,EAASwwG,EAAS92F,QACxD,IAAZ1Z,IACFA,EAAUyoH,GAAkBI,cAGd,IAAZrY,IACFA,EAAU,CACRqL,YAAa,SAMH,IAAVniG,IACFA,EAAQ,KAAkBiC,MAG5B,IAAIotG,EAAiB,GACjBC,EAAYt+G,EAAMslE,qBAAqBjnE,GACvCkgH,EAAe,IAAI,KAAMlgH,EAASwC,WAAYy9G,EAAUj9G,YAAahD,EAASwC,WAAYy9G,EAAU75G,WACxGpG,EAAWA,EAASmgH,QAEpB,IAAIvN,EAAWC,GAAA,EAAiCuN,cAAcz+G,IAEzD1K,EAAQ2oH,WAAW3qG,IAAI,KAEvBypG,IACH9L,EAAShK,QAAQ,CAAC8V,KAKpB,IAAI2B,GAAY,EACZC,EAAU1N,EAAS7wG,IAAI,SAAU6wG,GACnC,OAAO,WAEL,OAAOnhG,QAAQR,IAAI2hG,EAAS7wG,IAAI,SAAUmP,GACxC,KAAIja,EAAQ4oH,eAAezvC,KAAO,IAAMn5E,EAAQ4oH,eAAe5qG,IAAI/D,GAInE,OAAOO,QAAQC,QAAQR,EAASqvG,uBAAuB5+G,EAAO3B,EAAUynG,EAAS92F,IAAQvY,KAAK,SAAUi+C,GACtG,IAAI9yC,EAAMy8G,EAAe3+G,OAEzB,GAAIg1C,EACF,IAAK,IAAI3uC,EAAK,EAAG+F,EAAK4oC,EAAUmqE,aAAe,GAAI94G,EAAK+F,EAAGpM,OAAQqG,IAAM,CACvE,IAAI+4G,EAAahzG,EAAG/F,GAEfzQ,EAAQ2oH,WAAW3qG,IAAIwrG,EAAWlwG,QAEhCkwG,EAAWl+G,QACdk+G,EAAWl+G,MAAQ29G,GAGrBF,EAAe98G,KAAK,IAAI,GAAelD,EAAUygH,EAAYpqE,EAAWnlC,EAAUvP,KAKpF4B,IAAQy8G,EAAe3+G,QAAU6P,IAAawtG,KAChD2B,GAAY,IAEb,YAoBT,OAhBa,YAAMC,EAAS,WAE1B,OAAOD,GAAa1vG,EAAMkB,0BACzBzZ,KAAK,WACN,OAAIuY,EAAMkB,wBACDJ,QAAQmE,OAAO,gBAGjBoqG,EAAeh8G,KAAK08G,GAAwBzpH,EAAQ0oH,qBAW/D,SAASgB,GAAkBzwG,EAAGlS,GAE5B,GAAIkS,EAAEgvG,aAAelhH,EAAEkhH,YAAa,CAClC,GAAIhvG,EAAEgvG,YAAclhH,EAAEkhH,YACpB,OAAQ,EACH,GAAIhvG,EAAEgvG,YAAclhH,EAAEkhH,YAC3B,OAAO,EAKX,OAAIhvG,EAAE4uG,WAAW9/G,MAAQhB,EAAE8gH,WAAW9/G,OAC5B,EACCkR,EAAE4uG,WAAW9/G,MAAQhB,EAAE8gH,WAAW9/G,MACpC,EAIFkR,EAAE4uG,WAAWvuG,KAAOvS,EAAE8gH,WAAWvuG,KAmC1C,IAAIqwG,GAAsB,IAAIvgG,IAcvB,SAASqgG,GAAwBG,GACtC,OAAOD,GAAoBlrH,IAAImrH,GAbjCD,GAAoB9zG,IAAI,EAlCxB,SAA6BoD,EAAGlS,GAC9B,GAAIkS,EAAE4uG,WAAWvuG,OAASvS,EAAE8gH,WAAWvuG,KAAM,CAC3C,GAA0B,KAAtBL,EAAE4uG,WAAWvuG,KAGb,OAAQ,EACH,GAA0B,KAAtBvS,EAAE8gH,WAAWvuG,KAGtB,OAAO,EAIb,OAAOowG,GAAkBzwG,EAAGlS,KAyB9B4iH,GAAoB9zG,IAAI,EAtBxB,SAA+BoD,EAAGlS,GAChC,GAAIkS,EAAE4uG,WAAWvuG,OAASvS,EAAE8gH,WAAWvuG,KAAM,CAC3C,GAA0B,KAAtBL,EAAE4uG,WAAWvuG,KAGb,OAAO,EACF,GAA0B,KAAtBvS,EAAE8gH,WAAWvuG,KAGtB,OAAQ,EAId,OAAOowG,GAAkBzwG,EAAGlS,KAa9B4iH,GAAoB9zG,IAAI,EAEtB6zG,IAKF,YAA+B,iCAAkC,SAAUh/G,EAAO3B,EAAUgK,GAC1F,IAAI7C,EAAS,CACX25G,YAAY,EACZN,YAAa,IAEXO,EAAY,GACZC,EAAoBh3G,EAAwB,mBAAK,EACrD,OAAO+1G,GAAuBp+G,EAAO3B,GAAU5H,KAAK,SAAU6oH,GAC5D,IAAK,IAAIv5G,EAAK,EAAGw5G,EAAUD,EAAOv5G,EAAKw5G,EAAQ7/G,OAAQqG,IAAM,CAC3D,IAAI2X,EAAO6hG,EAAQx5G,GAEfq5G,EAAU1/G,OAAS2/G,GACrBD,EAAU79G,KAAKmc,EAAK3N,QAAQ,KAAkBkB,OAGhDzL,EAAO25G,WAAa35G,EAAO25G,YAAczhG,EAAKg3B,UAAUyqE,WACxD35G,EAAOq5G,YAAYt9G,KAAKmc,EAAKy/F,eAE9B1mH,KAAK,WACN,OAAOqZ,QAAQR,IAAI8vG,KAClB3oH,KAAK,WACN,OAAO+O,MAIX,IAAI0jG,GAAY,IAEhB,WACE,SAAS7mC,IACPlvE,KAAKqsH,oBAAsB,GAY7B,OATAn9C,EAAQvuE,UAAU8qH,uBAAyB,WACzC,IACIp5G,EAAS,CACXq5G,YAFgB1rH,KAAKqsH,oBAAoB/+E,MAAM,IAKjD,OADAttC,KAAKqsH,oBAAoB9/G,OAAS,EAC3B8F,GAGF68D,EAhBW,IAmBpB6uC,GAAA,EAAiCh4G,SAAS,IAAKgwG,I,ICxR3C,G,6BA1BA,GAAsC,WACxC,IAAI/sG,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA4BtC8iH,GAEJ,WACE,SAASA,IACPtsH,KAAK4Y,KAAK,IAoKZ,OAjKA0zG,EAAQC,iBAAmB,SAAUlzE,GACnC,OAAOA,GAAM,IAEVA,GAAM,IAKXizE,EAAQE,oBAAsB,SAAUnzE,GACtC,OAAc,KAAPA,GAEJA,GAAM,IAENA,GAAM,KAENA,GAAM,IAENA,GAAM,IAKXizE,EAAQ3rH,UAAUiY,KAAO,SAAUrW,GACjCvC,KAAKuC,MAAQA,EACbvC,KAAKkoB,IAAM,GAGbokG,EAAQ3rH,UAAU8rH,UAAY,SAAU5wG,GACtC,OAAO7b,KAAKuC,MAAMw7C,OAAOliC,EAAMqM,IAAKrM,EAAMpN,MAG5C69G,EAAQ3rH,UAAUsgB,KAAO,WACvB,GAAIjhB,KAAKkoB,KAAOloB,KAAKuC,MAAMgK,OACzB,MAAO,CACL4N,KAAM,GAGN+N,IAAKloB,KAAKkoB,IACVzZ,IAAK,GAIT,IAGI0L,EAHA+N,EAAMloB,KAAKkoB,IACXzZ,EAAM,EACN4qC,EAAKr5C,KAAKuC,MAAMkR,WAAWyU,GAK/B,GAAoB,kBAFpB/N,EAAOmyG,EAAQI,OAAOrzE,IAIpB,OADAr5C,KAAKkoB,KAAO,EACL,CACL/N,KAAMA,EACN+N,IAAKA,EACLzZ,IAAK,GAKT,GAAI69G,EAAQC,iBAAiBlzE,GAAK,CAChCl/B,EAAO,EAIP,GACE1L,GAAO,EACP4qC,EAAKr5C,KAAKuC,MAAMkR,WAAWyU,EAAMzZ,SAC1B69G,EAAQC,iBAAiBlzE,IAGlC,OADAr5C,KAAKkoB,KAAOzZ,EACL,CACL0L,KAAMA,EACN+N,IAAKA,EACLzZ,IAAKA,GAKT,GAAI69G,EAAQE,oBAAoBnzE,GAAK,CACnCl/B,EAAO,EAIP,GACEk/B,EAAKr5C,KAAKuC,MAAMkR,WAAWyU,KAAQzZ,SAC5B69G,EAAQE,oBAAoBnzE,IAAOizE,EAAQC,iBAAiBlzE,IAGrE,OADAr5C,KAAKkoB,KAAOzZ,EACL,CACL0L,KAAMA,EACN+N,IAAKA,EACLzZ,IAAKA,GAKT0L,EAAO,GAIP,GACE1L,GAAO,EACP4qC,EAAKr5C,KAAKuC,MAAMkR,WAAWyU,EAAMzZ,UACzBk+G,MAAMtzE,IAAqC,qBAAvBizE,EAAQI,OAAOrzE,KACzCizE,EAAQC,iBAAiBlzE,KACzBizE,EAAQE,oBAAoBnzE,IAIhC,OADAr5C,KAAKkoB,KAAOzZ,EACL,CACL0L,KAAMA,EACN+N,IAAKA,EACLzZ,IAAKA,IAIT69G,EAAQI,SAAU,GAAK,IAAO,IAE1B,EAEF,GAAG,IAED,EAEF,GAAG,IAED,EAEF,GAAG,KAED,EAEF,GAAG,KAED,EAEF,GAAG,IAED,EAEF,GAAG,IAED,EAEF,GAAG,KAED,EAEF,GAAG,IAED,GAEF,GAAG,IAED,GAEF,GAAG,IAED,GAEF,IACKJ,EAtKT,GA2KIM,GAEJ,WACE,SAASA,IACP5sH,KAAK0yE,UAAY,GAuEnB,OApEAk6C,EAAOjsH,UAAU2Y,YAAc,SAAUolC,GAWvC,OAVIA,aAAiBmuE,IAAQ7sH,KAAK0yE,UAAU1yE,KAAK0yE,UAAUnmE,OAAS,aAAcsgH,GAEhF7sH,KAAK0yE,UAAU1yE,KAAK0yE,UAAUnmE,OAAS,GAAGhK,OAASm8C,EAAMn8C,OAGzDm8C,EAAM0B,OAASpgD,KAEfA,KAAK0yE,UAAUtkE,KAAKswC,IAGf1+C,MAGT4sH,EAAOjsH,UAAUw3B,QAAU,SAAUumB,EAAOouE,GAC1C,IAAI1sE,EAAS1B,EAAM0B,OACf2zB,EAAM3zB,EAAOvB,SAASz0B,QAAQs0B,GAC9BquE,EAAc3sE,EAAOvB,SAASvR,MAAM,GACxCy/E,EAAYl8F,OAAOvQ,MAAMysG,EAAa,CAACh5C,EAAK,GAAGhsD,OAAO+kG,IACtD1sE,EAAOsyB,UAAYq6C,EAEnB,SAAUC,EAAWnuE,EAAUuB,GAC7B,IAAK,IAAIxtC,EAAK,EAAGq6G,EAAapuE,EAAUjsC,EAAKq6G,EAAW1gH,OAAQqG,IAAM,CACpE,IAAIs6G,EAAUD,EAAWr6G,GACzBs6G,EAAQ9sE,OAASA,EAEjB4sE,EAAWE,EAAQruE,SAAUquE,IALjC,CAOGJ,EAAQ1sE,IAGbhgD,OAAOM,eAAeksH,EAAOjsH,UAAW,WAAY,CAClDC,IAAK,WACH,OAAOZ,KAAK0yE,WAEd5xE,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAeksH,EAAOjsH,UAAW,UAAW,CACjDC,IAAK,WAGH,IAFA,IAAIgiC,EAAY5iC,OAEH,CACX,IAAK4iC,EACH,OAGF,GAAIA,aAAqBuqF,GACvB,OAAOvqF,EAGTA,EAAYA,EAAUwd,SAG1Bt/C,YAAY,EACZC,cAAc,IAGhB6rH,EAAOjsH,UAAUY,SAAW,WAC1B,OAAOvB,KAAK6+C,SAAS9rB,OAAO,SAAUy2F,EAAMC,GAC1C,OAAOD,EAAOC,EAAIloH,YACjB,KAGLqrH,EAAOjsH,UAAU8N,IAAM,WACrB,OAAO,GAGFm+G,EAzET,GA8EIC,GAEJ,SAAU9iH,GAGR,SAAS8iH,EAAKtqH,GACZ,IAAI6qH,EAAUrjH,EAAOE,KAAKjK,OAASA,KAGnC,OADAotH,EAAQ7qH,MAAQA,EACT6qH,EAeT,OArBA,GAAUP,EAAM9iH,GAShB8iH,EAAKlsH,UAAUY,SAAW,WACxB,OAAOvB,KAAKuC,OAGdsqH,EAAKlsH,UAAU8N,IAAM,WACnB,OAAOzO,KAAKuC,MAAMgK,QAGpBsgH,EAAKlsH,UAAU0qH,MAAQ,WACrB,OAAO,IAAIwB,EAAK7sH,KAAKuC,QAGhBsqH,EAtBT,CAuBED,IAIES,GAEJ,SAAUtjH,GAGR,SAASsjH,IACP,OAAkB,OAAXtjH,GAAmBA,EAAOuW,MAAMtgB,KAAM2W,YAAc3W,KAG7D,OANA,GAAUqtH,EAAqBtjH,GAMxBsjH,EAPT,CAQET,IAIEU,GAEJ,SAAUvjH,GAGR,SAASujH,EAAY9qF,GACnB,IAAI4qF,EAAUrjH,EAAOE,KAAKjK,OAASA,KAGnC,OADAotH,EAAQ5qF,MAAQA,EACT4qF,EA+CT,OArDA,GAAUE,EAAavjH,GASvBujH,EAAYC,eAAiB,SAAUnyG,EAAGlS,GACxC,OAAIkS,EAAEonB,QAAUt5B,EAAEs5B,MACT,EACEpnB,EAAEoyG,eACJ,EACEtkH,EAAEskH,gBACH,EACCpyG,EAAEonB,MAAQt5B,EAAEs5B,OACb,EACCpnB,EAAEonB,MAAQt5B,EAAEs5B,MACd,EAEA,GAIXpiC,OAAOM,eAAe4sH,EAAY3sH,UAAW,iBAAkB,CAC7DC,IAAK,WACH,OAAsB,IAAfZ,KAAKwiC,OAEd1hC,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAe4sH,EAAY3sH,UAAW,SAAU,CACrDC,IAAK,WACH,OAAiC,IAA1BZ,KAAK0yE,UAAUnmE,QAAgBvM,KAAK0yE,UAAU,aAAc+6C,GAASztH,KAAK0yE,UAAU,QAAK1wE,GAElGlB,YAAY,EACZC,cAAc,IAGhBusH,EAAY3sH,UAAU0qH,MAAQ,WAC5B,IAAIhc,EAAM,IAAIie,EAAYttH,KAAKwiC,OAS/B,OAPIxiC,KAAK0tH,YACPre,EAAIqe,UAAY1tH,KAAK0tH,UAAUrC,SAGjChc,EAAI38B,UAAY1yE,KAAK6+C,SAAS5xC,IAAI,SAAUyxC,GAC1C,OAAOA,EAAM2sE,UAERhc,GAGFie,EAtDT,CAuDED,IAIEI,GAEJ,SAAU1jH,GAGR,SAAS0jH,IACP,IAAIL,EAAqB,OAAXrjH,GAAmBA,EAAOuW,MAAMtgB,KAAM2W,YAAc3W,KAGlE,OADAotH,EAAQjrH,QAAU,GACXirH,EA0BT,OAhCA,GAAUK,EAAQ1jH,GASlB0jH,EAAO9sH,UAAU2Y,YAAc,SAAU4F,GAMvC,OALIA,aAAkB2tG,KACpB3tG,EAAOkhC,OAASpgD,KAChBA,KAAKmC,QAAQiM,KAAK8Q,IAGblf,MAGTytH,EAAO9sH,UAAUY,SAAW,WAC1B,OAAOvB,KAAKmC,QAAQ,GAAGI,OAGzBkrH,EAAO9sH,UAAU8N,IAAM,WACrB,OAAOzO,KAAKmC,QAAQ,GAAGsM,OAGzBg/G,EAAO9sH,UAAU0qH,MAAQ,WACvB,IAAIhc,EAAM,IAAIoe,EAEd,OADAztH,KAAKmC,QAAQ2L,QAAQuhG,EAAI/1F,YAAa+1F,GAC/BA,GAGFoe,EAjCT,CAkCEb,IAIEe,GAEJ,SAAU5jH,GAGR,SAAS4jH,IACP,OAAkB,OAAX5jH,GAAmBA,EAAOuW,MAAMtgB,KAAM2W,YAAc3W,KAqD7D,OAxDA,GAAU2tH,EAAW5jH,GAMrB4jH,EAAUhtH,UAAUic,QAAU,SAAUra,GACtC,IAAInB,EAAQpB,KAER4tH,GAAW,EACXve,EAAM9sG,EAAM41B,QAAQn4B,KAAK6tH,OAAQ,WAEnC,OADAD,GAAW,EACJxsH,EAAM0sH,SAASzkH,MAAM1I,UAAU2sC,MAAMrjC,KAAK0M,UAAW,GAAI,MAUlE,OANKi3G,GAAY5tH,KAAK0yE,UAAUn3D,KAAK,SAAUmjC,GAC7C,OAAOA,aAAiBqvE,IAAgBvjG,QAAQk0B,EAAMsvE,eAEtD3e,EAAMrvG,KAAK8tH,SAAS,KAGfze,GAGTse,EAAUhtH,UAAUmtH,SAAW,SAAU/7F,GAGvC,IAFA,IAAIs9E,EAAM,GAEDz8F,EAAK,EAAG+F,EAAK3Y,KAAK0yE,UAAW9/D,EAAK+F,EAAGpM,OAAQqG,IAAM,CAC1D,IAAIsM,EAASvG,EAAG/F,GAEhB,GAAIsM,aAAkB6uG,GAAc,CAClC,IAAIxrH,EAAQwvB,EAAO7S,EAAOsjB,QAAU,GAEpC6sE,GADA9sG,EAAQ2c,EAAOtC,QAAQra,QAGvB8sG,GAAOnwF,EAAO3d,WAIlB,OAAO8tG,GAGTse,EAAUhtH,UAAUY,SAAW,WAC7B,MAAO,IAGTosH,EAAUhtH,UAAU0qH,MAAQ,WAC1B,IAAIhc,EAAM,IAAIse,EAKd,OAJAte,EAAIwe,OAAS,IAAI3nG,OAAOlmB,KAAK6tH,OAAOrnF,QAAcxmC,KAAK6tH,OAAO9gF,WAAa,IAAM,KAAO/sC,KAAK6tH,OAAO7gF,OAAS,IAAM,KACnHqiE,EAAI38B,UAAY1yE,KAAK6+C,SAAS5xC,IAAI,SAAUyxC,GAC1C,OAAOA,EAAM2sE,UAERhc,GAGFse,EAzDT,CA0DEf,IAIEmB,GAEJ,SAAUhkH,GAGR,SAASgkH,EAAavrF,EAAOyrF,EAAeC,EAASF,GACnD,IAAIZ,EAAUrjH,EAAOE,KAAKjK,OAASA,KAMnC,OAJAotH,EAAQ5qF,MAAQA,EAChB4qF,EAAQa,cAAgBA,EACxBb,EAAQc,QAAUA,EAClBd,EAAQY,UAAYA,EACbZ,EAsCT,OA/CA,GAAUW,EAAchkH,GAYxBgkH,EAAaptH,UAAUic,QAAU,SAAUra,GACzC,MAA2B,WAAvBvC,KAAKiuH,cACC1rH,EAAaA,EAAM+yG,oBAAX,GACgB,aAAvBt1G,KAAKiuH,cACN1rH,EAAaA,EAAMizG,oBAAX,GACgB,eAAvBx1G,KAAKiuH,cACN1rH,EAAaA,EAAM,GAAG+yG,oBAAsB/yG,EAAMw7C,OAAO,GAAjD,GACgB,eAAvB/9C,KAAKiuH,cACN1rH,EAAavC,KAAKmuH,cAAc5rH,GAAxB,GACPioB,QAAQjoB,IAAkC,kBAAjBvC,KAAKkuH,QAChCluH,KAAKkuH,QACF1jG,QAAQjoB,IAAoC,kBAAnBvC,KAAKguH,UAGjCzrH,GAAS,GAFTvC,KAAKguH,WAMhBD,EAAaptH,UAAUwtH,cAAgB,SAAU5rH,GAC/C,IAAIioC,EAAQjoC,EAAMioC,MAAM,YAExB,OAAKA,EAIEA,EAAMv9B,IAAI,SAAU+kD,GACzB,OAAOA,EAAKxa,OAAO,GAAGqhC,cAAgB7mB,EAAKjU,OAAO,GAAG/0B,gBACpDzI,KAAK,IALChe,GAQXwrH,EAAaptH,UAAU0qH,MAAQ,WAE7B,OADU,IAAI0C,EAAa/tH,KAAKwiC,MAAOxiC,KAAKiuH,cAAejuH,KAAKkuH,QAASluH,KAAKguH,YAIzED,EAhDT,CAiDEnB,IAIEwB,GAEJ,SAAUrkH,GAGR,SAASqkH,EAAShlG,GAChB,IAAIgkG,EAAUrjH,EAAOE,KAAKjK,OAASA,KAGnC,OADAotH,EAAQhkG,KAAOA,EACRgkG,EA+BT,OArCA,GAAUgB,EAAUrkH,GASpBqkH,EAASztH,UAAUic,QAAU,SAAUyxG,GACrC,IAAI9rH,EAAQ8rH,EAASzxG,QAAQ5c,MAM7B,OAJIA,KAAK0tH,YACPnrH,EAAQvC,KAAK0tH,UAAU9wG,QAAQra,GAAS,UAG5BP,IAAVO,IACFvC,KAAK0yE,UAAY,CAAC,IAAIm6C,GAAKtqH,KACpB,IAMX6rH,EAASztH,UAAU0qH,MAAQ,WACzB,IAAIhc,EAAM,IAAI+e,EAASpuH,KAAKopB,MAS5B,OAPIppB,KAAK0tH,YACPre,EAAIqe,UAAY1tH,KAAK0tH,UAAUrC,SAGjChc,EAAI38B,UAAY1yE,KAAK6+C,SAAS5xC,IAAI,SAAUyxC,GAC1C,OAAOA,EAAM2sE,UAERhc,GAGF+e,EAtCT,CAuCEf,IAIF,SAASiB,GAAKpvG,EAAQqvG,GAGpB,IAFA,IAAItvE,EAAQ//B,EAAOouB,QAEZ2R,EAAM1yC,OAAS,GAAG,CACvB,IAAIiiH,EAAWvvE,EAAMhgB,QAGrB,IAFcsvF,EAAQC,GAGpB,MAGFvvE,EAAM60D,QAAQxzF,MAAM2+B,EAAOuvE,EAAS3vE,WAIxC,IAAIsuE,GAEJ,SAAUpjH,GAGR,SAASojH,IACP,OAAkB,OAAXpjH,GAAmBA,EAAOuW,MAAMtgB,KAAM2W,YAAc3W,KAsH7D,OAzHA,GAAUmtH,EAAiBpjH,GAM3B3J,OAAOM,eAAeysH,EAAgBxsH,UAAW,kBAAmB,CAClEC,IAAK,WACH,IAAKZ,KAAKyuH,cAAe,CAEvB,IACIC,EADAC,EAAQ,GAEZ3uH,KAAKsuH,KAAK,SAAU1rF,GAMlB,OALIA,aAAqB0qF,KACvBqB,EAAMvgH,KAAKw0B,GACX8rF,GAAUA,GAAUA,EAAOlsF,MAAQI,EAAUJ,MAAQI,EAAY8rF,IAG5D,IAET1uH,KAAKyuH,cAAgB,CACnBtyG,IAAKwyG,EACLruE,KAAMouE,GAIV,OAAO1uH,KAAKyuH,eAEd3tH,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAeysH,EAAgBxsH,UAAW,eAAgB,CAC/DC,IAAK,WAEH,OADUZ,KAAK4uH,gBAAgBzyG,KAGjCrb,YAAY,EACZC,cAAc,IAGhBosH,EAAgBxsH,UAAUq2B,OAAS,SAAU9X,GAC3C,IAAIgJ,EAAM,EACNwuE,GAAQ,EAWZ,OAVA12F,KAAKsuH,KAAK,SAAU1rF,GAClB,OAAIA,IAAc1jB,GAChBw3E,GAAQ,GACD,IAGTxuE,GAAO0a,EAAUn0B,OACV,KAGJioF,EAIExuE,GAHG,GAMZilG,EAAgBxsH,UAAUkuH,QAAU,SAAU3vG,GAC5C,IAAImwF,EAAM,EAKV,OAJAif,GAAK,CAACpvG,GAAS,SAAUA,GAEvB,OADAmwF,GAAOnwF,EAAOzQ,OACP,IAEF4gG,GAGT8d,EAAgBxsH,UAAUmuH,sBAAwB,SAAUntE,GAI1D,IAHA,IAAI0tD,EAAM,GACNjvD,EAASuB,EAAYvB,OAElBA,GACDA,aAAkBktE,IACpBje,EAAIjhG,KAAKgyC,GAGXA,EAASA,EAAOA,OAGlB,OAAOivD,GAGT8d,EAAgBxsH,UAAUouH,iBAAmB,SAAUV,GACrD,IAAIjB,EAAUptH,KAWd,OATAA,KAAKsuH,KAAK,SAAU1rF,GAOlB,OANIA,aAAqBwrF,IACnBxrF,EAAUhmB,QAAQyxG,KACpBjB,EAAQqB,mBAAgBzsH,IAIrB,IAEFhC,MAGTmtH,EAAgBxsH,UAAU2Y,YAAc,SAAUolC,GAEhD,OADA1+C,KAAKyuH,mBAAgBzsH,EACd+H,EAAOpJ,UAAU2Y,YAAYrP,KAAKjK,KAAM0+C,IAGjDyuE,EAAgBxsH,UAAUw3B,QAAU,SAAUumB,EAAOouE,GAEnD,OADA9sH,KAAKyuH,mBAAgBzsH,EACd+H,EAAOpJ,UAAUw3B,QAAQluB,KAAKjK,KAAM0+C,EAAOouE,IAGpDK,EAAgBxsH,UAAU0qH,MAAQ,WAChC,IAAIhc,EAAM,IAAI8d,EAId,OAHAntH,KAAK0yE,UAAY1yE,KAAK6+C,SAAS5xC,IAAI,SAAUyxC,GAC3C,OAAOA,EAAM2sE,UAERhc,GAGT8d,EAAgBxsH,UAAU2tH,KAAO,SAAUC,GACzCD,GAAKtuH,KAAK6+C,SAAU0vE,IAGfpB,EA1HT,CA2HEP,IAIEoC,GAEJ,WACE,SAASA,IACPhvH,KAAKivH,SAAW,IAAI3C,GAolBtB,OAjlBA0C,EAAch3E,OAAS,SAAUz1C,GAC/B,OAAOA,EAAM41B,QAAQ,WAAY,SAGnC62F,EAAcruH,UAAUi8C,MAAQ,SAAUr6C,EAAO2sH,EAAoBC,GACnEnvH,KAAKivH,SAASr2G,KAAKrW,GAEnBvC,KAAKovH,OAASpvH,KAAKivH,SAAShuG,OAG5B,IAFA,IAAIouG,EAAU,IAAIlC,GAEXntH,KAAKsvH,OAAOD,KAKnB,IAAIE,EAA2B,IAAIhkG,IAC/BikG,EAAyB,GACzBC,EAAmB,EACvBJ,EAAQf,KAAK,SAAUpvG,GAarB,OAZIA,aAAkBouG,KACpBmC,GAAoB,EAEhBvwG,EAAOsuG,eACT+B,EAAyBv3G,IAAI,OAAGhW,IACtButH,EAAyBpvG,IAAIjB,EAAOsjB,QAAUtjB,EAAO2/B,SAAStyC,OAAS,EACjFgjH,EAAyBv3G,IAAIkH,EAAOsjB,MAAOtjB,EAAO2/B,UAElD2wE,EAAuBphH,KAAK8Q,KAIzB,IAGT,IAAK,IAAItM,EAAK,EAAG88G,EAA2BF,EAAwB58G,EAAK88G,EAAyBnjH,OAAQqG,IAAM,CAC9G,IAAI+uC,EAAc+tE,EAAyB98G,GACvC+8G,EAAgBJ,EAAyB3uH,IAAI+gD,EAAYnf,OAE7D,GAAImtF,EAAe,CACjB,IAAItE,EAAQ,IAAIiC,GAAY3rE,EAAYnf,OACxC6oF,EAAMqC,UAAY/rE,EAAY+rE,UAE9B,IAAK,IAAI/0G,EAAK,EAAGi3G,EAAkBD,EAAeh3G,EAAKi3G,EAAgBrjH,OAAQoM,IAAM,CACnF,IAAI+lC,EAAQkxE,EAAgBj3G,GAC5B0yG,EAAM/xG,YAAYolC,EAAM2sE,SAG1BgE,EAAQl3F,QAAQwpB,EAAa,CAAC0pE,KAclC,OAVK8D,IACHA,EAAsBM,EAAmB,GAAKP,IAG3CK,EAAyBpvG,IAAI,IAAMgvG,GAGtCE,EAAQ/1G,YAAY,IAAIg0G,GAAY,IAG/B+B,GAGTL,EAAcruH,UAAUkvH,QAAU,SAAU11G,EAAM5X,GAChD,QAAaP,IAATmY,GAAsBna,KAAKovH,OAAOj1G,OAASA,EAAM,CACnD,IAAIk1F,GAAO9sG,GAAevC,KAAKivH,SAASxC,UAAUzsH,KAAKovH,QAEvD,OADApvH,KAAKovH,OAASpvH,KAAKivH,SAAShuG,OACrBouF,EAGT,OAAO,GAGT2f,EAAcruH,UAAUmvH,QAAU,SAAUj0G,GAG1C,OAFA7b,KAAKivH,SAAS/mG,IAAMrM,EAAMqM,IAAMrM,EAAMpN,IACtCzO,KAAKovH,OAASvzG,GACP,GAGTmzG,EAAcruH,UAAUovH,OAAS,SAAU51G,GACzC,GAAyB,KAArBna,KAAKovH,OAAOj1G,KAGZ,OAAO,EAKX,IAFA,IAAI5G,EAAQvT,KAAKovH,OAEVpvH,KAAKovH,OAAOj1G,OAASA,GAG1B,GAFAna,KAAKovH,OAASpvH,KAAKivH,SAAShuG,OAEH,KAArBjhB,KAAKovH,OAAOj1G,KAGZ,OAAO,EAIb,IAAI5X,EAAQvC,KAAKivH,SAAS1sH,MAAMf,UAAU+R,EAAM2U,IAAKloB,KAAKovH,OAAOlnG,KAGjE,OADAloB,KAAKovH,OAASpvH,KAAKivH,SAAShuG,OACrB1e,GAGTysH,EAAcruH,UAAU2uH,OAAS,SAAUpwG,GACzC,OAAOlf,KAAKgwH,cAAc9wG,IAAWlf,KAAKiwH,4BAA4B/wG,IAAWlf,KAAKkwH,yBAAyBhxG,IAAWlf,KAAKmwH,sBAAsBjxG,IAAWlf,KAAKowH,eAAelxG,IAItL8vG,EAAcruH,UAAUqvH,cAAgB,SAAU9wG,GAChD,IAAI3c,EAEJ,SAAIA,EAAQvC,KAAK6vH,QAAQ,GAEvB,MAEAttH,EAAQvC,KAAK6vH,QAAQ,GAEnB,IAAS7vH,KAAK6vH,QAAQ,GAEtB,IAAS7vH,KAAK6vH,QAAQ,GAEtB,IAASttH,EACX2c,EAAO5F,YAAY,IAAIuzG,GAAKtqH,KACrB,IAOXysH,EAAcruH,UAAUsvH,4BAA8B,SAAU7vE,GAC9D,IAAI79C,EACAsZ,EAAQ7b,KAAKovH,OAUjB,OARYpvH,KAAK6vH,QAAQ,KAEnBttH,EAAQvC,KAAK6vH,QAAQ,GAEzB,IAAS7vH,KAAK6vH,QAAQ,GAEtB,KAMFzvE,EAAO9mC,YAAY,QAAQgG,KAAK/c,GAAS,IAAI+qH,GAAY7xF,OAAOl5B,IAAU,IAAI6rH,GAAS7rH,KAChF,GAJEvC,KAAK8vH,QAAQj0G,IAQxBmzG,EAAcruH,UAAUuvH,yBAA2B,SAAU9vE,GAC3D,IAAI5d,EACA3mB,EAAQ7b,KAAKovH,OAUjB,KARYpvH,KAAK6vH,QAAQ,IAEpB7vH,KAAK6vH,QAAQ,KAEZrtF,EAAQxiC,KAAK6vH,QAAQ,GAEzB,KAGA,OAAO7vH,KAAK8vH,QAAQj0G,GAGtB,IAAI8lC,EAAc,IAAI2rE,GAAY7xF,OAAO+G,IAEzC,GAAIxiC,KAAK6vH,QAAQ,GAIf,OAAa,CAEX,GAAI7vH,KAAK6vH,QAAQ,GAIf,OADAzvE,EAAO9mC,YAAYqoC,IACZ,EAGT,IAAI3hD,KAAKsvH,OAAO3tE,GAOhB,OAFAvB,EAAO9mC,YAAY,IAAIuzG,GAAK,KAAOrqF,EAAQ,MAC3Cmf,EAAY9C,SAAS/wC,QAAQsyC,EAAO9mC,YAAa8mC,IAC1C,MAEJ,MAAIuB,EAAYnf,MAAQ,GAAKxiC,KAAK6vH,QAAQ,IAkC1C,OAAI7vH,KAAK6vH,QAAQ,GAIlB7vH,KAAKqwH,gBAAgB1uE,IACvBvB,EAAO9mC,YAAYqoC,IACZ,IAGT3hD,KAAK8vH,QAAQj0G,IAEN,GACE7b,KAAK6vH,QAAQ,IAItBzvE,EAAO9mC,YAAYqoC,IACZ,GAGA3hD,KAAK8vH,QAAQj0G,GAhDpB,IAFA,IAAIy0G,EAAS,IAAI7C,KAEJ,CACX,GAAIztH,KAAKuwH,oBAAoBD,GAAS,CACpC,GAAItwH,KAAK6vH,QAAQ,GAIf,SAGF,GAAI7vH,KAAK6vH,QAAQ,KAGfluE,EAAYroC,YAAYg3G,GAEpBtwH,KAAK6vH,QAAQ,IAKf,OADAzvE,EAAO9mC,YAAYqoC,IACZ,EAOb,OAFA3hD,KAAK8vH,QAAQj0G,IAEN,KA0BbmzG,EAAcruH,UAAU4vH,oBAAsB,SAAUnwE,GAItD,IAHA,IAAIvkC,EAAQ7b,KAAKovH,OACb5sB,EAAS,GAGc,IAArBxiG,KAAKovH,OAAOj1G,MAEQ,IAArBna,KAAKovH,OAAOj1G,MAHJ,CASX,IAAI5X,OAAQ,EAiBZ,KAXEA,GAJEA,EAAQvC,KAAK6vH,QAAQ,GAEvB,IAEQ7vH,KAAK6vH,QAAQ,GAEnB,IAAS7vH,KAAK6vH,QAAQ,GAEtB,IAAS7vH,KAAK6vH,QAAQ,GAEtB,IAASttH,EAEHvC,KAAK6vH,aAAQ7tH,GAAW,IAOhC,OAFAhC,KAAK8vH,QAAQj0G,IAEN,EAGT2mF,EAAOp0F,KAAK7L,GAGd,OAAsB,IAAlBigG,EAAOj2F,QACTvM,KAAK8vH,QAAQj0G,IAEN,IAGTukC,EAAO9mC,YAAY,IAAIuzG,GAAKrqB,EAAOjiF,KAAK,OACjC,IAITyuG,EAAcruH,UAAUwvH,sBAAwB,SAAU/vE,GACxD,IAAIh3B,EACAvN,EAAQ7b,KAAKovH,OAUjB,KARYpvH,KAAK6vH,QAAQ,IAEpB7vH,KAAK6vH,QAAQ,KAEZzmG,EAAOppB,KAAK6vH,QAAQ,GAExB,KAGA,OAAO7vH,KAAK8vH,QAAQj0G,GAGtB,IAAI20G,EAAW,IAAIpC,GAAShlG,GAE5B,IAAIppB,KAAK6vH,QAAQ,GAsBV,OAAI7vH,KAAK6vH,QAAQ,GAIlB7vH,KAAKqwH,gBAAgBG,IACvBpwE,EAAO9mC,YAAYk3G,IACZ,IAGTxwH,KAAK8vH,QAAQj0G,IAEN,GACE7b,KAAK6vH,QAAQ,IAItBzvE,EAAO9mC,YAAYk3G,IACZ,GAGAxwH,KAAK8vH,QAAQj0G,GAtCpB,OAAa,CAEX,GAAI7b,KAAK6vH,QAAQ,GAIf,OADAzvE,EAAO9mC,YAAYk3G,IACZ,EAGT,IAAIxwH,KAAKsvH,OAAOkB,GAOhB,OAFApwE,EAAO9mC,YAAY,IAAIuzG,GAAK,KAAOzjG,EAAO,MAC1ConG,EAAS3xE,SAAS/wC,QAAQsyC,EAAO9mC,YAAa8mC,IACvC,IA0Bb4uE,EAAcruH,UAAU0vH,gBAAkB,SAAUjwE,GAMlD,IAJA,IAAIstE,EAAY,IAAIC,GAChB8C,EAAa,GACbC,EAAe,IAGb1wH,KAAK6vH,QAAQ,IADN,CAOX,IAAIj0E,OAAU,EAEd,GAAIA,EAAU57C,KAAK6vH,QAAQ,GAEzB,GAIAY,GAHA70E,EAAU57C,KAAK6vH,QAAQ,GAErB,IAASj0E,MALb,CAUA,GAAyB,KAArB57C,KAAKovH,OAAOj1G,KAOhB,OAAO,EAJHs2G,GAAczwH,KAAK6vH,aAAQ7tH,GAAW,IAQ5C,MACMhC,KAAK6vH,QAAQ,IADN,CAOPj0E,OAAU,EAEd,GAAIA,EAAU57C,KAAK6vH,QAAQ,GAEzB,GACAj0E,EAAU57C,KAAK6vH,QAAQ,GAErB,IAAS7vH,KAAK6vH,QAAQ,GAEtB,IAASj0E,EACX8xE,EAAUp0G,YAAY,IAAIuzG,GAAKjxE,SAIjC,IAAI57C,KAAK2wH,mBAAmBjD,KAAc1tH,KAAKowH,eAAe1C,GAI9D,OAAO,EAIT,MACM1tH,KAAK6vH,QAAQ,IADN,CAOX,GAAyB,KAArB7vH,KAAKovH,OAAOj1G,KAOhB,OAAO,EAJHu2G,GAAgB1wH,KAAK6vH,aAAQ7tH,GAAW,GAO9C,IACE0rH,EAAUG,OAAS,IAAI3nG,OAAOuqG,EAAYC,GAC1C,MAAOxkH,GAEP,OAAO,EAIT,OADAk0C,EAAOstE,UAAYA,GACZ,GAGTsB,EAAcruH,UAAUgwH,mBAAqB,SAAUvwE,GACrD,IAAIvkC,EAAQ7b,KAAKovH,OAEjB,IAAKpvH,KAAK6vH,QAAQ,GAGhB,OAAO,EAGT,IAAIe,GAAU,EAEV5wH,KAAK6vH,QAAQ,KAGfe,GAAU,GAGZ,IAAIpuF,EAAQxiC,KAAK6vH,QAAQ,GAEvB,GAEF,IAAKrtF,EAGH,OAFAxiC,KAAK8vH,QAAQj0G,IAEN,EACF,IAAK+0G,EAGV,OADAxwE,EAAO9mC,YAAY,IAAIy0G,GAAatyF,OAAO+G,MACpC,EACF,GAAIxiC,KAAK6vH,QAAQ,GAKtB,OADAzvE,EAAO9mC,YAAY,IAAIy0G,GAAatyF,OAAO+G,MACpC,EACF,IAAKxiC,KAAK6vH,QAAQ,GAKvB,OAFA7vH,KAAK8vH,QAAQj0G,IAEN,EAGT,GAAI7b,KAAK6vH,QAAQ,GAEd,CAED,IAAIgB,EAAY7wH,KAAK6vH,QAAQ,GAE3B,GAEF,OAAKgB,GAAc7wH,KAAK6vH,QAAQ,IAO9BzvE,EAAO9mC,YAAY,IAAIy0G,GAAatyF,OAAO+G,GAAQquF,KAC5C,IALP7wH,KAAK8vH,QAAQj0G,IAEN,GAKJ,GAAI7b,KAAK6vH,QAAQ,KAQtB,GAJI3B,EAAUluH,KAAK+vH,OAAO,GAMxB,OADA3vE,EAAO9mC,YAAY,IAAIy0G,GAAatyF,OAAO+G,QAAQxgC,EAAWksH,OAASlsH,KAChE,OAEJ,GAAIhC,KAAK6vH,QAAQ,IAErB,CAMD,GAJI7B,EAAYhuH,KAAK+vH,OAAO,GAM1B,OADA3vE,EAAO9mC,YAAY,IAAIy0G,GAAatyF,OAAO+G,QAAQxgC,OAAWA,EAAWgsH,KAClE,OAEJ,GAAIhuH,KAAK6vH,QAAQ,IAErB,CAED,IAAI3B,EAIJ,GAJIA,EAAUluH,KAAK+vH,OAAO,GASxB,GAJI/B,EAAYhuH,KAAK+vH,OAAO,GAM1B,OADA3vE,EAAO9mC,YAAY,IAAIy0G,GAAatyF,OAAO+G,QAAQxgC,EAAWksH,EAASF,KAChE,MAGN,CAEL,IAAIA,EAIJ,GAJIA,EAAYhuH,KAAK+vH,OAAO,GAM1B,OADA3vE,EAAO9mC,YAAY,IAAIy0G,GAAatyF,OAAO+G,QAAQxgC,OAAWA,EAAWgsH,KAClE,EAMX,OAFAhuH,KAAK8vH,QAAQj0G,IAEN,GAGTmzG,EAAcruH,UAAUyvH,eAAiB,SAAUlxG,GACjD,OAAyB,KAArBlf,KAAKovH,OAAOj1G,OAGZ+E,EAAO5F,YAAY,IAAIuzG,GAAK7sH,KAAKivH,SAASxC,UAAUzsH,KAAKovH,UAEzDpvH,KAAK6vH,aAAQ7tH,IAEN,IAMNgtH,EAtlBT,GCxtBA,IAAI8B,GAEJ,WACE,SAASA,EAAiCC,GACxC/wH,KAAK+wH,WAAaA,EAgBpB,OAbAD,EAAiCnwH,UAAUic,QAAU,SAAU4zG,GAC7D,IAAK,IAAI59G,EAAK,EAAG+F,EAAK3Y,KAAK+wH,WAAYn+G,EAAK+F,EAAGpM,OAAQqG,IAAM,CAC3D,IACIrQ,EADWoW,EAAG/F,GACGgK,QAAQ4zG,GAE7B,QAAcxuH,IAAVO,EACF,OAAOA,IAONuuH,EAlBT,GAuBI,GAEJ,WACE,SAASE,EAA+BtqG,EAAQ5V,GAC9C9Q,KAAK0mB,OAASA,EACd1mB,KAAK8Q,WAAaA,EAsDpB,OAnDAkgH,EAA+BrwH,UAAUic,QAAU,SAAU4zG,GAC3D,IAAIpnG,EAAOonG,EAASpnG,KAEpB,GAAa,cAATA,GAAiC,qBAATA,EAA6B,CACvD,IAAI7mB,EAAQvC,KAAK0mB,OAAOxS,gBAAgBlU,KAAK8Q,kBAAe9O,EAE5D,GAAIO,GAASvC,KAAK8Q,WAAW7C,kBAAoBjO,KAAK8Q,WAAWO,eAAiBm/G,EAASnB,QAAS,CAKlG,IAAIhwG,EAAOrf,KAAK0mB,OAAO7U,eAAe7R,KAAK8Q,WAAW7C,iBAElDgjH,EAAwB,aAAqB5xG,EAAM,EAAGrf,KAAK8Q,WAAW5C,YAAc,GACpFgjH,EAAyBD,EAC7BT,EAASnB,QAAQf,KAAK,SAAUpvG,GAC9B,OAAIA,IAAWsxG,IAIXtxG,aAAkB2tG,KACpBqE,EAAyB,aAAqBhyG,EAAO3c,MAAM80C,MAAM,cAAch1B,SAG1E,KAET,IAAI8uG,EAA2B,aAAmBD,EAAwBD,GAC1E1uH,EAAQA,EAAM41B,QAAQ,oBAAqB,SAAUiV,EAAGkH,EAAS88E,GAC/D,MAAO,GAAK98E,EAAU48E,EAAuBnzE,OAAOozE,GAA4BC,IAIpF,OAAO7uH,EACF,GAAa,oBAAT6mB,EACT,OAAOppB,KAAK0mB,OAAO7U,eAAe7R,KAAK8Q,WAAWqF,oBAC7C,GAAa,oBAATiT,EAA4B,CACrC,IAAIijD,EAAOrsE,KAAK0mB,OAAOqrC,kBAAkB,CACvCrkD,WAAY1N,KAAK8Q,WAAWqF,mBAC5BxI,OAAQ3N,KAAK8Q,WAAW4pB,iBAG1B,OAAO2xC,GAAQA,EAAKra,WAAQhwD,EACvB,MAAa,kBAATonB,EACFiD,OAAOrsB,KAAK8Q,WAAWqF,mBAAqB,GACjC,mBAATiT,EACFiD,OAAOrsB,KAAK8Q,WAAWqF,yBADzB,GAOF66G,EAzDT,GA8DI,GAEJ,WACE,SAASK,EAA2B3qG,GAClC1mB,KAAK0mB,OAASA,EA2BhB,OAxBA2qG,EAA2B1wH,UAAUic,QAAU,SAAU4zG,GACvD,IAAIpnG,EAAOonG,EAASpnG,KAEpB,GAAa,gBAATA,EACF,OAAO,oBAASppB,KAAK0mB,OAAO5H,IAAI+zD,QAC3B,GAAa,qBAATzpD,EAA6B,CACtC,IAAIkoG,EAAS,oBAAStxH,KAAK0mB,OAAO5H,IAAI+zD,QAClCkB,EAAMu9C,EAAO55F,YAAY,KAE7B,OAAIq8C,GAAO,EACFu9C,EAEAA,EAAOhkF,MAAM,EAAGymC,GAEpB,GAAa,iBAAT3qD,EAAyB,CAClC,IAAImoG,EAAM,mBAAQvxH,KAAK0mB,OAAO5H,IAAI+zD,QAClC,MAAe,MAAR0+C,EAAcA,EAAM,GACtB,MAAa,gBAATnoG,EACFppB,KAAK0mB,OAAO5H,IAAI+zD,YADlB,GAOFw+C,EA7BT,GAkCI,GAEJ,WACE,SAASG,EAA+Bj/D,EAAmBk/D,EAAeC,GACxE1xH,KAAKuyD,kBAAoBA,EACzBvyD,KAAKyxH,cAAgBA,EACrBzxH,KAAK0xH,gBAAkBA,EAyBzB,OAtBAF,EAA+B7wH,UAAUic,QAAU,SAAU4zG,GAC3D,GAAsB,cAAlBA,EAASpnG,MAAyBppB,KAAKuyD,kBAA3C,CAIA,IAAI35C,EAAO5Y,KAAKuyD,kBAAkBo/D,WAElC,GAAK/4G,EAAL,CAIA,IAAI2gB,EAAQ3gB,EAAKy+B,MAAM,cAAcv7B,OAAO,SAAU5K,GACpD,OAAQ,aAAoBA,KAG9B,OAAIqoB,EAAMhtB,SAAWvM,KAAK0xH,gBACjBn4F,EAAMv5B,KAAKyxH,eAEX74G,KAIJ44G,EA7BT,GAkCI,GAEJ,WACE,SAASI,EAA6BlrG,GACpC1mB,KAAK0mB,OAASA,EAyBhB,OAtBAkrG,EAA6BjxH,UAAUic,QAAU,SAAU4zG,GACzD,IAAIpnG,EAAOonG,EAASpnG,KAEhB7gB,EAAWvI,KAAK0mB,OAAOoO,wBAEvB3P,EAAS,KAA8BoT,YAAYhwB,EAASvC,IAEhE,GAAKmf,EAIL,MAAa,iBAATiE,EACKjE,EAAOmU,uBAAoBt3B,EAChB,wBAATonB,EACFjE,EAAOqT,6BAA0Bx2B,EACtB,sBAATonB,GACFjE,EAAOsT,2BADT,GAOFm5F,EA3BT,GAgCI,GAEJ,WACE,SAASC,KAoCT,OAlCAA,EAA0BlxH,UAAUic,QAAU,SAAU4zG,GACtD,IAAIpnG,EAAOonG,EAASpnG,KAEpB,MAAa,iBAATA,EACKiD,QAAO,IAAIk7F,MAAOuK,eACP,uBAAT1oG,EACFiD,QAAO,IAAIk7F,MAAOuK,eAAexkF,OAAO,GAC7B,kBAATlkB,EACF,cAAI,IAAIm+F,MAAOwK,WAAWC,UAAY,EAAG,GAC9B,iBAAT5oG,EACF,cAAI,IAAIm+F,MAAO0K,UAAUD,UAAW,GACzB,iBAAT5oG,EACF,cAAI,IAAIm+F,MAAO2K,WAAWF,UAAW,GAC1B,mBAAT5oG,EACF,cAAI,IAAIm+F,MAAO4K,aAAaH,UAAW,GAC5B,mBAAT5oG,EACF,cAAI,IAAIm+F,MAAO6K,aAAaJ,UAAW,GAC5B,qBAAT5oG,EACFyoG,EAA0BQ,UAAS,IAAI9K,MAAO+K,UACnC,2BAATlpG,EACFyoG,EAA0BU,eAAc,IAAIhL,MAAO+K,UACxC,uBAATlpG,EACFyoG,EAA0BW,YAAW,IAAIjL,MAAOwK,YACrC,6BAAT3oG,EACFyoG,EAA0BY,iBAAgB,IAAIlL,MAAOwK,iBADvD,GAOTF,EAA0BQ,SAAW,CAACvoH,EAAA,EAAa,SAAU,UAAWA,EAAA,EAAa,SAAU,UAAWA,EAAA,EAAa,UAAW,WAAYA,EAAA,EAAa,YAAa,aAAcA,EAAA,EAAa,WAAY,YAAaA,EAAA,EAAa,SAAU,UAAWA,EAAA,EAAa,WAAY,aACvR+nH,EAA0BU,cAAgB,CAACzoH,EAAA,EAAa,cAAe,OAAQA,EAAA,EAAa,cAAe,OAAQA,EAAA,EAAa,eAAgB,OAAQA,EAAA,EAAa,iBAAkB,OAAQA,EAAA,EAAa,gBAAiB,OAAQA,EAAA,EAAa,cAAe,OAAQA,EAAA,EAAa,gBAAiB,QACvS+nH,EAA0BW,WAAa,CAAC1oH,EAAA,EAAa,UAAW,WAAYA,EAAA,EAAa,WAAY,YAAaA,EAAA,EAAa,QAAS,SAAUA,EAAA,EAAa,QAAS,SAAUA,EAAA,EAAa,MAAO,OAAQA,EAAA,EAAa,OAAQ,QAASA,EAAA,EAAa,OAAQ,QAASA,EAAA,EAAa,SAAU,UAAWA,EAAA,EAAa,YAAa,aAAcA,EAAA,EAAa,UAAW,WAAYA,EAAA,EAAa,WAAY,YAAaA,EAAA,EAAa,WAAY,aACvb+nH,EAA0BY,gBAAkB,CAAC3oH,EAAA,EAAa,eAAgB,OAAQA,EAAA,EAAa,gBAAiB,OAAQA,EAAA,EAAa,aAAc,OAAQA,EAAA,EAAa,aAAc,OAAQA,EAAA,EAAa,WAAY,OAAQA,EAAA,EAAa,YAAa,OAAQA,EAAA,EAAa,YAAa,OAAQA,EAAA,EAAa,cAAe,OAAQA,EAAA,EAAa,iBAAkB,OAAQA,EAAA,EAAa,eAAgB,OAAQA,EAAA,EAAa,gBAAiB,OAAQA,EAAA,EAAa,gBAAiB,QAChd+nH,EArCT,GA0CI,GAEJ,WACE,SAASa,EAA+BC,GACtC3yH,KAAK2yH,kBAAoBA,EA2B3B,OAxBAD,EAA+B/xH,UAAUic,QAAU,SAAU4zG,GAC3D,GAAsB,mBAAlBA,EAASpnG,MAA8BppB,KAAK2yH,kBAAhD,CAIA,IAAIC,ECjQD,SAA+BC,GACpC,OAAIA,EAAUpnC,cACL,CACLqnC,WAAYD,EAAUpnC,cACtBzlF,GAAI6sH,EAAU7sH,IAIe,IAA7B6sH,EAAUl7C,QAAQprE,OACbsmH,EAAUl7C,QAAQ,GAAG74D,SAD9B,EDyP4Bi0G,CAAsB/yH,KAAK2yH,kBAAkBj7C,gBAEvE,GAAKk7C,EAAL,CAIA,GAAsCA,aCzQlB,KD0QlB,OAAO,oBAASA,EAAoBv6C,MC3QnC,ID8QC26C,EAAW,oBAASJ,EAAoBE,WAAWz6C,MAMvD,OAJI,aAAS26C,ECjRgB,oBDkR3BA,EAAWA,EAASj1E,OAAO,EAAGi1E,EAASzmH,OClRZ,iBDkRyCA,OAAS,IAGxEymH,KAGFN,EA7BT,GEzOA,YAA2B,SAAU3iH,EAAOC,GAC1C,SAASijH,EAAiB7pG,GACxB,IAAIvZ,EAAQE,EAAMG,SAASkZ,GAC3B,OAAOvZ,EAAQA,EAAMtO,WAAa,cAGpCyO,EAAUG,QAAQ,2DAA6D8iH,EAAiB,MAA4C,oBAAsBA,EAAiB,MAAwC,OAC3NjjH,EAAUG,QAAQ,kEAAoE8iH,EAAiB,MAAiD,oBAAsBA,EAAiB,MAA6C,SAG9O,IAAI,GAEJ,WACE,SAASC,EAAWtoH,EAAQykH,EAASr4F,GACnCh3B,KAAKmzH,cAAgB,EACrBnzH,KAAKqL,QAAUT,EACf5K,KAAKozH,SAAW/D,EAChBrvH,KAAKqzH,QAAUr8F,EACfh3B,KAAKszH,mBAAqB,aAAQjE,EAAQkE,aAAcjG,GAAYC,gBACpEvtH,KAAKwzH,uBAAyB,EAwShC,OArSAN,EAAWvyH,UAAUc,QAAU,WAC7B,GAAIzB,KAAKyzH,wBAAyB,CAChC,IAAIC,EAAa,GAEjB1zH,KAAKyzH,wBAAwB3lH,QAAQ,SAAU4L,GAC7C,OAAOg6G,EAAWtlH,KAAKsL,KAGzB1Z,KAAKqL,QAAQmB,iBAAiBknH,EAAY,IAG5C1zH,KAAKszH,mBAAmB/mH,OAAS,GAGnC2mH,EAAWvyH,UAAUgzH,iBAAmB,WACtC,IAAIvyH,EAAQpB,KAEZ,IAAIA,KAAKyzH,wBAAT,CAKAzzH,KAAKyzH,wBAA0B,IAAIloG,IAEnC,IAAI1e,EAAQ7M,KAAKqL,QAAQyB,WAEzB9M,KAAKqL,QAAQilB,kBAAkB,SAAU3lB,GAEvC,IAAK,IAAIiI,EAAK,EAAG+F,EAAKvX,EAAMgyH,SAASG,aAAc3gH,EAAK+F,EAAGpM,OAAQqG,IAAM,CACvE,IAAI+uC,EAAchpC,EAAG/F,GAEjBghH,EAAoBxyH,EAAMgyH,SAASp8F,OAAO2qB,GAE1CkyE,EAAiBzyH,EAAMgyH,SAASvE,QAAQltE,GAExCl0C,EAAQ,KAAM0G,cAActH,EAAMinH,cAAc1yH,EAAMiyH,QAAUO,GAAoB/mH,EAAMinH,cAAc1yH,EAAMiyH,QAAUO,EAAoBC,IAC5I1xH,EAAUw/C,EAAY6rE,eAAiB0F,EAAWa,OAAOC,cAAgBd,EAAWa,OAAOE,SAC3Fv6G,EAAS/O,EAASqiB,cAAcvf,EAAOtL,GAE3Cf,EAAMqyH,wBAAwBz7G,IAAI2pC,EAAajoC,QAKrDw5G,EAAWvyH,UAAUk2F,KAAO,SAAU1M,GACpC,IAAI/oF,EAAQpB,KAEZ,IAAKA,KAAKqL,QAAQuB,WAChB,MAAO,GAMT,GAHA5M,KAAK2zH,mBAGD3zH,KAAKwzH,uBAAyB,EAAG,CAGnC,IAFA,IAAIlhB,EAAa,GAER1/F,EAAK,EAAG+F,EAAK3Y,KAAKszH,mBAAmBtzH,KAAKwzH,uBAAwB5gH,EAAK+F,EAAGpM,OAAQqG,IAAM,CAC/F,IAAI+uC,EAAchpC,EAAG/F,GAErB,GAAI+uC,EAAY+rE,UAAW,CACzB,IAAI1nH,EAAKhG,KAAKyzH,wBAAwB7yH,IAAI+gD,GAEtCl0C,EAAQzN,KAAKqL,QAAQyB,WAAWwhB,mBAAmBtoB,GAEnDw/C,EAAexlD,KAAKqL,QAAQyB,WAAWoH,gBAAgBzG,GAE3D6kG,EAAWlkG,KAAK,KAAcs3D,YAAYj4D,EAAOk0C,EAAY+rE,UAAU9wG,QAAQ4oC,MAI/E8sD,EAAW/lG,OAAS,GACtBvM,KAAKqL,QAAQo6D,aAAa,+BAAgC6sC,GAI9D,IAAI4hB,GAAsB,GAEd,IAAR/pC,GAAgBnqF,KAAKwzH,sBAAwBxzH,KAAKszH,mBAAmB/mH,OAAS,GAChFvM,KAAKwzH,uBAAyB,EAC9BU,GAAsB,IACL,IAAR/pC,GAAiBnqF,KAAKwzH,sBAAwB,IACvDxzH,KAAKwzH,uBAAyB,EAC9BU,GAAsB,GAKxB,IAAInnH,EAAgB/M,KAAKqL,QAAQyB,WAAWwjB,kBAAkB,SAAU3lB,GAStE,IARA,IAAIwpH,EAAqB,IAAI1zE,IAMzB3xC,EAAa,GAER8D,EAAK,EAAG+F,EAAKvX,EAAMkyH,mBAAmBlyH,EAAMoyH,uBAAwB5gH,EAAK+F,EAAGpM,OAAQqG,IAAM,CACjG,IAAI+uC,EAAchpC,EAAG/F,GAEjB5M,EAAK5E,EAAMqyH,wBAAwB7yH,IAAI+gD,GAEvCl0C,EAAQrM,EAAMiK,QAAQyB,WAAWwhB,mBAAmBtoB,GAExD8I,EAAWV,KAAK,IAAI,IAAUX,EAAMQ,gBAAiBR,EAAMS,YAAaT,EAAM4D,cAAe5D,EAAM6D,YAInG4iH,EAAsBA,GAAuBzmH,EAAMwB,WAAa0yC,EAAYpgD,WAAWgL,OAAS,EAChG5B,EAASy4B,wBAAwBp9B,EAAI27C,EAAY6rE,eAAiB0F,EAAWa,OAAOK,YAAclB,EAAWa,OAAOM,QACpHF,EAAmB/6G,IAAIuoC,GAEvB,IAAK,IAAInwB,EAAK,EAAG+hE,EAAKnyF,EAAMgyH,SAAStE,sBAAsBntE,GAAcnwB,EAAK+hE,EAAGhnF,OAAQilB,IAAM,CAC7F,IAAI8iG,EAAuB/gC,EAAG/hE,GAE1B+iG,EAAOnzH,EAAMqyH,wBAAwB7yH,IAAI0zH,GAE7C3pH,EAASy4B,wBAAwBmxF,EAAMD,EAAqB9G,eAAiB0F,EAAWa,OAAOK,YAAclB,EAAWa,OAAOM,QAC/HF,EAAmB/6G,IAAIk7G,IAY3B,OANAlzH,EAAMqyH,wBAAwB3lH,QAAQ,SAAU9H,EAAI27C,GAC7CwyE,EAAmBh0G,IAAIwhC,IAC1Bh3C,EAASy4B,wBAAwBp9B,EAAI27C,EAAY6rE,eAAiB0F,EAAWa,OAAOC,cAAgBd,EAAWa,OAAOE,YAInHnlH,IAGT,OAAQolH,EAAsCl0H,KAAK62F,KAAK1M,GAA1Bp9E,GAGhC3M,OAAOM,eAAewyH,EAAWvyH,UAAW,uBAAwB,CAClEC,IAAK,WACH,OAAOZ,KAAKwzH,uBAAyB,GAAwC,IAAnCxzH,KAAKszH,mBAAmB/mH,QAEpEzL,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAewyH,EAAWvyH,UAAW,sBAAuB,CACjEC,IAAK,WACH,OAAOZ,KAAKwzH,wBAA0BxzH,KAAKszH,mBAAmB/mH,OAAS,GAEzEzL,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAewyH,EAAWvyH,UAAW,iBAAkB,CAC5DC,IAAK,WACH,OAAOZ,KAAKozH,SAASG,aAAahnH,OAAS,GAE7CzL,YAAY,EACZC,cAAc,IAGhBmyH,EAAWvyH,UAAU6zH,0BAA4B,WAG/C,IAFA,IAAIniH,EAAS,IAAIkZ,IAER3Y,EAAK,EAAG+F,EAAK3Y,KAAKszH,mBAAoB1gH,EAAK+F,EAAGpM,OAAQqG,IAI7D,IAHA,IACIkyB,OAAS,EAEJtT,EAAK,EAAGijG,EAHgB97G,EAAG/F,GAGwC4e,EAAKijG,EAA6BloH,OAAQilB,IAAM,CAC1H,IAAImwB,EAAc8yE,EAA6BjjG,GAE/C,GAAImwB,EAAY6rE,eAEd,MAGG1oF,IACHA,EAAS,GACTzyB,EAAO2F,IAAI2pC,EAAYnf,MAAOsC,IAGhC,IAAI9+B,EAAKhG,KAAKyzH,wBAAwB7yH,IAAI+gD,GAEtCl0C,EAAQzN,KAAKqL,QAAQyB,WAAWwhB,mBAAmBtoB,GAEvD,IAAKyH,EAAO,CAIV4E,EAAOsf,OAAOgwB,EAAYnf,OAC1B,MAGFsC,EAAO12B,KAAKX,GAIhB,OAAO4E,GAGTjS,OAAOM,eAAewyH,EAAWvyH,UAAW,SAAU,CACpDC,IAAK,WACH,OAAOZ,KAAKszH,mBAAmBtzH,KAAKwzH,uBAAuB,GAAGlD,QAEhExvH,YAAY,EACZC,cAAc,IAGhBmyH,EAAWvyH,UAAUq1C,MAAQ,SAAU82E,GACrC,IAAI1rH,EAAQpB,KAER6M,EAAQ7M,KAAKqL,QAAQyB,WAEzB9M,KAAKmzH,eAAiB,GAEtBnzH,KAAKqL,QAAQilB,kBAAkB,SAAU3lB,GAKvC,IAAK,IAAIiI,EAAK,EAAG+F,EAAKvX,EAAMkyH,mBAAmBlyH,EAAMoyH,uBAAwB5gH,EAAK+F,EAAGpM,OAAQqG,IAAM,CACjG,IAAI+uC,EAAchpC,EAAG/F,GACjB8hH,EAAS5H,EAAO7tF,QACpBoe,QAAQs3E,QAAQD,EAAOjB,yBAMvB,IAFA,IAAImB,EAAuBF,EAAOtB,SAASxE,gBAAgBtuE,KAAK9d,MAEvDhR,EAAK,EAAG+hE,EAAKmhC,EAAOtB,SAASxE,gBAAgBzyG,IAAKqV,EAAK+hE,EAAGhnF,OAAQilB,IAAM,CAC/E,IAAIqjG,EAAoBthC,EAAG/hE,GAEvBqjG,EAAkBrH,eACpBqH,EAAkBryF,MAAQmf,EAAYnf,OAASoyF,EAAuB,GAAKxzH,EAAM+xH,cAEjF0B,EAAkBryF,MAAQmf,EAAYnf,MAAQqyF,EAAkBryF,MAAQphC,EAAM+xH,cAIlF/xH,EAAMgyH,SAASj7F,QAAQwpB,EAAa+yE,EAAOtB,SAASv0E,UAIpD,IAAI74C,EAAK5E,EAAMqyH,wBAAwB7yH,IAAI+gD,GAE3Ch3C,EAASwiB,iBAAiBnnB,GAE1B5E,EAAMqyH,wBAAwB9hG,OAAOgwB,GAIrC,IAAK,IAAIo+D,EAAK,EAAGC,EAAK0U,EAAOtB,SAASG,aAAcxT,EAAKC,EAAGzzG,OAAQwzG,IAAM,CACxE,IAAI+U,EAAgB9U,EAAGD,GAEnB6T,EAAoBc,EAAOtB,SAASp8F,OAAO89F,GAE3CjB,EAAiBa,EAAOtB,SAASvE,QAAQiG,GAEzCrnH,EAAQ,KAAM0G,cAActH,EAAMinH,cAAcY,EAAOrB,QAAUO,GAAoB/mH,EAAMinH,cAAcY,EAAOrB,QAAUO,EAAoBC,IAC9In6G,EAAS/O,EAASqiB,cAAcvf,EAAOylH,EAAWa,OAAOE,UAE7D7yH,EAAMqyH,wBAAwBz7G,IAAI88G,EAAep7G,IAKrDtY,EAAMkyH,mBAAqB,aAAQlyH,EAAMgyH,SAASG,aAAcjG,GAAYC,mBAIhF2F,EAAWa,OAAS,CAClBM,OAAQ,IAAuBtuH,SAAS,CACtC2J,WAAY,EAGZC,UAAW,wBAEbskH,SAAU,IAAuBluH,SAAS,CACxC2J,WAAY,EAGZC,UAAW,wBAEbykH,YAAa,IAAuBruH,SAAS,CAC3C2J,WAAY,EAGZC,UAAW,+BAEbqkH,cAAe,IAAuBjuH,SAAS,CAC7C2J,WAAY,EAGZC,UAAW,gCAGRujH,EA/ST,GAoTI,GAEJ,WACE,SAAS6B,EAAenqH,EAAQ4vE,EAAUw6C,EAAiBC,EAAgBC,QACjD,IAApBF,IACFA,EAAkB,QAGG,IAAnBC,IACFA,EAAiB,QAGM,IAArBC,IACFA,GAAmB,GAGrBl1H,KAAKm1H,gBAAkB,GACvBn1H,KAAKo1H,UAAY,GACjBp1H,KAAKqL,QAAUT,EACf5K,KAAKq1H,UAAY76C,EACjBx6E,KAAKs1H,iBAAmBN,EACxBh1H,KAAKu1H,gBAAkBN,EACvBj1H,KAAKw1H,kBAAoBN,EAmW3B,OAhWAH,EAAeG,iBAAmB,SAAUroH,EAAO3B,EAAUmkH,GAC3D,IAAIhwG,EAAOxS,EAAMgF,eAAe3G,EAASwC,YACrCujH,EAAwB,aAAqB5xG,EAAM,EAAGnU,EAASyC,OAAS,GAC5E0hH,EAAQf,KAAK,SAAUpvG,GACrB,GAAIA,aAAkB2tG,MAAU3tG,EAAOkhC,kBAAkBqtE,IAAS,CAKhE,IAFA,IAAIl0F,EAAQra,EAAO3c,MAAM80C,MAAM,cAEtB7oC,EAAI,EAAGA,EAAI+qB,EAAMhtB,OAAQiC,IAAK,CACrC,IAAIinH,EAA4B,aAAqBl8F,EAAM/qB,IAC3D+qB,EAAM/qB,GAAK3B,EAAM6oH,qBAAqBzE,EAAwBwE,GAA6Bl8F,EAAM/qB,GAAGuvC,OAAO03E,EAA0BlpH,QAGvI,IAAI82C,EAAW9pB,EAAMhZ,KAAK1T,EAAM8oH,UAE5BtyE,IAAankC,EAAO3c,OACtB2c,EAAOkhC,OAAOjoB,QAAQjZ,EAAQ,CAAC,IAAI2tG,GAAKxpE,KAI5C,OAAO,KAIX0xE,EAAea,gBAAkB,SAAU/oH,EAAOK,EAAW8nH,EAAiBC,GAC5E,GAAwB,IAApBD,GAA4C,IAAnBC,EAAsB,CAGjD,IAAI9+G,EAAqBjJ,EAAUiJ,mBAC/BukB,EAAiBxtB,EAAUwtB,eAC3Bm7F,EAAuBn7F,EAAiBs6F,EACxCc,EAAsBp7F,EAAiBu6F,EACvCxnH,EAAQZ,EAAMgR,cAAc,CAC9B5P,gBAAiBkI,EACjBjI,YAAa2nH,EACbxkH,cAAe8E,EACf7E,UAAWwkH,IAEb5oH,EAAY,IAAUogG,oBAAoB7/F,EAAMQ,gBAAiBR,EAAMS,YAAaT,EAAM4D,cAAe5D,EAAM6D,UAAWpE,EAAUmgG,gBAGtI,OAAOngG,GAGT6nH,EAAegB,uBAAyB,SAAUnrH,EAAQ4vE,EAAUw6C,EAAiBC,EAAgB9F,EAAqB+F,GACxH,IAAInwD,EAAQ,GACRixD,EAAW,GAEf,IAAKprH,EAAOgC,WACV,MAAO,CACLm4D,MAAOA,EACPixD,SAAUA,GAkCd,IA9BA,IAAInpH,EAAQjC,EAAOkC,WACfmpH,EAA6B,IAAI,GAA2BppH,GAC5DulD,EAAmBxnD,EAAOinF,oBAAoB,SAAUlnF,GAC1D,OAAOA,EAAS/J,IAAI+wD,GAAmB,QAErCukE,EAAmBtrH,EAAOinF,oBAAoB,SAAUlnF,GAC1D,OAAOA,EAAS/J,IAAI,KAA0B,QAE5Co/E,EAAQ,EAIRm2C,EAAkBtpH,EAAMqH,gBAAgB6gH,EAAea,gBAAgB/oH,EAAOjC,EAAOoL,eAAgBg/G,EAAiB,IACtHoB,EAAiBvpH,EAAMqH,gBAAgB6gH,EAAea,gBAAgB/oH,EAAOjC,EAAOoL,eAAgB,EAAGi/G,IAGvGoB,EAA8BxpH,EAAMqJ,gCAAgCtL,EAAOoL,eAAeG,oBAK1FmgH,EAAoB1rH,EAAOoC,gBAAgBC,IAAI,SAAUC,EAAW6mE,GACtE,MAAO,CACL7mE,UAAWA,EACX6mE,IAAKA,KAEN7kE,KAAK,SAAUkM,EAAGlS,GACnB,OAAO,KAAMm8B,yBAAyBjqB,EAAElO,UAAWhE,EAAEgE,aAG9C0F,EAAK,EAAG2jH,EAAsBD,EAAmB1jH,EAAK2jH,EAAoBhqH,OAAQqG,IAAM,CAC/F,IAAI+F,EAAK49G,EAAoB3jH,GACzB1F,EAAYyL,EAAGzL,UACf6mE,EAAMp7D,EAAGo7D,IAGTyiD,EAAkBzB,EAAea,gBAAgB/oH,EAAOK,EAAW8nH,EAAiB,GACpFyB,EAAiB1B,EAAea,gBAAgB/oH,EAAOK,EAAW,EAAG+nH,GAErEkB,IAAoBtpH,EAAMqH,gBAAgBsiH,KAC5CA,EAAkBtpH,GAGhBkpH,IAAmBvpH,EAAMqH,gBAAgBuiH,KAC3CA,EAAiBvpH,GAInB,IAAIwpH,EAAmBxpH,EAAUqF,iBAAiBikH,EAAgBvoH,gBAAiBuoH,EAAgBtoH,aAAasE,eAAeikH,EAAeplH,cAAeolH,EAAenlH,WACxK+9G,GAAU,IAAIL,IAAgBpyE,MAAM49B,GAAU,EAAM20C,GAKpD57G,EAAQmjH,EAAiBvpH,oBAEzB+nH,GAAoBnhD,EAAM,GAAKsiD,IAAgCxpH,EAAMqJ,gCAAgChJ,EAAUiJ,sBACjH4+G,EAAeG,iBAAiBroH,EAAO0G,EAAO87G,GAGhDA,EAAQN,iBAAiB,IAAI+B,GAAiC,CAACmF,EAA4B,IAAI,GAA+B7jE,EAAkB2hB,EAAKuiD,EAAkB/pH,QAAS,IAAI,GAA+BM,EAAOK,GAAY,IAAI,GAA6BL,GAAQ,IAAI,GAA6B,IAAI,GAA+BqpH,MACnV,IAAIl/F,EAASnqB,EAAM8pH,YAAYpjH,GAASysE,EACxCA,GAASqvC,EAAQ9tH,WAAWgL,OAASM,EAAMolD,sBAAsBykE,GAIjE3xD,EAAMgP,GAAO,KAAc57C,QAAQu+F,EAAkBrH,EAAQ9tH,YAC7Dy0H,EAASjiD,GAAO,IAAI,GAAWnpE,EAAQykH,EAASr4F,GAGlD,MAAO,CACL+tC,MAAOA,EACPixD,SAAUA,IAIdjB,EAAep0H,UAAUc,QAAU,WACjC,YAAQzB,KAAKo1H,YAGfL,EAAep0H,UAAUi2H,SAAW,WAClC,MAAO,aAAgB52H,KAAKq1H,UAAY,wBAA4Br1H,KAAKm1H,gBAAgB50G,KAAK,QAAU,KAG1Gw0G,EAAep0H,UAAUy3B,OAAS,WAChC,IAAIh3B,EAAQpB,KAEZ,GAAKA,KAAKqL,QAAQuB,WAAlB,CAIA,IAAIC,EAAQ7M,KAAKqL,QAAQyB,WAGrB6L,EAAKo8G,EAAegB,uBAAuB/1H,KAAKqL,QAASrL,KAAKq1H,UAAWr1H,KAAKs1H,iBAAkBt1H,KAAKu1H,iBAAiB,EAAOv1H,KAAKw1H,mBAClIzwD,EAAQpsD,EAAGosD,MACXixD,EAAWr9G,EAAGq9G,SAElBh2H,KAAKo1H,UAAYY,EACjB,IAAIlnH,EAAajC,EAAMy6D,mBAAmBtnE,KAAKqL,QAAQ2B,gBAAiB+3D,EAAO,SAAUyC,GACvF,OAAIpmE,EAAMg0H,UAAU,GAAGyB,eACdz1H,EAAM01H,OAAM,GAEZtvD,EAAUv6D,IAAI,SAAU4a,GAC7B,OAAO,IAAU1T,cAAc0T,EAAKpa,MAAMU,sBAKhDnO,KAAKqL,QAAQuC,cAAckB,GAE3B9O,KAAKqL,QAAQwC,YAAYiB,EAAW,MAGtCimH,EAAep0H,UAAUq1C,MAAQ,SAAUwkC,EAAUw6C,EAAiBC,EAAgBC,GACpF,IAAI9zH,EAAQpB,KAcZ,QAZwB,IAApBg1H,IACFA,EAAkB,QAGG,IAAnBC,IACFA,EAAiB,QAGM,IAArBC,IACFA,GAAmB,GAGhBl1H,KAAKqL,QAAQuB,WAAlB,CAIA5M,KAAKm1H,gBAAgB/mH,KAAK,CAACpO,KAAKo1H,UAAU,GAAGjC,cAAenzH,KAAKo1H,UAAU,GAAG5B,sBAAuBh5C,IAErG,IAAI7hE,EAAKo8G,EAAegB,uBAAuB/1H,KAAKqL,QAASmvE,EAAUw6C,EAAiBC,GAAgB,EAAMC,GAC1GnwD,EAAQpsD,EAAGosD,MACXixD,EAAWr9G,EAAGq9G,SAElBh2H,KAAKqL,QAAQuC,cAAc5N,KAAKqL,QAAQyB,WAAWw6D,mBAAmBtnE,KAAKqL,QAAQ2B,gBAAiB+3D,EAAO,SAAUyC,GACnH,IAAK,IAAI50D,EAAK,EAAG+F,EAAKvX,EAAMg0H,UAAWxiH,EAAK+F,EAAGpM,OAAQqG,IAAM,CAC7C+F,EAAG/F,GACTojC,MAAMggF,GAKhB,OAFA34E,QAAQs3E,OAA2B,IAApBqB,EAASzpH,QAEpBnL,EAAMg0H,UAAU,GAAGyB,eACdz1H,EAAM01H,WAAM90H,GAEZwlE,EAAUv6D,IAAI,SAAU4a,GAC7B,OAAO,IAAU1T,cAAc0T,EAAKpa,MAAMU,yBAMlD4mH,EAAep0H,UAAUsgB,KAAO,WAC9B,IAAIlU,EAAgB/M,KAAK82H,OAAM,GAE/B92H,KAAKqL,QAAQuC,cAAcb,GAE3B/M,KAAKqL,QAAQk3D,wCAAwCx1D,EAAc,GAAG+G,gBAGxEihH,EAAep0H,UAAU6oH,KAAO,WAC9B,IAAIz8G,EAAgB/M,KAAK82H,OAAM,GAE/B92H,KAAKqL,QAAQuC,cAAcb,GAE3B/M,KAAKqL,QAAQk3D,wCAAwCx1D,EAAc,GAAG+G,gBAGxEihH,EAAep0H,UAAUm2H,MAAQ,SAAU3sC,GAGzC,IAFA,IAAIr7E,EAAa,GAER8D,EAAK,EAAG+F,EAAK3Y,KAAKo1H,UAAWxiH,EAAK+F,EAAGpM,OAAQqG,IAAM,CAC1D,IACImkH,EADUp+G,EAAG/F,GACUikF,KAAK1M,GAChCr7E,EAAWV,KAAKkS,MAAMxR,EAAYioH,GAGpC,OAAOjoH,GAGT1O,OAAOM,eAAeq0H,EAAep0H,UAAW,uBAAwB,CACtEC,IAAK,WACH,OAAOZ,KAAKo1H,UAAU,GAAG4B,sBAE3Bl2H,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAeq0H,EAAep0H,UAAW,sBAAuB,CACrEC,IAAK,WACH,OAAOZ,KAAKo1H,UAAU,GAAG6B,qBAE3Bn2H,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAeq0H,EAAep0H,UAAW,iBAAkB,CAChEC,IAAK,WACH,OAAOZ,KAAKo1H,UAAU,GAAGyB,gBAE3B/1H,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAeq0H,EAAep0H,UAAW,SAAU,CACxDC,IAAK,WACH,OAAOZ,KAAKo1H,UAAU,GAAG9E,QAE3BxvH,YAAY,EACZC,cAAc,IAGhBg0H,EAAep0H,UAAUu2H,8BAAgC,WACvD,IAAKl3H,KAAK62H,eACR,OAAO,EAGT,IAAI/nH,EAAa9O,KAAKqL,QAAQ2B,gBAE9B,GAAI8B,EAAWvC,OAASvM,KAAKo1H,UAAU7oH,OAIrC,OAAO,EAsCT,IAnCA,IAAI4qH,EAAwB,IAAI5rG,IAE5BjB,EAAU,SAAiB+kG,GAC7B,IAAIhuF,EAAqBguF,EAAQmF,4BAmBjC,GAfmC,IAA/B2C,EAAsB77C,MACxBj6C,EAAmBvzB,QAAQ,SAAUg3B,EAAQtC,GAC3CsC,EAAO51B,KAAK,KAAMm2B,0BAElB,IAAK,IAAIzyB,EAAK,EAAGC,EAAe/D,EAAY8D,EAAKC,EAAatG,OAAQqG,IAAM,CAC1E,IAAI1F,EAAY2F,EAAaD,GAE7B,GAAIkyB,EAAO,GAAGsG,cAAcl+B,GAAY,CACtCiqH,EAAsBn/G,IAAIwqB,EAAO,IACjC,UAM2B,IAA/B20F,EAAsB77C,KACxB,MAAO,CACL/4E,OAAO,GAMX40H,EAAsBrpH,QAAQ,SAAUspH,EAAO50F,GAC7C40F,EAAMhpH,KAAKkS,MAAM82G,EAAO/1F,EAAmBzgC,IAAI4hC,OAI1C5vB,EAAK,EAAG+F,EAAK3Y,KAAKo1H,UAAWxiH,EAAK+F,EAAGpM,OAAQqG,IAAM,CAC1D,IAEI0mD,EAAUhvC,EAFA3R,EAAG/F,IAIjB,GAAuB,kBAAZ0mD,EAAsB,OAAOA,EAAQ/2D,MAyBlD,OAnBAuM,EAAWI,KAAK,KAAMm2B,0BACtB8xF,EAAsBrpH,QAAQ,SAAUg3B,EAAQtC,GAC9C,GAAIsC,EAAOv4B,SAAWuC,EAAWvC,OAAjC,CAKAu4B,EAAO51B,KAAK,KAAMm2B,0BAElB,IAAK,IAAI72B,EAAI,EAAGA,EAAIs2B,EAAOv4B,OAAQiC,IACjC,IAAKs2B,EAAOt2B,GAAG48B,cAAct8B,EAAWN,IAEtC,YADA2oH,EAAsBxlG,OAAO6Q,QAR/B20F,EAAsBxlG,OAAO6Q,KAgB1B20F,EAAsB77C,KAAO,GAG/By5C,EAvXT,GCjVI,GAAwC,SAAUv+G,EAAY1T,EAAQ2N,EAAKgG,GAC7E,IAEIxN,EAFAyN,EAAIC,UAAUpK,OACdqK,EAAIF,EAAI,EAAI5T,EAAkB,OAAT2T,EAAgBA,EAAOrW,OAAOyW,yBAAyB/T,EAAQ2N,GAAOgG,EAE/F,GAAuB,kBAAZK,SAAoD,oBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASP,EAAY1T,EAAQ2N,EAAKgG,QAAW,IAAK,IAAIjI,EAAIgI,EAAWjK,OAAS,EAAGiC,GAAK,EAAGA,KAC1KvF,EAAIuN,EAAWhI,MAAIoI,GAAKF,EAAI,EAAIzN,EAAE2N,GAAKF,EAAI,EAAIzN,EAAEnG,EAAQ2N,EAAKmG,GAAK3N,EAAEnG,EAAQ2N,KAASmG,GAE5F,OAAOF,EAAI,GAAKE,GAAKxW,OAAOM,eAAeoC,EAAQ2N,EAAKmG,GAAIA,GAG1D,GAAkC,SAAUK,EAAYC,GAC1D,OAAO,SAAUpU,EAAQ2N,GACvByG,EAAUpU,EAAQ2N,EAAKwG,KAevB,GAEJ,WACE,SAASogH,EAAmBhsH,EAASisH,EAAalgH,GAChDpX,KAAKqL,QAAUA,EACfrL,KAAKs3H,YAAcA,EACnBt3H,KAAKu3H,iBAAmB,GACxBv3H,KAAKw3H,WAAaH,EAAmBI,cAAcjgH,OAAOJ,GAC1DpX,KAAK03H,gBAAkBL,EAAmBM,eAAengH,OAAOJ,GAChEpX,KAAK43H,gBAAkBP,EAAmBQ,eAAergH,OAAOJ,GAqPlE,OAlPAigH,EAAmBz2H,IAAM,SAAUgK,GACjC,OAAOA,EAAO6B,gBAAgB,uBAGhC4qH,EAAmB12H,UAAUc,QAAU,WACrCzB,KAAKw3H,WAAW5/G,QAEhB5X,KAAK43H,gBAAgBhgH,QAErB5X,KAAK03H,gBAAgB9/G,QAErB,YAAQ5X,KAAKu7G,WAGf8b,EAAmB12H,UAAUgM,MAAQ,WACnC,MAAO,sBAGT0qH,EAAmB12H,UAAUy3B,OAAS,SAAUoiD,EAAUw6C,EAAiBC,EAAgB6C,EAAgBC,EAAe7C,QAChG,IAApBF,IACFA,EAAkB,QAGG,IAAnBC,IACFA,EAAiB,QAGI,IAAnB6C,IACFA,GAAiB,QAGG,IAAlBC,IACFA,GAAgB,QAGO,IAArB7C,IACFA,GAAmB,GAMrB,IACEl1H,KAAKg4H,UAAUx9C,EAAUw6C,EAAiBC,EAAgB6C,EAAgBC,EAAe7C,GACzF,MAAOhpH,GACPlM,KAAKyd,SAELzd,KAAKs3H,YAAY7lG,MAAMvlB,GAEvBlM,KAAKs3H,YAAY7lG,MAAM,iBAEvBzxB,KAAKs3H,YAAY7lG,MAAM,mBAAoB+oD,GAE3Cx6E,KAAKs3H,YAAY7lG,MAAM,qBAAsBzxB,KAAKu7G,SAAWv7G,KAAKu7G,SAASqb,WAAa,kBAI5FS,EAAmB12H,UAAUq3H,UAAY,SAAUx9C,EAAUw6C,EAAiBC,EAAgB6C,EAAgBC,EAAe7C,GAC3H,IAAI9zH,EAAQpB,UAEY,IAApBg1H,IACFA,EAAkB,QAGG,IAAnBC,IACFA,EAAiB,QAGI,IAAnB6C,IACFA,GAAiB,QAGG,IAAlBC,IACFA,GAAgB,QAGO,IAArB7C,IACFA,GAAmB,GAGhBl1H,KAAKqL,QAAQuB,aAMlB5M,KAAKu3H,iBAAmB,YAAQv3H,KAAKu3H,kBAEjCO,GACF93H,KAAKqL,QAAQyB,WAAW6sG,mBAGrB35G,KAAKu7G,SAMRv7G,KAAKu7G,SAASvlE,MAAMwkC,EAAUw6C,EAAiBC,EAAgBC,IAL/Dl1H,KAAKi4H,gBAAkBj4H,KAAKqL,QAAQyB,WAAWorH,0BAC/Cl4H,KAAKu7G,SAAW,IAAI,GAAev7G,KAAKqL,QAASmvE,EAAUw6C,EAAiBC,EAAgBC,GAE5Fl1H,KAAKu7G,SAASnjF,UAKZ2/F,GACF/3H,KAAKqL,QAAQyB,WAAW6sG,mBAG1B35G,KAAKm4H,eAELn4H,KAAKu3H,iBAAmB,CAACv3H,KAAKqL,QAAQc,wBAAwB,SAAUD,GACtE,OAAOA,EAAEg9B,SAAW9nC,EAAMqc,WACxBzd,KAAKqL,QAAQe,iBAAiB,WAChC,OAAOhL,EAAMqc,WACXzd,KAAKqL,QAAQ2zB,2BAA2B,WAC1C,OAAO59B,EAAM+2H,oBAIjBd,EAAmB12H,UAAUw3H,aAAe,WAC1C,GAAKn4H,KAAKu7G,UAAav7G,KAAKqL,QAAQuB,WAApC,CAKA,GAAI5M,KAAKi4H,kBAAoBj4H,KAAKqL,QAAQyB,WAAWorH,0BAGnD,OAAOl4H,KAAKyd,SAGd,IAAKzd,KAAKu7G,SAASsb,eAGjB,OAAO72H,KAAKyd,SAGd,GAAIzd,KAAKu7G,SAAS0b,sBAAwBj3H,KAAKu7G,SAAS2b,gCACtD,OAAOl3H,KAAKyd,SAGdzd,KAAKw3H,WAAWx/G,KAAI,GAEpBhY,KAAK43H,gBAAgB5/G,KAAKhY,KAAKu7G,SAASyb,sBAExCh3H,KAAK03H,gBAAgB1/G,KAAKhY,KAAKu7G,SAAS0b,qBAExCj3H,KAAKo4H,kBAGPf,EAAmB12H,UAAUy3H,cAAgB,WAC3C,IAAIh3H,EAAQpB,KAEZ,GAAKA,KAAKu7G,UAAav7G,KAAKqL,QAAQuB,WAApC,CAKA,ILiHkChC,EAAQ8gH,EKjHtC4E,EAAStwH,KAAKu7G,SAAS+U,OAE3B,GAAKA,GAKL,GAAItwH,KAAKq4H,iBAAmB/H,EAAQ,CAClCtwH,KAAKq4H,eAAiB/H,EAEtBtwH,KAAKqL,QAAQuC,cAAc5N,KAAKqL,QAAQ2B,gBAAgBC,IAAI,SAAUiE,GACpE,OAAO,IAAUiD,cAAcjD,EAAE/D,uBAGnC,IAAImrH,EAAUhI,EAAOnuH,QAAQ,GLmGGyI,EKlGV5K,KAAKqL,QLkGaqgH,EKlGJ4E,EAAOnuH,QAAQ8K,IAAI,SAAUsrH,EAAQ/pH,GAGvE,MAAO,CACLiN,KAAM,GAGNvR,MAAOquH,EAAOh2H,MACdi2H,WAAYD,EAAOh2H,MAGnB8nH,SAAU,aAAO,IAAK77G,EAAI,GAC1Bf,MAAO,KAAM0G,cAAc/S,EAAMiK,QAAQyI,cAAe1S,EAAMiK,QAAQyI,cAAcksE,MAAM,EAAGs4C,EAAQ/1H,MAAMgK,YLuFnHzK,WAAW,WACT,IAAI6W,GAEHA,EAAKo9F,GAAUsW,qBAAqBj+G,KAAKkS,MAAM3H,EAAI+yG,GAEpD9gH,EAAO6B,gBAAgB,oCAAoCgsH,gBAAe,IAAIh4E,KAAMrnC,IAAI28F,MACvF,SKrHC/1G,KAAKq4H,oBAAiBr2H,OAPtBhC,KAAKq4H,oBAAiBr2H,GAqC1Bq1H,EAAmB12H,UAAU+3H,OAAS,WACpC,KAAO14H,KAAKw3H,WAAW52H,OACrBZ,KAAKihB,QAITo2G,EAAmB12H,UAAU8c,OAAS,SAAUk7G,QACvB,IAAnBA,IACFA,GAAiB,GAGnB34H,KAAKw3H,WAAW5/G,QAEhB5X,KAAK43H,gBAAgBhgH,QAErB5X,KAAK03H,gBAAgB9/G,QAErB,YAAQ5X,KAAKu3H,kBACb,YAAQv3H,KAAKu7G,UACbv7G,KAAKu7G,cAAWv5G,EAChBhC,KAAKi4H,iBAAmB,EAEpBU,GAIF34H,KAAKqL,QAAQuC,cAAc,CAAC5N,KAAKqL,QAAQ2K,kBAI7CqhH,EAAmB12H,UAAU6oH,KAAO,WAC9BxpH,KAAKu7G,UACPv7G,KAAKu7G,SAASiO,OAGhBxpH,KAAKm4H,gBAGPd,EAAmB12H,UAAUsgB,KAAO,WAC9BjhB,KAAKu7G,UACPv7G,KAAKu7G,SAASt6F,OAGhBjhB,KAAKm4H,gBAGPd,EAAmB12H,UAAUi4H,YAAc,WACzC,OAAOpuG,QAAQxqB,KAAKw3H,WAAW52H,QAGjCy2H,EAAmBI,cAAgB,IAAI,KAAc,iBAAiB,GACtEJ,EAAmBM,eAAiB,IAAI,KAAc,kBAAkB,GACxEN,EAAmBQ,eAAiB,IAAI,KAAc,kBAAkB,GACxER,EAAqB,GAAW,CAAC,GAAQ,EAAG,MAAc,GAAQ,EAAG,OAAsBA,GA3P7F,GAgQA,YAA2B,IAC3B,IAAIwB,GAAc,IAAcrgH,mBAAmB,GAAmB5X,KACtE,YAAsB,IAAIi4H,GAAY,CACpC7yH,GAAI,+BACJoE,aAAc,KAAege,IAAI,GAAmBqvG,cAAe,GAAmBE,gBACtFl/G,QAAS,SAAiBqgH,GACxB,OAAOA,EAAK73G,QAEd5W,OAAQ,CACNI,OAAQ,IAGRH,OAAQ,IAAkBC,gBAC1BC,QAAS,MAKb,YAAsB,IAAIquH,GAAY,CACpC7yH,GAAI,+BACJoE,aAAc,KAAege,IAAI,GAAmBqvG,cAAe,GAAmBI,gBACtFp/G,QAAS,SAAiBqgH,GACxB,OAAOA,EAAKtP,QAEdn/G,OAAQ,CACNI,OAAQ,IAGRH,OAAQ,IAAkBC,gBAC1BC,QAAS,SAOb,YAAsB,IAAIquH,GAAY,CACpC7yH,GAAI,eACJoE,aAAc,GAAmBqtH,cACjCh/G,QAAS,SAAiBqgH,GACxB,OAAOA,EAAKr7G,QAAO,IAErBpT,OAAQ,CACNI,OAAQ,IAGRH,OAAQ,IAAkBC,gBAC1BC,QAAS,EAGTmL,UAAW,CAAC,UAOhB,YAAsB,IAAIkjH,GAAY,CACpC7yH,GAAI,gBACJoE,aAAc,GAAmBqtH,cACjCh/G,QAAS,SAAiBqgH,GACxB,OAAOA,EAAKJ,a,IC9VLK,G,UCIP,GAAwC,SAAUviH,EAAY1T,EAAQ2N,EAAKgG,GAC7E,IAEIxN,EAFAyN,EAAIC,UAAUpK,OACdqK,EAAIF,EAAI,EAAI5T,EAAkB,OAAT2T,EAAgBA,EAAOrW,OAAOyW,yBAAyB/T,EAAQ2N,GAAOgG,EAE/F,GAAuB,kBAAZK,SAAoD,oBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASP,EAAY1T,EAAQ2N,EAAKgG,QAAW,IAAK,IAAIjI,EAAIgI,EAAWjK,OAAS,EAAGiC,GAAK,EAAGA,KAC1KvF,EAAIuN,EAAWhI,MAAIoI,GAAKF,EAAI,EAAIzN,EAAE2N,GAAKF,EAAI,EAAIzN,EAAEnG,EAAQ2N,EAAKmG,GAAK3N,EAAEnG,EAAQ2N,KAASmG,GAE5F,OAAOF,EAAI,GAAKE,GAAKxW,OAAOM,eAAeoC,EAAQ2N,EAAKmG,GAAIA,GAG1D,GAAkC,SAAUK,EAAYC,GAC1D,OAAO,SAAUpU,EAAQ2N,GACvByG,EAAUpU,EAAQ2N,EAAKwG,KAOvB,GAEJ,WACE,SAAS+hH,EAAoB3tH,EAAS+L,GACpCpX,KAAKqL,QAAUA,EACfrL,KAAKi5H,oBAAsBD,EAAoBE,iBAAiB1hH,OAAOJ,GA+FzE,OA5FA4hH,EAAoBr4H,UAAUc,QAAU,WACtCzB,KAAK4X,SAGPohH,EAAoBr4H,UAAUiX,MAAQ,WACpC5X,KAAKi5H,oBAAoBrhH,QAEzB,YAAQ5X,KAAKm5H,WACbn5H,KAAK0mB,YAAS1kB,EACdhC,KAAKo5H,iBAAcp3H,EACnBhC,KAAKq5H,SAAU,GAGjBL,EAAoBr4H,UAAUqX,IAAM,SAAUW,EAAI2gH,GAChD,IAAIl4H,EAAQpB,KAER6M,EAAQ8L,EAAG9L,MACX21B,EAAQ7pB,EAAG6pB,MAEY,IAAvB31B,EAAMs/G,MAAM5/G,OAMAysH,EAAoBO,YAAW,EAAM1sH,EAAO21B,KAE1CA,GAKlBxiC,KAAKo5H,YAAcE,EACnBt5H,KAAK0mB,OAAS7Z,EACd7M,KAAKw5H,OAASh3F,EACdxiC,KAAKm5H,UAAYn5H,KAAKqL,QAAQY,0BAA0B,WACjD7K,EAAMi4H,SACTj4H,EAAMwW,UAIV5X,KAAKi5H,oBAAoBjhH,KAAI,IAb3BhY,KAAK4X,QARL5X,KAAK4X,SAwBTohH,EAAoBO,WAAa,SAAUpvC,EAAKt9E,EAAO21B,GAGrD,IAFA,IAAIklB,EAAWllB,GAGbklB,GAAYA,EAAW76C,EAAMs/G,MAAM5/G,QAAU49E,EAAM,GAAM,IAAMt9E,EAAMs/G,MAAM5/G,UAE1Di2B,GAIZ31B,EAAMs/G,MAAMzkE,GAAUsiE,WAAW1jB,sBAKxC,OAAO5+C,GAGTsxE,EAAoBr4H,UAAUsgB,KAAO,WACnCjhB,KAAK82H,OAAM,IAGbkC,EAAoBr4H,UAAU6oH,KAAO,WACnCxpH,KAAK82H,OAAM,IAGbkC,EAAoBr4H,UAAUm2H,MAAQ,SAAU3sC,GAC9C,GAAKnqF,KAAK0mB,OAKV,IACE1mB,KAAKq5H,SAAU,EACfr5H,KAAKw5H,OAASR,EAAoBO,WAAWpvC,EAAKnqF,KAAK0mB,OAAQ1mB,KAAKw5H,QAEpEx5H,KAAKo5H,YAAY,CACf52F,MAAOxiC,KAAKw5H,OACZjvG,KAAMvqB,KAAK0mB,OAAOylG,MAAMnsH,KAAKw5H,QAC7B3sH,MAAO7M,KAAK0mB,SAEd,QACA1mB,KAAKq5H,SAAU,IAInBL,EAAoBE,iBAAmB,IAAI,KAAc,uBAAuB,GAChFF,EAAsB,GAAW,CAAC,GAAQ,EAAG,OAAsBA,GAjGrE,G,UCPI,IARJ,eAUA,WACE,SAASS,EAAgBtN,EAAOx+G,EAAQ+rH,EAAaC,EAAcx3H,QACjD,IAAZA,IACFA,EAAU,KAAgB2J,YAAYzE,SAGxCrH,KAAK45H,kBAAoBH,EAAgBI,wBACzC75H,KAAK85H,OAAS3N,EACdnsH,KAAK+5H,QAAUpsH,EACf3N,KAAKg6H,cAAgBL,EACrB35H,KAAKqG,SAAWlE,EAChBnC,KAAKi6H,cAAgB,EAGrBj6H,KAAKk6H,aAAeR,EAEK,QAArBv3H,EAAQ6zH,SACVh2H,KAAK45H,kBAAoBH,EAAgBU,kCACX,WAArBh4H,EAAQ6zH,WACjBh2H,KAAK45H,kBAAoBH,EAAgBW,qCAiR7C,OA7QAX,EAAgB94H,UAAUc,QAAU,WAGlC,IAFA,IAAIw3C,EAAO,IAAIwH,IAEN7tC,EAAK,EAAG+F,EAAK3Y,KAAK85H,OAAQlnH,EAAK+F,EAAGpM,OAAQqG,IAAM,CACvD,IAAI2uC,EAAY5oC,EAAG/F,GAAI2uC,UAElBtI,EAAK94B,IAAIohC,KACZtI,EAAK7/B,IAAImoC,GAEL,YAAaA,IACfA,EAAU9/C,aAMlBrB,OAAOM,eAAe+4H,EAAgB94H,UAAW,cAAe,CAC9DC,IAAK,WACH,OAAOZ,KAAKk6H,cAEdliH,IAAK,SAAazV,GACZvC,KAAKk6H,aAAaG,qBAAuB93H,EAAM83H,oBAAsBr6H,KAAKk6H,aAAaI,sBAAwB/3H,EAAM+3H,sBACvHt6H,KAAKi6H,cAAgBj6H,KAAKk6H,aAAaI,oBAAsB/3H,EAAM+3H,qBAAuBt6H,KAAKu6H,eAAiB,EAE9G,EAGFv6H,KAAKk6H,aAAe33H,IAGxBzB,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAe+4H,EAAgB94H,UAAW,QAAS,CACxDC,IAAK,WAGH,OAFAZ,KAAKw6H,qBAEEx6H,KAAKu6H,gBAEdz5H,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAe+4H,EAAgB94H,UAAW,aAAc,CAC7DC,IAAK,WAGH,OAFAZ,KAAKw6H,qBAEEx6H,KAAKy6H,eAEd35H,YAAY,EACZC,cAAc,IAGhB04H,EAAgB94H,UAAU+5H,MAAQ,SAAUC,GAG1C,IAFA,IAAIziG,EAAM,IAAI7uB,MAELmF,EAAI,EAAGA,EAAIxO,KAAK85H,OAAOvtH,QACzBouH,EAAOx6G,IAAIngB,KAAK85H,OAAOtrH,GAAG4N,UAQ7B5N,KAPA0pB,EAAI9pB,KAAKpO,KAAK85H,OAAOtrH,IAErBxO,KAAK85H,OAAOtrH,GAAKxO,KAAK85H,OAAO95H,KAAK85H,OAAOvtH,OAAS,GAElDvM,KAAK85H,OAAOz3G,OAUhB,OAHAriB,KAAKi6H,cAAgB,EAGd/hG,GAGT93B,OAAOM,eAAe+4H,EAAgB94H,UAAW,QAAS,CACxDC,IAAK,WAGH,OAFAZ,KAAKw6H,qBAEEx6H,KAAK46H,QAEd95H,YAAY,EACZC,cAAc,IAGhB04H,EAAgB94H,UAAU65H,mBAAqB,WAClB,IAAvBx6H,KAAKi6H,eAGLj6H,KAAK66H,sBAIXpB,EAAgB94H,UAAUk6H,mBAAqB,WAC7C76H,KAAKy6H,cAAgB,IAAIh6E,IACzBzgD,KAAK46H,OAAS,CACZE,gBAAiB,EACjBC,aAAc,EACdC,UAAW,GAiBb,IAfA,IAAIriH,EAAK3Y,KAAKk6H,aACVG,EAAqB1hH,EAAG0hH,mBACxBC,EAAsB3hH,EAAG2hH,oBACzBtoE,EAAO,GACPipE,EAAU,GAEVz0F,EAAgC,IAAvBxmC,KAAKi6H,cAEhBj6H,KAAK85H,OAAS95H,KAAKu6H,eACjBz3H,EAAS,GAITo4H,GAAWl7H,KAAKqG,SAAS80H,gBAAkB30F,EAAOj6B,OAAS,IAAO,KAAa,KAE1EiC,EAAI,EAAGA,EAAIg4B,EAAOj6B,OAAQiC,IAAK,CACtC,IAAI+b,EAAOic,EAAOh4B,GAGd+b,EAAKg3B,UAAUyqE,YACjBhsH,KAAKy6H,cAAcrhH,IAAImR,EAAKnO,UAM9B,IAAI44G,EAAkBzqG,EAAKrf,SAASyC,OAAS4c,EAAKy/F,WAAWv8G,MAAMS,YAC/DktH,EAAUpG,EAAkBsF,GAAuB/vG,EAAKrf,SAASyC,OAAS3N,KAAK+5H,SAWnF,GATI/nE,EAAKzlD,SAAW6uH,IAElBH,GADAjpE,EAAmB,IAAZopE,EAAgB,GAAKf,EAAmB/sF,OAAO8tF,IACvCpyG,eAKjBuB,EAAKynC,KAAOA,EAEI,IAAZopE,EAMF7wG,EAAK0/F,MAAQ,KAAW1L,YACnB,CAKL,IAFA,IAAI8c,EAAU,EAEPA,EAAUrG,GAAiB,CAChC,IAAI37E,EAAK2Y,EAAKv+C,WAAW4nH,GAEzB,GAAW,KAAPhiF,GAEM,IAAPA,EAKD,MAFEgiF,GAAW,EAMjB,GAAIA,GAAWD,EAGb7wG,EAAK0/F,MAAQ,KAAW1L,aACnB,GAA0C,kBAA/Bh0F,EAAKy/F,WAAWO,WAAyB,CAOzD,KAFI//E,EAAQ0wF,EAAQlpE,EAAMipE,EAASI,EAAS9wG,EAAKy/F,WAAWO,WAAYhgG,EAAK+/F,cAAe,GAAG,IAG7F,SAGF//F,EAAK0/F,MAAQ,aAASj4D,EAAMipE,EAAS,EAAG1wG,EAAKy/F,WAAW9/G,MAAOqgB,EAAK4/F,SAAU,GAC9E5/F,EAAK0/F,MAAM,GAAKz/E,EAAM,OACjB,CAEL,IAAIA,EAEJ,KAFIA,EAAQ0wF,EAAQlpE,EAAMipE,EAASI,EAAS9wG,EAAKy/F,WAAW9/G,MAAOqgB,EAAK4/F,SAAU,GAAG,IAGnF,SAGF5/F,EAAK0/F,MAAQz/E,GAUjB,OANAjgB,EAAKwpD,IAAMvlE,EACX+b,EAAK2/F,SAAWlqH,KAAKg6H,cAAc9P,SAAS3/F,EAAKrf,SAAUqf,EAAKy/F,YAChElnH,EAAOsL,KAAKmc,GAEZvqB,KAAK46H,OAAOE,kBAEJvwG,EAAKy/F,WAAWvuG,MACtB,KAAK,GAGHzb,KAAK46H,OAAOG,eACZ,MAEF,KAAK,GAGH/6H,KAAK46H,OAAOI,aAKlBh7H,KAAKu6H,eAAiBz3H,EAAOoM,KAAKlP,KAAK45H,mBACvC55H,KAAKi6H,cAAgB,GAKvBR,EAAgBI,wBAA0B,SAAUz+G,EAAGlS,GACrD,OAAIkS,EAAE6uG,MAAM,GAAK/gH,EAAE+gH,MAAM,IACf,EACC7uG,EAAE6uG,MAAM,GAAK/gH,EAAE+gH,MAAM,GACvB,EACE7uG,EAAE8uG,SAAWhhH,EAAEghH,UAChB,EACC9uG,EAAE8uG,SAAWhhH,EAAEghH,SACjB,EACE9uG,EAAE24D,IAAM7qE,EAAE6qE,KACX,EACC34D,EAAE24D,IAAM7qE,EAAE6qE,IACZ,EAEA,GAIX0lD,EAAgBW,oCAAsC,SAAUh/G,EAAGlS,GACjE,GAAIkS,EAAE4uG,WAAWvuG,OAASvS,EAAE8gH,WAAWvuG,KAAM,CAC3C,GAA0B,KAAtBL,EAAE4uG,WAAWvuG,KAGb,OAAO,EACF,GAA0B,KAAtBvS,EAAE8gH,WAAWvuG,KAGtB,OAAQ,EAId,OAAOg+G,EAAgBI,wBAAwBz+G,EAAGlS,IAGpDuwH,EAAgBU,kCAAoC,SAAU/+G,EAAGlS,GAC/D,GAAIkS,EAAE4uG,WAAWvuG,OAASvS,EAAE8gH,WAAWvuG,KAAM,CAC3C,GAA0B,KAAtBL,EAAE4uG,WAAWvuG,KAGb,OAAQ,EACH,GAA0B,KAAtBvS,EAAE8gH,WAAWvuG,KAGtB,OAAO,EAIb,OAAOg+G,EAAgBI,wBAAwBz+G,EAAGlS,IAG7CuwH,EApST,IChBI,GAAsC,WACxC,IAAIzwH,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA8BtC,GAEJ,WACE,SAAS8xH,KAyFT,OAvFAA,EAAaj7H,OAAS,SAAUk7H,EAAS3wH,GACvC,IAAKA,EAAOiB,mBAAmBC,YAAYzE,QAAQm0H,cACjD,OAAO7+G,QAAQC,QAAQ0+G,EAAax9G,MAGtC,IAAKlT,EAAOgC,WACV,OAAO+P,QAAQC,QAAQ0+G,EAAax9G,MAGtC,IAAIjR,EAAQjC,EAAOkC,WACf5B,EAAWN,EAAOkJ,cAEtB,OAAKynH,EAAQE,qBAAqB5uH,EAAMiS,MAIjC,IAAI,IAAgC4nG,uBAAuB75G,EAAO,CAAC3B,IAAW5H,KAAK,SAAUwhC,GAClG,OAAKA,GAA4B,IAAlBA,EAAOv4B,QAAqC,IAArBu4B,EAAO,GAAGv4B,OAIzCgvH,EAAQG,kBAAkB7uH,EAAMiS,IAAKgmB,EAAO,GAAG,GAAGr3B,OAAOnK,KAAK,SAAUq4H,GAC7E,OAAO,IAEP,SAAU5xH,GAGR,SAASmlE,IACP,OAAkB,OAAXnlE,GAAmBA,EAAOuW,MAAMtgB,KAAM2W,YAAc3W,KAsC7D,OAzCA,GAAUkvE,EAASnlE,GAMnBmlE,EAAQvuE,UAAUupH,SAAW,SAAU3wG,EAAQoyG,GAC7C,IAAKgQ,IAAezwH,EAASuE,OAAO7E,EAAOkJ,eACzC,OAAO,EAGT,GAAwB,KAApB63G,EAAWlwG,KAGX,OAAO,GAAK,GAGhB,IAAIu2C,EAAO25D,EAAWzhH,MAClB0xH,EAAYD,EAAW3pE,GAE3B,GAAI,aAAe4pE,GACjB,OAAO,GAAK,GAOd,IAJA,IAAI7nD,EAAM,aAAa6nD,EAAW,KAAMznH,cAAcoF,GAAS,KAAM8rB,0BACjEw2F,EAAgB9nD,GAAO,EAAI6nD,EAAU7nD,GAAO6nD,EAAUv6H,KAAKw5B,IAAI,GAAIk5C,EAAM,IACzE+nD,EAAgBh3F,EAAOv4B,OAElBqG,EAAK,EAAG+F,EAAKmsB,EAAO,GAAIlyB,EAAK+F,EAAGpM,OAAQqG,IAAM,CACrD,IAAInF,EAAQkL,EAAG/F,GAEf,IAAK,KAAMw4B,cAAc39B,EAAMA,MAAOouH,GACpC,MAGFC,GAAiB,EAGnB,OAAOA,GAGF5sD,EA5CE,CA6CTosD,MAjDKA,EAAax9G,OALfnB,QAAQC,QAAQ0+G,EAAax9G,OA2DxCw9G,EAAax9G,KAAO,IAEpB,SAAU/T,GAGR,SAASgyH,IACP,OAAkB,OAAXhyH,GAAmBA,EAAOuW,MAAMtgB,KAAM2W,YAAc3W,KAO7D,OAVA,GAAU+7H,EAAShyH,GAMnBgyH,EAAQp7H,UAAUupH,SAAW,WAC3B,OAAO,GAGF6R,EAbe,CActBT,IACKA,EA1FT,GCnBI,GAEJ,WACE,SAASU,EAAYnvH,EAAO3B,EAAU+wH,EAAMC,GAC1Cl8H,KAAKq6H,mBAAqBxtH,EAAMgF,eAAe3G,EAASwC,YAAYqwC,OAAO,EAAG7yC,EAASyC,OAAS,GAChG3N,KAAKm8H,YAActvH,EAAMslE,qBAAqBjnE,GAC9ClL,KAAK0N,WAAaxC,EAASwC,WAC3B1N,KAAK2N,OAASzC,EAASyC,OACvB3N,KAAKi8H,KAAOA,EACZj8H,KAAKk8H,IAAMA,EA4Bb,OAzBAF,EAAYI,kBAAoB,SAAUxxH,GACxC,IAAKA,EAAOgC,WACV,OAAO,EAGT,IAAIC,EAAQjC,EAAOkC,WACfob,EAAMtd,EAAOkJ,cACjBjH,EAAMwrB,gBAAgBnQ,EAAIxa,YAC1B,IAAIskD,EAAOnlD,EAAMklD,kBAAkB7pC,GAEnC,QAAK8pC,IAIDA,EAAK1gD,YAAc4W,EAAIva,UAItBg/G,MAAMlxF,OAAOu2B,EAAKA,SAOlBgqE,EAnCT,GAwCI,GAEJ,WACE,SAASK,EAAahxH,EAASixH,GAC7B,IAAIl7H,EAAQpB,KAEZA,KAAKqL,QAAUA,EACfrL,KAAKs8H,cAAgBA,EACrBt8H,KAAKw8B,WAAa,GAClBx8B,KAAKu8H,qBAAuB,IAAI,IAChCv8H,KAAKw8H,iBAAmB,IAAI,IAC5Bx8H,KAAK4f,OAAS,EAGd5f,KAAKy8H,aAAe,IAAI,KACxBz8H,KAAK08H,cAAgB,IAAI,KACzB18H,KAAK28H,cAAgB,IAAI,KACzB38H,KAAK48H,YAAc58H,KAAKy8H,aAAa57H,MACrCb,KAAK68H,aAAe78H,KAAK08H,cAAc77H,MACvCb,KAAK88H,aAAe98H,KAAK28H,cAAc97H,MACvCb,KAAK+8H,kBAAoB/8H,KAAKqL,QAAQ2K,gBAAkB,IAAI,IAAU,EAAG,EAAG,EAAG,GAE/EhW,KAAKw8B,WAAWpuB,KAAKpO,KAAKqL,QAAQe,iBAAiB,WACjDhL,EAAM47H,2BAEN57H,EAAMqc,YAGRzd,KAAKw8B,WAAWpuB,KAAKpO,KAAKqL,QAAQ2U,yBAAyB,WACzD5e,EAAM47H,2BAEN57H,EAAMqc,YAGRzd,KAAKw8B,WAAWpuB,KAAKpO,KAAKqL,QAAQiB,yBAAyB,WACzDlL,EAAM47H,2BAEN57H,EAAM67H,yBAGRj9H,KAAKw8B,WAAWpuB,KAAK,KAA2BmP,YAAY,WAC1Dnc,EAAM47H,2BAEN57H,EAAM87H,iCAGRl9H,KAAKw8B,WAAWpuB,KAAKpO,KAAKqL,QAAQ2zB,2BAA2B,SAAU9yB,GACrE9K,EAAMsd,gBAAgBxS,MAGxB,IAAIixH,GAAoB,EAExBn9H,KAAKw8B,WAAWpuB,KAAKpO,KAAKqL,QAAQ+xH,mBAAmB,WACnDD,GAAoB,KAGtBn9H,KAAKw8B,WAAWpuB,KAAKpO,KAAKqL,QAAQgyH,iBAAiB,WAEjDF,GAAoB,EAEpB/7H,EAAMk8H,8BAGRt9H,KAAKw8B,WAAWpuB,KAAKpO,KAAKqL,QAAQc,wBAAwB,WAInDgxH,GACH/7H,EAAMk8H,8BAIVt9H,KAAKg9H,2BAELh9H,KAAKi9H,sBA0dP,OAvdAZ,EAAa17H,UAAUc,QAAU,WAC/B,YAAQ,CAACzB,KAAKy8H,aAAcz8H,KAAK28H,cAAe38H,KAAK08H,cAAe18H,KAAKu9H,0BAA2Bv9H,KAAKu8H,qBAAsBv8H,KAAKw8H,mBACpIx8H,KAAKw8B,WAAa,YAAQx8B,KAAKw8B,YAC/B,YAAQx8B,KAAKw9H,kBACbx9H,KAAKyd,UAIP4+G,EAAa17H,UAAUs8H,oBAAsB,WAC3Cj9H,KAAKy9H,mBAAqBz9H,KAAKqL,QAAQQ,mBAAmBC,YAAY4xH,uBAElE/Q,MAAM3sH,KAAKy9H,sBAAwBz9H,KAAKy9H,oBAAkD,IAA5Bz9H,KAAKy9H,oBAA4Bz9H,KAAKy9H,mBAAqB,KAC3Hz9H,KAAKy9H,mBAAqB,KAI9BpB,EAAa17H,UAAUq8H,yBAA2B,WAChD,IAAI57H,EAAQpB,KAIZ,GAFA,YAAQA,KAAKu9H,4BAETv9H,KAAKqL,QAAQQ,mBAAmBuU,UAAapgB,KAAKqL,QAAQuB,YAAe5M,KAAKqL,QAAQQ,mBAAmBC,YAAY6xH,2BAAzH,CAMA,IAFA,IAAIC,EAA6Bx9H,OAAOC,OAAO,MAEtCuS,EAAK,EAAG+F,EAAK,KAA2BwD,IAAInc,KAAKqL,QAAQyB,YAAa8F,EAAK+F,EAAGpM,OAAQqG,IAG7F,IAFA,IAAIi2D,EAAUlwD,EAAG/F,GAER4e,EAAK,EAAG+hE,EAAK1qB,EAAQg1D,mBAAqB,GAAIrsG,EAAK+hE,EAAGhnF,OAAQilB,IAAM,CAC3E,IAAI6nB,EAAKk6C,EAAG/hE,GACRxZ,EAAM4lH,EAA2BvkF,GAEhCrhC,IACHA,EAAM4lH,EAA2BvkF,GAAM,IAAIoH,KACvCrnC,IV/DLwwG,IUkED5xG,EAAIoB,IAAIyvD,GAIZ7oE,KAAKu9H,0BAA4Bv9H,KAAKqL,QAAQ09D,UAAU,SAAUnwD,GAChE,IAAIklH,EAAWllH,EAAK4+B,OAAO5+B,EAAKrM,OAAS,GACrCuxG,EAAW8f,EAA2BE,GAE1C,GAAIhgB,EAAU,CAGZ,IAAIqO,EAAQ/qH,EAAMo8H,iBAAmBp8H,EAAMo8H,iBAAiB9C,MAAM5c,QAAY97G,EAE9EZ,EAAMkU,QAAQ,CACZ2mH,MAAM,EACNC,KAAK,EACL/d,iBAAkB2f,GACjBtzG,QAAQppB,EAAMo8H,kBAAmB1f,EAAUqO,QAKpD/rH,OAAOM,eAAe27H,EAAa17H,UAAW,QAAS,CAErDC,IAAK,WACH,OAAOZ,KAAK4f,QAEd9e,YAAY,EACZC,cAAc,IAGhBs7H,EAAa17H,UAAU8c,OAAS,SAAUsgH,QACtB,IAAdA,IACFA,GAAY,GAGM,IAAhB/9H,KAAK4f,SAGL5f,KAAKw8H,iBAAiB/+G,SAEtBzd,KAAKu8H,qBAAqB9+G,SAEtBzd,KAAKg+H,gBACPh+H,KAAKg+H,cAAcvgH,SAEnBzd,KAAKg+H,mBAAgBh8H,GAGvBhC,KAAK4f,OAAS,EAGd,YAAQ5f,KAAKw9H,kBACbx9H,KAAKw9H,sBAAmBx7H,EACxBhC,KAAKi+H,cAAWj8H,EAEhBhC,KAAKy8H,aAAa16H,KAAK,CACrBg8H,UAAWA,MAKnB1B,EAAa17H,UAAUu8H,4BAA8B,WAC/B,IAAhBl9H,KAAK4f,SAGA5f,KAAKqL,QAAQuB,YAAe,KAA2BuT,IAAIngB,KAAKqL,QAAQyB,YAG3E9M,KAAKsV,QAAQ,CACX2mH,KAAsB,IAAhBj8H,KAAK4f,OAGXs8G,KAAK,IACJ,GAPHl8H,KAAKyd,WAYb4+G,EAAa17H,UAAU+d,gBAAkB,SAAUxS,GACjD,IAAI9K,EAAQpB,KAEZ,GAAKA,KAAKqL,QAAQuB,WAAlB,CAIA,IAAIC,EAAQ7M,KAAKqL,QAAQyB,WAErBoxH,EAAgBl+H,KAAK+8H,kBAGzB,GAFA/8H,KAAK+8H,kBAAoB/8H,KAAKqL,QAAQ2K,gBAEjC9J,EAAEgB,UAAU+B,WAA0B,IAAb/C,EAAE88B,QAEhB,aAAb98B,EAAEs6B,QAAsC,eAAbt6B,EAAEs6B,OAGV,IAAhBxmC,KAAK4f,QAGL5f,KAAKyd,cAMX,GAAK,KAA2B0C,IAAItT,IAIhB,IAAhB7M,KAAK4f,OAEP,CACE,IAAqE,IAAjE5f,KAAKqL,QAAQQ,mBAAmBC,YAAYqyH,iBAE9C,OAGF,IAAKD,EAAc9yF,cAAcprC,KAAK+8H,qBAAuBmB,EAAc/vH,iBAAiBwoF,gBAAgB32F,KAAK+8H,kBAAkBjpH,eAEjI,OAGF,GAAI9T,KAAKqL,QAAQQ,mBAAmBC,YAAYzE,QAAQ+2H,iCAAmC,GAAmBx9H,IAAIZ,KAAKqL,SAASutH,cAE9H,OAGF54H,KAAKyd,SAELzd,KAAKu8H,qBAAqBx9G,aAAa,WACrC,GAAK,GAAYq9G,kBAAkBh7H,EAAMiK,UAIpCjK,EAAMiK,QAAQuB,WAAnB,CAIA,IAAIC,EAAQzL,EAAMiK,QAAQyB,WAEtBob,EAAM9mB,EAAMiK,QAAQyI,cAGpBqqH,EAAmB/8H,EAAMiK,QAAQQ,mBAAmBC,YAAYqyH,iBAEpE,IAAyB,IAArBA,EAAJ,CAEO,IAAyB,IAArBA,OACJ,CAELtxH,EAAMwrB,gBAAgBnQ,EAAIxa,YAC1B,IAAI2wH,EAAaxxH,EAAMyhG,cAAcpmF,EAAIxa,YACrC4wH,EAAYD,EAAWE,qBAAqBF,EAAWG,uBAAuBn9H,KAAKw5B,IAAI3S,EAAIva,OAAS,EAAI,EAAG,KAS/G,KARmBwwH,EAAiB3jH,OAAuB,IAAd8jH,GAE1CH,EAAiBv6D,UAA0B,IAAd06D,GAE7BH,EAAiBlkG,SAAyB,IAAdqkG,GAK7B,OAKJl9H,EAAMkU,QAAQ,CACZ2mH,MAAM,EACNC,KAAK,OAENl8H,KAAKy9H,uBAIdpB,EAAa17H,UAAU28H,yBAA2B,WAChD,IAAIl8H,EAAQpB,KAEQ,IAAhBA,KAAK4f,QAMJ5f,KAAKqL,QAAQuB,YAKlB5M,KAAKw8H,iBAAiBz9G,aAAa,WACjC,GAAK3d,EAAMiK,QAAQuB,WAAnB,CAIA,IAAIC,EAAQzL,EAAMiK,QAAQyB,WAEtB5B,EAAW9J,EAAMiK,QAAQyI,cAEzBgoF,EAAM,IAAI,GAAYjvF,EAAO3B,EAA2B,IAAjB9J,EAAMwe,QAE/C,GAEFxe,EAAMq9H,cAAc3iC,KACnB,IAGLugC,EAAa17H,UAAU2U,QAAU,SAAUq9F,EAASorB,EAAWW,EAAUC,GACvE,IAAIv9H,EAAQpB,KAMZ,QAJkB,IAAd+9H,IACFA,GAAY,GAGT/9H,KAAKqL,QAAQuB,WAAlB,CAIA,IAoBIgyH,EApBA/xH,EAAQ7M,KAAKqL,QAAQyB,WAErBmvH,EAAOtpB,EAAQspB,KACfngC,EAAM,IAAI,GAAYjvF,EAAO7M,KAAKqL,QAAQyI,cAAemoH,EAAMtpB,EAAQupB,KAE3El8H,KAAKyd,OAAOsgH,GACZ/9H,KAAK4f,OAASq8G,EAAO,EAEnB,EAIFj8H,KAAK08H,cAAc36H,KAAK,CACtBk6H,KAAMA,EACNC,IAAKvpB,EAAQupB,MAIfl8H,KAAKi+H,SAAWniC,EAKd8iC,EADEjsB,EAAQwL,iBACG,CACXH,YAAa,EAGbG,iBAAkBxL,EAAQwL,kBAEnBugB,GAAYA,EAASpjD,KAAO,EACxB,CACX0iC,YAAa,GAKF,CACXA,YAAa,GAMjBh+G,KAAKg+H,cAAgB,IAAI,KAEzB,IAAIlyH,EAAc9L,KAAKqL,QAAQQ,mBAAmBC,YAE9C+yH,EAAiB,IAAIp+E,IACrBoqE,EAAmB,EAIvB,OAAQ/+G,EAAYzE,QAAQ2uH,UAC1B,IAAK,MACHnL,EAAmB,EAGnB,MAMF,IAAK,SACHA,EAAmB,EAGnB,MAEF,IAAK,OACHgU,EAAezlH,IAAI,IAOvB,IAAK,IAAI3I,KAAO3E,EAAYzE,QAAQy3H,cAAe,CACjD,IAAIrjH,EAAO,aAAyBhL,GAAK,GAErB,qBAATgL,IAAmE,IAA3C3P,EAAYzE,QAAQy3H,cAAcruH,IACnEouH,EAAezlH,IAAIqC,GAIvB,IAAIk+G,EAAe,GAAat5H,OAAOL,KAAKs8H,cAAet8H,KAAKqL,SAC5D8gH,EAAQlB,GAAuBp+G,EAAO7M,KAAKqL,QAAQyI,cAAe,IAAI82G,GAAkBC,EAAkBgU,EAAgBH,GAAWE,EAAY5+H,KAAKg+H,cAAcniH,OACxKc,QAAQR,IAAI,CAACgwG,EAAOwN,IAAer2H,KAAK,SAAUqV,GAChD,IAAIwzG,EAAQxzG,EAAG,GACXghH,EAAehhH,EAAG,GAGtB,GAFA,YAAQvX,EAAM48H,eAEO,IAAjB58H,EAAMwe,QAMLxe,EAAMiK,QAAQuB,WAAnB,CAIA,IAAIC,EAAQzL,EAAMiK,QAAQyB,WAE1B,GAAI,aAAgB6xH,GAAgB,CAClC,IAAII,EAAQnT,GAAwBf,GACpCsB,EAAQA,EAAMpkG,OAAO42G,GAAezvH,KAAK6vH,GAG3C,IAAIjjC,EAAM,IAAI,GAAYjvF,EAAOzL,EAAMiK,QAAQyI,cAAemoH,EAAMtpB,EAAQupB,KAC5E,YAAQ96H,EAAMo8H,kBACdp8H,EAAMo8H,iBAAmB,IAAI,GAAgBrR,EAAO/qH,EAAM68H,SAAStwH,OAAQ,CACzE0sH,mBAAoBv+B,EAAIu+B,mBACxBC,oBAAqBx+B,EAAInuF,OAASvM,EAAM68H,SAAStwH,QAChDgsH,EAAcv4H,EAAMiK,QAAQQ,mBAAmBC,YAAYzE,SAE9DjG,EAAMq9H,cAAc3iC,MACnB52E,MAAM,QAGXm3G,EAAa17H,UAAU89H,cAAgB,SAAU3iC,GAC/C,GAAK97F,KAAKi+H,SAKV,GAAIniC,EAAIpuF,aAAe1N,KAAKi+H,SAASvwH,YAMrC,GAAIouF,EAAIqgC,YAAYjuH,YAAclO,KAAKi+H,SAAS9B,YAAYjuH,YAE1DlO,KAAKyd,cAIP,GAAIq+E,EAAInuF,OAAS3N,KAAKi+H,SAAStwH,OAEzBmuF,EAAIqgC,YAAYnqE,KAClBhyD,KAAKsV,QAAQ,CACX2mH,KAAMj8H,KAAKi+H,SAAShC,KACpBC,KAAK,IACJ,GAEHl8H,KAAKyd,cAMT,GAAKzd,KAAKw9H,iBAKV,GAAI1hC,EAAInuF,OAAS3N,KAAKi+H,SAAStwH,QAAU3N,KAAKw9H,iBAAiBxR,WAAW1wC,KAAO,GAAqC,IAAhCwgB,EAAIqgC,YAAYnqE,KAAKzlD,OAAc,CAEvH,IAAIy/G,EAAahsH,KAAKw9H,iBAAiBxR,WAEnCgT,EAAUh/H,KAAKw9H,iBAAiB9C,MAAM1O,GAE1ChsH,KAAKsV,QAAQ,CACX2mH,KAAsB,IAAhBj8H,KAAK4f,OAGXs8G,KAAK,IACJ,EAAMlQ,EAAYgT,OAChB,CAEL,IAAIC,EAAiBj/H,KAAKw9H,iBAAiB9D,YACvCwF,GAAW,EAMf,GALAl/H,KAAKw9H,iBAAiB9D,YAAc,CAClCW,mBAAoBv+B,EAAIu+B,mBACxBC,oBAAqBx+B,EAAInuF,OAAS3N,KAAKi+H,SAAStwH,QAGP,IAAvC3N,KAAKw9H,iBAAiBrR,MAAM5/G,OAAc,CAC5C,GAAI,GAAY6vH,kBAAkBp8H,KAAKqL,UAAYrL,KAAKi+H,SAAS9B,YAAY7qH,UAAYwqF,EAAIqgC,YAAYjuH,YAMvG,YAJAlO,KAAKsV,QAAQ,CACX2mH,KAAMj8H,KAAKi+H,SAAShC,KACpBC,KAAK,IACJ,GAIL,GAAKl8H,KAAKi+H,SAAShC,KAcjB,YADAj8H,KAAKyd,SARL,GAHAzd,KAAKw9H,iBAAiB9D,YAAcuF,GACpCC,EAAWl/H,KAAKw9H,iBAAiBrR,MAAM5/G,OAAS,IAEA,IAAhCuvF,EAAIqgC,YAAYnqE,KAAKzlD,OAInC,YADAvM,KAAKyd,SAUXzd,KAAK28H,cAAc56H,KAAK,CACtBo9H,gBAAiBn/H,KAAKw9H,iBACtBvB,KAAMj8H,KAAKi+H,SAAShC,KACpBC,IAAKl8H,KAAKi+H,SAAS/B,IACnBgD,SAAUA,UAlFZl/H,KAAKyd,UAuFF4+G,EAliBT,G,uCCrDO,SAAS+C,GAAeC,EAAc1vC,EAAahyE,EAAU2hH,GAElE,IAAIlpD,EAAUkpD,IAAavG,GAASwG,YAAc,CAAC,mBAAqBD,IAAavG,GAASyG,OAAS,CAAC,eAAiB,CAAC,aAE1H,GAAI7hH,EAAU,CAEZ,IAAI2zG,EACAj5C,OAAO,EAEX,GAAI16D,EAASm6D,SAAW,KAAQzsD,KAG9BgtD,EADAi5C,EADe,KAAQmO,cAAc9hH,GACnB/c,IAAI,KAAQ8+H,sBAG9BpO,EAASqO,GAAU,aAAoBhiH,GAAUqL,eACjDqvD,EAAO16D,EAAS06D,KAAKrvD,cAIvB,GAAIs2G,IAAavG,GAASyG,OACxBppD,EAAQhoE,KAAKkjH,EAAS,yBAEnB,CAED,GAAIA,EAAQ,CACVl7C,EAAQhoE,KAAKkjH,EAAS,mBAGtB,IAFA,IAAIsO,EAActO,EAAOj6E,MAAM,KAEtB7oC,EAAI,EAAGA,EAAIoxH,EAAYrzH,OAAQiC,IACtC4nE,EAAQhoE,KAAKwxH,EAAYtyF,MAAM9+B,GAAG+R,KAAK,KAAO,kBAGhD61D,EAAQhoE,KAAK,iBAIf,IAAIyxH,EAWL,SAA6BR,EAAc1vC,EAAahyE,GAC7D,IAAIkiH,EAAmB,KAEvB,GAAIliH,EAAU,CACZ,IAAI8yE,EAAS,KAEb,GAAI9yE,EAASm6D,SAAW,KAAQzsD,KAAM,CACpC,IACIy0G,EADW,KAAQL,cAAc9hH,GACjB/c,IAAI,KAAQm/H,gBAE5BD,IACFrvC,EAASd,EAAYqwC,UAAUF,QAG9B,CACD,IAAIjzH,EAAQwyH,EAAavyH,SAAS6Q,GAE9B9Q,IACF4jF,EAAS5jF,EAAMioB,wBAAwBvsB,UAIzCkoF,GAAUA,IAAW,OACvBovC,EAAmBpvC,GAIvB,OAAOovC,EAtCsBI,CAAoBZ,EAAc1vC,EAAahyE,IACtEkiH,EAAmBA,IAAqBxnD,EAAOsX,EAAYe,+BAA+BrY,GAAQ,QAGhGjC,EAAQhoE,KAAKuxH,GAAUE,GAAoB,oBAKnD,OAAOzpD,EA+BF,SAASupD,GAAUxsG,GACxB,OAAOA,EAAIgF,QAAQ,MAAO,SLnF5B,SAAW4gG,GACTA,EAASA,EAAe,KAAI,GAAK,OACjCA,EAASA,EAAiB,OAAI,GAAK,SACnCA,EAASA,EAAsB,YAAI,GAAK,cAH1C,CAIGA,KAAaA,GAAW,KMF3B,IAAI,GAAoC,WAatC,OAZA,GAAW34H,OAAOk+G,QAAU,SAAU98F,GACpC,IAAK,IAAItQ,EAAG1C,EAAI,EAAGyT,EAAItL,UAAUpK,OAAQiC,EAAIyT,EAAGzT,IAG9C,IAAK,IAAIlF,KAFT4H,EAAIyF,UAAUnI,GAGRpO,OAAOO,UAAU4I,eAAeU,KAAKiH,EAAG5H,KAAIkY,EAAElY,GAAK4H,EAAE5H,IAI7D,OAAOkY,IAGOlB,MAAMtgB,KAAM2W,YAG1B,GAAwC,SAAUH,EAAY1T,EAAQ2N,EAAKgG,GAC7E,IAEIxN,EAFAyN,EAAIC,UAAUpK,OACdqK,EAAIF,EAAI,EAAI5T,EAAkB,OAAT2T,EAAgBA,EAAOrW,OAAOyW,yBAAyB/T,EAAQ2N,GAAOgG,EAE/F,GAAuB,kBAAZK,SAAoD,oBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASP,EAAY1T,EAAQ2N,EAAKgG,QAAW,IAAK,IAAIjI,EAAIgI,EAAWjK,OAAS,EAAGiC,GAAK,EAAGA,KAC1KvF,EAAIuN,EAAWhI,MAAIoI,GAAKF,EAAI,EAAIzN,EAAE2N,GAAKF,EAAI,EAAIzN,EAAEnG,EAAQ2N,EAAKmG,GAAK3N,EAAEnG,EAAQ2N,KAASmG,GAE5F,OAAOF,EAAI,GAAKE,GAAKxW,OAAOM,eAAeoC,EAAQ2N,EAAKmG,GAAIA,GAG1D,GAAkC,SAAUK,EAAYC,GAC1D,OAAO,SAAUpU,EAAQ2N,GACvByG,EAAUpU,EAAQ2N,EAAKwG,KAwChBipH,GAAgC,aAAc,iCAAkC,CACzFv2H,KAAM,IACNC,MAAO,IACPC,GAAI,KACHC,EAAA,EAAa,gCAAiC,4CACtCq2H,GAA4B,aAAc,6BAA8B,CACjFx2H,KAAM,IACNC,MAAO,IACPC,GAAI,KACHC,EAAA,EAAa,4BAA6B,wCAClCs2H,GAAgC,aAAc,iCAAkC,CACzFz2H,KAAM,IACNC,MAAO,IACPC,GAAI,KACHC,EAAA,EAAa,gCAAiC,4CACtCu2H,GAAwC,aAAc,yCAA0C,CACzG12H,KAAM,KACNC,MAAO,KACPC,GAAI,MACHC,EAAA,EAAa,wCAAyC,kEAC9Cw2H,GAAyC,aAAc,0CAA2C,CAC3G32H,KAAM,KACNC,MAAO,KACPC,GAAI,MACHC,EAAA,EAAa,yCAA0C,yDACtDy2H,GAAc,8HAgBlB,SAASC,GAAwBj2G,GAC/B,IAAKA,EACH,OAAO,EAGT,IAAIohG,EAAaphG,EAAKy/F,WAEtB,QAAI2B,EAAWhK,eAIRgK,EAAW1pD,QAAU0pD,EAAW1pD,SAAW0pD,EAAWzhH,MAG/D,IAAI,GAEJ,WACE,SAASyuC,EAASwP,EAAQv9C,EAAQ61H,EAAwBC,EAAe7/B,EAActsC,GACrFv0D,KAAKmoD,OAASA,EACdnoD,KAAK4K,OAASA,EACd5K,KAAKygI,uBAAyBA,EAC9BzgI,KAAK0gI,cAAgBA,EACrB1gI,KAAK6gG,aAAeA,EACpB7gG,KAAKu0D,cAAgBA,EAsIvB,OAnIAn0D,OAAOM,eAAei4C,EAASh4C,UAAW,aAAc,CACtDC,IAAK,WACH,MAAO,cAETE,YAAY,EACZC,cAAc,IAGhB43C,EAASh4C,UAAUy5E,eAAiB,SAAU74B,GAC5C,IAAIngD,EAAQpB,KAERqrB,EAAOjrB,OAAOC,OAAO,MACzBgrB,EAAKi0E,YAAc,GACnBj0E,EAAK+oB,KAAOmN,EACZ,aAASl2B,EAAK+oB,KAAM,mBACpB/oB,EAAK+S,KAAO,aAAOmjB,EAAW,aAAE,UAChCl2B,EAAKs1G,UAAY,aAAOt1G,EAAK+S,KAAM,aAAE,mBACrC,IAAIxlB,EAAO,aAAO2oC,EAAW,aAAE,cAC3Bq/E,EAAO,aAAOhoH,EAAM,aAAE,UAC1ByS,EAAKw1G,UAAY,IAAI,GAAUD,EAAM,CACnC9qD,mBAAmB,IAErBzqD,EAAKi0E,YAAYlxF,KAAKid,EAAKw1G,WAC3Bx1G,EAAKy1G,UAAY,aAAOF,EAAM,aAAE,oBAChCv1G,EAAK01G,SAAW,aAAOH,EAAM,aAAE,kBAC/Bv1G,EAAK01G,SAASvwH,MAAQ1G,EAAA,EAAa,WAAY,kBAAmB9J,KAAKygI,wBAEvE,IAAIO,EAAgB,WAClB,IAAIv1C,EAAgBrqF,EAAMwJ,OAAOiB,mBAE7By1F,EAAa7V,EAAc/lE,SAAS47E,WACpCv1E,EAAW0/D,EAAc3/E,YAAYm1H,iBAAmBx1C,EAAc/lE,SAASqG,SAC/E1H,EAAaonE,EAAc3/E,YAAYo1H,mBAAqBz1C,EAAc/lE,SAASrB,WACnF4/F,EAAax4B,EAAc/lE,SAASu+F,WACpCkd,EAAap1G,EAAW,KACxBq1G,EAAe/8G,EAAa,KAChCgH,EAAK+oB,KAAKvoB,MAAME,SAAWo1G,EAC3B91G,EAAK+oB,KAAKvoB,MAAMo4F,WAAaA,EAC7B2c,EAAK/0G,MAAMy1E,WAAaA,EACxBs/B,EAAK/0G,MAAMxH,WAAa+8G,EACxB/1G,EAAK+S,KAAKvS,MAAM/H,OAASs9G,EACzB/1G,EAAK+S,KAAKvS,MAAMuK,MAAQgrG,EACxB/1G,EAAK01G,SAASl1G,MAAM/H,OAASs9G,EAC7B/1G,EAAK01G,SAASl1G,MAAMuK,MAAQgrG,GAO9B,OAJAJ,IACA,KAAM7f,MAAMnhH,KAAK4K,OAAO0B,yBAAyBukC,KAAK7wC,KAAK4K,SAASkR,OAAO,SAAU5P,GACnF,OAAOA,EAAEwZ,UAAYxZ,EAAEJ,cACtBs1G,GAAG4f,EAAe,KAAM31G,EAAKi0E,aACzBj0E,GAGTstB,EAASh4C,UAAU25E,cAAgB,SAAUhpD,EAASkoG,EAAQ7+C,GAC5D,IAAIv5E,EAAQpB,KAERqrB,EAAOsvD,EACPgxC,EAAar6F,EAAQ04F,WACzB3+F,EAAK+S,KAAKzuB,UAAY,QAAU,aAAyBg8G,EAAWlwG,MACpE4P,EAAKs1G,UAAU90G,MAAMwK,gBAAkB,GACvC,IApGkB9L,EAAMwwB,EAoGpBsmF,EAAe,CACjB9qD,qBAAqB,EACrBrwC,QAAS,aAAc5U,EAAQ24F,QAE7Bp6G,EAAQ,GAEY,KAApB87G,EAAWlwG,OA1GSs/B,EA4GClrC,GA5GP0a,EA4GF+G,GA3GT04F,WAAW9/G,MAAMsgC,MAAM+1F,KAC9BxlF,EAAI,GAAKxwB,EAAKy/F,WAAW9/G,MAClB,GAGoC,kBAAlCqgB,EAAKy/F,WAAWrI,eAA8Bp3F,EAAKy/F,WAAWrI,cAAcn3E,MAAM+1F,MAC3FxlF,EAAI,GAAKxwB,EAAKy/F,WAAWrI,cAClB,KAsGLt2F,EAAK+S,KAAKzuB,UAAY,mBACtB0b,EAAKs1G,UAAU90G,MAAMwK,gBAAkBxmB,EAAM,IAChB,KAApB87G,EAAWlwG,MAEnBzb,KAAKu0D,cAAc+sE,eAAeC,cAEnCl2G,EAAK+S,KAAKzuB,UAAY,YACtB0xH,EAAahrD,aAAe,GAAGtuD,OAAOq3G,GAAep/H,KAAK0gI,cAAe1gI,KAAK6gG,aAAc,KAAI2gC,KAAK,CACnG1pD,OAAQ,OACRO,KAAMszC,EAAWzhH,QACf6uH,GAAS0I,MAAOrC,GAAep/H,KAAK0gI,cAAe1gI,KAAK6gG,aAAc,KAAI2gC,KAAK,CACjF1pD,OAAQ,OACRO,KAAMszC,EAAW1pD,SACf82D,GAAS0I,QACgB,KAApB9V,EAAWlwG,MAEnBzb,KAAKu0D,cAAc+sE,eAAeI,gBAEnCr2G,EAAK+S,KAAKzuB,UAAY,YACtB0xH,EAAahrD,aAAe,GAAGtuD,OAAOq3G,GAAep/H,KAAK0gI,cAAe1gI,KAAK6gG,aAAc,KAAI2gC,KAAK,CACnG1pD,OAAQ,OACRO,KAAMszC,EAAWzhH,QACf6uH,GAASyG,QAASJ,GAAep/H,KAAK0gI,cAAe1gI,KAAK6gG,aAAc,KAAI2gC,KAAK,CACnF1pD,OAAQ,OACRO,KAAMszC,EAAW1pD,SACf82D,GAASyG,WAGbn0G,EAAK+S,KAAKzuB,UAAY,YACtB0xH,EAAahrD,aAAe,CAAC,gBAAkB,aAAyBs1C,EAAWlwG,QAGrF4P,EAAKw1G,UAAU1qD,SAASw1C,EAAWzhH,WAAOlI,EAAWq/H,GACrDh2G,EAAKy1G,UAAUznH,aAAesyG,EAAW1pD,QAAU,IAAI9pC,QAAQ,SAAU,IAErEqoG,GAAwBlvG,IAC1B,aAAKjG,EAAK01G,UAEV11G,EAAK01G,SAASn6E,YAAc,SAAU16C,GACpCA,EAAE+wB,kBACF/wB,EAAE8wB,kBAGJ3R,EAAK01G,SAAS1yF,QAAU,SAAUniC,GAChCA,EAAE+wB,kBACF/wB,EAAE8wB,iBAEF57B,EAAM+mD,OAAOw5E,mBAGf,aAAKt2G,EAAK01G,UACV11G,EAAK01G,SAASn6E,YAAc,KAC5Bv7B,EAAK01G,SAAS1yF,QAAU,OAI5BsK,EAASh4C,UAAU+5E,gBAAkB,SAAUC,GAC7CA,EAAa2kB,YAAc,YAAQ3kB,EAAa2kB,cAGlD3mD,EAAW,GAAW,CAAC,GAAQ,EAAG,MAAgB,GAAQ,EAAG,MAAe,GAAQ,EAAG,MAAiBA,GA5I1G,GAgJI,GAEJ,WACE,SAASipF,EAAkBrgF,EAAW4G,EAAQv9C,EAAQ21G,EAAkBkgB,GACtE,IAAIr/H,EAAQpB,KAEZA,KAAKmoD,OAASA,EACdnoD,KAAK4K,OAASA,EACd5K,KAAKugH,iBAAmBA,EACxBvgH,KAAKygI,uBAAyBA,EAC9BzgI,KAAKka,YAAc,EACnBla,KAAKs/F,YAAc,GACnBt/F,KAAKi8E,GAAK,aAAO16B,EAAW,aAAE,aAC9BvhD,KAAKs/F,YAAYlxF,KAAK,YAAa,WACjC,OAAOmzC,EAAUmL,YAAYtrD,EAAM66E,OAErCj8E,KAAKqhB,KAAO,aAAE,SACdrhB,KAAK+kF,UAAY,IAAI,KAAqB/kF,KAAKqhB,KAAM,IACrD,aAAOrhB,KAAKi8E,GAAIj8E,KAAK+kF,UAAUnrE,cAC/B5Z,KAAKs/F,YAAYlxF,KAAKpO,KAAK+kF,WAC3B/kF,KAAKk3C,OAAS,aAAOl3C,KAAKqhB,KAAM,aAAE,YAClCrhB,KAAK4nH,MAAQ,aAAO5nH,KAAKk3C,OAAQ,aAAE,eACnCl3C,KAAK4nH,MAAMp3G,MAAQ1G,EAAA,EAAa,WAAY,kBAAmB9J,KAAKygI,wBACpEzgI,KAAKma,KAAO,aAAOna,KAAKk3C,OAAQ,aAAE,WAClCl3C,KAAKihH,KAAO,aAAOjhH,KAAKqhB,KAAM,aAAE,WAChCrhB,KAAK4hD,UAAY,KACjB5hD,KAAKghI,gBACL,KAAM7f,MAAMnhH,KAAK4K,OAAO0B,yBAAyBukC,KAAK7wC,KAAK4K,SAASkR,OAAO,SAAU5P,GACnF,OAAOA,EAAEwZ,WACR07F,GAAGphH,KAAKghI,cAAehhI,KAAMA,KAAKs/F,aACrCihB,EAAiBvf,qBAAqB,WACpC,OAAO5/F,EAAM2jF,UAAUgb,eACtB//F,KAAMA,KAAKs/F,aA4HhB,OAzHAl/F,OAAOM,eAAekhI,EAAkBjhI,UAAW,UAAW,CAC5DC,IAAK,WACH,OAAOZ,KAAKi8E,IAEdn7E,YAAY,EACZC,cAAc,IAGhB6gI,EAAkBjhI,UAAU8iB,OAAS,SAAU8G,GAC7C,IAAInpB,EAAQpB,KAIZ,GAFAA,KAAK6hI,kBAAoB,YAAQ7hI,KAAK6hI,oBAEjCt3G,IAASi2G,GAAwBj2G,GAKpC,OAJAvqB,KAAKma,KAAKd,YAAc,GACxBrZ,KAAKihH,KAAK5nG,YAAc,GACxB,aAASrZ,KAAKi8E,GAAI,gBAClBj8E,KAAK4hD,UAAY,MAMnB,GAFA,aAAY5hD,KAAKi8E,GAAI,WAEwB,kBAAlC1xD,EAAKy/F,WAAWrI,cACzB,aAAY3hH,KAAKihH,KAAM,iBACvBjhH,KAAKihH,KAAK5nG,YAAckR,EAAKy/F,WAAWrI,kBACnC,CACL,aAAS3hH,KAAKihH,KAAM,iBACpBjhH,KAAKihH,KAAKv1F,UAAY,GACtB,IAAIk7E,EAAmB5mG,KAAKugH,iBAAiB98F,OAAO8G,EAAKy/F,WAAWrI,eACpE3hH,KAAK6hI,kBAAoBj7B,EACzB5mG,KAAKihH,KAAK3nG,YAAYstF,EAAiBt1E,SAGrC/G,EAAKy/F,WAAW/nD,QAClBjiE,KAAKma,KAAK84E,UAAY1oE,EAAKy/F,WAAW/nD,OACtC,aAAKjiE,KAAKma,QAEVna,KAAKma,KAAK84E,UAAY,GACtB,aAAKjzF,KAAKma,OAGZna,KAAKi8E,GAAGpwD,MAAM/H,OAAS9jB,KAAKk3C,OAAOykD,aAAe37F,KAAKihH,KAAKtlB,aAAkC,EAAnB37F,KAAKka,YAAkB,KAElGla,KAAK4nH,MAAMhhE,YAAc,SAAU16C,GACjCA,EAAE8wB,iBACF9wB,EAAE+wB,mBAGJj9B,KAAK4nH,MAAMv5E,QAAU,SAAUniC,GAC7BA,EAAE8wB,iBACF9wB,EAAE+wB,kBAEF77B,EAAM+mD,OAAOw5E,iBAGf3hI,KAAKqhB,KAAKsxE,UAAY,EACtB3yF,KAAK+kF,UAAUgb,cACf//F,KAAK4hD,UAAY3nB,GAAA,EAAe,SAAU1P,EAAKy/F,WAAW/nD,QAAU,GAAI13C,EAAKy/F,WAAWrI,cAAyD,kBAAlCp3F,EAAKy/F,WAAWrI,cAA6Bp3F,EAAKy/F,WAAWrI,cAAgBp3F,EAAKy/F,WAAWrI,cAAcp/G,MAAQ,KAGpOq/H,EAAkBjhI,UAAUo6E,aAAe,WACzC,OAAO/6E,KAAK4hD,WAGdggF,EAAkBjhI,UAAUmhI,WAAa,SAAUC,QACpC,IAATA,IACFA,EAAO,GAGT/hI,KAAKqhB,KAAKsxE,WAAaovC,GAGzBH,EAAkBjhI,UAAUqhI,SAAW,SAAUD,QAClC,IAATA,IACFA,EAAO,GAGT/hI,KAAKqhB,KAAKsxE,WAAaovC,GAGzBH,EAAkBjhI,UAAUgyF,UAAY,WACtC3yF,KAAKqhB,KAAKsxE,UAAY,GAGxBivC,EAAkBjhI,UAAUshI,aAAe,WACzCjiI,KAAKqhB,KAAKsxE,UAAY3yF,KAAKqhB,KAAKwyE,cAGlC+tC,EAAkBjhI,UAAUuhI,SAAW,WACrCliI,KAAK8hI,WAAW,KAGlBF,EAAkBjhI,UAAUwhI,OAAS,WACnCniI,KAAKgiI,SAAS,KAGhBJ,EAAkBjhI,UAAUyhI,eAAiB,SAAUhsG,GACrDp2B,KAAKka,YAAckc,GAGrBwrG,EAAkBjhI,UAAUqgI,cAAgB,WAC1C,IAAIv1C,EAAgBzrF,KAAK4K,OAAOiB,mBAC5By1F,EAAa7V,EAAc/lE,SAAS47E,WACpCv1E,EAAW0/D,EAAc3/E,YAAYm1H,iBAAmBx1C,EAAc/lE,SAASqG,SAC/E1H,EAAaonE,EAAc3/E,YAAYo1H,mBAAqBz1C,EAAc/lE,SAASrB,WACnF4/F,EAAax4B,EAAc/lE,SAASu+F,WACpCkd,EAAap1G,EAAW,KACxBq1G,EAAe/8G,EAAa,KAChCrkB,KAAKi8E,GAAGpwD,MAAME,SAAWo1G,EACzBnhI,KAAKi8E,GAAGpwD,MAAMo4F,WAAaA,EAC3BjkH,KAAKma,KAAK0R,MAAMy1E,WAAaA,EAC7BthG,KAAK4nH,MAAM/7F,MAAM/H,OAASs9G,EAC1BphI,KAAK4nH,MAAM/7F,MAAMuK,MAAQgrG,GAG3BQ,EAAkBjhI,UAAUc,QAAU,WACpCzB,KAAKs/F,YAAc,YAAQt/F,KAAKs/F,aAChCt/F,KAAK6hI,kBAAoB,YAAQ7hI,KAAK6hI,oBAGjCD,EA1JT,GA6JI,GAEJ,WACE,SAASS,EAAcz3H,EAAQ03H,EAAkBlrH,EAAmBq4B,EAAc0iB,EAAgB3iB,EAAmBmgD,EAAamZ,EAAe3+B,GAC/I,IAAI/oE,EAAQpB,KAEZA,KAAK4K,OAASA,EACd5K,KAAKsiI,iBAAmBA,EAExBtiI,KAAK6Y,qBAAsB,EAC3B7Y,KAAKuiI,mBAAoB,EACzBviI,KAAKwiI,kBAAoB,IAAI,IAC7BxiI,KAAKyiI,YAAc,IAAI,IACvBziI,KAAK0iI,mBAAqB,IAAI,KAC9B1iI,KAAK2iI,kBAAoB,IAAI,KAC7B3iI,KAAK4iI,iBAAmB,IAAI,KAC5B5iI,KAAK6iI,iBAAmB,IAAI,KAC5B7iI,KAAK8iI,YAAc9iI,KAAK0iI,mBAAmB7hI,MAC3Cb,KAAK2rD,WAAa3rD,KAAK2iI,kBAAkB9hI,MACzCb,KAAK+iI,UAAY/iI,KAAK4iI,iBAAiB/hI,MACvCb,KAAKgjI,UAAYhjI,KAAK6iI,iBAAiBhiI,MACvCb,KAAKijI,eAAiB,IACtBjjI,KAAKkjI,UAAY,IACjBljI,KAAKmjI,yBAA0B,EAC/BnjI,KAAKojI,sBAAuB,EAC5B,IAAI97G,EAAKkoB,EAAkBjoB,iBAAiB,gCACxCk5G,EAA0Bn5G,EAAU,KAAOA,EAAGG,WAAa,IAA5B,GAC/B84F,EAAmB,IAAI,GAAiB31G,EAAQ+kF,EAAamZ,GACjE9oG,KAAKqjI,QAAS,EACdrjI,KAAKsjI,YAAc,KACnBtjI,KAAKmyD,eAAiBA,EACtBnyD,KAAKsxB,QAAU,aAAE,iCACjBtxB,KAAKmnG,eAAiB,aAAOnnG,KAAKsxB,QAAS,aAAE,aAC7CtxB,KAAKujI,YAAc,aAAOvjI,KAAKsxB,QAAS,aAAE,UAC1CtxB,KAAKwjI,QAAU,IAAI,GAAkBxjI,KAAKsxB,QAAStxB,KAAMA,KAAK4K,OAAQ21G,EAAkBkgB,GAExF,IAAIgD,EAAiB,WACnB,OAAO,aAAYriI,EAAMkwB,QAAS,YAAalwB,EAAMwJ,OAAOiB,mBAAmBC,YAAYzE,QAAQq8H,YAGrGD,IACA,IAAI/qF,EAAWyxB,EAAqBkQ,eAAe,GAAUr6E,KAAMA,KAAK4K,OAAQ61H,GAChFzgI,KAAK60C,KAAO,IAAI,KAAK70C,KAAKujI,YAAavjI,KAAM,CAAC04C,GAAW,CACvDwsC,YAAY,EACZy+C,eAAgB,CACdC,WAAY,WACV,OAAO,IAGXC,cAAc,IAEhB7jI,KAAKywB,UAAY,CAAC,aAAiBzwB,KAAK60C,KAAMpF,EAAc,CAC1Dq0F,4BAA6BzD,GAC7B0D,yBAA0B,MACxBt0F,EAAamB,cAAc,SAAUpvB,GACvC,OAAOpgB,EAAMwvC,cAAcpvB,KACzB5W,EAAOomB,kBAAkB,WAC3B,OAAO5vB,EAAM4iI,yBACXhkI,KAAK60C,KAAK7U,YAAY,SAAU9zB,GAClC,OAAO9K,EAAM6iI,gBAAgB/3H,KAC3BlM,KAAK60C,KAAKqvF,kBAAkB,SAAUh4H,GACxC,OAAO9K,EAAM+iI,gBAAgBj4H,KAC3BlM,KAAK60C,KAAKuvF,cAAc,SAAUl4H,GACpC,OAAO9K,EAAMijI,YAAYn4H,KACvBlM,KAAK4K,OAAOo0B,2BAA2B,WACzC,OAAO59B,EAAMkjI,6BACXtkI,KAAK4K,OAAO0B,yBAAyB,SAAUJ,GACjD,OAAOA,EAAEJ,aAAe23H,OAE1BzjI,KAAKukI,qBAAuB,GAAe5mB,QAAQnmG,OAAOJ,GAC1DpX,KAAKwkI,iCAAmC,GAAe3a,oBAAoBryG,OAAOJ,GAClFpX,KAAK4K,OAAO4O,iBAAiBxZ,MAC7BA,KAAKkgB,SAAS,GAGdlgB,KAAK4wC,cAAcnB,EAAaM,YAi0BlC,OA9zBAsyF,EAAc1hI,UAAU2jI,yBAA2B,WAC9B,IAAftkI,KAAKykB,OAMTzkB,KAAK4K,OAAOkb,oBAAoB9lB,OAGlCqiI,EAAc1hI,UAAUqjI,qBAAuB,WACzB,IAAfhkI,KAAKykB,OAEQ,IAAfzkB,KAAKykB,QAEHzkB,KAAKykI,gCACRzkI,KAAK0kI,qBAITrC,EAAc1hI,UAAUsjI,gBAAkB,SAAU/3H,GACzB,qBAAdA,EAAEolB,SAA8C,qBAAZplB,EAAEs2B,QAKjDt2B,EAAEk6E,aAAappD,iBACf9wB,EAAEk6E,aAAanpD,kBACfj9B,KAAKyjD,OAAOv3C,EAAEolB,QAASplB,EAAEs2B,SAG3B6/F,EAAc1hI,UAAUwjI,gBAAkB,SAAUj4H,GAC7CA,EAAE00C,SAASr0C,QAIhBvM,KAAKyjD,OAAOv3C,EAAE00C,SAAS,GAAI10C,EAAEu7C,QAAQ,KAGvC46E,EAAc1hI,UAAU8iD,OAAS,SAAUl5B,EAAMiY,GAC/C,IAAIphC,EAAQpB,KAERm/H,EAAkBn/H,KAAKm/H,gBAEtBA,GAIL50G,EAAK3N,QAAQ,KAAkBkB,MAAMxa,KAAK,WACxClC,EAAMshI,mBAAmB3gI,KAAK,CAC5BwoB,KAAMA,EACNiY,MAAOA,EACP31B,MAAOsyH,IAGT/9H,EAAMwJ,OAAO4K,WAIjB6sH,EAAc1hI,UAAUgkI,6BAA+B,SAAUp6G,GAC/D,OAAIvqB,KAAKykI,+BACA36H,EAAA,EAAa,oCAAqC,sBAAuBygB,EAAKy/F,WAAW9/G,MAAOlK,KAAKwjI,QAAQzoD,gBAE7GxwD,EAAKy/F,WAAW9/G,OAI3Bm4H,EAAc1hI,UAAUikI,WAAa,SAAUC,GACzC7kI,KAAK8kI,sBAAwBD,IAIjC7kI,KAAK8kI,oBAAsBD,EAEvB7kI,KAAK8kI,qBACP,aAAM9kI,KAAK8kI,qBAAqB,KAIpCzC,EAAc1hI,UAAUiwC,cAAgB,SAAU7gC,GAChD,IAAIsmB,EAAkBtmB,EAAMG,SAASgwH,IAEjC7pG,IACFr2B,KAAKujI,YAAY13G,MAAMwK,gBAAkBA,EAAgB90B,WACzDvB,KAAKwjI,QAAQlyG,QAAQzF,MAAMwK,gBAAkBA,EAAgB90B,WAC7DvB,KAAKmnG,eAAet7E,MAAMwK,gBAAkBA,EAAgB90B,YAG9D,IAAIstC,EAAc9+B,EAAMG,SAASiwH,IAE7BtxF,IACF7uC,KAAKujI,YAAY13G,MAAMgjB,YAAcA,EAAYttC,WACjDvB,KAAKwjI,QAAQlyG,QAAQzF,MAAMgjB,YAAcA,EAAYttC,WACrDvB,KAAKmnG,eAAet7E,MAAMgjB,YAAcA,EAAYttC,WACpDvB,KAAK+kI,mBAAqBl2F,EAAYttC,YAGxC,IAAIyjI,EAAmBj1H,EAAMG,SAAS,KAElC80H,IACFhlI,KAAKilI,wBAA0BD,EAAiBzjI,YAGlDvB,KAAKwjI,QAAQpB,eAA8B,OAAfryH,EAAMoK,KAAgB,EAAI,IAGxDkoH,EAAc1hI,UAAU0jI,YAAc,SAAUn4H,GAC9C,IAAI9K,EAAQpB,KAEZ,IAAIA,KAAKuiI,kBAAT,CAIA,IAAKr2H,EAAE00C,SAASr0C,OASd,OARIvM,KAAKklI,2BACPllI,KAAKklI,yBAAyBznH,SAC9Bzd,KAAKklI,yBAA2B,KAChCllI,KAAKsjI,YAAc,WAGrBtjI,KAAK4kI,WAAW,MAKlB,GAAK5kI,KAAKm/H,gBAAV,CAIA,IAAI50G,EAAOre,EAAE00C,SAAS,GAClBpe,EAAQt2B,EAAEu7C,QAAQ,GACtBznD,KAAKmjI,yBAA2BnjI,KAAKsjI,YAEjC/4G,IAASvqB,KAAKsjI,cACZtjI,KAAKklI,2BACPllI,KAAKklI,yBAAyBznH,SAC9Bzd,KAAKklI,yBAA2B,MAGlCllI,KAAKsjI,YAAc/4G,EACnBvqB,KAAK60C,KAAKgtB,OAAOr/B,GACjBxiC,KAAKklI,yBAA2B,YAAwB,SAAUrpH,GAChE,OAAO0O,EAAK3N,QAAQf,KAEtB7b,KAAKklI,yBAAyB5hI,KAAK,WAC7BlC,EAAMyzC,KAAKtoC,OAASi2B,IAKxBphC,EAAMmhI,mBAAoB,EAE1BnhI,EAAMyzC,KAAKhkB,OAAO2R,EAAO,EAAG,CAACjY,IAE7BnpB,EAAMyzC,KAAK6xC,SAAS,CAAClkD,IAErBphC,EAAMmhI,mBAAoB,EAEtBnhI,EAAMqjI,+BACRrjI,EAAM+jI,cAEN,aAAY/jI,EAAMkwB,QAAS,aAG7BlwB,EAAMwjI,WAAWxjI,EAAMujI,6BAA6Bp6G,OACnDrF,MAAM,MAAmB5hB,KAAK,WAC3BlC,EAAMkiI,cAAgB/4G,IACxBnpB,EAAM8jI,yBAA2B,SAMvCllI,KAAK2iI,kBAAkB5gI,KAAK,CAC1BwoB,KAAMA,EACNiY,MAAOA,EACP31B,MAAO7M,KAAKm/H,qBAIhBkD,EAAc1hI,UAAUuf,SAAW,SAAUuE,GAC3C,GAAKzkB,KAAKsxB,QAAV,CAIA,IAAI8zG,EAAeplI,KAAKykB,QAAUA,EAMlC,OALAzkB,KAAKykB,MAAQA,EACb,aAAYzkB,KAAKsxB,QAAS,SAAoB,IAAV7M,GAI5BA,GACN,KAAK,EAGH,aAAKzkB,KAAKmnG,eAAgBnnG,KAAKwjI,QAAQlyG,QAAStxB,KAAKujI,aACrDvjI,KAAK2kB,OACL3kB,KAAKqlI,WAAa,EAEdD,GACFplI,KAAK60C,KAAKhkB,OAAO,EAAG7wB,KAAK60C,KAAKtoC,QAGhCvM,KAAKsjI,YAAc,KACnB,MAEF,KAAK,EAGHtjI,KAAKmnG,eAAe9tF,YAAcgpH,EAAciD,gBAChD,aAAKtlI,KAAKujI,YAAavjI,KAAKwjI,QAAQlyG,SACpC,aAAKtxB,KAAKmnG,gBACV,aAAYnnG,KAAKsxB,QAAS,aAC1BtxB,KAAK2iB,OACL3iB,KAAKsjI,YAAc,KACnB,MAEF,KAAK,EAGHtjI,KAAKmnG,eAAe9tF,YAAcgpH,EAAckD,uBAChD,aAAKvlI,KAAKujI,YAAavjI,KAAKwjI,QAAQlyG,SACpC,aAAKtxB,KAAKmnG,gBACV,aAAYnnG,KAAKsxB,QAAS,aAC1BtxB,KAAK2iB,OACL3iB,KAAKsjI,YAAc,KACnB,MAEF,KAAK,EAQL,KAAK,EAGH,aAAKtjI,KAAKmnG,gBACV,aAAKnnG,KAAKujI,aACVvjI,KAAK2iB,OACL,MAEF,KAAK,EAGH,aAAK3iB,KAAKmnG,gBACV,aAAKnnG,KAAKwjI,QAAQlyG,QAAStxB,KAAKujI,aAChCvjI,KAAK2iB,OAEL3iB,KAAK4kI,WAAW5kI,KAAKwjI,QAAQzoD,mBAMnCsnD,EAAc1hI,UAAU6kI,cAAgB,SAAUvJ,EAAM33B,GACtD,IAAIljG,EAAQpB,KAEO,IAAfA,KAAKykB,QAMTzkB,KAAKqjI,SAAWpH,EAEXj8H,KAAKqjI,SACRrjI,KAAKylI,eAAiB3jI,WAAW,WAC/BV,EAAMqkI,eAAiB,KAEvBrkI,EAAM8e,SAAS,IAGdokF,MAIP+9B,EAAc1hI,UAAU+kI,gBAAkB,SAAUvG,EAAiBwG,EAAgBzG,EAAUmE,GAkB7F,GAjBArjI,KAAKojI,sBAAuB,EAC5BpjI,KAAK4lI,4BAA8B,KAE/B5lI,KAAKylI,iBACP9rH,aAAa3Z,KAAKylI,gBAClBzlI,KAAKylI,eAAiB,MAGpBzlI,KAAKklI,2BACPllI,KAAKklI,yBAAyBznH,SAC9Bzd,KAAKklI,yBAA2B,MAG9BllI,KAAKm/H,kBAAoBA,IAC3Bn/H,KAAKm/H,gBAAkBA,GAGrBD,GAA2B,IAAfl/H,KAAKykB,OAEH,IAAfzkB,KAAKykB,MAGJzkB,KAAKkgB,SAAS,OALlB,CAWA,IAAI2lH,EAAe7lI,KAAKm/H,gBAAgBhT,MAAM5/G,OAC1C0C,EAA2B,IAAjB42H,EAGd,GAFA7lI,KAAKwkI,iCAAiCxsH,IAAI6tH,EAAe,GAErD52H,EACEo0H,EACFrjI,KAAKkgB,SAAS,GAIdlgB,KAAKkgB,SAAS,GAKhBlgB,KAAKm/H,gBAAkB,SAClB,CACL,GAAmB,IAAfn/H,KAAKykB,MAEP,CACE,IAAIqhH,EAAQ9lI,KAAKm/H,gBAAgB2G,MACjCA,EAAiC,4BAAMzC,EAWvCrjI,KAAKsiI,iBAAiByD,UAAU,gBAAiB,GAAS,GAAID,EAAO9lI,KAAK4K,OAAOo7H,qBAGrFhmI,KAAKsjI,YAAc,KACnBtjI,KAAK60C,KAAKhkB,OAAO,EAAG7wB,KAAK60C,KAAKtoC,OAAQvM,KAAKm/H,gBAAgBhT,OAEvD+S,EACFl/H,KAAKkgB,SAAS,GAIdlgB,KAAKkgB,SAAS,GAKhBlgB,KAAK60C,KAAKgtB,OAAO8jE,EAAgB,GACjC3lI,KAAK60C,KAAK6xC,SAAS,CAACi/C,IAEhB3lI,KAAK+kI,qBACP/kI,KAAKwjI,QAAQlyG,QAAQzF,MAAMgjB,YAAc7uC,KAAK+kI,uBAKpD1C,EAAc1hI,UAAUslI,eAAiB,WACvC,OAAQjmI,KAAKykB,OACX,KAAK,EAGH,OAAO,EAET,KAAK,EAIH,OADAzkB,KAAKwjI,QAAQtB,YACN,EAET,KAAK,EAGH,OAAQliI,KAAKqjI,OAEf,QAEE,OADArjI,KAAK60C,KAAKqxF,iBACH,IAIb7D,EAAc1hI,UAAUwlI,WAAa,WACnC,OAAQnmI,KAAKykB,OACX,KAAK,EAGH,OAAO,EAET,KAAK,EAGH,OAAQzkB,KAAKqjI,OAEf,QAEE,OADArjI,KAAK60C,KAAKuxF,UAAU,GAAG,IAChB,IAIb/D,EAAc1hI,UAAU0lI,WAAa,WACnC,OAAQrmI,KAAKykB,OACX,KAAK,EAGH,OAAO,EAET,KAAK,EAIH,OADAzkB,KAAKwjI,QAAQvB,gBACN,EAET,KAAK,EAGH,OAAQjiI,KAAKqjI,OAEf,QAEE,OADArjI,KAAK60C,KAAKyxF,aACH,IAIbjE,EAAc1hI,UAAU4lI,mBAAqB,WAC3C,OAAQvmI,KAAKykB,OACX,KAAK,EAGH,OAAO,EAET,KAAK,EAIH,OADAzkB,KAAKwjI,QAAQrB,UACN,EAET,KAAK,EAGH,OAAQniI,KAAKqjI,OAEf,QAEE,OADArjI,KAAK60C,KAAK2xF,qBACH,IAIbnE,EAAc1hI,UAAU8lI,eAAiB,WACvC,OAAQzmI,KAAKykB,OACX,KAAK,EAGH,OAAO,EAET,KAAK,EAGH,OAAQzkB,KAAKqjI,OAEf,QAEE,OADArjI,KAAK60C,KAAK6xF,cAAc,GAAG,IACpB,IAIbrE,EAAc1hI,UAAUgmI,YAAc,WACpC,OAAQ3mI,KAAKykB,OACX,KAAK,EAGH,OAAO,EAET,KAAK,EAIH,OADAzkB,KAAKwjI,QAAQ7wC,aACN,EAET,KAAK,EAGH,OAAQ3yF,KAAKqjI,OAEf,QAEE,OADArjI,KAAK60C,KAAK+xF,cACH,IAIbvE,EAAc1hI,UAAUkmI,eAAiB,WACvC,GAAmB,IAAf7mI,KAAKykB,OAES,IAAfzkB,KAAKykB,OAEU,IAAfzkB,KAAKykB,OAELzkB,KAAKm/H,gBACN,MAAO,CACL50G,KAAMvqB,KAAK60C,KAAKiyF,qBAAqB,GACrCtkG,MAAOxiC,KAAK60C,KAAKmyC,WAAW,GAC5Bn6E,MAAO7M,KAAKm/H,kBAOlBkD,EAAc1hI,UAAUomI,mBAAqB,WACxB,IAAf/mI,KAAKykB,OAGLzkB,KAAKkgB,SAAS,GAIVlgB,KAAK+kI,qBACP/kI,KAAKwjI,QAAQlyG,QAAQzF,MAAMgjB,YAAc7uC,KAAK+kI,qBAExB,IAAf/kI,KAAKykB,OAEfzkB,KAAKykI,iCACNzkI,KAAKkgB,SAAS,GAIVlgB,KAAKilI,0BACPjlI,KAAKwjI,QAAQlyG,QAAQzF,MAAMgjB,YAAc7uC,KAAKilI,0BAYlDjlI,KAAKsiI,iBAAiByD,UAAU,mCAAoC/lI,KAAK4K,OAAOo7H,qBAGlF3D,EAAc1hI,UAAUghI,cAAgB,WACtC,GAAKnB,GAAwBxgI,KAAK60C,KAAKiyF,qBAAqB,IAI5D,GAAI9mI,KAAKykI,+BACPzkI,KAAKgnI,yBAAwB,GAC7B,aAAKhnI,KAAKwjI,QAAQlyG,SAClB,aAAYtxB,KAAKsxB,QAAS,aAC1B,aAAYtxB,KAAKsxB,QAAS,cAC1BtxB,KAAK4K,OAAOkb,oBAAoB9lB,MAShCA,KAAKsiI,iBAAiByD,UAAU,gCAAiC/lI,KAAK4K,OAAOo7H,wBACxE,CACL,GAAmB,IAAfhmI,KAAKykB,OAES,IAAfzkB,KAAKykB,OAEU,IAAfzkB,KAAKykB,MAGJ,OAGJzkB,KAAKgnI,yBAAwB,GAC7BhnI,KAAKmlI,cAELnlI,KAAK4kI,WAAW5kI,KAAKwjI,QAAQzoD,gBAU7B/6E,KAAKsiI,iBAAiByD,UAAU,8BAA+B/lI,KAAK4K,OAAOo7H,sBAI/E3D,EAAc1hI,UAAUwkI,YAAc,WACpCnlI,KAAK0kI,oBACL,aAAK1kI,KAAKwjI,QAAQlyG,SAClBtxB,KAAKwjI,QAAQ//G,OAAOzjB,KAAK60C,KAAKiyF,qBAAqB,IACnD9mI,KAAKwjI,QAAQlyG,QAAQzF,MAAMm0E,UAAYhgG,KAAKinI,gBAAkB,KAE9DjnI,KAAKujI,YAAY13G,MAAM47E,UAAY,MAEnCznG,KAAK4K,OAAOkb,oBAAoB9lB,MAChCA,KAAKknI,qBACLlnI,KAAK4K,OAAO4K,SAGd6sH,EAAc1hI,UAAUgiB,KAAO,WAC7B,IAAIvhB,EAAQpB,KAERmnI,EAAYnnI,KAAKonI,mBAEjBD,IAAcnnI,KAAKqlI,aACrBrlI,KAAK4K,OAAOkb,oBAAoB9lB,MAChCA,KAAKqlI,WAAa8B,GAGpBnnI,KAAKukI,qBAAqBvsH,KAAI,GAC9BhY,KAAKyiI,YAAY1jH,aAAa,WAC5B,aAAS3d,EAAMkwB,QAAS,WAExBlwB,EAAMyhI,iBAAiB9gI,KAAKX,IAC3B,MAGLihI,EAAc1hI,UAAUgkB,KAAO,WAC7B3kB,KAAKukI,qBAAqB3sH,QAC1B5X,KAAKwkI,iCAAiC5sH,QACtC,aAAY5X,KAAKsxB,QAAS,YAG5B+wG,EAAc1hI,UAAU0mI,WAAa,WACnC1tH,aAAa3Z,KAAKylI,gBAClBzlI,KAAKkgB,SAAS,GAGdlgB,KAAK4iI,iBAAiB7gI,KAAK/B,OAG7BqiI,EAAc1hI,UAAUmT,YAAc,WACpC,GAAmB,IAAf9T,KAAKykB,MAGL,OAAO,KAGX,IAAIzK,EAAa,CAAC,EAEhB,GAUF,OANIha,KAAKojI,uBACPppH,EAAa,CAAC,IAKT,CACL9O,SAAUlL,KAAK4K,OAAOkJ,cACtBkG,WAAYA,IAIhBqoH,EAAc1hI,UAAUiZ,WAAa,WACnC,OAAO5Z,KAAKsxB,SAGd+wG,EAAc1hI,UAAUgM,MAAQ,WAC9B,OAAO01H,EAAc31H,IAGvB21H,EAAc1hI,UAAUymI,iBAAmB,WACzC,IAAItjH,EAAS,EAEb,GAAmB,IAAf9jB,KAAKykB,OAES,IAAfzkB,KAAKykB,MAGJX,EAAS9jB,KAAKsnI,oBACT,CACP,IAAIxM,EAAkB96H,KAAK60C,KAAK0yF,cAAgBvnI,KAAKsnI,gBACjDE,EAAwBxnI,KAAK4K,OAAOiB,mBAAmBC,YAAYzE,QAAQmgI,sBAC/E1jH,EAASziB,KAAK8sE,IAAI2sD,EAAiB0M,GAAyBxnI,KAAKsnI,gBAMnE,OAHAtnI,KAAKsxB,QAAQzF,MAAMxH,WAAarkB,KAAKsnI,gBAAkB,KACvDtnI,KAAKujI,YAAY13G,MAAM/H,OAASA,EAAS,KACzC9jB,KAAK60C,KAAK0P,OAAOzgC,GACVA,GAOTu+G,EAAc1hI,UAAUumI,mBAAqB,WAC3C,GAAKlnI,KAAK4K,OAAOgC,WAAjB,CAIA,IAAIyX,EAAarkB,KAAK4K,OAAOiB,mBAAmB6Z,SAASrB,WACrDX,EAAe1jB,KAAK4K,OAAO+Y,2BAA2B3jB,KAAK4K,OAAOkJ,eAClE8P,EAAe,aAAuB5jB,KAAK4K,OAAOgP,cAClD6tH,EAAU7jH,EAAapS,KAAOkS,EAAalS,KAC3Ck2H,EAAU9jH,EAAaC,IAAMH,EAAaG,IAAMH,EAAaI,OAC7D6jH,EAAe,aAAuB3nI,KAAKsxB,SAC3Cs2G,EAAUD,EAAan2H,KACvBq2H,EAAUF,EAAa9jH,IAG3B,GAAI7jB,KAAK4lI,6BAA+B5lI,KAAK4lI,4BAA8BiC,IAAY7nI,KAAKojI,qBAG1F,OAFApjI,KAAKojI,sBAAuB,OAC5BpjI,KAAKknI,qBAIPlnI,KAAK4lI,4BAA8BiC,EAE/BD,EAAUH,EAAUznI,KAAKkjI,UAE3B,aAASljI,KAAKsxB,QAAS,cAEvB,aAAYtxB,KAAKsxB,QAAS,cAMxB,aAAStxB,KAAKsxB,QAAS,cAAgBo2G,EAAUrjH,EAAawjH,GAAW7nI,KAAKwjI,QAAQlyG,QAAQqqE,aAAe37F,KAAKujI,YAAY5nC,eAGhI37F,KAAKujI,YAAY13G,MAAM47E,UAAYznG,KAAKwjI,QAAQlyG,QAAQqqE,aAAe37F,KAAKujI,YAAY5nC,aAAe,QAQ3G0mC,EAAc1hI,UAAU+jI,kBAAoB,WAC1C,IAAKlE,GAAwBxgI,KAAKsjI,cAAgBtjI,KAAKmjI,wBAGrD,OAFA,aAAYnjI,KAAKsxB,QAAS,kBAC1B,aAAYtxB,KAAKsxB,QAAS,cAI5B,IAAI4U,EAAUlmC,KAAKsxB,QAAQzF,MAAM+iC,SAASpkB,MAAM,YAE3CtE,GAAWzK,OAAOyK,EAAQ,IAAMlmC,KAAKijI,gBACxC,aAASjjI,KAAKsxB,QAAS,cACvB,aAAYtxB,KAAKsxB,QAAS,cACjBkvG,GAAwBxgI,KAAKsjI,eACtC,aAAStjI,KAAKsxB,QAAS,aACvB,aAAYtxB,KAAKsxB,QAAS,gBAI9BlxB,OAAOM,eAAe2hI,EAAc1hI,UAAW,kBAAmB,CAEhEC,IAAK,WACH,OAAOZ,KAAKsnI,gBAAkBtnI,KAAK4K,OAAOiB,mBAAmBC,YAAYzE,QAAQmgI,uBAEnF1mI,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAe2hI,EAAc1hI,UAAW,kBAAmB,CAChEC,IAAK,WACH,IAAI6qF,EAAgBzrF,KAAK4K,OAAOiB,mBAChC,OAAO4/E,EAAc3/E,YAAYo1H,mBAAqBz1C,EAAc/lE,SAASrB,YAE/EvjB,YAAY,EACZC,cAAc,IAGhBshI,EAAc1hI,UAAU24E,UAAY,SAAUhoD,GAC5C,OAAOtxB,KAAKsnI,iBAGdjF,EAAc1hI,UAAU44E,cAAgB,SAAUjoD,GAChD,MAAO,cAGT+wG,EAAc1hI,UAAU8jI,6BAA+B,WACrD,OAAOzkI,KAAKmyD,eAAeQ,WAAW,uBAAwB,GA/sC9B,IAotClC0vE,EAAc1hI,UAAUqmI,wBAA0B,SAAUzkI,GAC1DvC,KAAKmyD,eAAeiB,MAAM,uBAAwB7wD,EAAO,IAK3D8/H,EAAc1hI,UAAUc,QAAU,WAChCzB,KAAKykB,MAAQ,KACbzkB,KAAKklI,yBAA2B,KAChCllI,KAAKsjI,YAAc,KACnBtjI,KAAKsxB,QAAU,KAEftxB,KAAKmnG,eAAiB,KAEtBnnG,KAAKujI,YAAc,KAEnBvjI,KAAKwjI,QAAQ/hI,UACbzB,KAAKwjI,QAAU,KAEfxjI,KAAK60C,KAAKpzC,UACVzB,KAAK60C,KAAO,KAEZ70C,KAAKywB,UAAY,YAAQzwB,KAAKywB,WAE1BzwB,KAAKylI,iBACP9rH,aAAa3Z,KAAKylI,gBAClBzlI,KAAKylI,eAAiB,MAGxBzlI,KAAKwiI,kBAAkB/gI,UACvBzB,KAAKyiI,YAAYhhI,WAGnB4gI,EAAc31H,GAAK,8BACnB21H,EAAciD,gBAAkBx7H,EAAA,EAAa,wBAAyB,cACtEu4H,EAAckD,uBAAyBz7H,EAAA,EAAa,8BAA+B,mBACnFu4H,EAAgB,GAAW,CAAC,GAAQ,EAAG,MAAoB,GAAQ,EAAG,MAAqB,GAAQ,EAAG,KAAgB,GAAQ,EAAG,MAAkB,GAAQ,EAAG,MAAqB,GAAQ,EAAG,MAAe,GAAQ,EAAG,MAAiB,GAAQ,EAAG,OAAyBA,GAz4B/Q,GA84BA,YAA2B,SAAUtyH,EAAOC,GAC1C,IAAI83H,EAAiB/3H,EAAMG,SAASowH,IAEhCwH,GACF93H,EAAUG,QAAQ,8GAAgH23H,EAAiB,OAGrJ,IAAIztH,EAAatK,EAAMG,SAASkwH,IAE5B/lH,GACFrK,EAAUG,QAAQ,2CAA6CkK,EAAa,OAG9E,IAAImS,EAAOzc,EAAMG,SAAS,MAEtBsc,GACFxc,EAAUG,QAAQ,6CAA+Cqc,EAAO,OAG1E,IAAIy+E,EAAiBl7F,EAAMG,SAAS,MAEhC+6F,GACFj7F,EAAUG,QAAQ,2DAA6D86F,EAAiB,SCl1CpG,IAAI,GAAwC,SAAUz0F,EAAY1T,EAAQ2N,EAAKgG,GAC7E,IAEIxN,EAFAyN,EAAIC,UAAUpK,OACdqK,EAAIF,EAAI,EAAI5T,EAAkB,OAAT2T,EAAgBA,EAAOrW,OAAOyW,yBAAyB/T,EAAQ2N,GAAOgG,EAE/F,GAAuB,kBAAZK,SAAoD,oBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASP,EAAY1T,EAAQ2N,EAAKgG,QAAW,IAAK,IAAIjI,EAAIgI,EAAWjK,OAAS,EAAGiC,GAAK,EAAGA,KAC1KvF,EAAIuN,EAAWhI,MAAIoI,GAAKF,EAAI,EAAIzN,EAAE2N,GAAKF,EAAI,EAAIzN,EAAEnG,EAAQ2N,EAAKmG,GAAK3N,EAAEnG,EAAQ2N,KAASmG,GAE5F,OAAOF,EAAI,GAAKE,GAAKxW,OAAOM,eAAeoC,EAAQ2N,EAAKmG,GAAIA,GAG1D,GAAkC,SAAUK,EAAYC,GAC1D,OAAO,SAAUpU,EAAQ2N,GACvByG,EAAUpU,EAAQ2N,EAAKwG,KAOvB,GAEJ,WACE,SAAS8wH,EAAe18H,EAAS+L,GAC/B,IAAIhW,EAAQpB,KAEZA,KAAKqL,QAAUA,EACfrL,KAAKgoI,SAAWD,EAAeE,MAAMzwH,OAAOJ,GAC5CpX,KAAKkoI,cAAgBloI,KAAKqL,QAAQiB,yBAAyB,SAAUJ,GACnE,OAAOA,EAAEJ,aAAe1K,EAAM2e,YAGhC/f,KAAK+f,UAyDP,OAtDAgoH,EAAepnI,UAAUc,QAAU,WACjC,YAAQzB,KAAKkoI,cAAeloI,KAAKyoH,oBAEjCzoH,KAAKgoI,SAASpwH,SAGhBmwH,EAAepnI,UAAUof,QAAU,WACjC,IAAI3e,EAAQpB,KAGR89B,EAAwE,OAA9D99B,KAAKqL,QAAQQ,mBAAmBC,YAAYq8H,cAE1D,GAAInoI,KAAKooI,WAAatqG,EAMtB,GAFA99B,KAAKooI,SAAWtqG,EAEZ99B,KAAKooI,SAAU,CACjB,IAAIC,EAAkB,WACpB,GAAKjnI,EAAMiK,QAAQuB,WAAnB,CAMA,IAAIC,EAAQzL,EAAMiK,QAAQyB,WAEtBI,EAAY9L,EAAMiK,QAAQ2K,eAE1Bg8C,EAAOnlD,EAAMklD,kBAAkB7kD,EAAUC,oBAExC6kD,EAML5wD,EAAM4mI,SAAShwH,IAAIg6C,EAAK1gD,YAAcpE,EAAUC,mBAAmBQ,QALjEvM,EAAM4mI,SAAShwH,KAAI,QAZnB5W,EAAM4mI,SAAShwH,KAAI,IAoBvBhY,KAAKyoH,mBAAqBzoH,KAAKqL,QAAQ2zB,2BAA2BqpG,GAClEA,SACSroI,KAAKyoH,qBACdzoH,KAAKgoI,SAASpwH,QAEd5X,KAAKyoH,mBAAmBhnH,UAExBzB,KAAKyoH,wBAAqBzmH,IAI9B+lI,EAAeE,MAAQ,IAAI,KAAc,eAAe,GACxDF,EAAiB,GAAW,CAAC,GAAQ,EAAG,OAAsBA,GAlEhE,GCrBI,GAAsC,WACxC,IAAI/+H,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA0BtC,GAAoC,WAatC,OAZA,GAAWpJ,OAAOk+G,QAAU,SAAU98F,GACpC,IAAK,IAAItQ,EAAG1C,EAAI,EAAGyT,EAAItL,UAAUpK,OAAQiC,EAAIyT,EAAGzT,IAG9C,IAAK,IAAIlF,KAFT4H,EAAIyF,UAAUnI,GAGRpO,OAAOO,UAAU4I,eAAeU,KAAKiH,EAAG5H,KAAIkY,EAAElY,GAAK4H,EAAE5H,IAI7D,OAAOkY,IAGOlB,MAAMtgB,KAAM2W,YAG1B,GAAwC,SAAUH,EAAY1T,EAAQ2N,EAAKgG,GAC7E,IAEIxN,EAFAyN,EAAIC,UAAUpK,OACdqK,EAAIF,EAAI,EAAI5T,EAAkB,OAAT2T,EAAgBA,EAAOrW,OAAOyW,yBAAyB/T,EAAQ2N,GAAOgG,EAE/F,GAAuB,kBAAZK,SAAoD,oBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASP,EAAY1T,EAAQ2N,EAAKgG,QAAW,IAAK,IAAIjI,EAAIgI,EAAWjK,OAAS,EAAGiC,GAAK,EAAGA,KAC1KvF,EAAIuN,EAAWhI,MAAIoI,GAAKF,EAAI,EAAIzN,EAAE2N,GAAKF,EAAI,EAAIzN,EAAEnG,EAAQ2N,EAAKmG,GAAK3N,EAAEnG,EAAQ2N,KAASmG,GAE5F,OAAOF,EAAI,GAAKE,GAAKxW,OAAOM,eAAeoC,EAAQ2N,EAAKmG,GAAIA,GAG1D,GAAkC,SAAUK,EAAYC,GAC1D,OAAO,SAAUpU,EAAQ2N,GACvByG,EAAUpU,EAAQ2N,EAAKwG,KA8BvB,GAEJ,WACE,SAASqxH,EAAwB19H,EAAQu9C,EAAQogF,GAC/C,IAAInnI,EAAQpB,KAEZA,KAAKse,aAAe,GAEpBte,KAAKse,aAAalQ,KAAK+5C,EAAO66E,UAAU,WACtC,OAAO5hI,EAAMonI,QAAQrgF,EAAO0+E,qBAG9B7mI,KAAKse,aAAalQ,KAAK+5C,EAAOwD,WAAW3rD,KAAKwoI,QAASxoI,OAEvDA,KAAKse,aAAalQ,KAAK+5C,EAAO46E,UAAU/iI,KAAK4X,MAAO5X,OAEpDA,KAAKse,aAAalQ,KAAKxD,EAAO69H,WAAW,SAAU7vH,GACjD,GAAIxX,EAAMsnI,QAAS,CACjB,IAAIrvF,EAAKzgC,EAAKnF,WAAWmF,EAAKrM,OAAS,GAEnCnL,EAAMsnI,QAAQC,iBAAiBxoH,IAAIk5B,IAAOzuC,EAAOiB,mBAAmBC,YAAY88H,mCAClFL,EAAOnnI,EAAMsnI,QAAQn+G,UAoC7B,OA9BA+9G,EAAwB3nI,UAAU6nI,QAAU,SAAU5hE,GACpD,GAAKA,GAAa,aAAgBA,EAASr8C,KAAKy/F,WAAW6e,kBAA3D,CAOA,IAFA,IAAIF,EAAmB,IAAI,KAElB/1H,EAAK,EAAG+F,EAAKiuD,EAASr8C,KAAKy/F,WAAW6e,iBAAkBj2H,EAAK+F,EAAGpM,OAAQqG,IAAM,CACrF,IAAIymC,EAAK1gC,EAAG/F,GAERymC,EAAG9sC,OAAS,GACdo8H,EAAiBvvH,IAAIigC,EAAG5lC,WAAW,IAIvCzT,KAAK0oI,QAAU,CACbC,iBAAkBA,EAClBp+G,KAAMq8C,QAhBN5mE,KAAK4X,SAoBT0wH,EAAwB3nI,UAAUiX,MAAQ,WACxC5X,KAAK0oI,aAAU1mI,GAGjBsmI,EAAwB3nI,UAAUc,QAAU,WAC1C,YAAQzB,KAAKse,eAGRgqH,EAvDT,GA0DI,GAEJ,WACE,SAASQ,EAAkBz9H,EAAS09H,EAAcC,EAAgBziH,EAAiB+V,EAAoBgtC,GACrG,IAAIloE,EAAQpB,KAEZA,KAAKqL,QAAUA,EACfrL,KAAKgpI,eAAiBA,EACtBhpI,KAAKumB,gBAAkBA,EACvBvmB,KAAKs8B,mBAAqBA,EAC1Bt8B,KAAKspE,sBAAwBA,EAC7BtpE,KAAKw8B,WAAa,GAClBx8B,KAAKipI,SAAU,EAEfjpI,KAAK0mB,OAAS,IAAI,GAAa1mB,KAAKqL,QAAS09H,GAC7C/oI,KAAKw0D,QAAU,IAAI,IAAU,WAC3B,IAAIrM,EAAS/mD,EAAMkoE,sBAAsB+Q,eAAe,GAAej5E,EAAMiK,SAE7EjK,EAAMo7B,WAAWpuB,KAAK+5C,GAEtB/mD,EAAMo7B,WAAWpuB,KAAK+5C,EAAO26E,YAAY,SAAUv4G,GACjD,OAAOnpB,EAAM8nI,iBAAiB3+G,GAAM,GAAO,IAC1CnpB,IAGH,IAAI+nI,EAAmB,IAAI,GAAwB/nI,EAAMiK,QAAS88C,EAAQ,SAAU59B,GAClF,OAAOnpB,EAAM8nI,iBAAiB3+G,GAAM,GAAO,KAG7CnpB,EAAMo7B,WAAWpuB,KAAK+6H,EAAkB/nI,EAAMslB,OAAOo2G,aAAa,SAAU5wH,GACnC,IAAnCA,EAAEizH,gBAAgBhT,MAAM5/G,QAC1B48H,EAAiBvxH,WAKrB,IAAIwxH,EAAgB,GAAetf,cAActyG,OAAOpW,EAAMk7B,oBAmC9D,OAjCAl7B,EAAMo7B,WAAWpuB,KAAK+5C,EAAOwD,WAAW,SAAUhzC,GAChD,IAAI4R,EAAO5R,EAAG4R,KAEVrf,EAAW9J,EAAMiK,QAAQyI,cAEzB5F,EAAcqc,EAAKy/F,WAAWv8G,MAAMS,YACpCoD,EAAYpG,EAASyC,OACrBpL,GAAQ,EAEiE,UAAzEnB,EAAMiK,QAAQQ,mBAAmBC,YAAYu9H,yBAA8D,IAAvBjoI,EAAMslB,OAAOjC,OAEjG8F,EAAKy/F,WAAWz5G,SAAYga,EAAKy/F,WAAW1jB,qBAA2D,EAAlC/7E,EAAKy/F,WAAWsf,iBAEpFh4H,EAAYpD,IAAgBqc,EAAKy/F,WAAWwO,WAAWjsH,SAQ1DhK,EAPcnB,EAAMiK,QAAQyB,WAAWoH,gBAAgB,CACrDjG,gBAAiB/C,EAASwC,WAC1BQ,YAAaA,EACbmD,cAAenG,EAASwC,WACxB4D,UAAWA,MAGOiZ,EAAKy/F,WAAWwO,YAGtC4Q,EAAcpxH,IAAIzV,MAGpBnB,EAAMo7B,WAAWpuB,KAAK,CACpB3M,QAAS,WACP2nI,EAAcxxH,WAIXuwC,IAETnoD,KAAKupI,cAAgB,IAAI,IAAU,WACjC,IAAIrxG,EAAM,IAAI,GAAoB92B,EAAMiK,QAASjK,EAAMk7B,oBAIvD,OAFAl7B,EAAMo7B,WAAWpuB,KAAK8pB,GAEfA,IAGTl4B,KAAKw8B,WAAWpuB,KAAKk7D,EAAsB+Q,eAAe,GAAgBhvE,IAE1ErL,KAAKw8B,WAAWpuB,KAAKpO,KAAK0mB,OAAOm2G,aAAa,SAAU3wH,GACtD9K,EAAMozD,QAAQx/B,WAAWwwG,cAAct5H,EAAE+vH,KAAM/vH,EAAEgwH,IAAM,IAAM,OAG/Dl8H,KAAKw8B,WAAWpuB,KAAKpO,KAAK0mB,OAAOo2G,aAAa,SAAU5wH,GACtD,IAAKA,EAAEgwH,IAAK,CACV,IAAI15F,EAAQphC,EAAM4nI,eAAevlF,OAAOriD,EAAMiK,QAAQyB,WAAY1L,EAAMiK,QAAQyI,cAAe5H,EAAEizH,gBAAgBhT,OAEjH/qH,EAAMozD,QAAQx/B,WAAW0wG,gBAAgBx5H,EAAEizH,gBAAiB38F,EAAOt2B,EAAEgzH,SAAUhzH,EAAE+vH,UAIrFj8H,KAAKw8B,WAAWpuB,KAAKpO,KAAK0mB,OAAOk2G,YAAY,SAAU1wH,GACjD9K,EAAMozD,UAAYtoD,EAAE6xH,WACtB38H,EAAMozD,QAAQx/B,WAAWqyG,gBAI7BrnI,KAAKw8B,WAAWpuB,KAAKpO,KAAKqL,QAAQq1B,sBAAsB,WACjDt/B,EAAM6nI,SACT7nI,EAAMslB,OAAOjJ,YAKjB,IAAI+rH,EAA2B,GAAezf,yBAAyBvyG,OAAO8kB,GAE1EmtG,EAAmB,WACrB,IAAIJ,EAA0BjoI,EAAMiK,QAAQQ,mBAAmBC,YAAYu9H,wBAE3EG,EAAyBxxH,IAAgC,OAA5BqxH,GAAgE,UAA5BA,IAGnErpI,KAAKw8B,WAAWpuB,KAAKpO,KAAKqL,QAAQiB,yBAAyB,SAAUJ,GACnE,OAAOu9H,OAGTA,IAoTF,OAjTAX,EAAkBloI,IAAM,SAAUgK,GAChC,OAAOA,EAAO6B,gBAAgBq8H,EAAkBp8H,KAGlDo8H,EAAkBnoI,UAAUgM,MAAQ,WAClC,OAAOm8H,EAAkBp8H,IAG3Bo8H,EAAkBnoI,UAAUc,QAAU,WACpCzB,KAAKw8B,WAAa,YAAQx8B,KAAKw8B,YAE/Bx8B,KAAKw0D,QAAQ/yD,UAETzB,KAAK0mB,QACP1mB,KAAK0mB,OAAOjlB,WAIhBqnI,EAAkBnoI,UAAUuoI,iBAAmB,SAAUroI,EAAO6oI,EAA4BC,GAC1F,IAEIhxH,EAFAvX,EAAQpB,KAIZ,IAAKa,IAAUA,EAAM0pB,KAKnB,OAJAvqB,KAAKupI,cAAcv0G,WAAWpd,aAE9B5X,KAAK0mB,OAAOjJ,SAKd,GAAKzd,KAAKqL,QAAQuB,WAAlB,CAIA,IAAIC,EAAQ7M,KAAKqL,QAAQyB,WAErB88H,EAAkB/8H,EAAMqrH,0BACxB1mG,EAAK3wB,EAAM0pB,KACXohG,EAAan6F,EAAGw4F,WAChB9+G,EAAWsmB,EAAGtmB,SAId2+H,EAFe7pI,KAAKqL,QAAQyI,cAAcnG,OAEbzC,EAASyC,OAGtCg8H,GACF3pI,KAAKqL,QAAQyH,eAGXzJ,MAAM2T,QAAQ2uG,EAAWrlB,sBAC3BtmG,KAAKqL,QAAQo6D,aAAa,wCAAyCkmD,EAAWrlB,oBAAoBr5F,IAAI,SAAU4a,GAC9G,OAAO,KAAcsQ,QAAQ,KAAM/Y,KAAKyI,EAAKpa,OAAQoa,EAAKjP,SAK9D5Y,KAAKgpI,eAAec,SAASj9H,EAAO7M,KAAKqL,QAAQyI,cAAejT,EAAM0pB,MAEtE,IAAIiuG,EAAa7M,EAAW6M,WAEO,EAA7B7M,EAAW2d,kBAGf9Q,EAAaxJ,GAAch3E,OAAOwgF,IAGpC,IAAIxD,EAAkB9pH,EAASyC,OAASg+G,EAAWl+G,MAAMS,YACrD+mH,EAAiBtJ,EAAWl+G,MAAM6D,UAAYpG,EAASyC,OAC3D,GAAmB/M,IAAIZ,KAAKqL,SAAS+sB,OAAOogG,EAAYxD,EAAkB6U,EAAa5U,GAAgB,GAAO,IAAsC,EAA7BtJ,EAAW2d,kBAI9HK,GACF3pI,KAAKqL,QAAQyH,eAGV64G,EAAWp7G,QAGLo7G,EAAWp7G,QAAQvK,KAAO,GAAqBA,GAExDhG,KAAK0mB,OAAOpR,QAAQ,CAClB2mH,MAAM,EACNC,KAAK,IACJ,KAGFvjH,EAAK3Y,KAAKumB,iBAAiBuB,eAAexH,MAAM3H,EAAI,CAACgzG,EAAWp7G,QAAQvK,IAAI+hB,OAAO4jG,EAAWp7G,QAAQoG,UAAYg1G,EAAWp7G,QAAQoG,UAAU22B,QAAU,KAAKpoB,MAAM,MAErKllB,KAAK0mB,OAAOjJ,UAXZzd,KAAK0mB,OAAOjJ,SAcVisH,GACF1pI,KAAKupI,cAAcv0G,WAAWhd,IAAInX,EAAO,SAAUogB,GAIjD,KAAOpU,EAAMk9H,WAAW,CAClBH,IAAoB/8H,EAAMqrH,2BAC5BrrH,EAAMm9H,OAGR5oI,EAAM8nI,iBAAiBjoH,GAAM,GAAO,GAEpC,SAKNjhB,KAAKiqI,qBAAqBppI,EAAM0pB,QAGlCu+G,EAAkBnoI,UAAUspI,qBAAuB,SAAUtxH,GAC3D,IAAIgzG,EAAahzG,EAAGqxG,WAEpB,GAAI,aAAgB2B,EAAWrlB,qBAAsB,CACnD,IAAIja,EAAMviF,EAAA,EAAa,qBAAsB,4CAA6C6hH,EAAWzhH,MAAOyhH,EAAWrlB,oBAAoB/5F,QAC3I,aAAM8/E,KAIVy8C,EAAkBnoI,UAAU83H,eAAiB,SAAUiG,GACjD1+H,KAAKqL,QAAQuB,aACf5M,KAAK0mB,OAAOpR,QAAQ,CAClB2mH,MAAM,EACNC,KAAK,IACJ,EAAOwC,GAEV1+H,KAAKqL,QAAQ+iE,WAAWpuE,KAAKqL,QAAQyI,cAAcpG,WAAY,GAI/D1N,KAAKqL,QAAQmK,UAIjBszH,EAAkBnoI,UAAUupI,4BAA8B,SAAUxhH,GAClE,IAAItnB,EAAQpB,KAEZ,GAAKA,KAAKqL,QAAQuB,WAAlB,CAIA,IAAIu9H,EAAcnqI,KAAKqL,QAAQyI,cAE3Bs2H,EAAW,WACTD,EAAY16H,OAAOrO,EAAMiK,QAAQyI,gBACnC1S,EAAMmlB,gBAAgBuB,eAAeY,EAAI0hH,WAiC7C,KAAMC,KAAKrqI,KAAK0mB,OAAOm2G,aAAvB,CAAqC,SAAUn7G,GAE7C,IAAIpE,EAAW,GACf,KAAMgtH,IAAIlpI,EAAMslB,OAAOm2G,aAAcz7H,EAAMslB,OAAOk2G,YAAlD,CAA+D,WAE7D,YAAQt/G,GACR8sH,UACCpoI,EAAWsb,GAEdlc,EAAMslB,OAAOo2G,aAAa,SAAUnkH,GAClC,IAAIwmH,EAAkBxmH,EAAGwmH,gBAGzB,GAFA,YAAQ7hH,GAE6B,IAAjC6hH,EAAgBhT,MAAM5/G,OAA1B,CAKA,IAAIi2B,EAAQphC,EAAM4nI,eAAevlF,OAAOriD,EAAMiK,QAAQyB,WAAY1L,EAAMiK,QAAQyI,cAAeqrH,EAAgBhT,OAE3G5hG,EAAO40G,EAAgBhT,MAAM3pF,IAjDjB,SAAuBjY,GACzC,GAAsC,EAAlCA,EAAKy/F,WAAWsf,iBAEjB/+G,EAAKy/F,WAAW1jB,oBAEjB,OAAO,EAGT,IAAIp7F,EAAW9J,EAAMiK,QAAQyI,cAEzB5F,EAAcqc,EAAKy/F,WAAWv8G,MAAMS,YACpCoD,EAAYpG,EAASyC,OAEzB,OAAI2D,EAAYpD,IAAgBqc,EAAKy/F,WAAWwO,WAAWjsH,QAK7CnL,EAAMiK,QAAQyB,WAAWoH,gBAAgB,CACrDjG,gBAAiB/C,EAASwC,WAC1BQ,YAAaA,EACbmD,cAAenG,EAASwC,WACxB4D,UAAWA,MAIMiZ,EAAKy/F,WAAWwO,WAyB5B4Q,CAAc7+G,GACjB6/G,KAIFhpI,EAAMiK,QAAQyH,eAEd1R,EAAM8nI,iBAAiB,CACrB1mG,MAAOA,EACPjY,KAAMA,EACN1d,MAAOsyH,IACN,GAAM,SAnBPiL,UAoBDpoI,EAAWsb,KAGhBtd,KAAK0mB,OAAOpR,QAAQ,CAClB2mH,MAAM,EACNC,KAAK,IAGPl8H,KAAKqL,QAAQ+iE,WAAW+7D,EAAYz8H,WAAY,GAIhD1N,KAAKqL,QAAQmK,UAGfszH,EAAkBnoI,UAAU4pI,yBAA2B,SAAUb,GAC/D,GAAI1pI,KAAKw0D,QAAS,CAChB,IAAIjqC,EAAOvqB,KAAKw0D,QAAQx/B,WAAW6xG,iBAEnC7mI,KAAKkpI,iBAAiB3+G,IAAQm/G,GAA4B,KAI9DZ,EAAkBnoI,UAAU6pI,qBAAuB,WACjDxqI,KAAKupI,cAAcv0G,WAAW/T,QAGhC6nH,EAAkBnoI,UAAU8pI,qBAAuB,WACjDzqI,KAAKupI,cAAcv0G,WAAWw0F,QAGhCsf,EAAkBnoI,UAAU+pI,oBAAsB,WAC5C1qI,KAAKw0D,UACPx0D,KAAK0mB,OAAOjJ,SAEZzd,KAAKw0D,QAAQx/B,WAAWqyG,eAI5ByB,EAAkBnoI,UAAUgqI,qBAAuB,WAC7C3qI,KAAKw0D,SACPx0D,KAAKw0D,QAAQx/B,WAAWmxG,cAI5B2C,EAAkBnoI,UAAUiqI,yBAA2B,WACjD5qI,KAAKw0D,SACPx0D,KAAKw0D,QAAQx/B,WAAWixG,kBAI5B6C,EAAkBnoI,UAAUkqI,qBAAuB,WAC7C7qI,KAAKw0D,SACPx0D,KAAKw0D,QAAQx/B,WAAWqxG,cAI5ByC,EAAkBnoI,UAAUmqI,qBAAuB,WAC7C9qI,KAAKw0D,SACPx0D,KAAKw0D,QAAQx/B,WAAWyxG,kBAI5BqC,EAAkBnoI,UAAUoqI,yBAA2B,WACjD/qI,KAAKw0D,SACPx0D,KAAKw0D,QAAQx/B,WAAWuxG,sBAI5BuC,EAAkBnoI,UAAUqqI,sBAAwB,WAC9ChrI,KAAKw0D,SACPx0D,KAAKw0D,QAAQx/B,WAAW2xG,eAI5BmC,EAAkBnoI,UAAUsqI,wBAA0B,WAChDjrI,KAAKw0D,SACPx0D,KAAKw0D,QAAQx/B,WAAW2sG,iBAI5BmH,EAAkBnoI,UAAUuqI,sBAAwB,WAC9ClrI,KAAKw0D,SACPx0D,KAAKw0D,QAAQx/B,WAAW+xG,sBAI5B+B,EAAkBp8H,GAAK,mCACvBo8H,EAAoB,GAAW,CAAC,GAAQ,EAAG,MAAuB,GAAQ,EAAG,MAAwB,GAAQ,EAAG,MAAkB,GAAQ,EAAG,MAAqB,GAAQ,EAAG,OAAyBA,GAzaxM,GA+aI,GAEJ,SAAU/+H,GAGR,SAASohI,IACP,OAAOphI,EAAOE,KAAKjK,KAAM,CACvBgG,GAAImlI,EAAqBnlI,GACzBkE,MAAOJ,EAAA,EAAa,wBAAyB,mBAC7CK,MAAO,kBACPC,aAAc,KAAege,IAAI,IAAkBnV,SAAU,IAAkBm4H,2BAC/E/gI,OAAQ,CACNC,OAAQ,IAAkB8I,eAC1B5I,QAAS,KAKT6I,IAAK,CACH7I,QAAS,KAMXC,OAAQ,QAINzK,KAcR,OAxCA,GAAUmrI,EAAsBphI,GA6BhCohI,EAAqBxqI,UAAU+J,IAAM,SAAUC,EAAUC,GACvD,IAAIC,EAAa,GAAkBjK,IAAIgK,GAElCC,GAILA,EAAW4tH,kBAGb0S,EAAqBnlI,GAAK,+BACnBmlI,EAzCT,CA0CE,KAGF,YAA2B,IAC3B,YAAqB,IACrB,IAGIE,GAAiB,IAAc7yH,mBAAmB,GAAkB5X,KACxE,YAAsB,IAAIyqI,GAAe,CACvCrlI,GAAI,2BACJoE,aAAc,GAAeuzG,QAC7BllG,QAAS,SAAiB2K,GACxB,OAAOA,EAAEmnH,0BAAyB,IAEpClgI,OAAQ,CACNI,OAXS,IAYTH,OAAQ,IAAkB8I,eAC1B5I,QAAS,MAKb,YAAsB,IAAI6gI,GAAe,CACvCrlI,GAAI,kCACJoE,aAAc,GAAeuzG,QAC7BllG,QAAS,SAAiB2K,GACxB,OAAOA,EAAEmnH,0BAAyB,IAEpClgI,OAAQ,CACNI,OAzBS,IA0BTH,OAAQ,KAAe8d,IAAI,IAAkBhV,eAAgB,GAAe22G,yBAA0B,GAAeD,eACrHt/G,QAAS,MAKb,YAAsB,IAAI6gI,GAAe,CACvCrlI,GAAI,oBACJoE,aAAc,GAAeuzG,QAC7BllG,QAAS,SAAiB2K,GACxB,OAAOA,EAAEsnH,uBAEXrgI,OAAQ,CACNI,OAvCS,IAwCTH,OAAQ,IAAkB8I,eAC1B5I,QAAS,EAGTmL,UAAW,CAAC,UAOhB,YAAsB,IAAI01H,GAAe,CACvCrlI,GAAI,uBACJoE,aAAc,KAAege,IAAI,GAAeu1F,QAAS,GAAekM,qBACxEpxG,QAAS,SAAiB/B,GACxB,OAAOA,EAAEi0H,wBAEXtgI,OAAQ,CACNI,OA1DS,IA2DTH,OAAQ,IAAkB8I,eAC1B5I,QAAS,GAGTmL,UAAW,CAAC,MAKZtC,IAAK,CACH7I,QAAS,GAGTmL,UAAW,CAAC,KAIV,UAQR,YAAsB,IAAI01H,GAAe,CACvCrlI,GAAI,2BACJoE,aAAc,KAAege,IAAI,GAAeu1F,QAAS,GAAekM,qBACxEpxG,QAAS,SAAiB/B,GACxB,OAAOA,EAAEk0H,4BAEXvgI,OAAQ,CACNI,OA3FS,IA4FTH,OAAQ,IAAkB8I,eAC1B5I,QAAS,GAGTmL,UAAW,CAAC,UAOhB,YAAsB,IAAI01H,GAAe,CACvCrlI,GAAI,uBACJoE,aAAc,KAAege,IAAI,GAAeu1F,QAAS,GAAekM,qBACxEpxG,QAAS,SAAiB/B,GACxB,OAAOA,EAAEm0H,2BAGb,YAAsB,IAAIQ,GAAe,CACvCrlI,GAAI,uBACJoE,aAAc,KAAege,IAAI,GAAeu1F,QAAS,GAAekM,qBACxEpxG,QAAS,SAAiB/B,GACxB,OAAOA,EAAEo0H,wBAEXzgI,OAAQ,CACNI,OArHS,IAsHTH,OAAQ,IAAkB8I,eAC1B5I,QAAS,GAGTmL,UAAW,CAAC,MAKZtC,IAAK,CACH7I,QAAS,GAGTmL,UAAW,CAAC,KAIV,UAQR,YAAsB,IAAI01H,GAAe,CACvCrlI,GAAI,2BACJoE,aAAc,KAAege,IAAI,GAAeu1F,QAAS,GAAekM,qBACxEpxG,QAAS,SAAiB/B,GACxB,OAAOA,EAAEq0H,4BAEX1gI,OAAQ,CACNI,OAtJS,IAuJTH,OAAQ,IAAkB8I,eAC1B5I,QAAS,GAGTmL,UAAW,CAAC,UAOhB,YAAsB,IAAI01H,GAAe,CACvCrlI,GAAI,wBACJoE,aAAc,KAAege,IAAI,GAAeu1F,QAAS,GAAekM,qBACxEpxG,QAAS,SAAiB/B,GACxB,OAAOA,EAAEs0H,4BAGb,YAAsB,IAAIK,GAAe,CACvCrlI,GAAI,0BACJoE,aAAc,GAAeuzG,QAC7BllG,QAAS,SAAiB2K,GACxB,OAAOA,EAAE6nH,2BAEX5gI,OAAQ,CACNI,OAhLS,IAiLTH,OAAQ,IAAkB8I,eAC1B5I,QAAS,KAKT6I,IAAK,CACH7I,QAAS,SAQf,YAAsB,IAAI6gI,GAAe,CACvCrlI,GAAI,wBACJoE,aAAc,GAAeuzG,QAC7BllG,QAAS,SAAiB2K,GACxB,OAAOA,EAAE8nH,yBAEX7gI,OAAQ,CACNI,OAvMS,IAwMTH,OAAQ,IAAkB8I,eAC1B5I,QAAS,KAOT6I,IAAK,CACH7I,QAAS,SAWf,YAAsB,IAAI6gI,GAAe,CACvCrlI,GAAI,uBACJoE,aAAc,KAAege,IAAI,KAAe3Y,OAAO,8BAA+B,MAAO,GAAew4H,MAAO,GAAetqB,QAAQluC,YAAa,GAAoBypD,iBAAiBzpD,YAAa,GAAmBgoD,cAAchoD,aAC1Oh3D,QAAS,SAAiB2K,EAAGsF,GAC3BtF,EAAE8mH,4BAA4B,aAASxhH,GAAO,GAAS,CACrD0hH,SAAU,OACT1hH,GAAO,CACR0hH,SAAU,SAGd//H,OAAQ,CACNI,OAvOS,IAwOTD,QAAS,MAKb,YAAsB,IAAI6gI,GAAe,CACvCrlI,GAAI,uBACJoE,aAAc,KAAege,IAAI,KAAe3Y,OAAO,8BAA+B,MAAO,GAAoBypH,iBAAkB,GAAevb,QAAQluC,YAAa,GAAmBgoD,cAAchoD,aACxMh3D,QAAS,SAAiB2K,GACxB,OAAOA,EAAEonH,wBAEXngI,OAAQ,CACNI,OApPS,IAqPTH,OAAQ,IAAkB8I,eAC1B5I,QAAS,MAKb,YAAsB,IAAI6gI,GAAe,CACvCrlI,GAAI,uBACJoE,aAAc,KAAege,IAAI,KAAe3Y,OAAO,8BAA+B,MAAO,GAAoBypH,iBAAkB,GAAevb,QAAQluC,YAAa,GAAmBgoD,cAAchoD,aACxMh3D,QAAS,SAAiB2K,GACxB,OAAOA,EAAEqnH,wBAEXpgI,OAAQ,CACNI,OAlQS,IAmQTH,OAAQ,IAAkB8I,eAC1B5I,QAAS,S,cCt3BT,GAAsC,WACxC,IAAIxB,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA8BtC,GAEJ,SAAUO,GAGR,SAASuhI,IACP,OAAOvhI,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,gCACJkE,MAAOJ,EAAA,EAAa,kBAAmB,+BACvCK,MAAO,8BACPC,aAAc,QACVpK,KAgBR,OAxBA,GAAUsrI,EAAuBvhI,GAWjCuhI,EAAsB3qI,UAAU+J,IAAM,SAAUC,EAAUC,GACxD,GAAKA,EAAOgC,WAAZ,CAIA,IAAIC,EAAQjC,EAAOkC,WACnBD,EAAM0+H,cACN,IAAIC,EAAK,IAAI,MAAU,GACvB3+H,EAAM4+H,kBAAkB5+H,EAAM8G,gBAC9B63H,EAAGt2G,OACHmoB,QAAQC,IAAI,qBAAuBkuF,EAAGE,aAGjCJ,EAzBT,CA0BE,KAEF,YAAqB,I,cC5DjB,GAAsC,WACxC,IAAItiI,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA+BtC,GAEJ,SAAUO,GAGR,SAAS4hI,IACP,OAAO5hI,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI2lI,EAAyBj/H,GAC7BxC,MAAOJ,EAAA,EAAa,CAClB2G,IAAK,uBACLC,QAAS,CAAC,+DACT,8BACHvG,MAAO,6BACPC,aAAc,KACdC,OAAQ,CACNC,OAAQ,KACRE,QAAS,KAKT6I,IAAK,CACH7I,QAAS,MAQXC,OAAQ,QAINzK,KAgBR,OA/CA,GAAU2rI,EAA0B5hI,GAkCpC4hI,EAAyBhrI,UAAU+J,IAAM,SAAUC,EAAUC,GAC3D,IACIy4C,GADW,KAASuoF,kBAExB,KAASC,gBAAgBxoF,GAErBA,EACF,aAAMv5C,EAAA,EAAa,0BAA2B,mEAE9C,aAAMA,EAAA,EAAa,2BAA4B,oDAInD6hI,EAAyBj/H,GAAK,mCACvBi/H,EAhDT,CAiDE,KAGF,YAAqB,ICrFrB,IAAI,GAAsC,WACxC,IAAI3iI,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA0BtC,GAAwC,SAAUgN,EAAY1T,EAAQ2N,EAAKgG,GAC7E,IAEIxN,EAFAyN,EAAIC,UAAUpK,OACdqK,EAAIF,EAAI,EAAI5T,EAAkB,OAAT2T,EAAgBA,EAAOrW,OAAOyW,yBAAyB/T,EAAQ2N,GAAOgG,EAE/F,GAAuB,kBAAZK,SAAoD,oBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASP,EAAY1T,EAAQ2N,EAAKgG,QAAW,IAAK,IAAIjI,EAAIgI,EAAWjK,OAAS,EAAGiC,GAAK,EAAGA,KAC1KvF,EAAIuN,EAAWhI,MAAIoI,GAAKF,EAAI,EAAIzN,EAAE2N,GAAKF,EAAI,EAAIzN,EAAEnG,EAAQ2N,EAAKmG,GAAK3N,EAAEnG,EAAQ2N,KAASmG,GAE5F,OAAOF,EAAI,GAAKE,GAAKxW,OAAOM,eAAeoC,EAAQ2N,EAAKmG,GAAIA,GAG1D,GAAkC,SAAUK,EAAYC,GAC1D,OAAO,SAAUpU,EAAQ2N,GACvByG,EAAUpU,EAAQ2N,EAAKwG,KAmBhB60H,GAAsB,aAAc,iCAAkC,CAC/EniI,KAAM,YACNC,MAAO,YACPC,GAAI,MACHC,EAAA,EAAa,gBAAiB,qJAAqJ,GAC3KiiI,GAA4B,aAAc,uCAAwC,CAC3FpiI,KAAM,YACNC,MAAO,YACPC,GAAI,MACHC,EAAA,EAAa,sBAAuB,yJAAyJ,GACrLkiI,GAA4B,aAAc,6BAA8B,CACjFpiI,MAAO,KACPD,KAAM,KACNE,GAAI,KACHC,EAAA,EAAa,sBAAuB,0EAC5BmiI,GAAkC,aAAc,mCAAoC,CAC7FriI,MAAO,KACPD,KAAM,KACNE,GAAI,KACHC,EAAA,EAAa,4BAA6B,8EAClCoiI,GAAuC,aAAc,8CAA+C,CAC7GviI,KAAM,YACNC,MAAO,YACPC,GAAI,aACHC,EAAA,EAAa,uCAAwC,8HAA8H,GAC3KqiI,GAA6C,aAAc,oDAAqD,CACzHxiI,KAAM,YACNC,MAAO,YACPC,GAAI,aACHC,EAAA,EAAa,6CAA8C,2IAA2I,GAC9LsiI,GAAuB,IAAI,KAAc,qBAAqB,GAClE,SAASC,GAAyBx/H,EAAO3B,EAAU2Q,GACxD,IAAIywH,EAAiB,KAAkCtiH,QAAQnd,GAI/D,OAAO,YAAMy/H,EAAer/H,IAAI,SAAUmP,GACxC,OAAO,WACL,OAAOO,QAAQC,QAAQR,EAASmwH,0BAA0B1/H,EAAO3B,EAAU2Q,IAAQvY,UAAKtB,EAAW,SAEnG2mH,GAAA,GAGN,IAAI,GAEJ,WACE,SAAS6jB,EAA2B3/H,EAAOK,EAAWi+B,GACpD,IAAI/pC,EAAQpB,KAEZA,KAAKysI,WAAazsI,KAAK0sI,qBAAqB7/H,EAAOK,GACnDlN,KAAKqS,OAAS,YAAwB,SAAUwJ,GAC9C,OAAOza,EAAMurI,SAAS9/H,EAAOK,EAAWi+B,EAAgBtvB,KAyC5D,OArCA2wH,EAA2B7rI,UAAU+rI,qBAAuB,SAAU7/H,EAAOK,GAC3E,IAAI8kD,EAAOnlD,EAAMklD,kBAAkB7kD,EAAU4G,eAE7C,OAAIk+C,EACK,IAAI,KAAM9kD,EAAUe,gBAAiB+jD,EAAK9jD,YAAahB,EAAUe,gBAAiB+jD,EAAK1gD,WAGzF,MAGTk7H,EAA2B7rI,UAAU0tB,QAAU,SAAUxhB,EAAOK,EAAWkyD,GAUzE,IATA,IAAI1xD,EAAaR,EAAUe,gBACvBC,EAAchB,EAAUgB,YACxBoD,EAAYpE,EAAUoE,UAEtBs7H,EAAmB5sI,KAAK0sI,qBAAqB7/H,EAAOK,GAEpD2/H,EAAiBriH,QAAQxqB,KAAKysI,YAAczsI,KAAKysI,WAAWtpG,YAAYypG,IAGnEp+H,EAAI,EAAGC,EAAM2wD,EAAc7yD,QAASsgI,GAAkBr+H,EAAIC,EAAKD,IAAK,CAC3E,IAAIf,EAAQZ,EAAMyhB,mBAAmB8wC,EAAc5wD,IAE/Cf,GAASA,EAAMQ,kBAAoBP,GACjCD,EAAMS,aAAeA,GAAeT,EAAM6D,WAAaA,IACzDu7H,GAAiB,GAKvB,OAAOA,GAGTL,EAA2B7rI,UAAU8c,OAAS,WAC5Czd,KAAKqS,OAAOoL,UAGP+uH,EA/CT,GAkDIM,GAEJ,SAAU/iI,GAGR,SAAS+iI,IACP,OAAkB,OAAX/iI,GAAmBA,EAAOuW,MAAMtgB,KAAM2W,YAAc3W,KAS7D,OAZA,GAAU8sI,EAAoC/iI,GAM9C+iI,EAAmCnsI,UAAUgsI,SAAW,SAAU9/H,EAAOK,EAAWi+B,EAAgBtvB,GAClG,OAAOwwH,GAAyBx/H,EAAOK,EAAU4G,cAAe+H,GAAOvY,KAAK,SAAUf,GACpF,OAAOA,GAAS,MAIbuqI,EAbT,CAcE,IAEE,GAEJ,SAAU/iI,GAGR,SAASgjI,EAAkClgI,EAAOK,EAAWi+B,GAC3D,IAAI/pC,EAAQ2I,EAAOE,KAAKjK,KAAM6M,EAAOK,EAAWi+B,IAAmBnrC,KAGnE,OADAoB,EAAM4rI,kBAAoB9/H,EAAU+B,UAC7B7N,EAmCT,OAzCA,GAAU2rI,EAAmChjI,GAS7CgjI,EAAkCpsI,UAAUgsI,SAAW,SAAU9/H,EAAOK,EAAWi+B,EAAgBtvB,GACjG,OAAO,YAAQ,IAAKA,GAAOvY,KAAK,WAC9B,IAAK4J,EAAU+B,UACb,MAAO,GAGT,IAAI+iD,EAAOnlD,EAAMklD,kBAAkB7kD,EAAU4G,eAE7C,OAAKk+C,EAISnlD,EAAM42B,YAAYuuB,EAAKA,MAAM,GAAM,GAAO,EAAM7mB,GAAgB,GAC/Dl+B,IAAI,SAAUmgC,GAC3B,MAAO,CACL3/B,MAAO2/B,EAAE3/B,MACTgO,KAAM,KAAsBoxG,QAPvB,MAabkgB,EAAkCpsI,UAAU0tB,QAAU,SAAUxhB,EAAOK,EAAWkyD,GAChF,IAAI6tE,EAA0B//H,EAAU+B,UAExC,OAAIjP,KAAKgtI,oBAAsBC,GAIxBljI,EAAOpJ,UAAU0tB,QAAQpkB,KAAKjK,KAAM6M,EAAOK,EAAWkyD,IAGxD2tE,EA1CT,CA2CE,IAUF,YAA+B,6BAA8B,SAAUlgI,EAAO3B,GAC5E,OAAOmhI,GAAyBx/H,EAAO3B,EAAU,KAAkB4S,QAGrE,IAAI,GAEJ,WACE,SAASovH,EAAgBtiI,EAAQwM,GAC/B,IAAIhW,EAAQpB,KAEZA,KAAKmtI,qBAAuB,EAC5BntI,KAAKotI,wBAAyB,EAC9BptI,KAAKqtI,mBAAqB,GAC1BrtI,KAAKstI,6BAA+B,EACpCttI,KAAKutI,wBAA0B,EAC/BvtI,KAAK4K,OAASA,EACd5K,KAAKwtI,mBAAqBpB,GAAqB50H,OAAOJ,GACtDpX,KAAKytI,4BAA6B,EAClCztI,KAAK0tI,qBAAuB1tI,KAAK4K,OAAOiB,mBAAmBC,YAAY4hI,qBACvE1tI,KAAK6M,MAAQ7M,KAAK4K,OAAOkC,WACzB9M,KAAK4vF,SAAW,GAChB5vF,KAAK4vF,SAASxhF,KAAKxD,EAAOqB,0BAA0B,SAAUC,GACxD9K,EAAMqsI,4BAKLrsI,EAAMssI,sBAMXtsI,EAAMusI,mBAAmBzhI,MAE3BlM,KAAK4vF,SAASxhF,KAAKxD,EAAOuB,wBAAwB,SAAUD,GAC1D9K,EAAMwsI,cAER5tI,KAAK4vF,SAASxhF,KAAKxD,EAAO0B,yBAAyB,SAAUJ,GAC3D,IAAIm3C,EAAWjiD,EAAMwJ,OAAOiB,mBAAmBC,YAAY4hI,qBAEvDtsI,EAAMssI,uBAAyBrqF,IACjCjiD,EAAMssI,qBAAuBrqF,EAE7BjiD,EAAMwsI,eAGV5tI,KAAK4tB,eAAiB,GACtB5tB,KAAKmtI,qBAAuB,EAC5BntI,KAAK6tI,cAAgB,KACrB7tI,KAAKotI,wBAAyB,EAC9BptI,KAAKstI,6BAA+B,EACpCttI,KAAKutI,wBAA0B,EAuQjC,OApQAL,EAAgBvsI,UAAUmtI,eAAiB,WACzC,OAAO9tI,KAAK4tB,eAAerhB,OAAS,GAGtC2gI,EAAgBvsI,UAAUywB,QAAU,WAC7BpxB,KAAK0tI,sBAIV1tI,KAAK60D,QAGPq4E,EAAgBvsI,UAAUotI,qBAAuB,WAC/C,IAAI3sI,EAAQpB,KAEZ,OAAO2oH,GAAA,EAAgB3oH,KAAK4tB,eAAe3gB,IAAI,SAAUjH,GACvD,OAAO5E,EAAMyL,MAAMyhB,mBAAmBtoB,KACrCkJ,KAAK,KAAMm2B,4BAGhB6nG,EAAgBvsI,UAAUqtI,SAAW,WACnC,IAAI5sI,EAAQpB,KAER80E,EAAa90E,KAAK+tI,uBAMlBE,EAAOn5D,GAJC6zC,GAAA,EAAkB7zC,EAAY,SAAUrnE,GAClD,OAAOA,EAAMH,iBAAiBlM,EAAMwJ,OAAOkJ,iBAErB,GAAKghE,EAAWvoE,QAGxC,IACEvM,KAAKytI,4BAA6B,EAClCztI,KAAK4K,OAAOuyB,YAAY8wG,EAAK9gI,oBAC7BnN,KAAK4K,OAAOy0B,qCAAqC4uG,GACjD,QACAjuI,KAAKytI,4BAA6B,IAItCP,EAAgBvsI,UAAUutI,SAAW,WACnC,IAAI9sI,EAAQpB,KAER80E,EAAa90E,KAAK+tI,uBAMlBE,EAAOn5D,GAJC6zC,GAAA,EAAkB7zC,EAAY,SAAUrnE,GAClD,OAAOA,EAAMH,iBAAiBlM,EAAMwJ,OAAOkJ,iBAErB,EAAIghE,EAAWvoE,QAAUuoE,EAAWvoE,QAG5D,IACEvM,KAAKytI,4BAA6B,EAClCztI,KAAK4K,OAAOuyB,YAAY8wG,EAAK9gI,oBAC7BnN,KAAK4K,OAAOy0B,qCAAqC4uG,GACjD,QACAjuI,KAAKytI,4BAA6B,IAItCP,EAAgBvsI,UAAUksB,mBAAqB,WACzC7sB,KAAK4tB,eAAerhB,OAAS,IAE/BvM,KAAK4tB,eAAiB5tB,KAAK4K,OAAO4B,iBAAiBxM,KAAK4tB,eAAgB,IAExE5tB,KAAKwtI,mBAAmBx1H,KAAI,KAIhCk1H,EAAgBvsI,UAAUitI,SAAW,WAEnC5tI,KAAK6sB,sBAGgC,IAAjC7sB,KAAKutI,yBACP5zH,aAAa3Z,KAAKutI,wBAClBvtI,KAAKutI,wBAA0B,GAIN,OAAvBvtI,KAAK6tI,gBACP7tI,KAAK6tI,cAAcpwH,SACnBzd,KAAK6tI,cAAgB,MAIlB7tI,KAAKotI,yBACRptI,KAAKmtI,uBACLntI,KAAKotI,wBAAyB,IAIlCF,EAAgBvsI,UAAUgtI,mBAAqB,SAAUzhI,GAElDlM,KAAK0tI,sBAOO,IAAbxhI,EAAE88B,OAQNhpC,KAAK60D,OAdH70D,KAAK4tI,YAiBTV,EAAgBvsI,UAAUk0D,KAAO,WAC/B,IAAIzzD,EAAQpB,KAER6kC,EAAkB7kC,KAAK4K,OAAOoL,eAElC,GAAI6uB,EAAgB52B,kBAAoB42B,EAAgBxzB,cAAxD,CAMA,IAAI3D,EAAam3B,EAAgB52B,gBAC7BC,EAAc22B,EAAgB32B,YAC9BoD,EAAYuzB,EAAgBvzB,UAC5B0gD,EAAOhyD,KAAK6M,MAAMklD,kBAAkB,CACtCrkD,WAAYA,EACZC,OAAQO,IAGV,IAAK8jD,GAAQA,EAAK9jD,YAAcA,GAAe8jD,EAAK1gD,UAAYA,EAC9DtR,KAAK4tI,eADP,CAUA,IA5MiC/gI,EAAOK,EAAWi+B,EA4M/CgjG,EAAuBnuI,KAAK6tI,eAAiB7tI,KAAK6tI,cAAcx/G,QAAQruB,KAAK6M,MAAOg4B,EAAiB7kC,KAAK4tB,gBAU9G,GAFA5tB,KAAKstI,8BAA+B,IAAI/lB,MAAO6mB,UAE3CD,EACEnuI,KAAKotI,yBAA2D,IAAjCptI,KAAKutI,yBAGtC5zH,aAAa3Z,KAAKutI,wBAClBvtI,KAAKutI,wBAA0B,EAE/BvtI,KAAKquI,+BAEF,CAGLruI,KAAK4tI,WAEL,IAAIU,IAAkBtuI,KAAKmtI,qBAC3BntI,KAAKotI,wBAAyB,EAC9BptI,KAAK6tI,eAtO0BhhI,EAsOkB7M,KAAK6M,MAtOhBK,EAsOuBlN,KAAK4K,OAAOoL,eAtOxBm1B,EAsOwCnrC,KAAK4K,OAAOiB,mBAAmBs/B,eArOxH,KAAkChrB,IAAItT,GACjC,IAAIigI,GAAmCjgI,EAAOK,EAAWi+B,GAG3D,IAAI,GAAkCt+B,EAAOK,EAAWi+B,IAkO3DnrC,KAAK6tI,cAAcx7H,OAAO/O,KAAK,SAAU+nB,GACnCijH,IAAkBltI,EAAM+rI,uBAC1B/rI,EAAMgsI,wBAAyB,EAC/BhsI,EAAMisI,mBAAqBhiH,GAAQ,GAEnCjqB,EAAMitI,4BAEP,aAzDHruI,KAAK4tI,YA6DTV,EAAgBvsI,UAAU0tI,wBAA0B,WAClD,IAAIjtI,EAAQpB,KAERuuI,GAAc,IAAIhnB,MAAO6mB,UACzBI,EAAoBxuI,KAAKstI,6BAA+B,IAExDiB,GAAeC,GAEjBxuI,KAAKutI,wBAA0B,EAC/BvtI,KAAKyuI,qBAGLzuI,KAAKutI,uBAAyBzrI,WAAW,WACvCV,EAAMqtI,qBACLD,EAAoBD,IAI3BrB,EAAgBvsI,UAAU8tI,kBAAoB,WAC5CzuI,KAAKutI,wBAA0B,EAG/B,IAFA,IAAI53G,EAAc,GAETnnB,EAAI,EAAGC,EAAMzO,KAAKqtI,mBAAmB9gI,OAAQiC,EAAIC,EAAKD,IAAK,CAClE,IAAI69D,EAAOrsE,KAAKqtI,mBAAmB7+H,GACnCmnB,EAAYvnB,KAAK,CACfX,MAAO4+D,EAAK5+D,MACZtL,QAAS+qI,EAAgBwB,sBAAsBriE,EAAK5wD,QAIxDzb,KAAK4tB,eAAiB5tB,KAAK4K,OAAO4B,iBAAiBxM,KAAK4tB,eAAgB+H,GAExE31B,KAAKwtI,mBAAmBx1H,IAAIhY,KAAK8tI,mBAGnCZ,EAAgBwB,sBAAwB,SAAUjzH,GAChD,OAAIA,IAAS,KAAsBkzH,MAC1B3uI,KAAK4uI,eACHnzH,IAAS,KAAsBoxG,KACjC7sH,KAAK6uI,cAEL7uI,KAAK8uI,kBAIhB5B,EAAgBvsI,UAAUc,QAAU,WAClCzB,KAAK4tI,WAEL5tI,KAAK4vF,SAAW,YAAQ5vF,KAAK4vF,WAG/Bs9C,EAAgB0B,eAAiB,IAAuB7oI,SAAS,CAC/D2J,WAAY,EAGZC,UAAW,sBACXC,cAAe,CACbC,MAAO,YAAiBs8H,IACxBjhI,SAAU,IAAkB4E,UAGhCo9H,EAAgB2B,cAAgB,IAAuB9oI,SAAS,CAC9D2J,WAAY,EAGZC,UAAW,qBACXC,cAAe,CACbC,MAAO,YAAiB,MACxB3E,SAAU,IAAkB4E,UAGhCo9H,EAAgB4B,iBAAmB,IAAuB/oI,SAAS,CACjE2J,WAAY,EAGZC,UAAW,gBACXC,cAAe,CACbC,MAAO,YAAiBq8H,IACxBhhI,SAAU,IAAkB4E,UAGzBo9H,EArTT,GAwTI,GAEJ,SAAUnjI,GAGR,SAASglI,EAA4BnkI,EAAQwM,GAC3C,IAAIhW,EAAQ2I,EAAOE,KAAKjK,OAASA,KAE7BgvI,EAAkC,WAChCpkI,EAAOgC,aACTxL,EAAM6tI,eAAiB,IAAI,GAAgBrkI,EAAQwM,KAevD,OAXAhW,EAAMsK,UAAUd,EAAOwB,iBAAiB,SAAUF,GAC5C9K,EAAM6tI,iBACR7tI,EAAM6tI,eAAextI,UAErBL,EAAM6tI,eAAiB,MAGzBD,OAGFA,IACO5tI,EAgDT,OAtEA,GAAU2tI,EAA6BhlI,GAyBvCglI,EAA4BnuI,IAAM,SAAUgK,GAC1C,OAAOA,EAAO6B,gBAAgBsiI,EAA4BriI,KAG5DqiI,EAA4BpuI,UAAUgM,MAAQ,WAC5C,OAAOoiI,EAA4BriI,IAGrCqiI,EAA4BpuI,UAAU2/D,cAAgB,WACpD,SAAItgE,KAAKivI,iBAAkBjvI,KAAKivI,eAAenB,mBAOjDiB,EAA4BpuI,UAAUqtI,SAAW,WAC3ChuI,KAAKivI,gBACPjvI,KAAKivI,eAAejB,YAIxBe,EAA4BpuI,UAAUutI,SAAW,WAC3CluI,KAAKivI,gBACPjvI,KAAKivI,eAAef,YAIxBa,EAA4BpuI,UAAUigE,iBAAmB,SAAUn8C,GAC7DzkB,KAAKivI,gBAAkBxqH,GACzBzkB,KAAKivI,eAAe79G,WAIxB29G,EAA4BpuI,UAAUc,QAAU,WAC1CzB,KAAKivI,iBACPjvI,KAAKivI,eAAextI,UACpBzB,KAAKivI,eAAiB,MAGxBllI,EAAOpJ,UAAUc,QAAQwI,KAAKjK,OAGhC+uI,EAA4BriI,GAAK,iCACjCqiI,EAA8B,GAAW,CAAC,GAAQ,EAAG,OAAsBA,GAtE7E,CAwEE,KAEEG,GAEJ,SAAUnlI,GAGR,SAASmlI,EAA8BjuH,EAAMvO,GAC3C,IAAItR,EAAQ2I,EAAOE,KAAKjK,KAAM0S,IAAS1S,KAGvC,OADAoB,EAAMk3F,QAAUr3E,EACT7f,EAiBT,OAvBA,GAAU8tI,EAA+BnlI,GASzCmlI,EAA8BvuI,UAAU+J,IAAM,SAAUC,EAAUC,GAChE,IAAIC,EAAa,GAA4BjK,IAAIgK,GAE5CC,IAID7K,KAAKs4F,QACPztF,EAAWmjI,WAEXnjI,EAAWqjI,aAIRgB,EAxBT,CAyBE,KAEE,GAEJ,SAAUnlI,GAGR,SAASolI,IACP,OAAOplI,EAAOE,KAAKjK,MAAM,EAAM,CAC7BgG,GAAI,mCACJkE,MAAOJ,EAAA,EAAa,2BAA4B,+BAChDK,MAAO,8BACPC,aAAcgiI,GACd/hI,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,GAGTC,OAAQ,QAINzK,KAGR,OApBA,GAAUmvI,EAAyBplI,GAoB5BolI,EArBT,CAsBED,IAEE,GAEJ,SAAUnlI,GAGR,SAASqlI,IACP,OAAOrlI,EAAOE,KAAKjK,MAAM,EAAO,CAC9BgG,GAAI,mCACJkE,MAAOJ,EAAA,EAAa,+BAAgC,mCACpDK,MAAO,kCACPC,aAAcgiI,GACd/hI,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,KAKTC,OAAQ,QAINzK,KAGR,OAtBA,GAAUovI,EAAyBrlI,GAsB5BqlI,EAvBT,CAwBEF,IAEE,GAEJ,SAAUnlI,GAGR,SAASslI,IACP,OAAOtlI,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,sCACJkE,MAAOJ,EAAA,EAAa,8BAA+B,4BACnDK,MAAO,2BACPC,aAAcgiI,GAAqB38D,YACnCplE,OAAQ,CACNC,OAAQ,IAAkBC,gBAC1BC,QAAS,EACTC,OAAQ,QAINzK,KAaR,OA5BA,GAAUqvI,EAA4BtlI,GAkBtCslI,EAA2B1uI,UAAU+J,IAAM,SAAUC,EAAUC,EAAQsK,GACrE,IAAIrK,EAAa,GAA4BjK,IAAIgK,GAE5CC,GAILA,EAAW+1D,kBAAiB,IAGvByuE,EA7BT,CA8BE,KAEF,YAA2B,IAC3B,YAAqB,IACrB,YAAqB,IACrB,YAAqB,IACrB,YAA2B,SAAUt/H,EAAOC,GAC1C,IAAI6sG,EAAqB9sG,EAAMG,SAAS,KAEpC2sG,IACF7sG,EAAUG,QAAQ,mEAAqE0sG,EAAqB,OAC5G7sG,EAAUG,QAAQ,0DAA4D0sG,EAAmB3hC,YAAY,IAAO,QAGtH,IAAIo0D,EAAgBv/H,EAAMG,SAAS47H,IAE/BwD,GACFt/H,EAAUG,QAAQ,qDAAuDm/H,EAAgB,OAG3F,IAAIC,EAAsBx/H,EAAMG,SAAS67H,IAErCwD,GACFv/H,EAAUG,QAAQ,2DAA6Do/H,EAAsB,OAGvG,IAAIC,EAA2Bz/H,EAAMG,SAAS,KAE1Cs/H,GACFx/H,EAAUG,QAAQ,qDAAsE,OAAfJ,EAAMoK,KAAgB,SAAW,SAAW,IAAMq1H,EAA2B,+BAGxJ,IAAIC,EAAsB1/H,EAAMG,SAAS87H,IAErCyD,GACFz/H,EAAUG,QAAQ,gDAAiE,OAAfJ,EAAMoK,KAAgB,SAAW,SAAW,IAAMs1H,EAAsB,+BAG9I,IAAIC,EAA4B3/H,EAAMG,SAAS+7H,IAE3CyD,GACF1/H,EAAUG,QAAQ,sDAAuE,OAAfJ,EAAMoK,KAAgB,SAAW,SAAW,IAAMu1H,EAA4B,iC,kCCvwBxJ,GAAsC,WACxC,IAAI1mI,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GAoCtC,GAEJ,SAAUO,GAGR,SAAS4lI,EAAgBj9H,GACvB,IAAItR,EAAQ2I,EAAOE,KAAKjK,KAAM0S,IAAS1S,KAIvC,OAFAoB,EAAMwuI,iBAAmBl9H,EAAKm9H,gBAC9BzuI,EAAM0uI,oBAAsBp9H,EAAKq9H,mBAC1B3uI,EA8CT,OArDA,GAAUuuI,EAAiB5lI,GAU3B4lI,EAAgBhvI,UAAU2oB,iBAAmB,SAAU3e,EAAUC,EAAQsK,GACvE,IAAI9T,EAAQpB,KAEZ,GAAK4K,EAAOgC,WAAZ,CAIA,IAAIuY,EAASva,EAAOiB,mBAChBs/B,EAAiB,aAAwBhmB,EAAOgmB,gBAChDt+B,EAAQjC,EAAOkC,WAEfuF,EADazH,EAAOoC,gBACAC,IAAI,SAAUm6E,GACpC,IAAI4oD,EAAa,IAAI,IAAS5oD,EAAIjxE,mBAAoBixE,EAAI1sD,gBAEtDu1G,EAAc7uI,EAAM01H,MAAM3rF,EAAgBt+B,EAAOmjI,EAAY5uI,EAAM0uI,qBAEvE,OAAO1uI,EAAM8uI,QAAQ9oD,EAAK6oD,EAAa7uI,EAAMwuI,oBAS/C,GANAhlI,EAAO8nG,cAAckH,UAAU,kBAAmB,EAEhDvnG,EAAOpF,IAAI,SAAU2J,GACrB,OAAO,KAAYu5H,mBAAmBv5H,MAGlB,IAAlBvE,EAAO9F,OAAc,CACvB,IAAI2b,EAAM,IAAI,IAAS7V,EAAO,GAAG8D,mBAAoB9D,EAAO,GAAGqoB,gBAC/D9vB,EAAO4Y,eAAe0E,EAAK,MAM/BynH,EAAgBhvI,UAAUuvI,QAAU,SAAU1O,EAAM4O,EAAIP,GACtD,OAAIA,EAEK,IAAI,IAAUrO,EAAK7vH,yBAA0B6vH,EAAKvmG,qBAAsBm1G,EAAG1iI,WAAY0iI,EAAGziI,QAG1F,IAAI,IAAUyiI,EAAG1iI,WAAY0iI,EAAGziI,OAAQyiI,EAAG1iI,WAAY0iI,EAAGziI,SAI9DgiI,EAtDT,CAuDE,KAIE,GAEJ,SAAU5lI,GAGR,SAASsmI,IACP,OAAkB,OAAXtmI,GAAmBA,EAAOuW,MAAMtgB,KAAM2W,YAAc3W,KAO7D,OAVA,GAAUqwI,EAAiBtmI,GAM3BsmI,EAAgB1vI,UAAUm2H,MAAQ,SAAU3rF,EAAgBt+B,EAAO3B,EAAU6kI,GAC3E,OAAO,KAAeO,aAAanlG,EAAgBt+B,EAAO3B,EAAU6kI,IAG/DM,EAXT,CAYE,IAIE,GAEJ,SAAUtmI,GAGR,SAASwmI,IACP,OAAkB,OAAXxmI,GAAmBA,EAAOuW,MAAMtgB,KAAM2W,YAAc3W,KAO7D,OAVA,GAAUuwI,EAAkBxmI,GAM5BwmI,EAAiB5vI,UAAUm2H,MAAQ,SAAU3rF,EAAgBt+B,EAAO3B,EAAU6kI,GAC5E,OAAO,KAAeS,cAAcrlG,EAAgBt+B,EAAO3B,EAAU6kI,IAGhEQ,EAXT,CAYE,IAIE,GAEJ,SAAUxmI,GAGR,SAAS0mI,IACP,OAAO1mI,EAAOE,KAAKjK,KAAM,CACvB6vI,iBAAiB,EACjBE,mBAAoB,EAGpB/pI,GAAI,sBACJoE,aAAc,KACdC,OAAQ,CACNC,OAAQ,IAAkB8I,eAC1B5I,QAAS,KAKT6I,IAAK,CACH7I,QAAS,KAMXC,OAAQ,QAINzK,KAGR,OA/BA,GAAUywI,EAAqB1mI,GA+BxB0mI,EAhCT,CAiCE,IAIEC,GAEJ,SAAU3mI,GAGR,SAAS2mI,IACP,OAAO3mI,EAAOE,KAAKjK,KAAM,CACvB6vI,iBAAiB,EACjBE,mBAAoB,EAGpB/pI,GAAI,oBACJoE,aAAc,QACVpK,KAGR,OAbA,GAAU0wI,EAAmB3mI,GAatB2mI,EAdT,CAeE,IAIEC,GAEJ,SAAU5mI,GAGR,SAAS4mI,IACP,OAAO5mI,EAAOE,KAAKjK,KAAM,CACvB6vI,iBAAiB,EACjBE,mBAAoB,EAGpB/pI,GAAI,iBACJoE,aAAc,QACVpK,KAGR,OAbA,GAAU2wI,EAAgB5mI,GAanB4mI,EAdT,CAeE,IAIE,GAEJ,SAAU5mI,GAGR,SAAS6mI,IACP,OAAO7mI,EAAOE,KAAKjK,KAAM,CACvB6vI,iBAAiB,EACjBE,mBAAoB,EAGpB/pI,GAAI,4BACJoE,aAAc,KACdC,OAAQ,CACNC,OAAQ,IAAkB8I,eAC1B5I,QAAS,KAOT6I,IAAK,CACH7I,QAAS,MAQXC,OAAQ,QAINzK,KAGR,OAnCA,GAAU4wI,EAA2B7mI,GAmC9B6mI,EApCT,CAqCE,IAIEC,GAEJ,SAAU9mI,GAGR,SAAS8mI,IACP,OAAO9mI,EAAOE,KAAKjK,KAAM,CACvB6vI,iBAAiB,EACjBE,mBAAoB,EAGpB/pI,GAAI,0BACJoE,aAAc,QACVpK,KAGR,OAbA,GAAU6wI,EAAyB9mI,GAa5B8mI,EAdT,CAeE,IAIEC,GAEJ,SAAU/mI,GAGR,SAAS+mI,IACP,OAAO/mI,EAAOE,KAAKjK,KAAM,CACvB6vI,iBAAiB,EACjBE,mBAAoB,EAGpB/pI,GAAI,uBACJoE,aAAc,QACVpK,KAGR,OAbA,GAAU8wI,EAAsB/mI,GAazB+mI,EAdT,CAeE,IAIEC,GAEJ,SAAUhnI,GAGR,SAASgnI,IACP,OAAOhnI,EAAOE,KAAKjK,KAAM,CACvB6vI,iBAAiB,EACjBE,mBAAoB,EAGpB/pI,GAAI,uBACJoE,aAAc,QACVpK,KAGR,OAbA,GAAU+wI,EAAsBhnI,GAazBgnI,EAdT,CAeE,IAIE,GAEJ,SAAUhnI,GAGR,SAASinI,IACP,OAAOjnI,EAAOE,KAAKjK,KAAM,CACvB6vI,iBAAiB,EACjBE,mBAAoB,EAGpB/pI,GAAI,qBACJoE,aAAc,KACdC,OAAQ,CACNC,OAAQ,IAAkB8I,eAC1B5I,QAAS,KAKT6I,IAAK,CACH7I,QAAS,KAMXC,OAAQ,QAINzK,KAGR,OA/BA,GAAUgxI,EAAoBjnI,GA+BvBinI,EAhCT,CAiCE,IAIEC,GAEJ,SAAUlnI,GAGR,SAASknI,IACP,OAAOlnI,EAAOE,KAAKjK,KAAM,CACvB6vI,iBAAiB,EACjBE,mBAAoB,EAGpB/pI,GAAI,kBACJoE,aAAc,QACVpK,KAGR,OAbA,GAAUixI,EAAiBlnI,GAapBknI,EAdT,CAeE,IAIEC,GAEJ,SAAUnnI,GAGR,SAASmnI,IACP,OAAOnnI,EAAOE,KAAKjK,KAAM,CACvB6vI,iBAAiB,EACjBE,mBAAoB,EAGpB/pI,GAAI,6BACJoE,aAAc,QACVpK,KAGR,OAbA,GAAUkxI,EAA4BnnI,GAa/BmnI,EAdT,CAeE,IAIE,GAEJ,SAAUnnI,GAGR,SAASonI,IACP,OAAOpnI,EAAOE,KAAKjK,KAAM,CACvB6vI,iBAAiB,EACjBE,mBAAoB,EAGpB/pI,GAAI,2BACJoE,aAAc,KACdC,OAAQ,CACNC,OAAQ,IAAkB8I,eAC1B5I,QAAS,KAOT6I,IAAK,CACH7I,QAAS,MAQXC,OAAQ,QAINzK,KAGR,OAnCA,GAAUmxI,EAA0BpnI,GAmC7BonI,EApCT,CAqCE,IAIEC,GAEJ,SAAUrnI,GAGR,SAASqnI,IACP,OAAOrnI,EAAOE,KAAKjK,KAAM,CACvB6vI,iBAAiB,EACjBE,mBAAoB,EAGpB/pI,GAAI,wBACJoE,aAAc,QACVpK,KAGR,OAbA,GAAUoxI,EAAuBrnI,GAa1BqnI,EAdT,CAeE,IAIE,GAEJ,SAAUrnI,GAGR,SAASsnI,EAAkB3+H,GACzB,IAAItR,EAAQ2I,EAAOE,KAAKjK,KAAM0S,IAAS1S,KAIvC,OAFAoB,EAAMkwI,sBAAwB5+H,EAAK6+H,qBACnCnwI,EAAM0uI,oBAAsBp9H,EAAKq9H,mBAC1B3uI,EAwBT,OA/BA,GAAUiwI,EAAmBtnI,GAU7BsnI,EAAkB1wI,UAAU2oB,iBAAmB,SAAU3e,EAAUC,EAAQsK,GACzE,IAAI9T,EAAQpB,KAEZ,GAAK4K,EAAOgC,WAAZ,CAIA,IAAIuY,EAASva,EAAOiB,mBAChBs/B,EAAiB,aAAwBhmB,EAAOgmB,gBAChDt+B,EAAQjC,EAAOkC,WAEf6F,EADa/H,EAAOoC,gBACEC,IAAI,SAAUm6E,GACtC,IAAIoqD,EAAcpwI,EAAMqwI,QAAQtmG,EAAgBt+B,EAAOu6E,EAAKhmF,EAAMkwI,sBAAuBlwI,EAAM0uI,qBAE/F,OAAO,IAAI,KAAe0B,EAAa,MAEzC5mI,EAAOkI,eACPlI,EAAOmI,gBAAgB/S,KAAKgG,GAAI2M,GAChC/H,EAAOkI,iBAGFu+H,EAhCT,CAiCE,KAIE,GAEJ,SAAUtnI,GAGR,SAAS2nI,IACP,OAAkB,OAAX3nI,GAAmBA,EAAOuW,MAAMtgB,KAAM2W,YAAc3W,KAa7D,OAhBA,GAAU0xI,EAAuB3nI,GAMjC2nI,EAAsB/wI,UAAU8wI,QAAU,SAAUtmG,EAAgBt+B,EAAOK,EAAWqkI,EAAsBxB,GAC1G,IAAIn5H,EAAI,KAAe+6H,eAAexmG,EAAgBt+B,EAAOK,EAAWqkI,EAAsBxB,GAE9F,OAAIn5H,GAIG,IAAI,KAAM,EAAG,EAAG,EAAG,IAGrB86H,EAjBT,CAkBE,IAIE,GAEJ,SAAU3nI,GAGR,SAAS6nI,IACP,OAAkB,OAAX7nI,GAAmBA,EAAOuW,MAAMtgB,KAAM2W,YAAc3W,KAe7D,OAlBA,GAAU4xI,EAAwB7nI,GAMlC6nI,EAAuBjxI,UAAU8wI,QAAU,SAAUtmG,EAAgBt+B,EAAOK,EAAWqkI,EAAsBxB,GAC3G,IAAIn5H,EAAI,KAAei7H,gBAAgB1mG,EAAgBt+B,EAAOK,EAAWqkI,EAAsBxB,GAE/F,GAAIn5H,EACF,OAAOA,EAGT,IAAI4iB,EAAY3sB,EAAM8G,eAClBglD,EAAY9rD,EAAM0E,iBAAiBioB,GACvC,OAAO,IAAI,KAAMA,EAAWm/B,EAAWn/B,EAAWm/B,IAG7Ci5E,EAnBT,CAoBE,IAIE,GAEJ,SAAU7nI,GAGR,SAAS+nI,IACP,OAAO/nI,EAAOE,KAAKjK,KAAM,CACvBuxI,sBAAsB,EACtBxB,mBAAoB,EAGpB/pI,GAAI,sBACJoE,aAAc,IAAkB6I,YAC5BjT,KAGR,OAbA,GAAU8xI,EAAqB/nI,GAaxB+nI,EAdT,CAeE,IAIE,GAEJ,SAAU/nI,GAGR,SAASgoI,IACP,OAAOhoI,EAAOE,KAAKjK,KAAM,CACvBuxI,sBAAsB,EACtBxB,mBAAoB,EAGpB/pI,GAAI,oBACJoE,aAAc,IAAkB6I,YAC5BjT,KAGR,OAbA,GAAU+xI,EAAmBhoI,GAatBgoI,EAdT,CAeE,IAIE,GAEJ,SAAUhoI,GAGR,SAASioI,IACP,OAAOjoI,EAAOE,KAAKjK,KAAM,CACvBuxI,sBAAsB,EACtBxB,mBAAoB,EAGpB/pI,GAAI,iBACJoE,aAAc,IAAkB6I,SAChC5I,OAAQ,CACNC,OAAQ,IAAkB8I,eAC1B5I,QAAS,KAKT6I,IAAK,CACH7I,QAAS,KAMXC,OAAQ,QAINzK,KAGR,OA/BA,GAAUgyI,EAAgBjoI,GA+BnBioI,EAhCT,CAiCE,IAIE,GAEJ,SAAUjoI,GAGR,SAASkoI,IACP,OAAOloI,EAAOE,KAAKjK,KAAM,CACvBuxI,sBAAsB,EACtBxB,mBAAoB,EAGpB/pI,GAAI,uBACJoE,aAAc,IAAkB6I,YAC5BjT,KAGR,OAbA,GAAUiyI,EAAsBloI,GAazBkoI,EAdT,CAeE,IAIE,GAEJ,SAAUloI,GAGR,SAASmoI,IACP,OAAOnoI,EAAOE,KAAKjK,KAAM,CACvBuxI,sBAAsB,EACtBxB,mBAAoB,EAGpB/pI,GAAI,qBACJoE,aAAc,IAAkB6I,YAC5BjT,KAGR,OAbA,GAAUkyI,EAAoBnoI,GAavBmoI,EAdT,CAeE,IAIE,GAEJ,SAAUnoI,GAGR,SAASooI,IACP,OAAOpoI,EAAOE,KAAKjK,KAAM,CACvBuxI,sBAAsB,EACtBxB,mBAAoB,EAGpB/pI,GAAI,kBACJoE,aAAc,IAAkB6I,SAChC5I,OAAQ,CACNC,OAAQ,IAAkB8I,eAC1B5I,QAAS,KAKT6I,IAAK,CACH7I,QAAS,KAMXC,OAAQ,QAINzK,KAGR,OA/BA,GAAUmyI,EAAiBpoI,GA+BpBooI,EAhCT,CAiCE,IAGF,YAAsB,IAAI,IAC1B,YAAsB,IAAIzB,IAC1B,YAAsB,IAAIC,IAC1B,YAAsB,IAAI,IAC1B,YAAsB,IAAIE,IAC1B,YAAsB,IAAIC,IAC1B,YAAsB,IAAIC,IAC1B,YAAsB,IAAI,IAC1B,YAAsB,IAAIE,IAC1B,YAAsB,IAAIC,IAC1B,YAAsB,IAAI,IAC1B,YAAsB,IAAIE,IAC1B,YAAsB,IAAI,IAC1B,YAAsB,IAAI,IAC1B,YAAsB,IAAI,IAC1B,YAAsB,IAAI,IAC1B,YAAsB,IAAI,IAC1B,YAAsB,IAAI,IC5tB1B,IAAI,GAAsC,WACxC,IAAIpoI,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GAiCtC,GAEJ,SAAUO,GAGR,SAASqoI,IACP,OAAOroI,EAAOE,KAAKjK,KAAM,CACvBuxI,sBAAsB,EACtBxB,mBAAoB,EAGpB/pI,GAAI,qBACJoE,aAAc,IAAkB6I,SAChC5I,OAAQ,CACNC,OAAQ,IAAkB8I,eAC1B5I,QAAS,EACT6I,IAAK,CACH7I,QAAS,KAQXC,OAAQ,QAINzK,KAaR,OAvCA,GAAUoyI,EAAoBroI,GA6B9BqoI,EAAmBzxI,UAAU8wI,QAAU,SAAUtmG,EAAgBt+B,EAAOK,EAAWqkI,EAAsBxB,GACvG,IAAIn5H,EAAI,KAAmBy7H,mBAAmBlnG,EAAgBt+B,EAAOK,EAAWqkI,GAEhF,OAAI36H,GAIG,IAAI,KAAM,EAAG,EAAG,EAAG,IAGrBw7H,EAxCT,CAyCE,IAIE,GAEJ,SAAUroI,GAGR,SAASuoI,IACP,OAAOvoI,EAAOE,KAAKjK,KAAM,CACvBuxI,sBAAsB,EACtBxB,mBAAoB,EAGpB/pI,GAAI,sBACJoE,aAAc,IAAkB6I,SAChC5I,OAAQ,CACNC,OAAQ,IAAkB8I,eAC1B5I,QAAS,EACT6I,IAAK,CACH7I,QAAS,KAQXC,OAAQ,QAINzK,KAeR,OAzCA,GAAUsyI,EAAqBvoI,GA6B/BuoI,EAAoB3xI,UAAU8wI,QAAU,SAAUtmG,EAAgBt+B,EAAOK,EAAWqkI,EAAsBxB,GACxG,IAAIn5H,EAAI,KAAmB27H,oBAAoBpnG,EAAgBt+B,EAAOK,EAAWqkI,GAEjF,GAAI36H,EACF,OAAOA,EAGT,IAAI4iB,EAAY3sB,EAAM8G,eAClBglD,EAAY9rD,EAAM0E,iBAAiBioB,GACvC,OAAO,IAAI,KAAMA,EAAWm/B,EAAWn/B,EAAWm/B,IAG7C25E,EA1CT,CA2CE,IAIE,GAEJ,SAAUvoI,GAGR,SAASyoI,IACP,OAAkB,OAAXzoI,GAAmBA,EAAOuW,MAAMtgB,KAAM2W,YAAc3W,KAO7D,OAVA,GAAUwyI,EAAqBzoI,GAM/ByoI,EAAoB7xI,UAAUm2H,MAAQ,SAAU3rF,EAAgBt+B,EAAO3B,EAAU6kI,GAC/E,OAAO,KAAmB0C,iBAAiBtnG,EAAgBt+B,EAAO3B,IAG7DsnI,EAXT,CAYE,IAIE,GAEJ,SAAUzoI,GAGR,SAAS2oI,IACP,OAAO3oI,EAAOE,KAAKjK,KAAM,CACvB6vI,iBAAiB,EACjBE,mBAAoB,EAGpB/pI,GAAI,qBACJoE,aAAc,KACdC,OAAQ,CACNC,OAAQ,IAAkB8I,eAC1B5I,QAAS,EACT6I,IAAK,CACH7I,QAAS,KAQXC,OAAQ,QAINzK,KAGR,OA7BA,GAAU0yI,EAAoB3oI,GA6BvB2oI,EA9BT,CA+BE,IAIF,KAAiB1lD,qBAAqB,0BAA2B,sBAEjE,IAAI,GAEJ,SAAUjjF,GAGR,SAAS4oI,IACP,OAAO5oI,EAAOE,KAAKjK,KAAM,CACvB6vI,iBAAiB,EACjBE,mBAAoB,EAGpB/pI,GAAI,2BACJoE,aAAc,KACdC,OAAQ,CACNC,OAAQ,IAAkB8I,eAC1B5I,QAAS,EACT6I,IAAK,CACH7I,QAAS,MAUXC,OAAQ,QAINzK,KAGR,OA/BA,GAAU2yI,EAA0B5oI,GA+B7B4oI,EAhCT,CAiCE,IAIF,KAAiB3lD,qBAAqB,gCAAiC,4BAEvE,IAAI,GAEJ,SAAUjjF,GAGR,SAAS6oI,IACP,OAAkB,OAAX7oI,GAAmBA,EAAOuW,MAAMtgB,KAAM2W,YAAc3W,KAO7D,OAVA,GAAU4yI,EAAsB7oI,GAMhC6oI,EAAqBjyI,UAAUm2H,MAAQ,SAAU3rF,EAAgBt+B,EAAO3B,EAAU6kI,GAChF,OAAO,KAAmB8C,kBAAkB1nG,EAAgBt+B,EAAO3B,IAG9D0nI,EAXT,CAYE,IAIE,GAEJ,SAAU7oI,GAGR,SAAS+oI,IACP,OAAO/oI,EAAOE,KAAKjK,KAAM,CACvB6vI,iBAAiB,EACjBE,mBAAoB,EAGpB/pI,GAAI,sBACJoE,aAAc,KACdC,OAAQ,CACNC,OAAQ,IAAkB8I,eAC1B5I,QAAS,EACT6I,IAAK,CACH7I,QAAS,KAQXC,OAAQ,QAINzK,KAGR,OA7BA,GAAU8yI,EAAqB/oI,GA6BxB+oI,EA9BT,CA+BE,IAIE,GAEJ,SAAU/oI,GAGR,SAASgpI,IACP,OAAOhpI,EAAOE,KAAKjK,KAAM,CACvB6vI,iBAAiB,EACjBE,mBAAoB,EAGpB/pI,GAAI,4BACJoE,aAAc,KACdC,OAAQ,CACNC,OAAQ,IAAkB8I,eAC1B5I,QAAS,EACT6I,IAAK,CACH7I,QAAS,MAUXC,OAAQ,QAINzK,KAGR,OA/BA,GAAU+yI,EAA2BhpI,GA+B9BgpI,EAhCT,CAiCE,IAGF,YAAsB,IAAI,IAC1B,YAAsB,IAAI,IAC1B,YAAsB,IAAI,IAC1B,YAAsB,IAAI,IAC1B,YAAsB,IAAI,IAC1B,YAAsB,IAAI,I,iCCrUtB,GAAsC,WACxC,IAAI/pI,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA0BtC,GAAwC,SAAUgN,EAAY1T,EAAQ2N,EAAKgG,GAC7E,IAEIxN,EAFAyN,EAAIC,UAAUpK,OACdqK,EAAIF,EAAI,EAAI5T,EAAkB,OAAT2T,EAAgBA,EAAOrW,OAAOyW,yBAAyB/T,EAAQ2N,GAAOgG,EAE/F,GAAuB,kBAAZK,SAAoD,oBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASP,EAAY1T,EAAQ2N,EAAKgG,QAAW,IAAK,IAAIjI,EAAIgI,EAAWjK,OAAS,EAAGiC,GAAK,EAAGA,KAC1KvF,EAAIuN,EAAWhI,MAAIoI,GAAKF,EAAI,EAAIzN,EAAE2N,GAAKF,EAAI,EAAIzN,EAAEnG,EAAQ2N,EAAKmG,GAAK3N,EAAEnG,EAAQ2N,KAASmG,GAE5F,OAAOF,EAAI,GAAKE,GAAKxW,OAAOM,eAAeoC,EAAQ2N,EAAKmG,GAAIA,GAG1D,GAAkC,SAAUK,EAAYC,GAC1D,OAAO,SAAUpU,EAAQ2N,GACvByG,EAAUpU,EAAQ2N,EAAKwG,KAyBvB+7H,GAAuC,IAAI,KAAc,kCAAkC,GAE3F,GAEJ,SAAUjpI,GAGR,SAASkpI,EAA4BroI,EAAQu/D,GAC3C,IAAI/oE,EAAQ2I,EAAOE,KAAKjK,OAASA,KAIjC,OAFAoB,EAAMiK,QAAUT,EAChBxJ,EAAMozD,QAAUpzD,EAAMsK,UAAUy+D,EAAqBkQ,eAAe,GAAyBj5E,EAAMiK,UAC5FjK,EAqBT,OA5BA,GAAU6xI,EAA6BlpI,GAUvCkpI,EAA4BryI,IAAM,SAAUgK,GAC1C,OAAOA,EAAO6B,gBAAgBwmI,EAA4BvmI,KAG5DumI,EAA4BtyI,UAAUgM,MAAQ,WAC5C,OAAOsmI,EAA4BvmI,IAGrCumI,EAA4BtyI,UAAUgiB,KAAO,WAC3C3iB,KAAKw0D,QAAQ7xC,QAGfswH,EAA4BtyI,UAAUgkB,KAAO,WAC3C3kB,KAAKw0D,QAAQ7vC,QAGfsuH,EAA4BvmI,GAAK,6CACjCumI,EAA8B,GAAW,CAAC,GAAQ,EAAG,OAAyBA,GA5BhF,CA8BE,KA0BF,IAAI,GAEJ,SAAUlpI,GAGR,SAASmpI,EAAwBtoI,EAAQ0xB,EAAoB9V,EAAoBs6E,GAC/E,IAAI1/F,EAAQ2I,EAAOE,KAAKjK,OAASA,KAoFjC,OAlFAoB,EAAMk7B,mBAAqBA,EAC3Bl7B,EAAMolB,mBAAqBA,EAC3BplB,EAAM0/F,eAAiBA,EACvB1/F,EAAMiK,QAAUT,EAChBxJ,EAAM+xI,cAAgBH,GAAqCx7H,OAAOpW,EAAMk7B,oBACxEl7B,EAAM6X,SAAW,aAAkBxE,SAASyE,cAAc,QAE1D9X,EAAM6X,SAASm6H,aAAa,2BAE5BhyI,EAAM6X,SAASo6H,WAAW,QAE1BjyI,EAAM6X,SAASk1B,aAAa,OAAQ,UAEpC/sC,EAAM6X,SAASk1B,aAAa,cAAe,QAE3C/sC,EAAMkyI,gBAAkB,aAAkB7+H,SAASyE,cAAc,QAEjE9X,EAAMkyI,gBAAgBnlG,aAAa,OAAQ,YAE3C/sC,EAAM6X,SAASK,YAAYlY,EAAMkyI,iBAEjClyI,EAAMwuC,YAAa,EAEnBxuC,EAAMsK,UAAUtK,EAAMiK,QAAQ2lB,kBAAkB,WAC1C5vB,EAAMwuC,YACRxuC,EAAMmyI,aAKVnyI,EAAMsK,UAAU0Y,GAAA,EAAkChjB,EAAMkyI,gBAAgBtoH,QAAS,UAAW,SAAU9e,GACpG,GAAK9K,EAAMwuC,aAIP1jC,EAAEuD,OAAO,QAKX,aAAM,KAAqB+jI,iBAE3BpyI,EAAMiK,QAAQwyB,cAAc,CAC1BitB,qBAAsB,OAGxB1mC,GAAA,EAAchjB,EAAMkyI,gBAAgBtoH,SAEpC5pB,EAAMqyI,gBAENryI,EAAMkyI,gBAAgBtoH,QAAQxV,QAE9BtJ,EAAE8wB,iBACF9wB,EAAE+wB,mBAGA/wB,EAAEuD,OAAO,OAIV,CACD,aAAM,KAAqBikI,aAE3B,IAAIx7F,EAAM92C,EAAMiK,QAAQk/D,sBAAsBopE,qBAE3B,qBAARz7F,IACTA,EAAM,kDAGR92C,EAAM0/F,eAAevP,KAAK,KAAI30C,MAAM1E,IAEpChsC,EAAE8wB,iBACF9wB,EAAE+wB,sBAIN77B,EAAMmhD,OAAOnhD,EAAMkyI,gBAAgBtoH,QAAS,WAC1C5pB,EAAMujB,SAGRvjB,EAAMiK,QAAQglC,iBAAiBjvC,GAExBA,EAyKT,OAhQA,GAAU8xI,EAAyBnpI,GA0FnCmpI,EAAwBvyI,UAAUc,QAAU,WAC1CzB,KAAKqL,QAAQ0lC,oBAAoB/wC,MAEjC+J,EAAOpJ,UAAUc,QAAQwI,KAAKjK,OAGhCkzI,EAAwBvyI,UAAUgM,MAAQ,WACxC,OAAOumI,EAAwBxmI,IAGjCwmI,EAAwBvyI,UAAUiZ,WAAa,WAC7C,OAAO5Z,KAAKiZ,SAAS+R,SAGvBkoH,EAAwBvyI,UAAUmT,YAAc,WAC9C,MAAO,CACLkG,WAAY,OAIhBk5H,EAAwBvyI,UAAUgiB,KAAO,WACnC3iB,KAAK4vC,aAIT5vC,KAAK4vC,YAAa,EAElB5vC,KAAKmzI,cAAcn7H,KAAI,GAEvBhY,KAAKuzI,UAELvzI,KAAKiZ,SAASo6H,WAAW,SAEzBrzI,KAAKiZ,SAASk1B,aAAa,cAAe,SAE1CnuC,KAAKszI,gBAAgBtoH,QAAQkjB,SAAW,EAExCluC,KAAKyzI,gBAELzzI,KAAKszI,gBAAgBtoH,QAAQxV,UAG/B09H,EAAwBvyI,UAAUizI,uBAAyB,SAAU7rC,EAAW1b,EAAKwnD,GACnF,IAAIvsH,EAAKtnB,KAAKwmB,mBAAmBe,iBAAiBwgF,GAElD,OAAIzgF,EACK2S,GAAA,EAAeoyD,EAAK/kE,EAAGyzD,gBAGzB9gD,GAAA,EAAe45G,EAAS9rC,IAGjCmrC,EAAwBvyI,UAAU8yI,cAAgB,WAChD,IAAI/gI,EAAO1S,KAAKqL,QAAQQ,mBAEpBiD,EAAa9O,KAAKqL,QAAQ2B,gBAE1B8mI,EAAqB,EAEzB,GAAIhlI,EAAY,CACd,IAAIyQ,EAAUvf,KAAKqL,QAAQyB,WAEvByS,GACFzQ,EAAWhB,QAAQ,SAAUZ,GAC3B4mI,GAAsBv0H,EAAQ0yC,sBAAsB/kD,KAK1D,IAAI0L,EA1LR,SAA2B9J,EAAYglI,GACrC,OAAKhlI,GAAoC,IAAtBA,EAAWvC,OAIJ,IAAtBuC,EAAWvC,OACTunI,EACK75G,GAAA,EAAe,KAAqB85G,qBAAsBjlI,EAAW,GAAGqH,mBAAoBrH,EAAW,GAAG4rB,eAAgBo5G,GAG5H75G,GAAA,EAAe,KAAqB+5G,gBAAiBllI,EAAW,GAAGqH,mBAAoBrH,EAAW,GAAG4rB,gBAG1Go5G,EACK75G,GAAA,EAAe,KAAqBg6G,oBAAqBnlI,EAAWvC,OAAQunI,GAGjFhlI,EAAWvC,OAAS,EACf0tB,GAAA,EAAe,KAAqBi6G,eAAgBplI,EAAWvC,QAGjE,GAnBE,KAAqB4nI,YAwLjBC,CAAkBtlI,EAAYglI,GAErCphI,EAAK2hI,aAAaC,aAChB5hI,EAAK0N,SACPxH,GAAQ,KAAqB27H,mBAE7B37H,GAAQ,KAAqB47H,mBAG3B9hI,EAAK0N,SACPxH,GAAQ,KAAqB67H,eAE7B77H,GAAQ,KAAqB87H,eAIjC,IAAIC,EAAgBngI,GAAA,EAAuB,KAAqBogI,oBAAsB,KAAqBC,yBAE3G,OAAQniI,EAAKo4C,sBACX,KAAK,EAGHlyC,GAAQ,UAAY+7H,EACpB,MAEF,KAAK,EAGH/7H,GAAQ,UAAY,KAAqBk8H,QACzC,MAEF,KAAK,EAGHl8H,GAAQ,UAAY,KAAqBm8H,SACzCn8H,GAAQ,IAAM+7H,EAIdjiI,EAAKsiI,aACPp8H,GAAQ,UAAY5Y,KAAK4zI,uBAAuB,GAAyBlnI,GAAI,KAAqBuoI,kBAAmB,KAAqBC,uBAE1It8H,GAAQ,UAAY5Y,KAAK4zI,uBAAuB,GAAyBlnI,GAAI,KAAqByoI,mBAAoB,KAAqBC,wBAI7Ix8H,GAAQ,WADapE,GAAA,EAAuB,KAAqB6gI,WAAa,KAAqBC,iBAEnG18H,GAAQ,OAAS,KAAqB28H,SAEtCv1I,KAAKszI,gBAAgBtoH,QAAQ1R,YAAY+kC,GAAoBzlC,IAG7D5Y,KAAKszI,gBAAgBtoH,QAAQmjB,aAAa,aAAcv1B,IAG1Ds6H,EAAwBvyI,UAAUgkB,KAAO,WAClC3kB,KAAK4vC,aAIV5vC,KAAK4vC,YAAa,EAElB5vC,KAAKmzI,cAAcv7H,QAEnB5X,KAAKiZ,SAASo6H,WAAW,QAEzBrzI,KAAKiZ,SAASk1B,aAAa,cAAe,QAE1CnuC,KAAKszI,gBAAgBtoH,QAAQkjB,UAAY,EACzC9pB,GAAA,EAAcpkB,KAAKszI,gBAAgBtoH,SAEnChrB,KAAKqL,QAAQmK,UAGf09H,EAAwBvyI,UAAU4yI,QAAU,WAC1C,IAAIpzC,EAAengG,KAAKqL,QAAQ04B,gBAE5ByxG,EAAIn0I,KAAKw5B,IAAI,EAAGx5B,KAAK8sE,IAAI+kE,EAAwBuC,MAAOt1C,EAAa/pE,MAAQ,KAC7E2kE,EAAI15F,KAAKw5B,IAAI,EAAGx5B,KAAK8sE,IAAI+kE,EAAwBwC,OAAQv1C,EAAar8E,OAAS,KAEnF9jB,KAAKiZ,SAAS08H,SAASH,GAEvBx1I,KAAKiZ,SAAS28H,UAAU76C,GAExB,IAAIl3E,EAAMxiB,KAAKyqB,OAAOq0E,EAAar8E,OAASi3E,GAAK,GAEjD/6F,KAAKiZ,SAAS48H,OAAOhyH,GAErB,IAAIrS,EAAOnQ,KAAKyqB,OAAOq0E,EAAa/pE,MAAQo/G,GAAK,GAEjDx1I,KAAKiZ,SAAS68H,QAAQtkI,IAGxB0hI,EAAwBxmI,GAAK,yCAC7BwmI,EAAwBuC,MAAQ,IAChCvC,EAAwBwC,OAAS,IACjCxC,EAA0B,GAAW,CAAC,GAAQ,EAAG,MAAqB,GAAQ,EAAG,MAAqB,GAAQ,EAAG,OAAkBA,GAhQrI,CAkQE,MAEE,GAEJ,SAAUnpI,GAGR,SAASgsI,IACP,OAAOhsI,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,sCACJkE,MAAO,KAAqB8rI,4BAC5B7rI,MAAO,0BACPC,aAAc,KACdC,OAAQ,CACNC,OAAQ,IAAkBkL,MAC1BhL,QAASqK,GAAA,EAAe,KAItB,IAKFpK,OAAQ,QAINzK,KAWR,OAlCA,GAAU+1I,EAA6BhsI,GA0BvCgsI,EAA4Bp1I,UAAU+J,IAAM,SAAUC,EAAUC,GAC9D,IAAIC,EAAa,GAA4BjK,IAAIgK,GAE7CC,GACFA,EAAW8X,QAIRozH,EAnCT,CAoCE,KAEF,YAA2B,IAC3B,YAAqB,IACrB,IAAIE,GAA2B,IAAcz9H,mBAAmB,GAA4B5X,KAC5F,YAAsB,IAAIq1I,GAAyB,CACjDjwI,GAAI,yBACJoE,aAAc4oI,GACdv6H,QAAS,SAAiB2K,GACxB,OAAOA,EAAEuB,QAEXta,OAAQ,CACNI,OAAQ,IAGRH,OAAQ,IAAkBkL,MAC1BhL,QAAS,EAGTmL,UAAW,CAAC,UAOhB,YAA2B,SAAU5F,EAAOC,GAC1C,IAAIohC,EAAmBrhC,EAAMG,SAAS,KAElCkhC,GACFphC,EAAUG,QAAQ,+DAAiEihC,EAAmB,OAGxG,IAAIC,EAAoBthC,EAAMG,SAAS,MAEnCmhC,GACFrhC,EAAUG,QAAQ,mEAAqEkhC,EAAoB,OAG7G,IAAIC,EAAWvhC,EAAMG,SAAS,KAE1BohC,GACFthC,EAAUG,QAAQ,+DAAiEmhC,EAAW,S,WC3c9F,GAEJ,WACE,SAAS4kG,EAAiBtrI,GACxB,IAAIxJ,EAAQpB,KAEZA,KAAK4K,OAASA,EACd5K,KAAKywB,UAAY,GAEb5b,GAAA,IACF7U,KAAKywB,UAAUriB,KAAKxD,EAAO0B,yBAAyB,WAClD,OAAOlL,EAAMwtB,YAEf5uB,KAAK4uB,UA6BT,OAzBAsnH,EAAiBv1I,UAAUiuB,OAAS,WAClC,IAAIunH,GAAoBn2I,KAAK4K,OAAOiB,mBAAmBuU,UAElDpgB,KAAKmoD,QAAUguF,EAClBn2I,KAAKmoD,OAAS,IAAI,GAAmBnoD,KAAK4K,QACjC5K,KAAKmoD,SAAWguF,IACzBn2I,KAAKmoD,OAAO1mD,UACZzB,KAAKmoD,OAAS,OAIlB+tF,EAAiBv1I,UAAUgM,MAAQ,WACjC,OAAOupI,EAAiBxpI,IAG1BwpI,EAAiBv1I,UAAUc,QAAU,WACnCzB,KAAKywB,UAAY,YAAQzwB,KAAKywB,WAE1BzwB,KAAKmoD,SACPnoD,KAAKmoD,OAAO1mD,UACZzB,KAAKmoD,OAAS,OAIlB+tF,EAAiBxpI,GAAK,kCACfwpI,EAxCT,GA6CI,GAEJ,WACE,SAASE,EAAmBxrI,GAC1B,IAAIxJ,EAAQpB,KAEZA,KAAK4K,OAASA,EACd5K,KAAKiZ,SAAWxE,SAASyE,cAAc,YACvClZ,KAAKiZ,SAAStJ,UAAY,mBAC1B3P,KAAKw8B,WAAa,GAElBx8B,KAAKw8B,WAAWpuB,KAAKgW,GAAA,EAA0BpkB,KAAKiZ,SAAU,aAAc,SAAU/M,GACpF9K,EAAMwJ,OAAO4K,WAGfxV,KAAKw8B,WAAWpuB,KAAKgW,GAAA,EAA0BpkB,KAAKiZ,SAAU,QAAS,SAAU/M,GAC/E9K,EAAMwJ,OAAO4K,WAGfxV,KAAK4K,OAAOylC,iBAAiBrwC,MA0B/B,OAvBAo2I,EAAmBz1I,UAAUc,QAAU,WACrCzB,KAAK4K,OAAOmmC,oBAAoB/wC,MAChCA,KAAKw8B,WAAa,YAAQx8B,KAAKw8B,aAIjC45G,EAAmBz1I,UAAUgM,MAAQ,WACnC,OAAOypI,EAAmB1pI,IAG5B0pI,EAAmBz1I,UAAUiZ,WAAa,WACxC,OAAO5Z,KAAKiZ,UAGdm9H,EAAmBz1I,UAAUmT,YAAc,WACzC,MAAO,CACLkG,WAAY,IAMhBo8H,EAAmB1pI,GAAK,oCACjB0pI,EA3CT,GA8CA,YAA2B,I,+BCrGvB,GAAsC,WACxC,IAAIptI,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA0BtC,GAAwC,SAAUgN,EAAY1T,EAAQ2N,EAAKgG,GAC7E,IAEIxN,EAFAyN,EAAIC,UAAUpK,OACdqK,EAAIF,EAAI,EAAI5T,EAAkB,OAAT2T,EAAgBA,EAAOrW,OAAOyW,yBAAyB/T,EAAQ2N,GAAOgG,EAE/F,GAAuB,kBAAZK,SAAoD,oBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASP,EAAY1T,EAAQ2N,EAAKgG,QAAW,IAAK,IAAIjI,EAAIgI,EAAWjK,OAAS,EAAGiC,GAAK,EAAGA,KAC1KvF,EAAIuN,EAAWhI,MAAIoI,GAAKF,EAAI,EAAIzN,EAAE2N,GAAKF,EAAI,EAAIzN,EAAEnG,EAAQ2N,EAAKmG,GAAK3N,EAAEnG,EAAQ2N,KAASmG,GAE5F,OAAOF,EAAI,GAAKE,GAAKxW,OAAOM,eAAeoC,EAAQ2N,EAAKmG,GAAIA,GAG1D,GAAkC,SAAUK,EAAYC,GAC1D,OAAO,SAAUpU,EAAQ2N,GACvByG,EAAUpU,EAAQ2N,EAAKwG,KAiBvB,GAEJ,SAAUlN,GAGR,SAASssI,EAAwBzrI,EAAQ0rI,EAAwB3mD,GAC/D,IAAIvuF,EAAQ2I,EAAOE,KAAKjK,OAASA,KAkBjC,OAhBAoB,EAAMiK,QAAUT,EAChBxJ,EAAMy/F,aAAelR,EACrBvuF,EAAMozD,QAAU,KAEhBpzD,EAAMsK,UAAUtK,EAAMiK,QAAQe,iBAAiB,SAAUF,GACvD,OAAO9K,EAAM8zB,UAGf9zB,EAAMsK,UAAUtK,EAAMiK,QAAQ2U,yBAAyB,SAAU9T,GAC/D,OAAO9K,EAAM8zB,UAGf9zB,EAAMsK,UAAU,KAAqB6R,YAAY,SAAUrR,GACzD,OAAO9K,EAAM8zB,UAGR9zB,EAuCT,OA5DA,GAAUi1I,EAAyBtsI,GAwBnCssI,EAAwBz1I,IAAM,SAAUgK,GACtC,OAAOA,EAAO6B,gBAAgB4pI,EAAwB3pI,KAGxD2pI,EAAwB11I,UAAUgM,MAAQ,WACxC,OAAO0pI,EAAwB3pI,IAGjC2pI,EAAwB11I,UAAUc,QAAU,WAC1CzB,KAAKk1B,OAELnrB,EAAOpJ,UAAUc,QAAQwI,KAAKjK,OAGhCq2I,EAAwB11I,UAAU41I,OAAS,WACrCv2I,KAAKw0D,SAIJx0D,KAAKqL,QAAQuB,aAIlB5M,KAAKw0D,QAAU,IAAI,GAAoBx0D,KAAKqL,QAASrL,KAAK6gG,gBAG5Dw1C,EAAwB11I,UAAUu0B,KAAO,WACnCl1B,KAAKw0D,UACPx0D,KAAKw0D,QAAQ/yD,UAEbzB,KAAKw0D,QAAU,OAInB6hF,EAAwB3pI,GAAK,+BAC7B2pI,EAA0B,GAAW,CAAC,GAAQ,EAAG,MAA0B,GAAQ,EAAG,OAAgBA,GA5DxG,CA8DE,KAEE,GAEJ,SAAUtsI,GAGR,SAASysI,IACP,OAAOzsI,EAAOE,KAAKjK,KAAM,CACvBgG,GAAI,8BACJkE,MAAO,KAAiBusI,oBACxBtsI,MAAO,4BACPC,aAAc,QACVpK,KAWR,OAnBA,GAAUw2I,EAAezsI,GAWzBysI,EAAc71I,UAAU+J,IAAM,SAAUC,EAAUC,GAChD,IAAIC,EAAa,GAAwBjK,IAAIgK,GAEzCC,GACFA,EAAW0rI,UAIRC,EApBT,CAqBE,KAmEF,IAAI,GAEJ,SAAUzsI,GAGR,SAAS2sI,EAAoB9rI,EAAQ+kF,GACnC,IAAIvuF,EAAQ2I,EAAOE,KAAKjK,OAASA,KAmBjC,OAhBAoB,EAAMyX,qBAAsB,EAC5BzX,EAAMiK,QAAUT,EAChBxJ,EAAMy/F,aAAelR,EACrBvuF,EAAMslB,OAAStlB,EAAMiK,QAAQyB,WAC7B1L,EAAM6X,SAAWxE,SAASyE,cAAc,OACxC9X,EAAM6X,SAAStJ,UAAY,wBAC3BvO,EAAMu1I,qBAnCV,SAAoCC,GAClC,IAAIC,EAAsB,KAAqBj2I,IAAIg2I,EAAmBruI,UAEtE,OAAIsuI,GAIG,CACLC,gBAAiB,WACf,OAAO,MAETC,SAAU,SAAkB13H,EAAMoF,EAAOuyH,GACvC,OAAO,aAAaJ,EAAmBruI,SAAU8W,EAAMoF,EAAOuyH,IAEhEC,UAAW,SAAmB53H,EAAMoF,EAAOuyH,GACzC,OAAO,aAAcJ,EAAmB5wI,GAAIqZ,EAAMoF,EAAOuyH,KAoB9BE,CAA2B91I,EAAMslB,OAAOoO,yBAErE1zB,EAAMurI,SAASvrI,EAAMiK,QAAQyI,eAE7B1S,EAAMsK,UAAUtK,EAAMiK,QAAQY,0BAA0B,SAAUC,GAChE,OAAO9K,EAAMurI,SAASvrI,EAAMiK,QAAQyI,kBAGtC1S,EAAMiK,QAAQmO,iBAAiBpY,GAExBA,EAwLT,OA9MA,GAAUs1I,EAAqB3sI,GAyB/B2sI,EAAoB/1I,UAAUc,QAAU,WACtCzB,KAAKqL,QAAQ0O,oBAAoB/Z,MAEjC+J,EAAOpJ,UAAUc,QAAQwI,KAAKjK,OAGhC02I,EAAoB/1I,UAAUgM,MAAQ,WACpC,OAAO+pI,EAAoBS,KAG7BT,EAAoB/1I,UAAUgsI,SAAW,SAAUzhI,GAKjD,IAJA,IAAImgB,EAAOrrB,KAAKo3I,iBAAiBlsI,EAASwC,YAEtC2pI,EAAc,EAET7oI,EAAI6c,EAAKisH,QAAQ/qI,OAAS,EAAGiC,GAAK,EAAGA,IAAK,CACjD,IAAIgT,EAAI6J,EAAKisH,QAAQ9oI,GAErB,GAAItD,EAASyC,OAAS,GAAK6T,EAAEwV,OAAQ,CACnCqgH,EAAc7oI,EACd,OAIJ,IAAI+oI,EAAc,EAElB,IAAS/oI,EAAI6c,EAAKmsH,QAAQjrI,SAAW,EAAGiC,GAAK,EAAGA,IAC9C,GAAItD,EAASyC,OAAS,GAAK0d,EAAKmsH,QAAQhpI,GAAK,GAAI,CAC/C+oI,EAAc/oI,EACd,MAIJ,IAAI6D,EAAS,GAETT,EAAc5R,KAAK0mB,OAAO7U,eAAe3G,EAASwC,YAElD++G,EAAY,GAEhB,GAAI4qB,EAAchsH,EAAKisH,QAAQ/qI,OAAQ,CACrC,IAAIkrI,EAAkBpsH,EAAKisH,QAAQD,GAAargH,OAC5C0gH,EAAgBL,EAAc,EAAIhsH,EAAKisH,QAAQ/qI,OAAS8e,EAAKisH,QAAQD,EAAc,GAAGrgH,OAASplB,EAAYrF,OAC/GkgH,EAAY76G,EAAYpQ,UAAUi2I,EAAiBC,GAGrDrlI,GAAU,wBA1Id,SAAyBo6G,GAGvB,IAFA,IAAIp6G,EAAS,GAEJslI,EAAY,EAAGlpI,EAAMg+G,EAAUlgH,OAAQorI,EAAYlpI,EAAKkpI,IAAa,CAC5E,IAAIC,EAAWnrB,EAAUh5G,WAAWkkI,GAEpC,OAAQC,GACN,KAAK,EAGHvlI,GAAU,SACV,MAEF,KAAK,GAGHA,GAAU,WACV,MAEF,KAAK,GAGHA,GAAU,OACV,MAEF,KAAK,GAGHA,GAAU,OACV,MAEF,KAAK,GAGHA,GAAU,QACV,MAEF,QACEA,GAAUga,OAAOqtB,aAAak+F,IAIpC,OAAOvlI,EAgGiCwlI,CAAgBprB,GAAa,kCAAsCA,EAAUlgH,OAAS,KAA4B,IAArBkgH,EAAUlgH,OAAe,OAAS,SAAW,gBAChL8F,GAAU,4DAEV,IAAIylI,EAAW93I,KAAK+3I,gBAAgB1sH,EAAKmsH,QAA6B,GAApBD,GAAe,KAEjEllI,GAAU,2CACVA,GAAU,8EAAoF,aAAOylI,EAASlB,mBAAmBruI,UAAY,QAC7I8J,GAAU,gFAAsFrS,KAAKg4I,mBAAmBF,EAASxZ,WAAa,QAC9IjsH,GAAU,gFAAsFrS,KAAKi4I,mBAAmBH,EAASI,WAAa,QAC9I7lI,GAAU,gFAAsF,KAAM6nF,OAAOC,IAAIg+C,UAAUL,EAASz9H,YAAc,QAClJhI,GAAU,gFAAsF,KAAM6nF,OAAOC,IAAIg+C,UAAUL,EAAS19H,YAAc,QAClJ/H,GAAU,mBACVA,GAAU,yCAENglI,EAAchsH,EAAKisH,QAAQ/qI,SAC7B8F,GAAU,+BAAmC,aAAOgZ,EAAKisH,QAAQD,GAAal9H,MAAQ,WAGxFna,KAAKiZ,SAASyS,UAAYrZ,EAE1BrS,KAAKqL,QAAQya,oBAAoB9lB,OAGnC02I,EAAoB/1I,UAAUo3I,gBAAkB,SAAUD,GACxD,IAAIM,EAAW,KAAqBC,cAChCv0I,EAAa,KAAcw0I,cAAcR,GACzCxZ,EAAY,KAAcia,aAAaT,GACvCI,EAAY,KAAcM,aAAaV,GACvCz9H,EAAa,KAAco+H,cAAcX,GACzC19H,EAAa,KAAcs+H,cAAcZ,GAC7C,MAAO,CACLlB,mBAAoB52I,KAAK6gG,aAAa/rE,sBAAsBhxB,GAC5Dw6H,UAAWA,EACX4Z,UAAWA,EACX79H,WAAY+9H,EAAS/9H,GACrBD,WAAYg+H,EAASh+H,KAIzBs8H,EAAoB/1I,UAAUq3I,mBAAqB,SAAU1Z,GAC3D,OAAQA,GACN,KAAK,EAGH,MAAO,QAET,KAAK,EAGH,MAAO,UAET,KAAK,EAGH,MAAO,SAET,KAAK,EAGH,MAAO,QAGX,MAAO,MAGToY,EAAoB/1I,UAAUs3I,mBAAqB,SAAUC,GAC3D,IAAIthI,EAAI,GAwBR,OAtBgB,EAAZshI,IAGAthI,GAAK,WAGO,EAAZshI,IAGAthI,GAAK,SAGO,EAAZshI,IAGAthI,GAAK,cAGQ,IAAbA,EAAErK,SACJqK,EAAI,OAGCA,GAGT8/H,EAAoB/1I,UAAUy2I,iBAAmB,SAAU1pI,GACzD,IAAIirI,EAAkB34I,KAAK44I,oBAAoBlrI,GAE3CmrI,EAAsB74I,KAAK22I,qBAAqBI,SAAS/2I,KAAK0mB,OAAO7U,eAAenE,GAAairI,EAAiB,GAElHG,EAAsB94I,KAAK22I,qBAAqBM,UAAUj3I,KAAK0mB,OAAO7U,eAAenE,GAAairI,EAAiB,GAEvH,MAAO,CACLI,WAAYJ,EACZrB,QAASuB,EAAoB3jG,OAC7BsiG,QAASsB,EAAoB5jG,OAC7B8jG,SAAUH,EAAoBG,WAIlCtC,EAAoB/1I,UAAUi4I,oBAAsB,SAAUlrI,GAG5D,IAFA,IAAI+W,EAAQzkB,KAAK22I,qBAAqBG,kBAE7BtoI,EAAI,EAAGA,EAAId,EAAYc,IAAK,CAGnCiW,EAFyBzkB,KAAK22I,qBAAqBI,SAAS/2I,KAAK0mB,OAAO7U,eAAerD,GAAIiW,EAAO,GAEvEu0H,SAG7B,OAAOv0H,GAGTiyH,EAAoB/1I,UAAUiZ,WAAa,WACzC,OAAO5Z,KAAKiZ,UAGdy9H,EAAoB/1I,UAAUmT,YAAc,WAC1C,MAAO,CACL5I,SAAUlL,KAAKqL,QAAQyI,cACvBkG,WAAY,CAAC,EAEX,KAMN08H,EAAoBS,IAAM,qCACnBT,EA/MT,CAgNE,KAEF,YAA2B,IAC3B,YAAqB,IACrB,YAA2B,SAAU3mI,EAAOC,GAC1C,IAAIiK,EAASlK,EAAMG,SAAS,KAE5B,GAAI+J,EAAQ,CACV,IAAIC,EAAcnK,EAAMoK,OAAS,IAAgB,EAAI,EACrDnK,EAAUG,QAAQ,mDAAqD+J,EAAc,YAAcD,EAAS,OAC5GjK,EAAUG,QAAQ,uFAAyF8J,EAAS,OAGtH,IAAIG,EAAarK,EAAMG,SAAS,KAE5BkK,GACFpK,EAAUG,QAAQ,6DAA+DiK,EAAa,S,4BChb9F,GAAIgK,GAAA,EAEJ,GAEJ,WACE,SAAS60H,EAAgB13F,EAAW23F,EAAI/2I,GACtCnC,KAAKk5I,GAAKA,EACVl5I,KAAKmC,QAAUA,EACfnC,KAAKgrB,QAAU5G,GAAA,EAAWm9B,EAAW,GAAE,uBACvCvhD,KAAK60E,eAAgB,EACrBtzB,EAAUjoC,YAAYtZ,KAAKgrB,SAoF7B,OAjFAiuH,EAAgBt4I,UAAUqX,IAAM,SAAUgmB,EAAYkI,GAChDlmC,KAAK60E,eAAiB70E,KAAKg+B,aAAeA,GAAci7G,EAAgBE,QAAQn5I,KAAKkmC,QAASA,KAIlGlmC,KAAKg+B,WAAaA,EAClBh+B,KAAKkmC,QAAUA,EACflmC,KAAKyjB,WAGPw1H,EAAgBt4I,UAAU8iB,OAAS,WAGjC,GAFAW,GAAA,EAAcpkB,KAAKgrB,SAEfhrB,KAAKg+B,WAAY,CACnB,IAAIrlB,EAAK3Y,KAAKg+B,WAAWo7G,WACrBC,EAAY1gI,EAAG,GACf2gI,EAAY3gI,EAAG,GAEf0gI,GACFr5I,KAAKu5I,WAAWv5I,KAAKgrB,QAASquH,EAAWr5I,KAAKkmC,QAAUlmC,KAAKkmC,QAAQmzG,UAAY,MAG/EC,IACFl1H,GAAA,EAAWpkB,KAAKgrB,QAAS,GAAE,kDAA8ChpB,EAAW,MACpFhC,KAAKu5I,WAAWv5I,KAAKgrB,QAASsuH,EAAWt5I,KAAKkmC,QAAUlmC,KAAKkmC,QAAQozG,UAAY,OAGnFt5I,KAAKgrB,QAAQxa,MAAQxQ,KAAKg+B,WAAW+8C,gBAAkB,QAC9C/6E,KAAKmC,SAAWnC,KAAKmC,QAAQq3I,0BACtCx5I,KAAKy5I,cAAcz5I,KAAKgrB,SAG1BhrB,KAAK60E,eAAgB,GAGvBokE,EAAgBt4I,UAAU44I,WAAa,SAAUn5F,EAAQh0B,EAAMoe,GAC7D,IAAIkvG,EAAiB,KAAgBA,eAAe15I,KAAKk5I,IAErD9sH,EAAKyT,SACP7/B,KAAK25I,UAAUv5F,EAAQs5F,EAAe75G,QAASrV,QAAQggB,GAASA,EAAM3K,SAAU65G,EAAeE,WAG7FxtH,EAAKsV,UACP1hC,KAAK25I,UAAUv5F,EAAQs5F,EAAeh4G,SAAUlX,QAAQggB,GAASA,EAAM9I,UAAWg4G,EAAeE,WAG/FxtH,EAAKwT,QACP5/B,KAAK25I,UAAUv5F,EAAQs5F,EAAe95G,OAAQpV,QAAQggB,GAASA,EAAM5K,QAAS85G,EAAeE,WAG3FxtH,EAAKs4D,SACP1kF,KAAK25I,UAAUv5F,EAAQs5F,EAAeh1D,QAASl6D,QAAQggB,GAASA,EAAMk6C,SAAUg1D,EAAeE,WAGjG,IAAIC,EAAWztH,EAAKytH,SAEhBA,GACF75I,KAAK25I,UAAUv5F,EAAQy5F,EAAUrvH,QAAQggB,GAASA,EAAMzN,SAAU,KAItEk8G,EAAgBt4I,UAAUg5I,UAAY,SAAUv5F,EAAQl2C,EAAO2xC,EAAW+9F,GACxEx1H,GAAA,EAAWg8B,EAAQ,GAAE,8BAAgCvE,EAAY,aAAe,SAAK75C,EAAWkI,IAE5F0vI,GACFx1H,GAAA,EAAWg8B,EAAQ,GAAE,4CAAwCp+C,EAAW43I,KAI5EX,EAAgBt4I,UAAU84I,cAAgB,SAAUr5F,GAClDh8B,GAAA,EAAWg8B,EAAQ,GAAE,kCAA8Bp+C,EAAW,YAAS,UAAW,cAGpFi3I,EAAgBE,QAAU,SAAU/9H,EAAGlS,GACrC,OAAIkS,IAAMlS,IAAMkS,IAAMlS,KAIbkS,KAAOlS,GAAK,aAAOkS,EAAEi+H,UAAWnwI,EAAEmwI,YAAc,aAAOj+H,EAAEk+H,UAAWpwI,EAAEowI,YAG1EL,EA1FT,GCTI,GAAsC,WACxC,IAAIjwI,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GAmCtCswI,GAAM,EAEN,GAEJ,WACE,SAASC,EAAejlE,QACH,IAAfA,IACFA,EAAa,IAGf90E,KAAKgG,IAAM8zI,MAAOv4I,WAClBvB,KAAKg6I,gBAAkBllE,EACvB90E,KAAKi6I,sBAAwB,GAwH/B,OAjHAF,EAAep5I,UAAUgM,MAAQ,WAC/B,OAAO3M,KAAKgG,IAOd+zI,EAAep5I,UAAU8mB,SAAW,WAClC,OAAO,MAOTsyH,EAAep5I,UAAUu5I,gBAAkB,WACzC,OAAO,MAOTH,EAAep5I,UAAUo6E,aAAe,WACtC,OAAO,aAAS,CAAC/6E,KAAKynB,WAAYznB,KAAKm6I,iBAAkBn6I,KAAKo6I,cAAc75H,KAAK,OAOnFw5H,EAAep5I,UAAUy5I,UAAY,WACnC,OAAO,MAOTL,EAAep5I,UAAU05I,QAAU,WACjC,OAAO,MAOTN,EAAep5I,UAAUw5I,eAAiB,WACxC,OAAO,MAOTJ,EAAep5I,UAAU25I,WAAa,WACpC,OAAO,MAOTP,EAAep5I,UAAU45I,sBAAwB,WAC/C,OAAO,MAOTR,EAAep5I,UAAU65I,cAAgB,WACvC,OAAO,MAOTT,EAAep5I,UAAUk7D,SAAW,WAClC,OAAO77D,KAAKy6I,QAOdV,EAAep5I,UAAU+5I,cAAgB,SAAUV,EAAiBC,EAAuBU,GACzF36I,KAAKg6I,gBAAkBA,EACvBh6I,KAAKi6I,sBAAwBA,EAC7Bj6I,KAAK26I,iBAAmBA,GAO1BZ,EAAep5I,UAAUi6I,cAAgB,WACvC,MAAO,CAAC56I,KAAKg6I,gBAAiBh6I,KAAKi6I,sBAAuBj6I,KAAK26I,mBAUjEZ,EAAep5I,UAAU+J,IAAM,SAAUnH,EAAMovG,GAC7C,OAAO,GAGFonC,EAhIT,GAqIIc,GAEJ,SAAU9wI,GAGR,SAAS8wI,EAAoBl6F,EAAOm6F,EAAYC,GAC9C,IAAI35I,EAAQ2I,EAAOE,KAAKjK,OAASA,KAKjC,OAHAoB,EAAMu/C,MAAQA,EACdv/C,EAAM05I,WAAaA,EACnB15I,EAAM25I,WAAaA,EACZ35I,EAmET,OA3EA,GAAUy5I,EAAqB9wI,GAe/B8wI,EAAoBl6I,UAAUq6I,cAAgB,WAC5C,OAAOh7I,KAAK86I,YAGdD,EAAoBl6I,UAAUs6I,cAAgB,SAAUH,GACtD96I,KAAK86I,WAAaA,GAOpBD,EAAoBl6I,UAAUu6I,WAAa,WACzC,QAASl7I,KAAK+6I,YAGhBF,EAAoBl6I,UAAUw6I,cAAgB,SAAUD,GACtDl7I,KAAK+6I,WAAaG,GAGpBL,EAAoBl6I,UAAU8mB,SAAW,WACvC,OAAOznB,KAAK2gD,MAAQ3gD,KAAK2gD,MAAMl5B,WAAa1d,EAAOpJ,UAAU8mB,SAASxd,KAAKjK,OAG7E66I,EAAoBl6I,UAAUu5I,gBAAkB,WAC9C,OAAOl6I,KAAK2gD,MAAQ3gD,KAAK2gD,MAAMu5F,kBAAoBnwI,EAAOpJ,UAAUu5I,gBAAgBjwI,KAAKjK,OAG3F66I,EAAoBl6I,UAAUo6E,aAAe,WAC3C,OAAO/6E,KAAK2gD,MAAQ3gD,KAAK2gD,MAAMo6B,eAAiBhxE,EAAOpJ,UAAUo6E,aAAa9wE,KAAKjK,OAGrF66I,EAAoBl6I,UAAUy5I,UAAY,WACxC,OAAOp6I,KAAK2gD,MAAQ3gD,KAAK2gD,MAAMy5F,YAAcrwI,EAAOpJ,UAAUy5I,UAAUnwI,KAAKjK,OAG/E66I,EAAoBl6I,UAAU05I,QAAU,WACtC,OAAOr6I,KAAK2gD,MAAQ3gD,KAAK2gD,MAAM05F,UAAYtwI,EAAOpJ,UAAU05I,QAAQpwI,KAAKjK,OAG3E66I,EAAoBl6I,UAAUw5I,eAAiB,WAC7C,OAAOn6I,KAAK2gD,MAAQ3gD,KAAK2gD,MAAMw5F,iBAAmBpwI,EAAOpJ,UAAUw5I,eAAelwI,KAAKjK,OAGzF66I,EAAoBl6I,UAAUi6I,cAAgB,WAC5C,OAAO56I,KAAK2gD,MAAQ3gD,KAAK2gD,MAAMi6F,gBAAkB7wI,EAAOpJ,UAAUi6I,cAAc3wI,KAAKjK,OAGvF66I,EAAoBl6I,UAAUk7D,SAAW,WACvC,OAAO77D,KAAK2gD,MAAQ3gD,KAAK2gD,MAAMkb,WAAa9xD,EAAOpJ,UAAUk7D,SAAS5xD,KAAKjK,OAG7E66I,EAAoBl6I,UAAU+5I,cAAgB,SAAUV,EAAiBC,EAAuBU,GAC9F36I,KAAK2gD,MAAQ3gD,KAAK2gD,MAAM+5F,cAAcV,EAAiBC,EAAuBU,GAAoB5wI,EAAOpJ,UAAU+5I,cAAczwI,KAAKjK,KAAMg6I,EAAiBC,EAAuBU,IAGtLE,EAAoBl6I,UAAU+J,IAAM,SAAUnH,EAAMovG,GAClD,OAAO3yG,KAAK2gD,MAAQ3gD,KAAK2gD,MAAMj2C,IAAInH,EAAMovG,GAAW5oG,EAAOpJ,UAAU+J,IAAIT,KAAKjK,KAAMuD,EAAMovG,IAGrFkoC,EA5ET,CA6EE,IAIEO,GAEJ,WACE,SAASA,KAUT,OARAA,EAAiBz6I,UAAU06I,WAAa,SAAUC,EAAMhqH,GACtD,OAAO,GAGT8pH,EAAiBz6I,UAAU0iB,WAAa,SAAUi4H,EAAMhqH,GACtD,OAAO,MAGF8pH,EAXT,GAiBI,GAEJ,WACE,SAASziG,EAAS4iG,EAAgBC,QACT,IAAnBD,IACFA,EAAiB,IAAIH,IAGvBp7I,KAAKu7I,eAAiBA,EACtBv7I,KAAKw7I,aAAeA,EAyKtB,OAtKA7iG,EAASh4C,UAAU24E,UAAY,SAAU34B,GACvC,OAAIA,EAAMy5F,YACD,GAGF,IAGTzhG,EAASh4C,UAAU44E,cAAgB,SAAU54B,GAC3C,OAAIA,aAAiBk6F,GAvBA,sBADL,kBA+BlBliG,EAASh4C,UAAUy5E,eAAiB,SAAUD,EAAY54B,EAAW3S,GACnE,IAAI6sG,EAAiBhnI,SAASyE,cAAc,OAC5C,KAAauiI,EAAgB,eAC7Bl6F,EAAUjoC,YAAYmiI,GAEtB,IAAIC,EAAO,KAAM,mBACbC,EAAO,KAAM,mBACbh7F,EAAQ,KAAM,yBAAqB3+C,EAAW05I,EAAMC,GACxDF,EAAeniI,YAAYqnC,GAE3B,IAAIviB,EAAO3pB,SAASyE,cAAc,QAClCwiI,EAAKpiI,YAAY8kB,GAEjB,IAAIl0B,EAAQ,IAAI,GAAUwxI,EAAM,CAC9B5lE,mBAAmB,EACnBG,8BAA8B,IAG5B2lE,EAAsBnnI,SAASyE,cAAc,QACjDwiI,EAAKpiI,YAAYsiI,GACjB,KAAaA,EAAqB,+BAClC,IAAI59G,EAAa,IAAI,GAAgB49G,EAAqB,MAEtDC,EAAkBpnI,SAASyE,cAAc,OAC7CyiI,EAAKriI,YAAYuiI,GACjB,KAAaA,EAAiB,yBAC9B,IAEIvrI,EAFA2xD,EAAS,IAAI,GAAiB45E,GAAiB,GAxD9B,wBA4DjB1hE,IACF7pE,EAAQmE,SAASyE,cAAc,OAC/B,KAAa5I,EAAO,iBACpBixC,EAAUjoC,YAAYhJ,IAIxB,KAAaixC,EAAW,WACxB,IAAIu6F,EAAqBrnI,SAASyE,cAAc,OAMhD,OALA,KAAa4iI,EAAoB,sBACjCv6F,EAAUjoC,YAAYwiI,GAIf,CACLv6F,UAAWA,EACXZ,MAAOA,EACPviB,KAAMA,EACNl0B,MAAOA,EACP+3D,OAAQA,EACRjkC,WAAYA,EACZ1tB,MAAOA,EACPyrI,UAXc,IAAI,KAAUD,EAAoB,CAChDN,aAAcx7I,KAAKw7I,iBAcvB7iG,EAASh4C,UAAU25E,cAAgB,SAAU35B,EAAOw5B,EAAY9uD,EAAMujB,GAEhE5uC,KAAKu7I,eAAeF,WAAW,KAAM16F,GACvC,KAAat1B,EAAKk2B,UAAW,eAE7B,KAAgBl2B,EAAKk2B,UAAW,eAGlCl2B,EAAK0wH,UAAUppC,QAAUhyD,EAEzB,IAAIzlC,EAAUlb,KAAKu7I,eAAel4H,WAAW,KAAMs9B,GAmBnD,GAjBIt1B,EAAK0wH,UAAU9sI,WAAaiM,GAAWA,EAAQ3O,OAAS,EAC1D8e,EAAK0wH,UAAU3tI,KAAK8M,EAAS,CAC3BkjB,MAAM,EACNl0B,OAAO,IAECmhB,EAAK0wH,UAAU9sI,WAAeiM,GAA8B,IAAnBA,EAAQ3O,QAC3D8e,EAAK0wH,UAAU5vH,QAIbw0B,aAAiBk6F,IAAuBl6F,EAAMq6F,gBAChD,KAAa3vH,EAAKk2B,UAAW,mBAE7B,KAAgBl2B,EAAKk2B,UAAW,mBAI9BZ,aAAiBk6F,GAAqB,CACxC,IAAIvqI,EAAQqwC,EACRq7F,EAAY3wH,EAEZ/a,EAAM4qI,cACR,KAAac,EAAUz6F,UAAW,2BAE9B3S,EAAOqtG,oBACTD,EAAUz6F,UAAU11B,MAAMihD,eAAiBl+B,EAAOqtG,kBAAkB16I,cAGtE,KAAgBy6I,EAAUz6F,UAAW,2BACrCy6F,EAAUz6F,UAAU11B,MAAMihD,eAAiB,MAI7C,IAAIguE,EAAaxqI,EAAM0qI,iBAAmB,GAEtCgB,EAAU1rI,QACZ0rI,EAAU1rI,MAAM+I,YAAcyhI,EAE1BlsG,EAAOstG,wBACTF,EAAU1rI,MAAMub,MAAMhc,MAAQ++B,EAAOstG,sBAAsB36I,aAMjE,GAAIo/C,aAAiB,GAAgB,CACnC,IAAIhoC,EAAKgoC,EAAMi6F,gBACXZ,EAAkBrhI,EAAG,GACrBshI,EAAwBthI,EAAG,GAC3BgiI,EAAmBhiI,EAAG,GAGtB0vF,EAAY1nD,EAAM05F,UAAY,yBAA2B15F,EAAM05F,UAAY,GAC/EhvH,EAAK+S,KAAKzuB,UAAY04F,EAEtB,IAAIlmG,EAAUw+C,EAAMu5F,mBAAqB95I,OAAOC,OAAO,MACvD8B,EAAQ+jC,QAAU8zG,GAAmB,GACrC73I,EAAQqO,MAAQ,KAA0BmwC,EAAM25F,cAChDn4I,EAAQu0E,iBAAmB/1B,EAAM45F,yBAA2B,KAA0B55F,EAAMw5F,kBAE5Fh4I,EAAQs0E,mBAAqBwjE,GAAyB,GACtD5uH,EAAKnhB,MAAMisE,SAAS,KAA0Bx1B,EAAMl5B,YAAa,KAA0Bk5B,EAAMw5F,kBAAmBh4I,GAEpHkpB,EAAK42C,OAAOjqD,IAAI,KAA0B2oC,EAAMy5F,aAAcO,GAE9DtvH,EAAK2S,WAAWhmB,IAAI2oC,EAAM65F,mBAI9B7hG,EAASh4C,UAAU+5E,gBAAkB,SAAUP,EAAYQ,GACzDA,EAAaohE,UAAUt6I,UACvBk5E,EAAaohE,UAAY,KACzBphE,EAAap5B,UAAY,KACzBo5B,EAAah6B,MAAQ,KACrBg6B,EAAa38C,WAAa,KAC1B28C,EAAa1Y,OAAS,KACtB0Y,EAAarqE,MAAQ,KACrBqqE,EAAav8C,KAAO,KACpBu8C,EAAazwE,MAAMzI,UACnBk5E,EAAazwE,MAAQ,MAGhByuC,EAhLT,GAmLI,GAEJ,WACE,SAASwjG,EAAe3+E,EAAS+9E,QACf,IAAZ/9E,IACFA,EAAU,SAGW,IAAnB+9E,IACFA,EAAiB,IAAIH,IAGvBp7I,KAAKo8I,SAAW5+E,EAChBx9D,KAAKq8I,YAAcr8I,KACnBA,KAAKs8I,UAAY,IAAI,GAASf,GAC9Bv7I,KAAKu8I,QAAUv8I,KACfA,KAAKw8I,QAAUx8I,KACfA,KAAKy8I,uBAAyBz8I,KA2EhC,OAxEAI,OAAOM,eAAey7I,EAAex7I,UAAW,UAAW,CACzDC,IAAK,WACH,OAAOZ,KAAKo8I,UAEdpkI,IAAK,SAAawlD,GAChBx9D,KAAKo8I,SAAW5+E,GAElB18D,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAey7I,EAAex7I,UAAW,aAAc,CAC5DC,IAAK,WACH,OAAOZ,KAAKq8I,aAEdv7I,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAey7I,EAAex7I,UAAW,WAAY,CAC1DC,IAAK,WACH,OAAOZ,KAAKs8I,WAEdx7I,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAey7I,EAAex7I,UAAW,SAAU,CACxDC,IAAK,WACH,OAAOZ,KAAKu8I,SAEdz7I,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAey7I,EAAex7I,UAAW,SAAU,CACxDC,IAAK,WACH,OAAOZ,KAAKw8I,SAEd17I,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAey7I,EAAex7I,UAAW,wBAAyB,CACvEC,IAAK,WACH,OAAOZ,KAAKy8I,wBAEd37I,YAAY,EACZC,cAAc,IAGhBo7I,EAAex7I,UAAUgM,MAAQ,SAAUg0C,GACzC,OAAOA,EAAMh0C,SAGfwvI,EAAex7I,UAAU8mB,SAAW,SAAUk5B,GAC5C,OAAOA,EAAMl5B,YAGf00H,EAAex7I,UAAUo6E,aAAe,SAAUp6B,GAGhD,OAFgBA,EAAMo6B,eAGbjxE,EAAA,EAAa,0BAA2B,cAAe62C,EAAMo6B,gBAG/DjxE,EAAA,EAAa,qBAAsB,WAG5CqyI,EAAex7I,UAAUymB,UAAY,SAAUu5B,GAC7C,OAAQA,EAAMkb,YAGhBsgF,EAAex7I,UAAU+J,IAAM,SAAUi2C,EAAOp9C,EAAMovG,GACpD,OAAOhyD,EAAMj2C,IAAInH,EAAMovG,IAGlBwpC,EA1FT,GCvcI,I,cAEJ,WACE,SAASnjE,EAAWtwD,GAClB1oB,KAAK08I,cAAgB,aAAWh0H,EAAI5b,UAAY4b,EAAM,CACpD5b,SAAU,WACR,OAAO4b,IA4Bb,OAvBAswD,EAAWr4E,UAAUgM,MAAQ,SAAU2uI,EAAMhqH,GAC3C,IAAKA,EACH,OAAO,KAGT,IAAIzkB,EAAQ7M,KAAK08I,cAAc5vI,WAC/B,OAAOD,IAAUykB,EAAU,WAAazkB,EAAM8vI,WAAWhwI,MAAM2kB,IAGjE0nD,EAAWr4E,UAAUu4E,YAAc,SAAUoiE,EAAMhqH,GACjD,IAAIzkB,EAAQ7M,KAAK08I,cAAc5vI,WAC/B,SAAUD,GAASA,IAAUykB,GAAWzkB,EAAM2wD,QAAQjxD,OAAS,IAGjEysE,EAAWr4E,UAAUy4E,YAAc,SAAUkiE,EAAMhqH,GACjD,IAAIzkB,EAAQ7M,KAAK08I,cAAc5vI,WAC/B,OAAO6P,QAAQC,QAAQ/P,IAAUykB,EAAUzkB,EAAM2wD,QAAU,KAG7Dwb,EAAWr4E,UAAUi8I,UAAY,SAAUtB,EAAMhqH,GAC/C,OAAO3U,QAAQC,QAAQ,OAGlBo8D,EAhCT,IAqCI6jE,GAEJ,WACE,SAASA,EAAsBH,GAC7B18I,KAAK08I,cAAgBA,EAkDvB,OA/CAG,EAAsBl8I,UAAUo6E,aAAe,SAAUugE,EAAMhqH,GAC7D,IAAIzkB,EAAQ7M,KAAK08I,cAAc5vI,WAC/B,OAAOD,EAAM+4E,sBAAwB/4E,EAAM+4E,sBAAsB7K,aAAazpD,GAAW,MAG3FurH,EAAsBl8I,UAAUm8I,YAAc,SAAUxB,EAAMhqH,GAC5D,IAAIzkB,EAAQ7M,KAAK08I,cAAc5vI,WAC3B0B,EAAI,EAER,GAAI3B,EAAMiP,OACR,IAAK,IAAIlJ,EAAK,EAAG+F,EAAK9L,EAAM2wD,QAAS5qD,EAAK+F,EAAGpM,OAAQqG,IAAM,CACzD,IAAI+tC,EAAQhoC,EAAG/F,GAMf,GAJI/F,EAAMiP,OAAOsL,UAAUu5B,IACzBnyC,IAGEmyC,IAAUrvB,EACZ,WAIJ9iB,EAAI3B,EAAM2wD,QAAQpzC,QAAQkH,GAAW,EAGvC,OAAOjF,OAAO7d,IAGhBquI,EAAsBl8I,UAAUo8I,WAAa,WAC3C,IAAIlwI,EAAQ7M,KAAK08I,cAAc5vI,WAC3BmV,EAAI,EAER,GAAIpV,EAAMiP,OACR,IAAK,IAAIlJ,EAAK,EAAG+F,EAAK9L,EAAM2wD,QAAS5qD,EAAK+F,EAAGpM,OAAQqG,IAAM,CACzD,IAAI+tC,EAAQhoC,EAAG/F,GAEX/F,EAAMiP,OAAOsL,UAAUu5B,IACzB1+B,SAIJA,EAAIpV,EAAM2wD,QAAQjxD,OAGpB,OAAO8f,OAAOpK,IAGT46H,EApDT,GAyDIG,GAEJ,WACE,SAASA,EAAON,GACd18I,KAAK08I,cAAgBA,EAavB,OAVAM,EAAOr8I,UAAUymB,UAAY,SAAUk0H,EAAMhqH,GAC3C,IAAIzkB,EAAQ7M,KAAK08I,cAAc5vI,WAE/B,OAAKD,EAAMiP,QAIJjP,EAAMiP,OAAOsL,UAAUkK,IAGzB0rH,EAfT,GAoBI,GAEJ,WACE,SAASrkG,EAAS+jG,EAAe9tG,GAC/B5uC,KAAK08I,cAAgBA,EACrB18I,KAAK4uC,OAASA,EAgChB,OA7BA+J,EAASh4C,UAAUmjH,aAAe,SAAUl1E,GAC1C5uC,KAAK4uC,OAASA,GAGhB+J,EAASh4C,UAAU24E,UAAY,SAAUgiE,EAAMhqH,GAE7C,OADYtxB,KAAK08I,cAAc5vI,WAClB4rC,SAAS4gC,UAAUhoD,IAGlCqnB,EAASh4C,UAAU44E,cAAgB,SAAU+hE,EAAMhqH,GAEjD,OADYtxB,KAAK08I,cAAc5vI,WAClB4rC,SAAS6gC,cAAcjoD,IAGtCqnB,EAASh4C,UAAUy5E,eAAiB,SAAUkhE,EAAMnhE,EAAY54B,GAE9D,OADYvhD,KAAK08I,cAAc5vI,WAClB4rC,SAAS0hC,eAAeD,EAAY54B,EAAWvhD,KAAK4uC,SAGnE+J,EAASh4C,UAAU25E,cAAgB,SAAUghE,EAAMhqH,EAAS6oD,EAAYQ,GAC1D36E,KAAK08I,cAAc5vI,WACzB4rC,SAAS4hC,cAAchpD,EAAS6oD,EAAYQ,EAAc36E,KAAK4uC,SAGvE+J,EAASh4C,UAAU+5E,gBAAkB,SAAU4gE,EAAMnhE,EAAYQ,GACnD36E,KAAK08I,cAAc5vI,WACzB4rC,SAASgiC,gBAAgBP,EAAYQ,IAGtChiC,EAnCT,GC3HI,I,OAEJ,WACE,SAASskG,IACPj9I,KAAKk9I,KAAO,GAuBd,OApBAD,EAAqBt8I,UAAUqX,IAAM,SAAUgmB,EAAY9Q,GACzDltB,KAAKk9I,KAAK9uI,KAAK,CACb4vB,WAAY,aAAiBA,EAAYxpB,GAAA,GACzC0Y,SAAUA,KAId+vH,EAAqBt8I,UAAUw8I,SAAW,SAAUn/G,GAElD,IAAK,IAAIxvB,EAAIxO,KAAKk9I,KAAK3wI,OAAS,EAAGiC,GAAK,EAAGA,IAAK,CAC9C,IAAI+b,EAAOvqB,KAAKk9I,KAAK1uI,GAErB,GAAIwvB,EAAWo/G,UAAU3tI,OAAO8a,EAAKyT,YACnC,OAAOzT,EAAK2C,SAIhB,OAAO,MAGF+vH,EAzBT,IA8BI,GAEJ,WACE,SAASI,EAAkBl7I,GACzB,IAAIf,EAAQpB,UAEI,IAAZmC,IACFA,EAAU,CACRm7I,cAAe,EAGf33D,iBAAiB,EACjB43D,SAAU,IAMdv9I,KAAKmC,QAAUA,EACfnC,KAAKw9I,yBAA2B,IAAI,GACpCx9I,KAAKy9I,uBAAyB,IAAI,IAEK,mBAA5Bt7I,EAAQwjF,iBAAiCxjF,EAAQwjF,mBAC1D3lF,KAAKw9I,yBAAyBxlI,IAAI,GAEhC,SAAUwJ,EAAGtV,GACb,OAAO9K,EAAMs8I,KAAKl8H,EAAGtV,KAEvBlM,KAAKw9I,yBAAyBxlI,IAAI,GAEhC,SAAUwJ,EAAGtV,GACb,OAAO9K,EAAMu8I,OAAOn8H,EAAGtV,KAEzBlM,KAAKw9I,yBAAyBxlI,IAAI,GAEhC,SAAUwJ,EAAGtV,GACb,OAAO9K,EAAMw8I,OAAOp8H,EAAGtV,KAEzBlM,KAAKw9I,yBAAyBxlI,IAAI,GAEhC,SAAUwJ,EAAGtV,GACb,OAAO9K,EAAMy8I,QAAQr8H,EAAGtV,KAGtBsI,GAAA,IACFxU,KAAKw9I,yBAAyBxlI,IAAI,KAIhC,SAAUwJ,EAAGtV,GACb,OAAO9K,EAAMw8I,OAAOp8H,EAAGtV,KAEzBlM,KAAKw9I,yBAAyBxlI,IAAI,IAIhC,SAAUwJ,EAAGtV,GACb,OAAO9K,EAAMu8I,OAAOn8H,EAAGtV,KAEzBlM,KAAKw9I,yBAAyBxlI,IAAI,IAIhC,SAAUwJ,EAAGtV,GACb,OAAO9K,EAAMs8I,KAAKl8H,EAAGtV,MAIzBlM,KAAKw9I,yBAAyBxlI,IAAI,GAEhC,SAAUwJ,EAAGtV,GACb,OAAO9K,EAAM08I,SAASt8H,EAAGtV,KAE3BlM,KAAKw9I,yBAAyBxlI,IAAI,GAEhC,SAAUwJ,EAAGtV,GACb,OAAO9K,EAAM28I,WAAWv8H,EAAGtV,KAE7BlM,KAAKw9I,yBAAyBxlI,IAAI,GAEhC,SAAUwJ,EAAGtV,GACb,OAAO9K,EAAM48I,OAAOx8H,EAAGtV,KAEzBlM,KAAKw9I,yBAAyBxlI,IAAI,GAEhC,SAAUwJ,EAAGtV,GACb,OAAO9K,EAAMk9E,MAAM98D,EAAGtV,KAExBlM,KAAKw9I,yBAAyBxlI,IAAI,GAEhC,SAAUwJ,EAAGtV,GACb,OAAO9K,EAAM68I,QAAQz8H,EAAGtV,KAE1BlM,KAAKw9I,yBAAyBxlI,IAAI,EAEhC,SAAUwJ,EAAGtV,GACb,OAAO9K,EAAM88I,SAAS18H,EAAGtV,KAE3BlM,KAAKy9I,uBAAuBzlI,IAAI,EAE9BhY,KAAKm+I,QAAQttG,KAAK7wC,OACpBA,KAAKy9I,uBAAuBzlI,IAAI,KAI9BhY,KAAKm+I,QAAQttG,KAAK7wC,QAqXxB,OAjXAq9I,EAAkB18I,UAAUq/B,YAAc,SAAUs7G,EAAMhqH,EAASzwB,EAAOs6F,GAKxE,QAJe,IAAXA,IACFA,EAAS,SAGwB,IAA/Bn7F,KAAKmC,QAAQm7I,gBAEbz8I,EAAMkhE,YAAclhE,EAAMquD,cAAe,CAC3C,GAAIruD,EAAMiC,OAAQ,CAChB,GAAIjC,EAAMiC,OAAOyuB,SAAkD,UAAvC1wB,EAAMiC,OAAOyuB,QAAQvI,cAC/C,OAAO,EAGT,GAAI5E,GAAA,EAAwBvjB,EAAMiC,OAAQ,YAAa,eACrD,OAAO,EAGT,GAAIshB,GAAA,EAAwBvjB,EAAMiC,OAAQ,oBAAqB,OAE7D,OAAO,EAKX,OAAO9C,KAAKo+I,YAAY9C,EAAMhqH,EAASzwB,EAAOs6F,GAGhD,OAAO,GAGTkiD,EAAkB18I,UAAUsjB,QAAU,SAAUq3H,EAAMhqH,EAASzwB,GAG7D,OAFY2T,GAAA,GAEC3T,EAAMg/B,SACjBh/B,EAAMm8B,iBACNn8B,EAAMo8B,mBACC,KAGLp8B,EAAMiC,SAAUjC,EAAMiC,OAAOyuB,SAAkD,UAAvC1wB,EAAMiC,OAAOyuB,QAAQvI,kBAI9B,IAA/BhpB,KAAKmC,QAAQm7I,gBAEbz8I,EAAMkhE,aAAclhE,EAAMquD,eAIvBlvD,KAAKo+I,YAAY9C,EAAMhqH,EAASzwB,KAGzCw8I,EAAkB18I,UAAUy9I,YAAc,SAAU9C,EAAMhqH,EAAS+sH,EAAUljD,QAC5D,IAAXA,IACFA,EAAS,SAGX,IAAIt6F,EAAQw9I,EACRC,EAAU,CACZnjD,OAAQA,EACRojD,cAAeF,EACfG,kBAAmBx+I,KAAKy+I,iBAAiB59I,IAGvCy6I,EAAK/zD,aAAej2D,GACtBgqH,EAAKoD,WAAWJ,GAChBhD,EAAKqD,eAAeL,KAEID,GAAYx9I,EAAMulF,cAA4C,cAA5BvlF,EAAMulF,aAAajsE,MAAsD,IAA9BtZ,EAAMulF,aAAankB,QAGtHo8E,EAASrhH,iBAGXqhH,EAASphH,kBACTq+G,EAAK92D,WACL82D,EAAK5wG,aAAa,CAACpZ,GAAUgtH,GAC7BhD,EAAK50D,SAASp1D,EAASgtH,GAEnBt+I,KAAK4+I,sBAAsBttH,EAASzwB,EAAOs6F,KACzCmgD,EAAKuD,WAAWvtH,GAClBgqH,EAAKwD,SAASxtH,GAAShuB,UAAKtB,EAAW+8I,GAAA,GAEvCzD,EAAK9zD,OAAOl2D,GAAShuB,UAAKtB,EAAW+8I,GAAA,KAK3C,OAAO,GAGT1B,EAAkB18I,UAAUi+I,sBAAwB,SAAUttH,EAASzwB,EAAOs6F,GAC5E,IAAI6jD,EAA2B,UAAX7jD,GAAuC,IAAjBt6F,EAAMohE,OAChD,OAAOjiE,KAAKi/I,mBAAqBD,GAAiBh/I,KAAKy+I,iBAAiB59I,IAG1ET,OAAOM,eAAe28I,EAAkB18I,UAAW,oBAAqB,CACtEC,IAAK,WACH,OAAiC,IAA1BZ,KAAKmC,QAAQo7I,UAItBz8I,YAAY,EACZC,cAAc,IAGhBs8I,EAAkB18I,UAAU89I,iBAAmB,SAAU59I,GACvD,IAAIywB,EAAUzwB,EAAMiC,OAEpB,IAAKshB,GAAA,EAAakN,EAAS,WACzB,OAAO,EAGT,IAAI4tH,EAAeC,OAAOC,iBAAiB9tH,EAAS,WAEpD,GAAqC,SAAjC4tH,EAAaG,iBAAuD,SAAzBH,EAAarvG,QAC1D,OAAO,EAGT,IAAIyvG,EAAe3lG,SAASulG,EAAa9oH,OAASujB,SAASulG,EAAalzH,cACxE,OAAOnrB,EAAMulF,aAAahkB,SAAWk9E,GAGvCjC,EAAkB18I,UAAU+7B,cAAgB,SAAU4+G,EAAMhqH,EAASzwB,GACnE,QAAIA,EAAMiC,SAAUjC,EAAMiC,OAAOyuB,SAAkD,UAAvC1wB,EAAMiC,OAAOyuB,QAAQvI,iBAK7DnoB,IACFA,EAAMm8B,iBACNn8B,EAAMo8B,oBAGD,IAGTogH,EAAkB18I,UAAU4+I,MAAQ,SAAUjE,EAAMhqH,EAASzwB,GAC3D,IAAIiC,EAASjC,EAAM2+I,cAEnB,QAAI18I,IAAUA,EAAOyuB,SAA4C,UAAjCzuB,EAAOyuB,QAAQvI,gBAIxChpB,KAAKo+I,YAAY9C,EAAMhqH,EAASzwB,EAAO,UAGhDw8I,EAAkB18I,UAAUm8B,UAAY,SAAUw+G,EAAMz6I,GACtD,OAAOb,KAAKy/I,MAAMz/I,KAAKw9I,yBAA0BlC,EAAMz6I,IAGzDw8I,EAAkB18I,UAAU6/B,QAAU,SAAU86G,EAAMz6I,GACpD,OAAOb,KAAKy/I,MAAMz/I,KAAKy9I,uBAAwBnC,EAAMz6I,IAGvDw8I,EAAkB18I,UAAU8+I,MAAQ,SAAUC,EAAUpE,EAAMz6I,GAC5D,IAAI4X,EAAUinI,EAASvC,SAASt8I,EAAM8+I,gBAEtC,SAAIlnI,IAEEA,EAAQ6iI,EAAMz6I,MAChBA,EAAMm8B,iBACNn8B,EAAMo8B,mBACC,IAObogH,EAAkB18I,UAAU+8I,KAAO,SAAUpC,EAAMz6I,GACjD,IAAIy9I,EAAU,CACZnjD,OAAQ,WACRojD,cAAe19I,GAUjB,OAPIy6I,EAAKsE,eACPtE,EAAKuE,eAAevB,IAEpBhD,EAAK5U,cAAc,EAAG4X,GACtBhD,EAAKz5E,OAAOy5E,EAAKt0D,YAAY1jF,UAAKtB,EAAW+8I,GAAA,KAGxC,GAGT1B,EAAkB18I,UAAUm9I,SAAW,SAAUxC,EAAMz6I,GACrD,IAAIy9I,EAAU,CACZnjD,OAAQ,WACRojD,cAAe19I,GAUjB,OAPIy6I,EAAKsE,eACPtE,EAAKuE,eAAevB,IAEpBhD,EAAK9U,kBAAkB8X,GACvBhD,EAAKz5E,OAAOy5E,EAAKt0D,YAAY1jF,UAAKtB,EAAW+8I,GAAA,KAGxC,GAGT1B,EAAkB18I,UAAUg9I,OAAS,SAAUrC,EAAMz6I,GACnD,IAAIy9I,EAAU,CACZnjD,OAAQ,WACRojD,cAAe19I,GAUjB,OAPIy6I,EAAKsE,eACPtE,EAAKuE,eAAevB,IAEpBhD,EAAKlV,UAAU,EAAGkY,GAClBhD,EAAKz5E,OAAOy5E,EAAKt0D,YAAY1jF,UAAKtB,EAAW+8I,GAAA,KAGxC,GAGT1B,EAAkB18I,UAAUo9I,WAAa,SAAUzC,EAAMz6I,GACvD,IAAIy9I,EAAU,CACZnjD,OAAQ,WACRojD,cAAe19I,GAUjB,OAPIy6I,EAAKsE,eACPtE,EAAKuE,eAAevB,IAEpBhD,EAAKpV,cAAcoY,GACnBhD,EAAKz5E,OAAOy5E,EAAKt0D,YAAY1jF,UAAKtB,EAAW+8I,GAAA,KAGxC,GAGT1B,EAAkB18I,UAAUq9I,OAAS,SAAU1C,EAAMz6I,GACnD,IAAIy9I,EAAU,CACZnjD,OAAQ,WACRojD,cAAe19I,GAUjB,OAPIy6I,EAAKsE,eACPtE,EAAKuE,eAAevB,IAEpBhD,EAAK1U,WAAW0X,GAChBhD,EAAKz5E,OAAOy5E,EAAKt0D,YAAY1jF,UAAKtB,EAAW+8I,GAAA,KAGxC,GAGT1B,EAAkB18I,UAAU29E,MAAQ,SAAUg9D,EAAMz6I,GAClD,IAAIy9I,EAAU,CACZnjD,OAAQ,WACRojD,cAAe19I,GAUjB,OAPIy6I,EAAKsE,eACPtE,EAAKuE,eAAevB,IAEpBhD,EAAKhV,UAAUgY,GACfhD,EAAKz5E,OAAOy5E,EAAKt0D,YAAY1jF,UAAKtB,EAAW+8I,GAAA,KAGxC,GAGT1B,EAAkB18I,UAAUi9I,OAAS,SAAUtC,EAAMz6I,GACnD,IAAIy9I,EAAU,CACZnjD,OAAQ,WACRojD,cAAe19I,GAGjB,GAAIy6I,EAAKsE,eACPtE,EAAKuE,eAAevB,OACf,CACL,IAAIwB,EAAUxE,EAAKt0D,WACnBs0D,EAAKwD,SAASgB,GAASx8I,KAAK,SAAUy8I,GACpC,GAAID,IAAYC,EAEd,OADAzE,EAAK0E,YAAY1B,GACVhD,EAAKz5E,OAAOy5E,EAAKt0D,cAIzB1jF,UAAKtB,EAAW+8I,GAAA,GAGrB,OAAO,GAGT1B,EAAkB18I,UAAUk9I,QAAU,SAAUvC,EAAMz6I,GACpD,IAAIy9I,EAAU,CACZnjD,OAAQ,WACRojD,cAAe19I,GAGjB,GAAIy6I,EAAKsE,eACPtE,EAAKuE,eAAevB,OACf,CACL,IAAI2B,EAAU3E,EAAKt0D,WACnBs0D,EAAK9zD,OAAOy4D,GAAS38I,KAAK,SAAU48I,GAClC,GAAID,IAAYC,EAEd,OADA5E,EAAK6E,gBAAgB7B,GACdhD,EAAKz5E,OAAOy5E,EAAKt0D,cAIzB1jF,UAAKtB,EAAW+8I,GAAA,GAGrB,OAAO,GAGT1B,EAAkB18I,UAAUw9I,QAAU,SAAU7C,EAAMz6I,GACpD,IAAIy9I,EAAU,CACZnjD,OAAQ,WACRojD,cAAe19I,GAGjB,GAAIy6I,EAAKsE,eACP,OAAO,EAGT,IAAIpqI,EAAQ8lI,EAAKt0D,WAMjB,OAJIxxE,GACF8lI,EAAK5wG,aAAa,CAACl1B,GAAQ8oI,IAGtB,GAGTjB,EAAkB18I,UAAUs9I,QAAU,SAAU3C,EAAMz6I,GACpD,GAAIy6I,EAAKsE,eACP,OAAO,EAGT,IAAIpqI,EAAQ8lI,EAAKt0D,WAMjB,OAJIxxE,GACF8lI,EAAK8E,gBAAgB5qI,IAGhB,GAGT6nI,EAAkB18I,UAAUu9I,SAAW,SAAU5C,EAAMz6I,GACrD,IAAIy9I,EAAU,CACZnjD,OAAQ,WACRojD,cAAe19I,GAGjB,OAAIy6I,EAAKsE,gBACPtE,EAAKuE,eAAevB,IACb,GAGLhD,EAAKtlI,eAAezJ,QACtB+uI,EAAKqD,eAAeL,IACb,KAGLhD,EAAKt0D,aACPs0D,EAAKoD,WAAWJ,IACT,IAMJjB,EA5dT,GAieIgD,GAEJ,WACE,SAASA,KAkBT,OAhBAA,EAAmB1/I,UAAU2/I,WAAa,SAAUhF,EAAMhqH,GACxD,OAAO,MAGT+uH,EAAmB1/I,UAAU4/I,YAAc,SAAUjF,EAAMjwH,EAAMkzH,KAIjE8B,EAAmB1/I,UAAU6/I,WAAa,SAAUlF,EAAMjwH,EAAMo1H,EAAelC,GAC7E,OAAO,MAGT8B,EAAmB1/I,UAAU+/I,KAAO,SAAUpF,EAAMjwH,EAAMo1H,EAAelC,KAIlE8B,EAnBT,GAwBIM,GAEJ,WACE,SAASA,KAMT,OAJAA,EAAchgJ,UAAUymB,UAAY,SAAUk0H,EAAMhqH,GAClD,OAAO,GAGFqvH,EAPT,GAYIC,GAEJ,WACE,SAASA,KAMT,OAJAA,EAA6BjgJ,UAAUo6E,aAAe,SAAUugE,EAAMhqH,GACpE,OAAO,MAGFsvH,EAPT,GAYIC,GAEJ,WACE,SAASA,EAAkBC,EAAcC,GACvC/gJ,KAAK8gJ,aAAeA,EACpB9gJ,KAAK+gJ,eAAiBA,EA8DxB,OA3DAF,EAAkBlgJ,UAAUkrB,MAAQ,SAAU+iB,GAC5C,IAAIkW,EAAS9kD,KAAK+gJ,eAAiB,IAAM/gJ,KAAK+gJ,eAAiB,GAC3D7/I,EAAU,GAEV0tC,EAAOoyG,qBACT9/I,EAAQkN,KAAK,eAAiB02C,EAAS,+FAAiGlW,EAAOoyG,oBAAsB,OAGnKpyG,EAAOqyG,qBACT//I,EAAQkN,KAAK,eAAiB02C,EAAS,oFAAsFlW,EAAOqyG,oBAAsB,OAGxJryG,EAAOsyG,+BACThgJ,EAAQkN,KAAK,eAAiB02C,EAAS,gGAAkGlW,EAAOsyG,8BAAgC,OAG9KtyG,EAAOuyG,+BACTjgJ,EAAQkN,KAAK,eAAiB02C,EAAS,qFAAuFlW,EAAOuyG,8BAAgC,OAGnKvyG,EAAOwyG,iCACTlgJ,EAAQkN,KAAK,2DAA6D02C,EAAS,wGAA0GlW,EAAOwyG,gCAAkC,eAGpOxyG,EAAOyyG,iCACTngJ,EAAQkN,KAAK,2DAA6D02C,EAAS,6FAA+FlW,EAAOyyG,gCAAkC,eAGzNzyG,EAAO0yG,iCACTpgJ,EAAQkN,KAAK,eAAiB02C,EAAS,wFAA0FlW,EAAO0yG,gCAAkC,OAGxK1yG,EAAO2yG,iCACTrgJ,EAAQkN,KAAK,eAAiB02C,EAAS,6EAA+ElW,EAAO2yG,gCAAkC,OAG7J3yG,EAAO4yG,qBACTtgJ,EAAQkN,KAAK,eAAiB02C,EAAS,kHAAoHlW,EAAO4yG,oBAAsB,OAGtL5yG,EAAO6yG,qBACTvgJ,EAAQkN,KAAK,eAAiB02C,EAAS,uGAAyGlW,EAAO6yG,oBAAsB,OAG3K7yG,EAAO8yG,oBACTxgJ,EAAQkN,KAAK,yBAA2B02C,EAAS,2DAA6DA,EAAS,yEAA2ElW,EAAO8yG,mBAAqB,qDAG5N9yG,EAAO+yG,kBACTzgJ,EAAQkN,KAAK,sHAAwHwgC,EAAO+yG,iBAAmB,8CAAgD78F,EAAS,6HAA+HA,EAAS,4GAA8GlW,EAAO+yG,iBAAmB,4BAA8B78F,EAAS,4GAA8GlW,EAAO+yG,iBAAmB,4BAA8B78F,EAAS,uGAAyGlW,EAAO+yG,iBAAmB,4BAA8B78F,EAAS,sHAAwHlW,EAAO+yG,iBAAmB,4BAA8B78F,EAAS,2DAA6DA,EAAS,iGAAmGlW,EAAO+yG,iBAAmB,eAGtuC,IAAIC,EAAY1gJ,EAAQqf,KAAK,MAEzBqhI,IAAc5hJ,KAAK8gJ,aAAap1H,YAClC1rB,KAAK8gJ,aAAap1H,UAAYk2H,IAI3Bf,EAjET,G,UC5jBI,GAAsC,WACxC,IAAI73I,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA+BtC,GAEJ,WACE,SAASq4I,EAASt3H,GAChBvqB,KAAK8hJ,WAAa,IAAI,KACtB9hJ,KAAK+hJ,UAAY/hJ,KAAK8hJ,WAAWjhJ,MACjCb,KAAKgiJ,MAAQz3H,EAqBf,OAlBAnqB,OAAOM,eAAemhJ,EAASlhJ,UAAW,OAAQ,CAChDC,IAAK,WACH,OAAOZ,KAAKgiJ,OAEdlhJ,YAAY,EACZC,cAAc,IAGhB8gJ,EAASlhJ,UAAUc,QAAU,WACvBzB,KAAK8hJ,aACP9hJ,KAAK8hJ,WAAW//I,OAEhB/B,KAAK8hJ,WAAWrgJ,UAEhBzB,KAAK8hJ,gBAAa9/I,IAIf6/I,EAzBT,GA8BI,GAEJ,WACE,SAASI,IACPjiJ,KAAKkiJ,MAAQ9hJ,OAAOC,OAAO,IAkD7B,OA/CA4hJ,EAAKthJ,UAAUwhJ,SAAW,SAAU53H,GAClC,QAASvqB,KAAKkiJ,MAAM33H,EAAKvkB,KAG3Bi8I,EAAKthJ,UAAU+J,IAAM,SAAU6f,EAAM04F,GACnC,IAAI7hH,EAAQpB,KAERoiJ,EAAOpiJ,KAAKqiJ,QAAQ93H,GAExB,OAAI63H,EACK,IAAIzlI,QAAQ,SAAUjG,EAAGxK,GAC9B,KAAMm+H,KAAK+X,EAAKL,UAAhB,CAA2B,WACzB,OAAO3gJ,EAAMsJ,IAAI6f,EAAM04F,GAAI3/G,KAAKoT,EAAGxK,OAMlC,IAAIyQ,QAAQ,SAAUjG,EAAGxK,GAC9B,GAAIqe,EAAKyhE,aACP,OAAO9/E,EAAE,IAAI4rC,MAAM,sBAGrB,IAAIsqG,EAAOhhJ,EAAM8gJ,MAAM33H,EAAKvkB,IAAM,IAAI,GAASukB,GAM/C,OALS04F,IAAK3/G,KAAK,SAAUsT,GAG3B,cAFOxV,EAAM8gJ,MAAM33H,EAAKvkB,IACxBo8I,EAAK3gJ,UACEmV,IACNtT,KAAKoT,EAAGxK,MAKf+1I,EAAKthJ,UAAU0hJ,QAAU,SAAU93H,GACjC,IAAI9Z,EAEJ,IAAKA,KAAOzQ,KAAKkiJ,MAAO,CACtB,IAAIE,EAAOpiJ,KAAKkiJ,MAAMzxI,GAEtB,GAAI8Z,EAAK7P,WAAW0nI,EAAK73H,MACvB,OAAO63H,EAIX,OAAO,MAGFH,EApDT,GAyDI,GAEJ,WACE,SAASK,IACPtiJ,KAAK4oC,aAAc,EACnB5oC,KAAKuiJ,iBAAmB,IAAI,KAC5BviJ,KAAKwiJ,gBAAkBxiJ,KAAKuiJ,iBAAiB1hJ,MAC7Cb,KAAKyiJ,cAAgB,IAAI,KACzBziJ,KAAK0iJ,aAAe1iJ,KAAKyiJ,cAAc5hJ,MACvCb,KAAK2iJ,iBAAmB,IAAI,KAC5B3iJ,KAAK4iJ,gBAAkB5iJ,KAAK2iJ,iBAAiB9hJ,MAC7Cb,KAAK6iJ,gBAAkB,IAAI,KAC3B7iJ,KAAK8iJ,eAAiB9iJ,KAAK6iJ,gBAAgBhiJ,MAC3Cb,KAAK+iJ,mBAAqB,IAAI,KAC9B/iJ,KAAKgjJ,kBAAoBhjJ,KAAK+iJ,mBAAmBliJ,MACjDb,KAAKijJ,mBAAqB,IAAI,KAC9BjjJ,KAAKkjJ,kBAAoBljJ,KAAKijJ,mBAAmBpiJ,MACjDb,KAAKmjJ,sBAAwB,IAAI,KACjCnjJ,KAAKojJ,qBAAuBpjJ,KAAKmjJ,sBAAsBtiJ,MACvDb,KAAKqjJ,kBAAoB,IAAI,KAC7BrjJ,KAAKsjJ,iBAAmBtjJ,KAAKqjJ,kBAAkBxiJ,MAC/Cb,KAAKujJ,uBAAyB,IAAI,KAClCvjJ,KAAKwjJ,sBAAwBxjJ,KAAKujJ,uBAAuB1iJ,MACzDb,KAAKyjJ,0BAA4B,IAAI,KACrCzjJ,KAAK0jJ,yBAA2B1jJ,KAAKyjJ,0BAA0B5iJ,MAC/Db,KAAK2jJ,kBAAoB,IAAI,KAC7B3jJ,KAAK4jJ,iBAAmB5jJ,KAAK2jJ,kBAAkB9iJ,MAC/Cb,KAAKmsH,MAAQ,GAyDf,OAtDAm2B,EAAa3hJ,UAAUoF,SAAW,SAAUwkB,GAC1C,MAAWvqB,KAAK6jJ,aAAat5H,EAAKvkB,IAAK,4BAA8BukB,EAAKvkB,IAC1E,IAAIo3E,EAAa,YAAmB,CAACp9E,KAAKuiJ,iBAAiBnpI,IAAImR,EAAKu5H,aAAc9jJ,KAAKyiJ,cAAcrpI,IAAImR,EAAKw5H,UAAW/jJ,KAAK2iJ,iBAAiBvpI,IAAImR,EAAKy5H,aAAchkJ,KAAK6iJ,gBAAgBzpI,IAAImR,EAAK05H,YAAajkJ,KAAK+iJ,mBAAmB3pI,IAAImR,EAAK25H,eAAgBlkJ,KAAKijJ,mBAAmB7pI,IAAImR,EAAK45H,eAAgBnkJ,KAAKmjJ,sBAAsB/pI,IAAImR,EAAK65H,kBAAmBpkJ,KAAKqjJ,kBAAkBjqI,IAAImR,EAAK85H,cAAerkJ,KAAKujJ,uBAAuBnqI,IAAImR,EAAK+5H,mBAAoBtkJ,KAAKyjJ,0BAA0BrqI,IAAImR,EAAKg6H,sBAAuBvkJ,KAAK2jJ,kBAAkBvqI,IAAImR,EAAKnS,gBACjjBpY,KAAKmsH,MAAM5hG,EAAKvkB,IAAM,CACpBukB,KAAMA,EACN6yD,WAAYA,IAIhBklE,EAAa3hJ,UAAU6jJ,WAAa,SAAUj6H,GAC5C,KAAUvqB,KAAK6jJ,aAAat5H,EAAKvkB,IAAK,wBAA0BukB,EAAKvkB,IACrEhG,KAAKmsH,MAAM5hG,EAAKvkB,IAAIo3E,WAAW37E,iBACxBzB,KAAKmsH,MAAM5hG,EAAKvkB,KAGzBs8I,EAAa3hJ,UAAUkjJ,aAAe,SAAU79I,GAC9C,OAAOhG,KAAKmsH,MAAM5iH,eAAevD,IAGnCs8I,EAAa3hJ,UAAU8jJ,QAAU,SAAUz+I,GACzC,IAAIqM,EAASrS,KAAKmsH,MAAMnmH,GACxB,OAAOqM,EAASA,EAAOkY,KAAO,MAGhC+3H,EAAa3hJ,UAAUc,QAAU,WAC/BzB,KAAKmsH,MAAQ,KAEbnsH,KAAKuiJ,iBAAiB9gJ,UAEtBzB,KAAKyiJ,cAAchhJ,UAEnBzB,KAAK2iJ,iBAAiBlhJ,UAEtBzB,KAAK6iJ,gBAAgBphJ,UAErBzB,KAAK+iJ,mBAAmBthJ,UAExBzB,KAAKijJ,mBAAmBxhJ,UAExBzB,KAAKmjJ,sBAAsB1hJ,UAE3BzB,KAAKqjJ,kBAAkB5hJ,UAEvBzB,KAAKujJ,uBAAuB9hJ,UAE5BzB,KAAKyjJ,0BAA0BhiJ,UAE/BzB,KAAK4oC,aAAc,GAGrB05G,EAAa3hJ,UAAUqrF,WAAa,WAClC,OAAOhsF,KAAK4oC,aAGP05G,EAlFT,GAuFI,GAEJ,WACE,SAASoC,EAAK1+I,EAAI0kF,EAAUioB,EAASyvC,EAAM9wH,GACzCtxB,KAAK2kJ,aAAe,IAAI,KACxB3kJ,KAAK4kJ,aAAe,IAAI,KACxB5kJ,KAAK8jJ,YAAc9jJ,KAAK4kJ,aAAa/jJ,MACrCb,KAAK6kJ,UAAY,IAAI,KACrB7kJ,KAAK+jJ,SAAW/jJ,KAAK6kJ,UAAUhkJ,MAC/Bb,KAAK8kJ,aAAe,IAAI,KACxB9kJ,KAAKgkJ,YAAchkJ,KAAK8kJ,aAAajkJ,MACrCb,KAAK+kJ,YAAc,IAAI,KACvB/kJ,KAAKikJ,WAAajkJ,KAAK+kJ,YAAYlkJ,MACnCb,KAAKglJ,eAAiB,IAAI,KAC1BhlJ,KAAKkkJ,cAAgBlkJ,KAAKglJ,eAAenkJ,MACzCb,KAAKilJ,eAAiB,IAAI,KAC1BjlJ,KAAKmkJ,cAAgBnkJ,KAAKilJ,eAAepkJ,MACzCb,KAAKklJ,kBAAoB,IAAI,KAC7BllJ,KAAKokJ,iBAAmBpkJ,KAAKklJ,kBAAkBrkJ,MAC/Cb,KAAKmlJ,cAAgB,IAAI,KACzBnlJ,KAAKqkJ,aAAerkJ,KAAKmlJ,cAActkJ,MACvCb,KAAKolJ,mBAAqB,IAAI,KAC9BplJ,KAAKskJ,kBAAoBtkJ,KAAKolJ,mBAAmBvkJ,MACjDb,KAAKqlJ,sBAAwB,IAAI,KACjCrlJ,KAAKukJ,qBAAuBvkJ,KAAKqlJ,sBAAsBxkJ,MACvDb,KAAKslJ,cAAgB,IAAI,KACzBtlJ,KAAKoY,aAAepY,KAAKslJ,cAAczkJ,MACvCb,KAAK0qF,SAAWA,EAChB1qF,KAAK2yG,QAAUA,EACf3yG,KAAKoiJ,KAAOA,EACZpiJ,KAAKsxB,QAAUA,EACftxB,KAAKgG,GAAKA,EACVhG,KAAK0qF,SAAS3kF,SAAS/F,MACvBA,KAAKulJ,iBAAmBvlJ,KAAK2yG,QAAQgqC,WAAWzjE,YAAYl5E,KAAK2yG,QAAQ2oC,KAAMt7I,KAAKsxB,SACpFtxB,KAAKwlJ,sBAAuB,EAC5BxlJ,KAAKogD,OAAS,KACdpgD,KAAKmgD,SAAW,KAChBngD,KAAKihB,KAAO,KACZjhB,KAAKysD,WAAa,KAClBzsD,KAAKylJ,UAAY,KACjBzlJ,KAAK0lJ,OAAS,GACd1lJ,KAAKi3C,MAAQ,EACbj3C,KAAKkxD,YAAclxD,KAAK2yG,QAAQgqC,WAAWgJ,mBAAoB3lJ,KAAK2yG,QAAQgqC,WAAWgJ,iBAAiB3lJ,KAAK2yG,QAAQ2oC,KAAMhqH,IAE3HtxB,KAAK2kJ,aAAa5iJ,KAAK/B,MAEvBA,KAAK0gH,QAAU1gH,KAAK4vC,aACpB5vC,KAAK8jB,OAAS9jB,KAAK4lJ,aACnB5lJ,KAAK4oC,aAAc,EA6frB,OA1fA87G,EAAK/jJ,UAAUklJ,WAAa,WAC1B,OAAO7lJ,KAAKsxB,SAGdozH,EAAK/jJ,UAAUu4E,YAAc,WAC3B,OAAOl5E,KAAKulJ,kBAGdb,EAAK/jJ,UAAUmlJ,SAAW,WACxB,OAAO9lJ,KAAKi3C,OAGdytG,EAAK/jJ,UAAUymB,UAAY,WACzB,OAAOpnB,KAAK0gH,SAGdgkC,EAAK/jJ,UAAUolJ,WAAa,SAAUxjJ,GACpCvC,KAAK0gH,QAAUn+G,GAGjBmiJ,EAAK/jJ,UAAUk+I,WAAa,WAC1B,OAAO7+I,KAAKkxD,UAKdwzF,EAAK/jJ,UAAUqlJ,aAAe,SAAUzjJ,GACtCvC,KAAKkxD,SAAW3uD,GAGlBmiJ,EAAK/jJ,UAAUkhE,OAAS,SAAUokF,QACZ,IAAhBA,IACFA,EAAc,MAGhB,IAAIC,EAAY,CACd37H,KAAMvqB,KACNimJ,YAAaA,GAGfjmJ,KAAK4kJ,aAAa7iJ,KAAKmkJ,IAGzBxB,EAAK/jJ,UAAU6mF,OAAS,WACtB,IAAIpmF,EAAQpB,KAEZ,OAAIA,KAAK6+I,eAAiB7+I,KAAKulJ,kBAAoBvlJ,KAAKoiJ,KAAKD,SAASniJ,MAC7D2c,QAAQC,SAAQ,GAGZ5c,KAAKoiJ,KAAK13I,IAAI1K,KAAM,WAC/B,GAAIoB,EAAMy9I,eAAiBz9I,EAAMmkJ,iBAC/B,OAAO5oI,QAAQC,SAAQ,GAGzB,IAAIspI,EAAY,CACd37H,KAAMnpB,GAYR,OARAA,EAAMyjJ,UAAU9iJ,KAAKmkJ,IAEjB9kJ,EAAMokJ,qBACCpkJ,EAAM+kJ,iBAAgB,GAAO,GAAM,GAEnCxpI,QAAQC,QAAQ,OAGbtZ,KAAK,WAKjB,OAJAlC,EAAM4kJ,cAAa,GAEnB5kJ,EAAM0jJ,aAAa/iJ,KAAKmkJ,IAEjB,MAGG5iJ,KAAK,SAAUsT,GAC3B,OAAIxV,EAAM4qF,eAKN5qF,EAAMuxG,QAAQxwG,QAAQikJ,0BAA4BxvI,GAA0B,OAArBxV,EAAMqrD,YAAuBrrD,EAAMqrD,aAAerrD,EAAMqkJ,WAAarkJ,EAAMqrD,WAAWrlC,YACxIhmB,EAAMqrD,WAAW+6B,SAASlkF,KAAK,WACpC,OAAO,IAIJsT,MAIX8tI,EAAK/jJ,UAAUm+I,SAAW,SAAUuH,GAClC,IAAIjlJ,EAAQpB,KAMZ,QAJkB,IAAdqmJ,IACFA,GAAY,GAGVA,EAAW,CACb,IAAIC,EAA4B3pI,QAAQC,QAAQ,MAMhD,OALA5c,KAAKumJ,aAAa,SAAU7nG,GAC1B4nG,EAA4BA,EAA0BhjJ,KAAK,WACzD,OAAOo7C,EAAMogG,UAAS,OAGnBwH,EAA0BhjJ,KAAK,WACpC,OAAOlC,EAAM09I,UAAS,KAGxB,OAAK9+I,KAAK6+I,cAAgB7+I,KAAKoiJ,KAAKD,SAASniJ,MACpC2c,QAAQC,SAAQ,GAGlB5c,KAAKoiJ,KAAK13I,IAAI1K,KAAM,WACzB,IAAIkmJ,EAAY,CACd37H,KAAMnpB,GASR,OANAA,EAAM2jJ,YAAYhjJ,KAAKmkJ,GAEvB9kJ,EAAM4kJ,cAAa,GAEnB5kJ,EAAM4jJ,eAAejjJ,KAAKmkJ,GAEnBvpI,QAAQC,SAAQ,MAK7B8nI,EAAK/jJ,UAAU6lJ,SAAW,SAAUC,GAClC,IAAIP,EAAY,CACd37H,KAAMvqB,KACNymJ,MAAOA,GAETzmJ,KAAK0lJ,OAAOe,IAAS,EAErBzmJ,KAAKilJ,eAAeljJ,KAAKmkJ,IAG3BxB,EAAK/jJ,UAAU+lJ,YAAc,SAAUD,GACrC,IAAIP,EAAY,CACd37H,KAAMvqB,KACNymJ,MAAOA,UAEFzmJ,KAAK0lJ,OAAOe,GAEnBzmJ,KAAKklJ,kBAAkBnjJ,KAAKmkJ,IAG9BxB,EAAK/jJ,UAAUgmJ,SAAW,SAAUF,GAClC,OAAOzmJ,KAAK0lJ,OAAOe,KAAU,GAG/B/B,EAAK/jJ,UAAUimJ,aAAe,WAC5B,IACIH,EADAp0I,EAAS,GAGb,IAAKo0I,KAASzmJ,KAAK0lJ,OACb1lJ,KAAK0lJ,OAAOn8I,eAAek9I,IAAUzmJ,KAAK0lJ,OAAOe,IACnDp0I,EAAOjE,KAAKq4I,GAIhB,OAAOp0I,GAGTqyI,EAAK/jJ,UAAU24E,UAAY,WACzB,OAAOt5E,KAAK8jB,QAGd4gI,EAAK/jJ,UAAUwlJ,gBAAkB,SAAUE,EAAWQ,EAAM/iG,GAC1D,IAAI1iD,EAAQpB,KAUZ,QARa,IAAT6mJ,IACFA,GAAO,QAGK,IAAV/iG,IACFA,GAAQ,IAGLA,IAAU9jD,KAAK6+I,aAAc,CAOhC,OANgC,SAASiI,EAA0Bv8H,GACjEA,EAAKi7H,sBAAuB,EAC5Bj7H,EAAKg8H,aAAaO,GAGpBA,CAA0B9mJ,MACnB2c,QAAQC,QAAQ5c,MAGzBA,KAAKwlJ,sBAAuB,EAE5B,IAAIuB,EAAY,WACd,IAAIb,EAAY,CACd37H,KAAMnpB,EACN4lJ,SAAUH,GAsEZ,OAnEAzlJ,EAAMgkJ,mBAAmBrjJ,KAAKmkJ,IAI1B9kJ,EAAMmkJ,iBACUnkJ,EAAMuxG,QAAQgqC,WAAWvjE,YAAYh4E,EAAMuxG,QAAQ2oC,KAAMl6I,EAAMkwB,SAE/D3U,QAAQC,QAAQ,KAGPtZ,KAAK,SAAUs9C,GAC1C,GAAIx/C,EAAM4qF,cAAgB5qF,EAAMspF,SAASsB,aACvC,OAAOrvE,QAAQC,QAAQ,MAGzB,IAAKvT,MAAM2T,QAAQ4jC,GACjB,OAAOjkC,QAAQmE,OAAO,IAAIg3B,MAAM,wCAGlC8I,EAAYA,EAAgBA,EAAStT,MAAM,GAApB,GACvBsT,EAAWx/C,EAAM8N,KAAK0xC,GAGtB,IAFA,IAAIqmG,EAAa,GAEW,OAArB7lJ,EAAMqrD,YACXw6F,EAAW7lJ,EAAMqrD,WAAWzmD,IAAM5E,EAAMqrD,WAExCrrD,EAAMsrD,YAAYtrD,EAAMqrD,YAG1B,IAAK,IAAIj+C,EAAI,EAAGC,EAAMmyC,EAASr0C,OAAQiC,EAAIC,EAAKD,IAAK,CACnD,IAAI8iB,EAAUsvB,EAASpyC,GAEnBxI,EAAK5E,EAAMuxG,QAAQgqC,WAAWhwI,MAAMvL,EAAMuxG,QAAQ2oC,KAAMhqH,GAExD/G,EAAO08H,EAAWjhJ,IAAO,IAAI0+I,EAAK1+I,EAAI5E,EAAMspF,SAAUtpF,EAAMuxG,QAASvxG,EAAMghJ,KAAM9wH,GACrF/G,EAAK+G,QAAUA,EAEX+0H,IACF97H,EAAKi7H,qBAAuBa,UAGvBY,EAAWjhJ,GAElB5E,EAAM8lJ,SAAS38H,GAGjB,IAAK,IAAI48H,KAAeF,EAClBA,EAAW19I,eAAe49I,IAC5BF,EAAWE,GAAa1lJ,UAI5B,OAAI4kJ,EACK1pI,QAAQR,IAAI/a,EAAMgmJ,aAAa,SAAU1oG,GAC9C,OAAOA,EAAMqoG,UAAUV,GAAW,MAG7B1pI,QAAQR,IAAI/a,EAAMgmJ,aAAa,SAAU1oG,GAC9C,OAAIA,EAAMmgG,cAAgBngG,EAAM8mG,qBACvB9mG,EAAMqoG,UAAUV,GAAW,IAElC3nG,EAAM2oG,mBACC1qI,QAAQC,QAAQ,YAKjBtZ,UAAKtB,EAAW,MAAmBsB,KAAK,WACpD,OAAOlC,EAAMikJ,sBAAsBtjJ,KAAKmkJ,MAI5C,OAAOW,EAAOE,IAAc/mJ,KAAKoiJ,KAAK13I,IAAI1K,KAAM+mJ,IAGlDrC,EAAK/jJ,UAAUomJ,UAAY,SAAUV,EAAWQ,GAW9C,YAVa,IAATA,IACFA,GAAO,GAGT7mJ,KAAKulJ,iBAAmBvlJ,KAAK2yG,QAAQgqC,WAAWzjE,YAAYl5E,KAAK2yG,QAAQ2oC,KAAMt7I,KAAKsxB,SACpFtxB,KAAK8jB,OAAS9jB,KAAK4lJ,aACnB5lJ,KAAKqnJ,mBAELrnJ,KAAKmlJ,cAAcpjJ,KAAK/B,MAEjBA,KAAKmmJ,gBAAgBE,EAAWQ,IAGzCnC,EAAK/jJ,UAAU0mJ,iBAAmB,WAChCrnJ,KAAK+lJ,WAAW/lJ,KAAK4vC,eAGvB80G,EAAK/jJ,UAAU2mJ,QAAU,SAAUjB,GACjC,OAAOrmJ,KAAK+mJ,UAAUV,IAGxB3B,EAAK/jJ,UAAU4mJ,aAAe,WAC5B,OAAO,IAAIC,GAAcxnJ,OAG3B0kJ,EAAK/jJ,UAAU+Z,WAAa,SAAUF,GACpC,OAAOxa,KAAKynJ,aAAajtI,IAAUA,EAAMitI,aAAaznJ,OAGxD0kJ,EAAK/jJ,UAAU8mJ,aAAe,SAAUC,GAGtC,IAFA,IAAIn9H,EAAOm9H,EAEJn9H,GAAM,CACX,GAAIA,EAAKvkB,KAAOhG,KAAKgG,GACnB,OAAO,EAGTukB,EAAOA,EAAK61B,OAGd,OAAO,GAGTskG,EAAK/jJ,UAAUumJ,SAAW,SAAU38H,EAAMo9H,QACtB,IAAdA,IACFA,EAAY3nJ,KAAKylJ,WAGnB,IAAIx2I,EAA8B,OAApBjP,KAAKysD,WACfm7F,EAAuB,OAAdD,EACTE,EAASF,IAAc3nJ,KAAKylJ,UAEhC,GAAIx2I,EACFjP,KAAKysD,WAAazsD,KAAKylJ,UAAYl7H,EACnCA,EAAKtJ,KAAOsJ,EAAK41B,SAAW,UACvB,GAAIynG,EAAQ,CACjB,IAAK5nJ,KAAKysD,WACR,MAAM,IAAI3U,MAAM,sBAGlB93C,KAAKysD,WAAWtM,SAAW51B,EAC3BA,EAAKtJ,KAAOjhB,KAAKysD,WACjBliC,EAAK41B,SAAW,KAChBngD,KAAKysD,WAAaliC,OACb,GAAIs9H,EAAQ,CACjB,IAAK7nJ,KAAKylJ,UACR,MAAM,IAAI3tG,MAAM,sBAGlB93C,KAAKylJ,UAAUxkI,KAAOsJ,EACtBA,EAAKtJ,KAAO,KACZsJ,EAAK41B,SAAWngD,KAAKylJ,UACrBzlJ,KAAKylJ,UAAYl7H,MACZ,CAGL,GAFAA,EAAK41B,SAAWwnG,GAEXA,EACH,MAAM,IAAI7vG,MAAM,sBAKlB,GAFAvtB,EAAKtJ,KAAO0mI,EAAU1mI,MAEjB0mI,EAAU1mI,KACb,MAAM,IAAI62B,MAAM,sBAGlB6vG,EAAU1mI,KAAKk/B,SAAW51B,EAC1Bo9H,EAAU1mI,KAAOsJ,EAGnBA,EAAK61B,OAASpgD,KACduqB,EAAK0sB,MAAQj3C,KAAKi3C,MAAQ,GAG5BytG,EAAK/jJ,UAAU+rD,YAAc,SAAUniC,GACrC,IAAIu9H,EAAe9nJ,KAAKysD,aAAeliC,EACnCw9H,EAAc/nJ,KAAKylJ,YAAcl7H,EAErC,GAAIu9H,GAAgBC,EAClB/nJ,KAAKysD,WAAazsD,KAAKylJ,UAAY,UAC9B,GAAIqC,EAAc,CACvB,IAAKv9H,EAAKtJ,KACR,MAAM,IAAI62B,MAAM,sBAGlBvtB,EAAKtJ,KAAKk/B,SAAW,KACrBngD,KAAKysD,WAAaliC,EAAKtJ,UAClB,GAAI8mI,EAAa,CACtB,IAAKx9H,EAAK41B,SACR,MAAM,IAAIrI,MAAM,sBAGlBvtB,EAAK41B,SAASl/B,KAAO,KACrBjhB,KAAKylJ,UAAYl7H,EAAK41B,aACjB,CACL,IAAK51B,EAAKtJ,KACR,MAAM,IAAI62B,MAAM,sBAKlB,GAFAvtB,EAAKtJ,KAAKk/B,SAAW51B,EAAK41B,UAErB51B,EAAK41B,SACR,MAAM,IAAIrI,MAAM,sBAGlBvtB,EAAK41B,SAASl/B,KAAOsJ,EAAKtJ,KAG5BsJ,EAAK61B,OAAS,KACd71B,EAAK0sB,MAAQ+wG,KAGftD,EAAK/jJ,UAAU4lJ,aAAe,SAAUtjC,GAItC,IAHA,IACIhiG,EADAy9B,EAAQ1+C,KAAKysD,WAGV/N,GACLz9B,EAAOy9B,EAAMz9B,KACbgiG,EAAGvkE,GACHA,EAAQz9B,GAIZyjI,EAAK/jJ,UAAUymJ,aAAe,SAAUnkC,GACtC,IAAI5wG,EAAS,GAIb,OAHArS,KAAKumJ,aAAa,SAAU7nG,GAC1BrsC,EAAOjE,KAAK60G,EAAGvkE,MAEVrsC,GAGTqyI,EAAK/jJ,UAAUuO,KAAO,SAAU0xC,GAC9B,IAAIx/C,EAAQpB,KAERioJ,EAASjoJ,KAAK2yG,QAAQs1C,OAE1B,OAAIA,EACKrnG,EAAS1xC,KAAK,SAAUoiB,EAAS42H,GACtC,OAAOD,EAAO94I,QAAQ/N,EAAMuxG,QAAQ2oC,KAAMhqH,EAAS42H,KAIhDtnG,GAKT8jG,EAAK/jJ,UAAUilJ,WAAa,WAC1B,OAAK5lJ,KAAK2yG,QAAQj6D,SAIX14C,KAAK2yG,QAAQj6D,SAAS4gC,UAAUt5E,KAAK2yG,QAAQ2oC,KAAMt7I,KAAKsxB,SAHtD,GAQXozH,EAAK/jJ,UAAUivC,WAAa,WAC1B,QAAK5vC,KAAK2yG,QAAQ72F,QAIX9b,KAAK2yG,QAAQ72F,OAAOsL,UAAUpnB,KAAK2yG,QAAQ2oC,KAAMt7I,KAAKsxB,UAG/DozH,EAAK/jJ,UAAUqrF,WAAa,WAC1B,OAAOhsF,KAAK4oC,aAGd87G,EAAK/jJ,UAAUc,QAAU,WACvBzB,KAAKumJ,aAAa,SAAU7nG,GAC1B,OAAOA,EAAMj9C,YAEfzB,KAAKogD,OAAS,KACdpgD,KAAKmgD,SAAW,KAChBngD,KAAKihB,KAAO,KACZjhB,KAAKysD,WAAa,KAClBzsD,KAAKylJ,UAAY,KAEjBzlJ,KAAKslJ,cAAcvjJ,KAAK/B,MAExBA,KAAK0qF,SAAS85D,WAAWxkJ,MAEzBA,KAAK2kJ,aAAaljJ,UAElBzB,KAAK4kJ,aAAanjJ,UAElBzB,KAAK6kJ,UAAUpjJ,UAEfzB,KAAK8kJ,aAAarjJ,UAElBzB,KAAK+kJ,YAAYtjJ,UAEjBzB,KAAKglJ,eAAevjJ,UAEpBzB,KAAKilJ,eAAexjJ,UAEpBzB,KAAKklJ,kBAAkBzjJ,UAEvBzB,KAAKmlJ,cAAc1jJ,UAEnBzB,KAAKolJ,mBAAmB3jJ,UAExBzB,KAAKqlJ,sBAAsB5jJ,UAE3BzB,KAAKslJ,cAAc7jJ,UAEnBzB,KAAK4oC,aAAc,GAGd87G,EA3iBT,GAgjBIyD,GAEJ,SAAUp+I,GAGR,SAASo+I,EAASniJ,EAAI0kF,EAAUioB,EAASyvC,EAAM9wH,GAC7C,OAAOvnB,EAAOE,KAAKjK,KAAMgG,EAAI0kF,EAAUioB,EAASyvC,EAAM9wH,IAAYtxB,KA+BpE,OAlCA,GAAUmoJ,EAAUp+I,GAMpBo+I,EAASxnJ,UAAUymB,UAAY,WAC7B,OAAO,GAGT+gI,EAASxnJ,UAAUolJ,WAAa,SAAUxjJ,KAG1C4lJ,EAASxnJ,UAAUk+I,WAAa,WAC9B,OAAO,GAKTsJ,EAASxnJ,UAAUqlJ,aAAe,SAAUzjJ,KAK5C4lJ,EAASxnJ,UAAUilJ,WAAa,WAC9B,OAAO,GAKTuC,EAASxnJ,UAAUivC,WAAa,WAC9B,OAAO,GAGFu4G,EAnCT,CAoCE,IAEEX,GAEJ,WACE,SAASA,EAAcj9H,EAAM69H,QACP,IAAhBA,IACFA,GAAc,GAGhBpoJ,KAAKuqB,KAAOA,EACZvqB,KAAKuT,MAAQ60I,EAAc79H,EAAO,KA8FpC,OA3FAi9H,EAAca,iBAAmB,SAAU99H,GACzC,OAAKA,EAIDA,aAAgB49H,GACXX,EAAca,iBAAiB99H,EAAKk7H,WAGxCl7H,EAAKnD,YAILmD,EAAKs0H,cAAmC,OAAnBt0H,EAAKk7H,UAIxB+B,EAAca,iBAAiB99H,EAAKk7H,WAHlCl7H,EAJAi9H,EAAca,iBAAiB99H,EAAK41B,UARpC,MAkBXqnG,EAAc7mJ,UAAUq+C,QAAU,WAChC,OAAOh/C,KAAKuqB,MAAQ,MAGtBi9H,EAAc7mJ,UAAUsgB,KAAO,WAC7B,GAAIjhB,KAAKuqB,KACP,GACE,IAAKvqB,KAAKuqB,gBAAgB49H,IAAYnoJ,KAAKuqB,KAAKnD,aAAepnB,KAAKuqB,KAAKs0H,eAAiB7+I,KAAKuqB,KAAKkiC,WAClGzsD,KAAKuqB,KAAOvqB,KAAKuqB,KAAKkiC,gBACjB,GAAIzsD,KAAKuqB,OAASvqB,KAAKuT,MAC5BvT,KAAKuqB,KAAO,SACP,CAEL,KAAOvqB,KAAKuqB,MAAQvqB,KAAKuqB,OAASvqB,KAAKuT,QAAUvT,KAAKuqB,KAAKtJ,MACzDjhB,KAAKuqB,KAAOvqB,KAAKuqB,KAAK61B,OAGpBpgD,KAAKuqB,OAASvqB,KAAKuT,QACrBvT,KAAKuqB,KAAO,MAGdvqB,KAAKuqB,KAAQvqB,KAAKuqB,KAAcvqB,KAAKuqB,KAAKtJ,KAAjB,YAEpBjhB,KAAKuqB,OAASvqB,KAAKuqB,KAAKnD,aAGnC,OAAOpnB,KAAKuqB,MAAQ,MAGtBi9H,EAAc7mJ,UAAUw/C,SAAW,WACjC,GAAIngD,KAAKuqB,KACP,EAAG,CACD,IAAI41B,EAAWqnG,EAAca,iBAAiBroJ,KAAKuqB,KAAK41B,UAEpDA,EACFngD,KAAKuqB,KAAO41B,EACHngD,KAAKuqB,KAAK61B,QAAUpgD,KAAKuqB,KAAK61B,SAAWpgD,KAAKuT,OAASvT,KAAKuqB,KAAK61B,OAAOh5B,YACjFpnB,KAAKuqB,KAAOvqB,KAAKuqB,KAAK61B,OAEtBpgD,KAAKuqB,KAAO,WAEPvqB,KAAKuqB,OAASvqB,KAAKuqB,KAAKnD,aAGnC,OAAOpnB,KAAKuqB,MAAQ,MAGtBi9H,EAAc7mJ,UAAUy/C,OAAS,WAC/B,GAAIpgD,KAAKuqB,KAAM,CACb,IAAI+9H,EAAWtoJ,KAAKuqB,KAAK61B,OAErBkoG,GAAYA,IAAatoJ,KAAKuT,OAAS+0I,EAASlhI,YAClDpnB,KAAKuqB,KAAO+9H,EAEZtoJ,KAAKuqB,KAAO,KAIhB,OAAOvqB,KAAKuqB,MAAQ,MAGtBi9H,EAAc7mJ,UAAU0/C,MAAQ,WAG9B,OAFArgD,KAAKuqB,KAAOvqB,KAAKuT,MACjBvT,KAAKihB,OACEjhB,KAAKuqB,MAAQ,MAGtBi9H,EAAc7mJ,UAAU2/C,KAAO,WAC7B,OAAOknG,EAAca,iBAAiBroJ,KAAKuT,QAGtCi0I,EArGT,GA0GI,GAEJ,WACE,SAASe,EAAU51C,GACjB3yG,KAAKwoJ,YAAc,IAAI,KACvBxoJ,KAAKyoJ,WAAazoJ,KAAKwoJ,YAAY3nJ,MACnCb,KAAK0oJ,eAAiB,IAAI,KAC1B1oJ,KAAK2oJ,cAAgB3oJ,KAAK0oJ,eAAe7nJ,MACzCb,KAAK4oJ,WAAa,IAAI,KACtB5oJ,KAAK6oJ,UAAY7oJ,KAAK4oJ,WAAW/nJ,MACjCb,KAAKmlJ,cAAgB,IAAI,KACzBnlJ,KAAKqkJ,aAAerkJ,KAAKmlJ,cAActkJ,MACvCb,KAAK8oJ,gBAAkB,IAAI,KAC3B9oJ,KAAK+oJ,eAAiB/oJ,KAAK8oJ,gBAAgBjoJ,MAC3Cb,KAAKgpJ,aAAe,IAAI,KACxBhpJ,KAAK8iI,YAAc9iI,KAAKgpJ,aAAanoJ,MACrCb,KAAKipJ,YAAc,IAAI,KACvBjpJ,KAAK2rD,WAAa3rD,KAAKipJ,YAAYpoJ,MACnCb,KAAKuiJ,iBAAmB,IAAI,KAC5BviJ,KAAKwiJ,gBAAkBxiJ,KAAKuiJ,iBAAiB1hJ,MAC7Cb,KAAKyiJ,cAAgB,IAAI,KACzBziJ,KAAK0iJ,aAAe1iJ,KAAKyiJ,cAAc5hJ,MACvCb,KAAK2iJ,iBAAmB,IAAI,KAC5B3iJ,KAAK4iJ,gBAAkB5iJ,KAAK2iJ,iBAAiB9hJ,MAC7Cb,KAAK6iJ,gBAAkB,IAAI,KAC3B7iJ,KAAK8iJ,eAAiB9iJ,KAAK6iJ,gBAAgBhiJ,MAC3Cb,KAAK+iJ,mBAAqB,IAAI,KAC9B/iJ,KAAKgjJ,kBAAoBhjJ,KAAK+iJ,mBAAmBliJ,MACjDb,KAAKijJ,mBAAqB,IAAI,KAC9BjjJ,KAAKkjJ,kBAAoBljJ,KAAKijJ,mBAAmBpiJ,MACjDb,KAAKmjJ,sBAAwB,IAAI,KACjCnjJ,KAAKojJ,qBAAuBpjJ,KAAKmjJ,sBAAsBtiJ,MACvDb,KAAKqjJ,kBAAoB,IAAI,KAC7BrjJ,KAAKsjJ,iBAAmBtjJ,KAAKqjJ,kBAAkBxiJ,MAC/Cb,KAAKujJ,uBAAyB,IAAI,KAClCvjJ,KAAKwjJ,sBAAwBxjJ,KAAKujJ,uBAAuB1iJ,MACzDb,KAAKyjJ,0BAA4B,IAAI,KACrCzjJ,KAAK0jJ,yBAA2B1jJ,KAAKyjJ,0BAA0B5iJ,MAC/Db,KAAK2jJ,kBAAoB,IAAI,KAC7B3jJ,KAAK2yG,QAAUA,EACf3yG,KAAKqiD,MAAQ,KACbriD,KAAKkpJ,cAAgB,GA6evB,OA1eAX,EAAU5nJ,UAAUomF,SAAW,SAAUz1D,GACvC,IAAIlwB,EAAQpB,KAERkmJ,EAAY,CACd37H,KAAMvqB,KAAKqiD,OAGbriD,KAAKwoJ,YAAYzmJ,KAAKmkJ,GAEtBlmJ,KAAK0qC,aAAa,IAClB1qC,KAAK0mF,WACL1mF,KAAKmpJ,eACLnpJ,KAAKoiJ,KAAO,IAAI,GAEZpiJ,KAAKqiD,OACPriD,KAAKqiD,MAAM5gD,UAGTzB,KAAK0qF,WACP1qF,KAAK0qF,SAASjpF,UACdzB,KAAKopJ,mBAAmB3nJ,WAG1BzB,KAAK0qF,SAAW,IAAI,GACpB1qF,KAAKuiJ,iBAAiBlgG,MAAQriD,KAAK0qF,SAAS83D,gBAC5CxiJ,KAAKyiJ,cAAcpgG,MAAQriD,KAAK0qF,SAASg4D,aACzC1iJ,KAAK2iJ,iBAAiBtgG,MAAQriD,KAAK0qF,SAASk4D,gBAC5C5iJ,KAAK6iJ,gBAAgBxgG,MAAQriD,KAAK0qF,SAASo4D,eAC3C9iJ,KAAK+iJ,mBAAmB1gG,MAAQriD,KAAK0qF,SAASs4D,kBAC9ChjJ,KAAKijJ,mBAAmB5gG,MAAQriD,KAAK0qF,SAASw4D,kBAC9CljJ,KAAKmjJ,sBAAsB9gG,MAAQriD,KAAK0qF,SAAS04D,qBACjDpjJ,KAAKqjJ,kBAAkBhhG,MAAQriD,KAAK0qF,SAAS44D,iBAC7CtjJ,KAAKujJ,uBAAuBlhG,MAAQriD,KAAK0qF,SAAS84D,sBAClDxjJ,KAAKyjJ,0BAA0BphG,MAAQriD,KAAK0qF,SAASg5D,yBACrD1jJ,KAAK2jJ,kBAAkBthG,MAAQriD,KAAK0qF,SAASk5D,iBAC7C5jJ,KAAKopJ,mBAAqBppJ,KAAK0qF,SAASk5D,iBAAiB,SAAUr5H,GACjE,OAAOA,EAAKq8H,eAAe94I,QAAQ,SAAU24I,GAC3C,cAAcrlJ,EAAM8nJ,cAAczC,GAAOl8H,EAAKvkB,QAGlD,IAAIA,EAAKhG,KAAK2yG,QAAQgqC,WAAWhwI,MAAM3M,KAAK2yG,QAAQ2oC,KAAMhqH,GAQ1D,OAPAtxB,KAAKqiD,MAAQ,IAAI8lG,GAASniJ,EAAIhG,KAAK0qF,SAAU1qF,KAAK2yG,QAAS3yG,KAAKoiJ,KAAM9wH,GACtE40H,EAAY,CACV37H,KAAMvqB,KAAKqiD,OAGbriD,KAAK0oJ,eAAe3mJ,KAAKmkJ,GAElBlmJ,KAAKsnJ,QAAQtnJ,KAAKqiD,QAG3BkmG,EAAU5nJ,UAAU4mF,SAAW,WAC7B,OAAOvnF,KAAKqiD,MAAQriD,KAAKqiD,MAAMwjG,aAAe,MAGhD0C,EAAU5nJ,UAAU2mJ,QAAU,SAAUh2H,EAAS+0H,GAC/C,IAAIjlJ,EAAQpB,UAEI,IAAZsxB,IACFA,EAAU,WAGM,IAAd+0H,IACFA,GAAY,GAGd,IAAI97H,EAAOvqB,KAAKykJ,QAAQnzH,GAExB,IAAK/G,EACH,OAAO5N,QAAQC,QAAQ,MAGzB,IAAIspI,EAAY,CACd37H,KAAMA,EACN87H,UAAWA,GAKb,OAFArmJ,KAAK4oJ,WAAW7mJ,KAAKmkJ,GAEd37H,EAAK+8H,QAAQjB,GAAW/iJ,KAAK,WAClClC,EAAM+jJ,cAAcpjJ,KAAKmkJ,MAI7BqC,EAAU5nJ,UAAU6mF,OAAS,SAAUl2D,GACrC,IAAI/G,EAAOvqB,KAAKykJ,QAAQnzH,GAExB,OAAK/G,EAIEA,EAAKi9D,SAHH7qE,QAAQC,SAAQ,IAM3B2rI,EAAU5nJ,UAAUm+I,SAAW,SAAUxtH,EAAS+0H,QAC9B,IAAdA,IACFA,GAAY,GAGd,IAAI97H,EAAOvqB,KAAKykJ,QAAQnzH,GAExB,OAAK/G,EAIEA,EAAKu0H,SAASuH,GAHZ1pI,QAAQC,SAAQ,IAM3B2rI,EAAU5nJ,UAAUy/I,gBAAkB,SAAU9uH,EAAS+0H,GAKvD,YAJkB,IAAdA,IACFA,GAAY,GAGPrmJ,KAAK6+I,WAAWvtH,GAAWtxB,KAAK8+I,SAASxtH,EAAS+0H,GAAarmJ,KAAKwnF,OAAOl2D,IAGpFi3H,EAAU5nJ,UAAUk+I,WAAa,SAAUvtH,GACzC,IAAI/G,EAAOvqB,KAAKykJ,QAAQnzH,GAExB,QAAK/G,GAIEA,EAAKs0H,cAGd0J,EAAU5nJ,UAAUkhE,OAAS,SAAUvwC,EAAS20H,GAC9C,IAAI7kJ,EAAQpB,KAMZ,YAJoB,IAAhBimJ,IACFA,EAAc,MAGTjmJ,KAAKqpJ,0BAA0B/3H,GAAShuB,KAAK,SAAU69G,GAC5D,IAAI9uG,EAASsK,QAAQC,QAAQ,MAM7B,OALAukG,EAAMrzG,QAAQ,SAAU5B,GACtBmG,EAASA,EAAO/O,KAAK,WACnB,OAAOlC,EAAMomF,OAAOt7E,OAGjBmG,IACN/O,KAAK,WACN,IAAIinB,EAAOnpB,EAAMqjJ,QAAQnzH,GAEzB,GAAI/G,EACF,OAAOA,EAAKs3C,OAAOokF,MAKzBsC,EAAU5nJ,UAAU0oJ,0BAA4B,SAAU/3H,GACxD,IAAIlwB,EAAQpB,KAEZ,OAAOA,KAAK2yG,QAAQgqC,WAAWC,UAAU58I,KAAK2yG,QAAQ2oC,KAAMhqH,GAAShuB,KAAK,SAAU88C,GAClF,OAAKA,EAIEh/C,EAAMioJ,0BAA0BjpG,GAAQ98C,KAAK,SAAU+O,GAE5D,OADAA,EAAOjE,KAAKgyC,GACL/tC,IALAsK,QAAQC,QAAQ,OAU7B2rI,EAAU5nJ,UAAUwoJ,aAAe,SAAU73H,EAASg4H,GACpDtpJ,KAAKupJ,UAAU,cAAej4H,EAAU,CAACA,GAAW,IACpD,IAAI40H,EAAY,CACdrqG,UAAW77C,KAAK4/I,eAChBtB,QAASgL,GAGXtpJ,KAAK8oJ,gBAAgB/mJ,KAAKmkJ,IAG5BqC,EAAU5nJ,UAAUi/I,aAAe,SAAU4J,QACrB,IAAlBA,IACFA,GAAgB,GAGlB,IAAIn3I,EAASrS,KAAKypJ,qBAAqB,cAAeD,GACtD,OAAyB,IAAlBn3I,EAAO9F,OAAe,KAAO8F,EAAO,IAG7Ck2I,EAAU5nJ,UAAU+pC,aAAe,SAAUkW,EAAU0oG,GACrDtpJ,KAAKupJ,UAAU,WAAY3oG,GAC3B,IAAIslG,EAAY,CACdh5I,UAAWlN,KAAKgW,eAChBsoI,QAASgL,GAGXtpJ,KAAKgpJ,aAAajnJ,KAAKmkJ,IAGzBqC,EAAU5nJ,UAAUqV,aAAe,SAAUwzI,GAK3C,YAJsB,IAAlBA,IACFA,GAAgB,GAGXxpJ,KAAKypJ,qBAAqB,WAAYD,IAG/CjB,EAAU5nJ,UAAU+lF,SAAW,SAAUp1D,EAASg4H,GAChDtpJ,KAAKupJ,UAAU,UAAWj4H,EAAU,CAACA,GAAW,IAChD,IAAI40H,EAAY,CACd1wI,MAAOxV,KAAKgnF,WACZs3D,QAASgL,GAGXtpJ,KAAKipJ,YAAYlnJ,KAAKmkJ,IAGxBqC,EAAU5nJ,UAAUqmF,SAAW,SAAUwiE,QACjB,IAAlBA,IACFA,GAAgB,GAGlB,IAAIn3I,EAASrS,KAAKypJ,qBAAqB,UAAWD,GAClD,OAAyB,IAAlBn3I,EAAO9F,OAAe,KAAO8F,EAAO,IAG7Ck2I,EAAU5nJ,UAAUylI,UAAY,SAAU3oF,EAAO6rG,QACjC,IAAV7rG,IACFA,EAAQ,GAOV,IAJA,IACIisG,EADAn/H,EAAOvqB,KAAKgnF,YAAchnF,KAAKqiD,MAE/BsnG,EAAM3pJ,KAAKunJ,aAAah9H,GAAM,GAEzB/b,EAAI,EAAGA,EAAIivC,IAClBisG,EAAWC,EAAI1oI,QADUzS,IAOzB+b,EAAOm/H,EAGT1pJ,KAAK0mF,SAASn8D,EAAM++H,IAGtBf,EAAU5nJ,UAAU+lI,cAAgB,SAAUjpF,EAAO6rG,QACrC,IAAV7rG,IACFA,EAAQ,GAOV,IAJA,IACImsG,EADAr/H,EAAOvqB,KAAKgnF,YAAchnF,KAAKqiD,MAE/BsnG,EAAM3pJ,KAAKunJ,aAAah9H,GAAM,GAEzB/b,EAAI,EAAGA,EAAIivC,IAClBmsG,EAAeD,EAAIxpG,YADM3xC,IAOzB+b,EAAOq/H,EAGT5pJ,KAAK0mF,SAASn8D,EAAM++H,IAGtBf,EAAU5nJ,UAAUq/I,YAAc,SAAUsJ,GAC1C,IAAI/+H,EAAOvqB,KAAKgnF,YAAchnF,KAAKqiD,MAE/BjC,EADMpgD,KAAKunJ,aAAah9H,GAAM,GACjB61B,SAEbA,GACFpgD,KAAK0mF,SAAStmC,EAAQkpG,IAI1Bf,EAAU5nJ,UAAUw/I,gBAAkB,SAAUmJ,GAC9C,IAAI/+H,EAAOvqB,KAAKykJ,QAAQzkJ,KAAKgnF,YAAchnF,KAAKqiD,OAC5CsnG,EAAM3pJ,KAAKunJ,aAAah9H,GAAM,GAC9BtJ,EAAO0oI,EAAI1oI,OACF0oI,EAAIvpG,WAEF71B,GACbvqB,KAAK0mF,SAASzlE,EAAMqoI,IAIxBf,EAAU5nJ,UAAUimI,WAAa,SAAU0iB,EAAc9nB,GACvDxhI,KAAK6pJ,SAAS,EAAGP,EAAc9nB,IAGjC+mB,EAAU5nJ,UAAUkpJ,SAAW,SAAUrnH,EAAO8mH,EAAc9nB,GAK5D,IAJA,IAAIsoB,EAAU9pJ,KAAK48I,UAAUpb,GACzBmoB,EAAM3pJ,KAAKunJ,aAAauC,GACxBv/H,EAAOo/H,EAAItpG,QAEN7xC,EAAI,EAAGA,EAAIg0B,EAAOh0B,IACzB+b,EAAOo/H,EAAI1oI,OAGTsJ,GACFvqB,KAAK0mF,SAASn8D,EAAM++H,IAIxBf,EAAU5nJ,UAAU2lI,UAAY,SAAUgjB,EAAc9nB,GACtD,IACIj3G,EADAu/H,EAAU9pJ,KAAK48I,UAAUpb,GAGzBA,GAAQsoB,EACVv/H,EAAOu/H,EAAQrE,UAGfl7H,EADUvqB,KAAKunJ,aAAauC,GACjBxpG,OAGT/1B,GACFvqB,KAAK0mF,SAASn8D,EAAM++H,IAIxBf,EAAU5nJ,UAAUi8I,UAAY,SAAUpb,GACxC,GAAIA,EAAM,CACR,IAAIuoB,EAAW/pJ,KAAKykJ,QAAQjjB,GAE5B,GAAIuoB,GAAYA,EAAS3pG,OACvB,OAAO2pG,EAAS3pG,OAIpB,OAAOpgD,KAAKykJ,QAAQzkJ,KAAKqiD,QAG3BkmG,EAAU5nJ,UAAU4mJ,aAAe,SAAUj2H,EAAS82H,GASpD,YARgB,IAAZ92H,IACFA,EAAU,WAGQ,IAAhB82H,IACFA,GAAc,GAGT,IAAIZ,GAAcxnJ,KAAKykJ,QAAQnzH,GAAU82H,IAGlDG,EAAU5nJ,UAAU8jJ,QAAU,SAAUnzH,GAKtC,YAJgB,IAAZA,IACFA,EAAU,MAGI,OAAZA,EACKtxB,KAAKqiD,MACH/wB,aAAmB,GACrBA,EACqB,kBAAZA,EACTtxB,KAAK0qF,SAAS+5D,QAAQnzH,GAEtBtxB,KAAK0qF,SAAS+5D,QAAQzkJ,KAAK2yG,QAAQgqC,WAAWhwI,MAAM3M,KAAK2yG,QAAQ2oC,KAAMhqH,KAIlFi3H,EAAU5nJ,UAAUqpJ,aAAe,SAAUvD,EAAO7lG,GAClD,IACIr2B,EACAvkB,EAFAmmH,EAAQnsH,KAAKkpJ,cAAczC,IAAU,GAIzC,GAAwB,IAApB7lG,EAASr0C,OAAc,CACzB,IAAKvG,KAAMmmH,EACLA,EAAM5iH,eAAevD,KACvBukB,EAAO4hG,EAAMnmH,IACR0gJ,YAAYD,UAIdzmJ,KAAKkpJ,cAAczC,QAE1B,IAAK,IAAIj4I,EAAI,EAAGC,EAAMmyC,EAASr0C,OAAQiC,EAAIC,EAAKD,KAC9C+b,EAAOvqB,KAAKykJ,QAAQ7jG,EAASpyC,OAG3B+b,EAAKm8H,YAAYD,UACVt6B,EAAM5hG,EAAKvkB,MAM1BuiJ,EAAU5nJ,UAAU4oJ,UAAY,SAAU9C,EAAO7lG,GAC/C,GAAwB,IAApBA,EAASr0C,OACXvM,KAAKgqJ,aAAavD,EAAO7lG,OACpB,CAIL,IAHA,IAAIurE,EAAQ,GACR5hG,OAAO,EAEF/b,EAAI,EAAGC,EAAMmyC,EAASr0C,OAAQiC,EAAIC,EAAKD,KAC9C+b,EAAOvqB,KAAKykJ,QAAQ7jG,EAASpyC,OAG3B29G,EAAM5hG,EAAKvkB,IAAMukB,GAIrB,IAAI0/H,EAAajqJ,KAAKkpJ,cAAczC,IAAU,GAC1CyD,EAAqB,GACrBlkJ,OAAK,EAET,IAAKA,KAAMikJ,EACLA,EAAW1gJ,eAAevD,KACxBmmH,EAAM5iH,eAAevD,UAChBmmH,EAAMnmH,GAEbkkJ,EAAmB97I,KAAK67I,EAAWjkJ,KAKzC,IAASwI,EAAI,EAAGC,EAAMy7I,EAAmB39I,OAAQiC,EAAIC,EAAKD,KACxD+b,EAAO2/H,EAAmB17I,IACrBk4I,YAAYD,UACVwD,EAAW1/H,EAAKvkB,IAGzB,IAAKA,KAAMmmH,EACLA,EAAM5iH,eAAevD,MACvBukB,EAAO4hG,EAAMnmH,IACRwgJ,SAASC,GACdwD,EAAWjkJ,GAAMukB,GAIrBvqB,KAAKkpJ,cAAczC,GAASwD,IAIhC1B,EAAU5nJ,UAAU8oJ,qBAAuB,SAAUhD,EAAO+C,GAC1D,IAEIxjJ,EAFA46C,EAAW,GACXurE,EAAQnsH,KAAKkpJ,cAAczC,IAAU,GAGzC,IAAKzgJ,KAAMmmH,EACLA,EAAM5iH,eAAevD,KAAQmmH,EAAMnmH,GAAIohB,aAAeoiI,IACxD5oG,EAASxyC,KAAK+9G,EAAMnmH,GAAI6/I,cAI5B,OAAOjlG,GAGT2nG,EAAU5nJ,UAAUc,QAAU,WACxBzB,KAAK0qF,WACP1qF,KAAK0qF,SAASjpF,UACdzB,KAAK0qF,SAAW,MAGlB1qF,KAAKwoJ,YAAY/mJ,UAEjBzB,KAAK0oJ,eAAejnJ,UAEpBzB,KAAK4oJ,WAAWnnJ,UAEhBzB,KAAKmlJ,cAAc1jJ,UAEnBzB,KAAK8oJ,gBAAgBrnJ,UAErBzB,KAAKgpJ,aAAavnJ,UAElBzB,KAAKipJ,YAAYxnJ,UAEjBzB,KAAKuiJ,iBAAiB9gJ,UAEtBzB,KAAKyiJ,cAAchhJ,UAEnBzB,KAAK2iJ,iBAAiBlhJ,UAEtBzB,KAAK6iJ,gBAAgBphJ,UAErBzB,KAAK+iJ,mBAAmBthJ,UAExBzB,KAAKijJ,mBAAmBxhJ,UAExBzB,KAAKmjJ,sBAAsB1hJ,UAE3BzB,KAAKqjJ,kBAAkB5hJ,UAEvBzB,KAAKujJ,uBAAuB9hJ,UAE5BzB,KAAKyjJ,0BAA0BhiJ,UAE/BzB,KAAK2jJ,kBAAkBliJ,WAGlB8mJ,EAphBT,G,wCC/5BI4B,GAEJ,WACE,SAASA,EAAwBvpG,GAC/B5gD,KAAK4gD,SAAWA,EAUlB,OAPAupG,EAAwBxpJ,UAAUiuB,OAAS,SAAUw7H,KAGrDD,EAAwBxpJ,UAAU0pJ,QAAU,WAC1C,OAAOrqJ,KAAK4gD,UAGPupG,EAZT,GAiBIG,GAEJ,WACE,SAASA,EAAgC1pG,GACvC5gD,KAAK4gD,SAAWA,EAUlB,OAPA0pG,EAAgC3pJ,UAAUiuB,OAAS,SAAUw7H,KAG7DE,EAAgC3pJ,UAAU0pJ,QAAU,WAClD,OAAOrqJ,KAAK4gD,UAGP0pG,EAZT,GAiBIC,GAEJ,WACE,SAASA,IACPvqJ,KAAKq1D,MAAQ,GACbr1D,KAAKwqJ,MAAQ,GAyBf,OAtBAD,EAAuB5pJ,UAAUiuB,OAAS,SAAUw7H,GAC9CA,EAAa/0F,QACfr1D,KAAKq1D,MAAQ,GACbhsD,MAAM1I,UAAUyN,KAAKkS,MAAMtgB,KAAKq1D,MAAO+0F,EAAa/0F,QAGlD+0F,EAAaI,QACfxqJ,KAAKwqJ,MAAQ,GACbnhJ,MAAM1I,UAAUyN,KAAKkS,MAAMtgB,KAAKwqJ,MAAOJ,EAAaI,OACpDxqJ,KAAKwqJ,MAAQxqJ,KAAKwqJ,MAAM1uI,OAAO,SAAUwF,GACvC,OAAOA,EAAEg6D,MAAQh6D,EAAEnH,SAKzBowI,EAAuB5pJ,UAAU0pJ,QAAU,WACzC,MAAO,CACLh1F,MAAOr1D,KAAKq1D,MACZm1F,MAAOxqJ,KAAKwqJ,QAITD,EA5BT,GClCI,GAEJ,WACE,SAASE,IACPzqJ,KAAK0qJ,UAAY,GACjB1qJ,KAAKynD,QAAU,GAiNjB,OA9MAgjG,EAAU9pJ,UAAUgqJ,iBAAmB,WACrC,IAAIrqG,EAAOtgD,KAAK0qJ,UAAU1qJ,KAAK0qJ,UAAUn+I,OAAS,GAClD,OAAQ+zC,EAAWA,EAAKz8B,IAAMy8B,EAAKx8B,OAApB,GAGjB2mI,EAAU9pJ,UAAUiqJ,cAAgB,SAAU5oI,EAAU6oI,QAClC,IAAhBA,IACFA,EAAc,MAGhB,IACInrE,EACAlxE,EAAG8sB,EACHwvH,EAHAvgI,EAAO,KAIPwgI,EAAW,EAEf,GAAoB,OAAhBF,EACFr8I,EAAI,EACJs8I,EAAY,MACP,CAIL,GAHAt8I,EAAIxO,KAAKynD,QAAQojG,GAAe,IAChCnrE,EAAW1/E,KAAK0qJ,UAAUl8I,EAAI,IAI5B,YADA6uC,QAAQ5rB,MAAM,0BAIhBq5H,EAAYprE,EAAS77D,IAAM67D,EAAS57D,OAMtC,IAHA,IAAIknI,EAAchrJ,KAAK0qJ,UAAU75H,OAAOggB,KAAK7wC,KAAK0qJ,UAAWl8I,EAAG,GAC5Dy8I,EAAgB,GAEb1gI,EAAOvI,EAASf,SACrBy+D,EAAW1/E,KAAKkrJ,eAAe3gI,IACtB1G,IAAMinI,EAAYC,EAC3B/qJ,KAAKynD,QAAQl9B,EAAKvkB,IAAMwI,IACxBy8I,EAAc78I,KAAKsxE,GACnBqrE,GAAYrrE,EAAS57D,OAKvB,IAFAknI,EAAY1qI,MAAMtgB,KAAK0qJ,UAAWO,GAE7B3vH,EAAI9sB,EAAG8sB,EAAIt7B,KAAK0qJ,UAAUn+I,OAAQ+uB,KACrCokD,EAAW1/E,KAAK0qJ,UAAUpvH,IACjBzX,KAAOknI,EAChB/qJ,KAAKynD,QAAQi4B,EAAS7yE,MAAM7G,IAAMs1B,EAGpC,IAAKA,EAAI2vH,EAAc1+I,OAAS,EAAG+uB,GAAK,EAAGA,IACzCt7B,KAAKmrJ,aAAaF,EAAc3vH,IAGlC,IAAKA,EAAIt7B,KAAK0qJ,UAAUn+I,OAAS,EAAG+uB,GAAK9sB,EAAG8sB,IAC1Ct7B,KAAKorJ,cAAcprJ,KAAK0qJ,UAAUpvH,IAGpC,OAAOyvH,GAGTN,EAAU9pJ,UAAUwqJ,aAAe,SAAU5gI,KAI7CkgI,EAAU9pJ,UAAU0qJ,cAAgB,SAAUrpI,GAO5C,IANA,IACI09D,EADA4rE,EAAS,KAET5tF,EAAa,KACblvD,EAAI,EACJu8I,EAAW,EAERO,EAAStpI,EAASf,QAAQ,CAI/B,GAHAzS,EAAIxO,KAAKynD,QAAQ6jG,KACjB5rE,EAAW1/E,KAAK0qJ,UAAUl8I,IAIxB,YADA6uC,QAAQ5rB,MAAM,0BAIhBs5H,GAAYrrE,EAAS57D,cACd9jB,KAAKynD,QAAQ6jG,GACpBtrJ,KAAKurJ,aAAa7rE,GAEC,OAAfhiB,IACFA,EAAalvD,GAIjB,GAAiB,IAAbu8I,GAAiC,OAAfrtF,EAMtB,IAFA19D,KAAK0qJ,UAAU75H,OAAO6sC,EAAYlvD,EAAIkvD,EAAa,GAE9ClvD,EAAIkvD,EAAYlvD,EAAIxO,KAAK0qJ,UAAUn+I,OAAQiC,KAC9CkxE,EAAW1/E,KAAK0qJ,UAAUl8I,IACjBqV,KAAOknI,EAChB/qJ,KAAKynD,QAAQi4B,EAAS7yE,MAAM7G,IAAMwI,EAClCxO,KAAKorJ,cAAc1rE,IAIvB+qE,EAAU9pJ,UAAU4qJ,aAAe,SAAUhhI,KAG7CkgI,EAAU9pJ,UAAU6qJ,iBAAmB,SAAUr/B,GAC/C,IAAI/qH,EAAQpB,KAERyrJ,EAAct/B,EAAMj9G,KAAK,SAAUkM,EAAGlS,GACxC,OAAO9H,EAAMqmD,QAAQrsC,EAAEpV,IAAM5E,EAAMqmD,QAAQv+C,EAAElD,MAE/ChG,KAAK0rJ,eAAe,IAAI,KAAcD,KAIxChB,EAAU9pJ,UAAU+qJ,eAAiB,SAAU1pI,GAQ7C,IAPA,IACI09D,EACAynD,EACA34H,EAHA+b,EAAO,KAIP+Q,EAAI,KACJqwH,EAAW,EAERphI,EAAOvI,EAASf,QAAQ,CAG7B,IAFAzS,EAAIxO,KAAKynD,QAAQl9B,EAAKvkB,IAEF,IAAb2lJ,GAAwB,OAANrwH,GAAcA,EAAI9sB,EAAG8sB,KAC5CokD,EAAW1/E,KAAK0qJ,UAAUpvH,IACjBzX,KAAO8nI,EAChB3rJ,KAAKorJ,cAAc1rE,GAGrBA,EAAW1/E,KAAK0qJ,UAAUl8I,GAC1B24H,EAAY58G,EAAK+uD,YACjBoG,EAAS77D,KAAO8nI,EAChBA,GAAYxkB,EAAYznD,EAAS57D,OACjC47D,EAAS57D,OAASqjH,EAClBnnI,KAAKorJ,cAAc1rE,GAAU,GAC7BpkD,EAAI9sB,EAAI,EAGV,GAAiB,IAAbm9I,GAAwB,OAANrwH,EACpB,KAAOA,EAAIt7B,KAAK0qJ,UAAUn+I,OAAQ+uB,KAChCokD,EAAW1/E,KAAK0qJ,UAAUpvH,IACjBzX,KAAO8nI,EAChB3rJ,KAAKorJ,cAAc1rE,IAKzB+qE,EAAU9pJ,UAAUyqJ,cAAgB,SAAU7gI,EAAMqhI,QAC9B,IAAhBA,IACFA,GAAc,IAKlBnB,EAAU9pJ,UAAUkrJ,QAAU,SAAU3gJ,GAMtC,IALA,IAEI4gJ,EACAvhI,EAHA/Y,EAAO,EACPE,EAAQ1R,KAAK0qJ,UAAUn+I,OAIpBiF,EAAOE,GAIZ,GAHAo6I,EAASzqJ,KAAKkjB,OAAO/S,EAAOE,GAAS,GAGjCxG,GAFJqf,EAAOvqB,KAAK0qJ,UAAUoB,IAEFjoI,IAClBnS,EAAQo6I,MACH,MAAI5gJ,GAAYqf,EAAK1G,IAAM0G,EAAKzG,QAOrC,OAAOgoI,EANP,GAAIt6I,IAASs6I,EACX,MAGFt6I,EAAOs6I,EAMX,OAAO9rJ,KAAK0qJ,UAAUn+I,QAGxBk+I,EAAU9pJ,UAAUorJ,WAAa,SAAU7gJ,GACzC,OAAO7J,KAAK8sE,IAAInuE,KAAK6rJ,QAAQ3gJ,GAAY,EAAGlL,KAAK0qJ,UAAUn+I,SAG7Dk+I,EAAU9pJ,UAAUqrJ,YAAc,SAAUxpH,GAC1C,OAAOxiC,KAAK0qJ,UAAUloH,IAGxBioH,EAAU9pJ,UAAUsrJ,UAAY,SAAU1hI,GACxC,OAAOvqB,KAAK0qJ,UAAU1qJ,KAAKynD,QAAQl9B,EAAK1d,MAAM7G,IAAM,IAAM,MAG5DykJ,EAAU9pJ,UAAUuqJ,eAAiB,SAAU3gI,GAC7C,MAAM,IAAIutB,MAAM,oBAGlB2yG,EAAU9pJ,UAAUc,QAAU,WAC5BzB,KAAK0qJ,UAAY,GACjB1qJ,KAAKynD,QAAU,IAGVgjG,EApNT,GCJI,GAAsC,WACxC,IAAIzhJ,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA0BtC0iJ,GAEJ,WACE,SAASA,EAAiB1nI,EAAM4Y,EAAMt6B,GACpC9C,KAAKmsJ,MAAQ3nI,EACbxkB,KAAKosJ,MAAQhvH,EACbp9B,KAAKqsJ,QAAUvpJ,EAgBjB,OAbAopJ,EAAiBvrJ,UAAUq8B,eAAiB,aAG5CkvH,EAAiBvrJ,UAAUs8B,gBAAkB,aAG7C78B,OAAOM,eAAewrJ,EAAiBvrJ,UAAW,SAAU,CAC1DC,IAAK,WACH,OAAOZ,KAAKqsJ,SAEdvrJ,YAAY,EACZC,cAAc,IAETmrJ,EApBT,GAyBII,GAEJ,SAAUviJ,GAGR,SAASuiJ,EAAsB/N,GAC7B,IAAIn9I,EAAQ2I,EAAOE,KAAKjK,KAAMu+I,EAAc/5H,KAAM+5H,EAAcnhH,KAAMmhH,EAAcz7I,SAAW9C,KAG/F,OADAoB,EAAMm9I,cAAgBA,EACfn9I,EAWT,OAjBA,GAAUkrJ,EAAuBviJ,GASjCuiJ,EAAsB3rJ,UAAUq8B,eAAiB,WAC/Ch9B,KAAKu+I,cAAcvhH,kBAGrBsvH,EAAsB3rJ,UAAUs8B,gBAAkB,WAChDj9B,KAAKu+I,cAActhH,mBAGdqvH,EAlBT,CAmBEJ,IAIEK,GAEJ,SAAUxiJ,GAGR,SAASwiJ,EAAyB/nI,EAAM4Y,EAAMmhH,GAC5C,IAAIn9I,EAAQ2I,EAAOE,KAAKjK,KAAMwkB,EAAM4Y,EAAMmhH,EAAcz7I,SAAW9C,KAGnE,OADAoB,EAAMm9I,cAAgBA,EACfn9I,EAWT,OAjBA,GAAUmrJ,EAA0BxiJ,GASpCwiJ,EAAyB5rJ,UAAUq8B,eAAiB,WAClDh9B,KAAKu+I,cAAcvhH,kBAGrBuvH,EAAyB5rJ,UAAUs8B,gBAAkB,WACnDj9B,KAAKu+I,cAActhH,mBAGdsvH,EAlBT,CAmBEL,I,UCnGE,GAAsC,WACxC,IAAIljJ,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GAoD1C,IAAIgjJ,GAEJ,WACE,SAASA,EAAS75C,GAChB3yG,KAAK2yG,QAAUA,EACf3yG,KAAKysJ,OAAS,CACZ,GAAI,IA8DR,OA1DAD,EAAS7rJ,UAAU+rJ,MAAQ,SAAUvyE,GACnC,IAAI9nE,EAASrS,KAAK2sJ,MAAMxyE,GAAY93D,MAEpC,IAAKhQ,EAAQ,CACX,IAAInR,EAAUuT,SAASyE,cAAc,OACrChY,EAAQyO,UAAY,UACpB,IAAIstC,EAAMxoC,SAASyE,cAAc,OACjC+jC,EAAI3jC,YAAYpY,GAChB,IAAIy5E,EAAe,KAEnB,IACEA,EAAe36E,KAAK2yG,QAAQj6D,SAAS0hC,eAAep6E,KAAK2yG,QAAQ2oC,KAAMnhE,EAAYj5E,GACnF,MAAOmc,GACPggC,QAAQ5rB,MAAM,wDACd4rB,QAAQ5rB,MAAMpU,GAGhBhL,EAAS,CACPif,QAAS2rB,EACTk9B,WAAYA,EACZQ,aAAcA,GAIlB,OAAOtoE,GAGTm6I,EAAS7rJ,UAAUisJ,QAAU,SAAUzyE,EAAYl9B,IA5CrD,SAA0B3rB,GACxB,IACEA,EAAQ7E,cAAcigC,YAAYp7B,GAClC,MAAOplB,KA0CP2gJ,CAAiB5vG,EAAI3rB,SACrBtxB,KAAK2sJ,MAAMxyE,GAAY/rE,KAAK6uC,IAG9BuvG,EAAS7rJ,UAAUgsJ,MAAQ,SAAUxyE,GACnC,OAAOn6E,KAAKysJ,OAAOtyE,KAAgBn6E,KAAKysJ,OAAOtyE,GAAc,KAG/DqyE,EAAS7rJ,UAAUmsJ,eAAiB,WAClC,IAAI1rJ,EAAQpB,KAERA,KAAKysJ,QACPrsJ,OAAO6lB,KAAKjmB,KAAKysJ,QAAQ3+I,QAAQ,SAAUqsE,GACzC/4E,EAAMqrJ,OAAOtyE,GAAYrsE,QAAQ,SAAUi/I,GACzC3rJ,EAAMuxG,QAAQj6D,SAASgiC,gBAAgBt5E,EAAMuxG,QAAQ2oC,KAAMnhE,EAAY4yE,EAAUpyE,cAEjFoyE,EAAUz7H,QAAU,KACpBy7H,EAAUpyE,aAAe,cAGpBv5E,EAAMqrJ,OAAOtyE,MAK1BqyE,EAAS7rJ,UAAUc,QAAU,WAC3BzB,KAAK8sJ,iBACL9sJ,KAAKysJ,OAAS,MAGTD,EAlET,GAuEI,GAEJ,WACE,SAASQ,EAASr6C,EAAS9lG,GACzB,IAAIzL,EAAQpB,KAEZA,KAAKo2B,MAAQ,EACbp2B,KAAKitJ,gBAAkB,IAAqBnvI,KAC5C9d,KAAK2yG,QAAUA,EACf3yG,KAAK6M,MAAQA,EACb7M,KAAKgG,GAAKhG,KAAK6M,MAAM7G,GACrBhG,KAAKi9C,IAAM,KACXj9C,KAAK6jB,IAAM,EACX7jB,KAAK8jB,OAASjX,EAAMysE,YACpBt5E,KAAKktJ,QAAU,GACfrgJ,EAAM+5I,eAAe94I,QAAQ,SAAU0T,GACrC,OAAOpgB,EAAM8rJ,QAAQ1rI,IAAK,IAGxB3U,EAAMgyI,cACR7+I,KAAKmtJ,SAAS,YA8MlB,OA1MA/sJ,OAAOM,eAAessJ,EAASrsJ,UAAW,WAAY,CACpDqX,IAAK,SAAazV,GAChBA,EAAQvC,KAAKmtJ,SAAS,YAAcntJ,KAAKotJ,YAAY,aAEvDtsJ,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAessJ,EAASrsJ,UAAW,UAAW,CACnDqX,IAAK,SAAazV,GAChBA,EAAQvC,KAAKmtJ,SAAS,WAAantJ,KAAKotJ,YAAY,YAEtDtsJ,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAessJ,EAASrsJ,UAAW,YAAa,CACrDC,IAAK,WACH,OAAOZ,KAAKqtJ,YAEdr1I,IAAK,SAAazV,GAChBvC,KAAKqtJ,WAAa9qJ,EAClBvC,KAAKyjB,QAAO,IAEd3iB,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAessJ,EAASrsJ,UAAW,aAAc,CACtDqX,IAAK,SAAazV,GAChBA,EAAQvC,KAAKmtJ,SAAS,eAAiBntJ,KAAKotJ,YAAY,gBAE1DtsJ,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAessJ,EAASrsJ,UAAW,UAAW,CACnDC,IAAK,WACH,OAAOZ,KAAKi9C,KAAOj9C,KAAKi9C,IAAI3rB,SAE9BxwB,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAessJ,EAASrsJ,UAAW,aAAc,CACtDC,IAAK,WACH,OAAOZ,KAAKstJ,cAAgBttJ,KAAKstJ,YAActtJ,KAAK2yG,QAAQj6D,SAAS6gC,eAAiBv5E,KAAK2yG,QAAQj6D,SAAS6gC,cAAcv5E,KAAK2yG,QAAQ2oC,KAAMt7I,KAAK6M,MAAMg5I,gBAE1J/kJ,YAAY,EACZC,cAAc,IAGhBisJ,EAASrsJ,UAAUwsJ,SAAW,SAAU/jI,GACtCppB,KAAKktJ,QAAQ9jI,IAAQ,EACrBppB,KAAKyjB,QAAO,IAGdupI,EAASrsJ,UAAUysJ,YAAc,SAAUhkI,UAClCppB,KAAKktJ,QAAQ9jI,GAEpBppB,KAAKyjB,QAAO,IAGdupI,EAASrsJ,UAAU8iB,OAAS,SAAU8pI,GACpC,IAAInsJ,EAAQpB,KAMZ,QAJuB,IAAnButJ,IACFA,GAAiB,GAGdvtJ,KAAK6M,OAAU7M,KAAKsxB,QAAzB,CAIA,IAAI8kD,EAAU,CAAC,mBACfA,EAAQhoE,KAAKkS,MAAM81D,EAASh2E,OAAO6lB,KAAKjmB,KAAKktJ,UAEzCltJ,KAAK6M,MAAMqsE,eACb9C,EAAQhoE,KAAK,gBAGfpO,KAAKsxB,QAAQ3hB,UAAYymE,EAAQ71D,KAAK,KACtCvgB,KAAKsxB,QAAQk8H,UAAYxtJ,KAAKwtJ,UAC9BxtJ,KAAKsxB,QAAQzF,MAAM/H,OAAS9jB,KAAK8jB,OAAS,KAE1C9jB,KAAKsxB,QAAQ6c,aAAa,OAAQ,YAClC,IAAIs/G,EAAgBztJ,KAAK2yG,QAAQ/sB,sBAC7BhkC,EAAY6rG,EAAc1yE,aAAa/6E,KAAK2yG,QAAQ2oC,KAAMt7I,KAAK6M,MAAMg5I,cAWzE,GATIjkG,GACF5hD,KAAKsxB,QAAQ6c,aAAa,aAAcyT,GAGtC6rG,EAAc3Q,aAAe2Q,EAAc1Q,aAC7C/8I,KAAKsxB,QAAQ6c,aAAa,eAAgBs/G,EAAc1Q,cACxD/8I,KAAKsxB,QAAQ6c,aAAa,gBAAiBs/G,EAAc3Q,YAAY98I,KAAK2yG,QAAQ2oC,KAAMt7I,KAAK6M,MAAMg5I,gBAGjG7lJ,KAAK6M,MAAM85I,SAAS,WAAY,CAClC,IAAI+G,EAAWzzH,GAAA,EAAiBj6B,KAAK6M,MAAM7G,IAC3ChG,KAAKsxB,QAAQ6c,aAAa,gBAAiB,QAC3CnuC,KAAKsxB,QAAQ6c,aAAa,KAAMu/G,QAEhC1tJ,KAAKsxB,QAAQ6c,aAAa,gBAAiB,SAC3CnuC,KAAKsxB,QAAQ8xB,gBAAgB,MAG3BpjD,KAAK6M,MAAMqsE,cACbl5E,KAAKsxB,QAAQ6c,aAAa,gBAAiB9hB,SAASrsB,KAAKktJ,QAAkB,WAE3EltJ,KAAKsxB,QAAQ8xB,gBAAgB,iBAG/BpjD,KAAKsxB,QAAQ6c,aAAa,aAAc9hB,OAAOrsB,KAAK6M,MAAMi5I,aAEtD9lJ,KAAK2yG,QAAQxwG,QAAQwrJ,aACvB3tJ,KAAKsxB,QAAQzF,MAAMy7E,YAActnG,KAAK2yG,QAAQxwG,QAAQyrJ,eAAiB5tJ,KAAK6M,MAAMi5I,WAAa,GAAK9lJ,KAAK2yG,QAAQxwG,QAAQ0rJ,aAAe,MAExI7tJ,KAAKsxB,QAAQzF,MAAMy7E,aAAetnG,KAAK6M,MAAMi5I,WAAa,GAAK9lJ,KAAK2yG,QAAQxwG,QAAQ0rJ,aAAe,KACnG7tJ,KAAKi9C,IAAI3rB,QAAQw8H,kBAAkBjiI,MAAMy7E,YAActnG,KAAK2yG,QAAQxwG,QAAQyrJ,cAAgB,MAG9F,IAAI9uI,EAAM9e,KAAK2yG,QAAQo7C,IAAIzN,WAAWtgJ,KAAK2yG,QAAQ2oC,KAAMt7I,KAAK6M,MAAMg5I,cAkBpE,GAhBI/mI,IAAQ9e,KAAK8e,MACX9e,KAAKitJ,iBACPjtJ,KAAKitJ,gBAAgBxrJ,UAGnBqd,GACF9e,KAAK8e,IAAMA,EACX9e,KAAKwtJ,WAAY,EACjBxtJ,KAAKitJ,gBAAkB,KAA0BjtJ,KAAKsxB,QAAS,YAAa,SAAUplB,GACpF9K,EAAMm/I,YAAYr0I,MAGpBlM,KAAK8e,IAAM,OAIVyuI,GAAkBvtJ,KAAKsxB,QAAS,CACnC,IAAIg2E,EAAc,EAElB,GAAItnG,KAAK2yG,QAAQq7C,oBAAqB,CACpC,IAAIniI,EAAQszH,OAAOC,iBAAiBp/I,KAAKsxB,SACzCg2E,EAAc12C,WAAW/kC,EAAMy7E,aAG7BtnG,KAAK2yG,QAAQq7C,sBACfhuJ,KAAKsxB,QAAQzF,MAAMuK,MAAQ,eAG7B,IACEp2B,KAAK2yG,QAAQj6D,SAAS4hC,cAAct6E,KAAK2yG,QAAQ2oC,KAAMt7I,KAAK6M,MAAMg5I,aAAc7lJ,KAAKm6E,WAAYn6E,KAAKi9C,IAAI09B,cAC1G,MAAOt9D,GACPggC,QAAQ5rB,MAAM,uDACd4rB,QAAQ5rB,MAAMpU,GAGZrd,KAAK2yG,QAAQq7C,sBACfhuJ,KAAKo2B,MAAQ,KAAoBp2B,KAAKsxB,SAAWg2E,EACjDtnG,KAAKsxB,QAAQzF,MAAMuK,MAAQ,OAKjC42H,EAASrsJ,UAAUstJ,YAAc,SAAU1sG,EAAW2sG,GAOpD,GANKluJ,KAAKi9C,MACRj9C,KAAKi9C,IAAMj9C,KAAK2yG,QAAQg6C,MAAMD,MAAM1sJ,KAAKm6E,YAEzCn6E,KAAKsxB,QAAQ,GAAS68H,SAAWnuJ,OAG/BA,KAAKsxB,QAAQ7E,cAAjB,CAIA,GAAqB,OAAjByhI,EACF3sG,EAAUjoC,YAAYtZ,KAAKsxB,cAE3B,IACEiwB,EAAUw7B,aAAa/8E,KAAKsxB,QAAS48H,GACrC,MAAOhiJ,GACPmxC,QAAQ67D,KAAK,0CACb33D,EAAUjoC,YAAYtZ,KAAKsxB,SAI/BtxB,KAAKyjB,WAGPupI,EAASrsJ,UAAUytJ,cAAgB,WAC5BpuJ,KAAKi9C,MAIVj9C,KAAKitJ,gBAAgBxrJ,UACrBzB,KAAK8e,IAAM,KACX9e,KAAKsxB,QAAQ,GAAS68H,SAAW,KACjCnuJ,KAAK2yG,QAAQg6C,MAAMC,QAAQ5sJ,KAAKm6E,WAAYn6E,KAAKi9C,KACjDj9C,KAAKi9C,IAAM,OAGb+vG,EAASrsJ,UAAUc,QAAU,WAC3BzB,KAAKi9C,IAAM,MAGN+vG,EAhOT,GAqOIqB,GAEJ,SAAUtkJ,GAGR,SAASskJ,EAAa17C,EAAS9lG,EAAOu1C,GACpC,IAAIhhD,EAAQ2I,EAAOE,KAAKjK,KAAM2yG,EAAS9lG,IAAU7M,KAOjD,OALAoB,EAAM67C,IAAM,CACV3rB,QAAS8wB,EACTu4B,aAAc,KACdR,WAAY,MAEP/4E,EAwBT,OAlCA,GAAUitJ,EAActkJ,GAaxBskJ,EAAa1tJ,UAAU8iB,OAAS,WAC9B,GAAKzjB,KAAK6M,OAAU7M,KAAKsxB,QAAzB,CAIA,IAAI8kD,EAAU,CAAC,uBACfA,EAAQhoE,KAAKkS,MAAM81D,EAASh2E,OAAO6lB,KAAKjmB,KAAKktJ,UAEzCltJ,KAAK6M,MAAMqsE,eACb9C,EAAQhoE,KAAK,gBAGfpO,KAAKsxB,QAAQ3hB,UAAYymE,EAAQ71D,KAAK,OAGxC8tI,EAAa1tJ,UAAUstJ,YAAc,SAAU1sG,EAAW2sG,KAG1DG,EAAa1tJ,UAAUytJ,cAAgB,aAGhCC,EAnCT,CAoCE,IAkBF,IAAI,GAEJ,SAAUtkJ,GAGR,SAASukJ,EAAS37C,EAASpxD,GACzB,IAAIngD,EAAQ2I,EAAOE,KAAKjK,OAASA,KAEjCoB,EAAMyL,MAAQ,KACdzL,EAAMmtJ,mBAAqB,EAC3BntJ,EAAMotJ,0BAA4B,IAAI,IAAQ,IAC9CptJ,EAAMqtJ,cAAe,EACrBrtJ,EAAMstJ,8BAAgC,GACtCttJ,EAAMutJ,uBAAyB,KAC/BvtJ,EAAMwtJ,kBAAoB,KAC1BxtJ,EAAMytJ,mBAAqB,KAC3BztJ,EAAM0tJ,sBAAwB,IAAqBhxI,KACnD1c,EAAM2tJ,0BAA4B,KAClC3tJ,EAAM4tJ,yBAA2B,KACjC5tJ,EAAM6tJ,kBAAoB,KAC1B7tJ,EAAM8tJ,kBAAoB,KAC1B9tJ,EAAM+tJ,YAAc,IAAI,KACxB/tJ,EAAMguJ,WAAa,IAAI,KACvBhuJ,EAAMiuJ,aAAe,IAAI,KACzBf,EAASgB,UACTluJ,EAAMmuJ,SAAWjB,EAASgB,QAC1B,IAAIE,EAAuE,qBAAzC78C,EAAQxwG,QAAQqtJ,qBAAuC,EAEvF78C,EAAQxwG,QAAQqtJ,qBAClBpuJ,EAAM4sJ,oBAA+C,IAAzBwB,EAG5BpuJ,EAAMuxG,QAAU,CACdgqC,WAAYhqC,EAAQgqC,WACpBjkG,SAAUi6D,EAAQj6D,SAClB7tC,WAAY8nG,EAAQ9nG,WACpBkjJ,IAAKp7C,EAAQo7C,IACbjyI,OAAQ62F,EAAQ72F,OAChBmsI,OAAQt1C,EAAQs1C,OAChB3M,KAAM3oC,EAAQ2oC,KACd11D,sBAAuB+sB,EAAQ/sB,sBAC/BzjF,QAASwwG,EAAQxwG,QACjBwqJ,MAAO,IAAIH,GAAS75C,GACpBq7C,oBAAqB5sJ,EAAM4sJ,qBAE7B5sJ,EAAMquJ,eAAiB,GACvBruJ,EAAMsuJ,cAAgB,GACtBtuJ,EAAM+qH,MAAQ,GACd/qH,EAAM4pB,QAAUvW,SAASyE,cAAc,OACvC9X,EAAM4pB,QAAQrb,UAAY,oDAAsDvO,EAAMmuJ,SAEtFnuJ,EAAM4pB,QAAQkjB,SAAWykE,EAAQxwG,QAAQwtJ,kBAAoB,EAAI,EACjEvuJ,EAAM0/I,aAAe,KAAqB1/I,EAAM4pB,SAChD5pB,EAAMwuJ,WAAaj9C,EAAQk9C,QAAU,IAAIhP,GAAkBz/I,EAAM0/I,aAAc,wBAA0B1/I,EAAMmuJ,UAE/GnuJ,EAAM4pB,QAAQmjB,aAAa,OAAQ,QAE/B/sC,EAAMuxG,QAAQxwG,QAAQy/C,WACxBxgD,EAAM4pB,QAAQmjB,aAAa,aAAc/sC,EAAMuxG,QAAQxwG,QAAQy/C,WAG7DxgD,EAAMuxG,QAAQxwG,QAAQ2tJ,eACxB,KAAa1uJ,EAAM4pB,QAAS,WAGzB5pB,EAAMuxG,QAAQxwG,QAAQwrJ,cACzB,KAAavsJ,EAAM4pB,QAAS,kBAG9B5pB,EAAMghD,QAAU3tC,SAASyE,cAAc,OACvC9X,EAAMghD,QAAQzyC,UAAY,sBAC1BvO,EAAM2uJ,kBAAoB,IAAI,KAAkB3uJ,EAAMghD,QAAS,CAC7D4tG,yBAAyB,EACzB/qE,WAAYuqE,EACZj9D,SAAwD,qBAAvCogB,EAAQxwG,QAAQ8tJ,mBAAqCt9C,EAAQxwG,QAAQ8tJ,mBAAqB,EAG3G/qE,WAAYytB,EAAQxwG,QAAQ+iF,aAG9B9jF,EAAM2uJ,kBAAkBt9D,SAAS,SAAUvmF,GACzC9K,EAAMqiB,OAAOvX,EAAEymF,UAAWzmF,EAAE4X,OAAQ5X,EAAEwmF,WAAYxmF,EAAEkqB,MAAOlqB,EAAEynF,aAE7DvyF,EAAMiuJ,aAAattJ,SAGjB,MACFX,EAAMghD,QAAQv2B,MAAMqkI,cAAgB,OACpC9uJ,EAAMghD,QAAQv2B,MAAMskI,iBAAmB,QAEvC,KAAcC,UAAUhvJ,EAAMghD,SAGhChhD,EAAMivJ,cAAgB57I,SAASyE,cAAc,OAC7C9X,EAAMivJ,cAAc1gJ,UAAY,mBAE5BgjG,EAAQxwG,QAAQmuJ,cAClBlvJ,EAAMivJ,cAAc1gJ,WAAa,kBAGnC,IAAI4gJ,EAAe,KAAenvJ,EAAM4pB,SAqHxC,OAnHA5pB,EAAMsuJ,cAActhJ,KAAKmiJ,EAAa5kG,WAAW,WAC/C,OAAOvqD,EAAMyhD,aAGfzhD,EAAMsuJ,cAActhJ,KAAKmiJ,EAAa1kG,UAAU,WAC9C,OAAOzqD,EAAMwhD,YAGfxhD,EAAMsuJ,cAActhJ,KAAKmiJ,GAEzBnvJ,EAAMsuJ,cAActhJ,KAAK,KAA0BhN,EAAM4pB,QAAS,UAAW,SAAU9e,GACrF,OAAO9K,EAAM07B,UAAU5wB,MAGzB9K,EAAMsuJ,cAActhJ,KAAK,KAA0BhN,EAAM4pB,QAAS,QAAS,SAAU9e,GACnF,OAAO9K,EAAMo/B,QAAQt0B,MAGvB9K,EAAMsuJ,cAActhJ,KAAK,KAA0BhN,EAAM4pB,QAAS,YAAa,SAAU9e,GACvF,OAAO9K,EAAM4+B,YAAY9zB,MAG3B9K,EAAMsuJ,cAActhJ,KAAK,KAA0BhN,EAAM4pB,QAAS,UAAW,SAAU9e,GACrF,OAAO9K,EAAMiwB,UAAUnlB,MAGzB9K,EAAMsuJ,cAActhJ,KAAK,KAA0BhN,EAAMghD,QAAS,WAAY,SAAUl2C,GAClFA,GAAkB,IAAbA,EAAEskJ,QACTpvJ,EAAMqvJ,mBAAmBvkJ,MAI7B9K,EAAMsuJ,cAActhJ,KAAK,KAA0BhN,EAAMghD,QAAS,QAAS,SAAUl2C,GACnF,OAAO9K,EAAM6iB,QAAQ/X,MAGvB9K,EAAMsuJ,cAActhJ,KAAK,KAA0BhN,EAAM4pB,QAAS,cAAe,SAAU9e,GACzF,OAAO9K,EAAMs7B,cAAcxwB,MAG7B9K,EAAMsuJ,cAActhJ,KAAK,KAA0BhN,EAAMghD,QAAS,KAAgBsuG,IAAK,SAAUxkJ,GAC/F,OAAO9K,EAAMm+I,MAAMrzI,MAGrB9K,EAAMsuJ,cAActhJ,KAAK,KAA0BhN,EAAMghD,QAAS,KAAgBuuG,OAAQ,SAAUzkJ,GAClG,OAAO9K,EAAMwvJ,cAAc1kJ,MAGzB,OACF9K,EAAMsuJ,cAActhJ,KAAK,KAA0BhN,EAAMghD,QAAS,gBAAiB,SAAUl2C,GAC3F,OAAO9K,EAAMyvJ,gBAAgB3kJ,MAG/B9K,EAAMsuJ,cAActhJ,KAAK,KAA0BhN,EAAMghD,QAAS,eAAgB,SAAUl2C,GAC1F,OAAO9K,EAAM0vJ,eAAe5kJ,MAI9B9K,EAAMsuJ,cAActhJ,KAAK,KAAmChN,EAAMghD,QAAS,kBAAmB,SAAUl2C,GACtG,OAAO9K,EAAM2vJ,2BAA2B7kJ,IACvC,SAAU8kJ,EAAWnwJ,GACtBA,EAAMo8B,kBACNp8B,EAAMm8B,iBACN,IAAI3qB,EAAS,CACX4+I,aAAcpwJ,EAAMowJ,aACpBC,aAAcrwJ,EAAMqwJ,cAQtB,OALIF,IACF3+I,EAAO4+I,cAAgBD,EAAUC,aACjC5+I,EAAO6+I,cAAgBF,EAAUE,cAG5B7+I,MAIXjR,EAAMsuJ,cAActhJ,KAAK,KAA0B+wI,OAAQ,WAAY,SAAUjzI,GAC/E,OAAO9K,EAAMo/I,WAAWt0I,MAG1B9K,EAAMsuJ,cAActhJ,KAAK,KAA0BhN,EAAMghD,QAAS,OAAQ,SAAUl2C,GAClF,OAAO9K,EAAM+vJ,OAAOjlJ,MAGtB9K,EAAMsuJ,cAActhJ,KAAK,KAA0B+wI,OAAQ,UAAW,SAAUjzI,GAC9E,OAAO9K,EAAMgwJ,UAAUllJ,MAGzB9K,EAAMsuJ,cAActhJ,KAAK,KAA0B+wI,OAAQ,YAAa,SAAUjzI,GAChF,OAAO9K,EAAMo/I,WAAWt0I,MAG1B9K,EAAMghD,QAAQ9oC,YAAYlY,EAAMivJ,eAEhCjvJ,EAAM4pB,QAAQ1R,YAAYlY,EAAM2uJ,kBAAkBn2I,cAElD2nC,EAAUjoC,YAAYlY,EAAM4pB,SAC5B5pB,EAAMiwJ,cAAgB,EACtBjwJ,EAAMkwJ,iBAAmB,EACzBlwJ,EAAMmwJ,4BAA6B,EACnCnwJ,EAAMwtJ,kBAAoB,KAC1BxtJ,EAAMytJ,mBAAqB,GAC3BztJ,EAAMowJ,8BAA+B,EACrCpwJ,EAAM2tJ,0BAA4B,KAClC3tJ,EAAM4tJ,yBAA2B,KAEjC5tJ,EAAMqwJ,gBAENrwJ,EAAMmjD,SAENnjD,EAAMswJ,iBAENtwJ,EAAMgtC,YAAYukE,EAAQxwG,SAEnBf,EAsnCT,OA50CA,GAAUktJ,EAAUvkJ,GAyNpB3J,OAAOM,eAAe4tJ,EAAS3tJ,UAAW,aAAc,CACtDC,IAAK,WACH,OAAOZ,KAAKmvJ,YAAYtuJ,OAE1BC,YAAY,EACZC,cAAc,IAGhButJ,EAAS3tJ,UAAUytC,YAAc,SAAUQ,GACzC5uC,KAAK4vJ,WAAW/jI,MAAM+iB,IAGxB0/G,EAAS3tJ,UAAUuqJ,eAAiB,SAAU3gI,GAC5C,OAAO,IAAI,GAASvqB,KAAK2yG,QAASpoF,IAGpC+jI,EAAS3tJ,UAAUgxJ,eAAiB,WAClC,OAAO3xJ,KAAKgrB,SAGdsjI,EAAS3tJ,UAAU6U,MAAQ,WACzBxV,KAAKgrB,QAAQxV,SAGf84I,EAAS3tJ,UAAUixJ,UAAY,WAC7B,OAAOn9I,SAAS+uC,gBAAkBxjD,KAAKgrB,SAGzCsjI,EAAS3tJ,UAAU2iD,KAAO,WACxBtjD,KAAKgrB,QAAQs4B,QAGfgrG,EAAS3tJ,UAAU+wJ,eAAiB,WAClC,IAAItwJ,EAAQpB,KAERm/I,OAAO0S,YACT7xJ,KAAK8xJ,UAAY,IAAID,UACrB/vJ,WAAW,WACT,OAAOV,EAAM0wJ,UAAUhvJ,OAAS1B,EAAMghD,SACrC,OAIPksG,EAAS3tJ,UAAUoxJ,cAAgB,WACjC,OAAkC,OAA3B/xJ,KAAKkvJ,mBAGdZ,EAAS3tJ,UAAU4jD,OAAS,SAAUzgC,EAAQsS,GACvCp2B,KAAK+xJ,kBAIV/xJ,KAAKgyJ,WAAaluI,GAAU,KAAqB9jB,KAAKoiD,SAEtDpiD,KAAK6zF,aAAe7zF,KAAK2qJ,mBAErB3qJ,KAAKguJ,sBACPhuJ,KAAKiyJ,UAAY77H,GAAS,KAAoBp2B,KAAKoiD,YAIvDksG,EAAS3tJ,UAAU8iB,OAAS,SAAUkvE,EAAWq/D,EAAYt/D,EAAYu/D,EAAWt+D,GAClF,IAAInlF,EACA0mB,EACAg9H,EAAYv/D,EACZw/D,EAAex/D,EAAYq/D,EAC3BI,EAAmBpyJ,KAAKqxJ,cAAgBrxJ,KAAKsxJ,iBAEjD,IAAK9iJ,EAAIxO,KAAK+rJ,WAAWoG,GAAgB,EAAGj9H,EAAOl1B,KAAK6rJ,QAAQxqJ,KAAKw5B,IAAIu3H,EAAkBF,IAAa1jJ,GAAK0mB,EAAM1mB,IACjHxO,KAAKqyJ,gBAAgBryJ,KAAKgsJ,YAAYx9I,IAIxC,IAAKA,EAAInN,KAAK8sE,IAAInuE,KAAK6rJ,QAAQ7rJ,KAAKqxJ,eAAgBrxJ,KAAK+rJ,WAAWoG,IAAiB,EAAGj9H,EAAOl1B,KAAK6rJ,QAAQqG,GAAY1jJ,GAAK0mB,EAAM1mB,IACjIxO,KAAKqyJ,gBAAgBryJ,KAAKgsJ,YAAYx9I,IAIxC,IAAKA,EAAIxO,KAAK6rJ,QAAQ7rJ,KAAKqxJ,eAAgBn8H,EAAO7zB,KAAK8sE,IAAInuE,KAAK6rJ,QAAQqG,GAAYlyJ,KAAK+rJ,WAAWqG,IAAoB5jJ,EAAI0mB,EAAM1mB,IAChIxO,KAAKsyJ,kBAAkBtyJ,KAAKgsJ,YAAYx9I,IAI1C,IAAKA,EAAInN,KAAKw5B,IAAI76B,KAAK+rJ,WAAWoG,GAAenyJ,KAAK6rJ,QAAQ7rJ,KAAKqxJ,gBAAiBn8H,EAAOl1B,KAAK+rJ,WAAWqG,GAAmB5jJ,EAAI0mB,EAAM1mB,IACtIxO,KAAKsyJ,kBAAkBtyJ,KAAKgsJ,YAAYx9I,IAG1C,IAAI+jJ,EAAUvyJ,KAAKgsJ,YAAYhsJ,KAAK6rJ,QAAQqG,IAExCK,IACFvyJ,KAAKqwJ,cAAcxkI,MAAMhI,IAAM0uI,EAAQ1uI,IAAMquI,EAAY,MAGvDlyJ,KAAKguJ,sBACPhuJ,KAAKqwJ,cAAcxkI,MAAMra,MAAQkhF,EAAa,KAC9C1yF,KAAKqwJ,cAAcxkI,MAAMuK,MAAQ/0B,KAAKw5B,IAAI84D,EAAas+D,GAAa,MAGtEjyJ,KAAKqxJ,cAAgBa,EACrBlyJ,KAAKsxJ,iBAAmBa,EAAeD,GAGzC5D,EAAS3tJ,UAAUojF,SAAW,SAAU4C,GACtC3mF,KAAKwyJ,eACLxyJ,KAAK6M,MAAQ85E,EACb3mF,KAAK6M,MAAMg8I,UAAU7oJ,KAAKyyJ,aAAczyJ,KAAMA,KAAKyvJ,gBACnDzvJ,KAAK6M,MAAMw3I,aAAarkJ,KAAK0yJ,YAAa1yJ,KAAMA,KAAKyvJ,gBACrDzvJ,KAAK6M,MAAM47I,WAAWzoJ,KAAK2yJ,gBAAiB3yJ,KAAMA,KAAKyvJ,gBACvDzvJ,KAAK6M,MAAM87I,cAAc3oJ,KAAKyoJ,WAAYzoJ,KAAMA,KAAKyvJ,gBACrDzvJ,KAAK6M,MAAM8+C,WAAW3rD,KAAK4yJ,mBAAoB5yJ,KAAMA,KAAKyvJ,gBAC1DzvJ,KAAK6M,MAAM22I,sBAAsBxjJ,KAAK6yJ,yBAA0B7yJ,KAAMA,KAAKyvJ,gBAC3EzvJ,KAAK6M,MAAM62I,yBAAyB1jJ,KAAK8yJ,wBAAyB9yJ,KAAMA,KAAKyvJ,gBAC7EzvJ,KAAK6M,MAAMy2I,iBAAiBtjJ,KAAK+yJ,cAAe/yJ,KAAMA,KAAKyvJ,gBAC3DzvJ,KAAK6M,MAAM61I,aAAa1iJ,KAAKgzJ,gBAAiBhzJ,KAAMA,KAAKyvJ,gBACzDzvJ,KAAK6M,MAAM+1I,gBAAgB5iJ,KAAKizJ,eAAgBjzJ,KAAMA,KAAKyvJ,gBAC3DzvJ,KAAK6M,MAAMi2I,eAAe9iJ,KAAKkzJ,iBAAkBlzJ,KAAMA,KAAKyvJ,gBAC5DzvJ,KAAK6M,MAAM21I,gBAAgBxiJ,KAAKmzJ,aAAcnzJ,KAAMA,KAAKyvJ,gBACzDzvJ,KAAK6M,MAAMq2I,kBAAkBljJ,KAAKozJ,eAAgBpzJ,KAAMA,KAAKyvJ,gBAC7DzvJ,KAAK6M,MAAMu2I,qBAAqBpjJ,KAAKqzJ,kBAAmBrzJ,KAAMA,KAAKyvJ,iBAGrEnB,EAAS3tJ,UAAU8xJ,aAAe,WAChCzyJ,KAAKyuJ,cAAe,GAGtBH,EAAS3tJ,UAAU+xJ,YAAc,WAC/B1yJ,KAAKyuJ,cAAe,EACpBzuJ,KAAKyxJ,iBAGPnD,EAAS3tJ,UAAU8wJ,cAAgB,SAAU9+D,QACzB,IAAdA,IACFA,EAAY3yF,KAAK2yF,WAGf3yF,KAAKyuJ,eAITzuJ,KAAK2yF,UAAYA,EACjB3yF,KAAKszJ,sBAGPhF,EAAS3tJ,UAAU2yJ,kBAAoB,WACrC,IAAIlyJ,EAAQpB,KAEPA,KAAKguJ,qBAIVhuJ,KAAKwuJ,0BAA0Bl5I,QAAQ,WAIrC,IAHA,IACIq+E,EAAc,EAET/gF,EAAK,EAAG2gJ,EAHNnzJ,OAAO6lB,KAAK7kB,EAAM+qH,OAGGv5G,EAAK2gJ,EAAOhnJ,OAAQqG,IAAM,CACxD,IAAInC,EAAM8iJ,EAAO3gJ,GACjB+gF,EAActyF,KAAKw5B,IAAI84D,EAAavyF,EAAM+qH,MAAM17G,GAAK2lB,OAGvDh1B,EAAMuyF,YAAcA,EAAc,MAMtC26D,EAAS3tJ,UAAUulI,cAAgB,SAAUojB,GAC3C,IAAIloJ,EAAQpB,KAERwzJ,EAAgBxzJ,KAAK6rJ,QAAQ7rJ,KAAK2yF,UAAY3yF,KAAKgyJ,YACvDwB,EAAkC,IAAlBA,EAAsB,EAAIA,EAAgB,EAC1D,IAAIC,EAAkBzzJ,KAAKgsJ,YAAYwH,GAAe3mJ,MAAMg5I,aAG5D,GAF8B7lJ,KAAK6M,MAAMm6E,aAETysE,EAC9BzzJ,KAAK6M,MAAM65E,SAAS+sE,EAAiBnK,OAChC,CACL,IAAIoK,EAAoB1zJ,KAAK2yF,UAC7B3yF,KAAK2yF,WAAa3yF,KAAKgyJ,WAEnBhyJ,KAAK2yF,YAAc+gE,GAErB5xJ,WAAW,WACTV,EAAM8kI,cAAcojB,IACnB,KAKTgF,EAAS3tJ,UAAU6lI,kBAAoB,SAAU8iB,GAC/C,IAEIqK,EAFAvyJ,EAAQpB,KAKV2zJ,EADqB,IAAnB3zJ,KAAK2yF,UACU3yF,KAAK6rJ,QAAQ7rJ,KAAK2yF,WAElB3yF,KAAK+rJ,WAAW/rJ,KAAK2yF,UAAY,GAGpD,IAAIihE,EAAmB5zJ,KAAKgsJ,YAAY2H,GAAgB9mJ,MAAMg5I,aAG9D,GAF8B7lJ,KAAK6M,MAAMm6E,aAET4sE,EAC9B5zJ,KAAK6M,MAAM65E,SAASktE,EAAkBtK,OACjC,CACL,IAAIoK,EAAoB1zJ,KAAK2yF,UAC7B3yF,KAAK2yF,WAAa3yF,KAAKgyJ,WAEnBhyJ,KAAK2yF,YAAc+gE,GAErB5xJ,WAAW,WACTV,EAAMolI,kBAAkB8iB,IACvB,KAKTlpJ,OAAOM,eAAe4tJ,EAAS3tJ,UAAW,aAAc,CACtDC,IAAK,WAEH,OADuBZ,KAAK+vJ,kBAAkB8D,sBACtB/vI,QAE1B9L,IAAK,SAAa8L,GAChB9jB,KAAK+vJ,kBAAkBj8D,oBAAoB,CACzChwE,OAAQA,KAGZhjB,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAe4tJ,EAAS3tJ,UAAW,eAAgB,CACxDqX,IAAK,SAAa67E,GAChBA,GAA+B7zF,KAAKguJ,oBAAsB,GAAK,EAC/DhuJ,KAAK+vJ,kBAAkBj8D,oBAAoB,CACzCD,aAAcA,KAGlB/yF,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAe4tJ,EAAS3tJ,UAAW,YAAa,CACrDC,IAAK,WAEH,OADuBZ,KAAK+vJ,kBAAkB8D,sBACtBz9H,OAE1Bpe,IAAK,SAAai6I,GAChBjyJ,KAAK+vJ,kBAAkBj8D,oBAAoB,CACzC19D,MAAO67H,KAGXnxJ,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAe4tJ,EAAS3tJ,UAAW,cAAe,CACvDqX,IAAK,SAAa27E,GAChB3zF,KAAK+vJ,kBAAkBj8D,oBAAoB,CACzCH,YAAaA,KAGjB7yF,YAAY,EACZC,cAAc,IAEhBX,OAAOM,eAAe4tJ,EAAS3tJ,UAAW,YAAa,CACrDC,IAAK,WAEH,OADqBZ,KAAK+vJ,kBAAkB+D,oBACtBnhE,WAExB36E,IAAK,SAAa26E,GAChB,IAAIkB,EAAe7zF,KAAK2qJ,oBAAsB3qJ,KAAKguJ,oBAAsB,GAAK,GAC9EhuJ,KAAK+vJ,kBAAkBj8D,oBAAoB,CACzCD,aAAcA,IAEhB7zF,KAAK+vJ,kBAAkBgE,kBAAkB,CACvCphE,UAAWA,KAGf7xF,YAAY,EACZC,cAAc,IAGhButJ,EAAS3tJ,UAAUgyJ,gBAAkB,SAAUzmJ,GAC7C,IAAIqe,EAAOre,EAAEqe,KAETA,IACFvqB,KAAKqrJ,cAAc,IAAI,KAAe9gI,EAAKg9H,eAAgB,SAAUh9H,GACnE,OAAOA,GAAQA,EAAKvkB,MAEtBhG,KAAKyxJ,kBAITnD,EAAS3tJ,UAAU8nJ,WAAa,SAAUv8I,GACxClM,KAAK2yG,QAAQg6C,MAAMG,iBACnB9sJ,KAAKg0J,UAAY,IAAI3F,GAAaruJ,KAAK2yG,QAASzmG,EAAEqe,KAAMvqB,KAAKoiD,UAG/DksG,EAAS3tJ,UAAUkyJ,yBAA2B,SAAU3mJ,GACtD,IAAIqe,EAAOre,EAAEqe,KACTm1D,EAAW1/E,KAAKmsH,MAAM5hG,EAAKvkB,IAS/B,GAPI05E,GAAY1/E,KAAK2yG,QAAQxwG,QAAQ8xJ,cACnCv0E,EAASw0E,aAAepyJ,WAAW,WACjC49E,EAASw0E,aAAe,EACxBx0E,EAASy0E,SAAU,GAClB7F,EAAS8F,4BAGTloJ,EAAE86I,SAAU,CAKf,IAJA,IAAIqN,EAAc,GACdC,EAAc/pI,EAAKg9H,eACnBgN,OAAY,EAETA,EAAYD,EAAYrzI,QAC7BozI,EAAYjmJ,KAAKmmJ,EAAUvuJ,IAG7BhG,KAAK0uJ,8BAA8BnkI,EAAKvkB,IAAMquJ,IAIlD/F,EAAS3tJ,UAAUmyJ,wBAA0B,SAAU5mJ,GACrD,IAAI9K,EAAQpB,KAERuqB,EAAOre,EAAEqe,KACTm1D,EAAW1/E,KAAKmsH,MAAM5hG,EAAKvkB,IAW/B,GATI05E,IACEA,EAASw0E,eACXv6I,aAAa+lE,EAASw0E,cACtBx0E,EAASw0E,aAAe,GAG1Bx0E,EAASy0E,SAAU,IAGhBjoJ,EAAE86I,SAAU,CAMf,IALA,IAAIwN,EAAwBx0J,KAAK0uJ,8BAA8BnkI,EAAKvkB,IAChEyuJ,EAAoB,GACpBC,EAAcnqI,EAAKg9H,eACnBgN,OAAY,EAETA,EAAYG,EAAYzzI,QAC7BwzI,EAAkBrmJ,KAAKmmJ,GAGzB,IAAII,EAAWtzJ,KAAKizE,IAAIkgF,EAAsBjoJ,OAASkoJ,EAAkBloJ,QAAU,IAC/EsyD,EAAO,GACP+1F,GAA8B,EAElC,IAAKD,EAqBHC,GALA/1F,EAfU,IAAI,KAAa,CACzBg2F,UAAW,WACT,OAAOL,EAAsBjoJ,QAE/BuoJ,kBAAmB,SAA2BtmJ,GAC5C,OAAOgmJ,EAAsBhmJ,KAE9B,CACDqmJ,UAAW,WACT,OAAOJ,EAAkBloJ,QAE3BuoJ,kBAAmB,SAA2BtmJ,GAC5C,OAAOimJ,EAAkBjmJ,GAAGxI,KAE7B,MACQ+uJ,aAAY,IAKYx5I,KAAK,SAAUtS,GAChD,GAAIA,EAAE+rJ,eAAiB,EACrB,IAAK,IAAIxmJ,EAAIvF,EAAEgsJ,cAAexmJ,EAAMxF,EAAEgsJ,cAAgBhsJ,EAAE+rJ,eAAgBxmJ,EAAIC,EAAKD,IAC/E,GAAIpN,EAAM+qH,MAAM5iH,eAAekrJ,EAAkBjmJ,GAAGxI,IAClD,OAAO,EAKb,OAAO,IAMX,IAAK2uJ,IAAaC,GAA+B/1F,EAAKtyD,OAAS,GAC7D,IAAK,IAAIqG,EAAK,EAAGsiJ,EAASr2F,EAAMjsD,EAAKsiJ,EAAO3oJ,OAAQqG,IAAM,CACxD,IAAIuiJ,EAAaD,EAAOtiJ,GAMxB,GAJIuiJ,EAAWC,eAAiB,GAC9Bp1J,KAAKqrJ,cAAc,IAAI,KAAcmJ,EAAuBW,EAAWE,cAAeF,EAAWE,cAAgBF,EAAWC,iBAG1HD,EAAWH,eAAiB,EAAG,CACjC,IAAIM,EAAab,EAAkBU,EAAWF,cAAgB,IAAM1qI,EACpE+qI,EAAaA,EAAWxP,WAAa,EAAIwP,EAAa,KACtDt1J,KAAK4qJ,cAAc,IAAI,KAAc6J,EAAmBU,EAAWF,cAAeE,EAAWF,cAAgBE,EAAWH,gBAAiBM,EAAaA,EAAWtvJ,GAAK,YAGjK2uJ,GAAY91F,EAAKtyD,UAC1BvM,KAAKqrJ,cAAc,IAAI,KAAcmJ,IACrCx0J,KAAK4qJ,cAAc,IAAI,KAAc6J,GAAoBlqI,EAAKu7H,WAAa,EAAIv7H,EAAKvkB,GAAK,QAGvF2uJ,GAAY91F,EAAKtyD,SACnBvM,KAAKyxJ,kBAKXnD,EAAS3tJ,UAAUoyJ,cAAgB,SAAUxoI,GAC3CvqB,KAAKu1J,eAAe,CAAChrI,KAGvB+jI,EAAS3tJ,UAAU40J,eAAiB,SAAUppC,GAC5C,IAAI/qH,EAAQpB,KAEZA,KAAKwrJ,iBAAiBr/B,EAAMrwG,OAAO,SAAUyO,GAC3C,OAAOnpB,EAAM+qH,MAAM5iH,eAAeghB,EAAKvkB,OAEzChG,KAAKyxJ,iBAGPnD,EAAS3tJ,UAAUqyJ,gBAAkB,SAAU9mJ,GAC7C,IAAIwzE,EAAW1/E,KAAKmsH,MAAMjgH,EAAEqe,KAAKvkB,IAE7B05E,IACFA,EAASxuB,UAAW,IAIxBo9F,EAAS3tJ,UAAUsyJ,eAAiB,SAAU/mJ,GAC5C,IAAIqe,EAAOre,EAAEqe,KACTm1D,EAAW1/E,KAAKmsH,MAAM5hG,EAAKvkB,IAE/B,GAAI05E,EAAU,CACZA,EAASxuB,UAAW,EACpB,IAAIptC,EAAS9jB,KAAK4qJ,cAAcrgI,EAAKg9H,eAAgBh9H,EAAKvkB,KAAO,EAC7D2sF,EAAY3yF,KAAK2yF,UAEjBjT,EAAS77D,IAAM67D,EAAS57D,QAAU9jB,KAAK2yF,YACzCA,GAAa7uE,GAGf9jB,KAAKyxJ,cAAc9+D,KAIvB27D,EAAS3tJ,UAAUuyJ,iBAAmB,SAAUhnJ,GAC9C,IAAIqe,EAAOre,EAAEqe,KACTm1D,EAAW1/E,KAAKmsH,MAAM5hG,EAAKvkB,IAE3B05E,IACFA,EAASxuB,UAAW,EACpBlxD,KAAKqrJ,cAAc,IAAI,KAAe9gI,EAAKg9H,eAAgB,SAAUh9H,GACnE,OAAOA,GAAQA,EAAKvkB,MAEtBhG,KAAKyxJ,kBAITnD,EAAS3tJ,UAAUwyJ,aAAe,SAAUjnJ,GAC1C,IAAIqe,EAAOre,EAAEqe,KACT07H,EAAc/5I,EAAE+5I,YAChBvmE,EAAW1/E,KAAKmsH,MAAM5hG,EAAKvkB,IAE/B,GAAI05E,EACF,GAAoB,OAAhBumE,EAAsB,CAExBA,GADAA,EAAcA,EAAc,EAAI,EAAIA,GACR,EAAI,EAAIA,EAEpC,IAAI74G,EAAIsyC,EAAS57D,OAAS9jB,KAAKgyJ,WAC/BhyJ,KAAK2yF,UAAYvlD,EAAI64G,EAAcvmE,EAAS77D,QACvC,CACL,IAAI2xI,EAAiB91E,EAAS77D,IAAM67D,EAAS57D,OACzC2xI,EAAgBz1J,KAAK2yF,UAAY3yF,KAAKgyJ,WAEtCtyE,EAAS77D,IAAM7jB,KAAK2yF,UACtB3yF,KAAK2yF,UAAYjT,EAAS77D,IACjB2xI,GAAkBC,IAC3Bz1J,KAAK2yF,UAAY6iE,EAAiBx1J,KAAKgyJ,cAM/C1D,EAAS3tJ,UAAUyyJ,eAAiB,SAAUlnJ,GAC5C,IAAIqe,EAAOre,EAAEqe,KACTk8H,EAAQv6I,EAAEu6I,MACV/mE,EAAW1/E,KAAKmsH,MAAM5hG,EAAKvkB,IAE3B05E,GACFA,EAASytE,SAAS1G,GAGN,gBAAVA,IACF,KAAazmJ,KAAKgrB,QAASy7H,GAEvB/mE,IACF1/E,KAAK01J,8BAAgCh2E,EAAS8tE,UAE1C9tE,EAAS8tE,YACX9tE,EAAS8tE,WAAY,MAM7Bc,EAAS3tJ,UAAU0yJ,kBAAoB,SAAUnnJ,GAC/C,IAAIqe,EAAOre,EAAEqe,KACTk8H,EAAQv6I,EAAEu6I,MACV/mE,EAAW1/E,KAAKmsH,MAAM5hG,EAAKvkB,IAE3B05E,GACFA,EAAS0tE,YAAY3G,GAGT,gBAAVA,IACF,KAAgBzmJ,KAAKgrB,QAASy7H,GAE1BzmJ,KAAK01J,8BACPh2E,EAAS8tE,WAAY,GAGvBxtJ,KAAK01J,6BAA8B,IAIvCpH,EAAS3tJ,UAAUiyJ,mBAAqB,WACtC,IAAIp9I,EAAQxV,KAAK6M,OAAS7M,KAAK6M,MAAMm6E,WACrC,KAAgBhnF,KAAKgrB,QAAS,mBAAoBxV,GAE9CA,EACFxV,KAAKgrB,QAAQmjB,aAAa,wBAAyBlU,GAAA,EAAiBj6B,KAAK2yG,QAAQgqC,WAAWhwI,MAAM3M,KAAK2yG,QAAQ2oC,KAAM9lI,KAErHxV,KAAKgrB,QAAQo4B,gBAAgB,0BAKjCkrG,EAAS3tJ,UAAUwqJ,aAAe,SAAU5gI,GAC1C,IAAInpB,EAAQpB,KAEZuqB,EAAKg2H,YAAc,SAAUr0I,GAC3B9K,EAAMm/I,YAAYh2H,EAAMre,IAG1Bqe,EAAKqhI,aAAc,EACnB5rJ,KAAK21J,gBAAgBprI,GACrBvqB,KAAKmsH,MAAM5hG,EAAKvkB,IAAMukB,GAGxB+jI,EAAS3tJ,UAAUyqJ,cAAgB,SAAU7gI,EAAMqhI,QAC7B,IAAhBA,IACFA,GAAc,GAGhBrhI,EAAKqhI,YAAcrhI,EAAKqhI,aAAeA,EACvC5rJ,KAAK21J,gBAAgBprI,IAGvB+jI,EAAS3tJ,UAAU4qJ,aAAe,SAAUhhI,GAC1CvqB,KAAKsyJ,kBAAkB/nI,GACvBA,EAAK9oB,iBACEzB,KAAKmsH,MAAM5hG,EAAKvkB,KAIzBsoJ,EAAS3tJ,UAAUg1J,gBAAkB,SAAUprI,GAC7CA,EAAK9G,SAEDzjB,KAAK41J,iBAAiBrrI,GACxBvqB,KAAKqyJ,gBAAgB9nI,GAErBvqB,KAAKsyJ,kBAAkB/nI,IAK3B+jI,EAAS3tJ,UAAUsjB,QAAU,SAAU/X,GACrC,IAAIlM,KAAK61J,iBAA4C,UAAzB71J,KAAK61J,gBAAjC,CAIA,IAAIh1J,EAAQ,IAAI,KAAyBqL,GACrCqe,EAAOvqB,KAAK81J,cAAcj1J,EAAMiC,QAE/BynB,IAID,MAAgBg9F,KAAKC,MAAQxnH,KAAKuuJ,mBAAqB,MAKzD1tJ,EAAMohE,OAAS,GAGjBjiE,KAAKuuJ,mBAAqBhnC,KAAKC,MAC/BxnH,KAAK2yG,QAAQ9nG,WAAWoZ,QAAQjkB,KAAK2yG,QAAQ2oC,KAAM/wH,EAAK1d,MAAMg5I,aAAchlJ,MAG9EytJ,EAAS3tJ,UAAU8vJ,mBAAqB,SAAUvkJ,GAChD,GAAKlM,KAAK2yG,QAAQ9nG,WAAW4lJ,mBAA7B,CAIA,IAAI5vJ,EAAQ,IAAI,KAAyBqL,GACrCqe,EAAOvqB,KAAK81J,cAAcj1J,EAAMiC,QAE/BynB,GAILvqB,KAAK2yG,QAAQ9nG,WAAW4lJ,mBAAmBzwJ,KAAK2yG,QAAQ2oC,KAAM/wH,EAAK1d,MAAMg5I,aAAchlJ,KAGzFytJ,EAAS3tJ,UAAUq/B,YAAc,SAAU9zB,GAGzC,GAFAlM,KAAKuxJ,4BAA6B,EAE7BvxJ,KAAK2yG,QAAQ9nG,WAAWm1B,eAIzBhgC,KAAK61J,iBAA4C,UAAzB71J,KAAK61J,iBAAjC,CAIA,IAAIh1J,EAAQ,IAAI,KAAyBqL,GAEzC,KAAIrL,EAAMg/B,SAAW,MAAqB,MAA1C,CAIA,IAAItV,EAAOvqB,KAAK81J,cAAcj1J,EAAMiC,QAE/BynB,GAILvqB,KAAK2yG,QAAQ9nG,WAAWm1B,YAAYhgC,KAAK2yG,QAAQ2oC,KAAM/wH,EAAK1d,MAAMg5I,aAAchlJ,MAGlFytJ,EAAS3tJ,UAAU0wB,UAAY,SAAUnlB,GACvC,GAAKlM,KAAK2yG,QAAQ9nG,WAAWwmB,aAIzBrxB,KAAK61J,iBAA4C,UAAzB71J,KAAK61J,iBAAjC,CAIA,IAAIh1J,EAAQ,IAAI,KAAyBqL,GAEzC,KAAIrL,EAAMg/B,SAAW,MAAqB,MAA1C,CAIA,IAAItV,EAAOvqB,KAAK81J,cAAcj1J,EAAMiC,QAE/BynB,GAILvqB,KAAK2yG,QAAQ9nG,WAAWwmB,UAAUrxB,KAAK2yG,QAAQ2oC,KAAM/wH,EAAK1d,MAAMg5I,aAAchlJ,MAGhFytJ,EAAS3tJ,UAAU4+I,MAAQ,SAAUrzI,GACnC,IAAIqe,EAAOvqB,KAAK81J,cAAc5pJ,EAAEszI,eAE3Bj1H,GAILvqB,KAAK2yG,QAAQ9nG,WAAW00I,MAAMv/I,KAAK2yG,QAAQ2oC,KAAM/wH,EAAK1d,MAAMg5I,aAAc35I,IAG5EoiJ,EAAS3tJ,UAAUiwJ,cAAgB,SAAU/vJ,GAC3CA,EAAMm8B,iBACNn8B,EAAMo8B,kBACNj9B,KAAK2yF,WAAa9xF,EAAMowJ,cAG1B3C,EAAS3tJ,UAAU+7B,cAAgB,SAAU77B,GAC3C,IAAIk1J,EACAzkI,EAEJ,GAAIzwB,aAAiBwlF,eAAiBrmF,KAAKuxJ,2BAA4B,CACrEvxJ,KAAKuxJ,4BAA6B,EAClC,IAAI9iH,EAAgB,IAAI,KAA+B5tC,GAEnDqK,OAAW,EAEf,GAHAomB,EAAUtxB,KAAK6M,MAAMm6E,WAMd,CACL,IAAIhhF,EAAKhG,KAAK2yG,QAAQgqC,WAAWhwI,MAAM3M,KAAK2yG,QAAQ2oC,KAAMhqH,GACtDouD,EAAW1/E,KAAKmsH,MAAMnmH,GAC1BkF,EAAW,KAA2Bw0E,EAASpuD,cAL/CA,EAAUtxB,KAAK6M,MAAM06E,WACrBr8E,EAAW,KAA2BlL,KAAKg0J,UAAU1iI,SAOvDykI,EAAc,IAAI,GAA2B7qJ,EAASsG,KAAOtG,EAASkrB,MAAOlrB,EAAS2Y,IAAK4qB,OACtF,CACL,IAAIrN,EAAa,IAAI,KAAyBvgC,GAC1C0pB,EAAOvqB,KAAK81J,cAAc10H,EAAWt+B,QAEzC,IAAKynB,EACH,OAGF+G,EAAU/G,EAAK1d,MAAMg5I,aACrBkQ,EAAc,IAAI,GAAwB30H,GAG5CphC,KAAK2yG,QAAQ9nG,WAAW6xB,cAAc18B,KAAK2yG,QAAQ2oC,KAAMhqH,EAASykI,IAGpEzH,EAAS3tJ,UAAUm8B,UAAY,SAAU5wB,GACvC,IAAIrL,EAAQ,IAAI,KAA+BqL,GAC/ClM,KAAKuxJ,2BAA+C,KAAlB1wJ,EAAMk8B,SAErCl8B,EAAM6gC,UAA8B,KAAlB7gC,EAAMk8B,QAIvBl8B,EAAMiC,QAAUjC,EAAMiC,OAAOyuB,SAAkD,UAAvC1wB,EAAMiC,OAAOyuB,QAAQvI,gBAI7DhpB,KAAKuxJ,6BACP1wJ,EAAMm8B,iBACNn8B,EAAMo8B,mBAGRj9B,KAAK2yG,QAAQ9nG,WAAWiyB,UAAU98B,KAAK2yG,QAAQ2oC,KAAMz6I,KAGvDytJ,EAAS3tJ,UAAU6/B,QAAU,SAAUt0B,GACjClM,KAAKuxJ,4BACPvxJ,KAAK08B,cAAcxwB,GAGrBlM,KAAKuxJ,4BAA6B,EAClCvxJ,KAAK2yG,QAAQ9nG,WAAW21B,QAAQxgC,KAAK2yG,QAAQ2oC,KAAM,IAAI,KAA+BpvI,KAGxFoiJ,EAAS3tJ,UAAU4/I,YAAc,SAAUh2H,EAAMre,GAC/C,IAAIlM,KAAK6M,MAAM+yI,eAAf,CAIA,IAEIh/F,EAFAtvB,EAAU/G,EAAK1d,MAAMg5I,aACrB34I,EAAYlN,KAAK6M,MAAMmJ,eAY3B,GARE4qC,EADE1zC,EAAUkd,QAAQkH,IAAY,EACrBpkB,EAEA,CAACokB,GAGdplB,EAAEk+I,aAAa4L,cAAgB,WAC/B9pJ,EAAEk+I,aAAa6L,QAAQ,KAAcC,UAAW7yE,KAAKsG,UAAU,CAACp/D,EAAKzL,OAEjE5S,EAAEk+I,aAAa+L,aAAc,CAC/B,IAAIjsJ,OAAQ,EAGVA,EADElK,KAAK2yG,QAAQo7C,IAAIqI,aACXp2J,KAAK2yG,QAAQo7C,IAAIqI,aAAap2J,KAAK2yG,QAAQ2oC,KAAM16F,GAEjDv0B,OAAOu0B,EAASr0C,QAG1B,IAAI8pJ,EAAc5hJ,SAASyE,cAAc,OACzCm9I,EAAY1mJ,UAAY,yBACxB0mJ,EAAYh9I,YAAcnP,EAC1BuK,SAAS4M,KAAK/H,YAAY+8I,GAC1BnqJ,EAAEk+I,aAAa+L,aAAaE,GAAc,IAAK,IAC/Cv0J,WAAW,WACT,OAAO2S,SAAS4M,KAAKqrC,YAAY2pG,IAChC,GAGLr2J,KAAK2uJ,uBAAyB,IAAI,GAA4B/tG,GAC9D,KAAU01G,uBAAyB,IAAI,GAAoC11G,GAC3E5gD,KAAK2yG,QAAQo7C,IAAIxN,YAAYvgJ,KAAK2yG,QAAQ2oC,KAAMt7I,KAAK2uJ,uBAAwB,IAAI,KAAqBziJ,MAGxGoiJ,EAAS3tJ,UAAU41J,+BAAiC,WAClD,IAAIn1J,EAAQpB,KAERw2J,EAAU,KAAqBx2J,KAAKoiD,SAASv+B,IAE5C7jB,KAAK+uJ,4BACR/uJ,KAAK+uJ,0BAA4B5P,OAAOsX,YAAY,WAClD,GAAgC,OAA5Br1J,EAAM6tJ,kBAAV,CAIA,IAAIpwF,EAAOz9D,EAAM6tJ,kBAAoBuH,EACjCE,EAAa,EACbC,EAAav1J,EAAM4wJ,WAAa,GAEhCnzF,EAAO,GACT63F,EAAar1J,KAAKw5B,KAAK,GAAI,IAAOgkC,EAAO,KAChCA,EAAO83F,IAChBD,EAAar1J,KAAK8sE,IAAI,GAAI,IAAOtP,EAAO83F,KAG1Cv1J,EAAMuxF,WAAa+jE,IAClB,IACH12J,KAAK42J,iCACL52J,KAAKgvJ,yBAA2B7P,OAAOr9I,WAAW,WAChDV,EAAMy1J,kCAENz1J,EAAM4tJ,yBAA2B,MAChC,OAIPV,EAAS3tJ,UAAUk2J,gCAAkC,WAC/C72J,KAAK+uJ,4BACP5P,OAAO2X,cAAc92J,KAAK+uJ,2BAC1B/uJ,KAAK+uJ,0BAA4B,MAGnC/uJ,KAAK42J,kCAGPtI,EAAS3tJ,UAAUi2J,+BAAiC,WAC9C52J,KAAKgvJ,2BACP7P,OAAOxlI,aAAa3Z,KAAKgvJ,0BACzBhvJ,KAAKgvJ,yBAA2B,OAIpCV,EAAS3tJ,UAAU6/I,WAAa,SAAUt0I,GACxC,IAAI9K,EAAQpB,KAEZkM,EAAE8wB,iBAEF,IAuCI1L,EAvCAzwB,EAAQ,IAAI,KAAqBqL,GACjCwzE,EAAW1/E,KAAK81J,cAAcj1J,EAAMiC,QAExC,IAAK48E,GAA2B,IAAf7+E,EAAM2jB,MAA6B,IAAf3jB,EAAMu8B,MAAcv8B,EAAMulF,aAAajsE,OAAS,KAAc48I,WAejG,OAbI/2J,KAAK4uJ,oBAEP5uJ,KAAK6uJ,mBAAmB/gJ,QAAQ,SAAUU,GACxC,OAAOA,EAAEwoJ,YAAa,IAExBh3J,KAAK6uJ,mBAAqB,GAC1B7uJ,KAAK8uJ,sBAAsBrtJ,WAG7BzB,KAAK62J,kCACL72J,KAAK4uJ,kBAAoB,KACzB5uJ,KAAKi3J,mBAAqB,KAC1Bj3J,KAAKivJ,kBAAoB,MAClB,EAOT,GAHAjvJ,KAAKu2J,iCACLv2J,KAAKivJ,kBAAoBpuJ,EAAMu8B,MAE1Bp9B,KAAK2uJ,uBAER,GAAI,KAAU2H,uBACZt2J,KAAK2uJ,uBAAyB,KAAU2H,2BACnC,CACL,IAAKz1J,EAAMupJ,aAAa/0F,MACtB,OAAO,EAGTr1D,KAAK2uJ,uBAAyB,IAAI,GAItC3uJ,KAAK2uJ,uBAAuB//H,OAAO/tB,EAAMulF,aAAagkE,cAEtD,IACI8M,EADA3sI,EAAOm1D,EAAS7yE,MAGpB,EAAG,CAID,GAHAykB,EAAU/G,EAAOA,EAAKs7H,aAAe7lJ,KAAK6M,MAAM06E,aAChD2vE,EAAWl3J,KAAK2yG,QAAQo7C,IAAIvN,WAAWxgJ,KAAK2yG,QAAQ2oC,KAAMt7I,KAAK2uJ,uBAAwBr9H,EAASzwB,KAE3D,IAApBq2J,EAASC,OAGtB,MAGJ5sI,EAAOA,GAAQA,EAAK61B,aACb71B,GAET,IAAKA,EAEH,OADAvqB,KAAKi3J,mBAAqB,MACnB,EAGT,IAAIG,EAAUF,GAAYA,EAAS3uB,OAE/B6uB,GACFp3J,KAAKi3J,mBAAqB1sI,EAAKs7H,aAC/BhlJ,EAAMm8B,iBACNn8B,EAAMupJ,aAAaiN,WAAiC,IAApBH,EAASI,OAEvC,OAAS,QAEXt3J,KAAKi3J,mBAAqB,KAK5B,IAloCoBM,EAAK/8I,EAkoCrBo0I,EAAoBrkI,EAAKvkB,KAAOhG,KAAKg0J,UAAUhuJ,GAAKhG,KAAKg0J,UAAYh0J,KAAKmsH,MAAM5hG,EAAKvkB,IAEzF,IAAIhG,KAAKwxJ,8BAAgCxxJ,KAAK4uJ,oBAAsBA,IApoChD2I,EAooCqFv3J,KAAKw3J,2BApoCrFh9I,EAooCiH08I,KAnoCvIK,IAAQ/8I,GAED+8I,GAAQ/8I,GAET+8I,EAAIhvB,SAAW/tH,EAAM+tH,QAErBgvB,EAAIJ,SAAW38I,EAAM28I,QAErBI,EAAID,SAAW98I,EAAM88I,YA4nC5Bt3J,KAAKwxJ,8BAA+B,EAEhCxxJ,KAAK4uJ,oBACP5uJ,KAAK6uJ,mBAAmB/gJ,QAAQ,SAAUU,GACxC,OAAOA,EAAEwoJ,YAAa,IAExBh3J,KAAK6uJ,mBAAqB,GAC1B7uJ,KAAK8uJ,sBAAsBrtJ,WAG7BzB,KAAK4uJ,kBAAoBA,EACzB5uJ,KAAKw3J,2BAA6BN,EAE9BE,GAAS,CAOX,GALIp3J,KAAK4uJ,oBACP5uJ,KAAK4uJ,kBAAkBoI,YAAa,EACpCh3J,KAAK6uJ,mBAAmBzgJ,KAAKpO,KAAK4uJ,oBAGZ,IAApBsI,EAASC,OAMT,IAHA,IAAIxN,EAAMp/H,EAAKg9H,eACX7oG,OAAQ,EAELA,EAAQirG,EAAI1oI,SACjBy+D,EAAW1/E,KAAKmsH,MAAMztE,EAAM14C,OAG1B05E,EAASs3E,YAAa,EACtBh3J,KAAK6uJ,mBAAmBzgJ,KAAKsxE,IAKrC,GAAIw3E,EAASO,WAAY,CACvB,IAAIC,EAAmB,YAAQ,KAC/B13J,KAAK8uJ,sBAAwB,IAAuB,WAClD,OAAO4I,EAAiBj6I,WAE1Bi6I,EAAiBp0J,KAAK,WACpB,OAAOlC,EAAMuxG,QAAQ2oC,KAAK9zD,OAAOpmF,EAAM61J,sBACtC3zJ,KAAK,WACN,OAAOlC,EAAMowJ,8BAA+B,KAMpD,OAAO,GAGTlD,EAAS3tJ,UAAUwwJ,OAAS,SAAUjlJ,GACpC,GAAIlM,KAAKi3J,mBAAoB,CAC3B,IAAIU,EAAU,IAAI,KAAqBzrJ,GACvCyrJ,EAAQ36H,iBACRh9B,KAAK2uJ,uBAAuB//H,OAAO+oI,EAAQvxE,aAAagkE,cACxDpqJ,KAAK2yG,QAAQo7C,IAAIrN,KAAK1gJ,KAAK2yG,QAAQ2oC,KAAMt7I,KAAK2uJ,uBAAwB3uJ,KAAKi3J,mBAAoBU,GAC/F33J,KAAKoxJ,UAAUllJ,GAGjBlM,KAAK62J,mCAGPvI,EAAS3tJ,UAAUywJ,UAAY,SAAUllJ,GACnClM,KAAK4uJ,oBACP5uJ,KAAK6uJ,mBAAmB/gJ,QAAQ,SAAUU,GACxC,OAAOA,EAAEwoJ,YAAa,IAExBh3J,KAAK6uJ,mBAAqB,IAG5B7uJ,KAAK8uJ,sBAAsBrtJ,UAC3BzB,KAAK62J,kCACL72J,KAAK2uJ,uBAAyB,KAC9B,KAAU2H,4BAAyBt0J,EACnChC,KAAKi3J,mBAAqB,KAC1Bj3J,KAAK4uJ,kBAAoB,KACzB5uJ,KAAKivJ,kBAAoB,MAG3BX,EAAS3tJ,UAAUkiD,QAAU,WACtB7iD,KAAK2yG,QAAQxwG,QAAQ2tJ,eACxB,KAAa9vJ,KAAKgrB,QAAS,WAG7BhrB,KAAKmvJ,YAAYptJ,QAGnBusJ,EAAS3tJ,UAAUiiD,OAAS,WACrB5iD,KAAK2yG,QAAQxwG,QAAQ2tJ,eACxB,KAAgB9vJ,KAAKgrB,QAAS,WAGhChrB,KAAKgrB,QAAQo4B,gBAAgB,yBAE7BpjD,KAAKovJ,WAAWrtJ,QAIlBusJ,EAAS3tJ,UAAUkwJ,gBAAkB,SAAUhwJ,GAC7C,GAAKb,KAAK8xJ,UAAV,CAKA,IAAI8F,EAAc/2J,EAAM+2J,YAEpBA,KAAiB/2J,EAAMg3J,sBAAwB,SAGxCD,KAAiB/2J,EAAMi3J,sBAAwB,WACxD93J,KAAK61J,gBAAkB,QAKzBh1J,EAAMo8B,kBACNp8B,EAAMm8B,iBACNh9B,KAAK8xJ,UAAUiG,WAAWl3J,EAAMm3J,YAV9Bh4J,KAAK61J,gBAAkB,UAa3BvH,EAAS3tJ,UAAUowJ,2BAA6B,SAAUlwJ,GACxDb,KAAK2yF,WAAa9xF,EAAMowJ,cAG1B3C,EAAS3tJ,UAAUmwJ,eAAiB,SAAUjwJ,GAC5CA,EAAM2+I,cAAgB/qI,SAASwjJ,iBAAiBp3J,EAAMq3J,QAASr3J,EAAMs3J,SACrEn4J,KAAKu/I,MAAM1+I,IAIbytJ,EAAS3tJ,UAAU0xJ,gBAAkB,SAAU9nI,GAC7C,IAAI6tI,EAAe,KACfnM,EAAYjsJ,KAAKisJ,UAAU1hI,GAE3B0hI,GAAaA,EAAU36H,UACzB8mI,EAAenM,EAAU36H,SAG3B/G,EAAK0jI,YAAYjuJ,KAAKqwJ,cAAe+H,IAGvC9J,EAAS3tJ,UAAU2xJ,kBAAoB,SAAU/nI,GAC1CA,GAILA,EAAK6jI,iBAIPE,EAAS3tJ,UAAUi1J,iBAAmB,SAAUrrI,GAC9C,OAAOA,EAAK1G,IAAM7jB,KAAKqxJ,cAAgBrxJ,KAAKsxJ,kBAAoB/mI,EAAK1G,IAAM0G,EAAKzG,OAAS9jB,KAAKqxJ,eAGhG/C,EAAS3tJ,UAAUm1J,cAAgB,SAAUxkI,GAC3C,IAAIsR,EAAY5iC,KAAKg0J,UACjB/3E,EAAK3qD,EAET,EAAG,CAKD,GAJI2qD,EAAGqyE,EAASH,WACdvrH,EAAYq5C,EAAGqyE,EAASH,UAGtBlyE,IAAOj8E,KAAKoiD,SAAW65B,IAAOj8E,KAAKgrB,QACrC,OAAO4X,EAGT,GAAIq5C,IAAOj8E,KAAK+vJ,kBAAkBn2I,cAAgBqiE,IAAOxnE,SAAS4M,KAChE,aAEK46D,EAAKA,EAAGxvD,gBAMnB6hI,EAAS3tJ,UAAU6xJ,aAAe,WAC5BxyJ,KAAK6M,QACP7M,KAAKyvJ,eAAiB,IAAkBzvJ,KAAKyvJ,gBAC7CzvJ,KAAK6M,MAAQ,OAIjByhJ,EAAS3tJ,UAAUc,QAAU,WAC3B,IAAIL,EAAQpB,KAGZA,KAAK+vJ,kBAAkBtuJ,UACvBzB,KAAKwyJ,eACLxyJ,KAAK0vJ,cAAgB,IAAkB1vJ,KAAK0vJ,eAE5C1vJ,KAAKmvJ,YAAY1tJ,UAEjBzB,KAAKovJ,WAAW3tJ,UAEZzB,KAAKgrB,QAAQqtI,YACfr4J,KAAKgrB,QAAQqtI,WAAW3rG,YAAY1sD,KAAKgrB,SAGvChrB,KAAKmsH,OACP/rH,OAAO6lB,KAAKjmB,KAAKmsH,OAAOr+G,QAAQ,SAAU2C,GACxC,OAAOrP,EAAM+qH,MAAM17G,GAAK29I,kBAIxBpuJ,KAAK2yG,QAAQg6C,OACf3sJ,KAAK2yG,QAAQg6C,MAAMlrJ,UAGrBsI,EAAOpJ,UAAUc,QAAQwI,KAAKjK,OAGhCsuJ,EAASH,QAAU,kBACnBG,EAAS8F,yBAA2B,IACpC9F,EAASgB,QAAU,EACZhB,EA70CT,CA80CE,ICpuDE,GAEJ,WA6BE,OA5BA,SAAqBhT,EAAM7vD,EAAetpF,GASxC,QARgB,IAAZA,IACFA,EAAU,IAGZnC,KAAKs7I,KAAOA,EACZt7I,KAAKyrF,cAAgBA,EACrBzrF,KAAKmC,QAAUA,GAEVspF,EAAckxD,WACjB,MAAM,IAAI7kG,MAAM,+CAGlB93C,KAAK28I,WAAalxD,EAAckxD,WAChC38I,KAAK04C,SAAW+yC,EAAc/yC,SAC9B14C,KAAK6K,WAAa4gF,EAAc5gF,YAAc,IAAI,GAA+B,CAC/EyyI,cAAe,EAGf33D,gBAAoD,mBAA5BxjF,EAAQwjF,iBAAiCxjF,EAAQwjF,kBAE3E3lF,KAAK+tJ,IAAMtiE,EAAcsiE,KAAO,IAAI,GACpC/tJ,KAAK8b,OAAS2vE,EAAc3vE,QAAU,IAAI,GAC1C9b,KAAKioJ,OAASx8D,EAAcw8D,OAC5BjoJ,KAAK4lF,sBAAwB6F,EAAc7F,uBAAyB,IAAI,GACxE5lF,KAAK6vJ,OAASpkE,EAAcokE,QA1BhC,GAiCI,GAAgB,CAClB7O,oBAAqB,KAAMvzG,QAAQ,WACnCyzG,8BAA+B,KAAMzzG,QAAQ,WAC7C0zG,8BAA+B,KAAM1zG,QAAQ,WAC7C2zG,gCAAiC,KAAM3zG,QAAQ,WAC/C4zG,gCAAiC,KAAM5zG,QAAQ,WAC/C6zG,gCAAiC,KAAM7zG,QAAQ,WAC/C+zG,oBAAqB,KAAM/zG,QAAQ,WACnCi0G,mBAAoB,KAAMj0G,QAAQ,YAGhC,GAEJ,WACE,SAAS6qH,EAAK/2G,EAAWkqC,EAAetpF,QACtB,IAAZA,IACFA,EAAU,IAGZnC,KAAKu4J,kBAAoB,IAAI,KAC7Bv4J,KAAKimF,iBAAmBjmF,KAAKu4J,kBAAkB13J,MAC/Cb,KAAKw4J,sBAAwB,IAAI,KACjCx4J,KAAKkmF,qBAAuBlmF,KAAKw4J,sBAAsB33J,MACvDb,KAAKy4J,mBAAqB,IAAI,KAC9Bz4J,KAAK2iJ,iBAAmB,IAAI,KAC5B3iJ,KAAK+iJ,mBAAqB,IAAI,KAC9B/iJ,KAAK8hJ,WAAa,IAAI,KACtB9hJ,KAAKoY,aAAepY,KAAK8hJ,WAAWjhJ,MACpCb,KAAKuhD,UAAYA,EACjB,aAAMp/C,EAAS,IAAe,GAC9BA,EAAQyrJ,cAAiD,kBAA1BzrJ,EAAQyrJ,cAA6BzrJ,EAAQyrJ,cAAgB,GAC5FzrJ,EAAQmuJ,aAAsC,IAAxBnuJ,EAAQmuJ,YAC9BnuJ,EAAQ0rJ,aAA+C,kBAAzB1rJ,EAAQ0rJ,aAA4B1rJ,EAAQ0rJ,aAAe,GACzF1rJ,EAAQ2tJ,eAA0C,IAA1B3tJ,EAAQ2tJ,cAChC3tJ,EAAQ+iF,YAAoC,IAAvB/iF,EAAQ+iF,WAC7B/iF,EAAQwrJ,cAAwC,IAAzBxrJ,EAAQwrJ,aAC/BxrJ,EAAQ8xJ,aAAsC,IAAxB9xJ,EAAQ8xJ,YAC9Bj0J,KAAK2yG,QAAU,IAAI,GAAY3yG,KAAMyrF,EAAetpF,GACpDnC,KAAK6M,MAAQ,IAAI,GAAgB7M,KAAK2yG,SACtC3yG,KAAK68E,KAAO,IAAI,GAAc78E,KAAK2yG,QAAS3yG,KAAKuhD,WACjDvhD,KAAK68E,KAAKkH,SAAS/jF,KAAK6M,OACxB7M,KAAKu4J,kBAAkBl2G,MAAQriD,KAAK6M,MAAM8+C,WAC1C3rD,KAAKw4J,sBAAsBn2G,MAAQriD,KAAK6M,MAAMi2H,YAC9C9iI,KAAKy4J,mBAAmBp2G,MAAQriD,KAAK6M,MAAMk8I,eAC3C/oJ,KAAK2iJ,iBAAiBtgG,MAAQriD,KAAK6M,MAAM+1I,gBACzC5iJ,KAAK+iJ,mBAAmB1gG,MAAQriD,KAAK6M,MAAMm2I,kBAyK7C,OAtKAsV,EAAK33J,UAAUkrB,MAAQ,SAAU+iB,GAC/B5uC,KAAK68E,KAAKzuC,YAAYQ,IAGxBxuC,OAAOM,eAAe43J,EAAK33J,UAAW,aAAc,CAClDC,IAAK,WACH,OAAOZ,KAAK68E,MAAQ78E,KAAK68E,KAAK67E,YAEhC53J,YAAY,EACZC,cAAc,IAGhBu3J,EAAK33J,UAAUgxJ,eAAiB,WAC9B,OAAO3xJ,KAAK68E,KAAK80E,kBAGnB2G,EAAK33J,UAAU4jD,OAAS,SAAUzgC,EAAQsS,GACxCp2B,KAAK68E,KAAKt4B,OAAOzgC,EAAQsS,IAG3BkiI,EAAK33J,UAAU6jF,SAAW,WACxBxkF,KAAK68E,KAAKrnE,SAGZ8iJ,EAAK33J,UAAUg4J,aAAe,WAC5B,OAAO34J,KAAK68E,KAAK+0E,aAGnB0G,EAAK33J,UAAUi4J,QAAU,WACvB54J,KAAK68E,KAAKv5B,QAGZg1G,EAAK33J,UAAUomF,SAAW,SAAUz1D,GAClC,OAAOtxB,KAAK6M,MAAMk6E,SAASz1D,IAG7BgnI,EAAK33J,UAAU4mF,SAAW,WACxB,OAAOvnF,KAAK6M,MAAM06E,YAGpB+wE,EAAK33J,UAAU6mF,OAAS,SAAUl2D,GAChC,OAAOtxB,KAAK6M,MAAM26E,OAAOl2D,IAG3BgnI,EAAK33J,UAAUm+I,SAAW,SAAUxtH,EAAS+0H,GAK3C,YAJkB,IAAdA,IACFA,GAAY,GAGPrmJ,KAAK6M,MAAMiyI,SAASxtH,EAAS+0H,IAGtCiS,EAAK33J,UAAUy/I,gBAAkB,SAAU9uH,EAAS+0H,GAKlD,YAJkB,IAAdA,IACFA,GAAY,GAGPrmJ,KAAK6M,MAAMuzI,gBAAgB9uH,EAAS+0H,IAG7CiS,EAAK33J,UAAUk+I,WAAa,SAAUvtH,GACpC,OAAOtxB,KAAK6M,MAAMgyI,WAAWvtH,IAG/BgnI,EAAK33J,UAAUkhE,OAAS,SAAUvwC,EAAS20H,GAKzC,YAJoB,IAAhBA,IACFA,EAAc,MAGTjmJ,KAAK6M,MAAMg1D,OAAOvwC,EAAS20H,IAGpCqS,EAAK33J,UAAUi/I,aAAe,WAC5B,OAAO5/I,KAAK6M,MAAM+yI,gBAGpB0Y,EAAK33J,UAAUk/I,eAAiB,SAAUyJ,GACxCtpJ,KAAK6M,MAAMs8I,aAAa,KAAMG,IAGhCgP,EAAK33J,UAAU+pC,aAAe,SAAUkW,EAAU0oG,GAChDtpJ,KAAK6M,MAAM69B,aAAakW,EAAU0oG,IAGpCgP,EAAK33J,UAAUqV,aAAe,WAC5B,OAAOhW,KAAK6M,MAAMmJ,gBAGpBsiJ,EAAK33J,UAAUg+I,eAAiB,SAAU2K,GACxCtpJ,KAAK6M,MAAM69B,aAAa,GAAI4+G,IAG9BgP,EAAK33J,UAAU+lF,SAAW,SAAUp1D,EAASg4H,GAC3CtpJ,KAAK6M,MAAM65E,SAASp1D,EAASg4H,IAG/BgP,EAAK33J,UAAUqmF,SAAW,WACxB,OAAOhnF,KAAK6M,MAAMm6E,YAGpBsxE,EAAK33J,UAAUylI,UAAY,SAAU3oF,EAAO6rG,GAC1CtpJ,KAAK6M,MAAMu5H,UAAU3oF,EAAO6rG,IAG9BgP,EAAK33J,UAAU+lI,cAAgB,SAAUjpF,EAAO6rG,GAC9CtpJ,KAAK6M,MAAM65H,cAAcjpF,EAAO6rG,IAGlCgP,EAAK33J,UAAUq/I,YAAc,SAAUsJ,GACrCtpJ,KAAK6M,MAAMmzI,YAAYsJ,IAGzBgP,EAAK33J,UAAUw/I,gBAAkB,SAAUmJ,GACzCtpJ,KAAK6M,MAAMszI,gBAAgBmJ,IAG7BgP,EAAK33J,UAAUimI,WAAa,SAAU0iB,EAAc9nB,GAClDxhI,KAAK6M,MAAM+5H,WAAW0iB,EAAc9nB,IAGtC82B,EAAK33J,UAAUkpJ,SAAW,SAAUrnH,EAAO8mH,GACzCtpJ,KAAK6M,MAAMg9I,SAASrnH,EAAO8mH,IAG7BgP,EAAK33J,UAAU2lI,UAAY,SAAUgjB,EAAc9nB,GACjDxhI,KAAK6M,MAAMy5H,UAAUgjB,EAAc9nB,IAGrC82B,EAAK33J,UAAUulI,cAAgB,SAAUojB,GACvCtpJ,KAAK68E,KAAKqpD,cAAcojB,IAG1BgP,EAAK33J,UAAU6lI,kBAAoB,SAAU8iB,GAC3CtpJ,KAAK68E,KAAK2pD,kBAAkB8iB,IAG9BgP,EAAK33J,UAAU+9I,WAAa,SAAU4K,GACpCtpJ,KAAK6M,MAAM65E,SAAS,KAAM4iE,IAG5BgP,EAAK33J,UAAUc,QAAU,WACvBzB,KAAK8hJ,WAAW//I,OAEG,OAAf/B,KAAK6M,QACP7M,KAAK6M,MAAMpL,UACXzB,KAAK6M,MAAQ,MAGG,OAAd7M,KAAK68E,OACP78E,KAAK68E,KAAKp7E,UACVzB,KAAK68E,KAAO,MAGd78E,KAAKu4J,kBAAkB92J,UAEvBzB,KAAKw4J,sBAAsB/2J,UAE3BzB,KAAKy4J,mBAAmBh3J,UAExBzB,KAAK2iJ,iBAAiBlhJ,UAEtBzB,KAAK+iJ,mBAAmBthJ,UAExBzB,KAAK8hJ,WAAWrgJ,WAGX62J,EAzMT,GCxDI,I,OAAsC,WACxC,IAAItvJ,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,IAsCtC,GAAc,CAChBqvJ,sBAAuB,KAAMprH,QAAQ,YAMnC,GAEJ,SAAU1jC,GAGR,SAAS+uJ,EAAYv3G,EAAWp/C,GAC9B,IAAIf,EAAQ2I,EAAOE,KAAKjK,OAASA,KAajC,OAXAoB,EAAMe,QAAUA,GAAW/B,OAAOC,OAAO,MACzC,aAAMe,EAAMe,QAAS,IAAa,GAClCf,EAAM23J,UAAY,EAClB33J,EAAMy3J,sBAAwBz3J,EAAMe,QAAQ02J,sBAE5Cz3J,EAAMsK,UAAUtK,EAAM43J,qBAAuB,IAAI,IAAiB,WAChE,OAAO,aAAK53J,EAAMkwB,UACjB,IAEHlwB,EAAMf,OAAOkhD,GAENngD,EA6ET,OA7FA,GAAU03J,EAAa/uJ,GAmBvB+uJ,EAAYn4J,UAAUN,OAAS,SAAUkhD,GACvCvhD,KAAKsxB,QAAU7c,SAASyE,cAAc,OACtC,aAASlZ,KAAKsxB,QAjCW,6BAkCzBiwB,EAAUjoC,YAAYtZ,KAAKsxB,SAC3BtxB,KAAKs2D,IAAM7hD,SAASyE,cAAc,OAClC,aAASlZ,KAAKs2D,IAnCK,gBAoCnBt2D,KAAKsxB,QAAQhY,YAAYtZ,KAAKs2D,KAC9Bt2D,KAAKouC,eAGP0qH,EAAYn4J,UAAUs4J,IAAM,WAC1Bj5J,KAAKs2D,IAAIzqC,MAAMuK,MAAQ,UACvBp2B,KAAKs2D,IAAIzqC,MAAMw7E,QAAU,IACzB,aAAcrnG,KAAKsxB,QA/CN,SACE,WACA,YA8CftxB,KAAK+4J,UAAY,EACjB/4J,KAAKk5J,eAAYl3J,GAOnB82J,EAAYn4J,UAAUu0B,KAAO,WAC3B,OAAOl1B,KAAKm5J,QAAO,IAGrBL,EAAYn4J,UAAUw4J,OAAS,SAAUC,GACvC,IAAIh4J,EAAQpB,KA2BZ,OAzBA,aAASA,KAAKsxB,QAhEH,QAkEN,aAAStxB,KAAKsxB,QAhEJ,aA4EXtxB,KAAKs2D,IAAIzqC,MAAMw7E,QAAU,IAErB+xD,EACFt3J,WAAW,WACT,OAAOV,EAAM63J,OACZ,KAEHj5J,KAAKi5J,QAlBTj5J,KAAKs2D,IAAIzqC,MAAMuK,MAAQ,UAEnBgjI,EACFt3J,WAAW,WACT,OAAOV,EAAM63J,OACZ,KAEHj5J,KAAKi5J,OAeFj5J,MAGT84J,EAAYn4J,UAAUgkB,KAAO,WAC3B,aAAK3kB,KAAKsxB,SACVtxB,KAAKg5J,qBAAqBv7I,UAG5Bq7I,EAAYn4J,UAAUkrB,MAAQ,SAAU+iB,GACtC5uC,KAAK64J,sBAAwBjqH,EAAOiqH,sBACpC74J,KAAKouC,eAGP0qH,EAAYn4J,UAAUytC,YAAc,WAClC,GAAIpuC,KAAKs2D,IAAK,CACZ,IAAIl8C,EAAapa,KAAK64J,sBAAwB74J,KAAK64J,sBAAsBt3J,WAAa,KACtFvB,KAAKs2D,IAAIzqC,MAAMwK,gBAAkBjc,IAI9B0+I,EA9FT,CA+FE,KC9IE,GAAsC,WACxC,IAAI9vJ,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA0CtC,GAEJ,SAAUO,GAGR,SAASsvJ,IACP,OAAkB,OAAXtvJ,GAAmBA,EAAOuW,MAAMtgB,KAAM2W,YAAc3W,KAW7D,OAdA,GAAUq5J,EAAqBtvJ,GAM/BsvJ,EAAoB14J,UAAU+7B,cAAgB,SAAU4+G,EAAMhqH,EAASzwB,GACrE,OAAI2T,GAAA,EACKxU,KAAKo+I,YAAY9C,EAAMhqH,EAASzwB,GAGlCkJ,EAAOpJ,UAAU+7B,cAAczyB,KAAKjK,KAAMs7I,EAAMhqH,EAASzwB,IAG3Dw4J,EAfT,CAgBE,IAGE,GAAgB,CAClBj/I,WAAY,KAAMqzB,QAAQ,WAC1BpzB,WAAY,KAAMozB,QAAQ,WAC1ByuG,sBAAuB,KAAMzuG,QAAQ,WACrCwuG,kBAAmB,KAAMxuG,QAAQ,WACjC6rH,aAAc,KAAM7rH,QAAQ,WAC5BorH,sBAAuB,KAAMprH,QAAQ,YAEnC8rH,GAA2BzvJ,EAAA,EAAa,qBAAsB,8CAE9D,GAEJ,SAAUC,GAGR,SAASyvJ,EAAgBj4G,EAAWk4G,EAAWt3J,GAC7C,IAAIf,EAAQ2I,EAAOE,KAAKjK,OAASA,KASjC,OAPAoB,EAAM4qF,YAAa,EACnB5qF,EAAMmgD,UAAYA,EAClBngD,EAAMq4J,UAAYA,EAClBr4J,EAAMe,QAAUA,EAChBf,EAAMwtC,OAASzsC,GAAW/B,OAAOC,OAAO,MACxC,aAAMe,EAAMwtC,OAAQ,IAAe,GACnCxtC,EAAMyL,MAAQ,KACPzL,EAq2BT,OAj3BA,GAAUo4J,EAAiBzvJ,GAe3ByvJ,EAAgB74J,UAAUmM,SAAW,WACnC,OAAO9M,KAAK6M,OAGd2sJ,EAAgB74J,UAAUN,OAAS,WACjC,IAAIe,EAAQpB,KAGZA,KAAKsxB,QAAU7c,SAASyE,cAAc,OACtC,KAAalZ,KAAKsxB,QAAS,4BAC3BtxB,KAAKuhD,UAAUjoC,YAAYtZ,KAAKsxB,SAEhCtxB,KAAK0L,UAAU,KAA0B1L,KAAKsxB,QAAS,KAAcooI,aAAc,SAAUxtJ,GAC3F,OAAO,KAAgBgpB,KAAKhpB,GAAG,MAIjClM,KAAK0L,UAAU,KAA0B1L,KAAKsxB,QAAS,KAAcizE,MAAO,SAAUr4F,GACpF,OAAO9K,EAAMu4J,iBACZ,IAEH35J,KAAK0L,UAAU,KAA0B1L,KAAKsxB,QAAS,KAAcmzE,KAAM,SAAUv4F,GACnF,OAAO9K,EAAMw4J,aAAa1tJ,KACzB,IAEHlM,KAAK0L,UAAU,KAA0B1L,KAAKsxB,QAAS,KAAcuoI,SAAU,SAAU3tJ,GACvF,IAAIuiC,EAAgB,IAAI,KAAsBviC,GAE9C,GAA8B,IAA1BuiC,EAAc1R,QAGd,KAAgB7H,KAAKhpB,GAAG,GAExB9K,EAAMujB,KAAK,QAGN,GAA8B,IAA1B8pB,EAAc1R,UAEvB0R,EAAc7O,SAAW6O,EAAc5O,UAAY4O,EAAci2C,QAAS,CAC5E,IAAIo1E,EAAQ5tJ,EAAE6tJ,cAAcC,iBAAiB,oEAEzCvrH,EAAc/M,UAAY+M,EAAc3rC,SAAWg3J,EAAM,IAC3D,KAAgB5kI,KAAKhpB,GAAG,GACxB4tJ,EAAMA,EAAMvtJ,OAAS,GAAGiJ,SACdi5B,EAAc/M,UAAY+M,EAAc3rC,SAAWg3J,EAAMA,EAAMvtJ,OAAS,KAClF,KAAgB2oB,KAAKhpB,GAAG,GACxB4tJ,EAAM,GAAGtkJ,aAMfxV,KAAKi6J,YAAcj6J,KAAK0L,UAAU,IAAI,GAAY1L,KAAKsxB,QAAS,CAC9DunI,sBAAuB74J,KAAK4uC,OAAOiqH,yBAErC74J,KAAKi6J,YAAYt1I,OAEjB3kB,KAAKk6J,eAAiBzlJ,SAASyE,cAAc,OAC7C,KAAalZ,KAAKk6J,eAAgB,oBAClCl6J,KAAKsxB,QAAQhY,YAAYtZ,KAAKk6J,gBAC9Bl6J,KAAK0mD,SAAW1mD,KAAK0L,UAAU,IAAI,GAAS1L,KAAKk6J,oBAAgBl4J,EAAW,CAC1E2/C,YAAa3hD,KAAKmC,QAAQg4J,kBAAoB,GAC9Cv4G,UAAW23G,GACXz4G,gBAAiB9gD,KAAK4uC,OAAOkS,gBAC7BC,gBAAiB/gD,KAAK4uC,OAAOmS,gBAC7Bc,YAAa7hD,KAAK4uC,OAAOiT,YACzBZ,8BAA+BjhD,KAAK4uC,OAAOqS,8BAC3Ca,8BAA+B9hD,KAAK4uC,OAAOkT,8BAC3Cd,0BAA2BhhD,KAAK4uC,OAAOoS,0BACvCG,iCAAkCnhD,KAAK4uC,OAAOuS,iCAC9CY,iCAAkC/hD,KAAK4uC,OAAOmT,iCAC9Cb,6BAA8BlhD,KAAK4uC,OAAOsS,6BAC1CG,+BAAgCrhD,KAAK4uC,OAAOyS,+BAC5CW,+BAAgChiD,KAAK4uC,OAAOoT,+BAC5CZ,2BAA4BphD,KAAK4uC,OAAOwS,8BAE1CphD,KAAKqkD,aAAerkD,KAAK0mD,SAASrC,aAClCrkD,KAAKqkD,aAAalW,aAAa,OAAQ,YACvCnuC,KAAKqkD,aAAalW,aAAa,gBAAiB,SAChDnuC,KAAKqkD,aAAalW,aAAa,oBAAqB,QAEpDnuC,KAAK0L,UAAU,KAA0B1L,KAAK0mD,SAASrC,aAAc,KAAc+1G,MAAO,SAAUluJ,GAClG,OAAO9K,EAAMi5J,YAGfr6J,KAAK0L,UAAU,KAA0B1L,KAAK0mD,SAASrC,aAAc,KAAcw1G,SAAU,SAAU3tJ,GACrG,IAAIuiC,EAAgB,IAAI,KAAsBviC,GAE1CouJ,EAAyBl5J,EAAMk5J,uBAAuB7rH,GAG1D,GAA8B,IAA1BA,EAAc1R,QAKb,GAA8B,KAA1B0R,EAAc1R,SAEQ,KAA1B0R,EAAc1R,SAEY,KAA1B0R,EAAc1R,SAEY,KAA1B0R,EAAc1R,QAGb,KAAgB7H,KAAKhpB,GAAG,GAExB9K,EAAMm5J,eAAe9rH,EAAc1R,QAAS0R,EAAc/M,UAItDtgC,EAAMslD,SAASrC,aAAa+/D,iBAAmBhjH,EAAMslD,SAASrC,aAAaggE,eAC7EjjH,EAAMslD,SAASrC,aAAa+/D,eAAiBhjH,EAAMslD,SAASnkD,MAAMgK,aAGnE,GAA8B,IAA1BkiC,EAAc1R,SAElBu9H,EAAwB,CACzB,KAAgBplI,KAAKhpB,GAAG,GAExB,IAAI4zI,EAAU1+I,EAAMk6I,KAAKt0D,WAErB84D,GACF1+I,EAAMo5J,gBAAgB1a,EAAS5zI,EAAGouJ,EAAyB,EAEzD,OAQZt6J,KAAKy6J,YAAchmJ,SAASyE,cAAc,OAC1C,KAAalZ,KAAKy6J,YAAa,2BAC/Bz6J,KAAKy6J,YAAYtsH,aAAa,YAAa,UAC3CnuC,KAAKy6J,YAAYtsH,aAAa,cAAe,QAC7CnuC,KAAKsxB,QAAQhY,YAAYtZ,KAAKy6J,aAE9Bz6J,KAAK06J,cAAgBjmJ,SAASyE,cAAc,OAC5C,KAAalZ,KAAK06J,cAAe,mBACjC16J,KAAKsxB,QAAQhY,YAAYtZ,KAAK06J,eAE9B,IAAIC,EAAa36J,KAAKmC,QAAQy4J,aAAe,SAAUr5G,EAAWp8B,EAAQzS,GACxE,OAAO,IAAI,GAAK6uC,EAAWp8B,EAAQzS,IAkKrC,OA/JA1S,KAAKs7I,KAAOt7I,KAAK0L,UAAUivJ,EAAW36J,KAAK06J,cAAe,CACxD/d,WAAY,IAAI,GAAW38I,MAC3B6K,WAAY,IAAI,GAAoB,CAClCyyI,cAAe,EAGf33D,gBAAiB3lF,KAAKmC,QAAQwjF,kBAEhCjtC,SAAU14C,KAAK04C,SAAW,IAAI,GAAS14C,KAAMA,KAAK4uC,QAClD9yB,OAAQ,IAAIkhI,GAAOh9I,MACnB4lF,sBAAuB,IAAIi3D,GAAsB78I,OAChD,CACD4tJ,cAAe,GACfC,aAAc,EACdiC,eAAe,EACfG,mBAAoB,EAGpBT,qBAAsB,EAGtB5tG,UAAW93C,EAAA,EAAa,gBAAiB,gBACzC67E,gBAAiB3lF,KAAKmC,QAAQwjF,gBAC9BgqE,kBAAkB,KAEpB3vJ,KAAK66J,YAAc76J,KAAKs7I,KAAKqW,iBAE7B3xJ,KAAK0L,UAAU1L,KAAKs7I,KAAKr1D,iBAAiB,SAAUplF,GAClDO,EAAM05J,eAAej6J,EAAM2U,MAAO3U,MAGpCb,KAAK0L,UAAU1L,KAAKs7I,KAAKp1D,qBAAqB,SAAUrlF,GACtD,GAAIA,EAAMqM,WAAarM,EAAMqM,UAAUX,OAAS,EAAG,CACjD,IAAI60B,EAAavgC,EAAMy9I,SAAWz9I,EAAMy9I,QAAQC,yBAAyB,KAAqB19I,EAAMy9I,QAAQC,mBAAgBv8I,EACxHs4J,IAAyBl5H,GAAahgC,EAAMk5J,uBAAuBl5H,GAEvEhgC,EAAMo5J,gBAAgB35J,EAAMqM,UAAU,GAAIrM,EAAOy5J,EAAyB,EAExE,OAMNt6J,KAAK0L,UAAU,KAA0B1L,KAAK06J,cAAe,KAAcb,SAAU,SAAU3tJ,GAC7F,IAAIuiC,EAAgB,IAAI,KAAsBviC,GAEzC9K,EAAM25J,6BAKmB,KAA1BtsH,EAAc1R,SAEW,KAA1B0R,EAAc1R,SAEY,KAA1B0R,EAAc1R,SAEY,KAA1B0R,EAAc1R,UAGb,KAAgB7H,KAAKhpB,GAAG,GAExB9K,EAAMm5J,eAAe9rH,EAAc1R,cAIzC/8B,KAAK0L,UAAU,KAA0B1L,KAAK06J,cAAe,KAAcM,OAAQ,SAAU9uJ,GAC3F,IAAIuiC,EAAgB,IAAI,KAAsBviC,GAC1C6wB,EAAU0R,EAAc1R,QAE5B,GAAK37B,EAAM25J,2BAAX,CAKA,IAAIE,EAAe75J,EAAM25J,2BAA2BG,YA2CpD,GA1CuC,IAAZn+H,GAExBk+H,EAAa1/I,KAAK,SAAUu9C,GAC7B,IAAIngD,EAAKmgD,EAAEsgF,WACPC,EAAY1gI,EAAG,GAGnB,OAFgBA,EAAG,KAMf0gI,EAAU33G,UAAwB,IAAZ3E,IAGlB0R,EAAc5O,SAAW4O,EAAc7O,QAAU6O,EAAci2C,YAOnE20D,EAAUz5G,QAAsB,IAAZ7C,QAMpBs8G,EAAUx5G,SAAuB,IAAZ9C,OAMrBs8G,EAAU30D,SAAuB,KAAZ3nD,OASD,CACxB,IAAIkjH,EAAU7+I,EAAMk6I,KAAKt0D,WAErBi5D,GACF7+I,EAAMo5J,gBAAgBva,EAAS/zI,QAMjClM,KAAKm7J,kBACPn7J,KAAKukD,OAAOvkD,KAAKm7J,kBAGnBn7J,KAAKouC,cAELpuC,KAAK0L,UAAU,KAA0B1L,KAAK06J,cAAe,KAAcb,SAAU,SAAU3tJ,GAC7F,IAAIuiC,EAAgB,IAAI,KAAsBviC,GAE1C9K,EAAM25J,4BAIoB,KAA1BtsH,EAAc1R,SAEW,KAA1B0R,EAAc1R,SAEY,KAA1B0R,EAAc1R,SAEY,KAA1B0R,EAAc1R,UAGb,KAAgB7H,KAAKhpB,GAAG,GAExB9K,EAAMm5J,eAAe9rH,EAAc1R,QAAS0R,EAAc/M,UAE1DtgC,EAAMy5J,YAAYrlJ,YAIjBxV,KAAKsxB,SAGdkoI,EAAgB74J,UAAUkrB,MAAQ,SAAU+iB,GAC1C5uC,KAAK4uC,OAASA,EACd5uC,KAAKouC,eAGPorH,EAAgB74J,UAAUytC,YAAc,WACtC,GAAIpuC,KAAKsxB,QAAS,CAChB,IAAIjX,EAAara,KAAK4uC,OAAOv0B,WAAara,KAAK4uC,OAAOv0B,WAAW9Y,WAAa,KAC1E6Y,EAAapa,KAAK4uC,OAAOx0B,WAAapa,KAAK4uC,OAAOx0B,WAAW7Y,WAAa,KAC1EstC,EAAc7uC,KAAK4uC,OAAOC,YAAc7uC,KAAK4uC,OAAOC,YAAYttC,WAAa,KAC7E+3J,EAAet5J,KAAK4uC,OAAO0qH,aAAet5J,KAAK4uC,OAAO0qH,aAAa/3J,WAAa,KACpFvB,KAAKsxB,QAAQzF,MAAMhc,MAAQwK,EAC3Bra,KAAKsxB,QAAQzF,MAAMwK,gBAAkBjc,EACrCpa,KAAKsxB,QAAQzF,MAAMgjB,YAAcA,EACjC7uC,KAAKsxB,QAAQzF,MAAM3R,YAAc20B,EAAc,MAAQ,KACvD7uC,KAAKsxB,QAAQzF,MAAMk5B,YAAclW,EAAc,QAAU,KACzD7uC,KAAKsxB,QAAQzF,MAAMm4F,UAAYs1C,EAAe,aAAeA,EAAe,KAG1Et5J,KAAKi6J,aACPj6J,KAAKi6J,YAAYpuI,MAAM,CACrBgtI,sBAAuB74J,KAAK4uC,OAAOiqH,wBAInC74J,KAAK0mD,UACP1mD,KAAK0mD,SAAS76B,MAAM,CAClBi1B,gBAAiB9gD,KAAK4uC,OAAOkS,gBAC7BC,gBAAiB/gD,KAAK4uC,OAAOmS,gBAC7Bc,YAAa7hD,KAAK4uC,OAAOiT,YACzBZ,8BAA+BjhD,KAAK4uC,OAAOqS,8BAC3Ca,8BAA+B9hD,KAAK4uC,OAAOkT,8BAC3Cd,0BAA2BhhD,KAAK4uC,OAAOoS,0BACvCG,iCAAkCnhD,KAAK4uC,OAAOuS,iCAC9CY,iCAAkC/hD,KAAK4uC,OAAOmT,iCAC9Cb,6BAA8BlhD,KAAK4uC,OAAOsS,6BAC1CG,+BAAgCrhD,KAAK4uC,OAAOyS,+BAC5CW,+BAAgChiD,KAAK4uC,OAAOoT,+BAC5CZ,2BAA4BphD,KAAK4uC,OAAOwS,6BAIxCphD,KAAKs7I,OAASt7I,KAAKmC,QAAQy4J,aAC7B56J,KAAKs7I,KAAKzvH,MAAM7rB,KAAK4uC,QAGnB5uC,KAAK04C,UACP14C,KAAK04C,SAASorE,aAAa9jH,KAAK4uC,SAIpC4qH,EAAgB74J,UAAU25J,uBAAyB,SAAUpuJ,GAE3D,GAAIA,aAAa,KAAuB,CACtC,GAAkB,KAAdA,EAAE6wB,QAGF,OAAO,EAGX,GAAI7wB,EAAEw4E,SAAWx4E,EAAE2zB,SAAW3zB,EAAEw1B,UAAYx1B,EAAE0zB,OAC5C,OAAO,EAKT,IAAItO,EAAUtxB,KAAK0mD,SAASrC,aAC5B,OAAO/yB,EAAQ+yF,eAAiBrkH,KAAK0mD,SAASnkD,MAAMgK,QAAU+kB,EAAQ8yF,iBAAmB9yF,EAAQ+yF,aAInG,OAAOn4G,EAAEgjD,cAGXsqG,EAAgB74J,UAAU05J,OAAS,WACjC,IAAI93J,EAAQvC,KAAK0mD,SAASnkD,MAEtBvC,KAAKo7J,WACH74J,EACF,KAASvC,KAAKo7J,UAEd,KAASp7J,KAAKo7J,WAKlBp7J,KAAKy5J,UAAUY,OAAO93J,IAGxBi3J,EAAgB74J,UAAU45J,eAAiB,SAAUx9H,EAASs+H,GAC5D,IAAIxuJ,EAAQ7M,KAAKs7I,KAAK/zD,WAClB/pB,EAAU3wD,EAAQA,EAAM2wD,QAAU,GAClC89F,EAAWt7J,KAAKs7I,KAAKt0D,WAEzB,OAAQjqD,GACN,KAAK,GAGH/8B,KAAKs7I,KAAKlV,YACV,MAEF,KAAK,GAGHpmI,KAAKs7I,KAAK5U,gBACV,MAEF,KAAK,GAGH1mI,KAAKs7I,KAAKpV,gBACV,MAEF,KAAK,GAGHlmI,KAAKs7I,KAAK9U,oBACV,MAEF,KAAK,EAGC60B,EACFr7J,KAAKs7I,KAAK5U,gBAEV1mI,KAAKs7I,KAAKlV,YAMhB,IAAIm1B,EAAWv7J,KAAKs7I,KAAKt0D,WAErBxpB,EAAQjxD,OAAS,GAAK+uJ,IAAaC,IAErB,KAAZx+H,GAEW,IAAZA,GAEAs+H,EACDr7J,KAAKs7I,KAAKhV,aAES,KAAZvpG,GAEQ,IAAZA,IAECs+H,IACFr7J,KAAKs7I,KAAK1U,eAKhB20B,EAAWv7J,KAAKs7I,KAAKt0D,aAGnBhnF,KAAKs7I,KAAKz5E,OAAO05F,IAIrB/B,EAAgB74J,UAAUm6J,eAAiB,SAAUv4J,EAAO1B,GAC1D,GAAK0B,GAAUvC,KAAKonB,YAApB,CAKA,IAAIo0I,EAAwBx7J,KAAK66J,YAAYp2C,aAAa,yBAEtD+2C,EACFx7J,KAAKqkD,aAAalW,aAAa,wBAAyBqtH,GAExDx7J,KAAKqkD,aAAajB,gBAAgB,yBAGpC,IAAIuvD,EAAU,CACZ9xG,MAAOA,EACP46J,QAASz7J,KAAK07J,eAAe76J,GAC7Bk6J,2BAA4B/6J,KAAK+6J,4BAEnC/6J,KAAK6M,MAAM8uJ,OAAOjxJ,IAAInI,EAAO,EAE3BowG,KAGJ6mD,EAAgB74J,UAAU65J,gBAAkB,SAAUj4J,EAAO1B,EAAO+6J,GAClE,IAAIj3I,GAAO,EAEX,GAAI3kB,KAAKonB,YAAa,CACpB,IAAI7jB,EAAOq4J,GAAiB,EAGxBjpD,EAAU,CACZ9xG,MAAOA,EACP46J,QAASz7J,KAAK07J,eAAe76J,GAC7Bk6J,2BAA4B/6J,KAAK+6J,4BAEnCp2I,EAAO3kB,KAAK6M,MAAM8uJ,OAAOjxJ,IAAInI,EAAOgB,EAAMovG,GAIxChuF,GACF3kB,KAAK2kB,KAAK,IAMd60I,EAAgB74J,UAAU+6J,eAAiB,SAAU76J,GACnD,MAAO,CACLg7J,QAASh7J,IAAUA,EAAMg/B,SAAWh/B,EAAM6jF,SAAW7jF,EAAMy9I,SAAWz9I,EAAMy9I,QAAQC,gBAAkB19I,EAAMy9I,QAAQC,cAAc1+G,SAAWh/B,EAAMy9I,QAAQC,cAAc75D,UACzK3G,IAAKl9E,IAAUA,EAAM++B,QAAU/+B,EAAMy9I,SAAWz9I,EAAMy9I,QAAQC,eAAiB19I,EAAMy9I,QAAQC,cAAc3+G,UAI/G45H,EAAgB74J,UAAUgiB,KAAO,SAAU0/F,EAAOlgH,GAChDnC,KAAK0gH,SAAU,EACf1gH,KAAK87J,gBAAiB,EACtB97J,KAAK+6J,2BAA6B54J,EAAUA,EAAQ44J,gCAA6B/4J,EAE7EhC,KAAK+6J,4BACP,KAAS/6J,KAAKk6J,gBACd,KAASl6J,KAAKsxB,SACdtxB,KAAKs7I,KAAK92D,aAGR,KAASxkF,KAAKk6J,gBACd,KAASl6J,KAAKsxB,SACdtxB,KAAK0mD,SAASlxC,SAIdxV,KAAKo7J,WACHp7J,KAAK+6J,4BAA8B,KAAe14C,GACpD,KAASriH,KAAKo7J,UAEd,KAASp7J,KAAKo7J,WAKd,KAAe/4C,GACjBriH,KAAK+7J,iBAAiB15C,IAElBlgH,GAAWA,EAAQI,OACrBvC,KAAKg8J,iBAAiB75J,EAAQI,OAGhCvC,KAAKi8J,gBAAgB55C,EAAOlgH,GAAWA,EAAQ+5J,UAAY/5J,EAAQ+5J,UAAY,KAI7E/5J,GAAWA,EAAQg6J,iBAAmBn8J,KAAK+6J,4BAC7C/6J,KAAK0mD,SAASjD,OAAOthD,EAAQg6J,gBAG3Bn8J,KAAKy5J,UAAU2C,QACjBp8J,KAAKy5J,UAAU2C,UAInB5C,EAAgB74J,UAAUq7J,iBAAmB,SAAUK,GACrDr8J,KAAK0mD,SAASnkD,MAAQ85J,EACtBr8J,KAAK0mD,SAASjD,SACdzjD,KAAKy5J,UAAUY,OAAOgC,IAGxB7C,EAAgB74J,UAAUo7J,iBAAmB,SAAU7oH,GACrDlzC,KAAK0mD,SAASnkD,MAAQ2wC,EACtBlzC,KAAKy5J,UAAUY,OAAOnnH,IAGxBsmH,EAAgB74J,UAAUs7J,gBAAkB,SAAU55G,EAAO65G,GAC3Dl8J,KAAK+mF,SAAS1kC,EAAO65G,IAGvB1C,EAAgB74J,UAAU27J,kBAAoB,SAAUj6G,EAAO65G,GAC7D,IAAI96J,EAAQpB,KAEZA,KAAK06J,cAAc7uI,MAAM/H,OAAS9jB,KAAKs5E,UAAUj3B,GAAS,KAC1DriD,KAAKs7I,KAAKv0D,SAAS,MAAMzjF,KAAK,WAK5B,OAJAlC,EAAMyL,MAAQw1C,EAEdjhD,EAAMijD,aAAalW,aAAa,gBAAiB9hB,OAAOg2B,GAASA,EAAMmb,SAAWnb,EAAMmb,QAAQjxD,OAAS,IAElGnL,EAAMk6I,KAAKv0D,SAAS1kC,KAC1B/+C,KAAK,WAENlC,EAAMk6I,KAAK/2F,SAEX,IAAIiZ,EAAUnb,EAAQA,EAAMmb,QAAQ1hD,OAAO,SAAU5P,GACnD,OAAO9K,EAAMm7J,iBAAiBl6G,EAAOn2C,KAClC,GAEL9K,EAAMo7J,kBAAkBh/F,EAAQjxD,QAG5BixD,EAAQjxD,QACVnL,EAAM86J,UAAU75G,EAAOmb,EAAS0+F,MAKtC1C,EAAgB74J,UAAU47J,iBAAmB,SAAUl6G,EAAOn2C,GAC5D,OAAKm2C,EAAMvmC,QAIJumC,EAAMvmC,OAAOsL,UAAUlb,IAGhCstJ,EAAgB74J,UAAUu7J,UAAY,SAAU75G,EAAOmb,EAAS0+F,GAM9D,QALkB,IAAdA,IACFA,EAAY,IAIVA,EAAUO,qBAAsB,CAMlC,IALA,IAAIC,OAAqB,EACrBC,OAAuB,EACvBzpH,EAASgpH,EAAUO,qBACnBG,EAAkB1pH,EAAOlqB,cAEpBpW,EAAK,EAAGiqJ,EAAYr/F,EAAS5qD,EAAKiqJ,EAAUtwJ,OAAQqG,IAAM,CACjE,IAAI+tC,EAAQk8G,EAAUjqJ,GAClB1I,EAAQm4C,EAAMs6F,WAAWl1H,SAASk5B,IAAU,GAQhD,GANK+7G,GAAgD,IAA1BxyJ,EAAMkgB,QAAQ8oB,GAE7BypH,GAAyE,IAAjDzyJ,EAAM8e,cAAcoB,QAAQwyI,KAC9DD,EAAuBh8G,GAFvB+7G,EAAqB/7G,EAKnB+7G,GAAsBC,EACxB,MAIJ,IAAIG,EAAeJ,GAAsBC,EAEzC,GAAIG,EAGF,OAFA98J,KAAKs7I,KAAK50D,SAASo2E,QACnB98J,KAAKs7I,KAAKz5E,OAAOi7F,EAAc,IAM/BZ,EAAUa,qBACZ/8J,KAAKs7I,KAAK1U,aACV5mI,KAAKs7I,KAAKz5E,OAAO7hE,KAAKs7I,KAAKt0D,aAEgB,kBAA7Bk1E,EAAUc,eAClBx/F,EAAQjxD,OAAS2vJ,EAAUc,iBAC7Bh9J,KAAKs7I,KAAKuO,SAASqS,EAAUc,gBAC7Bh9J,KAAKs7I,KAAKz5E,OAAO7hE,KAAKs7I,KAAKt0D,aAGtBk1E,EAAUe,qBACXz/F,EAAQjxD,OAAS,GACnBvM,KAAKs7I,KAAKuO,SAAS,GAGdqS,EAAUgB,oBACX1/F,EAAQjxD,OAAS,GACnBvM,KAAKs7I,KAAKhV,aAKtBkzB,EAAgB74J,UAAU24E,UAAY,SAAUj3B,GAC9C,IAAIjhD,EAAQpB,KAER04C,EAAW2J,EAAM3J,SAErB,IAAK2J,EAAO,CACV,IAAI86G,EAAazkH,EAAS4gC,UAAU,MACpC,OAAOt5E,KAAKmC,QAAQi7J,eAAiBp9J,KAAKmC,QAAQi7J,eAAiBD,EAAa,EAGlF,IACIE,EADAv5I,EAAS,EAGT9jB,KAAKm7J,kBAAoBn7J,KAAKm7J,iBAAiBr3I,SACjDu5I,EAEI,IAFoBr9J,KAAKm7J,iBAAiBr3I,OAAS,OAOpDu5I,GAAwBA,EAAuB7D,EAAgB8D,oBAClED,EAAuB7D,EAAgB8D,kBAQzC,IALA,IAAI9/F,EAAUnb,EAAMmb,QAAQ1hD,OAAO,SAAU5P,GAC3C,OAAO9K,EAAMm7J,iBAAiBl6G,EAAOn2C,KAEnCqxJ,EAAav9J,KAAKmC,QAAQq7J,gBAAkBhgG,EAAQjxD,OAE/CiC,EAAI,EAAGA,EAAI+uJ,GAAc/uJ,EAAIgvD,EAAQjxD,OAAQiC,IAAK,CACzD,IAAIivJ,EAAc/kH,EAAS4gC,UAAU9b,EAAQhvD,IAE7C,KAAIsV,EAAS25I,GAAeJ,GAG1B,MAFAv5I,GAAU25I,EAMd,OAAO35I,GAGT01I,EAAgB74J,UAAU67J,kBAAoB,SAAU/+G,GACtDz9C,KAAKy6J,YAAYphJ,YAAcvP,EAAA,EAAa,CAC1C2G,IAAK,0BACLC,QAAS,CAAC,kKACT,cAAe+sC,IAGpB+7G,EAAgB74J,UAAUgkB,KAAO,SAAUqkB,GACpChpC,KAAKonB,cAIVpnB,KAAK0gH,SAAU,EACf,KAAS1gH,KAAKsxB,SACdtxB,KAAKsxB,QAAQgyB,OAEbtjD,KAAK0mD,SAASnkD,MAAQ,GACtBvC,KAAKs7I,KAAKv0D,SAAS,MAEnB/mF,KAAKqkD,aAAalW,aAAa,gBAAiB,SAEhDnuC,KAAK06J,cAAc7uI,MAAM/H,QAAU9jB,KAAKmC,QAAQi7J,eAA+C,GAA9Bp9J,KAAKmC,QAAQi7J,eAAsB,GAAK,KAEzGp9J,KAAKi6J,YAAY/kI,OAAOvQ,OAEpB3kB,KAAKs7I,KAAKqd,eACZ34J,KAAKs7I,KAAKsd,UACD54J,KAAK0mD,SAASnD,YACvBvjD,KAAK0mD,SAASpD,OAID,IAAXta,EAGAhpC,KAAKy5J,UAAUiE,OAEjB19J,KAAKy5J,UAAUtqE,WAGbnvF,KAAKy5J,UAAUn2I,QACjBtjB,KAAKy5J,UAAUn2I,OAAO0lB,KAI1BwwH,EAAgB74J,UAAUomF,SAAW,SAAU1kC,EAAO65G,EAAWt6G,GAC1D5hD,KAAKonB,cAKJpnB,KAAKunF,YACTvnF,KAAK29J,kBAIP39J,KAAKs8J,kBAAkBj6G,EAAO65G,GAE1Bl8J,KAAK0mD,UACP1mD,KAAK0mD,SAASvD,aAAavB,GAAa23G,MAI5CC,EAAgB74J,UAAUg9J,gBAAkB,WAC1C,IAAIv8J,EAAQpB,KAERA,KAAK49J,6BACPjkJ,aAAa3Z,KAAK49J,4BAClB59J,KAAK49J,2BAA6B,MAKpC,KAAa59J,KAAKsxB,QAAS,oBAC3BtxB,KAAK49J,2BAA6B97J,WAAW,WAC3C,KAAgBV,EAAMkwB,QAAS,qBAC9B,MAGLkoI,EAAgB74J,UAAU4mF,SAAW,WACnC,OAAOvnF,KAAKs7I,KAAK/zD,YAGnBiyE,EAAgB74J,UAAUymB,UAAY,WACpC,OAAOpnB,KAAK0gH,SAGd84C,EAAgB74J,UAAU4jD,OAAS,SAAUs5G,GAC3C79J,KAAKm7J,iBAAmB0C,EAExB,IAAIC,EAAiBz8J,KAAK8sE,IAAkC,IAA9BnuE,KAAKm7J,iBAAiB/kI,MAElDojI,EAAgBuE,WAEd/9J,KAAKsxB,UAEPtxB,KAAKsxB,QAAQzF,MAAMuK,MAAQ0nI,EAAiB,KAC5C99J,KAAKsxB,QAAQzF,MAAM8pD,WAAa,IAAMmoF,EAAiB,EAAI,KAE3D99J,KAAKk6J,eAAeruI,MAAMuK,MAAQ0nI,EAAiB,GAAK,OAI5DtE,EAAgB74J,UAAUg5J,aAAe,WACvC35J,KAAK87J,gBAAiB,GAGxBtC,EAAgB74J,UAAUi5J,aAAe,SAAU1tJ,GACjD,IAAI9K,EAAQpB,KAEZ,GAAKA,KAAKonB,YAAV,CAIA,IAAI42I,EAAgB9xJ,EAAE8xJ,eAEjBh+J,KAAK+6J,4BAA8B,KAAeiD,EAAeh+J,KAAKsxB,WAI3EtxB,KAAK87J,gBAAiB,EACtBh6J,WAAW,WACJV,EAAM06J,iBAAkB16J,EAAM4qF,aAIxB5qF,EAAMq4J,UAAUwE,aAAe78J,EAAMq4J,UAAUwE,eAGxD78J,EAAMujB,KAAK,KAIZ,MAGL60I,EAAgB74J,UAAUc,QAAU,WAClCsI,EAAOpJ,UAAUc,QAAQwI,KAAKjK,MAE9BA,KAAKgsF,YAAa,GAGpBwtE,EAAgBuE,UAAY,IAE5BvE,EAAgB8D,iBAAmB,IAE5B9D,EAl3BT,CAm3BE,KCz7BE,GAEJ,WACE,SAAS0E,EAAsB/zG,EAAYuzG,EAAMvuE,EAAUkrE,EAAQ5uE,EAAeh8C,GAChFzvC,KAAKmqD,WAAaA,EAClBnqD,KAAKyvC,aAAeA,EACpBzvC,KAAKK,OAAOq9J,EAAMvuE,EAAUkrE,EAAQ5uE,GAgEtC,OA7DAyyE,EAAsBv9J,UAAUN,OAAS,SAAUq9J,EAAMvuE,EAAUkrE,EAAQ5uE,GACzEzrF,KAAKgrB,QAAUvW,SAASyE,cAAc,OACtClZ,KAAKm+J,gBAAkB,IAAI,GAAgBn+J,KAAKgrB,QAAS,CACvD0yI,KAAMA,EACNvuE,SAAUA,EACVkrE,OAAQA,GACP,CACDF,sBAAkBn4J,EAClBo8J,eAAgB3yE,EAAc2yE,eAC9Bz4E,iBAAiB,IAEnB3lF,KAAK6vJ,OAAS,aAAsB7vJ,KAAKm+J,gBAAiBn+J,KAAKyvC,aAAc,CAC3EysG,sBAAuB,MAEzBl8I,KAAKm+J,gBAAgB99J,SACrBL,KAAKmqD,WAAW9Z,iBAAiBrwC,OAGnCk+J,EAAsBv9J,UAAUomF,SAAW,SAAUl6E,EAAO2I,GAC1DxV,KAAKm+J,gBAAgBp3E,SAASl6E,EAAO2I,IAGvC0oJ,EAAsBv9J,UAAUgM,MAAQ,WACtC,OAAOuxJ,EAAsBxxJ,IAG/BwxJ,EAAsBv9J,UAAUiZ,WAAa,WAC3C,OAAO5Z,KAAKgrB,SAGdkzI,EAAsBv9J,UAAU09J,QAAU,WACxCr+J,KAAKmqD,WAAWpZ,oBAAoB/wC,MACpCA,KAAKm+J,gBAAgB18J,UACrBzB,KAAK6vJ,OAAOpuJ,WAGdy8J,EAAsBv9J,UAAUgiB,KAAO,SAAUpgB,GAC/CvC,KAAK0gH,SAAU,EACf,IAAIvgB,EAAengG,KAAKmqD,WAAWpmB,gBAE/Bo8D,GACFngG,KAAKm+J,gBAAgB55G,OAAO,IAAI,KAAU47C,EAAa/pE,MAAO+pE,EAAar8E,SAG7E9jB,KAAKm+J,gBAAgBx7I,KAAKpgB,GAC1BvC,KAAKmqD,WAAWqD,oBAAoBxtD,OAGtCk+J,EAAsBv9J,UAAUmT,YAAc,WAC5C,OAAI9T,KAAK0gH,QACA,CACL1mG,WAAY,GAMT,MAGTkkJ,EAAsBxxJ,GAAK,uCACpBwxJ,EApET,GCPI,GAAsC,WACxC,IAAIl1J,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA0BtC,GAAwC,SAAUgN,EAAY1T,EAAQ2N,EAAKgG,GAC7E,IAEIxN,EAFAyN,EAAIC,UAAUpK,OACdqK,EAAIF,EAAI,EAAI5T,EAAkB,OAAT2T,EAAgBA,EAAOrW,OAAOyW,yBAAyB/T,EAAQ2N,GAAOgG,EAE/F,GAAuB,kBAAZK,SAAoD,oBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASP,EAAY1T,EAAQ2N,EAAKgG,QAAW,IAAK,IAAIjI,EAAIgI,EAAWjK,OAAS,EAAGiC,GAAK,EAAGA,KAC1KvF,EAAIuN,EAAWhI,MAAIoI,GAAKF,EAAI,EAAIzN,EAAE2N,GAAKF,EAAI,EAAIzN,EAAEnG,EAAQ2N,EAAKmG,GAAK3N,EAAEnG,EAAQ2N,KAASmG,GAE5F,OAAOF,EAAI,GAAKE,GAAKxW,OAAOM,eAAeoC,EAAQ2N,EAAKmG,GAAIA,GAG1D,GAAkC,SAAUK,EAAYC,GAC1D,OAAO,SAAUpU,EAAQ2N,GACvByG,EAAUpU,EAAQ2N,EAAKwG,KAUvB,GAEJ,WACE,SAASoiJ,EAAoBzuJ,EAAQ6kC,GACnCzvC,KAAKyvC,aAAeA,EACpBzvC,KAAK4K,OAASA,EAiGhB,OA9FAyuJ,EAAoBz4J,IAAM,SAAUgK,GAClC,OAAOA,EAAO6B,gBAAgB4sJ,EAAoB3sJ,KAGpD2sJ,EAAoB14J,UAAUgM,MAAQ,WACpC,OAAO0sJ,EAAoB3sJ,IAG7B2sJ,EAAoB14J,UAAUc,QAAU,WAElCzB,KAAKmoD,SACPnoD,KAAKmoD,OAAOk2G,UACZr+J,KAAKmoD,OAAS,OAIlBkxG,EAAoB14J,UAAU+J,IAAM,SAAUgI,GAC5C,IAAItR,EAAQpB,KAERA,KAAKmoD,SACPnoD,KAAKmoD,OAAOk2G,UACZr+J,KAAKmoD,OAAS,MAIhB,IAAIm2G,EAAU,SAAiBp1F,GAE7B9nE,EAAMm9J,mBAGFr1F,GAAY9nE,EAAMo9J,2BACpBp9J,EAAMwJ,OAAO8/B,aAAatpC,EAAMo9J,0BAEhCp9J,EAAMwJ,OAAOy0B,qCAAqCj+B,EAAMo9J,yBAA0B,IAKpFp9J,EAAMo9J,yBAA2B,KAI7B/pJ,SAAS+uC,gBAAkB/uC,SAAS4M,MAAS6nD,GAC/C9nE,EAAMwJ,OAAO4K,SAIjBxV,KAAKmoD,OAAS,IAAI,GAAsBnoD,KAAK4K,OAAQ,WACnD,OAAO0zJ,GAAQ,IACd,WACD,OAAOA,GAAQ,IACd,SAAU/7J,GACXnB,EAAM+mD,OAAO4+B,SAASr0E,EAAK5F,SAASvK,GAAQmQ,EAAK+rJ,aAAal8J,KAC7D,CACD67J,eAAgB1rJ,EAAK0rJ,gBACpBp+J,KAAKyvC,cAEHzvC,KAAKw+J,2BACRx+J,KAAKw+J,yBAA2Bx+J,KAAK4K,OAAOoL,gBAI9ChW,KAAKmoD,OAAOxlC,KAAK,KAGnB02I,EAAoB14J,UAAU+9J,aAAe,SAAUjxJ,EAAO7C,GAC5D,IAAIkwD,EAAiB,GAEjB96D,KAAK2+J,6BACP7jG,EAAe1sD,KAAKpO,KAAK2+J,4BACzB3+J,KAAK2+J,2BAA6B,MAGpC,IAAIrwJ,EAAiB,CAAC,CACpBb,MAAOA,EACPtL,QAASk3J,EAAoB71H,8BAE3B7N,EAAc/qB,EAAO4B,iBAAiBsuD,EAAgBxsD,GAC1DtO,KAAK2+J,2BAA6BhpI,EAAY,IAGhD0jI,EAAoB14J,UAAU49J,iBAAmB,WAC3Cv+J,KAAK2+J,6BACP3+J,KAAK4K,OAAO4B,iBAAiB,CAACxM,KAAK2+J,4BAA6B,IAChE3+J,KAAK2+J,2BAA6B,OAItCtF,EAAoB3sJ,GAAK,wCACzB2sJ,EAAoB71H,4BAA8B,IAAuBz9B,SAAS,CAChF4J,UAAW,iBACXg1B,aAAa,IAEf00H,EAAsB,GAAW,CAAC,GAAQ,EAAG,MAAiBA,GAnGhE,GA4GIuF,GAEJ,SAAU70J,GAGR,SAAS60J,EAA0BR,EAAgB1rJ,GACjD,IAAItR,EAAQ2I,EAAOE,KAAKjK,KAAM0S,IAAS1S,KAGvC,OADAoB,EAAMy9J,gBAAkBT,EACjBh9J,EAmBT,OAzBA,GAAUw9J,EAA2B70J,GASrC60J,EAA0Bj+J,UAAUm+J,cAAgB,SAAUl0J,GAC5D,OAAO,GAAoBhK,IAAIgK,IAGjCg0J,EAA0Bj+J,UAAUskB,MAAQ,SAAUpa,EAAY6H,GAChE7H,EAAWH,IAAI,CACb0zJ,eAAgBp+J,KAAK6+J,gBACrB/xJ,SAAU,SAAkBvK,GAC1B,OAAOmQ,EAAK5F,SAASvK,IAEvBk8J,aAAc,SAAsBM,GAClC,OAAOrsJ,EAAK+rJ,aAAaM,OAKxBH,EA1BT,CA2BE,KAGF,YAA2B,IC9L3B,IAAI,GAAsC,WACxC,IAAI51J,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GAqCtC,GAEJ,SAAUO,GAGR,SAASi1J,EAAc3/I,EAAMzU,EAAQsM,GACnC,IAAI9V,EAAQ2I,EAAOE,KAAKjK,OAASA,KAKjC,OAHAoB,EAAMwJ,OAASA,EACfxJ,EAAM8V,UAAYA,EAClB9V,EAAM69J,YAAc79J,EAAM89J,WAAW7/I,GAC9Bje,EA2GT,OAnHA,GAAU49J,EAAej1J,GAWzBi1J,EAAcr+J,UAAUu+J,WAAa,SAAU7/I,GAC7C,IAKInU,EAUA2B,EAfAsyJ,EAAU9/I,EAAKg4B,MAAM,KAAKpqC,IAAI,SAAUmf,GAC1C,OAAOutB,SAASvtB,EAAM,MACrBtQ,OAAO,SAAUsQ,GAClB,OAAQugG,MAAMvgG,KAchB,GATElhB,EADqB,IAAnBi0J,EAAQ5yJ,OACC,IAAI,KAAU,GAAI,GACD,IAAnB4yJ,EAAQ5yJ,OACN,IAAI,IAAS4yJ,EAAQ,GAAI,GAEzB,IAAI,IAASA,EAAQ,GAAIA,EAAQ,IAK1C,aAAan/J,KAAK4K,QACpBiC,EAAQ7M,KAAK4K,OAAOkC,eACf,CACL,IAAIsyJ,EAAYp/J,KAAK4K,OAAOkC,WAC5BD,EAAQuyJ,EAAYA,EAAUC,SAAW,KAG3C,IAAIhxI,IAAUxhB,GAAQA,EAAMyyJ,iBAAiBp0J,GAAUuE,OAAOvE,GAe9D,MAAO,CACLA,SAAUA,EACVmjB,QAASA,EACTnkB,MAfEmkB,EACEnjB,EAASyC,QAAUzC,EAASyC,OAAS,EAC/BssB,GAAA,EAAe,KAAYslI,gCAAiCr0J,EAASwC,WAAYxC,EAASyC,QAE1FssB,GAAA,EAAe,KAAYulI,uBAAwBt0J,EAASwC,YAE7DxC,EAASwC,WAAa,GAAKxC,EAASwC,YAAcb,EAAQA,EAAM8G,eAAiB,GAClFsmB,GAAA,EAAe,KAAYwlI,gCAAiC5yJ,EAAQA,EAAM8G,eAAiB,GAE3FsmB,GAAA,EAAe,KAAYylI,yCAA0C7yJ,EAAQA,EAAM0E,iBAAiBrG,EAASwC,YAAc,KAUvIsxJ,EAAcr+J,UAAU8mB,SAAW,WACjC,OAAOznB,KAAKi/J,YAAY/0J,OAG1B80J,EAAcr+J,UAAUo6E,aAAe,WACrC,IAAI7vE,EAAWlL,KAAK4K,OAAOkJ,cACvB6rJ,EAAcz0J,EAAWA,EAASwC,WAAa,EACnD,OAAOusB,GAAA,EAAe,KAAY2lI,kBAAmBD,EAAa3/J,KAAKi/J,YAAY/0J,QAGrF80J,EAAcr+J,UAAU+J,IAAM,SAAUnH,EAAM06H,GAC5C,OAAa,IAAT16H,EAGOvD,KAAK6/J,UAGT7/J,KAAK8/J,cAGdd,EAAcr+J,UAAUk/J,QAAU,WAEhC,IAAK7/J,KAAKi/J,YAAY5wI,QACpB,OAAO,EAIT,IAAI5gB,EAAQzN,KAAK+/J,cAMjB,OALA//J,KAAK4K,OAAO8/B,aAAaj9B,GACzBzN,KAAK4K,OAAO88E,oBAAoBj6E,EAAO,GAGvCzN,KAAK4K,OAAO4K,SACL,GAGTwpJ,EAAcr+J,UAAUm/J,WAAa,WAEnC,IAAK9/J,KAAKi/J,YAAY5wI,QAEpB,OADAruB,KAAKkX,UAAUqnJ,oBACR,EAIT,IAAI9wJ,EAAQzN,KAAK+/J,cAMjB,OALA//J,KAAK4K,OAAO88E,oBAAoBj6E,EAAO,GAIvCzN,KAAKkX,UAAUwnJ,aAAajxJ,EAAOzN,KAAK4K,SACjC,GAGTo0J,EAAcr+J,UAAUo/J,YAAc,WACpC,OAAO,IAAI,KAAM//J,KAAKi/J,YAAY/zJ,SAASwC,WAAY1N,KAAKi/J,YAAY/zJ,SAASyC,OAAQ3N,KAAKi/J,YAAY/zJ,SAASwC,WAAY1N,KAAKi/J,YAAY/zJ,SAASyC,SAGpJqxJ,EApHT,CAqHE,IAIE,GAEJ,SAAUj1J,GAGR,SAASi2J,IACP,OAAOj2J,EAAOE,KAAKjK,KAAM,KAAYigK,oBAAqB,CACxDj6J,GAAI,yBACJkE,MAAO,KAAYg2J,oBACnB/1J,MAAO,gBACPC,aAAc,KACdC,OAAQ,CACNC,OAAQ,IAAkBkL,MAC1BhL,QAAS,KAKT6I,IAAK,CACH7I,QAAS,KAMXC,OAAQ,QAINzK,KAkBR,OA5CA,GAAUggK,EAAgBj2J,GA6B1Bi2J,EAAer/J,UAAU+J,IAAM,SAAUC,EAAUC,GACjD,IAAIxJ,EAAQpB,KAEZA,KAAKilB,MAAMjlB,KAAK8+J,cAAcl0J,GAAS,CACrCkC,SAAU,SAAkBvK,GAC1B,OAAO,IAAI,GAAe,CAAC,IAAI,GAAcA,EAAOqI,EAAQxJ,EAAM09J,cAAcl0J,OAElF6zJ,aAAc,SAAsBM,GAClC,MAAO,CACLhC,oBAAqBgC,EAAYxyJ,OAAS,OAM3CyzJ,EA7CT,CA8CEpB,IAGF,YAAqB,ICnNrB,IAAI,GAAsC,WACxC,IAAI51J,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GAqCtC,GAEJ,SAAUO,GAGR,SAASo2J,EAAyB1vJ,EAAK2vJ,EAActrF,EAAY73D,EAAQrS,GACvE,IAAIxJ,EAAQ2I,EAAOE,KAAKjK,OAASA,KASjC,OAPAoB,EAAMqP,IAAMA,EACZrP,EAAMg/J,aAAeA,EAErBh/J,EAAMs5I,cAAc5lE,GAEpB1zE,EAAM6b,OAASA,EACf7b,EAAMwJ,OAASA,EACRxJ,EA2CT,OAvDA,GAAU++J,EAA0Bp2J,GAepCo2J,EAAyBx/J,UAAU8mB,SAAW,WAC5C,OAAOznB,KAAKid,OAAO/S,OAGrBi2J,EAAyBx/J,UAAUo6E,aAAe,WAChD,OAAI/6E,KAAKogK,aACAnmI,GAAA,EAAe,KAAgBomI,sBAAuBrgK,KAAKynB,WAAYznB,KAAKogK,cAG9EnmI,GAAA,EAAe,KAAgBqmI,eAAgBtgK,KAAKynB,aAG7D04I,EAAyBx/J,UAAUq6I,cAAgB,WACjD,OAAOh7I,KAAKyQ,KAGd0vJ,EAAyBx/J,UAAU+J,IAAM,SAAUnH,EAAMovG,GACvD,IAAIvxG,EAAQpB,KAEZ,OAAa,IAATuD,IAIAzB,WAAW,WAETV,EAAMwJ,OAAO4K,QAEb,KACgBpU,EAAM6b,OAAOvS,OAASiS,QAAQC,WACpCtZ,UAAKtB,EAAW,MACxB,MAAOyvB,GACP,aAAkBA,KAEnB,KACI,IAMN0uI,EAxDT,CAyDEtlB,IAIE,GAEJ,SAAU9wI,GAGR,SAASw2J,IACP,OAAOx2J,EAAOE,KAAKjK,KAAM,KAAgBwgK,wBAAyB,CAChEx6J,GAAI,6BACJkE,MAAO,KAAgBu2J,wBACvBt2J,MAAO,kBACPC,aAAc,KACdC,OAAQ,CACNC,OAAQ,IAAkBkL,MAC1BhL,QAASqK,GAAA,EAAe,IAItB,GAGFpK,OAAQ,KAIVmL,SAAU,CACRtF,MAAO,aACPK,MAAO,MAEL3Q,KAiDR,OA1EA,GAAUugK,EAAoBx2J,GA4B9Bw2J,EAAmB5/J,UAAU+J,IAAM,SAAUC,EAAUC,GACrD,IAAIxJ,EAAQpB,KAERwvC,EAAoB7kC,EAAS/J,IAAI,MAErCZ,KAAKilB,MAAMjlB,KAAK8+J,cAAcl0J,GAAS,CACrCkC,SAAU,SAAkBvK,GAC1B,OAAO,IAAI,GAAenB,EAAMs/J,wBAAwBlxH,EAAmB5kC,EAAQrI,KAErFk8J,aAAc,SAAsBM,GAClC,MAAO,CACLhC,qBAAqB,EACrBN,qBAAsBsC,OAM9BwB,EAAmB5/J,UAAUggK,MAAQ,SAAUC,EAAUC,GACvD,IAAIC,GAAgBF,EAASn5I,YAAc,IAAIuB,cAC3C+3I,GAAgBF,EAASp5I,YAAc,IAAIuB,cAC/C,OAAO83I,EAAaxlJ,cAAcylJ,IAGpCR,EAAmB5/J,UAAU+/J,wBAA0B,SAAUlxH,EAAmB5kC,EAAQm0J,GAI1F,IAHA,IACIvhG,EAAU,GAEL5qD,EAAK,EAAGouJ,EAHHp2J,EAAOq2J,sBAGiBruJ,EAAKouJ,EAAUz0J,OAAQqG,IAAM,CACjE,IAAIqK,EAAS+jJ,EAAUpuJ,GACnBorB,EAAawR,EAAkBjoB,iBAAiBtK,EAAOjX,IAE3D,GAAIiX,EAAO/S,MAAO,CAChB,IAAI4qE,EAAa,aAAaiqF,EAAa9hJ,EAAO/S,OAE9C4qE,GACFtX,EAAQpvD,KAAK,IAAI,GAAyB4vB,GAAaA,EAAWvW,YAAmB,GAAIuW,GAAaA,EAAW+8C,gBAAuB,GAAIjG,EAAY73D,EAAQrS,KAOtK,OADA4yD,EAAUA,EAAQtuD,KAAKlP,KAAK2gK,QAIvBJ,EA3ET,CA4EE3B,IAGF,YAAqB,I,OC7Kd,SAASsC,GAAmBr0J,EAAOs0J,EAAMtlJ,GAC9C,IAAIulJ,EAAQ,GACR1kJ,EAAW,KAA+BP,IAAItP,GAAOI,IAAI,SAAU47D,GACrE,OAAOlsD,QAAQC,QAAQisD,EAAQw4F,uBAAuBx0J,EAAOgP,IAAQvY,KAAK,SAAU+O,GAC9EhJ,MAAM2T,QAAQ3K,IAChB+uJ,EAAMhzJ,KAAKkS,MAAM8gJ,EAAO/uJ,IAEzB,SAAUgL,GACX,aAA0BA,OAG9B,OAAOV,QAAQR,IAAIO,GAAUpZ,KAAK,WAChC,IAAIg+J,EAAc,GAElB,OAAIzlJ,EAAMkB,wBACDukJ,GAGLH,EAeR,SAASI,EAAQ36C,EAAQppD,EAASgkG,GAChC,IAAK,IAAI5uJ,EAAK,EAAGiqJ,EAAYr/F,EAAS5qD,EAAKiqJ,EAAUtwJ,OAAQqG,IAAM,CACjE,IAAI+tC,EAAQk8G,EAAUjqJ,GACtBg0G,EAAOx4G,KAAK,CACVqN,KAAMklC,EAAMllC,KACZ2N,KAAMu3B,EAAMv3B,KACZ64C,OAAQthB,EAAMshB,OACdw/F,cAAe9gH,EAAM8gH,eAAiBD,EACtC/zJ,MAAOkzC,EAAMlzC,MACbi0J,eAAgB/gH,EAAM+gH,eACtB7iH,cAAU78C,IAGR2+C,EAAM9B,UACR0iH,EAAQ36C,EAAQjmE,EAAM9B,SAAU8B,EAAMv3B,OA5BtCm4I,CAAQD,EAAaF,EAAO,IAE5BE,EAAcF,EAGhBE,EAAYpyJ,KAAKyyJ,IACVL,KAIX,SAASK,GAAyBvmJ,EAAGlS,GACnC,OAAO,KAAMm8B,yBAAyBjqB,EAAE3N,MAAOvE,EAAEuE,OAsBnD,YAAwB,iCAAkC,SAAU9C,EAAUuK,GAC5E,IAAIyI,EAAWzI,EAAKyI,SAEpB,KAAMA,aAAoB,MACxB,MAAM,aAAgB,YAGxB,IAAI9Q,EAAQlC,EAAS/J,IAAI,MAAekM,SAAS6Q,GAEjD,OAAI9Q,EACKq0J,GAAmBr0J,GAAO,EAAO,KAAkBiR,MAGrDnT,EAAS/J,IAAI,MAAmBoyE,qBAAqBr1D,GAAUra,KAAK,SAAUwwE,GACnF,OAAO,IAAIn3D,QAAQ,SAAUC,EAASkE,GACpC,IAEElE,EADaskJ,GAAmBptF,EAAU7B,OAAOC,iBAAiB,EAAO,KAAkBp0D,OAE3F,MAAOT,GACPyD,EAAOzD,MAERK,QAAQ,WACTo2D,EAAUryE,gBClFhB,IAAI,GAAsC,WACxC,IAAIuH,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GAwCtC,GAEJ,SAAUO,GAGR,SAAS63J,EAAYx4I,EAAMjP,EAAMgP,EAAa1b,EAAOqnE,EAAYlqE,EAAQsM,GACvE,IAAI9V,EAAQ2I,EAAOE,KAAKjK,OAASA,KAWjC,OATAoB,EAAMgoB,KAAOA,EACbhoB,EAAM+Y,KAAOA,EACb/Y,EAAM+nB,YAAcA,EACpB/nB,EAAMqM,MAAQA,EAEdrM,EAAMs5I,cAAc5lE,GAEpB1zE,EAAMwJ,OAASA,EACfxJ,EAAM8V,UAAYA,EACX9V,EA+DT,OA7EA,GAAUwgK,EAAa73J,GAiBvB63J,EAAYjhK,UAAU8mB,SAAW,WAC/B,OAAOznB,KAAKopB,MAGdw4I,EAAYjhK,UAAUo6E,aAAe,WACnC,OAAO9gD,GAAA,EAAe,KAAgB4nI,eAAgB7hK,KAAKopB,OAG7Dw4I,EAAYjhK,UAAU05I,QAAU,WAC9B,OAAOr6I,KAAKma,MAGdynJ,EAAYjhK,UAAUw5I,eAAiB,WACrC,OAAOn6I,KAAKmpB,aAGdy4I,EAAYjhK,UAAUu1D,QAAU,WAC9B,OAAOl2D,KAAKma,MAGdynJ,EAAYjhK,UAAUmhK,SAAW,WAC/B,OAAO9hK,KAAKyN,OAGdm0J,EAAYjhK,UAAU+J,IAAM,SAAUnH,EAAMovG,GAC1C,OAAa,IAATpvG,EAGOvD,KAAK6/J,QAAQltD,GAGjB3yG,KAAK8/J,cAGd8B,EAAYjhK,UAAUk/J,QAAU,SAAU5hC,GAExC,IAAIxwH,EAAQzN,KAAK+/J,cAMjB,OALA//J,KAAK4K,OAAO8/B,aAAaj9B,GACzBzN,KAAK4K,OAAO88E,oBAAoBj6E,EAAO,GAGvCzN,KAAK4K,OAAO4K,SACL,GAGTosJ,EAAYjhK,UAAUm/J,WAAa,WAEjC,IAAIryJ,EAAQzN,KAAK+/J,cAMjB,OALA//J,KAAK4K,OAAO88E,oBAAoBj6E,EAAO,GAIvCzN,KAAKkX,UAAUwnJ,aAAa1+J,KAAKyN,MAAOzN,KAAK4K,SACtC,GAGTg3J,EAAYjhK,UAAUo/J,YAAc,WAClC,OAAO,IAAI,KAAM//J,KAAKyN,MAAMQ,gBAAiBjO,KAAKyN,MAAMS,aAAe,EAAGlO,KAAKyN,MAAMQ,gBAAiBjO,KAAKyN,MAAMS,aAAe,IAG3H0zJ,EA9ET,CA+EE/mB,IAIE,GAEJ,SAAU9wI,GAGR,SAASg4J,IACP,OAAOh4J,EAAOE,KAAKjK,KAAM,KAAgBgiK,wBAAyB,CAChEh8J,GAAI,6BACJkE,MAAO,KAAgB+3J,wBACvB93J,MAAO,kBACPC,aAAc,IAAkB83J,0BAChC73J,OAAQ,CACNC,OAAQ,IAAkBkL,MAC1BhL,QAAS,KAOTC,OAAQ,KAIVmL,SAAU,CACRtF,MAAO,aACPK,MAAO,MAEL3Q,KAgNR,OAzOA,GAAU+hK,EAAoBh4J,GA4B9Bg4J,EAAmBphK,UAAU+J,IAAM,SAAUC,EAAUC,GACrD,IAAIxJ,EAAQpB,KAEZ,GAAK4K,EAAOgC,WAAZ,CAIA,IAAIC,EAAQjC,EAAOkC,WAEnB,GAAK,KAA+BqT,IAAItT,GAKxC,OAAOq0J,GAAmBr0J,GAAO,EAAM,KAAkBiR,MAAMxa,KAAK,SAAU+O,GACtD,IAAlBA,EAAO9F,QAIXnL,EAAMyzD,KAAKjqD,EAAQyH,OAIvB0vJ,EAAmBphK,UAAUk0D,KAAO,SAAUjqD,EAAQyH,GACpD,IAAIjR,EAAQpB,KAEZA,KAAKilB,MAAMjlB,KAAK8+J,cAAcl0J,GAAS,CACrCkC,SAAU,SAAkBvK,GAC1B,OAAO,IAAI,GAAenB,EAAM+gK,mBAAmBv3J,EAAQyH,EAAQ9P,KAErEk8J,aAAc,SAAsBM,GAMlC,OAJ0C,IAAtCA,EAAY30I,QAtJL,OAuJT20I,EAAcA,EAAYhhH,OAvJjB,IAuJqCxxC,SAGzC,CACLkwJ,qBAAsBsC,EACtBhC,sBAAuBgC,OAM/BgD,EAAmBphK,UAAUyhK,YAAc,SAAUh5I,EAAMjP,EAAMgP,EAAa1b,EAAOqnE,EAAYlqE,EAAQsM,GACvG,OAAO,IAAI,GAAYkS,EAAMjP,EAAMgP,EAAa,KAAM/J,KAAK3R,GAAQqnE,EAAYlqE,EAAQsM,IAGzF6qJ,EAAmBphK,UAAUwhK,mBAAqB,SAAUv3J,EAAQy3J,EAAWtD,GAC7E,IAAIl0J,EAAa7K,KAAK8+J,cAAcl0J,GAChCwlF,EAAU,GAEVkyE,EAAwBvD,EAEc,IAAtCA,EAAY30I,QA5KD,OA6Kbk4I,EAAwBA,EAAsBvkH,OA7KjC,IA6KqDxxC,SAGpE,IAAK,IAAIqG,EAAK,EAAG2vJ,EAAcF,EAAWzvJ,EAAK2vJ,EAAYh2J,OAAQqG,IAAM,CACvE,IAAI0e,EAAUixI,EAAY3vJ,GACtB1I,EAAQ+vB,GAAA,EAAa3I,EAAQlI,MAE7B0rD,EAAa,aAAawtF,EAAuBp4J,GAErD,GAAI4qE,EAAY,CAEd,IAAI3rD,EAAc,KAEdmI,EAAQmwI,gBACVt4I,EAAcmI,EAAQmwI,eAIxBrxE,EAAQhiF,KAAKpO,KAAKoiK,YAAYl4J,EAAO,aAAqBonB,EAAQ7V,MAAO0N,EAAamI,EAAQ7jB,MAAOqnE,EAAYlqE,EAAQC,KAc7H,GATIk0J,IAEA3uE,EADwC,IAAtC2uE,EAAY30I,QArMH,KAsMDgmE,EAAQlhF,KAAKlP,KAAKwiK,WAAW3xH,KAAK7wC,KAAM++J,EAAY/1I,gBAEpDonE,EAAQlhF,KAAKlP,KAAKyiK,WAAW5xH,KAAK7wC,KAAM++J,EAAY/1I,iBAK9DonE,EAAQ7jF,OAAS,GAA2C,IAAtCwyJ,EAAY30I,QA7MvB,KA6MoD,CAKjE,IAJA,IAAIs4I,EAAc,KACdC,EAAgB,KAChBC,EAAc,EAETp0J,EAAI,EAAGA,EAAI4hF,EAAQ7jF,OAAQiC,IAAK,CACvC,IAAI6D,EAAS+9E,EAAQ5hF,GAEjBk0J,IAAgBrwJ,EAAO6jD,WAErBysG,GACFA,EAAc1nB,cAAcj7I,KAAK6iK,YAAYH,GAAe,GAAIE,IAGlEF,EAAcrwJ,EAAO6jD,UACrBysG,EAAgBtwJ,EAChBuwJ,EAAc,EACdvwJ,EAAO8oI,cAAc3sI,EAAI,IAGvBo0J,IAKFD,GACFA,EAAc1nB,cAAcj7I,KAAK6iK,YAAYH,GAAe,GAAIE,SAG3DxyE,EAAQ7jF,OAAS,GACtB6jF,EAAQ,GAAG6qD,cAAchhH,GAAA,EAAe,KAAgB6oI,UAAW1yE,EAAQ7jF,SAG/E,OAAO6jF,GAGT2xE,EAAmBphK,UAAUkiK,YAAc,SAAU1oJ,EAAMsjC,GACzD,OAAQtjC,GACN,IAAK,SACH,OAAO8f,GAAA,EAAe,KAAgB8oI,UAAWtlH,GAEnD,IAAK,QACH,OAAOxjB,GAAA,EAAe,KAAgB+oI,QAASvlH,GAEjD,IAAK,YACH,OAAOxjB,GAAA,EAAe,KAAgBgpI,YAAaxlH,GAErD,IAAK,SACH,OAAOxjB,GAAA,EAAe,KAAgBipI,SAAUzlH,GAElD,IAAK,WACH,OAAOxjB,GAAA,EAAe,KAAgBkpI,WAAY1lH,GAEpD,IAAK,WACH,OAAOxjB,GAAA,EAAe,KAAgBmpI,WAAY3lH,GAEpD,IAAK,WACH,OAAOxjB,GAAA,EAAe,KAAgBopI,WAAY5lH,GAEpD,IAAK,MACH,OAAOxjB,GAAA,EAAe,KAAgBqpI,YAAa7lH,GAErD,IAAK,cACH,OAAOxjB,GAAA,EAAe,KAAgBspI,cAAe9lH,GAEvD,IAAK,OACH,OAAOxjB,GAAA,EAAe,KAAgBupI,OAAQ/lH,GAGlD,OAAOtjC,GAGT4nJ,EAAmBphK,UAAU8hK,WAAa,SAAU1D,EAAa6B,EAAUC,GACzE,IAAIC,EAAeF,EAASn5I,WAAWuB,cACnC+3I,EAAeF,EAASp5I,WAAWuB,cAEnCpS,EAAIkqJ,EAAaxlJ,cAAcylJ,GAEnC,GAAU,IAANnqJ,EACF,OAAOA,EAIT,IAAI6sJ,EAAgB7C,EAASkB,WACzB4B,EAAgB7C,EAASiB,WAC7B,OAAO2B,EAAcx1J,gBAAkBy1J,EAAcz1J,iBAGvD8zJ,EAAmBphK,UAAU6hK,WAAa,SAAUzD,EAAa6B,EAAUC,GAEzE9B,EAAcA,EAAYhhH,OAvSX,IAuS+BxxC,QAE9C,IAAIo3J,EAAe/C,EAAS1qG,UACxB0tG,EAAe/C,EAAS3qG,UACxBt/C,EAAI+sJ,EAAaroJ,cAAcsoJ,GAEnC,GAAU,IAANhtJ,EACF,OAAOA,EAIT,GAAImoJ,EAAa,CACf,IAAI+B,EAAeF,EAASn5I,WAAWuB,cACnC+3I,EAAeF,EAASp5I,WAAWuB,cAEnC66I,EAAM/C,EAAaxlJ,cAAcylJ,GAErC,GAAY,IAAR8C,EACF,OAAOA,EAKX,IAAIJ,EAAgB7C,EAASkB,WACzB4B,EAAgB7C,EAASiB,WAC7B,OAAO2B,EAAcx1J,gBAAkBy1J,EAAcz1J,iBAGhD8zJ,EA1OT,CA2OEnD,IAGF,YAAqB,IC7WrB,IAAI,GAAsC,WACxC,IAAI51J,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA0BtC,GAAwC,SAAUgN,EAAY1T,EAAQ2N,EAAKgG,GAC7E,IAEIxN,EAFAyN,EAAIC,UAAUpK,OACdqK,EAAIF,EAAI,EAAI5T,EAAkB,OAAT2T,EAAgBA,EAAOrW,OAAOyW,yBAAyB/T,EAAQ2N,GAAOgG,EAE/F,GAAuB,kBAAZK,SAAoD,oBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASP,EAAY1T,EAAQ2N,EAAKgG,QAAW,IAAK,IAAIjI,EAAIgI,EAAWjK,OAAS,EAAGiC,GAAK,EAAGA,KAC1KvF,EAAIuN,EAAWhI,MAAIoI,GAAKF,EAAI,EAAIzN,EAAE2N,GAAKF,EAAI,EAAIzN,EAAEnG,EAAQ2N,EAAKmG,GAAK3N,EAAEnG,EAAQ2N,KAASmG,GAE5F,OAAOF,EAAI,GAAKE,GAAKxW,OAAOM,eAAeoC,EAAQ2N,EAAKmG,GAAIA,GAG1D,GAAkC,SAAUK,EAAYC,GAC1D,OAAO,SAAUpU,EAAQ2N,GACvByG,EAAUpU,EAAQ2N,EAAKwG,KAavB,GAEJ,SAAUlN,GAGR,SAAS+5J,EAA+Bl5J,EAAQwM,EAAmBu0E,EAAethB,EAAqBF,EAAsBhY,EAAgB4xG,GAC3I,OAAOh6J,EAAOE,KAAKjK,MAAM,EAAM4K,EAAQwM,EAAmBu0E,EAAethB,EAAqBF,EAAsBhY,EAAgB4xG,IAAyB/jK,KAI/J,OAPA,GAAU8jK,EAAgC/5J,GAM1C+5J,EAAiC,GAAW,CAAC,GAAQ,EAAG,MAAqB,GAAQ,EAAG,MAAqB,GAAQ,EAAG,MAAuB,GAAQ,EAAG,MAAwB,GAAQ,EAAG,MAAkB,GAAQ,EAAG,OAAyBA,GAPrP,CASE,IAGF,YAA2B,ICjE3B,IAAI,GAAsC,WACxC,IAAI96J,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiB5I,OAAO+I,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAEK,eAAeD,KAAIL,EAAEK,GAAKJ,EAAEI,MAIhBL,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASM,IACPxJ,KAAKyJ,YAAcR,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEtI,UAAkB,OAANuI,EAAa9I,OAAOC,OAAO6I,IAAMM,EAAG7I,UAAYuI,EAAEvI,UAAW,IAAI6I,IAtBzC,GA8BtC,GAEJ,SAAUO,GAGR,SAASi6J,IACP,IAAI5iK,EAAQ2I,EAAOE,KAAKjK,KAAM,CAC5BgG,GAAI,mCACJkE,MAAO,KAAsB+5J,mBAC7B95J,MAAO,6BACPC,aAAc,QACVpK,KAGN,OADAoB,EAAM8iK,mBAAqB,KACpB9iK,EAgBT,OA3BA,GAAU4iK,EAAoBj6J,GAc9Bi6J,EAAmBrjK,UAAU+J,IAAM,SAAUC,EAAUC,GACrD,IAAIu5J,EAAyBx5J,EAAS/J,IAAI,MAEtCZ,KAAKkkK,oBAEPC,EAAuBC,SAASpkK,KAAKkkK,oBACrClkK,KAAKkkK,mBAAqB,OAE1BlkK,KAAKkkK,mBAAqBC,EAAuBp0H,WAAWs0H,UAC5DF,EAAuBC,SAAS,cAI7BJ,EA5BT,CA6BE,KAEF,YAAqB,ICnErB","file":"static/js/4.9785049e.chunk.js","sourcesContent":["import '../../editor/editor.api.js';\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n'use strict';\n\nvar Emitter = monaco.Emitter;\n\nvar LanguageServiceDefaultsImpl =\n/** @class */\nfunction () {\n  function LanguageServiceDefaultsImpl(compilerOptions, diagnosticsOptions) {\n    this._onDidChange = new Emitter();\n    this._onDidExtraLibsChange = new Emitter();\n    this._extraLibs = Object.create(null);\n    this._workerMaxIdleTime = 2 * 60 * 1000;\n    this.setCompilerOptions(compilerOptions);\n    this.setDiagnosticsOptions(diagnosticsOptions);\n    this._onDidExtraLibsChangeTimeout = -1;\n  }\n\n  Object.defineProperty(LanguageServiceDefaultsImpl.prototype, \"onDidChange\", {\n    get: function get() {\n      return this._onDidChange.event;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(LanguageServiceDefaultsImpl.prototype, \"onDidExtraLibsChange\", {\n    get: function get() {\n      return this._onDidExtraLibsChange.event;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  LanguageServiceDefaultsImpl.prototype.getExtraLibs = function () {\n    return this._extraLibs;\n  };\n\n  LanguageServiceDefaultsImpl.prototype.addExtraLib = function (content, filePath) {\n    var _this = this;\n\n    if (typeof filePath === 'undefined') {\n      filePath = \"ts:extralib-\" + Math.random().toString(36).substring(2, 15);\n    }\n\n    if (this._extraLibs[filePath] && this._extraLibs[filePath].content === content) {\n      // no-op, there already exists an extra lib with this content\n      return {\n        dispose: function dispose() {}\n      };\n    }\n\n    var myVersion = 1;\n\n    if (this._extraLibs[filePath]) {\n      myVersion = this._extraLibs[filePath].version + 1;\n    }\n\n    this._extraLibs[filePath] = {\n      content: content,\n      version: myVersion\n    };\n\n    this._fireOnDidExtraLibsChangeSoon();\n\n    return {\n      dispose: function dispose() {\n        var extraLib = _this._extraLibs[filePath];\n\n        if (!extraLib) {\n          return;\n        }\n\n        if (extraLib.version !== myVersion) {\n          return;\n        }\n\n        delete _this._extraLibs[filePath];\n\n        _this._fireOnDidExtraLibsChangeSoon();\n      }\n    };\n  };\n\n  LanguageServiceDefaultsImpl.prototype._fireOnDidExtraLibsChangeSoon = function () {\n    var _this = this;\n\n    if (this._onDidExtraLibsChangeTimeout !== -1) {\n      // already scheduled\n      return;\n    }\n\n    this._onDidExtraLibsChangeTimeout = setTimeout(function () {\n      _this._onDidExtraLibsChangeTimeout = -1;\n\n      _this._onDidExtraLibsChange.fire(undefined);\n    }, 0);\n  };\n\n  LanguageServiceDefaultsImpl.prototype.getCompilerOptions = function () {\n    return this._compilerOptions;\n  };\n\n  LanguageServiceDefaultsImpl.prototype.setCompilerOptions = function (options) {\n    this._compilerOptions = options || Object.create(null);\n\n    this._onDidChange.fire(undefined);\n  };\n\n  LanguageServiceDefaultsImpl.prototype.getDiagnosticsOptions = function () {\n    return this._diagnosticsOptions;\n  };\n\n  LanguageServiceDefaultsImpl.prototype.setDiagnosticsOptions = function (options) {\n    this._diagnosticsOptions = options || Object.create(null);\n\n    this._onDidChange.fire(undefined);\n  };\n\n  LanguageServiceDefaultsImpl.prototype.setMaximumWorkerIdleTime = function (value) {\n    // doesn't fire an event since no\n    // worker restart is required here\n    this._workerMaxIdleTime = value;\n  };\n\n  LanguageServiceDefaultsImpl.prototype.getWorkerMaxIdleTime = function () {\n    return this._workerMaxIdleTime;\n  };\n\n  LanguageServiceDefaultsImpl.prototype.setEagerModelSync = function (value) {\n    // doesn't fire an event since no\n    // worker restart is required here\n    this._eagerModelSync = value;\n  };\n\n  LanguageServiceDefaultsImpl.prototype.getEagerModelSync = function () {\n    return this._eagerModelSync;\n  };\n\n  return LanguageServiceDefaultsImpl;\n}();\n\nexport { LanguageServiceDefaultsImpl }; //#region enums copied from typescript to prevent loading the entire typescriptServices ---\n\nvar ModuleKind;\n\n(function (ModuleKind) {\n  ModuleKind[ModuleKind[\"None\"] = 0] = \"None\";\n  ModuleKind[ModuleKind[\"CommonJS\"] = 1] = \"CommonJS\";\n  ModuleKind[ModuleKind[\"AMD\"] = 2] = \"AMD\";\n  ModuleKind[ModuleKind[\"UMD\"] = 3] = \"UMD\";\n  ModuleKind[ModuleKind[\"System\"] = 4] = \"System\";\n  ModuleKind[ModuleKind[\"ES2015\"] = 5] = \"ES2015\";\n  ModuleKind[ModuleKind[\"ESNext\"] = 6] = \"ESNext\";\n})(ModuleKind || (ModuleKind = {}));\n\nvar JsxEmit;\n\n(function (JsxEmit) {\n  JsxEmit[JsxEmit[\"None\"] = 0] = \"None\";\n  JsxEmit[JsxEmit[\"Preserve\"] = 1] = \"Preserve\";\n  JsxEmit[JsxEmit[\"React\"] = 2] = \"React\";\n  JsxEmit[JsxEmit[\"ReactNative\"] = 3] = \"ReactNative\";\n})(JsxEmit || (JsxEmit = {}));\n\nvar NewLineKind;\n\n(function (NewLineKind) {\n  NewLineKind[NewLineKind[\"CarriageReturnLineFeed\"] = 0] = \"CarriageReturnLineFeed\";\n  NewLineKind[NewLineKind[\"LineFeed\"] = 1] = \"LineFeed\";\n})(NewLineKind || (NewLineKind = {}));\n\nvar ScriptTarget;\n\n(function (ScriptTarget) {\n  ScriptTarget[ScriptTarget[\"ES3\"] = 0] = \"ES3\";\n  ScriptTarget[ScriptTarget[\"ES5\"] = 1] = \"ES5\";\n  ScriptTarget[ScriptTarget[\"ES2015\"] = 2] = \"ES2015\";\n  ScriptTarget[ScriptTarget[\"ES2016\"] = 3] = \"ES2016\";\n  ScriptTarget[ScriptTarget[\"ES2017\"] = 4] = \"ES2017\";\n  ScriptTarget[ScriptTarget[\"ES2018\"] = 5] = \"ES2018\";\n  ScriptTarget[ScriptTarget[\"ESNext\"] = 6] = \"ESNext\";\n  ScriptTarget[ScriptTarget[\"JSON\"] = 100] = \"JSON\";\n  ScriptTarget[ScriptTarget[\"Latest\"] = 6] = \"Latest\";\n})(ScriptTarget || (ScriptTarget = {}));\n\nvar ModuleResolutionKind;\n\n(function (ModuleResolutionKind) {\n  ModuleResolutionKind[ModuleResolutionKind[\"Classic\"] = 1] = \"Classic\";\n  ModuleResolutionKind[ModuleResolutionKind[\"NodeJs\"] = 2] = \"NodeJs\";\n})(ModuleResolutionKind || (ModuleResolutionKind = {})); //#endregion\n\n\nvar typescriptDefaults = new LanguageServiceDefaultsImpl({\n  allowNonTsExtensions: true,\n  target: ScriptTarget.Latest\n}, {\n  noSemanticValidation: false,\n  noSyntaxValidation: false\n});\nvar javascriptDefaults = new LanguageServiceDefaultsImpl({\n  allowNonTsExtensions: true,\n  allowJs: true,\n  target: ScriptTarget.Latest\n}, {\n  noSemanticValidation: true,\n  noSyntaxValidation: false\n});\n\nfunction getTypeScriptWorker() {\n  return getMode().then(function (mode) {\n    return mode.getTypeScriptWorker();\n  });\n}\n\nfunction getJavaScriptWorker() {\n  return getMode().then(function (mode) {\n    return mode.getJavaScriptWorker();\n  });\n} // Export API\n\n\nfunction createAPI() {\n  return {\n    ModuleKind: ModuleKind,\n    JsxEmit: JsxEmit,\n    NewLineKind: NewLineKind,\n    ScriptTarget: ScriptTarget,\n    ModuleResolutionKind: ModuleResolutionKind,\n    typescriptDefaults: typescriptDefaults,\n    javascriptDefaults: javascriptDefaults,\n    getTypeScriptWorker: getTypeScriptWorker,\n    getJavaScriptWorker: getJavaScriptWorker\n  };\n}\n\nmonaco.languages.typescript = createAPI(); // --- Registration to monaco editor ---\n\nfunction getMode() {\n  return import('./tsMode.js');\n}\n\nmonaco.languages.onLanguage('typescript', function () {\n  return getMode().then(function (mode) {\n    return mode.setupTypeScript(typescriptDefaults);\n  });\n});\nmonaco.languages.onLanguage('javascript', function () {\n  return getMode().then(function (mode) {\n    return mode.setupJavaScript(javascriptDefaults);\n  });\n});","import '../../editor/editor.api.js';\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n'use strict';\n\nvar Emitter = monaco.Emitter; // --- CSS configuration and defaults ---------\n\nvar LanguageServiceDefaultsImpl =\n/** @class */\nfunction () {\n  function LanguageServiceDefaultsImpl(languageId, diagnosticsOptions) {\n    this._onDidChange = new Emitter();\n    this._languageId = languageId;\n    this.setDiagnosticsOptions(diagnosticsOptions);\n  }\n\n  Object.defineProperty(LanguageServiceDefaultsImpl.prototype, \"onDidChange\", {\n    get: function get() {\n      return this._onDidChange.event;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(LanguageServiceDefaultsImpl.prototype, \"languageId\", {\n    get: function get() {\n      return this._languageId;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(LanguageServiceDefaultsImpl.prototype, \"diagnosticsOptions\", {\n    get: function get() {\n      return this._diagnosticsOptions;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  LanguageServiceDefaultsImpl.prototype.setDiagnosticsOptions = function (options) {\n    this._diagnosticsOptions = options || Object.create(null);\n\n    this._onDidChange.fire(this);\n  };\n\n  return LanguageServiceDefaultsImpl;\n}();\n\nexport { LanguageServiceDefaultsImpl };\nvar diagnosticDefault = {\n  validate: true,\n  lint: {\n    compatibleVendorPrefixes: 'ignore',\n    vendorPrefix: 'warning',\n    duplicateProperties: 'warning',\n    emptyRules: 'warning',\n    importStatement: 'ignore',\n    boxModel: 'ignore',\n    universalSelector: 'ignore',\n    zeroUnits: 'ignore',\n    fontFaceProperties: 'warning',\n    hexColorLength: 'error',\n    argumentsInColorFunction: 'error',\n    unknownProperties: 'warning',\n    ieHack: 'ignore',\n    unknownVendorSpecificProperties: 'ignore',\n    propertyIgnoredDueToDisplay: 'warning',\n    important: 'ignore',\n    float: 'ignore',\n    idSelector: 'ignore'\n  }\n};\nvar cssDefaults = new LanguageServiceDefaultsImpl('css', diagnosticDefault);\nvar scssDefaults = new LanguageServiceDefaultsImpl('scss', diagnosticDefault);\nvar lessDefaults = new LanguageServiceDefaultsImpl('less', diagnosticDefault); // Export API\n\nfunction createAPI() {\n  return {\n    cssDefaults: cssDefaults,\n    lessDefaults: lessDefaults,\n    scssDefaults: scssDefaults\n  };\n}\n\nmonaco.languages.css = createAPI(); // --- Registration to monaco editor ---\n\nfunction getMode() {\n  return import('./cssMode.js');\n}\n\nmonaco.languages.onLanguage('less', function () {\n  getMode().then(function (mode) {\n    return mode.setupMode(lessDefaults);\n  });\n});\nmonaco.languages.onLanguage('scss', function () {\n  getMode().then(function (mode) {\n    return mode.setupMode(scssDefaults);\n  });\n});\nmonaco.languages.onLanguage('css', function () {\n  getMode().then(function (mode) {\n    return mode.setupMode(cssDefaults);\n  });\n});","import '../../editor/editor.api.js';\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n'use strict';\n\nvar Emitter = monaco.Emitter; // --- JSON configuration and defaults ---------\n\nvar LanguageServiceDefaultsImpl =\n/** @class */\nfunction () {\n  function LanguageServiceDefaultsImpl(languageId, diagnosticsOptions) {\n    this._onDidChange = new Emitter();\n    this._languageId = languageId;\n    this.setDiagnosticsOptions(diagnosticsOptions);\n  }\n\n  Object.defineProperty(LanguageServiceDefaultsImpl.prototype, \"onDidChange\", {\n    get: function get() {\n      return this._onDidChange.event;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(LanguageServiceDefaultsImpl.prototype, \"languageId\", {\n    get: function get() {\n      return this._languageId;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(LanguageServiceDefaultsImpl.prototype, \"diagnosticsOptions\", {\n    get: function get() {\n      return this._diagnosticsOptions;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  LanguageServiceDefaultsImpl.prototype.setDiagnosticsOptions = function (options) {\n    this._diagnosticsOptions = options || Object.create(null);\n\n    this._onDidChange.fire(this);\n  };\n\n  return LanguageServiceDefaultsImpl;\n}();\n\nexport { LanguageServiceDefaultsImpl };\nvar diagnosticDefault = {\n  validate: true,\n  allowComments: true,\n  schemas: [],\n  enableSchemaRequest: false\n};\nvar jsonDefaults = new LanguageServiceDefaultsImpl('json', diagnosticDefault); // Export API\n\nfunction createAPI() {\n  return {\n    jsonDefaults: jsonDefaults\n  };\n}\n\nmonaco.languages.json = createAPI(); // --- Registration to monaco editor ---\n\nfunction getMode() {\n  return import('./jsonMode.js');\n}\n\nmonaco.languages.register({\n  id: 'json',\n  extensions: ['.json', '.bowerrc', '.jshintrc', '.jscsrc', '.eslintrc', '.babelrc'],\n  aliases: ['JSON', 'json'],\n  mimetypes: ['application/json']\n});\nmonaco.languages.onLanguage('json', function () {\n  getMode().then(function (mode) {\n    return mode.setupMode(jsonDefaults);\n  });\n});","import '../../editor/editor.api.js';\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n'use strict';\n\nvar Emitter = monaco.Emitter; // --- HTML configuration and defaults ---------\n\nvar LanguageServiceDefaultsImpl =\n/** @class */\nfunction () {\n  function LanguageServiceDefaultsImpl(languageId, options) {\n    this._onDidChange = new Emitter();\n    this._languageId = languageId;\n    this.setOptions(options);\n  }\n\n  Object.defineProperty(LanguageServiceDefaultsImpl.prototype, \"onDidChange\", {\n    get: function get() {\n      return this._onDidChange.event;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(LanguageServiceDefaultsImpl.prototype, \"languageId\", {\n    get: function get() {\n      return this._languageId;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(LanguageServiceDefaultsImpl.prototype, \"options\", {\n    get: function get() {\n      return this._options;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  LanguageServiceDefaultsImpl.prototype.setOptions = function (options) {\n    this._options = options || Object.create(null);\n\n    this._onDidChange.fire(this);\n  };\n\n  return LanguageServiceDefaultsImpl;\n}();\n\nexport { LanguageServiceDefaultsImpl };\nvar formatDefaults = {\n  tabSize: 4,\n  insertSpaces: false,\n  wrapLineLength: 120,\n  unformatted: 'default\": \"a, abbr, acronym, b, bdo, big, br, button, cite, code, dfn, em, i, img, input, kbd, label, map, object, q, samp, select, small, span, strong, sub, sup, textarea, tt, var',\n  contentUnformatted: 'pre',\n  indentInnerHtml: false,\n  preserveNewLines: true,\n  maxPreserveNewLines: null,\n  indentHandlebars: false,\n  endWithNewline: false,\n  extraLiners: 'head, body, /html',\n  wrapAttributes: 'auto'\n};\nvar htmlOptionsDefault = {\n  format: formatDefaults,\n  suggest: {\n    html5: true,\n    angular1: true,\n    ionic: true\n  }\n};\nvar handlebarOptionsDefault = {\n  format: formatDefaults,\n  suggest: {\n    html5: true\n  }\n};\nvar razorOptionsDefault = {\n  format: formatDefaults,\n  suggest: {\n    html5: true,\n    razor: true\n  }\n};\nvar htmlLanguageId = 'html';\nvar handlebarsLanguageId = 'handlebars';\nvar razorLanguageId = 'razor';\nvar htmlDefaults = new LanguageServiceDefaultsImpl(htmlLanguageId, htmlOptionsDefault);\nvar handlebarDefaults = new LanguageServiceDefaultsImpl(handlebarsLanguageId, handlebarOptionsDefault);\nvar razorDefaults = new LanguageServiceDefaultsImpl(razorLanguageId, razorOptionsDefault); // Export API\n\nfunction createAPI() {\n  return {\n    htmlDefaults: htmlDefaults,\n    razorDefaults: razorDefaults,\n    handlebarDefaults: handlebarDefaults\n  };\n}\n\nmonaco.languages.html = createAPI(); // --- Registration to monaco editor ---\n\nfunction getMode() {\n  return import('./htmlMode.js');\n}\n\nmonaco.languages.onLanguage(htmlLanguageId, function () {\n  getMode().then(function (mode) {\n    return mode.setupMode(htmlDefaults);\n  });\n});\nmonaco.languages.onLanguage(handlebarsLanguageId, function () {\n  getMode().then(function (mode) {\n    return mode.setupMode(handlebarDefaults);\n  });\n});\nmonaco.languages.onLanguage(razorLanguageId, function () {\n  getMode().then(function (mode) {\n    return mode.setupMode(razorDefaults);\n  });\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict'; // Allow for running under nodejs/requirejs in tests\n\nvar _monaco = typeof monaco === 'undefined' ? self.monaco : monaco;\n\nvar languageDefinitions = {};\n\nfunction _loadLanguage(languageId) {\n  var loader = languageDefinitions[languageId].loader;\n  return loader().then(function (mod) {\n    _monaco.languages.setMonarchTokensProvider(languageId, mod.language);\n\n    _monaco.languages.setLanguageConfiguration(languageId, mod.conf);\n  });\n}\n\nvar languagePromises = {};\nexport function loadLanguage(languageId) {\n  if (!languagePromises[languageId]) {\n    languagePromises[languageId] = _loadLanguage(languageId);\n  }\n\n  return languagePromises[languageId];\n}\nexport function registerLanguage(def) {\n  var languageId = def.id;\n  languageDefinitions[languageId] = def;\n\n  _monaco.languages.register(def);\n\n  _monaco.languages.onLanguage(languageId, function () {\n    loadLanguage(languageId);\n  });\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'bat',\n  extensions: ['.bat', '.cmd'],\n  aliases: ['Batch', 'bat'],\n  loader: function loader() {\n    return import('./bat.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'coffeescript',\n  extensions: ['.coffee'],\n  aliases: ['CoffeeScript', 'coffeescript', 'coffee'],\n  mimetypes: ['text/x-coffeescript', 'text/coffeescript'],\n  loader: function loader() {\n    return import('./coffee.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'c',\n  extensions: ['.c', '.h'],\n  aliases: ['C', 'c'],\n  loader: function loader() {\n    return import('./cpp.js');\n  }\n});\nregisterLanguage({\n  id: 'cpp',\n  extensions: ['.cpp', '.cc', '.cxx', '.hpp', '.hh', '.hxx'],\n  aliases: ['C++', 'Cpp', 'cpp'],\n  loader: function loader() {\n    return import('./cpp.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'csharp',\n  extensions: ['.cs', '.csx', '.cake'],\n  aliases: ['C#', 'csharp'],\n  loader: function loader() {\n    return import('./csharp.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'csp',\n  extensions: [],\n  aliases: ['CSP', 'csp'],\n  loader: function loader() {\n    return import('./csp.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'css',\n  extensions: ['.css'],\n  aliases: ['CSS', 'css'],\n  mimetypes: ['text/css'],\n  loader: function loader() {\n    return import('./css.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'dockerfile',\n  extensions: ['.dockerfile'],\n  filenames: ['Dockerfile'],\n  aliases: ['Dockerfile'],\n  loader: function loader() {\n    return import('./dockerfile.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'fsharp',\n  extensions: ['.fs', '.fsi', '.ml', '.mli', '.fsx', '.fsscript'],\n  aliases: ['F#', 'FSharp', 'fsharp'],\n  loader: function loader() {\n    return import('./fsharp.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'go',\n  extensions: ['.go'],\n  aliases: ['Go'],\n  loader: function loader() {\n    return import('./go.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'handlebars',\n  extensions: ['.handlebars', '.hbs'],\n  aliases: ['Handlebars', 'handlebars'],\n  mimetypes: ['text/x-handlebars-template'],\n  loader: function loader() {\n    return import('./handlebars.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'html',\n  extensions: ['.html', '.htm', '.shtml', '.xhtml', '.mdoc', '.jsp', '.asp', '.aspx', '.jshtm'],\n  aliases: ['HTML', 'htm', 'html', 'xhtml'],\n  mimetypes: ['text/html', 'text/x-jshtm', 'text/template', 'text/ng-template'],\n  loader: function loader() {\n    return import('./html.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'ini',\n  extensions: ['.ini', '.properties', '.gitconfig'],\n  filenames: ['config', '.gitattributes', '.gitconfig', '.editorconfig'],\n  aliases: ['Ini', 'ini'],\n  loader: function loader() {\n    return import('./ini.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'java',\n  extensions: ['.java', '.jav'],\n  aliases: ['Java', 'java'],\n  mimetypes: ['text/x-java-source', 'text/x-java'],\n  loader: function loader() {\n    return import('./java.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'javascript',\n  extensions: ['.js', '.es6', '.jsx'],\n  firstLine: '^#!.*\\\\bnode',\n  filenames: ['jakefile'],\n  aliases: ['JavaScript', 'javascript', 'js'],\n  mimetypes: ['text/javascript'],\n  loader: function loader() {\n    return import('./javascript.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'kotlin',\n  extensions: ['.kt'],\n  aliases: ['Kotlin', 'kotlin'],\n  mimetypes: ['text/x-kotlin-source', 'text/x-kotlin'],\n  loader: function loader() {\n    return import('./kotlin.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'less',\n  extensions: ['.less'],\n  aliases: ['Less', 'less'],\n  mimetypes: ['text/x-less', 'text/less'],\n  loader: function loader() {\n    return import('./less.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'lua',\n  extensions: ['.lua'],\n  aliases: ['Lua', 'lua'],\n  loader: function loader() {\n    return import('./lua.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'markdown',\n  extensions: ['.md', '.markdown', '.mdown', '.mkdn', '.mkd', '.mdwn', '.mdtxt', '.mdtext'],\n  aliases: ['Markdown', 'markdown'],\n  loader: function loader() {\n    return import('./markdown.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'msdax',\n  extensions: ['.dax', '.msdax'],\n  aliases: ['DAX', 'MSDAX'],\n  loader: function loader() {\n    return import('./msdax.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'mysql',\n  extensions: [],\n  aliases: ['MySQL', 'mysql'],\n  loader: function loader() {\n    return import('./mysql.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'objective-c',\n  extensions: ['.m'],\n  aliases: ['Objective-C'],\n  loader: function loader() {\n    return import('./objective-c.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'pascal',\n  extensions: ['.pas', '.p', '.pp'],\n  aliases: ['Pascal', 'pas'],\n  mimetypes: ['text/x-pascal-source', 'text/x-pascal'],\n  loader: function loader() {\n    return import('./pascal.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'pgsql',\n  extensions: [],\n  aliases: ['PostgreSQL', 'postgres', 'pg', 'postgre'],\n  loader: function loader() {\n    return import('./pgsql.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'php',\n  extensions: ['.php', '.php4', '.php5', '.phtml', '.ctp'],\n  aliases: ['PHP', 'php'],\n  mimetypes: ['application/x-php'],\n  loader: function loader() {\n    return import('./php.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'postiats',\n  extensions: ['.dats', '.sats', '.hats'],\n  aliases: ['ATS', 'ATS/Postiats'],\n  loader: function loader() {\n    return import('./postiats.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'powerquery',\n  extensions: ['.pq', '.pqm'],\n  aliases: ['PQ', 'M', 'Power Query', 'Power Query M'],\n  loader: function loader() {\n    return import('./powerquery.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'powershell',\n  extensions: ['.ps1', '.psm1', '.psd1'],\n  aliases: ['PowerShell', 'powershell', 'ps', 'ps1'],\n  loader: function loader() {\n    return import('./powershell.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'pug',\n  extensions: ['.jade', '.pug'],\n  aliases: ['Pug', 'Jade', 'jade'],\n  loader: function loader() {\n    return import('./pug.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'python',\n  extensions: ['.py', '.rpy', '.pyw', '.cpy', '.gyp', '.gypi'],\n  aliases: ['Python', 'py'],\n  firstLine: '^#!/.*\\\\bpython[0-9.-]*\\\\b',\n  loader: function loader() {\n    return import('./python.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'r',\n  extensions: ['.r', '.rhistory', '.rprofile', '.rt'],\n  aliases: ['R', 'r'],\n  loader: function loader() {\n    return import('./r.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'razor',\n  extensions: ['.cshtml'],\n  aliases: ['Razor', 'razor'],\n  mimetypes: ['text/x-cshtml'],\n  loader: function loader() {\n    return import('./razor.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'redis',\n  extensions: ['.redis'],\n  aliases: ['redis'],\n  loader: function loader() {\n    return import('./redis.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'redshift',\n  extensions: [],\n  aliases: ['Redshift', 'redshift'],\n  loader: function loader() {\n    return import('./redshift.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'ruby',\n  extensions: ['.rb', '.rbx', '.rjs', '.gemspec', '.pp'],\n  filenames: ['rakefile'],\n  aliases: ['Ruby', 'rb'],\n  loader: function loader() {\n    return import('./ruby.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'rust',\n  extensions: ['.rs', '.rlib'],\n  aliases: ['Rust', 'rust'],\n  loader: function loader() {\n    return import('./rust.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'sb',\n  extensions: ['.sb'],\n  aliases: ['Small Basic', 'sb'],\n  loader: function loader() {\n    return import('./sb.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'scss',\n  extensions: ['.scss'],\n  aliases: ['Sass', 'sass', 'scss'],\n  mimetypes: ['text/x-scss', 'text/scss'],\n  loader: function loader() {\n    return import('./scss.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'sol',\n  extensions: ['.sol'],\n  aliases: ['sol', 'solidity', 'Solidity'],\n  loader: function loader() {\n    return import('./solidity.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'sql',\n  extensions: ['.sql'],\n  aliases: ['SQL'],\n  loader: function loader() {\n    return import('./sql.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'st',\n  extensions: ['.st', '.iecst', '.iecplc', '.lc3lib'],\n  aliases: ['StructuredText', 'scl', 'stl'],\n  loader: function loader() {\n    return import('./st.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'swift',\n  aliases: ['Swift', 'swift'],\n  extensions: ['.swift'],\n  mimetypes: ['text/swift'],\n  loader: function loader() {\n    return import('./swift.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'tcl',\n  extensions: ['.tcl'],\n  aliases: ['tcl', 'Tcl', 'tcltk', 'TclTk', 'tcl/tk', 'Tcl/Tk'],\n  loader: function loader() {\n    return import('./tcl.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'typescript',\n  extensions: ['.ts', '.tsx'],\n  aliases: ['TypeScript', 'ts', 'typescript'],\n  mimetypes: ['text/typescript'],\n  loader: function loader() {\n    return import('./typescript.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'vb',\n  extensions: ['.vb'],\n  aliases: ['Visual Basic', 'vb'],\n  loader: function loader() {\n    return import('./vb.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'xml',\n  extensions: ['.xml', '.dtd', '.ascx', '.csproj', '.config', '.wxi', '.wxl', '.wxs', '.xaml', '.svg', '.svgz'],\n  firstLine: '(\\\\<\\\\?xml.*)|(\\\\<svg)|(\\\\<\\\\!doctype\\\\s+svg)',\n  aliases: ['XML', 'xml'],\n  mimetypes: ['text/xml', 'application/xml', 'application/xaml+xml', 'application/xml-dtd'],\n  loader: function loader() {\n    return import('./xml.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'yaml',\n  extensions: ['.yaml', '.yml'],\n  aliases: ['YAML', 'yaml', 'YML', 'yml'],\n  mimetypes: ['application/x-yaml'],\n  loader: function loader() {\n    return import('./yaml.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'scheme',\n  extensions: ['.scm', '.ss', '.sch', '.rkt'],\n  aliases: ['scheme', 'Scheme'],\n  loader: function loader() {\n    return import('./scheme.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'clojure',\n  extensions: ['.clj', '.cljs', '.cljc', '.edn'],\n  aliases: ['clojure', 'Clojure'],\n  loader: function loader() {\n    return import('./clojure.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n*  Copyright (c) Microsoft Corporation. All rights reserved.\n*  Licensed under the MIT License. See License.txt in the project root for license information.\n*--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'shell',\n  extensions: ['.sh', '.bash'],\n  aliases: ['Shell', 'sh'],\n  loader: function loader() {\n    return import('./shell.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n*  Copyright (c) Microsoft Corporation. All rights reserved.\n*  Licensed under the MIT License. See License.txt in the project root for license information.\n*--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'perl',\n  extensions: ['.pl'],\n  aliases: ['Perl', 'pl'],\n  loader: function loader() {\n    return import('./perl.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'azcli',\n  extensions: ['.azcli'],\n  aliases: ['Azure CLI', 'azcli'],\n  loader: function loader() {\n    return import('./azcli.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'apex',\n  extensions: ['.cls'],\n  aliases: ['Apex', 'apex'],\n  mimetypes: ['text/x-apex-source', 'text/x-apex'],\n  loader: function loader() {\n    return import('./apex.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { registerLanguage } from '../_.contribution.js';\nregisterLanguage({\n  id: 'graphql',\n  extensions: ['.graphql', '.gql'],\n  aliases: ['GraphQL', 'graphql', 'gql'],\n  mimetypes: ['application/graphql'],\n  loader: function loader() {\n    return import('./graphql.js');\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport './bracketMatching.css';\nimport * as nls from '../../../nls.js';\nimport { RunOnceScheduler } from '../../../base/common/async.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../browser/editorExtensions.js';\nimport { Position } from '../../common/core/position.js';\nimport { Selection } from '../../common/core/selection.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport { OverviewRulerLane } from '../../common/model.js';\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\nimport { editorBracketMatchBackground, editorBracketMatchBorder } from '../../common/view/editorColorRegistry.js';\nimport { registerColor } from '../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant, themeColorFromId } from '../../../platform/theme/common/themeService.js';\nimport { MenuRegistry } from '../../../platform/actions/common/actions.js';\nvar overviewRulerBracketMatchForeground = registerColor('editorOverviewRuler.bracketMatchForeground', {\n  dark: '#A0A0A0',\n  light: '#A0A0A0',\n  hc: '#A0A0A0'\n}, nls.localize('overviewRulerBracketMatchForeground', 'Overview ruler marker color for matching brackets.'));\n\nvar JumpToBracketAction =\n/** @class */\nfunction (_super) {\n  __extends(JumpToBracketAction, _super);\n\n  function JumpToBracketAction() {\n    return _super.call(this, {\n      id: 'editor.action.jumpToBracket',\n      label: nls.localize('smartSelect.jumpBracket', \"Go to Bracket\"),\n      alias: 'Go to Bracket',\n      precondition: null,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048\n        /* CtrlCmd */\n        | 1024\n        /* Shift */\n        | 88\n        /* US_BACKSLASH */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  JumpToBracketAction.prototype.run = function (accessor, editor) {\n    var controller = BracketMatchingController.get(editor);\n\n    if (!controller) {\n      return;\n    }\n\n    controller.jumpToBracket();\n  };\n\n  return JumpToBracketAction;\n}(EditorAction);\n\nvar SelectToBracketAction =\n/** @class */\nfunction (_super) {\n  __extends(SelectToBracketAction, _super);\n\n  function SelectToBracketAction() {\n    return _super.call(this, {\n      id: 'editor.action.selectToBracket',\n      label: nls.localize('smartSelect.selectToBracket', \"Select to Bracket\"),\n      alias: 'Select to Bracket',\n      precondition: null\n    }) || this;\n  }\n\n  SelectToBracketAction.prototype.run = function (accessor, editor) {\n    var controller = BracketMatchingController.get(editor);\n\n    if (!controller) {\n      return;\n    }\n\n    controller.selectToBracket();\n  };\n\n  return SelectToBracketAction;\n}(EditorAction);\n\nvar BracketsData =\n/** @class */\nfunction () {\n  function BracketsData(position, brackets) {\n    this.position = position;\n    this.brackets = brackets;\n  }\n\n  return BracketsData;\n}();\n\nvar BracketMatchingController =\n/** @class */\nfunction (_super) {\n  __extends(BracketMatchingController, _super);\n\n  function BracketMatchingController(editor) {\n    var _this = _super.call(this) || this;\n\n    _this._editor = editor;\n    _this._lastBracketsData = [];\n    _this._lastVersionId = 0;\n    _this._decorations = [];\n    _this._updateBracketsSoon = _this._register(new RunOnceScheduler(function () {\n      return _this._updateBrackets();\n    }, 50));\n    _this._matchBrackets = _this._editor.getConfiguration().contribInfo.matchBrackets;\n\n    _this._updateBracketsSoon.schedule();\n\n    _this._register(editor.onDidChangeCursorPosition(function (e) {\n      if (!_this._matchBrackets) {\n        // Early exit if nothing needs to be done!\n        // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n        return;\n      }\n\n      _this._updateBracketsSoon.schedule();\n    }));\n\n    _this._register(editor.onDidChangeModelContent(function (e) {\n      _this._updateBracketsSoon.schedule();\n    }));\n\n    _this._register(editor.onDidChangeModel(function (e) {\n      _this._lastBracketsData = [];\n      _this._decorations = [];\n\n      _this._updateBracketsSoon.schedule();\n    }));\n\n    _this._register(editor.onDidChangeModelLanguageConfiguration(function (e) {\n      _this._lastBracketsData = [];\n\n      _this._updateBracketsSoon.schedule();\n    }));\n\n    _this._register(editor.onDidChangeConfiguration(function (e) {\n      _this._matchBrackets = _this._editor.getConfiguration().contribInfo.matchBrackets;\n\n      if (!_this._matchBrackets && _this._decorations.length > 0) {\n        // Remove existing decorations if bracket matching is off\n        _this._decorations = _this._editor.deltaDecorations(_this._decorations, []);\n      }\n\n      _this._updateBracketsSoon.schedule();\n    }));\n\n    return _this;\n  }\n\n  BracketMatchingController.get = function (editor) {\n    return editor.getContribution(BracketMatchingController.ID);\n  };\n\n  BracketMatchingController.prototype.getId = function () {\n    return BracketMatchingController.ID;\n  };\n\n  BracketMatchingController.prototype.jumpToBracket = function () {\n    if (!this._editor.hasModel()) {\n      return;\n    }\n\n    var model = this._editor.getModel();\n\n    var newSelections = this._editor.getSelections().map(function (selection) {\n      var position = selection.getStartPosition(); // find matching brackets if position is on a bracket\n\n      var brackets = model.matchBracket(position);\n      var newCursorPosition = null;\n\n      if (brackets) {\n        if (brackets[0].containsPosition(position)) {\n          newCursorPosition = brackets[1].getStartPosition();\n        } else if (brackets[1].containsPosition(position)) {\n          newCursorPosition = brackets[0].getStartPosition();\n        }\n      } else {\n        // find the next bracket if the position isn't on a matching bracket\n        var nextBracket = model.findNextBracket(position);\n\n        if (nextBracket && nextBracket.range) {\n          newCursorPosition = nextBracket.range.getStartPosition();\n        }\n      }\n\n      if (newCursorPosition) {\n        return new Selection(newCursorPosition.lineNumber, newCursorPosition.column, newCursorPosition.lineNumber, newCursorPosition.column);\n      }\n\n      return new Selection(position.lineNumber, position.column, position.lineNumber, position.column);\n    });\n\n    this._editor.setSelections(newSelections);\n\n    this._editor.revealRange(newSelections[0]);\n  };\n\n  BracketMatchingController.prototype.selectToBracket = function () {\n    if (!this._editor.hasModel()) {\n      return;\n    }\n\n    var model = this._editor.getModel();\n\n    var newSelections = [];\n\n    this._editor.getSelections().forEach(function (selection) {\n      var position = selection.getStartPosition();\n      var brackets = model.matchBracket(position);\n      var openBracket = null;\n      var closeBracket = null;\n\n      if (!brackets) {\n        var nextBracket = model.findNextBracket(position);\n\n        if (nextBracket && nextBracket.range) {\n          brackets = model.matchBracket(nextBracket.range.getStartPosition());\n        }\n      }\n\n      if (brackets) {\n        if (brackets[0].startLineNumber === brackets[1].startLineNumber) {\n          openBracket = brackets[1].startColumn < brackets[0].startColumn ? brackets[1].getStartPosition() : brackets[0].getStartPosition();\n          closeBracket = brackets[1].startColumn < brackets[0].startColumn ? brackets[0].getEndPosition() : brackets[1].getEndPosition();\n        } else {\n          openBracket = brackets[1].startLineNumber < brackets[0].startLineNumber ? brackets[1].getStartPosition() : brackets[0].getStartPosition();\n          closeBracket = brackets[1].startLineNumber < brackets[0].startLineNumber ? brackets[0].getEndPosition() : brackets[1].getEndPosition();\n        }\n      }\n\n      if (openBracket && closeBracket) {\n        newSelections.push(new Selection(openBracket.lineNumber, openBracket.column, closeBracket.lineNumber, closeBracket.column));\n      }\n    });\n\n    if (newSelections.length > 0) {\n      this._editor.setSelections(newSelections);\n\n      this._editor.revealRange(newSelections[0]);\n    }\n  };\n\n  BracketMatchingController.prototype._updateBrackets = function () {\n    if (!this._matchBrackets) {\n      return;\n    }\n\n    this._recomputeBrackets();\n\n    var newDecorations = [],\n        newDecorationsLen = 0;\n\n    for (var i = 0, len = this._lastBracketsData.length; i < len; i++) {\n      var brackets = this._lastBracketsData[i].brackets;\n\n      if (brackets) {\n        newDecorations[newDecorationsLen++] = {\n          range: brackets[0],\n          options: BracketMatchingController._DECORATION_OPTIONS\n        };\n        newDecorations[newDecorationsLen++] = {\n          range: brackets[1],\n          options: BracketMatchingController._DECORATION_OPTIONS\n        };\n      }\n    }\n\n    this._decorations = this._editor.deltaDecorations(this._decorations, newDecorations);\n  };\n\n  BracketMatchingController.prototype._recomputeBrackets = function () {\n    if (!this._editor.hasModel()) {\n      // no model => no brackets!\n      this._lastBracketsData = [];\n      this._lastVersionId = 0;\n      return;\n    }\n\n    var model = this._editor.getModel();\n\n    var versionId = model.getVersionId();\n    var previousData = [];\n\n    if (this._lastVersionId === versionId) {\n      // use the previous data only if the model is at the same version id\n      previousData = this._lastBracketsData;\n    }\n\n    var selections = this._editor.getSelections();\n\n    var positions = [],\n        positionsLen = 0;\n\n    for (var i = 0, len = selections.length; i < len; i++) {\n      var selection = selections[i];\n\n      if (selection.isEmpty()) {\n        // will bracket match a cursor only if the selection is collapsed\n        positions[positionsLen++] = selection.getStartPosition();\n      }\n    } // sort positions for `previousData` cache hits\n\n\n    if (positions.length > 1) {\n      positions.sort(Position.compare);\n    }\n\n    var newData = [],\n        newDataLen = 0;\n    var previousIndex = 0,\n        previousLen = previousData.length;\n\n    for (var i = 0, len = positions.length; i < len; i++) {\n      var position = positions[i];\n\n      while (previousIndex < previousLen && previousData[previousIndex].position.isBefore(position)) {\n        previousIndex++;\n      }\n\n      if (previousIndex < previousLen && previousData[previousIndex].position.equals(position)) {\n        newData[newDataLen++] = previousData[previousIndex];\n      } else {\n        var brackets = model.matchBracket(position);\n        newData[newDataLen++] = new BracketsData(position, brackets);\n      }\n    }\n\n    this._lastBracketsData = newData;\n    this._lastVersionId = versionId;\n  };\n\n  BracketMatchingController.ID = 'editor.contrib.bracketMatchingController';\n  BracketMatchingController._DECORATION_OPTIONS = ModelDecorationOptions.register({\n    stickiness: 1\n    /* NeverGrowsWhenTypingAtEdges */\n    ,\n    className: 'bracket-match',\n    overviewRuler: {\n      color: themeColorFromId(overviewRulerBracketMatchForeground),\n      position: OverviewRulerLane.Center\n    }\n  });\n  return BracketMatchingController;\n}(Disposable);\n\nexport { BracketMatchingController };\nregisterEditorContribution(BracketMatchingController);\nregisterEditorAction(SelectToBracketAction);\nregisterEditorAction(JumpToBracketAction);\nregisterThemingParticipant(function (theme, collector) {\n  var bracketMatchBackground = theme.getColor(editorBracketMatchBackground);\n\n  if (bracketMatchBackground) {\n    collector.addRule(\".monaco-editor .bracket-match { background-color: \" + bracketMatchBackground + \"; }\");\n  }\n\n  var bracketMatchBorder = theme.getColor(editorBracketMatchBorder);\n\n  if (bracketMatchBorder) {\n    collector.addRule(\".monaco-editor .bracket-match { border: 1px solid \" + bracketMatchBorder + \"; }\");\n  }\n}); // Go to menu\n\nMenuRegistry.appendMenuItem(16\n/* MenubarGoMenu */\n, {\n  group: '5_infile_nav',\n  command: {\n    id: 'editor.action.jumpToBracket',\n    title: nls.localize({\n      key: 'miGoToBracket',\n      comment: ['&& denotes a mnemonic']\n    }, \"Go to &&Bracket\")\n  },\n  order: 2\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../common/core/range.js';\n\nvar MoveCaretCommand =\n/** @class */\nfunction () {\n  function MoveCaretCommand(selection, isMovingLeft) {\n    this._selection = selection;\n    this._isMovingLeft = isMovingLeft;\n  }\n\n  MoveCaretCommand.prototype.getEditOperations = function (model, builder) {\n    var s = this._selection;\n    this._selectionId = builder.trackSelection(s);\n\n    if (s.startLineNumber !== s.endLineNumber) {\n      return;\n    }\n\n    if (this._isMovingLeft && s.startColumn === 0) {\n      return;\n    } else if (!this._isMovingLeft && s.endColumn === model.getLineMaxColumn(s.startLineNumber)) {\n      return;\n    }\n\n    var lineNumber = s.selectionStartLineNumber;\n    var lineContent = model.getLineContent(lineNumber);\n    var left;\n    var middle;\n    var right;\n\n    if (this._isMovingLeft) {\n      left = lineContent.substring(0, s.startColumn - 2);\n      middle = lineContent.substring(s.startColumn - 1, s.endColumn - 1);\n      right = lineContent.substring(s.startColumn - 2, s.startColumn - 1) + lineContent.substring(s.endColumn - 1);\n    } else {\n      left = lineContent.substring(0, s.startColumn - 1) + lineContent.substring(s.endColumn - 1, s.endColumn);\n      middle = lineContent.substring(s.startColumn - 1, s.endColumn - 1);\n      right = lineContent.substring(s.endColumn);\n    }\n\n    var newLineContent = left + middle + right;\n    builder.addEditOperation(new Range(lineNumber, 1, lineNumber, model.getLineMaxColumn(lineNumber)), null);\n    builder.addEditOperation(new Range(lineNumber, 1, lineNumber, 1), newLineContent);\n    this._cutStartIndex = s.startColumn + (this._isMovingLeft ? -1 : 1);\n    this._cutEndIndex = this._cutStartIndex + s.endColumn - s.startColumn;\n    this._moved = true;\n  };\n\n  MoveCaretCommand.prototype.computeCursorState = function (model, helper) {\n    var result = helper.getTrackedSelection(this._selectionId);\n\n    if (this._moved) {\n      result = result.setStartPosition(result.startLineNumber, this._cutStartIndex);\n      result = result.setEndPosition(result.startLineNumber, this._cutEndIndex);\n    }\n\n    return result;\n  };\n\n  return MoveCaretCommand;\n}();\n\nexport { MoveCaretCommand };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport * as nls from '../../../nls.js';\nimport { EditorAction, registerEditorAction } from '../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport { MoveCaretCommand } from './moveCaretCommand.js';\n\nvar MoveCaretAction =\n/** @class */\nfunction (_super) {\n  __extends(MoveCaretAction, _super);\n\n  function MoveCaretAction(left, opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.left = left;\n    return _this;\n  }\n\n  MoveCaretAction.prototype.run = function (accessor, editor) {\n    if (!editor.hasModel()) {\n      return;\n    }\n\n    var commands = [];\n    var selections = editor.getSelections();\n\n    for (var _i = 0, selections_1 = selections; _i < selections_1.length; _i++) {\n      var selection = selections_1[_i];\n      commands.push(new MoveCaretCommand(selection, this.left));\n    }\n\n    editor.pushUndoStop();\n    editor.executeCommands(this.id, commands);\n    editor.pushUndoStop();\n  };\n\n  return MoveCaretAction;\n}(EditorAction);\n\nvar MoveCaretLeftAction =\n/** @class */\nfunction (_super) {\n  __extends(MoveCaretLeftAction, _super);\n\n  function MoveCaretLeftAction() {\n    return _super.call(this, true, {\n      id: 'editor.action.moveCarretLeftAction',\n      label: nls.localize('caret.moveLeft', \"Move Caret Left\"),\n      alias: 'Move Caret Left',\n      precondition: EditorContextKeys.writable\n    }) || this;\n  }\n\n  return MoveCaretLeftAction;\n}(MoveCaretAction);\n\nvar MoveCaretRightAction =\n/** @class */\nfunction (_super) {\n  __extends(MoveCaretRightAction, _super);\n\n  function MoveCaretRightAction() {\n    return _super.call(this, false, {\n      id: 'editor.action.moveCarretRightAction',\n      label: nls.localize('caret.moveRight', \"Move Caret Right\"),\n      alias: 'Move Caret Right',\n      precondition: EditorContextKeys.writable\n    }) || this;\n  }\n\n  return MoveCaretRightAction;\n}(MoveCaretAction);\n\nregisterEditorAction(MoveCaretLeftAction);\nregisterEditorAction(MoveCaretRightAction);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport * as nls from '../../../nls.js';\nimport { isHighSurrogate, isLowSurrogate } from '../../../base/common/strings.js';\nimport { EditorAction, registerEditorAction } from '../../browser/editorExtensions.js';\nimport { ReplaceCommand } from '../../common/commands/replaceCommand.js';\nimport { Position } from '../../common/core/position.js';\nimport { Range } from '../../common/core/range.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\n\nvar TransposeLettersAction =\n/** @class */\nfunction (_super) {\n  __extends(TransposeLettersAction, _super);\n\n  function TransposeLettersAction() {\n    return _super.call(this, {\n      id: 'editor.action.transposeLetters',\n      label: nls.localize('transposeLetters.label', \"Transpose Letters\"),\n      alias: 'Transpose Letters',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 0,\n        mac: {\n          primary: 256\n          /* WinCtrl */\n          | 50\n          /* KEY_T */\n\n        },\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  TransposeLettersAction.prototype.positionLeftOf = function (start, model) {\n    var column = start.column;\n    var lineNumber = start.lineNumber;\n\n    if (column > model.getLineMinColumn(lineNumber)) {\n      if (isLowSurrogate(model.getLineContent(lineNumber).charCodeAt(column - 2))) {\n        // character before column is a low surrogate\n        column = column - 2;\n      } else {\n        column = column - 1;\n      }\n    } else if (lineNumber > 1) {\n      lineNumber = lineNumber - 1;\n      column = model.getLineMaxColumn(lineNumber);\n    }\n\n    return new Position(lineNumber, column);\n  };\n\n  TransposeLettersAction.prototype.positionRightOf = function (start, model) {\n    var column = start.column;\n    var lineNumber = start.lineNumber;\n\n    if (column < model.getLineMaxColumn(lineNumber)) {\n      if (isHighSurrogate(model.getLineContent(lineNumber).charCodeAt(column - 1))) {\n        // character after column is a high surrogate\n        column = column + 2;\n      } else {\n        column = column + 1;\n      }\n    } else if (lineNumber < model.getLineCount()) {\n      lineNumber = lineNumber + 1;\n      column = 0;\n    }\n\n    return new Position(lineNumber, column);\n  };\n\n  TransposeLettersAction.prototype.run = function (accessor, editor) {\n    if (!editor.hasModel()) {\n      return;\n    }\n\n    var model = editor.getModel();\n    var commands = [];\n    var selections = editor.getSelections();\n\n    for (var _i = 0, selections_1 = selections; _i < selections_1.length; _i++) {\n      var selection = selections_1[_i];\n\n      if (!selection.isEmpty()) {\n        continue;\n      }\n\n      var lineNumber = selection.startLineNumber;\n      var column = selection.startColumn;\n      var lastColumn = model.getLineMaxColumn(lineNumber);\n\n      if (lineNumber === 1 && (column === 1 || column === 2 && lastColumn === 2)) {\n        // at beginning of file, nothing to do\n        continue;\n      } // handle special case: when at end of line, transpose left two chars\n      // otherwise, transpose left and right chars\n\n\n      var endPosition = column === lastColumn ? selection.getPosition() : this.positionRightOf(selection.getPosition(), model);\n      var middlePosition = this.positionLeftOf(endPosition, model);\n      var beginPosition = this.positionLeftOf(middlePosition, model);\n      var leftChar = model.getValueInRange(Range.fromPositions(beginPosition, middlePosition));\n      var rightChar = model.getValueInRange(Range.fromPositions(middlePosition, endPosition));\n      var replaceRange = Range.fromPositions(beginPosition, endPosition);\n      commands.push(new ReplaceCommand(replaceRange, rightChar + leftChar));\n    }\n\n    if (commands.length > 0) {\n      editor.pushUndoStop();\n      editor.executeCommands(this.id, commands);\n      editor.pushUndoStop();\n    }\n  };\n\n  return TransposeLettersAction;\n}(EditorAction);\n\nregisterEditorAction(TransposeLettersAction);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport './clipboard.css';\nimport * as nls from '../../../nls.js';\nimport * as browser from '../../../base/browser/browser.js';\nimport * as platform from '../../../base/common/platform.js';\nimport { CopyOptions } from '../../browser/controller/textAreaInput.js';\nimport { EditorAction, registerEditorAction } from '../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nvar CLIPBOARD_CONTEXT_MENU_GROUP = '9_cutcopypaste';\nvar supportsCut = platform.isNative || document.queryCommandSupported('cut');\nvar supportsCopy = platform.isNative || document.queryCommandSupported('copy'); // IE and Edge have trouble with setting html content in clipboard\n\nvar supportsCopyWithSyntaxHighlighting = supportsCopy && !browser.isEdgeOrIE; // Chrome incorrectly returns true for document.queryCommandSupported('paste')\n// when the paste feature is available but the calling script has insufficient\n// privileges to actually perform the action\n\nvar supportsPaste = platform.isNative || !browser.isChrome && document.queryCommandSupported('paste');\n\nvar ExecCommandAction =\n/** @class */\nfunction (_super) {\n  __extends(ExecCommandAction, _super);\n\n  function ExecCommandAction(browserCommand, opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.browserCommand = browserCommand;\n    return _this;\n  }\n\n  ExecCommandAction.prototype.runCommand = function (accessor, args) {\n    var focusedEditor = accessor.get(ICodeEditorService).getFocusedCodeEditor(); // Only if editor text focus (i.e. not if editor has widget focus).\n\n    if (focusedEditor && focusedEditor.hasTextFocus()) {\n      focusedEditor.trigger('keyboard', this.id, args);\n      return;\n    }\n\n    document.execCommand(this.browserCommand);\n  };\n\n  ExecCommandAction.prototype.run = function (accessor, editor) {\n    editor.focus();\n    document.execCommand(this.browserCommand);\n  };\n\n  return ExecCommandAction;\n}(EditorAction);\n\nvar ExecCommandCutAction =\n/** @class */\nfunction (_super) {\n  __extends(ExecCommandCutAction, _super);\n\n  function ExecCommandCutAction() {\n    var _this = this;\n\n    var kbOpts = {\n      kbExpr: EditorContextKeys.textInputFocus,\n      primary: 2048\n      /* CtrlCmd */\n      | 54\n      /* KEY_X */\n      ,\n      win: {\n        primary: 2048\n        /* CtrlCmd */\n        | 54\n        /* KEY_X */\n        ,\n        secondary: [1024\n        /* Shift */\n        | 20\n        /* Delete */\n        ]\n      },\n      weight: 100\n      /* EditorContrib */\n\n    }; // Do not bind cut keybindings in the browser,\n    // since browsers do that for us and it avoids security prompts\n\n    if (!platform.isNative) {\n      kbOpts = null;\n    }\n\n    _this = _super.call(this, 'cut', {\n      id: 'editor.action.clipboardCutAction',\n      label: nls.localize('actions.clipboard.cutLabel', \"Cut\"),\n      alias: 'Cut',\n      precondition: EditorContextKeys.writable,\n      kbOpts: kbOpts,\n      menuOpts: {\n        group: CLIPBOARD_CONTEXT_MENU_GROUP,\n        order: 1\n      },\n      menubarOpts: {\n        menuId: 14\n        /* MenubarEditMenu */\n        ,\n        group: '2_ccp',\n        title: nls.localize({\n          key: 'miCut',\n          comment: ['&& denotes a mnemonic']\n        }, \"Cu&&t\"),\n        order: 1\n      }\n    }) || this;\n    return _this;\n  }\n\n  ExecCommandCutAction.prototype.run = function (accessor, editor) {\n    if (!editor.hasModel()) {\n      return;\n    }\n\n    var emptySelectionClipboard = editor.getConfiguration().emptySelectionClipboard;\n\n    if (!emptySelectionClipboard && editor.getSelection().isEmpty()) {\n      return;\n    }\n\n    _super.prototype.run.call(this, accessor, editor);\n  };\n\n  return ExecCommandCutAction;\n}(ExecCommandAction);\n\nvar ExecCommandCopyAction =\n/** @class */\nfunction (_super) {\n  __extends(ExecCommandCopyAction, _super);\n\n  function ExecCommandCopyAction() {\n    var _this = this;\n\n    var kbOpts = {\n      kbExpr: EditorContextKeys.textInputFocus,\n      primary: 2048\n      /* CtrlCmd */\n      | 33\n      /* KEY_C */\n      ,\n      win: {\n        primary: 2048\n        /* CtrlCmd */\n        | 33\n        /* KEY_C */\n        ,\n        secondary: [2048\n        /* CtrlCmd */\n        | 19\n        /* Insert */\n        ]\n      },\n      weight: 100\n      /* EditorContrib */\n\n    }; // Do not bind copy keybindings in the browser,\n    // since browsers do that for us and it avoids security prompts\n\n    if (!platform.isNative) {\n      kbOpts = null;\n    }\n\n    _this = _super.call(this, 'copy', {\n      id: 'editor.action.clipboardCopyAction',\n      label: nls.localize('actions.clipboard.copyLabel', \"Copy\"),\n      alias: 'Copy',\n      precondition: null,\n      kbOpts: kbOpts,\n      menuOpts: {\n        group: CLIPBOARD_CONTEXT_MENU_GROUP,\n        order: 2\n      },\n      menubarOpts: {\n        menuId: 14\n        /* MenubarEditMenu */\n        ,\n        group: '2_ccp',\n        title: nls.localize({\n          key: 'miCopy',\n          comment: ['&& denotes a mnemonic']\n        }, \"&&Copy\"),\n        order: 2\n      }\n    }) || this;\n    return _this;\n  }\n\n  ExecCommandCopyAction.prototype.run = function (accessor, editor) {\n    if (!editor.hasModel()) {\n      return;\n    }\n\n    var emptySelectionClipboard = editor.getConfiguration().emptySelectionClipboard;\n\n    if (!emptySelectionClipboard && editor.getSelection().isEmpty()) {\n      return;\n    } // Prevent copying an empty line by accident\n\n\n    if (editor.getSelections().length === 1 && editor.getSelection().isEmpty()) {\n      if (editor.getModel().getLineFirstNonWhitespaceColumn(editor.getSelection().positionLineNumber) === 0) {\n        return;\n      }\n    }\n\n    _super.prototype.run.call(this, accessor, editor);\n  };\n\n  return ExecCommandCopyAction;\n}(ExecCommandAction);\n\nvar ExecCommandPasteAction =\n/** @class */\nfunction (_super) {\n  __extends(ExecCommandPasteAction, _super);\n\n  function ExecCommandPasteAction() {\n    var _this = this;\n\n    var kbOpts = {\n      kbExpr: EditorContextKeys.textInputFocus,\n      primary: 2048\n      /* CtrlCmd */\n      | 52\n      /* KEY_V */\n      ,\n      win: {\n        primary: 2048\n        /* CtrlCmd */\n        | 52\n        /* KEY_V */\n        ,\n        secondary: [1024\n        /* Shift */\n        | 19\n        /* Insert */\n        ]\n      },\n      weight: 100\n      /* EditorContrib */\n\n    }; // Do not bind paste keybindings in the browser,\n    // since browsers do that for us and it avoids security prompts\n\n    if (!platform.isNative) {\n      kbOpts = null;\n    }\n\n    _this = _super.call(this, 'paste', {\n      id: 'editor.action.clipboardPasteAction',\n      label: nls.localize('actions.clipboard.pasteLabel', \"Paste\"),\n      alias: 'Paste',\n      precondition: EditorContextKeys.writable,\n      kbOpts: kbOpts,\n      menuOpts: {\n        group: CLIPBOARD_CONTEXT_MENU_GROUP,\n        order: 3\n      },\n      menubarOpts: {\n        menuId: 14\n        /* MenubarEditMenu */\n        ,\n        group: '2_ccp',\n        title: nls.localize({\n          key: 'miPaste',\n          comment: ['&& denotes a mnemonic']\n        }, \"&&Paste\"),\n        order: 3\n      }\n    }) || this;\n    return _this;\n  }\n\n  return ExecCommandPasteAction;\n}(ExecCommandAction);\n\nvar ExecCommandCopyWithSyntaxHighlightingAction =\n/** @class */\nfunction (_super) {\n  __extends(ExecCommandCopyWithSyntaxHighlightingAction, _super);\n\n  function ExecCommandCopyWithSyntaxHighlightingAction() {\n    return _super.call(this, 'copy', {\n      id: 'editor.action.clipboardCopyWithSyntaxHighlightingAction',\n      label: nls.localize('actions.clipboard.copyWithSyntaxHighlightingLabel', \"Copy With Syntax Highlighting\"),\n      alias: 'Copy With Syntax Highlighting',\n      precondition: null,\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 0,\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  ExecCommandCopyWithSyntaxHighlightingAction.prototype.run = function (accessor, editor) {\n    if (!editor.hasModel()) {\n      return;\n    }\n\n    var emptySelectionClipboard = editor.getConfiguration().emptySelectionClipboard;\n\n    if (!emptySelectionClipboard && editor.getSelection().isEmpty()) {\n      return;\n    }\n\n    CopyOptions.forceCopyWithSyntaxHighlighting = true;\n\n    _super.prototype.run.call(this, accessor, editor);\n\n    CopyOptions.forceCopyWithSyntaxHighlighting = false;\n  };\n\n  return ExecCommandCopyWithSyntaxHighlightingAction;\n}(ExecCommandAction);\n\nif (supportsCut) {\n  registerEditorAction(ExecCommandCutAction);\n}\n\nif (supportsCopy) {\n  registerEditorAction(ExecCommandCopyAction);\n}\n\nif (supportsPaste) {\n  registerEditorAction(ExecCommandPasteAction);\n}\n\nif (supportsCopyWithSyntaxHighlighting) {\n  registerEditorAction(ExecCommandCopyWithSyntaxHighlightingAction);\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport './messageController.css';\nimport * as nls from '../../../nls.js';\nimport { TimeoutTimer } from '../../../base/common/async.js';\nimport { dispose, Disposable } from '../../../base/common/lifecycle.js';\nimport { alert } from '../../../base/browser/ui/aria/aria.js';\nimport { Range } from '../../common/core/range.js';\nimport { registerEditorContribution, EditorCommand, registerEditorCommand } from '../../browser/editorExtensions.js';\nimport { IContextKeyService, RawContextKey } from '../../../platform/contextkey/common/contextkey.js';\nimport { registerThemingParticipant, HIGH_CONTRAST } from '../../../platform/theme/common/themeService.js';\nimport { inputValidationInfoBorder, inputValidationInfoBackground, inputValidationInfoForeground } from '../../../platform/theme/common/colorRegistry.js';\n\nvar MessageController =\n/** @class */\nfunction (_super) {\n  __extends(MessageController, _super);\n\n  function MessageController(editor, contextKeyService) {\n    var _this = _super.call(this) || this;\n\n    _this._messageListeners = [];\n    _this._editor = editor;\n    _this._visible = MessageController.MESSAGE_VISIBLE.bindTo(contextKeyService);\n\n    _this._register(_this._editor.onDidAttemptReadOnlyEdit(function () {\n      return _this._onDidAttemptReadOnlyEdit();\n    }));\n\n    return _this;\n  }\n\n  MessageController.get = function (editor) {\n    return editor.getContribution(MessageController._id);\n  };\n\n  MessageController.prototype.getId = function () {\n    return MessageController._id;\n  };\n\n  MessageController.prototype.dispose = function () {\n    _super.prototype.dispose.call(this);\n\n    this._visible.reset();\n  };\n\n  MessageController.prototype.showMessage = function (message, position) {\n    var _this = this;\n\n    alert(message);\n\n    this._visible.set(true);\n\n    dispose(this._messageWidget);\n    this._messageListeners = dispose(this._messageListeners);\n    this._messageWidget = new MessageWidget(this._editor, position, message); // close on blur, cursor, model change, dispose\n\n    this._messageListeners.push(this._editor.onDidBlurEditorText(function () {\n      return _this.closeMessage();\n    }));\n\n    this._messageListeners.push(this._editor.onDidChangeCursorPosition(function () {\n      return _this.closeMessage();\n    }));\n\n    this._messageListeners.push(this._editor.onDidDispose(function () {\n      return _this.closeMessage();\n    }));\n\n    this._messageListeners.push(this._editor.onDidChangeModel(function () {\n      return _this.closeMessage();\n    })); // close after 3s\n\n\n    this._messageListeners.push(new TimeoutTimer(function () {\n      return _this.closeMessage();\n    }, 3000)); // close on mouse move\n\n\n    var bounds;\n\n    this._messageListeners.push(this._editor.onMouseMove(function (e) {\n      // outside the text area\n      if (!e.target.position) {\n        return;\n      }\n\n      if (!bounds) {\n        // define bounding box around position and first mouse occurance\n        bounds = new Range(position.lineNumber - 3, 1, e.target.position.lineNumber + 3, 1);\n      } else if (!bounds.containsPosition(e.target.position)) {\n        // check if position is still in bounds\n        _this.closeMessage();\n      }\n    }));\n  };\n\n  MessageController.prototype.closeMessage = function () {\n    this._visible.reset();\n\n    this._messageListeners = dispose(this._messageListeners);\n\n    this._messageListeners.push(MessageWidget.fadeOut(this._messageWidget));\n  };\n\n  MessageController.prototype._onDidAttemptReadOnlyEdit = function () {\n    if (this._editor.hasModel()) {\n      this.showMessage(nls.localize('editor.readonly', \"Cannot edit in read-only editor\"), this._editor.getPosition());\n    }\n  };\n\n  MessageController._id = 'editor.contrib.messageController';\n  MessageController.MESSAGE_VISIBLE = new RawContextKey('messageVisible', false);\n  MessageController = __decorate([__param(1, IContextKeyService)], MessageController);\n  return MessageController;\n}(Disposable);\n\nexport { MessageController };\nvar MessageCommand = EditorCommand.bindToContribution(MessageController.get);\nregisterEditorCommand(new MessageCommand({\n  id: 'leaveEditorMessage',\n  precondition: MessageController.MESSAGE_VISIBLE,\n  handler: function handler(c) {\n    return c.closeMessage();\n  },\n  kbOpts: {\n    weight: 100\n    /* EditorContrib */\n    + 30,\n    primary: 9\n    /* Escape */\n\n  }\n}));\n\nvar MessageWidget =\n/** @class */\nfunction () {\n  function MessageWidget(editor, _a, text) {\n    var lineNumber = _a.lineNumber,\n        column = _a.column; // Editor.IContentWidget.allowEditorOverflow\n\n    this.allowEditorOverflow = true;\n    this.suppressMouseDown = false;\n    this._editor = editor;\n\n    this._editor.revealLinesInCenterIfOutsideViewport(lineNumber, lineNumber, 0\n    /* Smooth */\n    );\n\n    this._position = {\n      lineNumber: lineNumber,\n      column: column - 1\n    };\n    this._domNode = document.createElement('div');\n\n    this._domNode.classList.add('monaco-editor-overlaymessage');\n\n    var message = document.createElement('div');\n    message.classList.add('message');\n    message.textContent = text;\n\n    this._domNode.appendChild(message);\n\n    var anchor = document.createElement('div');\n    anchor.classList.add('anchor');\n\n    this._domNode.appendChild(anchor);\n\n    this._editor.addContentWidget(this);\n\n    this._domNode.classList.add('fadeIn');\n  }\n\n  MessageWidget.fadeOut = function (messageWidget) {\n    var handle;\n\n    var dispose = function dispose() {\n      messageWidget.dispose();\n      clearTimeout(handle);\n      messageWidget.getDomNode().removeEventListener('animationend', dispose);\n    };\n\n    handle = setTimeout(dispose, 110);\n    messageWidget.getDomNode().addEventListener('animationend', dispose);\n    messageWidget.getDomNode().classList.add('fadeOut');\n    return {\n      dispose: dispose\n    };\n  };\n\n  MessageWidget.prototype.dispose = function () {\n    this._editor.removeContentWidget(this);\n  };\n\n  MessageWidget.prototype.getId = function () {\n    return 'messageoverlay';\n  };\n\n  MessageWidget.prototype.getDomNode = function () {\n    return this._domNode;\n  };\n\n  MessageWidget.prototype.getPosition = function () {\n    return {\n      position: this._position,\n      preference: [1\n      /* ABOVE */\n      ]\n    };\n  };\n\n  return MessageWidget;\n}();\n\nregisterEditorContribution(MessageController);\nregisterThemingParticipant(function (theme, collector) {\n  var border = theme.getColor(inputValidationInfoBorder);\n\n  if (border) {\n    var borderWidth = theme.type === HIGH_CONTRAST ? 2 : 1;\n    collector.addRule(\".monaco-editor .monaco-editor-overlaymessage .anchor { border-top-color: \" + border + \"; }\");\n    collector.addRule(\".monaco-editor .monaco-editor-overlaymessage .message { border: \" + borderWidth + \"px solid \" + border + \"; }\");\n  }\n\n  var background = theme.getColor(inputValidationInfoBackground);\n\n  if (background) {\n    collector.addRule(\".monaco-editor .monaco-editor-overlaymessage .message { background-color: \" + background + \"; }\");\n  }\n\n  var foreground = theme.getColor(inputValidationInfoForeground);\n\n  if (foreground) {\n    collector.addRule(\".monaco-editor .monaco-editor-overlaymessage .message { color: \" + foreground + \"; }\");\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { startsWith } from '../../../base/common/strings.js';\n\nvar CodeActionKind =\n/** @class */\nfunction () {\n  function CodeActionKind(value) {\n    this.value = value;\n  }\n\n  CodeActionKind.prototype.contains = function (other) {\n    return this.value === other.value || startsWith(other.value, this.value + CodeActionKind.sep);\n  };\n\n  CodeActionKind.prototype.intersects = function (other) {\n    return this.contains(other) || other.contains(this);\n  };\n\n  CodeActionKind.sep = '.';\n  CodeActionKind.Empty = new CodeActionKind('');\n  CodeActionKind.QuickFix = new CodeActionKind('quickfix');\n  CodeActionKind.Refactor = new CodeActionKind('refactor');\n  CodeActionKind.Source = new CodeActionKind('source');\n  CodeActionKind.SourceOrganizeImports = new CodeActionKind('source.organizeImports');\n  CodeActionKind.SourceFixAll = new CodeActionKind('source.fixAll');\n  return CodeActionKind;\n}();\n\nexport { CodeActionKind };\nexport function mayIncludeActionsOfKind(filter, providedKind) {\n  // A provided kind may be a subset or superset of our filtered kind.\n  if (filter.kind && !filter.kind.intersects(providedKind)) {\n    return false;\n  } // Don't return source actions unless they are explicitly requested\n\n\n  if (CodeActionKind.Source.contains(providedKind) && !filter.includeSourceActions) {\n    return false;\n  }\n\n  return true;\n}\nexport function filtersAction(filter, action) {\n  var actionKind = action.kind ? new CodeActionKind(action.kind) : undefined; // Filter out actions by kind\n\n  if (filter.kind) {\n    if (!actionKind || !filter.kind.contains(actionKind)) {\n      return false;\n    }\n  } // Don't return source actions unless they are explicitly requested\n\n\n  if (!filter.includeSourceActions) {\n    if (actionKind && CodeActionKind.Source.contains(actionKind)) {\n      return false;\n    }\n  }\n\n  if (filter.onlyIncludePreferredActions) {\n    if (!action.isPreferred) {\n      return false;\n    }\n  }\n\n  return true;\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { equals, flatten, isNonEmptyArray, mergeSort } from '../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { illegalArgument, isPromiseCanceledError, onUnexpectedExternalError } from '../../../base/common/errors.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { registerLanguageCommand } from '../../browser/editorExtensions.js';\nimport { Range } from '../../common/core/range.js';\nimport { CodeActionProviderRegistry } from '../../common/modes.js';\nimport { IModelService } from '../../common/services/modelService.js';\nimport { CodeActionKind, filtersAction, mayIncludeActionsOfKind } from './codeActionTrigger.js';\nimport { TextModelCancellationTokenSource } from '../../browser/core/editorState.js';\n\nvar CodeActionSet =\n/** @class */\nfunction () {\n  function CodeActionSet(actions) {\n    this.actions = mergeSort(actions, CodeActionSet.codeActionsComparator);\n  }\n\n  CodeActionSet.codeActionsComparator = function (a, b) {\n    if (isNonEmptyArray(a.diagnostics)) {\n      if (isNonEmptyArray(b.diagnostics)) {\n        return a.diagnostics[0].message.localeCompare(b.diagnostics[0].message);\n      } else {\n        return -1;\n      }\n    } else if (isNonEmptyArray(b.diagnostics)) {\n      return 1;\n    } else {\n      return 0; // both have no diagnostics\n    }\n  };\n\n  Object.defineProperty(CodeActionSet.prototype, \"hasAutoFix\", {\n    get: function get() {\n      return this.actions.some(function (fix) {\n        return !!fix.kind && CodeActionKind.QuickFix.contains(new CodeActionKind(fix.kind)) && !!fix.isPreferred;\n      });\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return CodeActionSet;\n}();\n\nexport { CodeActionSet };\nexport function getCodeActions(model, rangeOrSelection, trigger, token) {\n  var filter = trigger.filter || {};\n  var codeActionContext = {\n    only: filter.kind ? filter.kind.value : undefined,\n    trigger: trigger.type === 'manual' ? 2\n    /* Manual */\n    : 1\n    /* Automatic */\n\n  };\n  var cts = new TextModelCancellationTokenSource(model, token);\n  var providers = getCodeActionProviders(model, filter);\n  var promises = providers.map(function (provider) {\n    return Promise.resolve(provider.provideCodeActions(model, rangeOrSelection, codeActionContext, cts.token)).then(function (providedCodeActions) {\n      if (cts.token.isCancellationRequested || !Array.isArray(providedCodeActions)) {\n        return [];\n      }\n\n      return providedCodeActions.filter(function (action) {\n        return action && filtersAction(filter, action);\n      });\n    }, function (err) {\n      if (isPromiseCanceledError(err)) {\n        throw err;\n      }\n\n      onUnexpectedExternalError(err);\n      return [];\n    });\n  });\n  var listener = CodeActionProviderRegistry.onDidChange(function () {\n    var newProviders = CodeActionProviderRegistry.all(model);\n\n    if (!equals(newProviders, providers)) {\n      cts.cancel();\n    }\n  });\n  return Promise.all(promises).then(flatten).then(function (actions) {\n    return new CodeActionSet(actions);\n  }).finally(function () {\n    listener.dispose();\n    cts.dispose();\n  });\n}\n\nfunction getCodeActionProviders(model, filter) {\n  return CodeActionProviderRegistry.all(model) // Don't include providers that we know will not return code actions of interest\n  .filter(function (provider) {\n    if (!provider.providedCodeActionKinds) {\n      // We don't know what type of actions this provider will return.\n      return true;\n    }\n\n    return provider.providedCodeActionKinds.some(function (kind) {\n      return mayIncludeActionsOfKind(filter, new CodeActionKind(kind));\n    });\n  });\n}\n\nregisterLanguageCommand('_executeCodeActionProvider', function (accessor, args) {\n  var resource = args.resource,\n      range = args.range,\n      kind = args.kind;\n\n  if (!(resource instanceof URI) || !Range.isIRange(range)) {\n    throw illegalArgument();\n  }\n\n  var model = accessor.get(IModelService).getModel(resource);\n\n  if (!model) {\n    throw illegalArgument();\n  }\n\n  return getCodeActions(model, model.validateRange(range), {\n    type: 'manual',\n    filter: {\n      includeSourceActions: true,\n      kind: kind && kind.value ? new CodeActionKind(kind.value) : undefined\n    }\n  }, CancellationToken.None).then(function (actions) {\n    return actions.actions;\n  });\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createCancelablePromise, TimeoutTimer } from '../../../base/common/async.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { dispose } from '../../../base/common/lifecycle.js';\nimport { Range } from '../../common/core/range.js';\nimport { CodeActionProviderRegistry } from '../../common/modes.js';\nimport { RawContextKey } from '../../../platform/contextkey/common/contextkey.js';\nimport { getCodeActions } from './codeAction.js';\nexport var SUPPORTED_CODE_ACTIONS = new RawContextKey('supportedCodeAction', '');\n\nvar CodeActionOracle =\n/** @class */\nfunction () {\n  function CodeActionOracle(_editor, _markerService, _signalChange, _delay, _progressService) {\n    var _this = this;\n\n    if (_delay === void 0) {\n      _delay = 250;\n    }\n\n    this._editor = _editor;\n    this._markerService = _markerService;\n    this._signalChange = _signalChange;\n    this._delay = _delay;\n    this._progressService = _progressService;\n    this._disposables = [];\n    this._autoTriggerTimer = new TimeoutTimer();\n\n    this._disposables.push(this._markerService.onMarkerChanged(function (e) {\n      return _this._onMarkerChanges(e);\n    }), this._editor.onDidChangeCursorPosition(function () {\n      return _this._onCursorChange();\n    }));\n  }\n\n  CodeActionOracle.prototype.dispose = function () {\n    this._disposables = dispose(this._disposables);\n\n    this._autoTriggerTimer.cancel();\n  };\n\n  CodeActionOracle.prototype.trigger = function (trigger) {\n    var selection = this._getRangeOfSelectionUnlessWhitespaceEnclosed(trigger);\n\n    return this._createEventAndSignalChange(trigger, selection);\n  };\n\n  CodeActionOracle.prototype._onMarkerChanges = function (resources) {\n    var _this = this;\n\n    var model = this._editor.getModel();\n\n    if (!model) {\n      return;\n    }\n\n    if (resources.some(function (resource) {\n      return resource.toString() === model.uri.toString();\n    })) {\n      this._autoTriggerTimer.cancelAndSet(function () {\n        _this.trigger({\n          type: 'auto'\n        });\n      }, this._delay);\n    }\n  };\n\n  CodeActionOracle.prototype._onCursorChange = function () {\n    var _this = this;\n\n    this._autoTriggerTimer.cancelAndSet(function () {\n      _this.trigger({\n        type: 'auto'\n      });\n    }, this._delay);\n  };\n\n  CodeActionOracle.prototype._getRangeOfMarker = function (selection) {\n    var model = this._editor.getModel();\n\n    if (!model) {\n      return undefined;\n    }\n\n    for (var _i = 0, _a = this._markerService.read({\n      resource: model.uri\n    }); _i < _a.length; _i++) {\n      var marker = _a[_i];\n\n      if (Range.intersectRanges(marker, selection)) {\n        return Range.lift(marker);\n      }\n    }\n\n    return undefined;\n  };\n\n  CodeActionOracle.prototype._getRangeOfSelectionUnlessWhitespaceEnclosed = function (trigger) {\n    if (!this._editor.hasModel()) {\n      return undefined;\n    }\n\n    var model = this._editor.getModel();\n\n    var selection = this._editor.getSelection();\n\n    if (selection.isEmpty() && trigger.type === 'auto') {\n      var _a = selection.getPosition(),\n          lineNumber = _a.lineNumber,\n          column = _a.column;\n\n      var line = model.getLineContent(lineNumber);\n\n      if (line.length === 0) {\n        // empty line\n        return undefined;\n      } else if (column === 1) {\n        // look only right\n        if (/\\s/.test(line[0])) {\n          return undefined;\n        }\n      } else if (column === model.getLineMaxColumn(lineNumber)) {\n        // look only left\n        if (/\\s/.test(line[line.length - 1])) {\n          return undefined;\n        }\n      } else {\n        // look left and right\n        if (/\\s/.test(line[column - 2]) && /\\s/.test(line[column - 1])) {\n          return undefined;\n        }\n      }\n    }\n\n    return selection ? selection : undefined;\n  };\n\n  CodeActionOracle.prototype._createEventAndSignalChange = function (trigger, selection) {\n    if (!selection) {\n      // cancel\n      this._signalChange(CodeActionsState.Empty);\n\n      return Promise.resolve(undefined);\n    } else {\n      var model_1 = this._editor.getModel();\n\n      if (!model_1) {\n        // cancel\n        this._signalChange(CodeActionsState.Empty);\n\n        return Promise.resolve(undefined);\n      }\n\n      var markerRange = this._getRangeOfMarker(selection);\n\n      var position = markerRange ? markerRange.getStartPosition() : selection.getStartPosition();\n      var actions = createCancelablePromise(function (token) {\n        return getCodeActions(model_1, selection, trigger, token);\n      });\n\n      if (this._progressService && trigger.type === 'manual') {\n        this._progressService.showWhile(actions, 250);\n      }\n\n      this._signalChange(new CodeActionsState.Triggered(trigger, selection, position, actions));\n\n      return actions;\n    }\n  };\n\n  return CodeActionOracle;\n}();\n\nexport { CodeActionOracle };\nexport var CodeActionsState;\n\n(function (CodeActionsState) {\n  CodeActionsState.Empty = new (\n  /** @class */\n  function () {\n    function class_1() {\n      this.type = 0\n      /* Empty */\n      ;\n    }\n\n    return class_1;\n  }())();\n\n  var Triggered =\n  /** @class */\n  function () {\n    function Triggered(trigger, rangeOrSelection, position, actions) {\n      this.trigger = trigger;\n      this.rangeOrSelection = rangeOrSelection;\n      this.position = position;\n      this.actions = actions;\n      this.type = 1\n      /* Triggered */\n      ;\n    }\n\n    return Triggered;\n  }();\n\n  CodeActionsState.Triggered = Triggered;\n})(CodeActionsState || (CodeActionsState = {}));\n\nvar CodeActionModel =\n/** @class */\nfunction () {\n  function CodeActionModel(_editor, _markerService, contextKeyService, _progressService) {\n    var _this = this;\n\n    this._editor = _editor;\n    this._markerService = _markerService;\n    this._progressService = _progressService;\n    this._state = CodeActionsState.Empty;\n    this._onDidChangeState = new Emitter();\n    this._disposables = [];\n    this._supportedCodeActions = SUPPORTED_CODE_ACTIONS.bindTo(contextKeyService);\n\n    this._disposables.push(this._editor.onDidChangeModel(function () {\n      return _this._update();\n    }));\n\n    this._disposables.push(this._editor.onDidChangeModelLanguage(function () {\n      return _this._update();\n    }));\n\n    this._disposables.push(CodeActionProviderRegistry.onDidChange(function () {\n      return _this._update();\n    }));\n\n    this._update();\n  }\n\n  CodeActionModel.prototype.dispose = function () {\n    this._disposables = dispose(this._disposables);\n    dispose(this._codeActionOracle);\n  };\n\n  Object.defineProperty(CodeActionModel.prototype, \"onDidChangeState\", {\n    get: function get() {\n      return this._onDidChangeState.event;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  CodeActionModel.prototype._update = function () {\n    var _this = this;\n\n    if (this._codeActionOracle) {\n      this._codeActionOracle.dispose();\n\n      this._codeActionOracle = undefined;\n    }\n\n    if (this._state.type === 1\n    /* Triggered */\n    ) {\n        this._state.actions.cancel();\n      }\n\n    this.setState(CodeActionsState.Empty);\n\n    var model = this._editor.getModel();\n\n    if (model && CodeActionProviderRegistry.has(model) && !this._editor.getConfiguration().readOnly) {\n      var supportedActions = [];\n\n      for (var _i = 0, _a = CodeActionProviderRegistry.all(model); _i < _a.length; _i++) {\n        var provider = _a[_i];\n\n        if (Array.isArray(provider.providedCodeActionKinds)) {\n          supportedActions.push.apply(supportedActions, provider.providedCodeActionKinds);\n        }\n      }\n\n      this._supportedCodeActions.set(supportedActions.join(' '));\n\n      this._codeActionOracle = new CodeActionOracle(this._editor, this._markerService, function (newState) {\n        return _this.setState(newState);\n      }, undefined, this._progressService);\n\n      this._codeActionOracle.trigger({\n        type: 'auto'\n      });\n    } else {\n      this._supportedCodeActions.reset();\n    }\n  };\n\n  CodeActionModel.prototype.trigger = function (trigger) {\n    if (this._codeActionOracle) {\n      return this._codeActionOracle.trigger(trigger);\n    }\n\n    return Promise.resolve(undefined);\n  };\n\n  CodeActionModel.prototype.setState = function (newState) {\n    if (newState === this._state) {\n      return;\n    }\n\n    this._state = newState;\n\n    this._onDidChangeState.fire(newState);\n  };\n\n  return CodeActionModel;\n}();\n\nexport { CodeActionModel };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nimport { getDomNodePagePosition } from '../../../base/browser/dom.js';\nimport { Action } from '../../../base/common/actions.js';\nimport { canceled } from '../../../base/common/errors.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { Position } from '../../common/core/position.js';\n\nvar CodeActionContextMenu =\n/** @class */\nfunction () {\n  function CodeActionContextMenu(_editor, _contextMenuService, _onApplyCodeAction) {\n    this._editor = _editor;\n    this._contextMenuService = _contextMenuService;\n    this._onApplyCodeAction = _onApplyCodeAction;\n    this._onDidExecuteCodeAction = new Emitter();\n    this.onDidExecuteCodeAction = this._onDidExecuteCodeAction.event;\n  }\n\n  CodeActionContextMenu.prototype.show = function (actionsToShow, at) {\n    return __awaiter(this, void 0, void 0, function () {\n      var codeActions, actions;\n\n      var _this = this;\n\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , actionsToShow];\n\n          case 1:\n            codeActions = _a.sent();\n\n            if (!this._editor.getDomNode()) {\n              // cancel when editor went off-dom\n              return [2\n              /*return*/\n              , Promise.reject(canceled())];\n            }\n\n            this._visible = true;\n            actions = codeActions.actions.map(function (action) {\n              return _this.codeActionToAction(action);\n            });\n\n            this._contextMenuService.showContextMenu({\n              getAnchor: function getAnchor() {\n                if (Position.isIPosition(at)) {\n                  at = _this._toCoords(at);\n                }\n\n                return at || {\n                  x: 0,\n                  y: 0\n                };\n              },\n              getActions: function getActions() {\n                return actions;\n              },\n              onHide: function onHide() {\n                _this._visible = false;\n\n                _this._editor.focus();\n              },\n              autoSelectFirstItem: true\n            });\n\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  CodeActionContextMenu.prototype.codeActionToAction = function (action) {\n    var _this = this;\n\n    var id = action.command ? action.command.id : action.title;\n    var title = action.title;\n    return new Action(id, title, undefined, true, function () {\n      return _this._onApplyCodeAction(action).finally(function () {\n        return _this._onDidExecuteCodeAction.fire(undefined);\n      });\n    });\n  };\n\n  Object.defineProperty(CodeActionContextMenu.prototype, \"isVisible\", {\n    get: function get() {\n      return this._visible;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  CodeActionContextMenu.prototype._toCoords = function (position) {\n    if (!this._editor.hasModel()) {\n      return {\n        x: 0,\n        y: 0\n      };\n    }\n\n    this._editor.revealPosition(position, 1\n    /* Immediate */\n    );\n\n    this._editor.render(); // Translate to absolute editor position\n\n\n    var cursorCoords = this._editor.getScrolledVisiblePosition(position);\n\n    var editorCoords = getDomNodePagePosition(this._editor.getDomNode());\n    var x = editorCoords.left + cursorCoords.left;\n    var y = editorCoords.top + cursorCoords.top + cursorCoords.height;\n    return {\n      x: x,\n      y: y\n    };\n  };\n\n  return CodeActionContextMenu;\n}();\n\nexport { CodeActionContextMenu };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport * as dom from '../../../base/browser/dom.js';\nimport { GlobalMouseMoveMonitor, standardMouseMoveMerger } from '../../../base/browser/globalMouseMoveMonitor.js';\nimport { CancellationTokenSource } from '../../../base/common/cancellation.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport './lightBulbWidget.css';\nimport { TextModel } from '../../common/model/textModel.js';\nimport { CodeActionsState } from './codeActionModel.js';\n\nvar LightBulbWidget =\n/** @class */\nfunction (_super) {\n  __extends(LightBulbWidget, _super);\n\n  function LightBulbWidget(editor) {\n    var _this = _super.call(this) || this;\n\n    _this._onClick = _this._register(new Emitter());\n    _this.onClick = _this._onClick.event;\n    _this._state = CodeActionsState.Empty;\n    _this._futureFixes = new CancellationTokenSource();\n    _this._domNode = document.createElement('div');\n    _this._domNode.className = 'lightbulb-glyph';\n    _this._editor = editor;\n\n    _this._editor.addContentWidget(_this);\n\n    _this._register(_this._editor.onDidChangeModel(function (_) {\n      return _this._futureFixes.cancel();\n    }));\n\n    _this._register(_this._editor.onDidChangeModelLanguage(function (_) {\n      return _this._futureFixes.cancel();\n    }));\n\n    _this._register(_this._editor.onDidChangeModelContent(function (_) {\n      // cancel when the line in question has been removed\n      var editorModel = _this._editor.getModel();\n\n      if (_this._state.type !== 1\n      /* Triggered */\n      || !editorModel || _this._state.position.lineNumber >= editorModel.getLineCount()) {\n        _this._futureFixes.cancel();\n      }\n    }));\n\n    _this._register(dom.addStandardDisposableListener(_this._domNode, 'click', function (e) {\n      if (_this._state.type !== 1\n      /* Triggered */\n      ) {\n          return;\n        } // Make sure that focus / cursor location is not lost when clicking widget icon\n\n\n      _this._editor.focus(); // a bit of extra work to make sure the menu\n      // doesn't cover the line-text\n\n\n      var _a = dom.getDomNodePagePosition(_this._domNode),\n          top = _a.top,\n          height = _a.height;\n\n      var lineHeight = _this._editor.getConfiguration().lineHeight;\n\n      var pad = Math.floor(lineHeight / 3);\n\n      if (_this._position && _this._position.position !== null && _this._position.position.lineNumber < _this._state.position.lineNumber) {\n        pad += lineHeight;\n      }\n\n      _this._onClick.fire({\n        x: e.posx,\n        y: top + height + pad,\n        state: _this._state\n      });\n    }));\n\n    _this._register(dom.addDisposableListener(_this._domNode, 'mouseenter', function (e) {\n      if ((e.buttons & 1) !== 1) {\n        return;\n      } // mouse enters lightbulb while the primary/left button\n      // is being pressed -> hide the lightbulb and block future\n      // showings until mouse is released\n\n\n      _this.hide();\n\n      var monitor = new GlobalMouseMoveMonitor();\n      monitor.startMonitoring(standardMouseMoveMerger, function () {}, function () {\n        monitor.dispose();\n      });\n    }));\n\n    _this._register(_this._editor.onDidChangeConfiguration(function (e) {\n      // hide when told to do so\n      if (e.contribInfo && !_this._editor.getConfiguration().contribInfo.lightbulbEnabled) {\n        _this.hide();\n      }\n    }));\n\n    return _this;\n  }\n\n  LightBulbWidget.prototype.dispose = function () {\n    _super.prototype.dispose.call(this);\n\n    this._editor.removeContentWidget(this);\n  };\n\n  LightBulbWidget.prototype.getId = function () {\n    return 'LightBulbWidget';\n  };\n\n  LightBulbWidget.prototype.getDomNode = function () {\n    return this._domNode;\n  };\n\n  LightBulbWidget.prototype.getPosition = function () {\n    return this._position;\n  };\n\n  LightBulbWidget.prototype.tryShow = function (newState) {\n    var _this = this;\n\n    if (newState.type !== 1\n    /* Triggered */\n    || this._position && (!newState.position || this._position.position && this._position.position.lineNumber !== newState.position.lineNumber)) {\n      // hide when getting a 'hide'-request or when currently\n      // showing on another line\n      this.hide();\n    } else if (this._futureFixes) {\n      // cancel pending show request in any case\n      this._futureFixes.cancel();\n    }\n\n    this._futureFixes = new CancellationTokenSource();\n    var token = this._futureFixes.token;\n    this._state = newState;\n\n    if (this._state.type === CodeActionsState.Empty.type) {\n      return;\n    }\n\n    var selection = this._state.rangeOrSelection;\n\n    this._state.actions.then(function (fixes) {\n      if (!token.isCancellationRequested && fixes.actions.length > 0 && selection) {\n        _this._show(fixes);\n      } else {\n        _this.hide();\n      }\n    }).catch(function () {\n      _this.hide();\n    });\n  };\n\n  Object.defineProperty(LightBulbWidget.prototype, \"title\", {\n    get: function get() {\n      return this._domNode.title;\n    },\n    set: function set(value) {\n      this._domNode.title = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  LightBulbWidget.prototype._show = function (codeActions) {\n    var _this = this;\n\n    var config = this._editor.getConfiguration();\n\n    if (!config.contribInfo.lightbulbEnabled) {\n      return;\n    }\n\n    if (this._state.type !== 1\n    /* Triggered */\n    ) {\n        return;\n      }\n\n    var _a = this._state.position,\n        lineNumber = _a.lineNumber,\n        column = _a.column;\n\n    var model = this._editor.getModel();\n\n    if (!model) {\n      return;\n    }\n\n    var tabSize = model.getOptions().tabSize;\n    var lineContent = model.getLineContent(lineNumber);\n    var indent = TextModel.computeIndentLevel(lineContent, tabSize);\n    var lineHasSpace = config.fontInfo.spaceWidth * indent > 22;\n\n    var isFolded = function isFolded(lineNumber) {\n      return lineNumber > 2 && _this._editor.getTopForLineNumber(lineNumber) === _this._editor.getTopForLineNumber(lineNumber - 1);\n    };\n\n    var effectiveLineNumber = lineNumber;\n\n    if (!lineHasSpace) {\n      if (lineNumber > 1 && !isFolded(lineNumber - 1)) {\n        effectiveLineNumber -= 1;\n      } else if (!isFolded(lineNumber + 1)) {\n        effectiveLineNumber += 1;\n      } else if (column * config.fontInfo.spaceWidth < 22) {\n        // cannot show lightbulb above/below and showing\n        // it inline would overlay the cursor...\n        this.hide();\n        return;\n      }\n    }\n\n    this._position = {\n      position: {\n        lineNumber: effectiveLineNumber,\n        column: 1\n      },\n      preference: LightBulbWidget._posPref\n    };\n    dom.toggleClass(this._domNode, 'autofixable', codeActions.hasAutoFix);\n\n    this._editor.layoutContentWidget(this);\n  };\n\n  LightBulbWidget.prototype.hide = function () {\n    this._position = null;\n    this._state = CodeActionsState.Empty;\n\n    this._futureFixes.cancel();\n\n    this._editor.layoutContentWidget(this);\n  };\n\n  LightBulbWidget._posPref = [0\n  /* EXACT */\n  ];\n  return LightBulbWidget;\n}(Disposable);\n\nexport { LightBulbWidget };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { escapeRegExpCharacters } from '../../../base/common/strings.js';\nimport { EditorAction, EditorCommand } from '../../browser/editorExtensions.js';\nimport { IBulkEditService } from '../../browser/services/bulkEditService.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport { MessageController } from '../message/messageController.js';\nimport * as nls from '../../../nls.js';\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService } from '../../../platform/contextview/browser/contextView.js';\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\nimport { IMarkerService } from '../../../platform/markers/common/markers.js';\nimport { IProgressService } from '../../../platform/progress/common/progress.js';\nimport { CodeActionModel, SUPPORTED_CODE_ACTIONS } from './codeActionModel.js';\nimport { CodeActionKind } from './codeActionTrigger.js';\nimport { CodeActionContextMenu } from './codeActionWidget.js';\nimport { LightBulbWidget } from './lightBulbWidget.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\n\nfunction contextKeyForSupportedActions(kind) {\n  return ContextKeyExpr.regex(SUPPORTED_CODE_ACTIONS.keys()[0], new RegExp('(\\\\s|^)' + escapeRegExpCharacters(kind.value) + '\\\\b'));\n}\n\nvar QuickFixController =\n/** @class */\nfunction (_super) {\n  __extends(QuickFixController, _super);\n\n  function QuickFixController(editor, markerService, contextKeyService, progressService, contextMenuService, _commandService, _keybindingService, _bulkEditService) {\n    var _this = _super.call(this) || this;\n\n    _this._commandService = _commandService;\n    _this._keybindingService = _keybindingService;\n    _this._bulkEditService = _bulkEditService;\n    _this._editor = editor;\n    _this._model = new CodeActionModel(_this._editor, markerService, contextKeyService, progressService);\n    _this._codeActionContextMenu = new CodeActionContextMenu(editor, contextMenuService, function (action) {\n      return _this._onApplyCodeAction(action);\n    });\n    _this._lightBulbWidget = _this._register(new LightBulbWidget(editor));\n\n    _this._updateLightBulbTitle();\n\n    _this._register(_this._codeActionContextMenu.onDidExecuteCodeAction(function (_) {\n      return _this._model.trigger({\n        type: 'auto',\n        filter: {}\n      });\n    }));\n\n    _this._register(_this._lightBulbWidget.onClick(_this._handleLightBulbSelect, _this));\n\n    _this._register(_this._model.onDidChangeState(function (e) {\n      return _this._onDidChangeCodeActionsState(e);\n    }));\n\n    _this._register(_this._keybindingService.onDidUpdateKeybindings(_this._updateLightBulbTitle, _this));\n\n    return _this;\n  }\n\n  QuickFixController.get = function (editor) {\n    return editor.getContribution(QuickFixController.ID);\n  };\n\n  QuickFixController.prototype.dispose = function () {\n    _super.prototype.dispose.call(this);\n\n    this._model.dispose();\n  };\n\n  QuickFixController.prototype._onDidChangeCodeActionsState = function (newState) {\n    var _this = this;\n\n    if (this._activeRequest) {\n      this._activeRequest.cancel();\n\n      this._activeRequest = undefined;\n    }\n\n    if (newState.type === 1\n    /* Triggered */\n    ) {\n        this._activeRequest = newState.actions;\n\n        if (newState.trigger.filter && newState.trigger.filter.kind) {\n          // Triggered for specific scope\n          newState.actions.then(function (fixes) {\n            if (fixes.actions.length > 0) {\n              // Apply if we only have one action or requested autoApply\n              if (newState.trigger.autoApply === 1\n              /* First */\n              || newState.trigger.autoApply === 0\n              /* IfSingle */\n              && fixes.actions.length === 1) {\n                _this._onApplyCodeAction(fixes.actions[0]);\n\n                return;\n              }\n            }\n\n            _this._codeActionContextMenu.show(newState.actions, newState.position);\n          }).catch(onUnexpectedError);\n        } else if (newState.trigger.type === 'manual') {\n          this._codeActionContextMenu.show(newState.actions, newState.position);\n        } else {\n          // auto magically triggered\n          // * update an existing list of code actions\n          // * manage light bulb\n          if (this._codeActionContextMenu.isVisible) {\n            this._codeActionContextMenu.show(newState.actions, newState.position);\n          } else {\n            this._lightBulbWidget.tryShow(newState);\n          }\n        }\n      } else {\n      this._lightBulbWidget.hide();\n    }\n  };\n\n  QuickFixController.prototype.getId = function () {\n    return QuickFixController.ID;\n  };\n\n  QuickFixController.prototype._handleLightBulbSelect = function (e) {\n    this._codeActionContextMenu.show(e.state.actions, e);\n  };\n\n  QuickFixController.prototype.triggerFromEditorSelection = function (filter, autoApply) {\n    return this._model.trigger({\n      type: 'manual',\n      filter: filter,\n      autoApply: autoApply\n    });\n  };\n\n  QuickFixController.prototype._updateLightBulbTitle = function () {\n    var kb = this._keybindingService.lookupKeybinding(QuickFixAction.Id);\n\n    var title;\n\n    if (kb) {\n      title = nls.localize('quickFixWithKb', \"Show Fixes ({0})\", kb.getLabel());\n    } else {\n      title = nls.localize('quickFix', \"Show Fixes\");\n    }\n\n    this._lightBulbWidget.title = title;\n  };\n\n  QuickFixController.prototype._onApplyCodeAction = function (action) {\n    return applyCodeAction(action, this._bulkEditService, this._commandService, this._editor);\n  };\n\n  QuickFixController.ID = 'editor.contrib.quickFixController';\n  QuickFixController = __decorate([__param(1, IMarkerService), __param(2, IContextKeyService), __param(3, IProgressService), __param(4, IContextMenuService), __param(5, ICommandService), __param(6, IKeybindingService), __param(7, IBulkEditService)], QuickFixController);\n  return QuickFixController;\n}(Disposable);\n\nexport { QuickFixController };\nexport function applyCodeAction(action, bulkEditService, commandService, editor) {\n  return __awaiter(this, void 0, void 0, function () {\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          if (!action.edit) return [3\n          /*break*/\n          , 2];\n          return [4\n          /*yield*/\n          , bulkEditService.apply(action.edit, {\n            editor: editor\n          })];\n\n        case 1:\n          _a.sent();\n\n          _a.label = 2;\n\n        case 2:\n          if (!action.command) return [3\n          /*break*/\n          , 4];\n          return [4\n          /*yield*/\n          , commandService.executeCommand.apply(commandService, [action.command.id].concat(action.command.arguments || []))];\n\n        case 3:\n          _a.sent();\n\n          _a.label = 4;\n\n        case 4:\n          return [2\n          /*return*/\n          ];\n      }\n    });\n  });\n}\n\nfunction showCodeActionsForEditorSelection(editor, notAvailableMessage, filter, autoApply) {\n  if (!editor.hasModel()) {\n    return;\n  }\n\n  var controller = QuickFixController.get(editor);\n\n  if (!controller) {\n    return;\n  }\n\n  var pos = editor.getPosition();\n  controller.triggerFromEditorSelection(filter, autoApply).then(function (codeActions) {\n    if (!codeActions || !codeActions.actions.length) {\n      MessageController.get(editor).showMessage(notAvailableMessage, pos);\n    }\n  });\n}\n\nvar QuickFixAction =\n/** @class */\nfunction (_super) {\n  __extends(QuickFixAction, _super);\n\n  function QuickFixAction() {\n    return _super.call(this, {\n      id: QuickFixAction.Id,\n      label: nls.localize('quickfix.trigger.label', \"Quick Fix...\"),\n      alias: 'Quick Fix',\n      precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048\n        /* CtrlCmd */\n        | 84\n        /* US_DOT */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  QuickFixAction.prototype.run = function (_accessor, editor) {\n    return showCodeActionsForEditorSelection(editor, nls.localize('editor.action.quickFix.noneMessage', \"No code actions available\"));\n  };\n\n  QuickFixAction.Id = 'editor.action.quickFix';\n  return QuickFixAction;\n}(EditorAction);\n\nexport { QuickFixAction };\n\nvar CodeActionCommandArgs =\n/** @class */\nfunction () {\n  function CodeActionCommandArgs(kind, apply, preferred) {\n    this.kind = kind;\n    this.apply = apply;\n    this.preferred = preferred;\n  }\n\n  CodeActionCommandArgs.fromUser = function (arg, defaults) {\n    if (!arg || typeof arg !== 'object') {\n      return new CodeActionCommandArgs(defaults.kind, defaults.apply, false);\n    }\n\n    return new CodeActionCommandArgs(CodeActionCommandArgs.getKindFromUser(arg, defaults.kind), CodeActionCommandArgs.getApplyFromUser(arg, defaults.apply), CodeActionCommandArgs.getPreferredUser(arg));\n  };\n\n  CodeActionCommandArgs.getApplyFromUser = function (arg, defaultAutoApply) {\n    switch (typeof arg.apply === 'string' ? arg.apply.toLowerCase() : '') {\n      case 'first':\n        return 1\n        /* First */\n        ;\n\n      case 'never':\n        return 2\n        /* Never */\n        ;\n\n      case 'ifsingle':\n        return 0\n        /* IfSingle */\n        ;\n\n      default:\n        return defaultAutoApply;\n    }\n  };\n\n  CodeActionCommandArgs.getKindFromUser = function (arg, defaultKind) {\n    return typeof arg.kind === 'string' ? new CodeActionKind(arg.kind) : defaultKind;\n  };\n\n  CodeActionCommandArgs.getPreferredUser = function (arg) {\n    return typeof arg.preferred === 'boolean' ? arg.preferred : false;\n  };\n\n  return CodeActionCommandArgs;\n}();\n\nvar CodeActionCommand =\n/** @class */\nfunction (_super) {\n  __extends(CodeActionCommand, _super);\n\n  function CodeActionCommand() {\n    return _super.call(this, {\n      id: CodeActionCommand.Id,\n      precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n      description: {\n        description: \"Trigger a code action\",\n        args: [{\n          name: 'args',\n          schema: {\n            'type': 'object',\n            'required': ['kind'],\n            'properties': {\n              'kind': {\n                'type': 'string'\n              },\n              'apply': {\n                'type': 'string',\n                'default': 'ifSingle',\n                'enum': ['first', 'ifSingle', 'never']\n              }\n            }\n          }\n        }]\n      }\n    }) || this;\n  }\n\n  CodeActionCommand.prototype.runEditorCommand = function (_accessor, editor, userArg) {\n    var args = CodeActionCommandArgs.fromUser(userArg, {\n      kind: CodeActionKind.Empty,\n      apply: 0\n      /* IfSingle */\n\n    });\n    return showCodeActionsForEditorSelection(editor, nls.localize('editor.action.quickFix.noneMessage', \"No code actions available\"), {\n      kind: args.kind,\n      includeSourceActions: true,\n      onlyIncludePreferredActions: args.preferred\n    }, args.apply);\n  };\n\n  CodeActionCommand.Id = 'editor.action.codeAction';\n  return CodeActionCommand;\n}(EditorCommand);\n\nexport { CodeActionCommand };\n\nvar RefactorAction =\n/** @class */\nfunction (_super) {\n  __extends(RefactorAction, _super);\n\n  function RefactorAction() {\n    return _super.call(this, {\n      id: RefactorAction.Id,\n      label: nls.localize('refactor.label', \"Refactor...\"),\n      alias: 'Refactor',\n      precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048\n        /* CtrlCmd */\n        | 1024\n        /* Shift */\n        | 48\n        /* KEY_R */\n        ,\n        mac: {\n          primary: 256\n          /* WinCtrl */\n          | 1024\n          /* Shift */\n          | 48\n          /* KEY_R */\n\n        },\n        weight: 100\n        /* EditorContrib */\n\n      },\n      menuOpts: {\n        group: '1_modification',\n        order: 2,\n        when: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.Refactor))\n      },\n      description: {\n        description: 'Refactor...',\n        args: [{\n          name: 'args',\n          schema: {\n            'type': 'object',\n            'properties': {\n              'kind': {\n                'type': 'string'\n              },\n              'apply': {\n                'type': 'string',\n                'default': 'never',\n                'enum': ['first', 'ifSingle', 'never']\n              }\n            }\n          }\n        }]\n      }\n    }) || this;\n  }\n\n  RefactorAction.prototype.run = function (_accessor, editor, userArg) {\n    var args = CodeActionCommandArgs.fromUser(userArg, {\n      kind: CodeActionKind.Refactor,\n      apply: 2\n      /* Never */\n\n    });\n    return showCodeActionsForEditorSelection(editor, nls.localize('editor.action.refactor.noneMessage', \"No refactorings available\"), {\n      kind: CodeActionKind.Refactor.contains(args.kind) ? args.kind : CodeActionKind.Empty,\n      onlyIncludePreferredActions: args.preferred\n    }, args.apply);\n  };\n\n  RefactorAction.Id = 'editor.action.refactor';\n  return RefactorAction;\n}(EditorAction);\n\nexport { RefactorAction };\n\nvar SourceAction =\n/** @class */\nfunction (_super) {\n  __extends(SourceAction, _super);\n\n  function SourceAction() {\n    return _super.call(this, {\n      id: SourceAction.Id,\n      label: nls.localize('source.label', \"Source Action...\"),\n      alias: 'Source Action',\n      precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n      menuOpts: {\n        group: '1_modification',\n        order: 2.1,\n        when: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.Source))\n      },\n      description: {\n        description: 'Source Action...',\n        args: [{\n          name: 'args',\n          schema: {\n            'type': 'object',\n            'properties': {\n              'kind': {\n                'type': 'string'\n              },\n              'apply': {\n                'type': 'string',\n                'default': 'never',\n                'enum': ['first', 'ifSingle', 'never']\n              }\n            }\n          }\n        }]\n      }\n    }) || this;\n  }\n\n  SourceAction.prototype.run = function (_accessor, editor, userArg) {\n    var args = CodeActionCommandArgs.fromUser(userArg, {\n      kind: CodeActionKind.Source,\n      apply: 2\n      /* Never */\n\n    });\n    return showCodeActionsForEditorSelection(editor, nls.localize('editor.action.source.noneMessage', \"No source actions available\"), {\n      kind: CodeActionKind.Source.contains(args.kind) ? args.kind : CodeActionKind.Empty,\n      includeSourceActions: true,\n      onlyIncludePreferredActions: args.preferred\n    }, args.apply);\n  };\n\n  SourceAction.Id = 'editor.action.sourceAction';\n  return SourceAction;\n}(EditorAction);\n\nexport { SourceAction };\n\nvar OrganizeImportsAction =\n/** @class */\nfunction (_super) {\n  __extends(OrganizeImportsAction, _super);\n\n  function OrganizeImportsAction() {\n    return _super.call(this, {\n      id: OrganizeImportsAction.Id,\n      label: nls.localize('organizeImports.label', \"Organize Imports\"),\n      alias: 'Organize Imports',\n      precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.SourceOrganizeImports)),\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 1024\n        /* Shift */\n        | 512\n        /* Alt */\n        | 45\n        /* KEY_O */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  OrganizeImportsAction.prototype.run = function (_accessor, editor) {\n    return showCodeActionsForEditorSelection(editor, nls.localize('editor.action.organize.noneMessage', \"No organize imports action available\"), {\n      kind: CodeActionKind.SourceOrganizeImports,\n      includeSourceActions: true\n    }, 0\n    /* IfSingle */\n    );\n  };\n\n  OrganizeImportsAction.Id = 'editor.action.organizeImports';\n  return OrganizeImportsAction;\n}(EditorAction);\n\nexport { OrganizeImportsAction };\n\nvar FixAllAction =\n/** @class */\nfunction (_super) {\n  __extends(FixAllAction, _super);\n\n  function FixAllAction() {\n    return _super.call(this, {\n      id: FixAllAction.Id,\n      label: nls.localize('fixAll.label', \"Fix All\"),\n      alias: 'Fix All',\n      precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.SourceFixAll))\n    }) || this;\n  }\n\n  FixAllAction.prototype.run = function (_accessor, editor) {\n    return showCodeActionsForEditorSelection(editor, nls.localize('fixAll.noneMessage', \"No fix all action available\"), {\n      kind: CodeActionKind.SourceFixAll,\n      includeSourceActions: true\n    }, 0\n    /* IfSingle */\n    );\n  };\n\n  FixAllAction.Id = 'editor.action.fixAll';\n  return FixAllAction;\n}(EditorAction);\n\nexport { FixAllAction };\n\nvar AutoFixAction =\n/** @class */\nfunction (_super) {\n  __extends(AutoFixAction, _super);\n\n  function AutoFixAction() {\n    return _super.call(this, {\n      id: AutoFixAction.Id,\n      label: nls.localize('autoFix.label', \"Auto Fix...\"),\n      alias: 'Auto Fix',\n      precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.QuickFix)),\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 512\n        /* Alt */\n        | 1024\n        /* Shift */\n        | 84\n        /* US_DOT */\n        ,\n        mac: {\n          primary: 2048\n          /* CtrlCmd */\n          | 512\n          /* Alt */\n          | 84\n          /* US_DOT */\n\n        },\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  AutoFixAction.prototype.run = function (_accessor, editor) {\n    return showCodeActionsForEditorSelection(editor, nls.localize('editor.action.autoFix.noneMessage', \"No auto fixes available\"), {\n      kind: CodeActionKind.QuickFix,\n      onlyIncludePreferredActions: true\n    }, 0\n    /* IfSingle */\n    );\n  };\n\n  AutoFixAction.Id = 'editor.action.autoFix';\n  return AutoFixAction;\n}(EditorAction);\n\nexport { AutoFixAction };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { mergeSort } from '../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { illegalArgument, onUnexpectedExternalError } from '../../../base/common/errors.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { registerLanguageCommand } from '../../browser/editorExtensions.js';\nimport { CodeLensProviderRegistry } from '../../common/modes.js';\nimport { IModelService } from '../../common/services/modelService.js';\nexport function getCodeLensData(model, token) {\n  var symbols = [];\n  var provider = CodeLensProviderRegistry.ordered(model);\n  var promises = provider.map(function (provider) {\n    return Promise.resolve(provider.provideCodeLenses(model, token)).then(function (result) {\n      if (Array.isArray(result)) {\n        for (var _i = 0, result_1 = result; _i < result_1.length; _i++) {\n          var symbol = result_1[_i];\n          symbols.push({\n            symbol: symbol,\n            provider: provider\n          });\n        }\n      }\n    }).catch(onUnexpectedExternalError);\n  });\n  return Promise.all(promises).then(function () {\n    return mergeSort(symbols, function (a, b) {\n      // sort by lineNumber, provider-rank, and column\n      if (a.symbol.range.startLineNumber < b.symbol.range.startLineNumber) {\n        return -1;\n      } else if (a.symbol.range.startLineNumber > b.symbol.range.startLineNumber) {\n        return 1;\n      } else if (provider.indexOf(a.provider) < provider.indexOf(b.provider)) {\n        return -1;\n      } else if (provider.indexOf(a.provider) > provider.indexOf(b.provider)) {\n        return 1;\n      } else if (a.symbol.range.startColumn < b.symbol.range.startColumn) {\n        return -1;\n      } else if (a.symbol.range.startColumn > b.symbol.range.startColumn) {\n        return 1;\n      } else {\n        return 0;\n      }\n    });\n  });\n}\nregisterLanguageCommand('_executeCodeLensProvider', function (accessor, args) {\n  var resource = args.resource,\n      itemResolveCount = args.itemResolveCount;\n\n  if (!(resource instanceof URI)) {\n    throw illegalArgument();\n  }\n\n  var model = accessor.get(IModelService).getModel(resource);\n\n  if (!model) {\n    throw illegalArgument();\n  }\n\n  var result = [];\n  return getCodeLensData(model, CancellationToken.None).then(function (value) {\n    var resolve = [];\n\n    var _loop_1 = function _loop_1(item) {\n      if (typeof itemResolveCount === 'undefined' || Boolean(item.symbol.command)) {\n        result.push(item.symbol);\n      } else if (itemResolveCount-- > 0 && item.provider.resolveCodeLens) {\n        resolve.push(Promise.resolve(item.provider.resolveCodeLens(model, item.symbol, CancellationToken.None)).then(function (symbol) {\n          return result.push(symbol || item.symbol);\n        }));\n      }\n    };\n\n    for (var _i = 0, value_1 = value; _i < value_1.length; _i++) {\n      var item = value_1[_i];\n\n      _loop_1(item);\n    }\n\n    return Promise.all(resolve);\n  }).then(function () {\n    return result;\n  });\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../browser/editorExtensions.js';\nimport { CodeActionCommand, OrganizeImportsAction, QuickFixAction, QuickFixController, RefactorAction, SourceAction, AutoFixAction, FixAllAction } from './codeActionCommands.js';\nregisterEditorContribution(QuickFixController);\nregisterEditorAction(QuickFixAction);\nregisterEditorAction(RefactorAction);\nregisterEditorAction(SourceAction);\nregisterEditorAction(OrganizeImportsAction);\nregisterEditorAction(AutoFixAction);\nregisterEditorAction(FixAllAction);\nregisterEditorCommand(new CodeActionCommand());","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './codelensWidget.css';\nimport * as dom from '../../../base/browser/dom.js';\nimport { coalesce, isFalsyOrEmpty } from '../../../base/common/arrays.js';\nimport { escape } from '../../../base/common/strings.js';\nimport { Range } from '../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\nimport { editorCodeLensForeground } from '../../common/view/editorColorRegistry.js';\nimport { editorActiveLinkForeground } from '../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\n\nvar CodeLensViewZone =\n/** @class */\nfunction () {\n  function CodeLensViewZone(afterLineNumber, onHeight) {\n    this.afterLineNumber = afterLineNumber;\n    this._onHeight = onHeight;\n    this.heightInLines = 1;\n    this.suppressMouseDown = true;\n    this.domNode = document.createElement('div');\n  }\n\n  CodeLensViewZone.prototype.onComputedHeight = function (height) {\n    if (this._lastHeight === undefined) {\n      this._lastHeight = height;\n    } else if (this._lastHeight !== height) {\n      this._lastHeight = height;\n\n      this._onHeight();\n    }\n  };\n\n  return CodeLensViewZone;\n}();\n\nvar CodeLensContentWidget =\n/** @class */\nfunction () {\n  function CodeLensContentWidget(editor, symbolRange, data) {\n    // Editor.IContentWidget.allowEditorOverflow\n    this.allowEditorOverflow = false;\n    this.suppressMouseDown = true;\n    this._commands = new Map();\n    this._id = 'codeLensWidget' + ++CodeLensContentWidget._idPool;\n    this._editor = editor;\n    this.setSymbolRange(symbolRange);\n    this._domNode = document.createElement('span');\n    this._domNode.innerHTML = '&nbsp;';\n    dom.addClass(this._domNode, 'codelens-decoration');\n    this.updateHeight();\n    this.withCommands(data.map(function (data) {\n      return data.symbol;\n    }), false);\n  }\n\n  CodeLensContentWidget.prototype.updateHeight = function () {\n    var _a = this._editor.getConfiguration(),\n        fontInfo = _a.fontInfo,\n        lineHeight = _a.lineHeight;\n\n    this._domNode.style.height = Math.round(lineHeight * 1.1) + \"px\";\n    this._domNode.style.lineHeight = lineHeight + \"px\";\n    this._domNode.style.fontSize = Math.round(fontInfo.fontSize * 0.9) + \"px\";\n    this._domNode.style.paddingRight = Math.round(fontInfo.fontSize * 0.45) + \"px\";\n    this._domNode.innerHTML = '&nbsp;';\n  };\n\n  CodeLensContentWidget.prototype.withCommands = function (inSymbols, animate) {\n    this._commands.clear();\n\n    var symbols = coalesce(inSymbols);\n\n    if (isFalsyOrEmpty(symbols)) {\n      this._domNode.innerHTML = '<span>no commands</span>';\n      return;\n    }\n\n    var html = [];\n\n    for (var i = 0; i < symbols.length; i++) {\n      var command = symbols[i].command;\n\n      if (command) {\n        var title = escape(command.title);\n        var part = void 0;\n\n        if (command.id) {\n          part = \"<a id=\" + i + \">\" + title + \"</a>\";\n\n          this._commands.set(String(i), command);\n        } else {\n          part = \"<span>\" + title + \"</span>\";\n        }\n\n        html.push(part);\n      }\n    }\n\n    var wasEmpty = this._domNode.innerHTML === '' || this._domNode.innerHTML === '&nbsp;';\n    this._domNode.innerHTML = html.join('<span>&nbsp;|&nbsp;</span>');\n\n    this._editor.layoutContentWidget(this);\n\n    if (wasEmpty && animate) {\n      dom.addClass(this._domNode, 'fadein');\n    }\n  };\n\n  CodeLensContentWidget.prototype.getCommand = function (link) {\n    return link.parentElement === this._domNode ? this._commands.get(link.id) : undefined;\n  };\n\n  CodeLensContentWidget.prototype.getId = function () {\n    return this._id;\n  };\n\n  CodeLensContentWidget.prototype.getDomNode = function () {\n    return this._domNode;\n  };\n\n  CodeLensContentWidget.prototype.setSymbolRange = function (range) {\n    if (!this._editor.hasModel()) {\n      return;\n    }\n\n    var lineNumber = range.startLineNumber;\n\n    var column = this._editor.getModel().getLineFirstNonWhitespaceColumn(lineNumber);\n\n    this._widgetPosition = {\n      position: {\n        lineNumber: lineNumber,\n        column: column\n      },\n      preference: [1\n      /* ABOVE */\n      ]\n    };\n  };\n\n  CodeLensContentWidget.prototype.getPosition = function () {\n    return this._widgetPosition;\n  };\n\n  CodeLensContentWidget.prototype.isVisible = function () {\n    return this._domNode.hasAttribute('monaco-visible-content-widget');\n  };\n\n  CodeLensContentWidget._idPool = 0;\n  return CodeLensContentWidget;\n}();\n\nvar CodeLensHelper =\n/** @class */\nfunction () {\n  function CodeLensHelper() {\n    this._removeDecorations = [];\n    this._addDecorations = [];\n    this._addDecorationsCallbacks = [];\n  }\n\n  CodeLensHelper.prototype.addDecoration = function (decoration, callback) {\n    this._addDecorations.push(decoration);\n\n    this._addDecorationsCallbacks.push(callback);\n  };\n\n  CodeLensHelper.prototype.removeDecoration = function (decorationId) {\n    this._removeDecorations.push(decorationId);\n  };\n\n  CodeLensHelper.prototype.commit = function (changeAccessor) {\n    var resultingDecorations = changeAccessor.deltaDecorations(this._removeDecorations, this._addDecorations);\n\n    for (var i = 0, len = resultingDecorations.length; i < len; i++) {\n      this._addDecorationsCallbacks[i](resultingDecorations[i]);\n    }\n  };\n\n  return CodeLensHelper;\n}();\n\nexport { CodeLensHelper };\n\nvar CodeLens =\n/** @class */\nfunction () {\n  function CodeLens(data, editor, helper, viewZoneChangeAccessor, updateCallback) {\n    var _this = this;\n\n    this._editor = editor;\n    this._data = data;\n    this._decorationIds = new Array(this._data.length);\n    var range;\n\n    this._data.forEach(function (codeLensData, i) {\n      helper.addDecoration({\n        range: codeLensData.symbol.range,\n        options: ModelDecorationOptions.EMPTY\n      }, function (id) {\n        return _this._decorationIds[i] = id;\n      }); // the range contains all lenses on this line\n\n      if (!range) {\n        range = Range.lift(codeLensData.symbol.range);\n      } else {\n        range = Range.plusRange(range, codeLensData.symbol.range);\n      }\n    });\n\n    if (range) {\n      this._contentWidget = new CodeLensContentWidget(editor, range, this._data);\n      this._viewZone = new CodeLensViewZone(range.startLineNumber - 1, updateCallback);\n      this._viewZoneId = viewZoneChangeAccessor.addZone(this._viewZone);\n\n      this._editor.addContentWidget(this._contentWidget);\n    }\n  }\n\n  CodeLens.prototype.dispose = function (helper, viewZoneChangeAccessor) {\n    while (this._decorationIds.length) {\n      helper.removeDecoration(this._decorationIds.pop());\n    }\n\n    if (viewZoneChangeAccessor) {\n      viewZoneChangeAccessor.removeZone(this._viewZoneId);\n    }\n\n    this._editor.removeContentWidget(this._contentWidget);\n  };\n\n  CodeLens.prototype.isValid = function () {\n    var _this = this;\n\n    if (!this._editor.hasModel()) {\n      return false;\n    }\n\n    var model = this._editor.getModel();\n\n    return this._decorationIds.some(function (id, i) {\n      var range = model.getDecorationRange(id);\n      var symbol = _this._data[i].symbol;\n      return !!(range && Range.isEmpty(symbol.range) === range.isEmpty());\n    });\n  };\n\n  CodeLens.prototype.updateCodeLensSymbols = function (data, helper) {\n    var _this = this;\n\n    while (this._decorationIds.length) {\n      helper.removeDecoration(this._decorationIds.pop());\n    }\n\n    this._data = data;\n    this._decorationIds = new Array(this._data.length);\n\n    this._data.forEach(function (codeLensData, i) {\n      helper.addDecoration({\n        range: codeLensData.symbol.range,\n        options: ModelDecorationOptions.EMPTY\n      }, function (id) {\n        return _this._decorationIds[i] = id;\n      });\n    });\n  };\n\n  CodeLens.prototype.computeIfNecessary = function (model) {\n    if (!this._contentWidget.isVisible()) {\n      return null;\n    } // Read editor current state\n\n\n    for (var i = 0; i < this._decorationIds.length; i++) {\n      var range = model.getDecorationRange(this._decorationIds[i]);\n\n      if (range) {\n        this._data[i].symbol.range = range;\n      }\n    }\n\n    return this._data;\n  };\n\n  CodeLens.prototype.updateCommands = function (symbols) {\n    this._contentWidget.withCommands(symbols, true);\n\n    for (var i = 0; i < this._data.length; i++) {\n      var resolved = symbols[i];\n\n      if (resolved) {\n        var symbol = this._data[i].symbol;\n        symbol.command = resolved.command || symbol.command;\n      }\n    }\n  };\n\n  CodeLens.prototype.updateHeight = function () {\n    this._contentWidget.updateHeight();\n  };\n\n  CodeLens.prototype.getCommand = function (link) {\n    return this._contentWidget.getCommand(link);\n  };\n\n  CodeLens.prototype.getLineNumber = function () {\n    if (this._editor.hasModel()) {\n      var range = this._editor.getModel().getDecorationRange(this._decorationIds[0]);\n\n      if (range) {\n        return range.startLineNumber;\n      }\n    }\n\n    return -1;\n  };\n\n  CodeLens.prototype.update = function (viewZoneChangeAccessor) {\n    if (this.isValid() && this._editor.hasModel()) {\n      var range = this._editor.getModel().getDecorationRange(this._decorationIds[0]);\n\n      if (range) {\n        this._viewZone.afterLineNumber = range.startLineNumber - 1;\n        viewZoneChangeAccessor.layoutZone(this._viewZoneId);\n\n        this._contentWidget.setSymbolRange(range);\n\n        this._editor.layoutContentWidget(this._contentWidget);\n      }\n    }\n  };\n\n  return CodeLens;\n}();\n\nexport { CodeLens };\nregisterThemingParticipant(function (theme, collector) {\n  var codeLensForeground = theme.getColor(editorCodeLensForeground);\n\n  if (codeLensForeground) {\n    collector.addRule(\".monaco-editor .codelens-decoration { color: \" + codeLensForeground + \"; }\");\n  }\n\n  var activeLinkForeground = theme.getColor(editorActiveLinkForeground);\n\n  if (activeLinkForeground) {\n    collector.addRule(\".monaco-editor .codelens-decoration > a:hover { color: \" + activeLinkForeground + \" !important; }\");\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport { RunOnceScheduler, createCancelablePromise, disposableTimeout } from '../../../base/common/async.js';\nimport { onUnexpectedError, onUnexpectedExternalError } from '../../../base/common/errors.js';\nimport { dispose, toDisposable } from '../../../base/common/lifecycle.js';\nimport { StableEditorScrollState } from '../../browser/core/editorState.js';\nimport { registerEditorContribution } from '../../browser/editorExtensions.js';\nimport { CodeLensProviderRegistry } from '../../common/modes.js';\nimport { getCodeLensData } from './codelens.js';\nimport { CodeLens, CodeLensHelper } from './codelensWidget.js';\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\nimport { ICodeLensCache } from './codeLensCache.js';\n\nvar CodeLensContribution =\n/** @class */\nfunction () {\n  function CodeLensContribution(_editor, _commandService, _notificationService, _codeLensCache) {\n    var _this = this;\n\n    this._editor = _editor;\n    this._commandService = _commandService;\n    this._notificationService = _notificationService;\n    this._codeLensCache = _codeLensCache;\n    this._isEnabled = this._editor.getConfiguration().contribInfo.codeLens;\n    this._globalToDispose = [];\n    this._localToDispose = [];\n    this._lenses = [];\n    this._currentFindCodeLensSymbolsPromise = null;\n    this._modelChangeCounter = 0;\n\n    this._globalToDispose.push(this._editor.onDidChangeModel(function () {\n      return _this._onModelChange();\n    }));\n\n    this._globalToDispose.push(this._editor.onDidChangeModelLanguage(function () {\n      return _this._onModelChange();\n    }));\n\n    this._globalToDispose.push(this._editor.onDidChangeConfiguration(function (e) {\n      var prevIsEnabled = _this._isEnabled;\n      _this._isEnabled = _this._editor.getConfiguration().contribInfo.codeLens;\n\n      if (prevIsEnabled !== _this._isEnabled) {\n        _this._onModelChange();\n      }\n    }));\n\n    this._globalToDispose.push(CodeLensProviderRegistry.onDidChange(this._onModelChange, this));\n\n    this._onModelChange();\n  }\n\n  CodeLensContribution.prototype.dispose = function () {\n    this._localDispose();\n\n    this._globalToDispose = dispose(this._globalToDispose);\n  };\n\n  CodeLensContribution.prototype._localDispose = function () {\n    if (this._currentFindCodeLensSymbolsPromise) {\n      this._currentFindCodeLensSymbolsPromise.cancel();\n\n      this._currentFindCodeLensSymbolsPromise = null;\n      this._modelChangeCounter++;\n    }\n\n    if (this._currentResolveCodeLensSymbolsPromise) {\n      this._currentResolveCodeLensSymbolsPromise.cancel();\n\n      this._currentResolveCodeLensSymbolsPromise = null;\n    }\n\n    this._localToDispose = dispose(this._localToDispose);\n  };\n\n  CodeLensContribution.prototype.getId = function () {\n    return CodeLensContribution.ID;\n  };\n\n  CodeLensContribution.prototype._onModelChange = function () {\n    var _this = this;\n\n    this._localDispose();\n\n    var model = this._editor.getModel();\n\n    if (!model) {\n      return;\n    }\n\n    if (!this._isEnabled) {\n      return;\n    }\n\n    var cachedLenses = this._codeLensCache.get(model);\n\n    if (cachedLenses) {\n      this._renderCodeLensSymbols(cachedLenses);\n    }\n\n    if (!CodeLensProviderRegistry.has(model)) {\n      // no provider -> return but check with\n      // cached lenses. they expire after 30 seconds\n      if (cachedLenses) {\n        this._localToDispose.push(disposableTimeout(function () {\n          var cachedLensesNow = _this._codeLensCache.get(model);\n\n          if (cachedLenses === cachedLensesNow) {\n            _this._codeLensCache.delete(model);\n\n            _this._onModelChange();\n          }\n        }, 30 * 1000));\n      }\n\n      return;\n    }\n\n    for (var _i = 0, _a = CodeLensProviderRegistry.all(model); _i < _a.length; _i++) {\n      var provider = _a[_i];\n\n      if (typeof provider.onDidChange === 'function') {\n        var registration = provider.onDidChange(function () {\n          return scheduler.schedule();\n        });\n\n        this._localToDispose.push(registration);\n      }\n    }\n\n    this._detectVisibleLenses = new RunOnceScheduler(function () {\n      _this._onViewportChanged();\n    }, 250);\n    var scheduler = new RunOnceScheduler(function () {\n      var counterValue = ++_this._modelChangeCounter;\n\n      if (_this._currentFindCodeLensSymbolsPromise) {\n        _this._currentFindCodeLensSymbolsPromise.cancel();\n      }\n\n      _this._currentFindCodeLensSymbolsPromise = createCancelablePromise(function (token) {\n        return getCodeLensData(model, token);\n      });\n\n      _this._currentFindCodeLensSymbolsPromise.then(function (result) {\n        if (counterValue === _this._modelChangeCounter) {\n          // only the last one wins\n          _this._codeLensCache.put(model, result);\n\n          _this._renderCodeLensSymbols(result);\n\n          _this._detectVisibleLenses.schedule();\n        }\n      }, onUnexpectedError);\n    }, 250);\n\n    this._localToDispose.push(scheduler);\n\n    this._localToDispose.push(this._detectVisibleLenses);\n\n    this._localToDispose.push(this._editor.onDidChangeModelContent(function (e) {\n      _this._editor.changeDecorations(function (changeAccessor) {\n        _this._editor.changeViewZones(function (viewAccessor) {\n          var toDispose = [];\n          var lastLensLineNumber = -1;\n\n          _this._lenses.forEach(function (lens) {\n            if (!lens.isValid() || lastLensLineNumber === lens.getLineNumber()) {\n              // invalid -> lens collapsed, attach range doesn't exist anymore\n              // line_number -> lenses should never be on the same line\n              toDispose.push(lens);\n            } else {\n              lens.update(viewAccessor);\n              lastLensLineNumber = lens.getLineNumber();\n            }\n          });\n\n          var helper = new CodeLensHelper();\n          toDispose.forEach(function (l) {\n            l.dispose(helper, viewAccessor);\n\n            _this._lenses.splice(_this._lenses.indexOf(l), 1);\n          });\n          helper.commit(changeAccessor);\n        });\n      }); // Compute new `visible` code lenses\n\n\n      _this._detectVisibleLenses.schedule(); // Ask for all references again\n\n\n      scheduler.schedule();\n    }));\n\n    this._localToDispose.push(this._editor.onDidScrollChange(function (e) {\n      if (e.scrollTopChanged && _this._lenses.length > 0) {\n        _this._detectVisibleLenses.schedule();\n      }\n    }));\n\n    this._localToDispose.push(this._editor.onDidLayoutChange(function (e) {\n      _this._detectVisibleLenses.schedule();\n    }));\n\n    this._localToDispose.push(toDisposable(function () {\n      if (_this._editor.getModel()) {\n        var scrollState = StableEditorScrollState.capture(_this._editor);\n\n        _this._editor.changeDecorations(function (changeAccessor) {\n          _this._editor.changeViewZones(function (accessor) {\n            _this._disposeAllLenses(changeAccessor, accessor);\n          });\n        });\n\n        scrollState.restore(_this._editor);\n      } else {\n        // No accessors available\n        _this._disposeAllLenses(undefined, undefined);\n      }\n    }));\n\n    this._localToDispose.push(this._editor.onDidChangeConfiguration(function (e) {\n      if (e.fontInfo) {\n        for (var _i = 0, _a = _this._lenses; _i < _a.length; _i++) {\n          var lens = _a[_i];\n          lens.updateHeight();\n        }\n      }\n    }));\n\n    this._localToDispose.push(this._editor.onMouseUp(function (e) {\n      var _a;\n\n      if (e.target.type === 9\n      /* CONTENT_WIDGET */\n      && e.target.element && e.target.element.tagName === 'A') {\n        for (var _i = 0, _b = _this._lenses; _i < _b.length; _i++) {\n          var lens = _b[_i];\n          var command = lens.getCommand(e.target.element);\n\n          if (command) {\n            (_a = _this._commandService).executeCommand.apply(_a, [command.id].concat(command.arguments || [])).catch(function (err) {\n              return _this._notificationService.error(err);\n            });\n\n            break;\n          }\n        }\n      }\n    }));\n\n    scheduler.schedule();\n  };\n\n  CodeLensContribution.prototype._disposeAllLenses = function (decChangeAccessor, viewZoneChangeAccessor) {\n    var helper = new CodeLensHelper();\n\n    this._lenses.forEach(function (lens) {\n      return lens.dispose(helper, viewZoneChangeAccessor);\n    });\n\n    if (decChangeAccessor) {\n      helper.commit(decChangeAccessor);\n    }\n\n    this._lenses = [];\n  };\n\n  CodeLensContribution.prototype._renderCodeLensSymbols = function (symbols) {\n    var _this = this;\n\n    if (!this._editor.hasModel()) {\n      return;\n    }\n\n    var maxLineNumber = this._editor.getModel().getLineCount();\n\n    var groups = [];\n    var lastGroup;\n\n    for (var _i = 0, symbols_1 = symbols; _i < symbols_1.length; _i++) {\n      var symbol = symbols_1[_i];\n      var line = symbol.symbol.range.startLineNumber;\n\n      if (line < 1 || line > maxLineNumber) {\n        // invalid code lens\n        continue;\n      } else if (lastGroup && lastGroup[lastGroup.length - 1].symbol.range.startLineNumber === line) {\n        // on same line as previous\n        lastGroup.push(symbol);\n      } else {\n        // on later line as previous\n        lastGroup = [symbol];\n        groups.push(lastGroup);\n      }\n    }\n\n    var scrollState = StableEditorScrollState.capture(this._editor);\n\n    this._editor.changeDecorations(function (changeAccessor) {\n      _this._editor.changeViewZones(function (accessor) {\n        var codeLensIndex = 0,\n            groupsIndex = 0,\n            helper = new CodeLensHelper();\n\n        while (groupsIndex < groups.length && codeLensIndex < _this._lenses.length) {\n          var symbolsLineNumber = groups[groupsIndex][0].symbol.range.startLineNumber;\n\n          var codeLensLineNumber = _this._lenses[codeLensIndex].getLineNumber();\n\n          if (codeLensLineNumber < symbolsLineNumber) {\n            _this._lenses[codeLensIndex].dispose(helper, accessor);\n\n            _this._lenses.splice(codeLensIndex, 1);\n          } else if (codeLensLineNumber === symbolsLineNumber) {\n            _this._lenses[codeLensIndex].updateCodeLensSymbols(groups[groupsIndex], helper);\n\n            groupsIndex++;\n            codeLensIndex++;\n          } else {\n            _this._lenses.splice(codeLensIndex, 0, new CodeLens(groups[groupsIndex], _this._editor, helper, accessor, function () {\n              return _this._detectVisibleLenses.schedule();\n            }));\n\n            codeLensIndex++;\n            groupsIndex++;\n          }\n        } // Delete extra code lenses\n\n\n        while (codeLensIndex < _this._lenses.length) {\n          _this._lenses[codeLensIndex].dispose(helper, accessor);\n\n          _this._lenses.splice(codeLensIndex, 1);\n        } // Create extra symbols\n\n\n        while (groupsIndex < groups.length) {\n          _this._lenses.push(new CodeLens(groups[groupsIndex], _this._editor, helper, accessor, function () {\n            return _this._detectVisibleLenses.schedule();\n          }));\n\n          groupsIndex++;\n        }\n\n        helper.commit(changeAccessor);\n      });\n    });\n\n    scrollState.restore(this._editor);\n  };\n\n  CodeLensContribution.prototype._onViewportChanged = function () {\n    var _this = this;\n\n    if (this._currentResolveCodeLensSymbolsPromise) {\n      this._currentResolveCodeLensSymbolsPromise.cancel();\n\n      this._currentResolveCodeLensSymbolsPromise = null;\n    }\n\n    var model = this._editor.getModel();\n\n    if (!model) {\n      return;\n    }\n\n    var toResolve = [];\n    var lenses = [];\n\n    this._lenses.forEach(function (lens) {\n      var request = lens.computeIfNecessary(model);\n\n      if (request) {\n        toResolve.push(request);\n        lenses.push(lens);\n      }\n    });\n\n    if (toResolve.length === 0) {\n      return;\n    }\n\n    this._currentResolveCodeLensSymbolsPromise = createCancelablePromise(function (token) {\n      var promises = toResolve.map(function (request, i) {\n        var resolvedSymbols = new Array(request.length);\n        var promises = request.map(function (request, i) {\n          if (!request.symbol.command && typeof request.provider.resolveCodeLens === 'function') {\n            return Promise.resolve(request.provider.resolveCodeLens(model, request.symbol, token)).then(function (symbol) {\n              resolvedSymbols[i] = symbol;\n            }, onUnexpectedExternalError);\n          } else {\n            resolvedSymbols[i] = request.symbol;\n            return Promise.resolve(undefined);\n          }\n        });\n        return Promise.all(promises).then(function () {\n          lenses[i].updateCommands(resolvedSymbols);\n        });\n      });\n      return Promise.all(promises);\n    });\n\n    this._currentResolveCodeLensSymbolsPromise.then(function () {\n      _this._currentResolveCodeLensSymbolsPromise = null;\n    }).catch(function (err) {\n      _this._currentResolveCodeLensSymbolsPromise = null;\n      onUnexpectedError(err);\n    });\n  };\n\n  CodeLensContribution.ID = 'css.editor.codeLens';\n  CodeLensContribution = __decorate([__param(1, ICommandService), __param(2, INotificationService), __param(3, ICodeLensCache)], CodeLensContribution);\n  return CodeLensContribution;\n}();\n\nexport { CodeLensContribution };\nregisterEditorContribution(CodeLensContribution);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/**\n * Return a hash value for an object.\n */\nexport function hash(obj, hashVal) {\n  if (hashVal === void 0) {\n    hashVal = 0;\n  }\n\n  switch (typeof obj) {\n    case 'object':\n      if (obj === null) {\n        return numberHash(349, hashVal);\n      } else if (Array.isArray(obj)) {\n        return arrayHash(obj, hashVal);\n      }\n\n      return objectHash(obj, hashVal);\n\n    case 'string':\n      return stringHash(obj, hashVal);\n\n    case 'boolean':\n      return booleanHash(obj, hashVal);\n\n    case 'number':\n      return numberHash(obj, hashVal);\n\n    case 'undefined':\n      return numberHash(0, 937);\n\n    default:\n      return numberHash(0, 617);\n  }\n}\n\nfunction numberHash(val, initialHashVal) {\n  return (initialHashVal << 5) - initialHashVal + val | 0; // hashVal * 31 + ch, keep as int32\n}\n\nfunction booleanHash(b, initialHashVal) {\n  return numberHash(b ? 433 : 863, initialHashVal);\n}\n\nfunction stringHash(s, hashVal) {\n  hashVal = numberHash(149417, hashVal);\n\n  for (var i = 0, length_1 = s.length; i < length_1; i++) {\n    hashVal = numberHash(s.charCodeAt(i), hashVal);\n  }\n\n  return hashVal;\n}\n\nfunction arrayHash(arr, initialHashVal) {\n  initialHashVal = numberHash(104579, initialHashVal);\n  return arr.reduce(function (hashVal, item) {\n    return hash(item, hashVal);\n  }, initialHashVal);\n}\n\nfunction objectHash(obj, initialHashVal) {\n  initialHashVal = numberHash(181387, initialHashVal);\n  return Object.keys(obj).sort().reduce(function (hashVal, key) {\n    hashVal = stringHash(key, hashVal);\n    return hash(obj[key], hashVal);\n  }, initialHashVal);\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { illegalArgument } from '../../../base/common/errors.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { registerLanguageCommand } from '../../browser/editorExtensions.js';\nimport { Range } from '../../common/core/range.js';\nimport { ColorProviderRegistry } from '../../common/modes.js';\nimport { IModelService } from '../../common/services/modelService.js';\nexport function getColors(model, token) {\n  var colors = [];\n  var providers = ColorProviderRegistry.ordered(model).reverse();\n  var promises = providers.map(function (provider) {\n    return Promise.resolve(provider.provideDocumentColors(model, token)).then(function (result) {\n      if (Array.isArray(result)) {\n        for (var _i = 0, result_1 = result; _i < result_1.length; _i++) {\n          var colorInfo = result_1[_i];\n          colors.push({\n            colorInfo: colorInfo,\n            provider: provider\n          });\n        }\n      }\n    });\n  });\n  return Promise.all(promises).then(function () {\n    return colors;\n  });\n}\nexport function getColorPresentations(model, colorInfo, provider, token) {\n  return Promise.resolve(provider.provideColorPresentations(model, colorInfo, token));\n}\nregisterLanguageCommand('_executeDocumentColorProvider', function (accessor, args) {\n  var resource = args.resource;\n\n  if (!(resource instanceof URI)) {\n    throw illegalArgument();\n  }\n\n  var model = accessor.get(IModelService).getModel(resource);\n\n  if (!model) {\n    throw illegalArgument();\n  }\n\n  var rawCIs = [];\n  var providers = ColorProviderRegistry.ordered(model).reverse();\n  var promises = providers.map(function (provider) {\n    return Promise.resolve(provider.provideDocumentColors(model, CancellationToken.None)).then(function (result) {\n      if (Array.isArray(result)) {\n        for (var _i = 0, result_2 = result; _i < result_2.length; _i++) {\n          var ci = result_2[_i];\n          rawCIs.push({\n            range: ci.range,\n            color: [ci.color.red, ci.color.green, ci.color.blue, ci.color.alpha]\n          });\n        }\n      }\n    });\n  });\n  return Promise.all(promises).then(function () {\n    return rawCIs;\n  });\n});\nregisterLanguageCommand('_executeColorPresentationProvider', function (accessor, args) {\n  var resource = args.resource,\n      color = args.color,\n      range = args.range;\n\n  if (!(resource instanceof URI) || !Array.isArray(color) || color.length !== 4 || !Range.isIRange(range)) {\n    throw illegalArgument();\n  }\n\n  var red = color[0],\n      green = color[1],\n      blue = color[2],\n      alpha = color[3];\n  var model = accessor.get(IModelService).getModel(resource);\n\n  if (!model) {\n    throw illegalArgument();\n  }\n\n  var colorInfo = {\n    range: range,\n    color: {\n      red: red,\n      green: green,\n      blue: blue,\n      alpha: alpha\n    }\n  };\n  var presentations = [];\n  var providers = ColorProviderRegistry.ordered(model).reverse();\n  var promises = providers.map(function (provider) {\n    return Promise.resolve(provider.provideColorPresentations(model, colorInfo, CancellationToken.None)).then(function (result) {\n      if (Array.isArray(result)) {\n        presentations.push.apply(presentations, result);\n      }\n    });\n  });\n  return Promise.all(promises).then(function () {\n    return presentations;\n  });\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport { TimeoutTimer, createCancelablePromise } from '../../../base/common/async.js';\nimport { RGBA } from '../../../base/common/color.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { hash } from '../../../base/common/hash.js';\nimport { dispose } from '../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\nimport { Range } from '../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\nimport { ColorProviderRegistry } from '../../common/modes.js';\nimport { getColors } from './color.js';\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\nvar MAX_DECORATORS = 500;\n\nvar ColorDetector =\n/** @class */\nfunction () {\n  function ColorDetector(_editor, _codeEditorService, _configurationService) {\n    var _this = this;\n\n    this._editor = _editor;\n    this._codeEditorService = _codeEditorService;\n    this._configurationService = _configurationService;\n    this._globalToDispose = [];\n    this._localToDispose = [];\n    this._decorationsIds = [];\n    this._colorDatas = new Map();\n    this._colorDecoratorIds = [];\n    this._decorationsTypes = {};\n\n    this._globalToDispose.push(_editor.onDidChangeModel(function (e) {\n      _this._isEnabled = _this.isEnabled();\n\n      _this.onModelChanged();\n    }));\n\n    this._globalToDispose.push(_editor.onDidChangeModelLanguage(function (e) {\n      return _this.onModelChanged();\n    }));\n\n    this._globalToDispose.push(ColorProviderRegistry.onDidChange(function (e) {\n      return _this.onModelChanged();\n    }));\n\n    this._globalToDispose.push(_editor.onDidChangeConfiguration(function (e) {\n      var prevIsEnabled = _this._isEnabled;\n      _this._isEnabled = _this.isEnabled();\n\n      if (prevIsEnabled !== _this._isEnabled) {\n        if (_this._isEnabled) {\n          _this.onModelChanged();\n        } else {\n          _this.removeAllDecorations();\n        }\n      }\n    }));\n\n    this._timeoutTimer = null;\n    this._computePromise = null;\n    this._isEnabled = this.isEnabled();\n    this.onModelChanged();\n  }\n\n  ColorDetector.prototype.isEnabled = function () {\n    var model = this._editor.getModel();\n\n    if (!model) {\n      return false;\n    }\n\n    var languageId = model.getLanguageIdentifier(); // handle deprecated settings. [languageId].colorDecorators.enable\n\n    var deprecatedConfig = this._configurationService.getValue(languageId.language);\n\n    if (deprecatedConfig) {\n      var colorDecorators = deprecatedConfig['colorDecorators']; // deprecatedConfig.valueOf('.colorDecorators.enable');\n\n      if (colorDecorators && colorDecorators['enable'] !== undefined && !colorDecorators['enable']) {\n        return colorDecorators['enable'];\n      }\n    }\n\n    return this._editor.getConfiguration().contribInfo.colorDecorators;\n  };\n\n  ColorDetector.prototype.getId = function () {\n    return ColorDetector.ID;\n  };\n\n  ColorDetector.get = function (editor) {\n    return editor.getContribution(this.ID);\n  };\n\n  ColorDetector.prototype.dispose = function () {\n    this.stop();\n    this.removeAllDecorations();\n    this._globalToDispose = dispose(this._globalToDispose);\n  };\n\n  ColorDetector.prototype.onModelChanged = function () {\n    var _this = this;\n\n    this.stop();\n\n    if (!this._isEnabled) {\n      return;\n    }\n\n    var model = this._editor.getModel();\n\n    if (!model || !ColorProviderRegistry.has(model)) {\n      return;\n    }\n\n    this._localToDispose.push(this._editor.onDidChangeModelContent(function (e) {\n      if (!_this._timeoutTimer) {\n        _this._timeoutTimer = new TimeoutTimer();\n\n        _this._timeoutTimer.cancelAndSet(function () {\n          _this._timeoutTimer = null;\n\n          _this.beginCompute();\n        }, ColorDetector.RECOMPUTE_TIME);\n      }\n    }));\n\n    this.beginCompute();\n  };\n\n  ColorDetector.prototype.beginCompute = function () {\n    var _this = this;\n\n    this._computePromise = createCancelablePromise(function (token) {\n      var model = _this._editor.getModel();\n\n      if (!model) {\n        return Promise.resolve([]);\n      }\n\n      return getColors(model, token);\n    });\n\n    this._computePromise.then(function (colorInfos) {\n      _this.updateDecorations(colorInfos);\n\n      _this.updateColorDecorators(colorInfos);\n\n      _this._computePromise = null;\n    }, onUnexpectedError);\n  };\n\n  ColorDetector.prototype.stop = function () {\n    if (this._timeoutTimer) {\n      this._timeoutTimer.cancel();\n\n      this._timeoutTimer = null;\n    }\n\n    if (this._computePromise) {\n      this._computePromise.cancel();\n\n      this._computePromise = null;\n    }\n\n    this._localToDispose = dispose(this._localToDispose);\n  };\n\n  ColorDetector.prototype.updateDecorations = function (colorDatas) {\n    var _this = this;\n\n    var decorations = colorDatas.map(function (c) {\n      return {\n        range: {\n          startLineNumber: c.colorInfo.range.startLineNumber,\n          startColumn: c.colorInfo.range.startColumn,\n          endLineNumber: c.colorInfo.range.endLineNumber,\n          endColumn: c.colorInfo.range.endColumn\n        },\n        options: ModelDecorationOptions.EMPTY\n      };\n    });\n    this._decorationsIds = this._editor.deltaDecorations(this._decorationsIds, decorations);\n    this._colorDatas = new Map();\n\n    this._decorationsIds.forEach(function (id, i) {\n      return _this._colorDatas.set(id, colorDatas[i]);\n    });\n  };\n\n  ColorDetector.prototype.updateColorDecorators = function (colorData) {\n    var decorations = [];\n    var newDecorationsTypes = {};\n\n    for (var i = 0; i < colorData.length && decorations.length < MAX_DECORATORS; i++) {\n      var _a = colorData[i].colorInfo.color,\n          red = _a.red,\n          green = _a.green,\n          blue = _a.blue,\n          alpha = _a.alpha;\n      var rgba = new RGBA(Math.round(red * 255), Math.round(green * 255), Math.round(blue * 255), alpha);\n      var subKey = hash(rgba).toString(16);\n      var color = \"rgba(\" + rgba.r + \", \" + rgba.g + \", \" + rgba.b + \", \" + rgba.a + \")\";\n      var key = 'colorBox-' + subKey;\n\n      if (!this._decorationsTypes[key] && !newDecorationsTypes[key]) {\n        this._codeEditorService.registerDecorationType(key, {\n          before: {\n            contentText: ' ',\n            border: 'solid 0.1em #000',\n            margin: '0.1em 0.2em 0 0.2em',\n            width: '0.8em',\n            height: '0.8em',\n            backgroundColor: color\n          },\n          dark: {\n            before: {\n              border: 'solid 0.1em #eee'\n            }\n          }\n        });\n      }\n\n      newDecorationsTypes[key] = true;\n      decorations.push({\n        range: {\n          startLineNumber: colorData[i].colorInfo.range.startLineNumber,\n          startColumn: colorData[i].colorInfo.range.startColumn,\n          endLineNumber: colorData[i].colorInfo.range.endLineNumber,\n          endColumn: colorData[i].colorInfo.range.endColumn\n        },\n        options: this._codeEditorService.resolveDecorationOptions(key, true)\n      });\n    }\n\n    for (var subType in this._decorationsTypes) {\n      if (!newDecorationsTypes[subType]) {\n        this._codeEditorService.removeDecorationType(subType);\n      }\n    }\n\n    this._colorDecoratorIds = this._editor.deltaDecorations(this._colorDecoratorIds, decorations);\n  };\n\n  ColorDetector.prototype.removeAllDecorations = function () {\n    this._decorationsIds = this._editor.deltaDecorations(this._decorationsIds, []);\n    this._colorDecoratorIds = this._editor.deltaDecorations(this._colorDecoratorIds, []);\n\n    for (var subType in this._decorationsTypes) {\n      this._codeEditorService.removeDecorationType(subType);\n    }\n  };\n\n  ColorDetector.prototype.getColorData = function (position) {\n    var _this = this;\n\n    var model = this._editor.getModel();\n\n    if (!model) {\n      return null;\n    }\n\n    var decorations = model.getDecorationsInRange(Range.fromPositions(position, position)).filter(function (d) {\n      return _this._colorDatas.has(d.id);\n    });\n\n    if (decorations.length === 0) {\n      return null;\n    }\n\n    return this._colorDatas.get(decorations[0].id);\n  };\n\n  ColorDetector.ID = 'editor.contrib.colorDetector';\n  ColorDetector.RECOMPUTE_TIME = 1000; // ms\n\n  ColorDetector = __decorate([__param(1, ICodeEditorService), __param(2, IConfigurationService)], ColorDetector);\n  return ColorDetector;\n}();\n\nexport { ColorDetector };\nregisterEditorContribution(ColorDetector);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditOperation } from '../../common/core/editOperation.js';\nimport { Position } from '../../common/core/position.js';\nimport { Range } from '../../common/core/range.js';\nimport { Selection } from '../../common/core/selection.js';\nimport { LanguageConfigurationRegistry } from '../../common/modes/languageConfigurationRegistry.js';\n\nvar BlockCommentCommand =\n/** @class */\nfunction () {\n  function BlockCommentCommand(selection) {\n    this._selection = selection;\n    this._usedEndToken = null;\n  }\n\n  BlockCommentCommand._haystackHasNeedleAtOffset = function (haystack, needle, offset) {\n    if (offset < 0) {\n      return false;\n    }\n\n    var needleLength = needle.length;\n    var haystackLength = haystack.length;\n\n    if (offset + needleLength > haystackLength) {\n      return false;\n    }\n\n    for (var i = 0; i < needleLength; i++) {\n      var codeA = haystack.charCodeAt(offset + i);\n      var codeB = needle.charCodeAt(i);\n\n      if (codeA === codeB) {\n        continue;\n      }\n\n      if (codeA >= 65\n      /* A */\n      && codeA <= 90\n      /* Z */\n      && codeA + 32 === codeB) {\n        // codeA is upper-case variant of codeB\n        continue;\n      }\n\n      if (codeB >= 65\n      /* A */\n      && codeB <= 90\n      /* Z */\n      && codeB + 32 === codeA) {\n        // codeB is upper-case variant of codeA\n        continue;\n      }\n\n      return false;\n    }\n\n    return true;\n  };\n\n  BlockCommentCommand.prototype._createOperationsForBlockComment = function (selection, startToken, endToken, model, builder) {\n    var startLineNumber = selection.startLineNumber;\n    var startColumn = selection.startColumn;\n    var endLineNumber = selection.endLineNumber;\n    var endColumn = selection.endColumn;\n    var startLineText = model.getLineContent(startLineNumber);\n    var endLineText = model.getLineContent(endLineNumber);\n    var startTokenIndex = startLineText.lastIndexOf(startToken, startColumn - 1 + startToken.length);\n    var endTokenIndex = endLineText.indexOf(endToken, endColumn - 1 - endToken.length);\n\n    if (startTokenIndex !== -1 && endTokenIndex !== -1) {\n      if (startLineNumber === endLineNumber) {\n        var lineBetweenTokens = startLineText.substring(startTokenIndex + startToken.length, endTokenIndex);\n\n        if (lineBetweenTokens.indexOf(endToken) >= 0) {\n          // force to add a block comment\n          startTokenIndex = -1;\n          endTokenIndex = -1;\n        }\n      } else {\n        var startLineAfterStartToken = startLineText.substring(startTokenIndex + startToken.length);\n        var endLineBeforeEndToken = endLineText.substring(0, endTokenIndex);\n\n        if (startLineAfterStartToken.indexOf(endToken) >= 0 || endLineBeforeEndToken.indexOf(endToken) >= 0) {\n          // force to add a block comment\n          startTokenIndex = -1;\n          endTokenIndex = -1;\n        }\n      }\n    }\n\n    var ops;\n\n    if (startTokenIndex !== -1 && endTokenIndex !== -1) {\n      // Consider spaces as part of the comment tokens\n      if (startTokenIndex + startToken.length < startLineText.length) {\n        if (startLineText.charCodeAt(startTokenIndex + startToken.length) === 32\n        /* Space */\n        ) {\n            // Pretend the start token contains a trailing space\n            startToken = startToken + ' ';\n          }\n      }\n\n      if (endTokenIndex > 0) {\n        if (endLineText.charCodeAt(endTokenIndex - 1) === 32\n        /* Space */\n        ) {\n            // Pretend the end token contains a leading space\n            endToken = ' ' + endToken;\n            endTokenIndex -= 1;\n          }\n      }\n\n      ops = BlockCommentCommand._createRemoveBlockCommentOperations(new Range(startLineNumber, startTokenIndex + startToken.length + 1, endLineNumber, endTokenIndex + 1), startToken, endToken);\n    } else {\n      ops = BlockCommentCommand._createAddBlockCommentOperations(selection, startToken, endToken);\n      this._usedEndToken = ops.length === 1 ? endToken : null;\n    }\n\n    for (var _i = 0, ops_1 = ops; _i < ops_1.length; _i++) {\n      var op = ops_1[_i];\n      builder.addTrackedEditOperation(op.range, op.text);\n    }\n  };\n\n  BlockCommentCommand._createRemoveBlockCommentOperations = function (r, startToken, endToken) {\n    var res = [];\n\n    if (!Range.isEmpty(r)) {\n      // Remove block comment start\n      res.push(EditOperation.delete(new Range(r.startLineNumber, r.startColumn - startToken.length, r.startLineNumber, r.startColumn))); // Remove block comment end\n\n      res.push(EditOperation.delete(new Range(r.endLineNumber, r.endColumn, r.endLineNumber, r.endColumn + endToken.length)));\n    } else {\n      // Remove both continuously\n      res.push(EditOperation.delete(new Range(r.startLineNumber, r.startColumn - startToken.length, r.endLineNumber, r.endColumn + endToken.length)));\n    }\n\n    return res;\n  };\n\n  BlockCommentCommand._createAddBlockCommentOperations = function (r, startToken, endToken) {\n    var res = [];\n\n    if (!Range.isEmpty(r)) {\n      // Insert block comment start\n      res.push(EditOperation.insert(new Position(r.startLineNumber, r.startColumn), startToken + ' ')); // Insert block comment end\n\n      res.push(EditOperation.insert(new Position(r.endLineNumber, r.endColumn), ' ' + endToken));\n    } else {\n      // Insert both continuously\n      res.push(EditOperation.replace(new Range(r.startLineNumber, r.startColumn, r.endLineNumber, r.endColumn), startToken + '  ' + endToken));\n    }\n\n    return res;\n  };\n\n  BlockCommentCommand.prototype.getEditOperations = function (model, builder) {\n    var startLineNumber = this._selection.startLineNumber;\n    var startColumn = this._selection.startColumn;\n    model.tokenizeIfCheap(startLineNumber);\n    var languageId = model.getLanguageIdAtPosition(startLineNumber, startColumn);\n    var config = LanguageConfigurationRegistry.getComments(languageId);\n\n    if (!config || !config.blockCommentStartToken || !config.blockCommentEndToken) {\n      // Mode does not support block comments\n      return;\n    }\n\n    this._createOperationsForBlockComment(this._selection, config.blockCommentStartToken, config.blockCommentEndToken, model, builder);\n  };\n\n  BlockCommentCommand.prototype.computeCursorState = function (model, helper) {\n    var inverseEditOperations = helper.getInverseEditOperations();\n\n    if (inverseEditOperations.length === 2) {\n      var startTokenEditOperation = inverseEditOperations[0];\n      var endTokenEditOperation = inverseEditOperations[1];\n      return new Selection(startTokenEditOperation.range.endLineNumber, startTokenEditOperation.range.endColumn, endTokenEditOperation.range.startLineNumber, endTokenEditOperation.range.startColumn);\n    } else {\n      var srcRange = inverseEditOperations[0].range;\n      var deltaColumn = this._usedEndToken ? -this._usedEndToken.length - 1 : 0; // minus 1 space before endToken\n\n      return new Selection(srcRange.endLineNumber, srcRange.endColumn + deltaColumn, srcRange.endLineNumber, srcRange.endColumn + deltaColumn);\n    }\n  };\n\n  return BlockCommentCommand;\n}();\n\nexport { BlockCommentCommand };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as strings from '../../../base/common/strings.js';\nimport { EditOperation } from '../../common/core/editOperation.js';\nimport { Position } from '../../common/core/position.js';\nimport { Range } from '../../common/core/range.js';\nimport { Selection } from '../../common/core/selection.js';\nimport { LanguageConfigurationRegistry } from '../../common/modes/languageConfigurationRegistry.js';\nimport { BlockCommentCommand } from './blockCommentCommand.js';\n\nvar LineCommentCommand =\n/** @class */\nfunction () {\n  function LineCommentCommand(selection, tabSize, type) {\n    this._selection = selection;\n    this._tabSize = tabSize;\n    this._type = type;\n    this._deltaColumn = 0;\n  }\n  /**\n   * Do an initial pass over the lines and gather info about the line comment string.\n   * Returns null if any of the lines doesn't support a line comment string.\n   */\n\n\n  LineCommentCommand._gatherPreflightCommentStrings = function (model, startLineNumber, endLineNumber) {\n    model.tokenizeIfCheap(startLineNumber);\n    var languageId = model.getLanguageIdAtPosition(startLineNumber, 1);\n    var config = LanguageConfigurationRegistry.getComments(languageId);\n    var commentStr = config ? config.lineCommentToken : null;\n\n    if (!commentStr) {\n      // Mode does not support line comments\n      return null;\n    }\n\n    var lines = [];\n\n    for (var i = 0, lineCount = endLineNumber - startLineNumber + 1; i < lineCount; i++) {\n      lines[i] = {\n        ignore: false,\n        commentStr: commentStr,\n        commentStrOffset: 0,\n        commentStrLength: commentStr.length\n      };\n    }\n\n    return lines;\n  };\n  /**\n   * Analyze lines and decide which lines are relevant and what the toggle should do.\n   * Also, build up several offsets and lengths useful in the generation of editor operations.\n   */\n\n\n  LineCommentCommand._analyzeLines = function (type, model, lines, startLineNumber) {\n    var onlyWhitespaceLines = true;\n    var shouldRemoveComments;\n\n    if (type === 0\n    /* Toggle */\n    ) {\n        shouldRemoveComments = true;\n      } else if (type === 1\n    /* ForceAdd */\n    ) {\n        shouldRemoveComments = false;\n      } else {\n      shouldRemoveComments = true;\n    }\n\n    for (var i = 0, lineCount = lines.length; i < lineCount; i++) {\n      var lineData = lines[i];\n      var lineNumber = startLineNumber + i;\n      var lineContent = model.getLineContent(lineNumber);\n      var lineContentStartOffset = strings.firstNonWhitespaceIndex(lineContent);\n\n      if (lineContentStartOffset === -1) {\n        // Empty or whitespace only line\n        if (type === 0\n        /* Toggle */\n        ) {\n            lineData.ignore = true;\n          } else if (type === 1\n        /* ForceAdd */\n        ) {\n            lineData.ignore = true;\n          } else {\n          lineData.ignore = true;\n        }\n\n        lineData.commentStrOffset = lineContent.length;\n        continue;\n      }\n\n      onlyWhitespaceLines = false;\n      lineData.ignore = false;\n      lineData.commentStrOffset = lineContentStartOffset;\n\n      if (shouldRemoveComments && !BlockCommentCommand._haystackHasNeedleAtOffset(lineContent, lineData.commentStr, lineContentStartOffset)) {\n        if (type === 0\n        /* Toggle */\n        ) {\n            // Every line so far has been a line comment, but this one is not\n            shouldRemoveComments = false;\n          } else if (type === 1\n        /* ForceAdd */\n        ) {// Will not happen\n          } else {\n          lineData.ignore = true;\n        }\n      }\n\n      if (shouldRemoveComments) {\n        var commentStrEndOffset = lineContentStartOffset + lineData.commentStrLength;\n\n        if (commentStrEndOffset < lineContent.length && lineContent.charCodeAt(commentStrEndOffset) === 32\n        /* Space */\n        ) {\n            lineData.commentStrLength += 1;\n          }\n      }\n    }\n\n    if (type === 0\n    /* Toggle */\n    && onlyWhitespaceLines) {\n      // For only whitespace lines, we insert comments\n      shouldRemoveComments = false; // Also, no longer ignore them\n\n      for (var i = 0, lineCount = lines.length; i < lineCount; i++) {\n        lines[i].ignore = false;\n      }\n    }\n\n    return {\n      supported: true,\n      shouldRemoveComments: shouldRemoveComments,\n      lines: lines\n    };\n  };\n  /**\n   * Analyze all lines and decide exactly what to do => not supported | insert line comments | remove line comments\n   */\n\n\n  LineCommentCommand._gatherPreflightData = function (type, model, startLineNumber, endLineNumber) {\n    var lines = LineCommentCommand._gatherPreflightCommentStrings(model, startLineNumber, endLineNumber);\n\n    if (lines === null) {\n      return {\n        supported: false\n      };\n    }\n\n    return LineCommentCommand._analyzeLines(type, model, lines, startLineNumber);\n  };\n  /**\n   * Given a successful analysis, execute either insert line comments, either remove line comments\n   */\n\n\n  LineCommentCommand.prototype._executeLineComments = function (model, builder, data, s) {\n    var ops;\n\n    if (data.shouldRemoveComments) {\n      ops = LineCommentCommand._createRemoveLineCommentsOperations(data.lines, s.startLineNumber);\n    } else {\n      LineCommentCommand._normalizeInsertionPoint(model, data.lines, s.startLineNumber, this._tabSize);\n\n      ops = LineCommentCommand._createAddLineCommentsOperations(data.lines, s.startLineNumber);\n    }\n\n    var cursorPosition = new Position(s.positionLineNumber, s.positionColumn);\n\n    for (var i = 0, len = ops.length; i < len; i++) {\n      builder.addEditOperation(ops[i].range, ops[i].text);\n\n      if (ops[i].range.isEmpty() && ops[i].range.getStartPosition().equals(cursorPosition)) {\n        var lineContent = model.getLineContent(cursorPosition.lineNumber);\n\n        if (lineContent.length + 1 === cursorPosition.column) {\n          this._deltaColumn = (ops[i].text || '').length;\n        }\n      }\n    }\n\n    this._selectionId = builder.trackSelection(s);\n  };\n\n  LineCommentCommand.prototype._attemptRemoveBlockComment = function (model, s, startToken, endToken) {\n    var startLineNumber = s.startLineNumber;\n    var endLineNumber = s.endLineNumber;\n    var startTokenAllowedBeforeColumn = endToken.length + Math.max(model.getLineFirstNonWhitespaceColumn(s.startLineNumber), s.startColumn);\n    var startTokenIndex = model.getLineContent(startLineNumber).lastIndexOf(startToken, startTokenAllowedBeforeColumn - 1);\n    var endTokenIndex = model.getLineContent(endLineNumber).indexOf(endToken, s.endColumn - 1 - startToken.length);\n\n    if (startTokenIndex !== -1 && endTokenIndex === -1) {\n      endTokenIndex = model.getLineContent(startLineNumber).indexOf(endToken, startTokenIndex + startToken.length);\n      endLineNumber = startLineNumber;\n    }\n\n    if (startTokenIndex === -1 && endTokenIndex !== -1) {\n      startTokenIndex = model.getLineContent(endLineNumber).lastIndexOf(startToken, endTokenIndex);\n      startLineNumber = endLineNumber;\n    }\n\n    if (s.isEmpty() && (startTokenIndex === -1 || endTokenIndex === -1)) {\n      startTokenIndex = model.getLineContent(startLineNumber).indexOf(startToken);\n\n      if (startTokenIndex !== -1) {\n        endTokenIndex = model.getLineContent(startLineNumber).indexOf(endToken, startTokenIndex + startToken.length);\n      }\n    } // We have to adjust to possible inner white space.\n    // For Space after startToken, add Space to startToken - range math will work out.\n\n\n    if (startTokenIndex !== -1 && model.getLineContent(startLineNumber).charCodeAt(startTokenIndex + startToken.length) === 32\n    /* Space */\n    ) {\n        startToken += ' ';\n      } // For Space before endToken, add Space before endToken and shift index one left.\n\n\n    if (endTokenIndex !== -1 && model.getLineContent(endLineNumber).charCodeAt(endTokenIndex - 1) === 32\n    /* Space */\n    ) {\n        endToken = ' ' + endToken;\n        endTokenIndex -= 1;\n      }\n\n    if (startTokenIndex !== -1 && endTokenIndex !== -1) {\n      return BlockCommentCommand._createRemoveBlockCommentOperations(new Range(startLineNumber, startTokenIndex + startToken.length + 1, endLineNumber, endTokenIndex + 1), startToken, endToken);\n    }\n\n    return null;\n  };\n  /**\n   * Given an unsuccessful analysis, delegate to the block comment command\n   */\n\n\n  LineCommentCommand.prototype._executeBlockComment = function (model, builder, s) {\n    model.tokenizeIfCheap(s.startLineNumber);\n    var languageId = model.getLanguageIdAtPosition(s.startLineNumber, 1);\n    var config = LanguageConfigurationRegistry.getComments(languageId);\n\n    if (!config || !config.blockCommentStartToken || !config.blockCommentEndToken) {\n      // Mode does not support block comments\n      return;\n    }\n\n    var startToken = config.blockCommentStartToken;\n    var endToken = config.blockCommentEndToken;\n\n    var ops = this._attemptRemoveBlockComment(model, s, startToken, endToken);\n\n    if (!ops) {\n      if (s.isEmpty()) {\n        var lineContent = model.getLineContent(s.startLineNumber);\n        var firstNonWhitespaceIndex = strings.firstNonWhitespaceIndex(lineContent);\n\n        if (firstNonWhitespaceIndex === -1) {\n          // Line is empty or contains only whitespace\n          firstNonWhitespaceIndex = lineContent.length;\n        }\n\n        ops = BlockCommentCommand._createAddBlockCommentOperations(new Range(s.startLineNumber, firstNonWhitespaceIndex + 1, s.startLineNumber, lineContent.length + 1), startToken, endToken);\n      } else {\n        ops = BlockCommentCommand._createAddBlockCommentOperations(new Range(s.startLineNumber, model.getLineFirstNonWhitespaceColumn(s.startLineNumber), s.endLineNumber, model.getLineMaxColumn(s.endLineNumber)), startToken, endToken);\n      }\n\n      if (ops.length === 1) {\n        // Leave cursor after token and Space\n        this._deltaColumn = startToken.length + 1;\n      }\n    }\n\n    this._selectionId = builder.trackSelection(s);\n\n    for (var _i = 0, ops_1 = ops; _i < ops_1.length; _i++) {\n      var op = ops_1[_i];\n      builder.addEditOperation(op.range, op.text);\n    }\n  };\n\n  LineCommentCommand.prototype.getEditOperations = function (model, builder) {\n    var s = this._selection;\n    this._moveEndPositionDown = false;\n\n    if (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\n      this._moveEndPositionDown = true;\n      s = s.setEndPosition(s.endLineNumber - 1, model.getLineMaxColumn(s.endLineNumber - 1));\n    }\n\n    var data = LineCommentCommand._gatherPreflightData(this._type, model, s.startLineNumber, s.endLineNumber);\n\n    if (data.supported) {\n      return this._executeLineComments(model, builder, data, s);\n    }\n\n    return this._executeBlockComment(model, builder, s);\n  };\n\n  LineCommentCommand.prototype.computeCursorState = function (model, helper) {\n    var result = helper.getTrackedSelection(this._selectionId);\n\n    if (this._moveEndPositionDown) {\n      result = result.setEndPosition(result.endLineNumber + 1, 1);\n    }\n\n    return new Selection(result.selectionStartLineNumber, result.selectionStartColumn + this._deltaColumn, result.positionLineNumber, result.positionColumn + this._deltaColumn);\n  };\n  /**\n   * Generate edit operations in the remove line comment case\n   */\n\n\n  LineCommentCommand._createRemoveLineCommentsOperations = function (lines, startLineNumber) {\n    var res = [];\n\n    for (var i = 0, len = lines.length; i < len; i++) {\n      var lineData = lines[i];\n\n      if (lineData.ignore) {\n        continue;\n      }\n\n      res.push(EditOperation.delete(new Range(startLineNumber + i, lineData.commentStrOffset + 1, startLineNumber + i, lineData.commentStrOffset + lineData.commentStrLength + 1)));\n    }\n\n    return res;\n  };\n  /**\n   * Generate edit operations in the add line comment case\n   */\n\n\n  LineCommentCommand._createAddLineCommentsOperations = function (lines, startLineNumber) {\n    var res = [];\n\n    for (var i = 0, len = lines.length; i < len; i++) {\n      var lineData = lines[i];\n\n      if (lineData.ignore) {\n        continue;\n      }\n\n      res.push(EditOperation.insert(new Position(startLineNumber + i, lineData.commentStrOffset + 1), lineData.commentStr + ' '));\n    }\n\n    return res;\n  }; // TODO@Alex -> duplicated in characterHardWrappingLineMapper\n\n\n  LineCommentCommand.nextVisibleColumn = function (currentVisibleColumn, tabSize, isTab, columnSize) {\n    if (isTab) {\n      return currentVisibleColumn + (tabSize - currentVisibleColumn % tabSize);\n    }\n\n    return currentVisibleColumn + columnSize;\n  };\n  /**\n   * Adjust insertion points to have them vertically aligned in the add line comment case\n   */\n\n\n  LineCommentCommand._normalizeInsertionPoint = function (model, lines, startLineNumber, tabSize) {\n    var minVisibleColumn = Number.MAX_VALUE;\n    var j;\n    var lenJ;\n\n    for (var i = 0, len = lines.length; i < len; i++) {\n      if (lines[i].ignore) {\n        continue;\n      }\n\n      var lineContent = model.getLineContent(startLineNumber + i);\n      var currentVisibleColumn = 0;\n\n      for (var j_1 = 0, lenJ_1 = lines[i].commentStrOffset; currentVisibleColumn < minVisibleColumn && j_1 < lenJ_1; j_1++) {\n        currentVisibleColumn = LineCommentCommand.nextVisibleColumn(currentVisibleColumn, tabSize, lineContent.charCodeAt(j_1) === 9\n        /* Tab */\n        , 1);\n      }\n\n      if (currentVisibleColumn < minVisibleColumn) {\n        minVisibleColumn = currentVisibleColumn;\n      }\n    }\n\n    minVisibleColumn = Math.floor(minVisibleColumn / tabSize) * tabSize;\n\n    for (var i = 0, len = lines.length; i < len; i++) {\n      if (lines[i].ignore) {\n        continue;\n      }\n\n      var lineContent = model.getLineContent(startLineNumber + i);\n      var currentVisibleColumn = 0;\n\n      for (j = 0, lenJ = lines[i].commentStrOffset; currentVisibleColumn < minVisibleColumn && j < lenJ; j++) {\n        currentVisibleColumn = LineCommentCommand.nextVisibleColumn(currentVisibleColumn, tabSize, lineContent.charCodeAt(j) === 9\n        /* Tab */\n        , 1);\n      }\n\n      if (currentVisibleColumn > minVisibleColumn) {\n        lines[i].commentStrOffset = j - 1;\n      } else {\n        lines[i].commentStrOffset = j;\n      }\n    }\n  };\n\n  return LineCommentCommand;\n}();\n\nexport { LineCommentCommand };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport * as nls from '../../../nls.js';\nimport { KeyChord } from '../../../base/common/keyCodes.js';\nimport { EditorAction, registerEditorAction } from '../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport { BlockCommentCommand } from './blockCommentCommand.js';\nimport { LineCommentCommand } from './lineCommentCommand.js';\n\nvar CommentLineAction =\n/** @class */\nfunction (_super) {\n  __extends(CommentLineAction, _super);\n\n  function CommentLineAction(type, opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this._type = type;\n    return _this;\n  }\n\n  CommentLineAction.prototype.run = function (accessor, editor) {\n    if (!editor.hasModel()) {\n      return;\n    }\n\n    var model = editor.getModel();\n    var commands = [];\n    var selections = editor.getSelections();\n    var opts = model.getOptions();\n\n    for (var _i = 0, selections_1 = selections; _i < selections_1.length; _i++) {\n      var selection = selections_1[_i];\n      commands.push(new LineCommentCommand(selection, opts.tabSize, this._type));\n    }\n\n    editor.pushUndoStop();\n    editor.executeCommands(this.id, commands);\n    editor.pushUndoStop();\n  };\n\n  return CommentLineAction;\n}(EditorAction);\n\nvar ToggleCommentLineAction =\n/** @class */\nfunction (_super) {\n  __extends(ToggleCommentLineAction, _super);\n\n  function ToggleCommentLineAction() {\n    return _super.call(this, 0\n    /* Toggle */\n    , {\n      id: 'editor.action.commentLine',\n      label: nls.localize('comment.line', \"Toggle Line Comment\"),\n      alias: 'Toggle Line Comment',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048\n        /* CtrlCmd */\n        | 85\n        /* US_SLASH */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      },\n      menubarOpts: {\n        menuId: 14\n        /* MenubarEditMenu */\n        ,\n        group: '5_insert',\n        title: nls.localize({\n          key: 'miToggleLineComment',\n          comment: ['&& denotes a mnemonic']\n        }, \"&&Toggle Line Comment\"),\n        order: 1\n      }\n    }) || this;\n  }\n\n  return ToggleCommentLineAction;\n}(CommentLineAction);\n\nvar AddLineCommentAction =\n/** @class */\nfunction (_super) {\n  __extends(AddLineCommentAction, _super);\n\n  function AddLineCommentAction() {\n    return _super.call(this, 1\n    /* ForceAdd */\n    , {\n      id: 'editor.action.addCommentLine',\n      label: nls.localize('comment.line.add', \"Add Line Comment\"),\n      alias: 'Add Line Comment',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: KeyChord(2048\n        /* CtrlCmd */\n        | 41\n        /* KEY_K */\n        , 2048\n        /* CtrlCmd */\n        | 33\n        /* KEY_C */\n        ),\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  return AddLineCommentAction;\n}(CommentLineAction);\n\nvar RemoveLineCommentAction =\n/** @class */\nfunction (_super) {\n  __extends(RemoveLineCommentAction, _super);\n\n  function RemoveLineCommentAction() {\n    return _super.call(this, 2\n    /* ForceRemove */\n    , {\n      id: 'editor.action.removeCommentLine',\n      label: nls.localize('comment.line.remove', \"Remove Line Comment\"),\n      alias: 'Remove Line Comment',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: KeyChord(2048\n        /* CtrlCmd */\n        | 41\n        /* KEY_K */\n        , 2048\n        /* CtrlCmd */\n        | 51\n        /* KEY_U */\n        ),\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  return RemoveLineCommentAction;\n}(CommentLineAction);\n\nvar BlockCommentAction =\n/** @class */\nfunction (_super) {\n  __extends(BlockCommentAction, _super);\n\n  function BlockCommentAction() {\n    return _super.call(this, {\n      id: 'editor.action.blockComment',\n      label: nls.localize('comment.block', \"Toggle Block Comment\"),\n      alias: 'Toggle Block Comment',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 1024\n        /* Shift */\n        | 512\n        /* Alt */\n        | 31\n        /* KEY_A */\n        ,\n        linux: {\n          primary: 2048\n          /* CtrlCmd */\n          | 1024\n          /* Shift */\n          | 31\n          /* KEY_A */\n\n        },\n        weight: 100\n        /* EditorContrib */\n\n      },\n      menubarOpts: {\n        menuId: 14\n        /* MenubarEditMenu */\n        ,\n        group: '5_insert',\n        title: nls.localize({\n          key: 'miToggleBlockComment',\n          comment: ['&& denotes a mnemonic']\n        }, \"Toggle &&Block Comment\"),\n        order: 2\n      }\n    }) || this;\n  }\n\n  BlockCommentAction.prototype.run = function (accessor, editor) {\n    if (!editor.hasModel()) {\n      return;\n    }\n\n    var commands = [];\n    var selections = editor.getSelections();\n\n    for (var _i = 0, selections_2 = selections; _i < selections_2.length; _i++) {\n      var selection = selections_2[_i];\n      commands.push(new BlockCommentCommand(selection));\n    }\n\n    editor.pushUndoStop();\n    editor.executeCommands(this.id, commands);\n    editor.pushUndoStop();\n  };\n\n  return BlockCommentAction;\n}(EditorAction);\n\nregisterEditorAction(ToggleCommentLineAction);\nregisterEditorAction(AddLineCommentAction);\nregisterEditorAction(RemoveLineCommentAction);\nregisterEditorAction(BlockCommentAction);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport * as nls from '../../../nls.js';\nimport * as dom from '../../../base/browser/dom.js';\nimport { ActionItem, Separator } from '../../../base/browser/ui/actionbar/actionbar.js';\nimport { dispose } from '../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport { IMenuService } from '../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService, IContextViewService } from '../../../platform/contextview/browser/contextView.js';\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\n\nvar ContextMenuController =\n/** @class */\nfunction () {\n  function ContextMenuController(editor, _contextMenuService, _contextViewService, _contextKeyService, _keybindingService, _menuService) {\n    var _this = this;\n\n    this._contextMenuService = _contextMenuService;\n    this._contextViewService = _contextViewService;\n    this._contextKeyService = _contextKeyService;\n    this._keybindingService = _keybindingService;\n    this._menuService = _menuService;\n    this._toDispose = [];\n    this._contextMenuIsBeingShownCount = 0;\n    this._editor = editor;\n\n    this._toDispose.push(this._editor.onContextMenu(function (e) {\n      return _this._onContextMenu(e);\n    }));\n\n    this._toDispose.push(this._editor.onMouseWheel(function (e) {\n      if (_this._contextMenuIsBeingShownCount > 0) {\n        _this._contextViewService.hideContextView();\n      }\n    }));\n\n    this._toDispose.push(this._editor.onKeyDown(function (e) {\n      if (e.keyCode === 58\n      /* ContextMenu */\n      ) {\n          // Chrome is funny like that\n          e.preventDefault();\n          e.stopPropagation();\n\n          _this.showContextMenu();\n        }\n    }));\n  }\n\n  ContextMenuController.get = function (editor) {\n    return editor.getContribution(ContextMenuController.ID);\n  };\n\n  ContextMenuController.prototype._onContextMenu = function (e) {\n    if (!this._editor.hasModel()) {\n      return;\n    }\n\n    if (!this._editor.getConfiguration().contribInfo.contextmenu) {\n      this._editor.focus(); // Ensure the cursor is at the position of the mouse click\n\n\n      if (e.target.position && !this._editor.getSelection().containsPosition(e.target.position)) {\n        this._editor.setPosition(e.target.position);\n      }\n\n      return; // Context menu is turned off through configuration\n    }\n\n    if (e.target.type === 12\n    /* OVERLAY_WIDGET */\n    ) {\n        return; // allow native menu on widgets to support right click on input field for example in find\n      }\n\n    e.event.preventDefault();\n\n    if (e.target.type !== 6\n    /* CONTENT_TEXT */\n    && e.target.type !== 7\n    /* CONTENT_EMPTY */\n    && e.target.type !== 1\n    /* TEXTAREA */\n    ) {\n        return; // only support mouse click into text or native context menu key for now\n      } // Ensure the editor gets focus if it hasn't, so the right events are being sent to other contributions\n\n\n    this._editor.focus(); // Ensure the cursor is at the position of the mouse click\n\n\n    if (e.target.position && !this._editor.getSelection().containsPosition(e.target.position)) {\n      this._editor.setPosition(e.target.position);\n    } // Unless the user triggerd the context menu through Shift+F10, use the mouse position as menu position\n\n\n    var anchor = null;\n\n    if (e.target.type !== 1\n    /* TEXTAREA */\n    ) {\n        anchor = {\n          x: e.event.posx - 1,\n          width: 2,\n          y: e.event.posy - 1,\n          height: 2\n        };\n      } // Show the context menu\n\n\n    this.showContextMenu(anchor);\n  };\n\n  ContextMenuController.prototype.showContextMenu = function (anchor) {\n    if (!this._editor.getConfiguration().contribInfo.contextmenu) {\n      return; // Context menu is turned off through configuration\n    }\n\n    if (!this._editor.hasModel()) {\n      return;\n    }\n\n    if (!this._contextMenuService) {\n      this._editor.focus();\n\n      return; // We need the context menu service to function\n    } // Find actions available for menu\n\n\n    var menuActions = this._getMenuActions(this._editor.getModel()); // Show menu if we have actions to show\n\n\n    if (menuActions.length > 0) {\n      this._doShowContextMenu(menuActions, anchor);\n    }\n  };\n\n  ContextMenuController.prototype._getMenuActions = function (model) {\n    var result = [];\n\n    var contextMenu = this._menuService.createMenu(7\n    /* EditorContext */\n    , this._contextKeyService);\n\n    var groups = contextMenu.getActions({\n      arg: model.uri\n    });\n    contextMenu.dispose();\n\n    for (var _i = 0, groups_1 = groups; _i < groups_1.length; _i++) {\n      var group = groups_1[_i];\n      var actions = group[1];\n      result.push.apply(result, actions);\n      result.push(new Separator());\n    }\n\n    result.pop(); // remove last separator\n\n    return result;\n  };\n\n  ContextMenuController.prototype._doShowContextMenu = function (actions, anchor) {\n    var _this = this;\n\n    if (anchor === void 0) {\n      anchor = null;\n    }\n\n    if (!this._editor.hasModel()) {\n      return;\n    } // Disable hover\n\n\n    var oldHoverSetting = this._editor.getConfiguration().contribInfo.hover;\n\n    this._editor.updateOptions({\n      hover: {\n        enabled: false\n      }\n    });\n\n    if (!anchor) {\n      // Ensure selection is visible\n      this._editor.revealPosition(this._editor.getPosition(), 1\n      /* Immediate */\n      );\n\n      this._editor.render();\n\n      var cursorCoords = this._editor.getScrolledVisiblePosition(this._editor.getPosition()); // Translate to absolute editor position\n\n\n      var editorCoords = dom.getDomNodePagePosition(this._editor.getDomNode());\n      var posx = editorCoords.left + cursorCoords.left;\n      var posy = editorCoords.top + cursorCoords.top + cursorCoords.height;\n      anchor = {\n        x: posx,\n        y: posy\n      };\n    } // Show menu\n\n\n    this._contextMenuIsBeingShownCount++;\n\n    this._contextMenuService.showContextMenu({\n      getAnchor: function getAnchor() {\n        return anchor;\n      },\n      getActions: function getActions() {\n        return actions;\n      },\n      getActionItem: function getActionItem(action) {\n        var keybinding = _this._keybindingFor(action);\n\n        if (keybinding) {\n          return new ActionItem(action, action, {\n            label: true,\n            keybinding: keybinding.getLabel(),\n            isMenu: true\n          });\n        }\n\n        var customActionItem = action;\n\n        if (typeof customActionItem.getActionItem === 'function') {\n          return customActionItem.getActionItem();\n        }\n\n        return new ActionItem(action, action, {\n          icon: true,\n          label: true,\n          isMenu: true\n        });\n      },\n      getKeyBinding: function getKeyBinding(action) {\n        return _this._keybindingFor(action);\n      },\n      onHide: function onHide(wasCancelled) {\n        _this._contextMenuIsBeingShownCount--;\n\n        _this._editor.focus();\n\n        _this._editor.updateOptions({\n          hover: oldHoverSetting\n        });\n      }\n    });\n  };\n\n  ContextMenuController.prototype._keybindingFor = function (action) {\n    return this._keybindingService.lookupKeybinding(action.id);\n  };\n\n  ContextMenuController.prototype.getId = function () {\n    return ContextMenuController.ID;\n  };\n\n  ContextMenuController.prototype.dispose = function () {\n    if (this._contextMenuIsBeingShownCount > 0) {\n      this._contextViewService.hideContextView();\n    }\n\n    this._toDispose = dispose(this._toDispose);\n  };\n\n  ContextMenuController.ID = 'editor.contrib.contextmenu';\n  ContextMenuController = __decorate([__param(1, IContextMenuService), __param(2, IContextViewService), __param(3, IContextKeyService), __param(4, IKeybindingService), __param(5, IMenuService)], ContextMenuController);\n  return ContextMenuController;\n}();\n\nexport { ContextMenuController };\n\nvar ShowContextMenu =\n/** @class */\nfunction (_super) {\n  __extends(ShowContextMenu, _super);\n\n  function ShowContextMenu() {\n    return _super.call(this, {\n      id: 'editor.action.showContextMenu',\n      label: nls.localize('action.showContextMenu.label', \"Show Editor Context Menu\"),\n      alias: 'Show Editor Context Menu',\n      precondition: null,\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 1024\n        /* Shift */\n        | 68\n        /* F10 */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  ShowContextMenu.prototype.run = function (accessor, editor) {\n    var contribution = ContextMenuController.get(editor);\n    contribution.showContextMenu();\n  };\n\n  return ShowContextMenu;\n}(EditorAction);\n\nregisterEditorContribution(ContextMenuController);\nregisterEditorAction(ShowContextMenu);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport * as nls from '../../../nls.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\n\nvar CursorState =\n/** @class */\nfunction () {\n  function CursorState(selections) {\n    this.selections = selections;\n  }\n\n  CursorState.prototype.equals = function (other) {\n    var thisLen = this.selections.length;\n    var otherLen = other.selections.length;\n\n    if (thisLen !== otherLen) {\n      return false;\n    }\n\n    for (var i = 0; i < thisLen; i++) {\n      if (!this.selections[i].equalsSelection(other.selections[i])) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  return CursorState;\n}();\n\nvar CursorUndoController =\n/** @class */\nfunction (_super) {\n  __extends(CursorUndoController, _super);\n\n  function CursorUndoController(editor) {\n    var _this = _super.call(this) || this;\n\n    _this._editor = editor;\n    _this._isCursorUndo = false;\n    _this._undoStack = [];\n    _this._prevState = _this._readState();\n\n    _this._register(editor.onDidChangeModel(function (e) {\n      _this._undoStack = [];\n      _this._prevState = null;\n    }));\n\n    _this._register(editor.onDidChangeModelContent(function (e) {\n      _this._undoStack = [];\n      _this._prevState = null;\n    }));\n\n    _this._register(editor.onDidChangeCursorSelection(function (e) {\n      if (!_this._isCursorUndo && _this._prevState) {\n        _this._undoStack.push(_this._prevState);\n\n        if (_this._undoStack.length > 50) {\n          // keep the cursor undo stack bounded\n          _this._undoStack.shift();\n        }\n      }\n\n      _this._prevState = _this._readState();\n    }));\n\n    return _this;\n  }\n\n  CursorUndoController.get = function (editor) {\n    return editor.getContribution(CursorUndoController.ID);\n  };\n\n  CursorUndoController.prototype._readState = function () {\n    if (!this._editor.hasModel()) {\n      // no model => no state\n      return null;\n    }\n\n    return new CursorState(this._editor.getSelections());\n  };\n\n  CursorUndoController.prototype.getId = function () {\n    return CursorUndoController.ID;\n  };\n\n  CursorUndoController.prototype.cursorUndo = function () {\n    if (!this._editor.hasModel()) {\n      return;\n    }\n\n    var currState = new CursorState(this._editor.getSelections());\n\n    while (this._undoStack.length > 0) {\n      var prevState = this._undoStack.pop();\n\n      if (!prevState.equals(currState)) {\n        this._isCursorUndo = true;\n\n        this._editor.setSelections(prevState.selections);\n\n        this._editor.revealRangeInCenterIfOutsideViewport(prevState.selections[0], 0\n        /* Smooth */\n        );\n\n        this._isCursorUndo = false;\n        return;\n      }\n    }\n  };\n\n  CursorUndoController.ID = 'editor.contrib.cursorUndoController';\n  return CursorUndoController;\n}(Disposable);\n\nexport { CursorUndoController };\n\nvar CursorUndo =\n/** @class */\nfunction (_super) {\n  __extends(CursorUndo, _super);\n\n  function CursorUndo() {\n    return _super.call(this, {\n      id: 'cursorUndo',\n      label: nls.localize('cursor.undo', \"Soft Undo\"),\n      alias: 'Soft Undo',\n      precondition: null,\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048\n        /* CtrlCmd */\n        | 51\n        /* KEY_U */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  CursorUndo.prototype.run = function (accessor, editor, args) {\n    CursorUndoController.get(editor).cursorUndo();\n  };\n\n  return CursorUndo;\n}(EditorAction);\n\nexport { CursorUndo };\nregisterEditorContribution(CursorUndoController);\nregisterEditorAction(CursorUndo);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Selection } from '../../common/core/selection.js';\nimport { Range } from '../../common/core/range.js';\n\nvar DragAndDropCommand =\n/** @class */\nfunction () {\n  function DragAndDropCommand(selection, targetPosition, copy) {\n    this.selection = selection;\n    this.targetPosition = targetPosition;\n    this.copy = copy;\n  }\n\n  DragAndDropCommand.prototype.getEditOperations = function (model, builder) {\n    var text = model.getValueInRange(this.selection);\n\n    if (!this.copy) {\n      builder.addEditOperation(this.selection, null);\n    }\n\n    builder.addEditOperation(new Range(this.targetPosition.lineNumber, this.targetPosition.column, this.targetPosition.lineNumber, this.targetPosition.column), text);\n\n    if (this.selection.containsPosition(this.targetPosition) && !(this.copy && (this.selection.getEndPosition().equals(this.targetPosition) || this.selection.getStartPosition().equals(this.targetPosition)) // we allow users to paste content beside the selection\n    )) {\n      this.targetSelection = this.selection;\n      return;\n    }\n\n    if (this.copy) {\n      this.targetSelection = new Selection(this.targetPosition.lineNumber, this.targetPosition.column, this.selection.endLineNumber - this.selection.startLineNumber + this.targetPosition.lineNumber, this.selection.startLineNumber === this.selection.endLineNumber ? this.targetPosition.column + this.selection.endColumn - this.selection.startColumn : this.selection.endColumn);\n      return;\n    }\n\n    if (this.targetPosition.lineNumber > this.selection.endLineNumber) {\n      // Drag the selection downwards\n      this.targetSelection = new Selection(this.targetPosition.lineNumber - this.selection.endLineNumber + this.selection.startLineNumber, this.targetPosition.column, this.targetPosition.lineNumber, this.selection.startLineNumber === this.selection.endLineNumber ? this.targetPosition.column + this.selection.endColumn - this.selection.startColumn : this.selection.endColumn);\n      return;\n    }\n\n    if (this.targetPosition.lineNumber < this.selection.endLineNumber) {\n      // Drag the selection upwards\n      this.targetSelection = new Selection(this.targetPosition.lineNumber, this.targetPosition.column, this.targetPosition.lineNumber + this.selection.endLineNumber - this.selection.startLineNumber, this.selection.startLineNumber === this.selection.endLineNumber ? this.targetPosition.column + this.selection.endColumn - this.selection.startColumn : this.selection.endColumn);\n      return;\n    } // The target position is at the same line as the selection's end position.\n\n\n    if (this.selection.endColumn <= this.targetPosition.column) {\n      // The target position is after the selection's end position\n      this.targetSelection = new Selection(this.targetPosition.lineNumber - this.selection.endLineNumber + this.selection.startLineNumber, this.selection.startLineNumber === this.selection.endLineNumber ? this.targetPosition.column - this.selection.endColumn + this.selection.startColumn : this.targetPosition.column - this.selection.endColumn + this.selection.startColumn, this.targetPosition.lineNumber, this.selection.startLineNumber === this.selection.endLineNumber ? this.targetPosition.column : this.selection.endColumn);\n    } else {\n      // The target position is before the selection's end postion. Since the selection doesn't contain the target position, the selection is one-line and target position is before this selection.\n      this.targetSelection = new Selection(this.targetPosition.lineNumber - this.selection.endLineNumber + this.selection.startLineNumber, this.targetPosition.column, this.targetPosition.lineNumber, this.targetPosition.column + this.selection.endColumn - this.selection.startColumn);\n    }\n  };\n\n  DragAndDropCommand.prototype.computeCursorState = function (model, helper) {\n    return this.targetSelection;\n  };\n\n  return DragAndDropCommand;\n}();\n\nexport { DragAndDropCommand };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './dnd.css';\nimport { dispose } from '../../../base/common/lifecycle.js';\nimport { isMacintosh } from '../../../base/common/platform.js';\nimport { registerEditorContribution } from '../../browser/editorExtensions.js';\nimport { Position } from '../../common/core/position.js';\nimport { Range } from '../../common/core/range.js';\nimport { Selection } from '../../common/core/selection.js';\nimport { DragAndDropCommand } from './dragAndDropCommand.js';\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\n\nfunction hasTriggerModifier(e) {\n  if (isMacintosh) {\n    return e.altKey;\n  } else {\n    return e.ctrlKey;\n  }\n}\n\nvar DragAndDropController =\n/** @class */\nfunction () {\n  function DragAndDropController(editor) {\n    var _this = this;\n\n    this._editor = editor;\n    this._toUnhook = [];\n\n    this._toUnhook.push(this._editor.onMouseDown(function (e) {\n      return _this._onEditorMouseDown(e);\n    }));\n\n    this._toUnhook.push(this._editor.onMouseUp(function (e) {\n      return _this._onEditorMouseUp(e);\n    }));\n\n    this._toUnhook.push(this._editor.onMouseDrag(function (e) {\n      return _this._onEditorMouseDrag(e);\n    }));\n\n    this._toUnhook.push(this._editor.onMouseDrop(function (e) {\n      return _this._onEditorMouseDrop(e);\n    }));\n\n    this._toUnhook.push(this._editor.onKeyDown(function (e) {\n      return _this.onEditorKeyDown(e);\n    }));\n\n    this._toUnhook.push(this._editor.onKeyUp(function (e) {\n      return _this.onEditorKeyUp(e);\n    }));\n\n    this._toUnhook.push(this._editor.onDidBlurEditorWidget(function () {\n      return _this.onEditorBlur();\n    }));\n\n    this._dndDecorationIds = [];\n    this._mouseDown = false;\n    this._modifierPressed = false;\n    this._dragSelection = null;\n  }\n\n  DragAndDropController.prototype.onEditorBlur = function () {\n    this._removeDecoration();\n\n    this._dragSelection = null;\n    this._mouseDown = false;\n    this._modifierPressed = false;\n  };\n\n  DragAndDropController.prototype.onEditorKeyDown = function (e) {\n    if (!this._editor.getConfiguration().dragAndDrop) {\n      return;\n    }\n\n    if (hasTriggerModifier(e)) {\n      this._modifierPressed = true;\n    }\n\n    if (this._mouseDown && hasTriggerModifier(e)) {\n      this._editor.updateOptions({\n        mouseStyle: 'copy'\n      });\n    }\n  };\n\n  DragAndDropController.prototype.onEditorKeyUp = function (e) {\n    if (!this._editor.getConfiguration().dragAndDrop) {\n      return;\n    }\n\n    if (hasTriggerModifier(e)) {\n      this._modifierPressed = false;\n    }\n\n    if (this._mouseDown && e.keyCode === DragAndDropController.TRIGGER_KEY_VALUE) {\n      this._editor.updateOptions({\n        mouseStyle: 'default'\n      });\n    }\n  };\n\n  DragAndDropController.prototype._onEditorMouseDown = function (mouseEvent) {\n    this._mouseDown = true;\n  };\n\n  DragAndDropController.prototype._onEditorMouseUp = function (mouseEvent) {\n    this._mouseDown = false; // Whenever users release the mouse, the drag and drop operation should finish and the cursor should revert to text.\n\n    this._editor.updateOptions({\n      mouseStyle: 'text'\n    });\n  };\n\n  DragAndDropController.prototype._onEditorMouseDrag = function (mouseEvent) {\n    var target = mouseEvent.target;\n\n    if (this._dragSelection === null) {\n      var selections = this._editor.getSelections() || [];\n      var possibleSelections = selections.filter(function (selection) {\n        return target.position && selection.containsPosition(target.position);\n      });\n\n      if (possibleSelections.length === 1) {\n        this._dragSelection = possibleSelections[0];\n      } else {\n        return;\n      }\n    }\n\n    if (hasTriggerModifier(mouseEvent.event)) {\n      this._editor.updateOptions({\n        mouseStyle: 'copy'\n      });\n    } else {\n      this._editor.updateOptions({\n        mouseStyle: 'default'\n      });\n    }\n\n    if (target.position) {\n      if (this._dragSelection.containsPosition(target.position)) {\n        this._removeDecoration();\n      } else {\n        this.showAt(target.position);\n      }\n    }\n  };\n\n  DragAndDropController.prototype._onEditorMouseDrop = function (mouseEvent) {\n    if (mouseEvent.target && (this._hitContent(mouseEvent.target) || this._hitMargin(mouseEvent.target)) && mouseEvent.target.position) {\n      var newCursorPosition_1 = new Position(mouseEvent.target.position.lineNumber, mouseEvent.target.position.column);\n\n      if (this._dragSelection === null) {\n        var newSelections = null;\n\n        if (mouseEvent.event.shiftKey) {\n          var primarySelection = this._editor.getSelection();\n\n          if (primarySelection) {\n            var selectionStartLineNumber = primarySelection.selectionStartLineNumber,\n                selectionStartColumn = primarySelection.selectionStartColumn;\n            newSelections = [new Selection(selectionStartLineNumber, selectionStartColumn, newCursorPosition_1.lineNumber, newCursorPosition_1.column)];\n          }\n        } else {\n          newSelections = (this._editor.getSelections() || []).map(function (selection) {\n            if (selection.containsPosition(newCursorPosition_1)) {\n              return new Selection(newCursorPosition_1.lineNumber, newCursorPosition_1.column, newCursorPosition_1.lineNumber, newCursorPosition_1.column);\n            } else {\n              return selection;\n            }\n          });\n        } // Use `mouse` as the source instead of `api`.\n\n\n        this._editor.setSelections(newSelections || [], 'mouse');\n      } else if (!this._dragSelection.containsPosition(newCursorPosition_1) || (hasTriggerModifier(mouseEvent.event) || this._modifierPressed) && (this._dragSelection.getEndPosition().equals(newCursorPosition_1) || this._dragSelection.getStartPosition().equals(newCursorPosition_1)) // we allow users to paste content beside the selection\n      ) {\n        this._editor.pushUndoStop();\n\n        this._editor.executeCommand(DragAndDropController.ID, new DragAndDropCommand(this._dragSelection, newCursorPosition_1, hasTriggerModifier(mouseEvent.event) || this._modifierPressed));\n\n        this._editor.pushUndoStop();\n      }\n    }\n\n    this._editor.updateOptions({\n      mouseStyle: 'text'\n    });\n\n    this._removeDecoration();\n\n    this._dragSelection = null;\n    this._mouseDown = false;\n  };\n\n  DragAndDropController.prototype.showAt = function (position) {\n    var newDecorations = [{\n      range: new Range(position.lineNumber, position.column, position.lineNumber, position.column),\n      options: DragAndDropController._DECORATION_OPTIONS\n    }];\n    this._dndDecorationIds = this._editor.deltaDecorations(this._dndDecorationIds, newDecorations);\n\n    this._editor.revealPosition(position, 1\n    /* Immediate */\n    );\n  };\n\n  DragAndDropController.prototype._removeDecoration = function () {\n    this._dndDecorationIds = this._editor.deltaDecorations(this._dndDecorationIds, []);\n  };\n\n  DragAndDropController.prototype._hitContent = function (target) {\n    return target.type === 6\n    /* CONTENT_TEXT */\n    || target.type === 7\n    /* CONTENT_EMPTY */\n    ;\n  };\n\n  DragAndDropController.prototype._hitMargin = function (target) {\n    return target.type === 2\n    /* GUTTER_GLYPH_MARGIN */\n    || target.type === 3\n    /* GUTTER_LINE_NUMBERS */\n    || target.type === 4\n    /* GUTTER_LINE_DECORATIONS */\n    ;\n  };\n\n  DragAndDropController.prototype.getId = function () {\n    return DragAndDropController.ID;\n  };\n\n  DragAndDropController.prototype.dispose = function () {\n    this._removeDecoration();\n\n    this._dragSelection = null;\n    this._mouseDown = false;\n    this._modifierPressed = false;\n    this._toUnhook = dispose(this._toUnhook);\n  };\n\n  DragAndDropController.ID = 'editor.contrib.dragAndDrop';\n  DragAndDropController.TRIGGER_KEY_VALUE = isMacintosh ? 6\n  /* Alt */\n  : 5\n  /* Ctrl */\n  ;\n  DragAndDropController._DECORATION_OPTIONS = ModelDecorationOptions.register({\n    className: 'dnd-target'\n  });\n  return DragAndDropController;\n}();\n\nexport { DragAndDropController };\nregisterEditorContribution(DragAndDropController);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../common/core/range.js';\nimport { OverviewRulerLane } from '../../common/model.js';\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\nimport { overviewRulerFindMatchForeground } from '../../../platform/theme/common/colorRegistry.js';\nimport { themeColorFromId } from '../../../platform/theme/common/themeService.js';\n\nvar FindDecorations =\n/** @class */\nfunction () {\n  function FindDecorations(editor) {\n    this._editor = editor;\n    this._decorations = [];\n    this._overviewRulerApproximateDecorations = [];\n    this._findScopeDecorationId = null;\n    this._rangeHighlightDecorationId = null;\n    this._highlightedDecorationId = null;\n    this._startPosition = this._editor.getPosition();\n  }\n\n  FindDecorations.prototype.dispose = function () {\n    this._editor.deltaDecorations(this._allDecorations(), []);\n\n    this._decorations = [];\n    this._overviewRulerApproximateDecorations = [];\n    this._findScopeDecorationId = null;\n    this._rangeHighlightDecorationId = null;\n    this._highlightedDecorationId = null;\n  };\n\n  FindDecorations.prototype.reset = function () {\n    this._decorations = [];\n    this._overviewRulerApproximateDecorations = [];\n    this._findScopeDecorationId = null;\n    this._rangeHighlightDecorationId = null;\n    this._highlightedDecorationId = null;\n  };\n\n  FindDecorations.prototype.getCount = function () {\n    return this._decorations.length;\n  };\n\n  FindDecorations.prototype.getFindScope = function () {\n    if (this._findScopeDecorationId) {\n      return this._editor.getModel().getDecorationRange(this._findScopeDecorationId);\n    }\n\n    return null;\n  };\n\n  FindDecorations.prototype.getStartPosition = function () {\n    return this._startPosition;\n  };\n\n  FindDecorations.prototype.setStartPosition = function (newStartPosition) {\n    this._startPosition = newStartPosition;\n    this.setCurrentFindMatch(null);\n  };\n\n  FindDecorations.prototype._getDecorationIndex = function (decorationId) {\n    var index = this._decorations.indexOf(decorationId);\n\n    if (index >= 0) {\n      return index + 1;\n    }\n\n    return 1;\n  };\n\n  FindDecorations.prototype.getCurrentMatchesPosition = function (desiredRange) {\n    var candidates = this._editor.getModel().getDecorationsInRange(desiredRange);\n\n    for (var _i = 0, candidates_1 = candidates; _i < candidates_1.length; _i++) {\n      var candidate = candidates_1[_i];\n      var candidateOpts = candidate.options;\n\n      if (candidateOpts === FindDecorations._FIND_MATCH_DECORATION || candidateOpts === FindDecorations._CURRENT_FIND_MATCH_DECORATION) {\n        return this._getDecorationIndex(candidate.id);\n      }\n    }\n\n    return 1;\n  };\n\n  FindDecorations.prototype.setCurrentFindMatch = function (nextMatch) {\n    var _this = this;\n\n    var newCurrentDecorationId = null;\n    var matchPosition = 0;\n\n    if (nextMatch) {\n      for (var i = 0, len = this._decorations.length; i < len; i++) {\n        var range = this._editor.getModel().getDecorationRange(this._decorations[i]);\n\n        if (nextMatch.equalsRange(range)) {\n          newCurrentDecorationId = this._decorations[i];\n          matchPosition = i + 1;\n          break;\n        }\n      }\n    }\n\n    if (this._highlightedDecorationId !== null || newCurrentDecorationId !== null) {\n      this._editor.changeDecorations(function (changeAccessor) {\n        if (_this._highlightedDecorationId !== null) {\n          changeAccessor.changeDecorationOptions(_this._highlightedDecorationId, FindDecorations._FIND_MATCH_DECORATION);\n          _this._highlightedDecorationId = null;\n        }\n\n        if (newCurrentDecorationId !== null) {\n          _this._highlightedDecorationId = newCurrentDecorationId;\n          changeAccessor.changeDecorationOptions(_this._highlightedDecorationId, FindDecorations._CURRENT_FIND_MATCH_DECORATION);\n        }\n\n        if (_this._rangeHighlightDecorationId !== null) {\n          changeAccessor.removeDecoration(_this._rangeHighlightDecorationId);\n          _this._rangeHighlightDecorationId = null;\n        }\n\n        if (newCurrentDecorationId !== null) {\n          var rng = _this._editor.getModel().getDecorationRange(newCurrentDecorationId);\n\n          if (rng.startLineNumber !== rng.endLineNumber && rng.endColumn === 1) {\n            var lineBeforeEnd = rng.endLineNumber - 1;\n\n            var lineBeforeEndMaxColumn = _this._editor.getModel().getLineMaxColumn(lineBeforeEnd);\n\n            rng = new Range(rng.startLineNumber, rng.startColumn, lineBeforeEnd, lineBeforeEndMaxColumn);\n          }\n\n          _this._rangeHighlightDecorationId = changeAccessor.addDecoration(rng, FindDecorations._RANGE_HIGHLIGHT_DECORATION);\n        }\n      });\n    }\n\n    return matchPosition;\n  };\n\n  FindDecorations.prototype.set = function (findMatches, findScope) {\n    var _this = this;\n\n    this._editor.changeDecorations(function (accessor) {\n      var findMatchesOptions = FindDecorations._FIND_MATCH_DECORATION;\n      var newOverviewRulerApproximateDecorations = [];\n\n      if (findMatches.length > 1000) {\n        // we go into a mode where the overview ruler gets \"approximate\" decorations\n        // the reason is that the overview ruler paints all the decorations in the file and we don't want to cause freezes\n        findMatchesOptions = FindDecorations._FIND_MATCH_NO_OVERVIEW_DECORATION; // approximate a distance in lines where matches should be merged\n\n        var lineCount = _this._editor.getModel().getLineCount();\n\n        var height = _this._editor.getLayoutInfo().height;\n\n        var approxPixelsPerLine = height / lineCount;\n        var mergeLinesDelta = Math.max(2, Math.ceil(3 / approxPixelsPerLine)); // merge decorations as much as possible\n\n        var prevStartLineNumber = findMatches[0].range.startLineNumber;\n        var prevEndLineNumber = findMatches[0].range.endLineNumber;\n\n        for (var i = 1, len = findMatches.length; i < len; i++) {\n          var range = findMatches[i].range;\n\n          if (prevEndLineNumber + mergeLinesDelta >= range.startLineNumber) {\n            if (range.endLineNumber > prevEndLineNumber) {\n              prevEndLineNumber = range.endLineNumber;\n            }\n          } else {\n            newOverviewRulerApproximateDecorations.push({\n              range: new Range(prevStartLineNumber, 1, prevEndLineNumber, 1),\n              options: FindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION\n            });\n            prevStartLineNumber = range.startLineNumber;\n            prevEndLineNumber = range.endLineNumber;\n          }\n        }\n\n        newOverviewRulerApproximateDecorations.push({\n          range: new Range(prevStartLineNumber, 1, prevEndLineNumber, 1),\n          options: FindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION\n        });\n      } // Find matches\n\n\n      var newFindMatchesDecorations = new Array(findMatches.length);\n\n      for (var i = 0, len = findMatches.length; i < len; i++) {\n        newFindMatchesDecorations[i] = {\n          range: findMatches[i].range,\n          options: findMatchesOptions\n        };\n      }\n\n      _this._decorations = accessor.deltaDecorations(_this._decorations, newFindMatchesDecorations); // Overview ruler approximate decorations\n\n      _this._overviewRulerApproximateDecorations = accessor.deltaDecorations(_this._overviewRulerApproximateDecorations, newOverviewRulerApproximateDecorations); // Range highlight\n\n      if (_this._rangeHighlightDecorationId) {\n        accessor.removeDecoration(_this._rangeHighlightDecorationId);\n        _this._rangeHighlightDecorationId = null;\n      } // Find scope\n\n\n      if (_this._findScopeDecorationId) {\n        accessor.removeDecoration(_this._findScopeDecorationId);\n        _this._findScopeDecorationId = null;\n      }\n\n      if (findScope) {\n        _this._findScopeDecorationId = accessor.addDecoration(findScope, FindDecorations._FIND_SCOPE_DECORATION);\n      }\n    });\n  };\n\n  FindDecorations.prototype.matchBeforePosition = function (position) {\n    if (this._decorations.length === 0) {\n      return null;\n    }\n\n    for (var i = this._decorations.length - 1; i >= 0; i--) {\n      var decorationId = this._decorations[i];\n\n      var r = this._editor.getModel().getDecorationRange(decorationId);\n\n      if (!r || r.endLineNumber > position.lineNumber) {\n        continue;\n      }\n\n      if (r.endLineNumber < position.lineNumber) {\n        return r;\n      }\n\n      if (r.endColumn > position.column) {\n        continue;\n      }\n\n      return r;\n    }\n\n    return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length - 1]);\n  };\n\n  FindDecorations.prototype.matchAfterPosition = function (position) {\n    if (this._decorations.length === 0) {\n      return null;\n    }\n\n    for (var i = 0, len = this._decorations.length; i < len; i++) {\n      var decorationId = this._decorations[i];\n\n      var r = this._editor.getModel().getDecorationRange(decorationId);\n\n      if (!r || r.startLineNumber < position.lineNumber) {\n        continue;\n      }\n\n      if (r.startLineNumber > position.lineNumber) {\n        return r;\n      }\n\n      if (r.startColumn < position.column) {\n        continue;\n      }\n\n      return r;\n    }\n\n    return this._editor.getModel().getDecorationRange(this._decorations[0]);\n  };\n\n  FindDecorations.prototype._allDecorations = function () {\n    var result = [];\n    result = result.concat(this._decorations);\n    result = result.concat(this._overviewRulerApproximateDecorations);\n\n    if (this._findScopeDecorationId) {\n      result.push(this._findScopeDecorationId);\n    }\n\n    if (this._rangeHighlightDecorationId) {\n      result.push(this._rangeHighlightDecorationId);\n    }\n\n    return result;\n  };\n\n  FindDecorations._CURRENT_FIND_MATCH_DECORATION = ModelDecorationOptions.register({\n    stickiness: 1\n    /* NeverGrowsWhenTypingAtEdges */\n    ,\n    zIndex: 13,\n    className: 'currentFindMatch',\n    showIfCollapsed: true,\n    overviewRuler: {\n      color: themeColorFromId(overviewRulerFindMatchForeground),\n      position: OverviewRulerLane.Center\n    }\n  });\n  FindDecorations._FIND_MATCH_DECORATION = ModelDecorationOptions.register({\n    stickiness: 1\n    /* NeverGrowsWhenTypingAtEdges */\n    ,\n    className: 'findMatch',\n    showIfCollapsed: true,\n    overviewRuler: {\n      color: themeColorFromId(overviewRulerFindMatchForeground),\n      position: OverviewRulerLane.Center\n    }\n  });\n  FindDecorations._FIND_MATCH_NO_OVERVIEW_DECORATION = ModelDecorationOptions.register({\n    stickiness: 1\n    /* NeverGrowsWhenTypingAtEdges */\n    ,\n    className: 'findMatch',\n    showIfCollapsed: true\n  });\n  FindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION = ModelDecorationOptions.register({\n    stickiness: 1\n    /* NeverGrowsWhenTypingAtEdges */\n    ,\n    overviewRuler: {\n      color: themeColorFromId(overviewRulerFindMatchForeground),\n      position: OverviewRulerLane.Center\n    }\n  });\n  FindDecorations._RANGE_HIGHLIGHT_DECORATION = ModelDecorationOptions.register({\n    stickiness: 1\n    /* NeverGrowsWhenTypingAtEdges */\n    ,\n    className: 'rangeHighlight',\n    isWholeLine: true\n  });\n  FindDecorations._FIND_SCOPE_DECORATION = ModelDecorationOptions.register({\n    className: 'findScope',\n    isWholeLine: true\n  });\n  return FindDecorations;\n}();\n\nexport { FindDecorations };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../common/core/range.js';\n\nvar ReplaceAllCommand =\n/** @class */\nfunction () {\n  function ReplaceAllCommand(editorSelection, ranges, replaceStrings) {\n    this._editorSelection = editorSelection;\n    this._ranges = ranges;\n    this._replaceStrings = replaceStrings;\n  }\n\n  ReplaceAllCommand.prototype.getEditOperations = function (model, builder) {\n    if (this._ranges.length > 0) {\n      // Collect all edit operations\n      var ops = [];\n\n      for (var i = 0; i < this._ranges.length; i++) {\n        ops.push({\n          range: this._ranges[i],\n          text: this._replaceStrings[i]\n        });\n      } // Sort them in ascending order by range starts\n\n\n      ops.sort(function (o1, o2) {\n        return Range.compareRangesUsingStarts(o1.range, o2.range);\n      }); // Merge operations that touch each other\n\n      var resultOps = [];\n      var previousOp = ops[0];\n\n      for (var i = 1; i < ops.length; i++) {\n        if (previousOp.range.endLineNumber === ops[i].range.startLineNumber && previousOp.range.endColumn === ops[i].range.startColumn) {\n          // These operations are one after another and can be merged\n          previousOp.range = previousOp.range.plusRange(ops[i].range);\n          previousOp.text = previousOp.text + ops[i].text;\n        } else {\n          resultOps.push(previousOp);\n          previousOp = ops[i];\n        }\n      }\n\n      resultOps.push(previousOp);\n\n      for (var _i = 0, resultOps_1 = resultOps; _i < resultOps_1.length; _i++) {\n        var op = resultOps_1[_i];\n        builder.addEditOperation(op.range, op.text);\n      }\n    }\n\n    this._trackedEditorSelectionId = builder.trackSelection(this._editorSelection);\n  };\n\n  ReplaceAllCommand.prototype.computeCursorState = function (model, helper) {\n    return helper.getTrackedSelection(this._trackedEditorSelectionId);\n  };\n\n  return ReplaceAllCommand;\n}();\n\nexport { ReplaceAllCommand };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/**\n * Assigned when the replace pattern is entirely static.\n */\nvar StaticValueReplacePattern =\n/** @class */\nfunction () {\n  function StaticValueReplacePattern(staticValue) {\n    this.staticValue = staticValue;\n    this.kind = 0\n    /* StaticValue */\n    ;\n  }\n\n  return StaticValueReplacePattern;\n}();\n/**\n * Assigned when the replace pattern has replacemend patterns.\n */\n\n\nvar DynamicPiecesReplacePattern =\n/** @class */\nfunction () {\n  function DynamicPiecesReplacePattern(pieces) {\n    this.pieces = pieces;\n    this.kind = 1\n    /* DynamicPieces */\n    ;\n  }\n\n  return DynamicPiecesReplacePattern;\n}();\n\nvar ReplacePattern =\n/** @class */\nfunction () {\n  function ReplacePattern(pieces) {\n    if (!pieces || pieces.length === 0) {\n      this._state = new StaticValueReplacePattern('');\n    } else if (pieces.length === 1 && pieces[0].staticValue !== null) {\n      this._state = new StaticValueReplacePattern(pieces[0].staticValue);\n    } else {\n      this._state = new DynamicPiecesReplacePattern(pieces);\n    }\n  }\n\n  ReplacePattern.fromStaticValue = function (value) {\n    return new ReplacePattern([ReplacePiece.staticValue(value)]);\n  };\n\n  Object.defineProperty(ReplacePattern.prototype, \"hasReplacementPatterns\", {\n    get: function get() {\n      return this._state.kind === 1\n      /* DynamicPieces */\n      ;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ReplacePattern.prototype.buildReplaceString = function (matches) {\n    if (this._state.kind === 0\n    /* StaticValue */\n    ) {\n        return this._state.staticValue;\n      }\n\n    var result = '';\n\n    for (var i = 0, len = this._state.pieces.length; i < len; i++) {\n      var piece = this._state.pieces[i];\n\n      if (piece.staticValue !== null) {\n        // static value ReplacePiece\n        result += piece.staticValue;\n        continue;\n      } // match index ReplacePiece\n\n\n      result += ReplacePattern._substitute(piece.matchIndex, matches);\n    }\n\n    return result;\n  };\n\n  ReplacePattern._substitute = function (matchIndex, matches) {\n    if (matches === null) {\n      return '';\n    }\n\n    if (matchIndex === 0) {\n      return matches[0];\n    }\n\n    var remainder = '';\n\n    while (matchIndex > 0) {\n      if (matchIndex < matches.length) {\n        // A match can be undefined\n        var match = matches[matchIndex] || '';\n        return match + remainder;\n      }\n\n      remainder = String(matchIndex % 10) + remainder;\n      matchIndex = Math.floor(matchIndex / 10);\n    }\n\n    return '$' + remainder;\n  };\n\n  return ReplacePattern;\n}();\n\nexport { ReplacePattern };\n/**\n * A replace piece can either be a static string or an index to a specific match.\n */\n\nvar ReplacePiece =\n/** @class */\nfunction () {\n  function ReplacePiece(staticValue, matchIndex) {\n    this.staticValue = staticValue;\n    this.matchIndex = matchIndex;\n  }\n\n  ReplacePiece.staticValue = function (value) {\n    return new ReplacePiece(value, -1);\n  };\n\n  ReplacePiece.matchIndex = function (index) {\n    return new ReplacePiece(null, index);\n  };\n\n  return ReplacePiece;\n}();\n\nexport { ReplacePiece };\n\nvar ReplacePieceBuilder =\n/** @class */\nfunction () {\n  function ReplacePieceBuilder(source) {\n    this._source = source;\n    this._lastCharIndex = 0;\n    this._result = [];\n    this._resultLen = 0;\n    this._currentStaticPiece = '';\n  }\n\n  ReplacePieceBuilder.prototype.emitUnchanged = function (toCharIndex) {\n    this._emitStatic(this._source.substring(this._lastCharIndex, toCharIndex));\n\n    this._lastCharIndex = toCharIndex;\n  };\n\n  ReplacePieceBuilder.prototype.emitStatic = function (value, toCharIndex) {\n    this._emitStatic(value);\n\n    this._lastCharIndex = toCharIndex;\n  };\n\n  ReplacePieceBuilder.prototype._emitStatic = function (value) {\n    if (value.length === 0) {\n      return;\n    }\n\n    this._currentStaticPiece += value;\n  };\n\n  ReplacePieceBuilder.prototype.emitMatchIndex = function (index, toCharIndex) {\n    if (this._currentStaticPiece.length !== 0) {\n      this._result[this._resultLen++] = ReplacePiece.staticValue(this._currentStaticPiece);\n      this._currentStaticPiece = '';\n    }\n\n    this._result[this._resultLen++] = ReplacePiece.matchIndex(index);\n    this._lastCharIndex = toCharIndex;\n  };\n\n  ReplacePieceBuilder.prototype.finalize = function () {\n    this.emitUnchanged(this._source.length);\n\n    if (this._currentStaticPiece.length !== 0) {\n      this._result[this._resultLen++] = ReplacePiece.staticValue(this._currentStaticPiece);\n      this._currentStaticPiece = '';\n    }\n\n    return new ReplacePattern(this._result);\n  };\n\n  return ReplacePieceBuilder;\n}();\n/**\n * \\n\t\t\t=> inserts a LF\n * \\t\t\t\t=> inserts a TAB\n * \\\\\t\t\t=> inserts a \"\\\".\n * $$\t\t\t=> inserts a \"$\".\n * $& and $0\t=> inserts the matched substring.\n * $n\t\t\t=> Where n is a non-negative integer lesser than 100, inserts the nth parenthesized submatch string\n * everything else stays untouched\n *\n * Also see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace#Specifying_a_string_as_a_parameter\n */\n\n\nexport function parseReplaceString(replaceString) {\n  if (!replaceString || replaceString.length === 0) {\n    return new ReplacePattern(null);\n  }\n\n  var result = new ReplacePieceBuilder(replaceString);\n\n  for (var i = 0, len = replaceString.length; i < len; i++) {\n    var chCode = replaceString.charCodeAt(i);\n\n    if (chCode === 92\n    /* Backslash */\n    ) {\n        // move to next char\n        i++;\n\n        if (i >= len) {\n          // string ends with a \\\n          break;\n        }\n\n        var nextChCode = replaceString.charCodeAt(i); // let replaceWithCharacter: string | null = null;\n\n        switch (nextChCode) {\n          case 92\n          /* Backslash */\n          :\n            // \\\\ => inserts a \"\\\"\n            result.emitUnchanged(i - 1);\n            result.emitStatic('\\\\', i + 1);\n            break;\n\n          case 110\n          /* n */\n          :\n            // \\n => inserts a LF\n            result.emitUnchanged(i - 1);\n            result.emitStatic('\\n', i + 1);\n            break;\n\n          case 116\n          /* t */\n          :\n            // \\t => inserts a TAB\n            result.emitUnchanged(i - 1);\n            result.emitStatic('\\t', i + 1);\n            break;\n        }\n\n        continue;\n      }\n\n    if (chCode === 36\n    /* DollarSign */\n    ) {\n        // move to next char\n        i++;\n\n        if (i >= len) {\n          // string ends with a $\n          break;\n        }\n\n        var nextChCode = replaceString.charCodeAt(i);\n\n        if (nextChCode === 36\n        /* DollarSign */\n        ) {\n            // $$ => inserts a \"$\"\n            result.emitUnchanged(i - 1);\n            result.emitStatic('$', i + 1);\n            continue;\n          }\n\n        if (nextChCode === 48\n        /* Digit0 */\n        || nextChCode === 38\n        /* Ampersand */\n        ) {\n            // $& and $0 => inserts the matched substring.\n            result.emitUnchanged(i - 1);\n            result.emitMatchIndex(0, i + 1);\n            continue;\n          }\n\n        if (49\n        /* Digit1 */\n        <= nextChCode && nextChCode <= 57\n        /* Digit9 */\n        ) {\n            // $n\n            var matchIndex = nextChCode - 48\n            /* Digit0 */\n            ; // peek next char to probe for $nn\n\n            if (i + 1 < len) {\n              var nextNextChCode = replaceString.charCodeAt(i + 1);\n\n              if (48\n              /* Digit0 */\n              <= nextNextChCode && nextNextChCode <= 57\n              /* Digit9 */\n              ) {\n                  // $nn\n                  // move to next char\n                  i++;\n                  matchIndex = matchIndex * 10 + (nextNextChCode - 48\n                  /* Digit0 */\n                  );\n                  result.emitUnchanged(i - 2);\n                  result.emitMatchIndex(matchIndex, i + 1);\n                  continue;\n                }\n            }\n\n            result.emitUnchanged(i - 1);\n            result.emitMatchIndex(matchIndex, i + 1);\n            continue;\n          }\n      }\n  }\n\n  return result.finalize();\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { RunOnceScheduler, TimeoutTimer } from '../../../base/common/async.js';\nimport { dispose } from '../../../base/common/lifecycle.js';\nimport { ReplaceCommand, ReplaceCommandThatPreservesSelection } from '../../common/commands/replaceCommand.js';\nimport { Position } from '../../common/core/position.js';\nimport { Range } from '../../common/core/range.js';\nimport { Selection } from '../../common/core/selection.js';\nimport { SearchParams } from '../../common/model/textModelSearch.js';\nimport { FindDecorations } from './findDecorations.js';\nimport { ReplaceAllCommand } from './replaceAllCommand.js';\nimport { ReplacePattern, parseReplaceString } from './replacePattern.js';\nimport { RawContextKey } from '../../../platform/contextkey/common/contextkey.js';\nexport var CONTEXT_FIND_WIDGET_VISIBLE = new RawContextKey('findWidgetVisible', false); // Keep ContextKey use of 'Focussed' to not break when clauses\n\nexport var CONTEXT_FIND_INPUT_FOCUSED = new RawContextKey('findInputFocussed', false);\nexport var CONTEXT_REPLACE_INPUT_FOCUSED = new RawContextKey('replaceInputFocussed', false);\nexport var ToggleCaseSensitiveKeybinding = {\n  primary: 512\n  /* Alt */\n  | 33\n  /* KEY_C */\n  ,\n  mac: {\n    primary: 2048\n    /* CtrlCmd */\n    | 512\n    /* Alt */\n    | 33\n    /* KEY_C */\n\n  }\n};\nexport var ToggleWholeWordKeybinding = {\n  primary: 512\n  /* Alt */\n  | 53\n  /* KEY_W */\n  ,\n  mac: {\n    primary: 2048\n    /* CtrlCmd */\n    | 512\n    /* Alt */\n    | 53\n    /* KEY_W */\n\n  }\n};\nexport var ToggleRegexKeybinding = {\n  primary: 512\n  /* Alt */\n  | 48\n  /* KEY_R */\n  ,\n  mac: {\n    primary: 2048\n    /* CtrlCmd */\n    | 512\n    /* Alt */\n    | 48\n    /* KEY_R */\n\n  }\n};\nexport var ToggleSearchScopeKeybinding = {\n  primary: 512\n  /* Alt */\n  | 42\n  /* KEY_L */\n  ,\n  mac: {\n    primary: 2048\n    /* CtrlCmd */\n    | 512\n    /* Alt */\n    | 42\n    /* KEY_L */\n\n  }\n};\nexport var FIND_IDS = {\n  StartFindAction: 'actions.find',\n  StartFindWithSelection: 'actions.findWithSelection',\n  NextMatchFindAction: 'editor.action.nextMatchFindAction',\n  PreviousMatchFindAction: 'editor.action.previousMatchFindAction',\n  NextSelectionMatchFindAction: 'editor.action.nextSelectionMatchFindAction',\n  PreviousSelectionMatchFindAction: 'editor.action.previousSelectionMatchFindAction',\n  StartFindReplaceAction: 'editor.action.startFindReplaceAction',\n  CloseFindWidgetCommand: 'closeFindWidget',\n  ToggleCaseSensitiveCommand: 'toggleFindCaseSensitive',\n  ToggleWholeWordCommand: 'toggleFindWholeWord',\n  ToggleRegexCommand: 'toggleFindRegex',\n  ToggleSearchScopeCommand: 'toggleFindInSelection',\n  ReplaceOneAction: 'editor.action.replaceOne',\n  ReplaceAllAction: 'editor.action.replaceAll',\n  SelectAllMatchesAction: 'editor.action.selectAllMatches'\n};\nexport var MATCHES_LIMIT = 19999;\nvar RESEARCH_DELAY = 240;\n\nvar FindModelBoundToEditorModel =\n/** @class */\nfunction () {\n  function FindModelBoundToEditorModel(editor, state) {\n    var _this = this;\n\n    this._editor = editor;\n    this._state = state;\n    this._toDispose = [];\n    this._isDisposed = false;\n    this._startSearchingTimer = new TimeoutTimer();\n    this._decorations = new FindDecorations(editor);\n\n    this._toDispose.push(this._decorations);\n\n    this._updateDecorationsScheduler = new RunOnceScheduler(function () {\n      return _this.research(false);\n    }, 100);\n\n    this._toDispose.push(this._updateDecorationsScheduler);\n\n    this._toDispose.push(this._editor.onDidChangeCursorPosition(function (e) {\n      if (e.reason === 3\n      /* Explicit */\n      || e.reason === 5\n      /* Undo */\n      || e.reason === 6\n      /* Redo */\n      ) {\n          _this._decorations.setStartPosition(_this._editor.getPosition());\n        }\n    }));\n\n    this._ignoreModelContentChanged = false;\n\n    this._toDispose.push(this._editor.onDidChangeModelContent(function (e) {\n      if (_this._ignoreModelContentChanged) {\n        return;\n      }\n\n      if (e.isFlush) {\n        // a model.setValue() was called\n        _this._decorations.reset();\n      }\n\n      _this._decorations.setStartPosition(_this._editor.getPosition());\n\n      _this._updateDecorationsScheduler.schedule();\n    }));\n\n    this._toDispose.push(this._state.onFindReplaceStateChange(function (e) {\n      return _this._onStateChanged(e);\n    }));\n\n    this.research(false, this._state.searchScope);\n  }\n\n  FindModelBoundToEditorModel.prototype.dispose = function () {\n    this._isDisposed = true;\n    dispose(this._startSearchingTimer);\n    this._toDispose = dispose(this._toDispose);\n  };\n\n  FindModelBoundToEditorModel.prototype._onStateChanged = function (e) {\n    var _this = this;\n\n    if (this._isDisposed) {\n      // The find model is disposed during a find state changed event\n      return;\n    }\n\n    if (!this._editor.hasModel()) {\n      // The find model will be disposed momentarily\n      return;\n    }\n\n    if (e.searchString || e.isReplaceRevealed || e.isRegex || e.wholeWord || e.matchCase || e.searchScope) {\n      var model = this._editor.getModel();\n\n      if (model.isTooLargeForSyncing()) {\n        this._startSearchingTimer.cancel();\n\n        this._startSearchingTimer.setIfNotSet(function () {\n          if (e.searchScope) {\n            _this.research(e.moveCursor, _this._state.searchScope);\n          } else {\n            _this.research(e.moveCursor);\n          }\n        }, RESEARCH_DELAY);\n      } else {\n        if (e.searchScope) {\n          this.research(e.moveCursor, this._state.searchScope);\n        } else {\n          this.research(e.moveCursor);\n        }\n      }\n    }\n  };\n\n  FindModelBoundToEditorModel._getSearchRange = function (model, findScope) {\n    // If we have set now or before a find scope, use it for computing the search range\n    if (findScope) {\n      return findScope;\n    }\n\n    return model.getFullModelRange();\n  };\n\n  FindModelBoundToEditorModel.prototype.research = function (moveCursor, newFindScope) {\n    var findScope = null;\n\n    if (typeof newFindScope !== 'undefined') {\n      findScope = newFindScope;\n    } else {\n      findScope = this._decorations.getFindScope();\n    }\n\n    if (findScope !== null) {\n      if (findScope.startLineNumber !== findScope.endLineNumber) {\n        if (findScope.endColumn === 1) {\n          findScope = new Range(findScope.startLineNumber, 1, findScope.endLineNumber - 1, this._editor.getModel().getLineMaxColumn(findScope.endLineNumber - 1));\n        } else {\n          // multiline find scope => expand to line starts / ends\n          findScope = new Range(findScope.startLineNumber, 1, findScope.endLineNumber, this._editor.getModel().getLineMaxColumn(findScope.endLineNumber));\n        }\n      }\n    }\n\n    var findMatches = this._findMatches(findScope, false, MATCHES_LIMIT);\n\n    this._decorations.set(findMatches, findScope);\n\n    this._state.changeMatchInfo(this._decorations.getCurrentMatchesPosition(this._editor.getSelection()), this._decorations.getCount(), undefined);\n\n    if (moveCursor) {\n      this._moveToNextMatch(this._decorations.getStartPosition());\n    }\n  };\n\n  FindModelBoundToEditorModel.prototype._hasMatches = function () {\n    return this._state.matchesCount > 0;\n  };\n\n  FindModelBoundToEditorModel.prototype._cannotFind = function () {\n    if (!this._hasMatches()) {\n      var findScope = this._decorations.getFindScope();\n\n      if (findScope) {\n        // Reveal the selection so user is reminded that 'selection find' is on.\n        this._editor.revealRangeInCenterIfOutsideViewport(findScope, 0\n        /* Smooth */\n        );\n      }\n\n      return true;\n    }\n\n    return false;\n  };\n\n  FindModelBoundToEditorModel.prototype._setCurrentFindMatch = function (match) {\n    var matchesPosition = this._decorations.setCurrentFindMatch(match);\n\n    this._state.changeMatchInfo(matchesPosition, this._decorations.getCount(), match);\n\n    this._editor.setSelection(match);\n\n    this._editor.revealRangeInCenterIfOutsideViewport(match, 0\n    /* Smooth */\n    );\n  };\n\n  FindModelBoundToEditorModel.prototype._prevSearchPosition = function (before) {\n    var isUsingLineStops = this._state.isRegex && (this._state.searchString.indexOf('^') >= 0 || this._state.searchString.indexOf('$') >= 0);\n    var lineNumber = before.lineNumber,\n        column = before.column;\n\n    var model = this._editor.getModel();\n\n    if (isUsingLineStops || column === 1) {\n      if (lineNumber === 1) {\n        lineNumber = model.getLineCount();\n      } else {\n        lineNumber--;\n      }\n\n      column = model.getLineMaxColumn(lineNumber);\n    } else {\n      column--;\n    }\n\n    return new Position(lineNumber, column);\n  };\n\n  FindModelBoundToEditorModel.prototype._moveToPrevMatch = function (before, isRecursed) {\n    if (isRecursed === void 0) {\n      isRecursed = false;\n    }\n\n    if (this._decorations.getCount() < MATCHES_LIMIT) {\n      var prevMatchRange = this._decorations.matchBeforePosition(before);\n\n      if (prevMatchRange && prevMatchRange.isEmpty() && prevMatchRange.getStartPosition().equals(before)) {\n        before = this._prevSearchPosition(before);\n        prevMatchRange = this._decorations.matchBeforePosition(before);\n      }\n\n      if (prevMatchRange) {\n        this._setCurrentFindMatch(prevMatchRange);\n      }\n\n      return;\n    }\n\n    if (this._cannotFind()) {\n      return;\n    }\n\n    var findScope = this._decorations.getFindScope();\n\n    var searchRange = FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(), findScope); // ...(----)...|...\n\n\n    if (searchRange.getEndPosition().isBefore(before)) {\n      before = searchRange.getEndPosition();\n    } // ...|...(----)...\n\n\n    if (before.isBefore(searchRange.getStartPosition())) {\n      before = searchRange.getEndPosition();\n    }\n\n    var lineNumber = before.lineNumber,\n        column = before.column;\n\n    var model = this._editor.getModel();\n\n    var position = new Position(lineNumber, column);\n    var prevMatch = model.findPreviousMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getConfiguration().wordSeparators : null, false);\n\n    if (prevMatch && prevMatch.range.isEmpty() && prevMatch.range.getStartPosition().equals(position)) {\n      // Looks like we're stuck at this position, unacceptable!\n      position = this._prevSearchPosition(position);\n      prevMatch = model.findPreviousMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getConfiguration().wordSeparators : null, false);\n    }\n\n    if (!prevMatch) {\n      // there is precisely one match and selection is on top of it\n      return;\n    }\n\n    if (!isRecursed && !searchRange.containsRange(prevMatch.range)) {\n      return this._moveToPrevMatch(prevMatch.range.getStartPosition(), true);\n    }\n\n    this._setCurrentFindMatch(prevMatch.range);\n  };\n\n  FindModelBoundToEditorModel.prototype.moveToPrevMatch = function () {\n    this._moveToPrevMatch(this._editor.getSelection().getStartPosition());\n  };\n\n  FindModelBoundToEditorModel.prototype._nextSearchPosition = function (after) {\n    var isUsingLineStops = this._state.isRegex && (this._state.searchString.indexOf('^') >= 0 || this._state.searchString.indexOf('$') >= 0);\n    var lineNumber = after.lineNumber,\n        column = after.column;\n\n    var model = this._editor.getModel();\n\n    if (isUsingLineStops || column === model.getLineMaxColumn(lineNumber)) {\n      if (lineNumber === model.getLineCount()) {\n        lineNumber = 1;\n      } else {\n        lineNumber++;\n      }\n\n      column = 1;\n    } else {\n      column++;\n    }\n\n    return new Position(lineNumber, column);\n  };\n\n  FindModelBoundToEditorModel.prototype._moveToNextMatch = function (after) {\n    if (this._decorations.getCount() < MATCHES_LIMIT) {\n      var nextMatchRange = this._decorations.matchAfterPosition(after);\n\n      if (nextMatchRange && nextMatchRange.isEmpty() && nextMatchRange.getStartPosition().equals(after)) {\n        // Looks like we're stuck at this position, unacceptable!\n        after = this._nextSearchPosition(after);\n        nextMatchRange = this._decorations.matchAfterPosition(after);\n      }\n\n      if (nextMatchRange) {\n        this._setCurrentFindMatch(nextMatchRange);\n      }\n\n      return;\n    }\n\n    var nextMatch = this._getNextMatch(after, false, true);\n\n    if (nextMatch) {\n      this._setCurrentFindMatch(nextMatch.range);\n    }\n  };\n\n  FindModelBoundToEditorModel.prototype._getNextMatch = function (after, captureMatches, forceMove, isRecursed) {\n    if (isRecursed === void 0) {\n      isRecursed = false;\n    }\n\n    if (this._cannotFind()) {\n      return null;\n    }\n\n    var findScope = this._decorations.getFindScope();\n\n    var searchRange = FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(), findScope); // ...(----)...|...\n\n\n    if (searchRange.getEndPosition().isBefore(after)) {\n      after = searchRange.getStartPosition();\n    } // ...|...(----)...\n\n\n    if (after.isBefore(searchRange.getStartPosition())) {\n      after = searchRange.getStartPosition();\n    }\n\n    var lineNumber = after.lineNumber,\n        column = after.column;\n\n    var model = this._editor.getModel();\n\n    var position = new Position(lineNumber, column);\n    var nextMatch = model.findNextMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getConfiguration().wordSeparators : null, captureMatches);\n\n    if (forceMove && nextMatch && nextMatch.range.isEmpty() && nextMatch.range.getStartPosition().equals(position)) {\n      // Looks like we're stuck at this position, unacceptable!\n      position = this._nextSearchPosition(position);\n      nextMatch = model.findNextMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getConfiguration().wordSeparators : null, captureMatches);\n    }\n\n    if (!nextMatch) {\n      // there is precisely one match and selection is on top of it\n      return null;\n    }\n\n    if (!isRecursed && !searchRange.containsRange(nextMatch.range)) {\n      return this._getNextMatch(nextMatch.range.getEndPosition(), captureMatches, forceMove, true);\n    }\n\n    return nextMatch;\n  };\n\n  FindModelBoundToEditorModel.prototype.moveToNextMatch = function () {\n    this._moveToNextMatch(this._editor.getSelection().getEndPosition());\n  };\n\n  FindModelBoundToEditorModel.prototype._getReplacePattern = function () {\n    if (this._state.isRegex) {\n      return parseReplaceString(this._state.replaceString);\n    }\n\n    return ReplacePattern.fromStaticValue(this._state.replaceString);\n  };\n\n  FindModelBoundToEditorModel.prototype.replace = function () {\n    if (!this._hasMatches()) {\n      return;\n    }\n\n    var replacePattern = this._getReplacePattern();\n\n    var selection = this._editor.getSelection();\n\n    var nextMatch = this._getNextMatch(selection.getStartPosition(), replacePattern.hasReplacementPatterns, false);\n\n    if (nextMatch) {\n      if (selection.equalsRange(nextMatch.range)) {\n        // selection sits on a find match => replace it!\n        var replaceString = replacePattern.buildReplaceString(nextMatch.matches);\n        var command = new ReplaceCommand(selection, replaceString);\n\n        this._executeEditorCommand('replace', command);\n\n        this._decorations.setStartPosition(new Position(selection.startLineNumber, selection.startColumn + replaceString.length));\n\n        this.research(true);\n      } else {\n        this._decorations.setStartPosition(this._editor.getPosition());\n\n        this._setCurrentFindMatch(nextMatch.range);\n      }\n    }\n  };\n\n  FindModelBoundToEditorModel.prototype._findMatches = function (findScope, captureMatches, limitResultCount) {\n    var searchRange = FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(), findScope);\n\n    return this._editor.getModel().findMatches(this._state.searchString, searchRange, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getConfiguration().wordSeparators : null, captureMatches, limitResultCount);\n  };\n\n  FindModelBoundToEditorModel.prototype.replaceAll = function () {\n    if (!this._hasMatches()) {\n      return;\n    }\n\n    var findScope = this._decorations.getFindScope();\n\n    if (findScope === null && this._state.matchesCount >= MATCHES_LIMIT) {\n      // Doing a replace on the entire file that is over ${MATCHES_LIMIT} matches\n      this._largeReplaceAll();\n    } else {\n      this._regularReplaceAll(findScope);\n    }\n\n    this.research(false);\n  };\n\n  FindModelBoundToEditorModel.prototype._largeReplaceAll = function () {\n    var searchParams = new SearchParams(this._state.searchString, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getConfiguration().wordSeparators : null);\n    var searchData = searchParams.parseSearchRequest();\n\n    if (!searchData) {\n      return;\n    }\n\n    var searchRegex = searchData.regex;\n\n    if (!searchRegex.multiline) {\n      var mod = 'm';\n\n      if (searchRegex.ignoreCase) {\n        mod += 'i';\n      }\n\n      if (searchRegex.global) {\n        mod += 'g';\n      }\n\n      searchRegex = new RegExp(searchRegex.source, mod);\n    }\n\n    var model = this._editor.getModel();\n\n    var modelText = model.getValue(1\n    /* LF */\n    );\n    var fullModelRange = model.getFullModelRange();\n\n    var replacePattern = this._getReplacePattern();\n\n    var resultText;\n\n    if (replacePattern.hasReplacementPatterns) {\n      resultText = modelText.replace(searchRegex, function () {\n        return replacePattern.buildReplaceString(arguments);\n      });\n    } else {\n      resultText = modelText.replace(searchRegex, replacePattern.buildReplaceString(null));\n    }\n\n    var command = new ReplaceCommandThatPreservesSelection(fullModelRange, resultText, this._editor.getSelection());\n\n    this._executeEditorCommand('replaceAll', command);\n  };\n\n  FindModelBoundToEditorModel.prototype._regularReplaceAll = function (findScope) {\n    var replacePattern = this._getReplacePattern(); // Get all the ranges (even more than the highlighted ones)\n\n\n    var matches = this._findMatches(findScope, replacePattern.hasReplacementPatterns, 1073741824\n    /* MAX_SAFE_SMALL_INTEGER */\n    );\n\n    var replaceStrings = [];\n\n    for (var i = 0, len = matches.length; i < len; i++) {\n      replaceStrings[i] = replacePattern.buildReplaceString(matches[i].matches);\n    }\n\n    var command = new ReplaceAllCommand(this._editor.getSelection(), matches.map(function (m) {\n      return m.range;\n    }), replaceStrings);\n\n    this._executeEditorCommand('replaceAll', command);\n  };\n\n  FindModelBoundToEditorModel.prototype.selectAllMatches = function () {\n    if (!this._hasMatches()) {\n      return;\n    }\n\n    var findScope = this._decorations.getFindScope(); // Get all the ranges (even more than the highlighted ones)\n\n\n    var matches = this._findMatches(findScope, false, 1073741824\n    /* MAX_SAFE_SMALL_INTEGER */\n    );\n\n    var selections = matches.map(function (m) {\n      return new Selection(m.range.startLineNumber, m.range.startColumn, m.range.endLineNumber, m.range.endColumn);\n    }); // If one of the ranges is the editor selection, then maintain it as primary\n\n    var editorSelection = this._editor.getSelection();\n\n    for (var i = 0, len = selections.length; i < len; i++) {\n      var sel = selections[i];\n\n      if (sel.equalsRange(editorSelection)) {\n        selections = [editorSelection].concat(selections.slice(0, i)).concat(selections.slice(i + 1));\n        break;\n      }\n    }\n\n    this._editor.setSelections(selections);\n  };\n\n  FindModelBoundToEditorModel.prototype._executeEditorCommand = function (source, command) {\n    try {\n      this._ignoreModelContentChanged = true;\n\n      this._editor.pushUndoStop();\n\n      this._editor.executeCommand(source, command);\n\n      this._editor.pushUndoStop();\n    } finally {\n      this._ignoreModelContentChanged = false;\n    }\n  };\n\n  return FindModelBoundToEditorModel;\n}();\n\nexport { FindModelBoundToEditorModel };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport './checkbox.css';\nimport * as DOM from '../../dom.js';\nimport { Widget } from '../widget.js';\nimport { Color } from '../../../common/color.js';\nimport { Emitter } from '../../../common/event.js';\nimport * as objects from '../../../common/objects.js';\nvar defaultOpts = {\n  inputActiveOptionBorder: Color.fromHex('#007ACC')\n};\n\nvar Checkbox =\n/** @class */\nfunction (_super) {\n  __extends(Checkbox, _super);\n\n  function Checkbox(opts) {\n    var _this = _super.call(this) || this;\n\n    _this._onChange = _this._register(new Emitter());\n    _this._onKeyDown = _this._register(new Emitter());\n    _this._opts = objects.deepClone(opts);\n    objects.mixin(_this._opts, defaultOpts, false);\n    _this._checked = _this._opts.isChecked;\n    _this.domNode = document.createElement('div');\n    _this.domNode.title = _this._opts.title;\n    _this.domNode.className = 'monaco-custom-checkbox ' + (_this._opts.actionClassName || '') + ' ' + (_this._checked ? 'checked' : 'unchecked');\n    _this.domNode.tabIndex = 0;\n\n    _this.domNode.setAttribute('role', 'checkbox');\n\n    _this.domNode.setAttribute('aria-checked', String(_this._checked));\n\n    _this.domNode.setAttribute('aria-label', _this._opts.title);\n\n    _this.applyStyles();\n\n    _this.onclick(_this.domNode, function (ev) {\n      _this.checked = !_this._checked;\n\n      _this._onChange.fire(false);\n\n      ev.preventDefault();\n    });\n\n    _this.onkeydown(_this.domNode, function (keyboardEvent) {\n      if (keyboardEvent.keyCode === 10\n      /* Space */\n      || keyboardEvent.keyCode === 3\n      /* Enter */\n      ) {\n          _this.checked = !_this._checked;\n\n          _this._onChange.fire(true);\n\n          keyboardEvent.preventDefault();\n          return;\n        }\n\n      _this._onKeyDown.fire(keyboardEvent);\n    });\n\n    return _this;\n  }\n\n  Object.defineProperty(Checkbox.prototype, \"onChange\", {\n    get: function get() {\n      return this._onChange.event;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Checkbox.prototype, \"onKeyDown\", {\n    get: function get() {\n      return this._onKeyDown.event;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Checkbox.prototype.focus = function () {\n    this.domNode.focus();\n  };\n\n  Object.defineProperty(Checkbox.prototype, \"checked\", {\n    get: function get() {\n      return this._checked;\n    },\n    set: function set(newIsChecked) {\n      this._checked = newIsChecked;\n      this.domNode.setAttribute('aria-checked', String(this._checked));\n\n      if (this._checked) {\n        this.domNode.classList.add('checked');\n      } else {\n        this.domNode.classList.remove('checked');\n      }\n\n      this.applyStyles();\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Checkbox.prototype.width = function () {\n    return 2\n    /*marginleft*/\n    + 2\n    /*border*/\n    + 2\n    /*padding*/\n    + 16\n    /* icon width */\n    ;\n  };\n\n  Checkbox.prototype.style = function (styles) {\n    if (styles.inputActiveOptionBorder) {\n      this._opts.inputActiveOptionBorder = styles.inputActiveOptionBorder;\n    }\n\n    this.applyStyles();\n  };\n\n  Checkbox.prototype.applyStyles = function () {\n    if (this.domNode) {\n      this.domNode.style.borderColor = this._checked && this._opts.inputActiveOptionBorder ? this._opts.inputActiveOptionBorder.toString() : 'transparent';\n    }\n  };\n\n  Checkbox.prototype.enable = function () {\n    this.domNode.tabIndex = 0;\n    this.domNode.setAttribute('aria-disabled', String(false));\n  };\n\n  Checkbox.prototype.disable = function () {\n    DOM.removeTabIndexAndUpdateFocus(this.domNode);\n    this.domNode.setAttribute('aria-disabled', String(true));\n  };\n\n  return Checkbox;\n}(Widget);\n\nexport { Checkbox };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { Checkbox } from '../checkbox/checkbox.js';\nimport './findInputCheckboxes.css';\nimport * as nls from '../../../../nls.js';\nvar NLS_CASE_SENSITIVE_CHECKBOX_LABEL = nls.localize('caseDescription', \"Match Case\");\nvar NLS_WHOLE_WORD_CHECKBOX_LABEL = nls.localize('wordsDescription', \"Match Whole Word\");\nvar NLS_REGEX_CHECKBOX_LABEL = nls.localize('regexDescription', \"Use Regular Expression\");\n\nvar CaseSensitiveCheckbox =\n/** @class */\nfunction (_super) {\n  __extends(CaseSensitiveCheckbox, _super);\n\n  function CaseSensitiveCheckbox(opts) {\n    return _super.call(this, {\n      actionClassName: 'monaco-case-sensitive',\n      title: NLS_CASE_SENSITIVE_CHECKBOX_LABEL + opts.appendTitle,\n      isChecked: opts.isChecked,\n      inputActiveOptionBorder: opts.inputActiveOptionBorder\n    }) || this;\n  }\n\n  return CaseSensitiveCheckbox;\n}(Checkbox);\n\nexport { CaseSensitiveCheckbox };\n\nvar WholeWordsCheckbox =\n/** @class */\nfunction (_super) {\n  __extends(WholeWordsCheckbox, _super);\n\n  function WholeWordsCheckbox(opts) {\n    return _super.call(this, {\n      actionClassName: 'monaco-whole-word',\n      title: NLS_WHOLE_WORD_CHECKBOX_LABEL + opts.appendTitle,\n      isChecked: opts.isChecked,\n      inputActiveOptionBorder: opts.inputActiveOptionBorder\n    }) || this;\n  }\n\n  return WholeWordsCheckbox;\n}(Checkbox);\n\nexport { WholeWordsCheckbox };\n\nvar RegexCheckbox =\n/** @class */\nfunction (_super) {\n  __extends(RegexCheckbox, _super);\n\n  function RegexCheckbox(opts) {\n    return _super.call(this, {\n      actionClassName: 'monaco-regex',\n      title: NLS_REGEX_CHECKBOX_LABEL + opts.appendTitle,\n      isChecked: opts.isChecked,\n      inputActiveOptionBorder: opts.inputActiveOptionBorder\n    }) || this;\n  }\n\n  return RegexCheckbox;\n}(Checkbox);\n\nexport { RegexCheckbox };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport * as dom from '../../../base/browser/dom.js';\nimport { CaseSensitiveCheckbox, RegexCheckbox, WholeWordsCheckbox } from '../../../base/browser/ui/findinput/findInputCheckboxes.js';\nimport { Widget } from '../../../base/browser/ui/widget.js';\nimport { RunOnceScheduler } from '../../../base/common/async.js';\nimport { FIND_IDS } from './findModel.js';\nimport { contrastBorder, editorWidgetBackground, inputActiveOptionBorder, widgetShadow } from '../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\n\nvar FindOptionsWidget =\n/** @class */\nfunction (_super) {\n  __extends(FindOptionsWidget, _super);\n\n  function FindOptionsWidget(editor, state, keybindingService, themeService) {\n    var _this = _super.call(this) || this;\n\n    _this._hideSoon = _this._register(new RunOnceScheduler(function () {\n      return _this._hide();\n    }, 2000));\n    _this._isVisible = false;\n    _this._editor = editor;\n    _this._state = state;\n    _this._keybindingService = keybindingService;\n    _this._domNode = document.createElement('div');\n    _this._domNode.className = 'findOptionsWidget';\n    _this._domNode.style.display = 'none';\n    _this._domNode.style.top = '10px';\n\n    _this._domNode.setAttribute('role', 'presentation');\n\n    _this._domNode.setAttribute('aria-hidden', 'true');\n\n    var inputActiveOptionBorderColor = themeService.getTheme().getColor(inputActiveOptionBorder);\n    _this.caseSensitive = _this._register(new CaseSensitiveCheckbox({\n      appendTitle: _this._keybindingLabelFor(FIND_IDS.ToggleCaseSensitiveCommand),\n      isChecked: _this._state.matchCase,\n      inputActiveOptionBorder: inputActiveOptionBorderColor\n    }));\n\n    _this._domNode.appendChild(_this.caseSensitive.domNode);\n\n    _this._register(_this.caseSensitive.onChange(function () {\n      _this._state.change({\n        matchCase: _this.caseSensitive.checked\n      }, false);\n    }));\n\n    _this.wholeWords = _this._register(new WholeWordsCheckbox({\n      appendTitle: _this._keybindingLabelFor(FIND_IDS.ToggleWholeWordCommand),\n      isChecked: _this._state.wholeWord,\n      inputActiveOptionBorder: inputActiveOptionBorderColor\n    }));\n\n    _this._domNode.appendChild(_this.wholeWords.domNode);\n\n    _this._register(_this.wholeWords.onChange(function () {\n      _this._state.change({\n        wholeWord: _this.wholeWords.checked\n      }, false);\n    }));\n\n    _this.regex = _this._register(new RegexCheckbox({\n      appendTitle: _this._keybindingLabelFor(FIND_IDS.ToggleRegexCommand),\n      isChecked: _this._state.isRegex,\n      inputActiveOptionBorder: inputActiveOptionBorderColor\n    }));\n\n    _this._domNode.appendChild(_this.regex.domNode);\n\n    _this._register(_this.regex.onChange(function () {\n      _this._state.change({\n        isRegex: _this.regex.checked\n      }, false);\n    }));\n\n    _this._editor.addOverlayWidget(_this);\n\n    _this._register(_this._state.onFindReplaceStateChange(function (e) {\n      var somethingChanged = false;\n\n      if (e.isRegex) {\n        _this.regex.checked = _this._state.isRegex;\n        somethingChanged = true;\n      }\n\n      if (e.wholeWord) {\n        _this.wholeWords.checked = _this._state.wholeWord;\n        somethingChanged = true;\n      }\n\n      if (e.matchCase) {\n        _this.caseSensitive.checked = _this._state.matchCase;\n        somethingChanged = true;\n      }\n\n      if (!_this._state.isRevealed && somethingChanged) {\n        _this._revealTemporarily();\n      }\n    }));\n\n    _this._register(dom.addDisposableNonBubblingMouseOutListener(_this._domNode, function (e) {\n      return _this._onMouseOut();\n    }));\n\n    _this._register(dom.addDisposableListener(_this._domNode, 'mouseover', function (e) {\n      return _this._onMouseOver();\n    }));\n\n    _this._applyTheme(themeService.getTheme());\n\n    _this._register(themeService.onThemeChange(_this._applyTheme.bind(_this)));\n\n    return _this;\n  }\n\n  FindOptionsWidget.prototype._keybindingLabelFor = function (actionId) {\n    var kb = this._keybindingService.lookupKeybinding(actionId);\n\n    if (!kb) {\n      return '';\n    }\n\n    return \" (\" + kb.getLabel() + \")\";\n  };\n\n  FindOptionsWidget.prototype.dispose = function () {\n    this._editor.removeOverlayWidget(this);\n\n    _super.prototype.dispose.call(this);\n  }; // ----- IOverlayWidget API\n\n\n  FindOptionsWidget.prototype.getId = function () {\n    return FindOptionsWidget.ID;\n  };\n\n  FindOptionsWidget.prototype.getDomNode = function () {\n    return this._domNode;\n  };\n\n  FindOptionsWidget.prototype.getPosition = function () {\n    return {\n      preference: 0\n      /* TOP_RIGHT_CORNER */\n\n    };\n  };\n\n  FindOptionsWidget.prototype.highlightFindOptions = function () {\n    this._revealTemporarily();\n  };\n\n  FindOptionsWidget.prototype._revealTemporarily = function () {\n    this._show();\n\n    this._hideSoon.schedule();\n  };\n\n  FindOptionsWidget.prototype._onMouseOut = function () {\n    this._hideSoon.schedule();\n  };\n\n  FindOptionsWidget.prototype._onMouseOver = function () {\n    this._hideSoon.cancel();\n  };\n\n  FindOptionsWidget.prototype._show = function () {\n    if (this._isVisible) {\n      return;\n    }\n\n    this._isVisible = true;\n    this._domNode.style.display = 'block';\n  };\n\n  FindOptionsWidget.prototype._hide = function () {\n    if (!this._isVisible) {\n      return;\n    }\n\n    this._isVisible = false;\n    this._domNode.style.display = 'none';\n  };\n\n  FindOptionsWidget.prototype._applyTheme = function (theme) {\n    var inputStyles = {\n      inputActiveOptionBorder: theme.getColor(inputActiveOptionBorder)\n    };\n    this.caseSensitive.style(inputStyles);\n    this.wholeWords.style(inputStyles);\n    this.regex.style(inputStyles);\n  };\n\n  FindOptionsWidget.ID = 'editor.contrib.findOptionsWidget';\n  return FindOptionsWidget;\n}(Widget);\n\nexport { FindOptionsWidget };\nregisterThemingParticipant(function (theme, collector) {\n  var widgetBackground = theme.getColor(editorWidgetBackground);\n\n  if (widgetBackground) {\n    collector.addRule(\".monaco-editor .findOptionsWidget { background-color: \" + widgetBackground + \"; }\");\n  }\n\n  var widgetShadowColor = theme.getColor(widgetShadow);\n\n  if (widgetShadowColor) {\n    collector.addRule(\".monaco-editor .findOptionsWidget { box-shadow: 0 2px 8px \" + widgetShadowColor + \"; }\");\n  }\n\n  var hcBorder = theme.getColor(contrastBorder);\n\n  if (hcBorder) {\n    collector.addRule(\".monaco-editor .findOptionsWidget { border: 2px solid \" + hcBorder + \"; }\");\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../base/common/event.js';\nimport { Range } from '../../common/core/range.js';\n\nfunction effectiveOptionValue(override, value) {\n  if (override === 1\n  /* True */\n  ) {\n      return true;\n    }\n\n  if (override === 2\n  /* False */\n  ) {\n      return false;\n    }\n\n  return value;\n}\n\nvar FindReplaceState =\n/** @class */\nfunction () {\n  function FindReplaceState() {\n    this._searchString = '';\n    this._replaceString = '';\n    this._isRevealed = false;\n    this._isReplaceRevealed = false;\n    this._isRegex = false;\n    this._isRegexOverride = 0\n    /* NotSet */\n    ;\n    this._wholeWord = false;\n    this._wholeWordOverride = 0\n    /* NotSet */\n    ;\n    this._matchCase = false;\n    this._matchCaseOverride = 0\n    /* NotSet */\n    ;\n    this._searchScope = null;\n    this._matchesPosition = 0;\n    this._matchesCount = 0;\n    this._currentMatch = null;\n    this._onFindReplaceStateChange = new Emitter();\n  }\n\n  Object.defineProperty(FindReplaceState.prototype, \"searchString\", {\n    get: function get() {\n      return this._searchString;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FindReplaceState.prototype, \"replaceString\", {\n    get: function get() {\n      return this._replaceString;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FindReplaceState.prototype, \"isRevealed\", {\n    get: function get() {\n      return this._isRevealed;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FindReplaceState.prototype, \"isReplaceRevealed\", {\n    get: function get() {\n      return this._isReplaceRevealed;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FindReplaceState.prototype, \"isRegex\", {\n    get: function get() {\n      return effectiveOptionValue(this._isRegexOverride, this._isRegex);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FindReplaceState.prototype, \"wholeWord\", {\n    get: function get() {\n      return effectiveOptionValue(this._wholeWordOverride, this._wholeWord);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FindReplaceState.prototype, \"matchCase\", {\n    get: function get() {\n      return effectiveOptionValue(this._matchCaseOverride, this._matchCase);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FindReplaceState.prototype, \"actualIsRegex\", {\n    get: function get() {\n      return this._isRegex;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FindReplaceState.prototype, \"actualWholeWord\", {\n    get: function get() {\n      return this._wholeWord;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FindReplaceState.prototype, \"actualMatchCase\", {\n    get: function get() {\n      return this._matchCase;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FindReplaceState.prototype, \"searchScope\", {\n    get: function get() {\n      return this._searchScope;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FindReplaceState.prototype, \"matchesPosition\", {\n    get: function get() {\n      return this._matchesPosition;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FindReplaceState.prototype, \"matchesCount\", {\n    get: function get() {\n      return this._matchesCount;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FindReplaceState.prototype, \"currentMatch\", {\n    get: function get() {\n      return this._currentMatch;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FindReplaceState.prototype, \"onFindReplaceStateChange\", {\n    get: function get() {\n      return this._onFindReplaceStateChange.event;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  FindReplaceState.prototype.dispose = function () {};\n\n  FindReplaceState.prototype.changeMatchInfo = function (matchesPosition, matchesCount, currentMatch) {\n    var changeEvent = {\n      moveCursor: false,\n      updateHistory: false,\n      searchString: false,\n      replaceString: false,\n      isRevealed: false,\n      isReplaceRevealed: false,\n      isRegex: false,\n      wholeWord: false,\n      matchCase: false,\n      searchScope: false,\n      matchesPosition: false,\n      matchesCount: false,\n      currentMatch: false\n    };\n    var somethingChanged = false;\n\n    if (matchesCount === 0) {\n      matchesPosition = 0;\n    }\n\n    if (matchesPosition > matchesCount) {\n      matchesPosition = matchesCount;\n    }\n\n    if (this._matchesPosition !== matchesPosition) {\n      this._matchesPosition = matchesPosition;\n      changeEvent.matchesPosition = true;\n      somethingChanged = true;\n    }\n\n    if (this._matchesCount !== matchesCount) {\n      this._matchesCount = matchesCount;\n      changeEvent.matchesCount = true;\n      somethingChanged = true;\n    }\n\n    if (typeof currentMatch !== 'undefined') {\n      if (!Range.equalsRange(this._currentMatch, currentMatch)) {\n        this._currentMatch = currentMatch;\n        changeEvent.currentMatch = true;\n        somethingChanged = true;\n      }\n    }\n\n    if (somethingChanged) {\n      this._onFindReplaceStateChange.fire(changeEvent);\n    }\n  };\n\n  FindReplaceState.prototype.change = function (newState, moveCursor, updateHistory) {\n    if (updateHistory === void 0) {\n      updateHistory = true;\n    }\n\n    var changeEvent = {\n      moveCursor: moveCursor,\n      updateHistory: updateHistory,\n      searchString: false,\n      replaceString: false,\n      isRevealed: false,\n      isReplaceRevealed: false,\n      isRegex: false,\n      wholeWord: false,\n      matchCase: false,\n      searchScope: false,\n      matchesPosition: false,\n      matchesCount: false,\n      currentMatch: false\n    };\n    var somethingChanged = false;\n    var oldEffectiveIsRegex = this.isRegex;\n    var oldEffectiveWholeWords = this.wholeWord;\n    var oldEffectiveMatchCase = this.matchCase;\n\n    if (typeof newState.searchString !== 'undefined') {\n      if (this._searchString !== newState.searchString) {\n        this._searchString = newState.searchString;\n        changeEvent.searchString = true;\n        somethingChanged = true;\n      }\n    }\n\n    if (typeof newState.replaceString !== 'undefined') {\n      if (this._replaceString !== newState.replaceString) {\n        this._replaceString = newState.replaceString;\n        changeEvent.replaceString = true;\n        somethingChanged = true;\n      }\n    }\n\n    if (typeof newState.isRevealed !== 'undefined') {\n      if (this._isRevealed !== newState.isRevealed) {\n        this._isRevealed = newState.isRevealed;\n        changeEvent.isRevealed = true;\n        somethingChanged = true;\n      }\n    }\n\n    if (typeof newState.isReplaceRevealed !== 'undefined') {\n      if (this._isReplaceRevealed !== newState.isReplaceRevealed) {\n        this._isReplaceRevealed = newState.isReplaceRevealed;\n        changeEvent.isReplaceRevealed = true;\n        somethingChanged = true;\n      }\n    }\n\n    if (typeof newState.isRegex !== 'undefined') {\n      this._isRegex = newState.isRegex;\n    }\n\n    if (typeof newState.wholeWord !== 'undefined') {\n      this._wholeWord = newState.wholeWord;\n    }\n\n    if (typeof newState.matchCase !== 'undefined') {\n      this._matchCase = newState.matchCase;\n    }\n\n    if (typeof newState.searchScope !== 'undefined') {\n      if (!Range.equalsRange(this._searchScope, newState.searchScope)) {\n        this._searchScope = newState.searchScope;\n        changeEvent.searchScope = true;\n        somethingChanged = true;\n      }\n    } // Overrides get set when they explicitly come in and get reset anytime something else changes\n\n\n    this._isRegexOverride = typeof newState.isRegexOverride !== 'undefined' ? newState.isRegexOverride : 0\n    /* NotSet */\n    ;\n    this._wholeWordOverride = typeof newState.wholeWordOverride !== 'undefined' ? newState.wholeWordOverride : 0\n    /* NotSet */\n    ;\n    this._matchCaseOverride = typeof newState.matchCaseOverride !== 'undefined' ? newState.matchCaseOverride : 0\n    /* NotSet */\n    ;\n\n    if (oldEffectiveIsRegex !== this.isRegex) {\n      somethingChanged = true;\n      changeEvent.isRegex = true;\n    }\n\n    if (oldEffectiveWholeWords !== this.wholeWord) {\n      somethingChanged = true;\n      changeEvent.wholeWord = true;\n    }\n\n    if (oldEffectiveMatchCase !== this.matchCase) {\n      somethingChanged = true;\n      changeEvent.matchCase = true;\n    }\n\n    if (somethingChanged) {\n      this._onFindReplaceStateChange.fire(changeEvent);\n    }\n  };\n\n  return FindReplaceState;\n}();\n\nexport { FindReplaceState };","/**\n * marked - a markdown parser\n * Copyright (c) 2011-2014, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/markedjs/marked\n */\n// BEGIN MONACOCHANGE\nvar __marked_exports; // END MONACOCHANGE\n\n\n;\n(function (root) {\n  'use strict';\n  /**\n   * Block-Level Grammar\n   */\n\n  var block = {\n    newline: /^\\n+/,\n    code: /^( {4}[^\\n]+\\n*)+/,\n    fences: noop,\n    hr: /^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)/,\n    heading: /^ *(#{1,6}) *([^\\n]+?) *(?:#+ *)?(?:\\n+|$)/,\n    nptable: noop,\n    blockquote: /^( {0,3}> ?(paragraph|[^\\n]*)(?:\\n|$))+/,\n    list: /^( {0,3})(bull) [\\s\\S]+?(?:hr|def|\\n{2,}(?! )(?!\\1bull )\\n*|\\s*$)/,\n    html: '^ {0,3}(?:' // optional indentation\n    + '<(script|pre|style)[\\\\s>][\\\\s\\\\S]*?(?:</\\\\1>[^\\\\n]*\\\\n+|$)' // (1)\n    + '|comment[^\\\\n]*(\\\\n+|$)' // (2)\n    + '|<\\\\?[\\\\s\\\\S]*?\\\\?>\\\\n*' // (3)\n    + '|<![A-Z][\\\\s\\\\S]*?>\\\\n*' // (4)\n    + '|<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>\\\\n*' // (5)\n    + '|</?(tag)(?: +|\\\\n|/?>)[\\\\s\\\\S]*?(?:\\\\n{2,}|$)' // (6)\n    + '|<(?!script|pre|style)([a-z][\\\\w-]*)(?:attribute)*? */?>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:\\\\n{2,}|$)' // (7) open tag\n    + '|</(?!script|pre|style)[a-z][\\\\w-]*\\\\s*>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:\\\\n{2,}|$)' // (7) closing tag\n    + ')',\n    def: /^ {0,3}\\[(label)\\]: *\\n? *<?([^\\s>]+)>?(?:(?: +\\n? *| *\\n *)(title))? *(?:\\n+|$)/,\n    table: noop,\n    lheading: /^([^\\n]+)\\n *(=|-){2,} *(?:\\n+|$)/,\n    paragraph: /^([^\\n]+(?:\\n(?!hr|heading|lheading| {0,3}>|<\\/?(?:tag)(?: +|\\n|\\/?>)|<(?:script|pre|style|!--))[^\\n]+)*)/,\n    text: /^[^\\n]+/\n  };\n  block._label = /(?!\\s*\\])(?:\\\\[\\[\\]]|[^\\[\\]])+/;\n  block._title = /(?:\"(?:\\\\\"?|[^\"\\\\])*\"|'[^'\\n]*(?:\\n[^'\\n]+)*\\n?'|\\([^()]*\\))/;\n  block.def = edit(block.def).replace('label', block._label).replace('title', block._title).getRegex();\n  block.bullet = /(?:[*+-]|\\d{1,9}\\.)/;\n  block.item = /^( *)(bull) ?[^\\n]*(?:\\n(?!\\1bull ?)[^\\n]*)*/;\n  block.item = edit(block.item, 'gm').replace(/bull/g, block.bullet).getRegex();\n  block.list = edit(block.list).replace(/bull/g, block.bullet).replace('hr', '\\\\n+(?=\\\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$))').replace('def', '\\\\n+(?=' + block.def.source + ')').getRegex();\n  block._tag = 'address|article|aside|base|basefont|blockquote|body|caption' + '|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption' + '|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe' + '|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option' + '|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr' + '|track|ul';\n  block._comment = /<!--(?!-?>)[\\s\\S]*?-->/;\n  block.html = edit(block.html, 'i').replace('comment', block._comment).replace('tag', block._tag).replace('attribute', / +[a-zA-Z:_][\\w.:-]*(?: *= *\"[^\"\\n]*\"| *= *'[^'\\n]*'| *= *[^\\s\"'=<>`]+)?/).getRegex();\n  block.paragraph = edit(block.paragraph).replace('hr', block.hr).replace('heading', block.heading).replace('lheading', block.lheading).replace('tag', block._tag) // pars can be interrupted by type (6) html blocks\n  .getRegex();\n  block.blockquote = edit(block.blockquote).replace('paragraph', block.paragraph).getRegex();\n  /**\n   * Normal Block Grammar\n   */\n\n  block.normal = merge({}, block);\n  /**\n   * GFM Block Grammar\n   */\n\n  block.gfm = merge({}, block.normal, {\n    fences: /^ {0,3}(`{3,}|~{3,})([^`\\n]*)\\n(?:|([\\s\\S]*?)\\n)(?: {0,3}\\1[~`]* *(?:\\n+|$)|$)/,\n    paragraph: /^/,\n    heading: /^ *(#{1,6}) +([^\\n]+?) *#* *(?:\\n+|$)/\n  });\n  block.gfm.paragraph = edit(block.paragraph).replace('(?!', '(?!' + block.gfm.fences.source.replace('\\\\1', '\\\\2') + '|' + block.list.source.replace('\\\\1', '\\\\3') + '|').getRegex();\n  /**\n   * GFM + Tables Block Grammar\n   */\n\n  block.tables = merge({}, block.gfm, {\n    nptable: /^ *([^|\\n ].*\\|.*)\\n *([-:]+ *\\|[-| :]*)(?:\\n((?:.*[^>\\n ].*(?:\\n|$))*)\\n*|$)/,\n    table: /^ *\\|(.+)\\n *\\|?( *[-:]+[-| :]*)(?:\\n((?: *[^>\\n ].*(?:\\n|$))*)\\n*|$)/\n  });\n  /**\n   * Pedantic grammar\n   */\n\n  block.pedantic = merge({}, block.normal, {\n    html: edit('^ *(?:comment *(?:\\\\n|\\\\s*$)' + '|<(tag)[\\\\s\\\\S]+?</\\\\1> *(?:\\\\n{2,}|\\\\s*$)' // closed tag\n    + '|<tag(?:\"[^\"]*\"|\\'[^\\']*\\'|\\\\s[^\\'\"/>\\\\s]*)*?/?> *(?:\\\\n{2,}|\\\\s*$))').replace('comment', block._comment).replace(/tag/g, '(?!(?:' + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub' + '|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)' + '\\\\b)\\\\w+(?!:|[^\\\\w\\\\s@]*@)\\\\b').getRegex(),\n    def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +([\"(][^\\n]+[\")]))? *(?:\\n+|$)/\n  });\n  /**\n   * Block Lexer\n   */\n\n  function Lexer(options) {\n    this.tokens = [];\n    this.tokens.links = Object.create(null);\n    this.options = options || marked.defaults;\n    this.rules = block.normal;\n\n    if (this.options.pedantic) {\n      this.rules = block.pedantic;\n    } else if (this.options.gfm) {\n      if (this.options.tables) {\n        this.rules = block.tables;\n      } else {\n        this.rules = block.gfm;\n      }\n    }\n  }\n  /**\n   * Expose Block Rules\n   */\n\n\n  Lexer.rules = block;\n  /**\n   * Static Lex Method\n   */\n\n  Lexer.lex = function (src, options) {\n    var lexer = new Lexer(options);\n    return lexer.lex(src);\n  };\n  /**\n   * Preprocessing\n   */\n\n\n  Lexer.prototype.lex = function (src) {\n    src = src.replace(/\\r\\n|\\r/g, '\\n').replace(/\\t/g, '    ').replace(/\\u00a0/g, ' ').replace(/\\u2424/g, '\\n');\n    return this.token(src, true);\n  };\n  /**\n   * Lexing\n   */\n\n\n  Lexer.prototype.token = function (src, top) {\n    src = src.replace(/^ +$/gm, '');\n    var next, loose, cap, bull, b, item, listStart, listItems, t, space, i, tag, l, isordered, istask, ischecked;\n\n    while (src) {\n      // newline\n      if (cap = this.rules.newline.exec(src)) {\n        src = src.substring(cap[0].length);\n\n        if (cap[0].length > 1) {\n          this.tokens.push({\n            type: 'space'\n          });\n        }\n      } // code\n\n\n      if (cap = this.rules.code.exec(src)) {\n        src = src.substring(cap[0].length);\n        cap = cap[0].replace(/^ {4}/gm, '');\n        this.tokens.push({\n          type: 'code',\n          text: !this.options.pedantic ? rtrim(cap, '\\n') : cap\n        });\n        continue;\n      } // fences (gfm)\n\n\n      if (cap = this.rules.fences.exec(src)) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'code',\n          lang: cap[2] ? cap[2].trim() : cap[2],\n          text: cap[3] || ''\n        });\n        continue;\n      } // heading\n\n\n      if (cap = this.rules.heading.exec(src)) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'heading',\n          depth: cap[1].length,\n          text: cap[2]\n        });\n        continue;\n      } // table no leading pipe (gfm)\n\n\n      if (cap = this.rules.nptable.exec(src)) {\n        item = {\n          type: 'table',\n          header: splitCells(cap[1].replace(/^ *| *\\| *$/g, '')),\n          align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n          cells: cap[3] ? cap[3].replace(/\\n$/, '').split('\\n') : []\n        };\n\n        if (item.header.length === item.align.length) {\n          src = src.substring(cap[0].length);\n\n          for (i = 0; i < item.align.length; i++) {\n            if (/^ *-+: *$/.test(item.align[i])) {\n              item.align[i] = 'right';\n            } else if (/^ *:-+: *$/.test(item.align[i])) {\n              item.align[i] = 'center';\n            } else if (/^ *:-+ *$/.test(item.align[i])) {\n              item.align[i] = 'left';\n            } else {\n              item.align[i] = null;\n            }\n          }\n\n          for (i = 0; i < item.cells.length; i++) {\n            item.cells[i] = splitCells(item.cells[i], item.header.length);\n          }\n\n          this.tokens.push(item);\n          continue;\n        }\n      } // hr\n\n\n      if (cap = this.rules.hr.exec(src)) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'hr'\n        });\n        continue;\n      } // blockquote\n\n\n      if (cap = this.rules.blockquote.exec(src)) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'blockquote_start'\n        });\n        cap = cap[0].replace(/^ *> ?/gm, ''); // Pass `top` to keep the current\n        // \"toplevel\" state. This is exactly\n        // how markdown.pl works.\n\n        this.token(cap, top);\n        this.tokens.push({\n          type: 'blockquote_end'\n        });\n        continue;\n      } // list\n\n\n      if (cap = this.rules.list.exec(src)) {\n        src = src.substring(cap[0].length);\n        bull = cap[2];\n        isordered = bull.length > 1;\n        listStart = {\n          type: 'list_start',\n          ordered: isordered,\n          start: isordered ? +bull : '',\n          loose: false\n        };\n        this.tokens.push(listStart); // Get each top-level item.\n\n        cap = cap[0].match(this.rules.item);\n        listItems = [];\n        next = false;\n        l = cap.length;\n        i = 0;\n\n        for (; i < l; i++) {\n          item = cap[i]; // Remove the list item's bullet\n          // so it is seen as the next token.\n\n          space = item.length;\n          item = item.replace(/^ *([*+-]|\\d+\\.) */, ''); // Outdent whatever the\n          // list item contains. Hacky.\n\n          if (~item.indexOf('\\n ')) {\n            space -= item.length;\n            item = !this.options.pedantic ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '') : item.replace(/^ {1,4}/gm, '');\n          } // Determine whether the next list item belongs here.\n          // Backpedal if it does not belong in this list.\n\n\n          if (i !== l - 1) {\n            b = block.bullet.exec(cap[i + 1])[0];\n\n            if (bull.length > 1 ? b.length === 1 : b.length > 1 || this.options.smartLists && b !== bull) {\n              src = cap.slice(i + 1).join('\\n') + src;\n              i = l - 1;\n            }\n          } // Determine whether item is loose or not.\n          // Use: /(^|\\n)(?! )[^\\n]+\\n\\n(?!\\s*$)/\n          // for discount behavior.\n\n\n          loose = next || /\\n\\n(?!\\s*$)/.test(item);\n\n          if (i !== l - 1) {\n            next = item.charAt(item.length - 1) === '\\n';\n            if (!loose) loose = next;\n          }\n\n          if (loose) {\n            listStart.loose = true;\n          } // Check for task list items\n\n\n          istask = /^\\[[ xX]\\] /.test(item);\n          ischecked = undefined;\n\n          if (istask) {\n            ischecked = item[1] !== ' ';\n            item = item.replace(/^\\[[ xX]\\] +/, '');\n          }\n\n          t = {\n            type: 'list_item_start',\n            task: istask,\n            checked: ischecked,\n            loose: loose\n          };\n          listItems.push(t);\n          this.tokens.push(t); // Recurse.\n\n          this.token(item, false);\n          this.tokens.push({\n            type: 'list_item_end'\n          });\n        }\n\n        if (listStart.loose) {\n          l = listItems.length;\n          i = 0;\n\n          for (; i < l; i++) {\n            listItems[i].loose = true;\n          }\n        }\n\n        this.tokens.push({\n          type: 'list_end'\n        });\n        continue;\n      } // html\n\n\n      if (cap = this.rules.html.exec(src)) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: this.options.sanitize ? 'paragraph' : 'html',\n          pre: !this.options.sanitizer && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\n          text: cap[0]\n        });\n        continue;\n      } // def\n\n\n      if (top && (cap = this.rules.def.exec(src))) {\n        src = src.substring(cap[0].length);\n        if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\n        tag = cap[1].toLowerCase().replace(/\\s+/g, ' ');\n\n        if (!this.tokens.links[tag]) {\n          this.tokens.links[tag] = {\n            href: cap[2],\n            title: cap[3]\n          };\n        }\n\n        continue;\n      } // table (gfm)\n\n\n      if (cap = this.rules.table.exec(src)) {\n        item = {\n          type: 'table',\n          header: splitCells(cap[1].replace(/^ *| *\\| *$/g, '')),\n          align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n          cells: cap[3] ? cap[3].replace(/\\n$/, '').split('\\n') : []\n        };\n\n        if (item.header.length === item.align.length) {\n          src = src.substring(cap[0].length);\n\n          for (i = 0; i < item.align.length; i++) {\n            if (/^ *-+: *$/.test(item.align[i])) {\n              item.align[i] = 'right';\n            } else if (/^ *:-+: *$/.test(item.align[i])) {\n              item.align[i] = 'center';\n            } else if (/^ *:-+ *$/.test(item.align[i])) {\n              item.align[i] = 'left';\n            } else {\n              item.align[i] = null;\n            }\n          }\n\n          for (i = 0; i < item.cells.length; i++) {\n            item.cells[i] = splitCells(item.cells[i].replace(/^ *\\| *| *\\| *$/g, ''), item.header.length);\n          }\n\n          this.tokens.push(item);\n          continue;\n        }\n      } // lheading\n\n\n      if (cap = this.rules.lheading.exec(src)) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'heading',\n          depth: cap[2] === '=' ? 1 : 2,\n          text: cap[1]\n        });\n        continue;\n      } // top-level paragraph\n\n\n      if (top && (cap = this.rules.paragraph.exec(src))) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'paragraph',\n          text: cap[1].charAt(cap[1].length - 1) === '\\n' ? cap[1].slice(0, -1) : cap[1]\n        });\n        continue;\n      } // text\n\n\n      if (cap = this.rules.text.exec(src)) {\n        // Top-level should never reach here.\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'text',\n          text: cap[0]\n        });\n        continue;\n      }\n\n      if (src) {\n        throw new Error('Infinite loop on byte: ' + src.charCodeAt(0));\n      }\n    }\n\n    return this.tokens;\n  };\n  /**\n   * Inline-Level Grammar\n   */\n\n\n  var inline = {\n    escape: /^\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/,\n    autolink: /^<(scheme:[^\\s\\x00-\\x1f<>]*|email)>/,\n    url: noop,\n    tag: '^comment' + '|^</[a-zA-Z][\\\\w:-]*\\\\s*>' // self-closing tag\n    + '|^<[a-zA-Z][\\\\w-]*(?:attribute)*?\\\\s*/?>' // open tag\n    + '|^<\\\\?[\\\\s\\\\S]*?\\\\?>' // processing instruction, e.g. <?php ?>\n    + '|^<![a-zA-Z]+\\\\s[\\\\s\\\\S]*?>' // declaration, e.g. <!DOCTYPE html>\n    + '|^<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>',\n    // CDATA section\n    link: /^!?\\[(label)\\]\\(href(?:\\s+(title))?\\s*\\)/,\n    reflink: /^!?\\[(label)\\]\\[(?!\\s*\\])((?:\\\\[\\[\\]]?|[^\\[\\]\\\\])+)\\]/,\n    nolink: /^!?\\[(?!\\s*\\])((?:\\[[^\\[\\]]*\\]|\\\\[\\[\\]]|[^\\[\\]])*)\\](?:\\[\\])?/,\n    strong: /^__([^\\s_])__(?!_)|^\\*\\*([^\\s*])\\*\\*(?!\\*)|^__([^\\s][\\s\\S]*?[^\\s])__(?!_)|^\\*\\*([^\\s][\\s\\S]*?[^\\s])\\*\\*(?!\\*)/,\n    em: /^_([^\\s_])_(?!_)|^\\*([^\\s*\"<\\[])\\*(?!\\*)|^_([^\\s][\\s\\S]*?[^\\s_])_(?!_|[^\\spunctuation])|^_([^\\s_][\\s\\S]*?[^\\s])_(?!_|[^\\spunctuation])|^\\*([^\\s\"<\\[][\\s\\S]*?[^\\s*])\\*(?!\\*)|^\\*([^\\s*\"<\\[][\\s\\S]*?[^\\s])\\*(?!\\*)/,\n    code: /^(`+)([^`]|[^`][\\s\\S]*?[^`])\\1(?!`)/,\n    br: /^( {2,}|\\\\)\\n(?!\\s*$)/,\n    del: noop,\n    text: /^(`+|[^`])(?:[\\s\\S]*?(?:(?=[\\\\<!\\[`*]|\\b_|$)|[^ ](?= {2,}\\n))|(?= {2,}\\n))/\n  }; // list of punctuation marks from common mark spec\n  // without ` and ] to workaround Rule 17 (inline code blocks/links)\n\n  inline._punctuation = '!\"#$%&\\'()*+,\\\\-./:;<=>?@\\\\[^_{|}~';\n  inline.em = edit(inline.em).replace(/punctuation/g, inline._punctuation).getRegex();\n  inline._escapes = /\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/g;\n  inline._scheme = /[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;\n  inline._email = /[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;\n  inline.autolink = edit(inline.autolink).replace('scheme', inline._scheme).replace('email', inline._email).getRegex();\n  inline._attribute = /\\s+[a-zA-Z:_][\\w.:-]*(?:\\s*=\\s*\"[^\"]*\"|\\s*=\\s*'[^']*'|\\s*=\\s*[^\\s\"'=<>`]+)?/;\n  inline.tag = edit(inline.tag).replace('comment', block._comment).replace('attribute', inline._attribute).getRegex();\n  inline._label = /(?:\\[[^\\[\\]]*\\]|\\\\[\\[\\]]?|`[^`]*`|`(?!`)|[^\\[\\]\\\\`])*?/;\n  inline._href = /\\s*(<(?:\\\\[<>]?|[^\\s<>\\\\])*>|[^\\s\\x00-\\x1f]*)/;\n  inline._title = /\"(?:\\\\\"?|[^\"\\\\])*\"|'(?:\\\\'?|[^'\\\\])*'|\\((?:\\\\\\)?|[^)\\\\])*\\)/;\n  inline.link = edit(inline.link).replace('label', inline._label).replace('href', inline._href).replace('title', inline._title).getRegex();\n  inline.reflink = edit(inline.reflink).replace('label', inline._label).getRegex();\n  /**\n   * Normal Inline Grammar\n   */\n\n  inline.normal = merge({}, inline);\n  /**\n   * Pedantic Inline Grammar\n   */\n\n  inline.pedantic = merge({}, inline.normal, {\n    strong: /^__(?=\\S)([\\s\\S]*?\\S)__(?!_)|^\\*\\*(?=\\S)([\\s\\S]*?\\S)\\*\\*(?!\\*)/,\n    em: /^_(?=\\S)([\\s\\S]*?\\S)_(?!_)|^\\*(?=\\S)([\\s\\S]*?\\S)\\*(?!\\*)/,\n    link: edit(/^!?\\[(label)\\]\\((.*?)\\)/).replace('label', inline._label).getRegex(),\n    reflink: edit(/^!?\\[(label)\\]\\s*\\[([^\\]]*)\\]/).replace('label', inline._label).getRegex()\n  });\n  /**\n   * GFM Inline Grammar\n   */\n\n  inline.gfm = merge({}, inline.normal, {\n    escape: edit(inline.escape).replace('])', '~|])').getRegex(),\n    _extended_email: /[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,\n    url: /^((?:ftp|https?):\\/\\/|www\\.)(?:[a-zA-Z0-9\\-]+\\.?)+[^\\s<]*|^email/,\n    _backpedal: /(?:[^?!.,:;*_~()&]+|\\([^)]*\\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,\n    del: /^~+(?=\\S)([\\s\\S]*?\\S)~+/,\n    text: /^(`+|[^`])(?:[\\s\\S]*?(?:(?=[\\\\<!\\[`*~]|\\b_|https?:\\/\\/|ftp:\\/\\/|www\\.|$)|[^ ](?= {2,}\\n)|[^a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-](?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@))|(?= {2,}\\n|[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@))/\n  });\n  inline.gfm.url = edit(inline.gfm.url, 'i').replace('email', inline.gfm._extended_email).getRegex();\n  /**\n   * GFM + Line Breaks Inline Grammar\n   */\n\n  inline.breaks = merge({}, inline.gfm, {\n    br: edit(inline.br).replace('{2,}', '*').getRegex(),\n    text: edit(inline.gfm.text).replace(/\\{2,\\}/g, '*').getRegex()\n  });\n  /**\n   * Inline Lexer & Compiler\n   */\n\n  function InlineLexer(links, options) {\n    this.options = options || marked.defaults;\n    this.links = links;\n    this.rules = inline.normal;\n    this.renderer = this.options.renderer || new Renderer();\n    this.renderer.options = this.options;\n\n    if (!this.links) {\n      throw new Error('Tokens array requires a `links` property.');\n    }\n\n    if (this.options.pedantic) {\n      this.rules = inline.pedantic;\n    } else if (this.options.gfm) {\n      if (this.options.breaks) {\n        this.rules = inline.breaks;\n      } else {\n        this.rules = inline.gfm;\n      }\n    }\n  }\n  /**\n   * Expose Inline Rules\n   */\n\n\n  InlineLexer.rules = inline;\n  /**\n   * Static Lexing/Compiling Method\n   */\n\n  InlineLexer.output = function (src, links, options) {\n    var inline = new InlineLexer(links, options);\n    return inline.output(src);\n  };\n  /**\n   * Lexing/Compiling\n   */\n\n\n  InlineLexer.prototype.output = function (src) {\n    var out = '',\n        link,\n        text,\n        href,\n        title,\n        cap,\n        prevCapZero;\n\n    while (src) {\n      // escape\n      if (cap = this.rules.escape.exec(src)) {\n        src = src.substring(cap[0].length);\n        out += escape(cap[1]);\n        continue;\n      } // tag\n\n\n      if (cap = this.rules.tag.exec(src)) {\n        if (!this.inLink && /^<a /i.test(cap[0])) {\n          this.inLink = true;\n        } else if (this.inLink && /^<\\/a>/i.test(cap[0])) {\n          this.inLink = false;\n        }\n\n        if (!this.inRawBlock && /^<(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n          this.inRawBlock = true;\n        } else if (this.inRawBlock && /^<\\/(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n          this.inRawBlock = false;\n        }\n\n        src = src.substring(cap[0].length);\n        out += this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]) : cap[0];\n        continue;\n      } // link\n\n\n      if (cap = this.rules.link.exec(src)) {\n        var lastParenIndex = findClosingBracket(cap[2], '()');\n\n        if (lastParenIndex > -1) {\n          var linkLen = cap[0].length - (cap[2].length - lastParenIndex) - (cap[3] || '').length;\n          cap[2] = cap[2].substring(0, lastParenIndex);\n          cap[0] = cap[0].substring(0, linkLen).trim();\n          cap[3] = '';\n        }\n\n        src = src.substring(cap[0].length);\n        this.inLink = true;\n        href = cap[2];\n\n        if (this.options.pedantic) {\n          link = /^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/.exec(href);\n\n          if (link) {\n            href = link[1];\n            title = link[3];\n          } else {\n            title = '';\n          }\n        } else {\n          title = cap[3] ? cap[3].slice(1, -1) : '';\n        }\n\n        href = href.trim().replace(/^<([\\s\\S]*)>$/, '$1');\n        out += this.outputLink(cap, {\n          href: InlineLexer.escapes(href),\n          title: InlineLexer.escapes(title)\n        });\n        this.inLink = false;\n        continue;\n      } // reflink, nolink\n\n\n      if ((cap = this.rules.reflink.exec(src)) || (cap = this.rules.nolink.exec(src))) {\n        src = src.substring(cap[0].length);\n        link = (cap[2] || cap[1]).replace(/\\s+/g, ' ');\n        link = this.links[link.toLowerCase()];\n\n        if (!link || !link.href) {\n          out += cap[0].charAt(0);\n          src = cap[0].substring(1) + src;\n          continue;\n        }\n\n        this.inLink = true;\n        out += this.outputLink(cap, link);\n        this.inLink = false;\n        continue;\n      } // strong\n\n\n      if (cap = this.rules.strong.exec(src)) {\n        src = src.substring(cap[0].length);\n        out += this.renderer.strong(this.output(cap[4] || cap[3] || cap[2] || cap[1]));\n        continue;\n      } // em\n\n\n      if (cap = this.rules.em.exec(src)) {\n        src = src.substring(cap[0].length);\n        out += this.renderer.em(this.output(cap[6] || cap[5] || cap[4] || cap[3] || cap[2] || cap[1]));\n        continue;\n      } // code\n\n\n      if (cap = this.rules.code.exec(src)) {\n        src = src.substring(cap[0].length);\n        out += this.renderer.codespan(escape(cap[2].trim(), true));\n        continue;\n      } // br\n\n\n      if (cap = this.rules.br.exec(src)) {\n        src = src.substring(cap[0].length);\n        out += this.renderer.br();\n        continue;\n      } // del (gfm)\n\n\n      if (cap = this.rules.del.exec(src)) {\n        src = src.substring(cap[0].length);\n        out += this.renderer.del(this.output(cap[1]));\n        continue;\n      } // autolink\n\n\n      if (cap = this.rules.autolink.exec(src)) {\n        src = src.substring(cap[0].length);\n\n        if (cap[2] === '@') {\n          text = escape(this.mangle(cap[1]));\n          href = 'mailto:' + text;\n        } else {\n          text = escape(cap[1]);\n          href = text;\n        }\n\n        out += this.renderer.link(href, null, text);\n        continue;\n      } // url (gfm)\n\n\n      if (!this.inLink && (cap = this.rules.url.exec(src))) {\n        if (cap[2] === '@') {\n          text = escape(cap[0]);\n          href = 'mailto:' + text;\n        } else {\n          // do extended autolink path validation\n          do {\n            prevCapZero = cap[0];\n            cap[0] = this.rules._backpedal.exec(cap[0])[0];\n          } while (prevCapZero !== cap[0]);\n\n          text = escape(cap[0]);\n\n          if (cap[1] === 'www.') {\n            href = 'http://' + text;\n          } else {\n            href = text;\n          }\n        }\n\n        src = src.substring(cap[0].length);\n        out += this.renderer.link(href, null, text);\n        continue;\n      } // text\n\n\n      if (cap = this.rules.text.exec(src)) {\n        src = src.substring(cap[0].length);\n\n        if (this.inRawBlock) {\n          out += this.renderer.text(cap[0]);\n        } else {\n          out += this.renderer.text(escape(this.smartypants(cap[0])));\n        }\n\n        continue;\n      }\n\n      if (src) {\n        throw new Error('Infinite loop on byte: ' + src.charCodeAt(0));\n      }\n    }\n\n    return out;\n  };\n\n  InlineLexer.escapes = function (text) {\n    return text ? text.replace(InlineLexer.rules._escapes, '$1') : text;\n  };\n  /**\n   * Compile Link\n   */\n\n\n  InlineLexer.prototype.outputLink = function (cap, link) {\n    var href = link.href,\n        title = link.title ? escape(link.title) : null;\n    return cap[0].charAt(0) !== '!' ? this.renderer.link(href, title, this.output(cap[1])) : this.renderer.image(href, title, escape(cap[1]));\n  };\n  /**\n   * Smartypants Transformations\n   */\n\n\n  InlineLexer.prototype.smartypants = function (text) {\n    if (!this.options.smartypants) return text;\n    return text // em-dashes\n    .replace(/---/g, \"\\u2014\") // en-dashes\n    .replace(/--/g, \"\\u2013\") // opening singles\n    .replace(/(^|[-\\u2014/(\\[{\"\\s])'/g, \"$1\\u2018\") // closing singles & apostrophes\n    .replace(/'/g, \"\\u2019\") // opening doubles\n    .replace(/(^|[-\\u2014/(\\[{\\u2018\\s])\"/g, \"$1\\u201C\") // closing doubles\n    .replace(/\"/g, \"\\u201D\") // ellipses\n    .replace(/\\.{3}/g, \"\\u2026\");\n  };\n  /**\n   * Mangle Links\n   */\n\n\n  InlineLexer.prototype.mangle = function (text) {\n    if (!this.options.mangle) return text;\n    var out = '',\n        l = text.length,\n        i = 0,\n        ch;\n\n    for (; i < l; i++) {\n      ch = text.charCodeAt(i);\n\n      if (Math.random() > 0.5) {\n        ch = 'x' + ch.toString(16);\n      }\n\n      out += '&#' + ch + ';';\n    }\n\n    return out;\n  };\n  /**\n   * Renderer\n   */\n\n\n  function Renderer(options) {\n    this.options = options || marked.defaults;\n  }\n\n  Renderer.prototype.code = function (code, infostring, escaped) {\n    var lang = (infostring || '').match(/\\S*/)[0];\n\n    if (this.options.highlight) {\n      var out = this.options.highlight(code, lang);\n\n      if (out != null && out !== code) {\n        escaped = true;\n        code = out;\n      }\n    }\n\n    if (!lang) {\n      return '<pre><code>' + (escaped ? code : escape(code, true)) + '</code></pre>';\n    }\n\n    return '<pre><code class=\"' + this.options.langPrefix + escape(lang, true) + '\">' + (escaped ? code : escape(code, true)) + '</code></pre>\\n';\n  };\n\n  Renderer.prototype.blockquote = function (quote) {\n    return '<blockquote>\\n' + quote + '</blockquote>\\n';\n  };\n\n  Renderer.prototype.html = function (html) {\n    return html;\n  };\n\n  Renderer.prototype.heading = function (text, level, raw, slugger) {\n    if (this.options.headerIds) {\n      return '<h' + level + ' id=\"' + this.options.headerPrefix + slugger.slug(raw) + '\">' + text + '</h' + level + '>\\n';\n    } // ignore IDs\n\n\n    return '<h' + level + '>' + text + '</h' + level + '>\\n';\n  };\n\n  Renderer.prototype.hr = function () {\n    return this.options.xhtml ? '<hr/>\\n' : '<hr>\\n';\n  };\n\n  Renderer.prototype.list = function (body, ordered, start) {\n    var type = ordered ? 'ol' : 'ul',\n        startatt = ordered && start !== 1 ? ' start=\"' + start + '\"' : '';\n    return '<' + type + startatt + '>\\n' + body + '</' + type + '>\\n';\n  };\n\n  Renderer.prototype.listitem = function (text) {\n    return '<li>' + text + '</li>\\n';\n  };\n\n  Renderer.prototype.checkbox = function (checked) {\n    return '<input ' + (checked ? 'checked=\"\" ' : '') + 'disabled=\"\" type=\"checkbox\"' + (this.options.xhtml ? ' /' : '') + '> ';\n  };\n\n  Renderer.prototype.paragraph = function (text) {\n    return '<p>' + text + '</p>\\n';\n  };\n\n  Renderer.prototype.table = function (header, body) {\n    if (body) body = '<tbody>' + body + '</tbody>';\n    return '<table>\\n' + '<thead>\\n' + header + '</thead>\\n' + body + '</table>\\n';\n  };\n\n  Renderer.prototype.tablerow = function (content) {\n    return '<tr>\\n' + content + '</tr>\\n';\n  };\n\n  Renderer.prototype.tablecell = function (content, flags) {\n    var type = flags.header ? 'th' : 'td';\n    var tag = flags.align ? '<' + type + ' align=\"' + flags.align + '\">' : '<' + type + '>';\n    return tag + content + '</' + type + '>\\n';\n  }; // span level renderer\n\n\n  Renderer.prototype.strong = function (text) {\n    return '<strong>' + text + '</strong>';\n  };\n\n  Renderer.prototype.em = function (text) {\n    return '<em>' + text + '</em>';\n  };\n\n  Renderer.prototype.codespan = function (text) {\n    return '<code>' + text + '</code>';\n  };\n\n  Renderer.prototype.br = function () {\n    return this.options.xhtml ? '<br/>' : '<br>';\n  };\n\n  Renderer.prototype.del = function (text) {\n    return '<del>' + text + '</del>';\n  };\n\n  Renderer.prototype.link = function (href, title, text) {\n    href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);\n\n    if (href === null) {\n      return text;\n    }\n\n    var out = '<a href=\"' + escape(href) + '\"';\n\n    if (title) {\n      out += ' title=\"' + title + '\"';\n    }\n\n    out += '>' + text + '</a>';\n    return out;\n  };\n\n  Renderer.prototype.image = function (href, title, text) {\n    href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);\n\n    if (href === null) {\n      return text;\n    }\n\n    var out = '<img src=\"' + href + '\" alt=\"' + text + '\"';\n\n    if (title) {\n      out += ' title=\"' + title + '\"';\n    }\n\n    out += this.options.xhtml ? '/>' : '>';\n    return out;\n  };\n\n  Renderer.prototype.text = function (text) {\n    return text;\n  };\n  /**\n   * TextRenderer\n   * returns only the textual part of the token\n   */\n\n\n  function TextRenderer() {} // no need for block level renderers\n\n\n  TextRenderer.prototype.strong = TextRenderer.prototype.em = TextRenderer.prototype.codespan = TextRenderer.prototype.del = TextRenderer.prototype.text = function (text) {\n    return text;\n  };\n\n  TextRenderer.prototype.link = TextRenderer.prototype.image = function (href, title, text) {\n    return '' + text;\n  };\n\n  TextRenderer.prototype.br = function () {\n    return '';\n  };\n  /**\n   * Parsing & Compiling\n   */\n\n\n  function Parser(options) {\n    this.tokens = [];\n    this.token = null;\n    this.options = options || marked.defaults;\n    this.options.renderer = this.options.renderer || new Renderer();\n    this.renderer = this.options.renderer;\n    this.renderer.options = this.options;\n    this.slugger = new Slugger();\n  }\n  /**\n   * Static Parse Method\n   */\n\n\n  Parser.parse = function (src, options) {\n    var parser = new Parser(options);\n    return parser.parse(src);\n  };\n  /**\n   * Parse Loop\n   */\n\n\n  Parser.prototype.parse = function (src) {\n    this.inline = new InlineLexer(src.links, this.options); // use an InlineLexer with a TextRenderer to extract pure text\n\n    this.inlineText = new InlineLexer(src.links, merge({}, this.options, {\n      renderer: new TextRenderer()\n    }));\n    this.tokens = src.reverse();\n    var out = '';\n\n    while (this.next()) {\n      out += this.tok();\n    }\n\n    return out;\n  };\n  /**\n   * Next Token\n   */\n\n\n  Parser.prototype.next = function () {\n    return this.token = this.tokens.pop();\n  };\n  /**\n   * Preview Next Token\n   */\n\n\n  Parser.prototype.peek = function () {\n    return this.tokens[this.tokens.length - 1] || 0;\n  };\n  /**\n   * Parse Text Tokens\n   */\n\n\n  Parser.prototype.parseText = function () {\n    var body = this.token.text;\n\n    while (this.peek().type === 'text') {\n      body += '\\n' + this.next().text;\n    }\n\n    return this.inline.output(body);\n  };\n  /**\n   * Parse Current Token\n   */\n\n\n  Parser.prototype.tok = function () {\n    switch (this.token.type) {\n      case 'space':\n        {\n          return '';\n        }\n\n      case 'hr':\n        {\n          return this.renderer.hr();\n        }\n\n      case 'heading':\n        {\n          return this.renderer.heading(this.inline.output(this.token.text), this.token.depth, unescape(this.inlineText.output(this.token.text)), this.slugger);\n        }\n\n      case 'code':\n        {\n          return this.renderer.code(this.token.text, this.token.lang, this.token.escaped);\n        }\n\n      case 'table':\n        {\n          var header = '',\n              body = '',\n              i,\n              row,\n              cell,\n              j; // header\n\n          cell = '';\n\n          for (i = 0; i < this.token.header.length; i++) {\n            cell += this.renderer.tablecell(this.inline.output(this.token.header[i]), {\n              header: true,\n              align: this.token.align[i]\n            });\n          }\n\n          header += this.renderer.tablerow(cell);\n\n          for (i = 0; i < this.token.cells.length; i++) {\n            row = this.token.cells[i];\n            cell = '';\n\n            for (j = 0; j < row.length; j++) {\n              cell += this.renderer.tablecell(this.inline.output(row[j]), {\n                header: false,\n                align: this.token.align[j]\n              });\n            }\n\n            body += this.renderer.tablerow(cell);\n          }\n\n          return this.renderer.table(header, body);\n        }\n\n      case 'blockquote_start':\n        {\n          body = '';\n\n          while (this.next().type !== 'blockquote_end') {\n            body += this.tok();\n          }\n\n          return this.renderer.blockquote(body);\n        }\n\n      case 'list_start':\n        {\n          body = '';\n          var ordered = this.token.ordered,\n              start = this.token.start;\n\n          while (this.next().type !== 'list_end') {\n            body += this.tok();\n          }\n\n          return this.renderer.list(body, ordered, start);\n        }\n\n      case 'list_item_start':\n        {\n          body = '';\n          var loose = this.token.loose;\n          var checked = this.token.checked;\n          var task = this.token.task;\n\n          if (this.token.task) {\n            body += this.renderer.checkbox(checked);\n          }\n\n          while (this.next().type !== 'list_item_end') {\n            body += !loose && this.token.type === 'text' ? this.parseText() : this.tok();\n          }\n\n          return this.renderer.listitem(body, task, checked);\n        }\n\n      case 'html':\n        {\n          // TODO parse inline content if parameter markdown=1\n          return this.renderer.html(this.token.text);\n        }\n\n      case 'paragraph':\n        {\n          return this.renderer.paragraph(this.inline.output(this.token.text));\n        }\n\n      case 'text':\n        {\n          return this.renderer.paragraph(this.parseText());\n        }\n\n      default:\n        {\n          var errMsg = 'Token with \"' + this.token.type + '\" type was not found.';\n\n          if (this.options.silent) {\n            console.log(errMsg);\n          } else {\n            throw new Error(errMsg);\n          }\n        }\n    }\n  };\n  /**\n   * Slugger generates header id\n   */\n\n\n  function Slugger() {\n    this.seen = {};\n  }\n  /**\n   * Convert string to unique id\n   */\n\n\n  Slugger.prototype.slug = function (value) {\n    var slug = value.toLowerCase().trim().replace(/[\\u2000-\\u206F\\u2E00-\\u2E7F\\\\'!\"#$%&()*+,./:;<=>?@[\\]^`{|}~]/g, '').replace(/\\s/g, '-');\n\n    if (this.seen.hasOwnProperty(slug)) {\n      var originalSlug = slug;\n\n      do {\n        this.seen[originalSlug]++;\n        slug = originalSlug + '-' + this.seen[originalSlug];\n      } while (this.seen.hasOwnProperty(slug));\n    }\n\n    this.seen[slug] = 0;\n    return slug;\n  };\n  /**\n   * Helpers\n   */\n\n\n  function escape(html, encode) {\n    if (encode) {\n      if (escape.escapeTest.test(html)) {\n        return html.replace(escape.escapeReplace, function (ch) {\n          return escape.replacements[ch];\n        });\n      }\n    } else {\n      if (escape.escapeTestNoEncode.test(html)) {\n        return html.replace(escape.escapeReplaceNoEncode, function (ch) {\n          return escape.replacements[ch];\n        });\n      }\n    }\n\n    return html;\n  }\n\n  escape.escapeTest = /[&<>\"']/;\n  escape.escapeReplace = /[&<>\"']/g;\n  escape.replacements = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;'\n  };\n  escape.escapeTestNoEncode = /[<>\"']|&(?!#?\\w+;)/;\n  escape.escapeReplaceNoEncode = /[<>\"']|&(?!#?\\w+;)/g;\n\n  function unescape(html) {\n    // explicitly match decimal, hex, and named HTML entities\n    return html.replace(/&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/ig, function (_, n) {\n      n = n.toLowerCase();\n      if (n === 'colon') return ':';\n\n      if (n.charAt(0) === '#') {\n        return n.charAt(1) === 'x' ? String.fromCharCode(parseInt(n.substring(2), 16)) : String.fromCharCode(+n.substring(1));\n      }\n\n      return '';\n    });\n  }\n\n  function edit(regex, opt) {\n    regex = regex.source || regex;\n    opt = opt || '';\n    return {\n      replace: function replace(name, val) {\n        val = val.source || val;\n        val = val.replace(/(^|[^\\[])\\^/g, '$1');\n        regex = regex.replace(name, val);\n        return this;\n      },\n      getRegex: function getRegex() {\n        return new RegExp(regex, opt);\n      }\n    };\n  }\n\n  function cleanUrl(sanitize, base, href) {\n    if (sanitize) {\n      try {\n        var prot = decodeURIComponent(unescape(href)).replace(/[^\\w:]/g, '').toLowerCase();\n      } catch (e) {\n        return null;\n      }\n\n      if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\n        return null;\n      }\n    }\n\n    if (base && !originIndependentUrl.test(href)) {\n      href = resolveUrl(base, href);\n    }\n\n    try {\n      href = encodeURI(href).replace(/%25/g, '%');\n    } catch (e) {\n      return null;\n    }\n\n    return href;\n  }\n\n  function resolveUrl(base, href) {\n    if (!baseUrls[' ' + base]) {\n      // we can ignore everything in base after the last slash of its path component,\n      // but we might need to add _that_\n      // https://tools.ietf.org/html/rfc3986#section-3\n      if (/^[^:]+:\\/*[^/]*$/.test(base)) {\n        baseUrls[' ' + base] = base + '/';\n      } else {\n        baseUrls[' ' + base] = rtrim(base, '/', true);\n      }\n    }\n\n    base = baseUrls[' ' + base];\n\n    if (href.slice(0, 2) === '//') {\n      return base.replace(/:[\\s\\S]*/, ':') + href;\n    } else if (href.charAt(0) === '/') {\n      return base.replace(/(:\\/*[^/]*)[\\s\\S]*/, '$1') + href;\n    } else {\n      return base + href;\n    }\n  }\n\n  var baseUrls = {};\n  var originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\n\n  function noop() {}\n\n  noop.exec = noop;\n\n  function merge(obj) {\n    var i = 1,\n        target,\n        key;\n\n    for (; i < arguments.length; i++) {\n      target = arguments[i];\n\n      for (key in target) {\n        if (Object.prototype.hasOwnProperty.call(target, key)) {\n          obj[key] = target[key];\n        }\n      }\n    }\n\n    return obj;\n  }\n\n  function splitCells(tableRow, count) {\n    // ensure that every cell-delimiting pipe has a space\n    // before it to distinguish it from an escaped pipe\n    var row = tableRow.replace(/\\|/g, function (match, offset, str) {\n      var escaped = false,\n          curr = offset;\n\n      while (--curr >= 0 && str[curr] === '\\\\') {\n        escaped = !escaped;\n      }\n\n      if (escaped) {\n        // odd number of slashes means | is escaped\n        // so we leave it alone\n        return '|';\n      } else {\n        // add space before unescaped |\n        return ' |';\n      }\n    }),\n        cells = row.split(/ \\|/),\n        i = 0;\n\n    if (cells.length > count) {\n      cells.splice(count);\n    } else {\n      while (cells.length < count) {\n        cells.push('');\n      }\n    }\n\n    for (; i < cells.length; i++) {\n      // leading or trailing whitespace is ignored per the gfm spec\n      cells[i] = cells[i].trim().replace(/\\\\\\|/g, '|');\n    }\n\n    return cells;\n  } // Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\n  // /c*$/ is vulnerable to REDOS.\n  // invert: Remove suffix of non-c chars instead. Default falsey.\n\n\n  function rtrim(str, c, invert) {\n    if (str.length === 0) {\n      return '';\n    } // Length of suffix matching the invert condition.\n\n\n    var suffLen = 0; // Step left until we fail to match the invert condition.\n\n    while (suffLen < str.length) {\n      var currChar = str.charAt(str.length - suffLen - 1);\n\n      if (currChar === c && !invert) {\n        suffLen++;\n      } else if (currChar !== c && invert) {\n        suffLen++;\n      } else {\n        break;\n      }\n    }\n\n    return str.substr(0, str.length - suffLen);\n  }\n\n  function findClosingBracket(str, b) {\n    if (str.indexOf(b[1]) === -1) {\n      return -1;\n    }\n\n    var level = 0;\n\n    for (var i = 0; i < str.length; i++) {\n      if (str[i] === '\\\\') {\n        i++;\n      } else if (str[i] === b[0]) {\n        level++;\n      } else if (str[i] === b[1]) {\n        level--;\n\n        if (level < 0) {\n          return i;\n        }\n      }\n    }\n\n    return -1;\n  }\n  /**\n   * Marked\n   */\n\n\n  function marked(src, opt, callback) {\n    // throw error in case of non string input\n    if (typeof src === 'undefined' || src === null) {\n      throw new Error('marked(): input parameter is undefined or null');\n    }\n\n    if (typeof src !== 'string') {\n      throw new Error('marked(): input parameter is of type ' + Object.prototype.toString.call(src) + ', string expected');\n    }\n\n    if (callback || typeof opt === 'function') {\n      if (!callback) {\n        callback = opt;\n        opt = null;\n      }\n\n      opt = merge({}, marked.defaults, opt || {});\n      var highlight = opt.highlight,\n          tokens,\n          pending,\n          i = 0;\n\n      try {\n        tokens = Lexer.lex(src, opt);\n      } catch (e) {\n        return callback(e);\n      }\n\n      pending = tokens.length;\n\n      var done = function done(err) {\n        if (err) {\n          opt.highlight = highlight;\n          return callback(err);\n        }\n\n        var out;\n\n        try {\n          out = Parser.parse(tokens, opt);\n        } catch (e) {\n          err = e;\n        }\n\n        opt.highlight = highlight;\n        return err ? callback(err) : callback(null, out);\n      };\n\n      if (!highlight || highlight.length < 3) {\n        return done();\n      }\n\n      delete opt.highlight;\n      if (!pending) return done();\n\n      for (; i < tokens.length; i++) {\n        (function (token) {\n          if (token.type !== 'code') {\n            return --pending || done();\n          }\n\n          return highlight(token.text, token.lang, function (err, code) {\n            if (err) return done(err);\n\n            if (code == null || code === token.text) {\n              return --pending || done();\n            }\n\n            token.text = code;\n            token.escaped = true;\n            --pending || done();\n          });\n        })(tokens[i]);\n      }\n\n      return;\n    }\n\n    try {\n      if (opt) opt = merge({}, marked.defaults, opt);\n      return Parser.parse(Lexer.lex(src, opt), opt);\n    } catch (e) {\n      e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n\n      if ((opt || marked.defaults).silent) {\n        return '<p>An error occurred:</p><pre>' + escape(e.message + '', true) + '</pre>';\n      }\n\n      throw e;\n    }\n  }\n  /**\n   * Options\n   */\n\n\n  marked.options = marked.setOptions = function (opt) {\n    merge(marked.defaults, opt);\n    return marked;\n  };\n\n  marked.getDefaults = function () {\n    return {\n      baseUrl: null,\n      breaks: false,\n      gfm: true,\n      headerIds: true,\n      headerPrefix: '',\n      highlight: null,\n      langPrefix: 'language-',\n      mangle: true,\n      pedantic: false,\n      renderer: new Renderer(),\n      sanitize: false,\n      sanitizer: null,\n      silent: false,\n      smartLists: false,\n      smartypants: false,\n      tables: true,\n      xhtml: false\n    };\n  };\n\n  marked.defaults = marked.getDefaults();\n  /**\n   * Expose\n   */\n\n  marked.Parser = Parser;\n  marked.parser = Parser.parse;\n  marked.Renderer = Renderer;\n  marked.TextRenderer = TextRenderer;\n  marked.Lexer = Lexer;\n  marked.lexer = Lexer.lex;\n  marked.InlineLexer = InlineLexer;\n  marked.inlineLexer = InlineLexer.output;\n  marked.Slugger = Slugger;\n  marked.parse = marked; // BEGIN MONACOCHANGE\n  // if (typeof module !== 'undefined' && typeof exports === 'object') {\n  //   module.exports = marked;\n  // } else if (typeof define === 'function' && define.amd) {\n  //   define(function() { return marked; });\n  // } else {\n  //   root.marked = marked;\n  // }\n  // })(this || (typeof window !== 'undefined' ? window : global));\n\n  __marked_exports = marked;\n}).call(this); // ESM-comment-begin\n// define(function() { return __marked_exports; });\n// ESM-comment-end\n// ESM-uncomment-begin\n\nexport var marked = __marked_exports;\nexport var Parser = __marked_exports.Parser;\nexport var parser = __marked_exports.parser;\nexport var Renderer = __marked_exports.Renderer;\nexport var TextRenderer = __marked_exports.TextRenderer;\nexport var Lexer = __marked_exports.Lexer;\nexport var lexer = __marked_exports.lexer;\nexport var InlineLexer = __marked_exports.InlineLexer;\nexport var inlineLexer = __marked_exports.inlineLexer;\nexport var parse = __marked_exports.parse; // ESM-uncomment-end\n// END MONACOCHANGE","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar IdGenerator =\n/** @class */\nfunction () {\n  function IdGenerator(prefix) {\n    this._prefix = prefix;\n    this._lastId = 0;\n  }\n\n  IdGenerator.prototype.nextId = function () {\n    return this._prefix + ++this._lastId;\n  };\n\n  return IdGenerator;\n}();\n\nexport { IdGenerator };\nexport var defaultGenerator = new IdGenerator('id#');","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { equals } from './arrays.js';\n\nvar MarkdownString =\n/** @class */\nfunction () {\n  function MarkdownString(value) {\n    if (value === void 0) {\n      value = '';\n    }\n\n    this.value = value;\n  }\n\n  MarkdownString.prototype.appendText = function (value) {\n    // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\n    this.value += value.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, '\\\\$&');\n    return this;\n  };\n\n  MarkdownString.prototype.appendCodeblock = function (langId, code) {\n    this.value += '\\n```';\n    this.value += langId;\n    this.value += '\\n';\n    this.value += code;\n    this.value += '\\n```\\n';\n    return this;\n  };\n\n  return MarkdownString;\n}();\n\nexport { MarkdownString };\nexport function isEmptyMarkdownString(oneOrMany) {\n  if (isMarkdownString(oneOrMany)) {\n    return !oneOrMany.value;\n  } else if (Array.isArray(oneOrMany)) {\n    return oneOrMany.every(isEmptyMarkdownString);\n  } else {\n    return true;\n  }\n}\nexport function isMarkdownString(thing) {\n  if (thing instanceof MarkdownString) {\n    return true;\n  } else if (thing && typeof thing === 'object') {\n    return typeof thing.value === 'string' && (typeof thing.isTrusted === 'boolean' || thing.isTrusted === undefined);\n  }\n\n  return false;\n}\nexport function markedStringsEquals(a, b) {\n  if (!a && !b) {\n    return true;\n  } else if (!a || !b) {\n    return false;\n  } else if (Array.isArray(a) && Array.isArray(b)) {\n    return equals(a, b, markdownStringEqual);\n  } else if (isMarkdownString(a) && isMarkdownString(b)) {\n    return markdownStringEqual(a, b);\n  } else {\n    return false;\n  }\n}\n\nfunction markdownStringEqual(a, b) {\n  if (a === b) {\n    return true;\n  } else if (!a || !b) {\n    return false;\n  } else {\n    return a.value === b.value && a.isTrusted === b.isTrusted;\n  }\n}\n\nexport function removeMarkdownEscapes(text) {\n  if (!text) {\n    return text;\n  }\n\n  return text.replace(/\\\\([\\\\`*_{}[\\]()#+\\-.!])/g, '$1');\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as DOM from './dom.js';\nimport { defaultGenerator } from '../common/idGenerator.js';\nimport { escape } from '../common/strings.js';\nimport { removeMarkdownEscapes } from '../common/htmlContent.js';\nimport * as marked from '../common/marked/marked.js';\nimport { onUnexpectedError } from '../common/errors.js';\nimport { URI } from '../common/uri.js';\nimport { parse } from '../common/marshalling.js';\nimport { cloneAndChange } from '../common/objects.js';\n\nfunction createElement(options) {\n  var tagName = options.inline ? 'span' : 'div';\n  var element = document.createElement(tagName);\n\n  if (options.className) {\n    element.className = options.className;\n  }\n\n  return element;\n}\n\nexport function renderText(text, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var element = createElement(options);\n  element.textContent = text;\n  return element;\n}\nexport function renderFormattedText(formattedText, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var element = createElement(options);\n\n  _renderFormattedText(element, parseFormattedText(formattedText), options.actionHandler);\n\n  return element;\n}\n/**\n * Create html nodes for the given content element.\n */\n\nexport function renderMarkdown(markdown, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var element = createElement(options);\n\n  var _uriMassage = function _uriMassage(part) {\n    var data;\n\n    try {\n      data = parse(decodeURIComponent(part));\n    } catch (e) {// ignore\n    }\n\n    if (!data) {\n      return part;\n    }\n\n    data = cloneAndChange(data, function (value) {\n      if (markdown.uris && markdown.uris[value]) {\n        return URI.revive(markdown.uris[value]);\n      } else {\n        return undefined;\n      }\n    });\n    return encodeURIComponent(JSON.stringify(data));\n  };\n\n  var _href = function _href(href) {\n    var data = markdown.uris && markdown.uris[href];\n\n    if (!data) {\n      return href;\n    }\n\n    var uri = URI.revive(data);\n\n    if (uri.query) {\n      uri = uri.with({\n        query: _uriMassage(uri.query)\n      });\n    }\n\n    if (data) {\n      href = uri.toString(true);\n    }\n\n    return href;\n  }; // signal to code-block render that the\n  // element has been created\n\n\n  var signalInnerHTML;\n  var withInnerHTML = new Promise(function (c) {\n    return signalInnerHTML = c;\n  });\n  var renderer = new marked.Renderer();\n\n  renderer.image = function (href, title, text) {\n    href = _href(href);\n    var dimensions = [];\n\n    if (href) {\n      var splitted = href.split('|').map(function (s) {\n        return s.trim();\n      });\n      href = splitted[0];\n      var parameters = splitted[1];\n\n      if (parameters) {\n        var heightFromParams = /height=(\\d+)/.exec(parameters);\n        var widthFromParams = /width=(\\d+)/.exec(parameters);\n        var height = heightFromParams ? heightFromParams[1] : '';\n        var width = widthFromParams ? widthFromParams[1] : '';\n        var widthIsFinite = isFinite(parseInt(width));\n        var heightIsFinite = isFinite(parseInt(height));\n\n        if (widthIsFinite) {\n          dimensions.push(\"width=\\\"\" + width + \"\\\"\");\n        }\n\n        if (heightIsFinite) {\n          dimensions.push(\"height=\\\"\" + height + \"\\\"\");\n        }\n      }\n    }\n\n    var attributes = [];\n\n    if (href) {\n      attributes.push(\"src=\\\"\" + href + \"\\\"\");\n    }\n\n    if (text) {\n      attributes.push(\"alt=\\\"\" + text + \"\\\"\");\n    }\n\n    if (title) {\n      attributes.push(\"title=\\\"\" + title + \"\\\"\");\n    }\n\n    if (dimensions.length) {\n      attributes = attributes.concat(dimensions);\n    }\n\n    return '<img ' + attributes.join(' ') + '>';\n  };\n\n  renderer.link = function (href, title, text) {\n    // Remove markdown escapes. Workaround for https://github.com/chjj/marked/issues/829\n    if (href === text) {\n      // raw link case\n      text = removeMarkdownEscapes(text);\n    }\n\n    href = _href(href);\n    title = removeMarkdownEscapes(title);\n    href = removeMarkdownEscapes(href);\n\n    if (!href || href.match(/^data:|javascript:/i) || href.match(/^command:/i) && !markdown.isTrusted || href.match(/^command:(\\/\\/\\/)?_workbench\\.downloadResource/i)) {\n      // drop the link\n      return text;\n    } else {\n      // HTML Encode href\n      href = href.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;').replace(/'/g, '&#39;');\n      return \"<a href=\\\"#\\\" data-href=\\\"\" + href + \"\\\" title=\\\"\" + (title || href) + \"\\\">\" + text + \"</a>\";\n    }\n  };\n\n  renderer.paragraph = function (text) {\n    return \"<p>\" + text + \"</p>\";\n  };\n\n  if (options.codeBlockRenderer) {\n    renderer.code = function (code, lang) {\n      var value = options.codeBlockRenderer(lang, code); // when code-block rendering is async we return sync\n      // but update the node with the real result later.\n\n      var id = defaultGenerator.nextId();\n      var promise = Promise.all([value, withInnerHTML]).then(function (values) {\n        var strValue = values[0];\n        var span = element.querySelector(\"div[data-code=\\\"\" + id + \"\\\"]\");\n\n        if (span) {\n          span.innerHTML = strValue;\n        }\n      }).catch(function (err) {// ignore\n      });\n\n      if (options.codeBlockRenderCallback) {\n        promise.then(options.codeBlockRenderCallback);\n      }\n\n      return \"<div class=\\\"code\\\" data-code=\\\"\" + id + \"\\\">\" + escape(code) + \"</div>\";\n    };\n  }\n\n  if (options.actionHandler) {\n    options.actionHandler.disposeables.push(DOM.addStandardDisposableListener(element, 'click', function (event) {\n      var target = event.target;\n\n      if (target.tagName !== 'A') {\n        target = target.parentElement;\n\n        if (!target || target.tagName !== 'A') {\n          return;\n        }\n      }\n\n      try {\n        var href = target.dataset['href'];\n\n        if (href) {\n          options.actionHandler.callback(href, event);\n        }\n      } catch (err) {\n        onUnexpectedError(err);\n      } finally {\n        event.preventDefault();\n      }\n    }));\n  }\n\n  var markedOptions = {\n    sanitize: true,\n    renderer: renderer\n  };\n  element.innerHTML = marked.parse(markdown.value, markedOptions);\n  signalInnerHTML();\n  return element;\n} // --- formatted string parsing\n\nvar StringStream =\n/** @class */\nfunction () {\n  function StringStream(source) {\n    this.source = source;\n    this.index = 0;\n  }\n\n  StringStream.prototype.eos = function () {\n    return this.index >= this.source.length;\n  };\n\n  StringStream.prototype.next = function () {\n    var next = this.peek();\n    this.advance();\n    return next;\n  };\n\n  StringStream.prototype.peek = function () {\n    return this.source[this.index];\n  };\n\n  StringStream.prototype.advance = function () {\n    this.index++;\n  };\n\n  return StringStream;\n}();\n\nfunction _renderFormattedText(element, treeNode, actionHandler) {\n  var child;\n\n  if (treeNode.type === 2\n  /* Text */\n  ) {\n      child = document.createTextNode(treeNode.content || '');\n    } else if (treeNode.type === 3\n  /* Bold */\n  ) {\n      child = document.createElement('b');\n    } else if (treeNode.type === 4\n  /* Italics */\n  ) {\n      child = document.createElement('i');\n    } else if (treeNode.type === 5\n  /* Action */\n  && actionHandler) {\n    var a = document.createElement('a');\n    a.href = '#';\n    actionHandler.disposeables.push(DOM.addStandardDisposableListener(a, 'click', function (event) {\n      actionHandler.callback(String(treeNode.index), event);\n    }));\n    child = a;\n  } else if (treeNode.type === 7\n  /* NewLine */\n  ) {\n      child = document.createElement('br');\n    } else if (treeNode.type === 1\n  /* Root */\n  ) {\n      child = element;\n    }\n\n  if (child && element !== child) {\n    element.appendChild(child);\n  }\n\n  if (child && Array.isArray(treeNode.children)) {\n    treeNode.children.forEach(function (nodeChild) {\n      _renderFormattedText(child, nodeChild, actionHandler);\n    });\n  }\n}\n\nfunction parseFormattedText(content) {\n  var root = {\n    type: 1\n    /* Root */\n    ,\n    children: []\n  };\n  var actionItemIndex = 0;\n  var current = root;\n  var stack = [];\n  var stream = new StringStream(content);\n\n  while (!stream.eos()) {\n    var next = stream.next();\n    var isEscapedFormatType = next === '\\\\' && formatTagType(stream.peek()) !== 0\n    /* Invalid */\n    ;\n\n    if (isEscapedFormatType) {\n      next = stream.next(); // unread the backslash if it escapes a format tag type\n    }\n\n    if (!isEscapedFormatType && isFormatTag(next) && next === stream.peek()) {\n      stream.advance();\n\n      if (current.type === 2\n      /* Text */\n      ) {\n          current = stack.pop();\n        }\n\n      var type = formatTagType(next);\n\n      if (current.type === type || current.type === 5\n      /* Action */\n      && type === 6\n      /* ActionClose */\n      ) {\n        current = stack.pop();\n      } else {\n        var newCurrent = {\n          type: type,\n          children: []\n        };\n\n        if (type === 5\n        /* Action */\n        ) {\n            newCurrent.index = actionItemIndex;\n            actionItemIndex++;\n          }\n\n        current.children.push(newCurrent);\n        stack.push(current);\n        current = newCurrent;\n      }\n    } else if (next === '\\n') {\n      if (current.type === 2\n      /* Text */\n      ) {\n          current = stack.pop();\n        }\n\n      current.children.push({\n        type: 7\n        /* NewLine */\n\n      });\n    } else {\n      if (current.type !== 2\n      /* Text */\n      ) {\n          var textCurrent = {\n            type: 2\n            /* Text */\n            ,\n            content: next\n          };\n          current.children.push(textCurrent);\n          stack.push(current);\n          current = textCurrent;\n        } else {\n        current.content += next;\n      }\n    }\n  }\n\n  if (current.type === 2\n  /* Text */\n  ) {\n      current = stack.pop();\n    }\n\n  if (stack.length) {// incorrectly formatted string literal\n  }\n\n  return root;\n}\n\nfunction isFormatTag(_char) {\n  return formatTagType(_char) !== 0\n  /* Invalid */\n  ;\n}\n\nfunction formatTagType(_char2) {\n  switch (_char2) {\n    case '*':\n      return 3\n      /* Bold */\n      ;\n\n    case '_':\n      return 4\n      /* Italics */\n      ;\n\n    case '[':\n      return 5\n      /* Action */\n      ;\n\n    case ']':\n      return 6\n      /* ActionClose */\n      ;\n\n    default:\n      return 0\n      /* Invalid */\n      ;\n  }\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { ArrayNavigator } from './iterator.js';\n\nvar HistoryNavigator =\n/** @class */\nfunction () {\n  function HistoryNavigator(history, limit) {\n    if (history === void 0) {\n      history = [];\n    }\n\n    if (limit === void 0) {\n      limit = 10;\n    }\n\n    this._initialize(history);\n\n    this._limit = limit;\n\n    this._onChange();\n  }\n\n  HistoryNavigator.prototype.add = function (t) {\n    this._history.delete(t);\n\n    this._history.add(t);\n\n    this._onChange();\n  };\n\n  HistoryNavigator.prototype.next = function () {\n    return this._navigator.next();\n  };\n\n  HistoryNavigator.prototype.previous = function () {\n    return this._navigator.previous();\n  };\n\n  HistoryNavigator.prototype.current = function () {\n    return this._navigator.current();\n  };\n\n  HistoryNavigator.prototype.parent = function () {\n    return null;\n  };\n\n  HistoryNavigator.prototype.first = function () {\n    return this._navigator.first();\n  };\n\n  HistoryNavigator.prototype.last = function () {\n    return this._navigator.last();\n  };\n\n  HistoryNavigator.prototype.has = function (t) {\n    return this._history.has(t);\n  };\n\n  HistoryNavigator.prototype._onChange = function () {\n    this._reduceToLimit();\n\n    this._navigator = new ArrayNavigator(this._elements, 0, this._elements.length, this._elements.length);\n  };\n\n  HistoryNavigator.prototype._reduceToLimit = function () {\n    var data = this._elements;\n\n    if (data.length > this._limit) {\n      this._initialize(data.slice(data.length - this._limit));\n    }\n  };\n\n  HistoryNavigator.prototype._initialize = function (history) {\n    this._history = new Set();\n\n    for (var _i = 0, history_1 = history; _i < history_1.length; _i++) {\n      var entry = history_1[_i];\n\n      this._history.add(entry);\n    }\n  };\n\n  Object.defineProperty(HistoryNavigator.prototype, \"_elements\", {\n    get: function get() {\n      var elements = [];\n\n      this._history.forEach(function (e) {\n        return elements.push(e);\n      });\n\n      return elements;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return HistoryNavigator;\n}();\n\nexport { HistoryNavigator };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport './inputBox.css';\nimport * as nls from '../../../../nls.js';\nimport * as Bal from '../../browser.js';\nimport * as dom from '../../dom.js';\nimport { renderFormattedText, renderText } from '../../htmlContentRenderer.js';\nimport * as aria from '../aria/aria.js';\nimport { ActionBar } from '../actionbar/actionbar.js';\nimport { Emitter } from '../../../common/event.js';\nimport { Widget } from '../widget.js';\nimport { Color } from '../../../common/color.js';\nimport { mixin } from '../../../common/objects.js';\nimport { HistoryNavigator } from '../../../common/history.js';\nvar $ = dom.$;\nvar defaultOpts = {\n  inputBackground: Color.fromHex('#3C3C3C'),\n  inputForeground: Color.fromHex('#CCCCCC'),\n  inputValidationInfoBorder: Color.fromHex('#55AAFF'),\n  inputValidationInfoBackground: Color.fromHex('#063B49'),\n  inputValidationWarningBorder: Color.fromHex('#B89500'),\n  inputValidationWarningBackground: Color.fromHex('#352A05'),\n  inputValidationErrorBorder: Color.fromHex('#BE1100'),\n  inputValidationErrorBackground: Color.fromHex('#5A1D1D')\n};\n\nvar InputBox =\n/** @class */\nfunction (_super) {\n  __extends(InputBox, _super);\n\n  function InputBox(container, contextViewProvider, options) {\n    var _this = _super.call(this) || this;\n\n    _this.state = 'idle';\n    _this._onDidChange = _this._register(new Emitter());\n    _this.onDidChange = _this._onDidChange.event;\n    _this._onDidHeightChange = _this._register(new Emitter());\n    _this.contextViewProvider = contextViewProvider;\n    _this.options = options || Object.create(null);\n    mixin(_this.options, defaultOpts, false);\n    _this.message = null;\n    _this.cachedHeight = null;\n    _this.placeholder = _this.options.placeholder || '';\n    _this.ariaLabel = _this.options.ariaLabel || '';\n    _this.inputBackground = _this.options.inputBackground;\n    _this.inputForeground = _this.options.inputForeground;\n    _this.inputBorder = _this.options.inputBorder;\n    _this.inputValidationInfoBorder = _this.options.inputValidationInfoBorder;\n    _this.inputValidationInfoBackground = _this.options.inputValidationInfoBackground;\n    _this.inputValidationInfoForeground = _this.options.inputValidationInfoForeground;\n    _this.inputValidationWarningBorder = _this.options.inputValidationWarningBorder;\n    _this.inputValidationWarningBackground = _this.options.inputValidationWarningBackground;\n    _this.inputValidationWarningForeground = _this.options.inputValidationWarningForeground;\n    _this.inputValidationErrorBorder = _this.options.inputValidationErrorBorder;\n    _this.inputValidationErrorBackground = _this.options.inputValidationErrorBackground;\n    _this.inputValidationErrorForeground = _this.options.inputValidationErrorForeground;\n\n    if (_this.options.validationOptions) {\n      _this.validation = _this.options.validationOptions.validation;\n    }\n\n    _this.element = dom.append(container, $('.monaco-inputbox.idle'));\n    var tagName = _this.options.flexibleHeight ? 'textarea' : 'input';\n    var wrapper = dom.append(_this.element, $('.wrapper'));\n    _this.input = dom.append(wrapper, $(tagName + '.input'));\n\n    _this.input.setAttribute('autocorrect', 'off');\n\n    _this.input.setAttribute('autocapitalize', 'off');\n\n    _this.input.setAttribute('spellcheck', 'false');\n\n    _this.onfocus(_this.input, function () {\n      return dom.addClass(_this.element, 'synthetic-focus');\n    });\n\n    _this.onblur(_this.input, function () {\n      return dom.removeClass(_this.element, 'synthetic-focus');\n    });\n\n    if (_this.options.flexibleHeight) {\n      _this.mirror = dom.append(wrapper, $('div.mirror'));\n      _this.mirror.innerHTML = '&nbsp;';\n    } else {\n      _this.input.type = _this.options.type || 'text';\n\n      _this.input.setAttribute('wrap', 'off');\n    }\n\n    if (_this.ariaLabel) {\n      _this.input.setAttribute('aria-label', _this.ariaLabel);\n    }\n\n    if (_this.placeholder) {\n      _this.setPlaceHolder(_this.placeholder);\n    }\n\n    _this.oninput(_this.input, function () {\n      return _this.onValueChange();\n    });\n\n    _this.onblur(_this.input, function () {\n      return _this.onBlur();\n    });\n\n    _this.onfocus(_this.input, function () {\n      return _this.onFocus();\n    }); // Add placeholder shim for IE because IE decides to hide the placeholder on focus (we dont want that!)\n\n\n    if (_this.placeholder && Bal.isIE) {\n      _this.onclick(_this.input, function (e) {\n        dom.EventHelper.stop(e, true);\n\n        _this.input.focus();\n      });\n    }\n\n    setTimeout(function () {\n      if (!_this.input) {\n        return;\n      }\n\n      _this.updateMirror();\n    }, 0); // Support actions\n\n    if (_this.options.actions) {\n      _this.actionbar = _this._register(new ActionBar(_this.element));\n\n      _this.actionbar.push(_this.options.actions, {\n        icon: true,\n        label: false\n      });\n    }\n\n    _this.applyStyles();\n\n    return _this;\n  }\n\n  InputBox.prototype.onBlur = function () {\n    this._hideMessage();\n  };\n\n  InputBox.prototype.onFocus = function () {\n    this._showMessage();\n  };\n\n  InputBox.prototype.setPlaceHolder = function (placeHolder) {\n    if (this.input) {\n      this.input.setAttribute('placeholder', placeHolder);\n      this.input.title = placeHolder;\n    }\n  };\n\n  InputBox.prototype.setAriaLabel = function (label) {\n    this.ariaLabel = label;\n\n    if (this.input) {\n      if (label) {\n        this.input.setAttribute('aria-label', this.ariaLabel);\n      } else {\n        this.input.removeAttribute('aria-label');\n      }\n    }\n  };\n\n  Object.defineProperty(InputBox.prototype, \"mirrorElement\", {\n    get: function get() {\n      return this.mirror;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(InputBox.prototype, \"inputElement\", {\n    get: function get() {\n      return this.input;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(InputBox.prototype, \"value\", {\n    get: function get() {\n      return this.input.value;\n    },\n    set: function set(newValue) {\n      if (this.input.value !== newValue) {\n        this.input.value = newValue;\n        this.onValueChange();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  InputBox.prototype.focus = function () {\n    this.input.focus();\n  };\n\n  InputBox.prototype.blur = function () {\n    this.input.blur();\n  };\n\n  InputBox.prototype.hasFocus = function () {\n    return document.activeElement === this.input;\n  };\n\n  InputBox.prototype.select = function (range) {\n    if (range === void 0) {\n      range = null;\n    }\n\n    this.input.select();\n\n    if (range) {\n      this.input.setSelectionRange(range.start, range.end);\n    }\n  };\n\n  InputBox.prototype.enable = function () {\n    this.input.removeAttribute('disabled');\n  };\n\n  InputBox.prototype.disable = function () {\n    this.input.disabled = true;\n\n    this._hideMessage();\n  };\n\n  InputBox.prototype.setEnabled = function (enabled) {\n    if (enabled) {\n      this.enable();\n    } else {\n      this.disable();\n    }\n  };\n\n  Object.defineProperty(InputBox.prototype, \"width\", {\n    get: function get() {\n      return dom.getTotalWidth(this.input);\n    },\n    set: function set(width) {\n      this.input.style.width = width + 'px';\n\n      if (this.mirror) {\n        this.mirror.style.width = width + 'px';\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  InputBox.prototype.showMessage = function (message, force) {\n    this.message = message;\n    dom.removeClass(this.element, 'idle');\n    dom.removeClass(this.element, 'info');\n    dom.removeClass(this.element, 'warning');\n    dom.removeClass(this.element, 'error');\n    dom.addClass(this.element, this.classForType(message.type));\n    var styles = this.stylesForType(this.message.type);\n    this.element.style.border = styles.border ? \"1px solid \" + styles.border : null; // ARIA Support\n\n    var alertText;\n\n    if (message.type === 3\n    /* ERROR */\n    ) {\n        alertText = nls.localize('alertErrorMessage', \"Error: {0}\", message.content);\n      } else if (message.type === 2\n    /* WARNING */\n    ) {\n        alertText = nls.localize('alertWarningMessage', \"Warning: {0}\", message.content);\n      } else {\n      alertText = nls.localize('alertInfoMessage', \"Info: {0}\", message.content);\n    }\n\n    aria.alert(alertText);\n\n    if (this.hasFocus() || force) {\n      this._showMessage();\n    }\n  };\n\n  InputBox.prototype.hideMessage = function () {\n    this.message = null;\n    dom.removeClass(this.element, 'info');\n    dom.removeClass(this.element, 'warning');\n    dom.removeClass(this.element, 'error');\n    dom.addClass(this.element, 'idle');\n\n    this._hideMessage();\n\n    this.applyStyles();\n  };\n\n  InputBox.prototype.validate = function () {\n    var errorMsg = null;\n\n    if (this.validation) {\n      errorMsg = this.validation(this.value);\n\n      if (errorMsg) {\n        this.inputElement.setAttribute('aria-invalid', 'true');\n        this.showMessage(errorMsg);\n      } else if (this.inputElement.hasAttribute('aria-invalid')) {\n        this.inputElement.removeAttribute('aria-invalid');\n        this.hideMessage();\n      }\n    }\n\n    return !errorMsg;\n  };\n\n  InputBox.prototype.stylesForType = function (type) {\n    switch (type) {\n      case 1\n      /* INFO */\n      :\n        return {\n          border: this.inputValidationInfoBorder,\n          background: this.inputValidationInfoBackground,\n          foreground: this.inputValidationInfoForeground\n        };\n\n      case 2\n      /* WARNING */\n      :\n        return {\n          border: this.inputValidationWarningBorder,\n          background: this.inputValidationWarningBackground,\n          foreground: this.inputValidationWarningForeground\n        };\n\n      default:\n        return {\n          border: this.inputValidationErrorBorder,\n          background: this.inputValidationErrorBackground,\n          foreground: this.inputValidationErrorForeground\n        };\n    }\n  };\n\n  InputBox.prototype.classForType = function (type) {\n    switch (type) {\n      case 1\n      /* INFO */\n      :\n        return 'info';\n\n      case 2\n      /* WARNING */\n      :\n        return 'warning';\n\n      default:\n        return 'error';\n    }\n  };\n\n  InputBox.prototype._showMessage = function () {\n    var _this = this;\n\n    if (!this.contextViewProvider || !this.message) {\n      return;\n    }\n\n    var div;\n\n    var layout = function layout() {\n      return div.style.width = dom.getTotalWidth(_this.element) + 'px';\n    };\n\n    this.state = 'open';\n    this.contextViewProvider.showContextView({\n      getAnchor: function getAnchor() {\n        return _this.element;\n      },\n      anchorAlignment: 1\n      /* RIGHT */\n      ,\n      render: function render(container) {\n        if (!_this.message) {\n          return null;\n        }\n\n        div = dom.append(container, $('.monaco-inputbox-container'));\n        layout();\n        var renderOptions = {\n          inline: true,\n          className: 'monaco-inputbox-message'\n        };\n        var spanElement = _this.message.formatContent ? renderFormattedText(_this.message.content, renderOptions) : renderText(_this.message.content, renderOptions);\n        dom.addClass(spanElement, _this.classForType(_this.message.type));\n\n        var styles = _this.stylesForType(_this.message.type);\n\n        spanElement.style.backgroundColor = styles.background ? styles.background.toString() : null;\n        spanElement.style.color = styles.foreground ? styles.foreground.toString() : null;\n        spanElement.style.border = styles.border ? \"1px solid \" + styles.border : null;\n        dom.append(div, spanElement);\n        return null;\n      },\n      layout: layout\n    });\n  };\n\n  InputBox.prototype._hideMessage = function () {\n    if (!this.contextViewProvider || this.state !== 'open') {\n      return;\n    }\n\n    this.state = 'idle';\n    this.contextViewProvider.hideContextView();\n  };\n\n  InputBox.prototype.onValueChange = function () {\n    this._onDidChange.fire(this.value);\n\n    this.validate();\n    this.updateMirror();\n\n    if (this.state === 'open' && this.contextViewProvider) {\n      this.contextViewProvider.layout();\n    }\n  };\n\n  InputBox.prototype.updateMirror = function () {\n    if (!this.mirror) {\n      return;\n    }\n\n    var value = this.value || this.placeholder;\n    var lastCharCode = value.charCodeAt(value.length - 1);\n    var suffix = lastCharCode === 10 ? ' ' : '';\n    var mirrorTextContent = value + suffix;\n\n    if (mirrorTextContent) {\n      this.mirror.textContent = value + suffix;\n    } else {\n      this.mirror.innerHTML = '&nbsp;';\n    }\n\n    this.layout();\n  };\n\n  InputBox.prototype.style = function (styles) {\n    this.inputBackground = styles.inputBackground;\n    this.inputForeground = styles.inputForeground;\n    this.inputBorder = styles.inputBorder;\n    this.inputValidationInfoBackground = styles.inputValidationInfoBackground;\n    this.inputValidationInfoForeground = styles.inputValidationInfoForeground;\n    this.inputValidationInfoBorder = styles.inputValidationInfoBorder;\n    this.inputValidationWarningBackground = styles.inputValidationWarningBackground;\n    this.inputValidationWarningForeground = styles.inputValidationWarningForeground;\n    this.inputValidationWarningBorder = styles.inputValidationWarningBorder;\n    this.inputValidationErrorBackground = styles.inputValidationErrorBackground;\n    this.inputValidationErrorForeground = styles.inputValidationErrorForeground;\n    this.inputValidationErrorBorder = styles.inputValidationErrorBorder;\n    this.applyStyles();\n  };\n\n  InputBox.prototype.applyStyles = function () {\n    if (this.element) {\n      var background = this.inputBackground ? this.inputBackground.toString() : null;\n      var foreground = this.inputForeground ? this.inputForeground.toString() : null;\n      var border = this.inputBorder ? this.inputBorder.toString() : null;\n      this.element.style.backgroundColor = background;\n      this.element.style.color = foreground;\n      this.input.style.backgroundColor = background;\n      this.input.style.color = foreground;\n      this.element.style.borderWidth = border ? '1px' : null;\n      this.element.style.borderStyle = border ? 'solid' : null;\n      this.element.style.borderColor = border;\n    }\n  };\n\n  InputBox.prototype.layout = function () {\n    if (!this.mirror) {\n      return;\n    }\n\n    var previousHeight = this.cachedHeight;\n    this.cachedHeight = dom.getTotalHeight(this.mirror);\n\n    if (previousHeight !== this.cachedHeight) {\n      this.input.style.height = this.cachedHeight + 'px';\n\n      this._onDidHeightChange.fire(this.cachedHeight);\n    }\n  };\n\n  InputBox.prototype.dispose = function () {\n    this._hideMessage();\n\n    this.element = null; // StrictNullOverride: nulling out ok in dispose\n\n    this.input = null; // StrictNullOverride: nulling out ok in dispose\n\n    this.contextViewProvider = undefined;\n    this.message = null;\n    this.validation = undefined;\n    this.state = null;\n    this.actionbar = undefined;\n\n    _super.prototype.dispose.call(this);\n  };\n\n  return InputBox;\n}(Widget);\n\nexport { InputBox };\n\nvar HistoryInputBox =\n/** @class */\nfunction (_super) {\n  __extends(HistoryInputBox, _super);\n\n  function HistoryInputBox(container, contextViewProvider, options) {\n    var _this = _super.call(this, container, contextViewProvider, options) || this;\n\n    _this.history = new HistoryNavigator(options.history, 100);\n    return _this;\n  }\n\n  HistoryInputBox.prototype.addToHistory = function () {\n    if (this.value && this.value !== this.getCurrentValue()) {\n      this.history.add(this.value);\n    }\n  };\n\n  HistoryInputBox.prototype.showNextValue = function () {\n    if (!this.history.has(this.value)) {\n      this.addToHistory();\n    }\n\n    var next = this.getNextValue();\n\n    if (next) {\n      next = next === this.value ? this.getNextValue() : next;\n    }\n\n    if (next) {\n      this.value = next;\n      aria.status(this.value);\n    }\n  };\n\n  HistoryInputBox.prototype.showPreviousValue = function () {\n    if (!this.history.has(this.value)) {\n      this.addToHistory();\n    }\n\n    var previous = this.getPreviousValue();\n\n    if (previous) {\n      previous = previous === this.value ? this.getPreviousValue() : previous;\n    }\n\n    if (previous) {\n      this.value = previous;\n      aria.status(this.value);\n    }\n  };\n\n  HistoryInputBox.prototype.getCurrentValue = function () {\n    var currentValue = this.history.current();\n\n    if (!currentValue) {\n      currentValue = this.history.last();\n      this.history.next();\n    }\n\n    return currentValue;\n  };\n\n  HistoryInputBox.prototype.getPreviousValue = function () {\n    return this.history.previous() || this.history.first();\n  };\n\n  HistoryInputBox.prototype.getNextValue = function () {\n    return this.history.next() || this.history.last();\n  };\n\n  return HistoryInputBox;\n}(InputBox);\n\nexport { HistoryInputBox };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport './findInput.css';\nimport * as nls from '../../../../nls.js';\nimport * as dom from '../../dom.js';\nimport { HistoryInputBox } from '../inputbox/inputBox.js';\nimport { Widget } from '../widget.js';\nimport { Emitter } from '../../../common/event.js';\nimport { CaseSensitiveCheckbox, WholeWordsCheckbox, RegexCheckbox } from './findInputCheckboxes.js';\nvar NLS_DEFAULT_LABEL = nls.localize('defaultLabel', \"input\");\n\nvar FindInput =\n/** @class */\nfunction (_super) {\n  __extends(FindInput, _super);\n\n  function FindInput(parent, contextViewProvider, _showOptionButtons, options) {\n    var _this = _super.call(this) || this;\n\n    _this._showOptionButtons = _showOptionButtons;\n    _this.fixFocusOnOptionClickEnabled = true;\n    _this._onDidOptionChange = _this._register(new Emitter());\n    _this.onDidOptionChange = _this._onDidOptionChange.event;\n    _this._onKeyDown = _this._register(new Emitter());\n    _this.onKeyDown = _this._onKeyDown.event;\n    _this._onMouseDown = _this._register(new Emitter());\n    _this.onMouseDown = _this._onMouseDown.event;\n    _this._onInput = _this._register(new Emitter());\n    _this._onKeyUp = _this._register(new Emitter());\n    _this._onCaseSensitiveKeyDown = _this._register(new Emitter());\n    _this.onCaseSensitiveKeyDown = _this._onCaseSensitiveKeyDown.event;\n    _this._onRegexKeyDown = _this._register(new Emitter());\n    _this._lastHighlightFindOptions = 0;\n    _this.contextViewProvider = contextViewProvider;\n    _this.placeholder = options.placeholder || '';\n    _this.validation = options.validation;\n    _this.label = options.label || NLS_DEFAULT_LABEL;\n    _this.inputActiveOptionBorder = options.inputActiveOptionBorder;\n    _this.inputBackground = options.inputBackground;\n    _this.inputForeground = options.inputForeground;\n    _this.inputBorder = options.inputBorder;\n    _this.inputValidationInfoBorder = options.inputValidationInfoBorder;\n    _this.inputValidationInfoBackground = options.inputValidationInfoBackground;\n    _this.inputValidationInfoForeground = options.inputValidationInfoForeground;\n    _this.inputValidationWarningBorder = options.inputValidationWarningBorder;\n    _this.inputValidationWarningBackground = options.inputValidationWarningBackground;\n    _this.inputValidationWarningForeground = options.inputValidationWarningForeground;\n    _this.inputValidationErrorBorder = options.inputValidationErrorBorder;\n    _this.inputValidationErrorBackground = options.inputValidationErrorBackground;\n    _this.inputValidationErrorForeground = options.inputValidationErrorForeground;\n\n    _this.buildDomNode(options.appendCaseSensitiveLabel || '', options.appendWholeWordsLabel || '', options.appendRegexLabel || '', options.history || [], !!options.flexibleHeight);\n\n    if (parent) {\n      parent.appendChild(_this.domNode);\n    }\n\n    _this.onkeydown(_this.inputBox.inputElement, function (e) {\n      return _this._onKeyDown.fire(e);\n    });\n\n    _this.onkeyup(_this.inputBox.inputElement, function (e) {\n      return _this._onKeyUp.fire(e);\n    });\n\n    _this.oninput(_this.inputBox.inputElement, function (e) {\n      return _this._onInput.fire();\n    });\n\n    _this.onmousedown(_this.inputBox.inputElement, function (e) {\n      return _this._onMouseDown.fire(e);\n    });\n\n    return _this;\n  }\n\n  FindInput.prototype.enable = function () {\n    dom.removeClass(this.domNode, 'disabled');\n    this.inputBox.enable();\n    this.regex.enable();\n    this.wholeWords.enable();\n    this.caseSensitive.enable();\n  };\n\n  FindInput.prototype.disable = function () {\n    dom.addClass(this.domNode, 'disabled');\n    this.inputBox.disable();\n    this.regex.disable();\n    this.wholeWords.disable();\n    this.caseSensitive.disable();\n  };\n\n  FindInput.prototype.setFocusInputOnOptionClick = function (value) {\n    this.fixFocusOnOptionClickEnabled = value;\n  };\n\n  FindInput.prototype.setEnabled = function (enabled) {\n    if (enabled) {\n      this.enable();\n    } else {\n      this.disable();\n    }\n  };\n\n  FindInput.prototype.getValue = function () {\n    return this.inputBox.value;\n  };\n\n  FindInput.prototype.setValue = function (value) {\n    if (this.inputBox.value !== value) {\n      this.inputBox.value = value;\n    }\n  };\n\n  FindInput.prototype.style = function (styles) {\n    this.inputActiveOptionBorder = styles.inputActiveOptionBorder;\n    this.inputBackground = styles.inputBackground;\n    this.inputForeground = styles.inputForeground;\n    this.inputBorder = styles.inputBorder;\n    this.inputValidationInfoBackground = styles.inputValidationInfoBackground;\n    this.inputValidationInfoForeground = styles.inputValidationInfoForeground;\n    this.inputValidationInfoBorder = styles.inputValidationInfoBorder;\n    this.inputValidationWarningBackground = styles.inputValidationWarningBackground;\n    this.inputValidationWarningForeground = styles.inputValidationWarningForeground;\n    this.inputValidationWarningBorder = styles.inputValidationWarningBorder;\n    this.inputValidationErrorBackground = styles.inputValidationErrorBackground;\n    this.inputValidationErrorForeground = styles.inputValidationErrorForeground;\n    this.inputValidationErrorBorder = styles.inputValidationErrorBorder;\n    this.applyStyles();\n  };\n\n  FindInput.prototype.applyStyles = function () {\n    if (this.domNode) {\n      var checkBoxStyles = {\n        inputActiveOptionBorder: this.inputActiveOptionBorder\n      };\n      this.regex.style(checkBoxStyles);\n      this.wholeWords.style(checkBoxStyles);\n      this.caseSensitive.style(checkBoxStyles);\n      var inputBoxStyles = {\n        inputBackground: this.inputBackground,\n        inputForeground: this.inputForeground,\n        inputBorder: this.inputBorder,\n        inputValidationInfoBackground: this.inputValidationInfoBackground,\n        inputValidationInfoForeground: this.inputValidationInfoForeground,\n        inputValidationInfoBorder: this.inputValidationInfoBorder,\n        inputValidationWarningBackground: this.inputValidationWarningBackground,\n        inputValidationWarningForeground: this.inputValidationWarningForeground,\n        inputValidationWarningBorder: this.inputValidationWarningBorder,\n        inputValidationErrorBackground: this.inputValidationErrorBackground,\n        inputValidationErrorForeground: this.inputValidationErrorForeground,\n        inputValidationErrorBorder: this.inputValidationErrorBorder\n      };\n      this.inputBox.style(inputBoxStyles);\n    }\n  };\n\n  FindInput.prototype.select = function () {\n    this.inputBox.select();\n  };\n\n  FindInput.prototype.focus = function () {\n    this.inputBox.focus();\n  };\n\n  FindInput.prototype.getCaseSensitive = function () {\n    return this.caseSensitive.checked;\n  };\n\n  FindInput.prototype.setCaseSensitive = function (value) {\n    this.caseSensitive.checked = value;\n  };\n\n  FindInput.prototype.getWholeWords = function () {\n    return this.wholeWords.checked;\n  };\n\n  FindInput.prototype.setWholeWords = function (value) {\n    this.wholeWords.checked = value;\n  };\n\n  FindInput.prototype.getRegex = function () {\n    return this.regex.checked;\n  };\n\n  FindInput.prototype.setRegex = function (value) {\n    this.regex.checked = value;\n    this.validate();\n  };\n\n  FindInput.prototype.focusOnCaseSensitive = function () {\n    this.caseSensitive.focus();\n  };\n\n  FindInput.prototype.highlightFindOptions = function () {\n    dom.removeClass(this.domNode, 'highlight-' + this._lastHighlightFindOptions);\n    this._lastHighlightFindOptions = 1 - this._lastHighlightFindOptions;\n    dom.addClass(this.domNode, 'highlight-' + this._lastHighlightFindOptions);\n  };\n\n  FindInput.prototype.buildDomNode = function (appendCaseSensitiveLabel, appendWholeWordsLabel, appendRegexLabel, history, flexibleHeight) {\n    var _this = this;\n\n    this.domNode = document.createElement('div');\n    dom.addClass(this.domNode, 'monaco-findInput');\n    this.inputBox = this._register(new HistoryInputBox(this.domNode, this.contextViewProvider, {\n      placeholder: this.placeholder || '',\n      ariaLabel: this.label || '',\n      validationOptions: {\n        validation: this.validation\n      },\n      inputBackground: this.inputBackground,\n      inputForeground: this.inputForeground,\n      inputBorder: this.inputBorder,\n      inputValidationInfoBackground: this.inputValidationInfoBackground,\n      inputValidationInfoForeground: this.inputValidationInfoForeground,\n      inputValidationInfoBorder: this.inputValidationInfoBorder,\n      inputValidationWarningBackground: this.inputValidationWarningBackground,\n      inputValidationWarningForeground: this.inputValidationWarningForeground,\n      inputValidationWarningBorder: this.inputValidationWarningBorder,\n      inputValidationErrorBackground: this.inputValidationErrorBackground,\n      inputValidationErrorForeground: this.inputValidationErrorForeground,\n      inputValidationErrorBorder: this.inputValidationErrorBorder,\n      history: history,\n      flexibleHeight: flexibleHeight\n    }));\n    this.regex = this._register(new RegexCheckbox({\n      appendTitle: appendRegexLabel,\n      isChecked: false,\n      inputActiveOptionBorder: this.inputActiveOptionBorder\n    }));\n\n    this._register(this.regex.onChange(function (viaKeyboard) {\n      _this._onDidOptionChange.fire(viaKeyboard);\n\n      if (!viaKeyboard && _this.fixFocusOnOptionClickEnabled) {\n        _this.inputBox.focus();\n      }\n\n      _this.validate();\n    }));\n\n    this._register(this.regex.onKeyDown(function (e) {\n      _this._onRegexKeyDown.fire(e);\n    }));\n\n    this.wholeWords = this._register(new WholeWordsCheckbox({\n      appendTitle: appendWholeWordsLabel,\n      isChecked: false,\n      inputActiveOptionBorder: this.inputActiveOptionBorder\n    }));\n\n    this._register(this.wholeWords.onChange(function (viaKeyboard) {\n      _this._onDidOptionChange.fire(viaKeyboard);\n\n      if (!viaKeyboard && _this.fixFocusOnOptionClickEnabled) {\n        _this.inputBox.focus();\n      }\n\n      _this.validate();\n    }));\n\n    this.caseSensitive = this._register(new CaseSensitiveCheckbox({\n      appendTitle: appendCaseSensitiveLabel,\n      isChecked: false,\n      inputActiveOptionBorder: this.inputActiveOptionBorder\n    }));\n\n    this._register(this.caseSensitive.onChange(function (viaKeyboard) {\n      _this._onDidOptionChange.fire(viaKeyboard);\n\n      if (!viaKeyboard && _this.fixFocusOnOptionClickEnabled) {\n        _this.inputBox.focus();\n      }\n\n      _this.validate();\n    }));\n\n    this._register(this.caseSensitive.onKeyDown(function (e) {\n      _this._onCaseSensitiveKeyDown.fire(e);\n    }));\n\n    if (this._showOptionButtons) {\n      var paddingRight = this.caseSensitive.width() + this.wholeWords.width() + this.regex.width() + 'px';\n      this.inputBox.inputElement.style.paddingRight = paddingRight;\n\n      if (this.inputBox.mirrorElement) {\n        this.inputBox.mirrorElement.style.paddingRight = paddingRight;\n      }\n    } // Arrow-Key support to navigate between options\n\n\n    var indexes = [this.caseSensitive.domNode, this.wholeWords.domNode, this.regex.domNode];\n    this.onkeydown(this.domNode, function (event) {\n      if (event.equals(15\n      /* LeftArrow */\n      ) || event.equals(17\n      /* RightArrow */\n      ) || event.equals(9\n      /* Escape */\n      )) {\n        var index = indexes.indexOf(document.activeElement);\n\n        if (index >= 0) {\n          var newIndex = -1;\n\n          if (event.equals(17\n          /* RightArrow */\n          )) {\n            newIndex = (index + 1) % indexes.length;\n          } else if (event.equals(15\n          /* LeftArrow */\n          )) {\n            if (index === 0) {\n              newIndex = indexes.length - 1;\n            } else {\n              newIndex = index - 1;\n            }\n          }\n\n          if (event.equals(9\n          /* Escape */\n          )) {\n            indexes[index].blur();\n          } else if (newIndex >= 0) {\n            indexes[newIndex].focus();\n          }\n\n          dom.EventHelper.stop(event, true);\n        }\n      }\n    });\n    var controls = document.createElement('div');\n    controls.className = 'controls';\n    controls.style.display = this._showOptionButtons ? 'block' : 'none';\n    controls.appendChild(this.caseSensitive.domNode);\n    controls.appendChild(this.wholeWords.domNode);\n    controls.appendChild(this.regex.domNode);\n    this.domNode.appendChild(controls);\n  };\n\n  FindInput.prototype.validate = function () {\n    if (this.inputBox) {\n      this.inputBox.validate();\n    }\n  };\n\n  FindInput.prototype.clearMessage = function () {\n    if (this.inputBox) {\n      this.inputBox.hideMessage();\n    }\n  };\n\n  FindInput.prototype.dispose = function () {\n    _super.prototype.dispose.call(this);\n  };\n\n  return FindInput;\n}(Widget);\n\nexport { FindInput };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport { IContextKeyService, ContextKeyDefinedExpr, ContextKeyExpr, ContextKeyAndExpr, ContextKeyEqualsExpr, RawContextKey } from '../contextkey/common/contextkey.js';\nimport { HistoryInputBox } from '../../base/browser/ui/inputbox/inputBox.js';\nimport { FindInput } from '../../base/browser/ui/findinput/findInput.js';\nimport { KeybindingsRegistry } from '../keybinding/common/keybindingsRegistry.js';\nexport var HistoryNavigationWidgetContext = 'historyNavigationWidget';\nexport var HistoryNavigationEnablementContext = 'historyNavigationEnabled';\n\nfunction bindContextScopedWidget(contextKeyService, widget, contextKey) {\n  new RawContextKey(contextKey, widget).bindTo(contextKeyService);\n}\n\nfunction createWidgetScopedContextKeyService(contextKeyService, widget) {\n  return contextKeyService.createScoped(widget.target);\n}\n\nfunction getContextScopedWidget(contextKeyService, contextKey) {\n  return contextKeyService.getContext(document.activeElement).getValue(contextKey);\n}\n\nexport function createAndBindHistoryNavigationWidgetScopedContextKeyService(contextKeyService, widget) {\n  var scopedContextKeyService = createWidgetScopedContextKeyService(contextKeyService, widget);\n  bindContextScopedWidget(scopedContextKeyService, widget, HistoryNavigationWidgetContext);\n  var historyNavigationEnablement = new RawContextKey(HistoryNavigationEnablementContext, true).bindTo(scopedContextKeyService);\n  return {\n    scopedContextKeyService: scopedContextKeyService,\n    historyNavigationEnablement: historyNavigationEnablement\n  };\n}\n\nvar ContextScopedHistoryInputBox =\n/** @class */\nfunction (_super) {\n  __extends(ContextScopedHistoryInputBox, _super);\n\n  function ContextScopedHistoryInputBox(container, contextViewProvider, options, contextKeyService) {\n    var _this = _super.call(this, container, contextViewProvider, options) || this;\n\n    _this._register(createAndBindHistoryNavigationWidgetScopedContextKeyService(contextKeyService, {\n      target: _this.element,\n      historyNavigator: _this\n    }).scopedContextKeyService);\n\n    return _this;\n  }\n\n  ContextScopedHistoryInputBox = __decorate([__param(3, IContextKeyService)], ContextScopedHistoryInputBox);\n  return ContextScopedHistoryInputBox;\n}(HistoryInputBox);\n\nexport { ContextScopedHistoryInputBox };\n\nvar ContextScopedFindInput =\n/** @class */\nfunction (_super) {\n  __extends(ContextScopedFindInput, _super);\n\n  function ContextScopedFindInput(container, contextViewProvider, options, contextKeyService, showFindOptions) {\n    if (showFindOptions === void 0) {\n      showFindOptions = false;\n    }\n\n    var _this = _super.call(this, container, contextViewProvider, showFindOptions, options) || this;\n\n    _this._register(createAndBindHistoryNavigationWidgetScopedContextKeyService(contextKeyService, {\n      target: _this.inputBox.element,\n      historyNavigator: _this.inputBox\n    }).scopedContextKeyService);\n\n    return _this;\n  }\n\n  ContextScopedFindInput = __decorate([__param(3, IContextKeyService)], ContextScopedFindInput);\n  return ContextScopedFindInput;\n}(FindInput);\n\nexport { ContextScopedFindInput };\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n  id: 'history.showPrevious',\n  weight: 200\n  /* WorkbenchContrib */\n  ,\n  when: ContextKeyExpr.and(new ContextKeyDefinedExpr(HistoryNavigationWidgetContext), new ContextKeyEqualsExpr(HistoryNavigationEnablementContext, true)),\n  primary: 16\n  /* UpArrow */\n  ,\n  secondary: [512\n  /* Alt */\n  | 16\n  /* UpArrow */\n  ],\n  handler: function handler(accessor, arg2) {\n    var widget = getContextScopedWidget(accessor.get(IContextKeyService), HistoryNavigationWidgetContext);\n\n    if (widget) {\n      var historyInputBox = widget.historyNavigator;\n      historyInputBox.showPreviousValue();\n    }\n  }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n  id: 'history.showNext',\n  weight: 200\n  /* WorkbenchContrib */\n  ,\n  when: new ContextKeyAndExpr([new ContextKeyDefinedExpr(HistoryNavigationWidgetContext), new ContextKeyEqualsExpr(HistoryNavigationEnablementContext, true)]),\n  primary: 18\n  /* DownArrow */\n  ,\n  secondary: [512\n  /* Alt */\n  | 18\n  /* DownArrow */\n  ],\n  handler: function handler(accessor, arg2) {\n    var widget = getContextScopedWidget(accessor.get(IContextKeyService), HistoryNavigationWidgetContext);\n\n    if (widget) {\n      var historyInputBox = widget.historyNavigator;\n      historyInputBox.showNextValue();\n    }\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport './findWidget.css';\nimport * as nls from '../../../nls.js';\nimport * as dom from '../../../base/browser/dom.js';\nimport { Sash } from '../../../base/browser/ui/sash/sash.js';\nimport { Widget } from '../../../base/browser/ui/widget.js';\nimport { Delayer } from '../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { toDisposable } from '../../../base/common/lifecycle.js';\nimport * as platform from '../../../base/common/platform.js';\nimport * as strings from '../../../base/common/strings.js';\nimport { Range } from '../../common/core/range.js';\nimport { CONTEXT_FIND_INPUT_FOCUSED, CONTEXT_REPLACE_INPUT_FOCUSED, FIND_IDS, MATCHES_LIMIT } from './findModel.js';\nimport { contrastBorder, editorFindMatch, editorFindMatchBorder, editorFindMatchHighlight, editorFindMatchHighlightBorder, editorFindRangeHighlight, editorFindRangeHighlightBorder, editorWidgetBackground, editorWidgetBorder, editorWidgetResizeBorder, errorForeground, inputActiveOptionBorder, inputBackground, inputBorder, inputForeground, inputValidationErrorBackground, inputValidationErrorBorder, inputValidationErrorForeground, inputValidationInfoBackground, inputValidationInfoBorder, inputValidationInfoForeground, inputValidationWarningBackground, inputValidationWarningBorder, inputValidationWarningForeground, widgetShadow } from '../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\nimport { ContextScopedFindInput, ContextScopedHistoryInputBox } from '../../../platform/browser/contextScopedHistoryWidget.js';\nvar NLS_FIND_INPUT_LABEL = nls.localize('label.find', \"Find\");\nvar NLS_FIND_INPUT_PLACEHOLDER = nls.localize('placeholder.find', \"Find\");\nvar NLS_PREVIOUS_MATCH_BTN_LABEL = nls.localize('label.previousMatchButton', \"Previous match\");\nvar NLS_NEXT_MATCH_BTN_LABEL = nls.localize('label.nextMatchButton', \"Next match\");\nvar NLS_TOGGLE_SELECTION_FIND_TITLE = nls.localize('label.toggleSelectionFind', \"Find in selection\");\nvar NLS_CLOSE_BTN_LABEL = nls.localize('label.closeButton', \"Close\");\nvar NLS_REPLACE_INPUT_LABEL = nls.localize('label.replace', \"Replace\");\nvar NLS_REPLACE_INPUT_PLACEHOLDER = nls.localize('placeholder.replace', \"Replace\");\nvar NLS_REPLACE_BTN_LABEL = nls.localize('label.replaceButton', \"Replace\");\nvar NLS_REPLACE_ALL_BTN_LABEL = nls.localize('label.replaceAllButton', \"Replace All\");\nvar NLS_TOGGLE_REPLACE_MODE_BTN_LABEL = nls.localize('label.toggleReplaceButton', \"Toggle Replace mode\");\nvar NLS_MATCHES_COUNT_LIMIT_TITLE = nls.localize('title.matchesCountLimit', \"Only the first {0} results are highlighted, but all find operations work on the entire text.\", MATCHES_LIMIT);\nvar NLS_MATCHES_LOCATION = nls.localize('label.matchesLocation', \"{0} of {1}\");\nvar NLS_NO_RESULTS = nls.localize('label.noResults', \"No Results\");\nvar FIND_WIDGET_INITIAL_WIDTH = 411;\nvar PART_WIDTH = 275;\nvar FIND_INPUT_AREA_WIDTH = PART_WIDTH - 54;\nvar REPLACE_INPUT_AREA_WIDTH = FIND_INPUT_AREA_WIDTH;\nvar MAX_MATCHES_COUNT_WIDTH = 69;\nvar FIND_ALL_CONTROLS_WIDTH = 17\n/** Find Input margin-left */\n+ (MAX_MATCHES_COUNT_WIDTH + 3 + 1)\n/** Match Results */\n+ 23\n/** Button */\n* 4 + 2\n/** sash */\n;\nvar FIND_INPUT_AREA_HEIGHT = 34; // The height of Find Widget when Replace Input is not visible.\n\nvar FIND_REPLACE_AREA_HEIGHT = 64; // The height of Find Widget when Replace Input is  visible.\n\nvar FindWidgetViewZone =\n/** @class */\nfunction () {\n  function FindWidgetViewZone(afterLineNumber) {\n    this.afterLineNumber = afterLineNumber;\n    this.heightInPx = FIND_INPUT_AREA_HEIGHT;\n    this.suppressMouseDown = false;\n    this.domNode = document.createElement('div');\n    this.domNode.className = 'dock-find-viewzone';\n  }\n\n  return FindWidgetViewZone;\n}();\n\nexport { FindWidgetViewZone };\n\nvar FindWidget =\n/** @class */\nfunction (_super) {\n  __extends(FindWidget, _super);\n\n  function FindWidget(codeEditor, controller, state, contextViewProvider, keybindingService, contextKeyService, themeService) {\n    var _this = _super.call(this) || this;\n\n    _this._codeEditor = codeEditor;\n    _this._controller = controller;\n    _this._state = state;\n    _this._contextViewProvider = contextViewProvider;\n    _this._keybindingService = keybindingService;\n    _this._contextKeyService = contextKeyService;\n    _this._isVisible = false;\n    _this._isReplaceVisible = false;\n    _this._ignoreChangeEvent = false;\n    _this._updateHistoryDelayer = new Delayer(500);\n\n    _this._register(toDisposable(function () {\n      return _this._updateHistoryDelayer.cancel();\n    }));\n\n    _this._register(_this._state.onFindReplaceStateChange(function (e) {\n      return _this._onStateChanged(e);\n    }));\n\n    _this._buildDomNode();\n\n    _this._updateButtons();\n\n    _this._tryUpdateWidgetWidth();\n\n    _this._register(_this._codeEditor.onDidChangeConfiguration(function (e) {\n      if (e.readOnly) {\n        if (_this._codeEditor.getConfiguration().readOnly) {\n          // Hide replace part if editor becomes read only\n          _this._state.change({\n            isReplaceRevealed: false\n          }, false);\n        }\n\n        _this._updateButtons();\n      }\n\n      if (e.layoutInfo) {\n        _this._tryUpdateWidgetWidth();\n      }\n\n      if (e.accessibilitySupport) {\n        _this.updateAccessibilitySupport();\n      }\n\n      if (e.contribInfo) {\n        var addExtraSpaceOnTop = _this._codeEditor.getConfiguration().contribInfo.find.addExtraSpaceOnTop;\n\n        if (addExtraSpaceOnTop && !_this._viewZone) {\n          _this._viewZone = new FindWidgetViewZone(0);\n\n          _this._showViewZone();\n        }\n\n        if (!addExtraSpaceOnTop && _this._viewZone) {\n          _this._removeViewZone();\n        }\n      }\n    }));\n\n    _this.updateAccessibilitySupport();\n\n    _this._register(_this._codeEditor.onDidChangeCursorSelection(function () {\n      if (_this._isVisible) {\n        _this._updateToggleSelectionFindButton();\n      }\n    }));\n\n    _this._register(_this._codeEditor.onDidFocusEditorWidget(function () {\n      if (_this._isVisible) {\n        var globalBufferTerm = _this._controller.getGlobalBufferTerm();\n\n        if (globalBufferTerm && globalBufferTerm !== _this._state.searchString) {\n          _this._state.change({\n            searchString: globalBufferTerm\n          }, true);\n\n          _this._findInput.select();\n        }\n      }\n    }));\n\n    _this._findInputFocused = CONTEXT_FIND_INPUT_FOCUSED.bindTo(contextKeyService);\n    _this._findFocusTracker = _this._register(dom.trackFocus(_this._findInput.inputBox.inputElement));\n\n    _this._register(_this._findFocusTracker.onDidFocus(function () {\n      _this._findInputFocused.set(true);\n\n      _this._updateSearchScope();\n    }));\n\n    _this._register(_this._findFocusTracker.onDidBlur(function () {\n      _this._findInputFocused.set(false);\n    }));\n\n    _this._replaceInputFocused = CONTEXT_REPLACE_INPUT_FOCUSED.bindTo(contextKeyService);\n    _this._replaceFocusTracker = _this._register(dom.trackFocus(_this._replaceInputBox.inputElement));\n\n    _this._register(_this._replaceFocusTracker.onDidFocus(function () {\n      _this._replaceInputFocused.set(true);\n\n      _this._updateSearchScope();\n    }));\n\n    _this._register(_this._replaceFocusTracker.onDidBlur(function () {\n      _this._replaceInputFocused.set(false);\n    }));\n\n    _this._codeEditor.addOverlayWidget(_this);\n\n    if (_this._codeEditor.getConfiguration().contribInfo.find.addExtraSpaceOnTop) {\n      _this._viewZone = new FindWidgetViewZone(0); // Put it before the first line then users can scroll beyond the first line.\n    }\n\n    _this._applyTheme(themeService.getTheme());\n\n    _this._register(themeService.onThemeChange(_this._applyTheme.bind(_this)));\n\n    _this._register(_this._codeEditor.onDidChangeModel(function () {\n      if (!_this._isVisible) {\n        return;\n      }\n\n      if (_this._viewZoneId === undefined) {\n        return;\n      }\n\n      _this._codeEditor.changeViewZones(function (accessor) {\n        if (_this._viewZoneId) {\n          accessor.removeZone(_this._viewZoneId);\n        }\n\n        _this._viewZoneId = undefined;\n      });\n    }));\n\n    _this._register(_this._codeEditor.onDidScrollChange(function (e) {\n      if (e.scrollTopChanged) {\n        _this._layoutViewZone();\n\n        return;\n      } // for other scroll changes, layout the viewzone in next tick to avoid ruining current rendering.\n\n\n      setTimeout(function () {\n        _this._layoutViewZone();\n      }, 0);\n    }));\n\n    return _this;\n  } // ----- IOverlayWidget API\n\n\n  FindWidget.prototype.getId = function () {\n    return FindWidget.ID;\n  };\n\n  FindWidget.prototype.getDomNode = function () {\n    return this._domNode;\n  };\n\n  FindWidget.prototype.getPosition = function () {\n    if (this._isVisible) {\n      return {\n        preference: 0\n        /* TOP_RIGHT_CORNER */\n\n      };\n    }\n\n    return null;\n  }; // ----- React to state changes\n\n\n  FindWidget.prototype._onStateChanged = function (e) {\n    if (e.searchString) {\n      try {\n        this._ignoreChangeEvent = true;\n\n        this._findInput.setValue(this._state.searchString);\n      } finally {\n        this._ignoreChangeEvent = false;\n      }\n\n      this._updateButtons();\n    }\n\n    if (e.replaceString) {\n      this._replaceInputBox.value = this._state.replaceString;\n    }\n\n    if (e.isRevealed) {\n      if (this._state.isRevealed) {\n        this._reveal();\n      } else {\n        this._hide(true);\n      }\n    }\n\n    if (e.isReplaceRevealed) {\n      if (this._state.isReplaceRevealed) {\n        if (!this._codeEditor.getConfiguration().readOnly && !this._isReplaceVisible) {\n          this._isReplaceVisible = true;\n          this._replaceInputBox.width = this._findInput.inputBox.width;\n\n          this._updateButtons();\n        }\n      } else {\n        if (this._isReplaceVisible) {\n          this._isReplaceVisible = false;\n\n          this._updateButtons();\n        }\n      }\n    }\n\n    if (e.isRegex) {\n      this._findInput.setRegex(this._state.isRegex);\n    }\n\n    if (e.wholeWord) {\n      this._findInput.setWholeWords(this._state.wholeWord);\n    }\n\n    if (e.matchCase) {\n      this._findInput.setCaseSensitive(this._state.matchCase);\n    }\n\n    if (e.searchScope) {\n      if (this._state.searchScope) {\n        this._toggleSelectionFind.checked = true;\n      } else {\n        this._toggleSelectionFind.checked = false;\n      }\n\n      this._updateToggleSelectionFindButton();\n    }\n\n    if (e.searchString || e.matchesCount || e.matchesPosition) {\n      var showRedOutline = this._state.searchString.length > 0 && this._state.matchesCount === 0;\n      dom.toggleClass(this._domNode, 'no-results', showRedOutline);\n\n      this._updateMatchesCount();\n\n      this._updateButtons();\n    }\n\n    if (e.searchString || e.currentMatch) {\n      this._layoutViewZone();\n    }\n\n    if (e.updateHistory) {\n      this._delayedUpdateHistory();\n    }\n  };\n\n  FindWidget.prototype._delayedUpdateHistory = function () {\n    this._updateHistoryDelayer.trigger(this._updateHistory.bind(this));\n  };\n\n  FindWidget.prototype._updateHistory = function () {\n    if (this._state.searchString) {\n      this._findInput.inputBox.addToHistory();\n    }\n\n    if (this._state.replaceString) {\n      this._replaceInputBox.addToHistory();\n    }\n  };\n\n  FindWidget.prototype._updateMatchesCount = function () {\n    this._matchesCount.style.minWidth = MAX_MATCHES_COUNT_WIDTH + 'px';\n\n    if (this._state.matchesCount >= MATCHES_LIMIT) {\n      this._matchesCount.title = NLS_MATCHES_COUNT_LIMIT_TITLE;\n    } else {\n      this._matchesCount.title = '';\n    } // remove previous content\n\n\n    if (this._matchesCount.firstChild) {\n      this._matchesCount.removeChild(this._matchesCount.firstChild);\n    }\n\n    var label;\n\n    if (this._state.matchesCount > 0) {\n      var matchesCount = String(this._state.matchesCount);\n\n      if (this._state.matchesCount >= MATCHES_LIMIT) {\n        matchesCount += '+';\n      }\n\n      var matchesPosition = String(this._state.matchesPosition);\n\n      if (matchesPosition === '0') {\n        matchesPosition = '?';\n      }\n\n      label = strings.format(NLS_MATCHES_LOCATION, matchesPosition, matchesCount);\n    } else {\n      label = NLS_NO_RESULTS;\n    }\n\n    this._matchesCount.appendChild(document.createTextNode(label));\n\n    MAX_MATCHES_COUNT_WIDTH = Math.max(MAX_MATCHES_COUNT_WIDTH, this._matchesCount.clientWidth);\n  }; // ----- actions\n\n  /**\n   * If 'selection find' is ON we should not disable the button (its function is to cancel 'selection find').\n   * If 'selection find' is OFF we enable the button only if there is a selection.\n   */\n\n\n  FindWidget.prototype._updateToggleSelectionFindButton = function () {\n    var selection = this._codeEditor.getSelection();\n\n    var isSelection = selection ? selection.startLineNumber !== selection.endLineNumber || selection.startColumn !== selection.endColumn : false;\n    var isChecked = this._toggleSelectionFind.checked;\n\n    this._toggleSelectionFind.setEnabled(this._isVisible && (isChecked || isSelection));\n  };\n\n  FindWidget.prototype._updateButtons = function () {\n    this._findInput.setEnabled(this._isVisible);\n\n    this._replaceInputBox.setEnabled(this._isVisible && this._isReplaceVisible);\n\n    this._updateToggleSelectionFindButton();\n\n    this._closeBtn.setEnabled(this._isVisible);\n\n    var findInputIsNonEmpty = this._state.searchString.length > 0;\n    var matchesCount = this._state.matchesCount ? true : false;\n\n    this._prevBtn.setEnabled(this._isVisible && findInputIsNonEmpty && matchesCount);\n\n    this._nextBtn.setEnabled(this._isVisible && findInputIsNonEmpty && matchesCount);\n\n    this._replaceBtn.setEnabled(this._isVisible && this._isReplaceVisible && findInputIsNonEmpty);\n\n    this._replaceAllBtn.setEnabled(this._isVisible && this._isReplaceVisible && findInputIsNonEmpty);\n\n    dom.toggleClass(this._domNode, 'replaceToggled', this._isReplaceVisible);\n\n    this._toggleReplaceBtn.toggleClass('collapse', !this._isReplaceVisible);\n\n    this._toggleReplaceBtn.toggleClass('expand', this._isReplaceVisible);\n\n    this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);\n\n    var canReplace = !this._codeEditor.getConfiguration().readOnly;\n\n    this._toggleReplaceBtn.setEnabled(this._isVisible && canReplace);\n  };\n\n  FindWidget.prototype._reveal = function () {\n    var _this = this;\n\n    if (!this._isVisible) {\n      this._isVisible = true;\n\n      var selection = this._codeEditor.getSelection();\n\n      var isSelection = selection ? selection.startLineNumber !== selection.endLineNumber || selection.startColumn !== selection.endColumn : false;\n\n      if (isSelection && this._codeEditor.getConfiguration().contribInfo.find.autoFindInSelection) {\n        this._toggleSelectionFind.checked = true;\n      } else {\n        this._toggleSelectionFind.checked = false;\n      }\n\n      this._tryUpdateWidgetWidth();\n\n      this._updateButtons();\n\n      setTimeout(function () {\n        dom.addClass(_this._domNode, 'visible');\n\n        _this._domNode.setAttribute('aria-hidden', 'false');\n      }, 0); // validate query again as it's being dismissed when we hide the find widget.\n\n      setTimeout(function () {\n        _this._findInput.validate();\n      }, 200);\n\n      this._codeEditor.layoutOverlayWidget(this);\n\n      var adjustEditorScrollTop = true;\n\n      if (this._codeEditor.getConfiguration().contribInfo.find.seedSearchStringFromSelection && selection) {\n        var domNode = this._codeEditor.getDomNode();\n\n        if (domNode) {\n          var editorCoords = dom.getDomNodePagePosition(domNode);\n\n          var startCoords = this._codeEditor.getScrolledVisiblePosition(selection.getStartPosition());\n\n          var startLeft = editorCoords.left + (startCoords ? startCoords.left : 0);\n          var startTop = startCoords ? startCoords.top : 0;\n\n          if (this._viewZone && startTop < this._viewZone.heightInPx) {\n            if (selection.endLineNumber > selection.startLineNumber) {\n              adjustEditorScrollTop = false;\n            }\n\n            var leftOfFindWidget = dom.getTopLeftOffset(this._domNode).left;\n\n            if (startLeft > leftOfFindWidget) {\n              adjustEditorScrollTop = false;\n            }\n\n            var endCoords = this._codeEditor.getScrolledVisiblePosition(selection.getEndPosition());\n\n            var endLeft = editorCoords.left + (endCoords ? endCoords.left : 0);\n\n            if (endLeft > leftOfFindWidget) {\n              adjustEditorScrollTop = false;\n            }\n          }\n        }\n      }\n\n      this._showViewZone(adjustEditorScrollTop);\n    }\n  };\n\n  FindWidget.prototype._hide = function (focusTheEditor) {\n    if (this._isVisible) {\n      this._isVisible = false;\n\n      this._updateButtons();\n\n      dom.removeClass(this._domNode, 'visible');\n\n      this._domNode.setAttribute('aria-hidden', 'true');\n\n      this._findInput.clearMessage();\n\n      if (focusTheEditor) {\n        this._codeEditor.focus();\n      }\n\n      this._codeEditor.layoutOverlayWidget(this);\n\n      this._removeViewZone();\n    }\n  };\n\n  FindWidget.prototype._layoutViewZone = function () {\n    var _this = this;\n\n    var addExtraSpaceOnTop = this._codeEditor.getConfiguration().contribInfo.find.addExtraSpaceOnTop;\n\n    if (!addExtraSpaceOnTop) {\n      this._removeViewZone();\n\n      return;\n    }\n\n    if (!this._isVisible) {\n      return;\n    }\n\n    var viewZone = this._viewZone;\n\n    if (this._viewZoneId !== undefined || !viewZone) {\n      return;\n    }\n\n    this._codeEditor.changeViewZones(function (accessor) {\n      if (_this._state.isReplaceRevealed) {\n        viewZone.heightInPx = FIND_REPLACE_AREA_HEIGHT;\n      } else {\n        viewZone.heightInPx = FIND_INPUT_AREA_HEIGHT;\n      }\n\n      _this._viewZoneId = accessor.addZone(viewZone); // scroll top adjust to make sure the editor doesn't scroll when adding viewzone at the beginning.\n\n      _this._codeEditor.setScrollTop(_this._codeEditor.getScrollTop() + viewZone.heightInPx);\n    });\n  };\n\n  FindWidget.prototype._showViewZone = function (adjustScroll) {\n    var _this = this;\n\n    if (adjustScroll === void 0) {\n      adjustScroll = true;\n    }\n\n    var viewZone = this._viewZone;\n\n    if (!this._isVisible || !viewZone) {\n      return;\n    }\n\n    this._codeEditor.changeViewZones(function (accessor) {\n      var scrollAdjustment = FIND_INPUT_AREA_HEIGHT;\n\n      if (_this._viewZoneId !== undefined) {\n        if (_this._state.isReplaceRevealed) {\n          viewZone.heightInPx = FIND_REPLACE_AREA_HEIGHT;\n          scrollAdjustment = FIND_REPLACE_AREA_HEIGHT - FIND_INPUT_AREA_HEIGHT;\n        } else {\n          viewZone.heightInPx = FIND_INPUT_AREA_HEIGHT;\n          scrollAdjustment = FIND_INPUT_AREA_HEIGHT - FIND_REPLACE_AREA_HEIGHT;\n        }\n\n        accessor.removeZone(_this._viewZoneId);\n      } else {\n        viewZone.heightInPx = FIND_INPUT_AREA_HEIGHT;\n      }\n\n      _this._viewZoneId = accessor.addZone(viewZone);\n\n      if (adjustScroll) {\n        _this._codeEditor.setScrollTop(_this._codeEditor.getScrollTop() + scrollAdjustment);\n      }\n    });\n  };\n\n  FindWidget.prototype._removeViewZone = function () {\n    var _this = this;\n\n    this._codeEditor.changeViewZones(function (accessor) {\n      if (_this._viewZoneId !== undefined) {\n        accessor.removeZone(_this._viewZoneId);\n        _this._viewZoneId = undefined;\n\n        if (_this._viewZone) {\n          _this._codeEditor.setScrollTop(_this._codeEditor.getScrollTop() - _this._viewZone.heightInPx);\n\n          _this._viewZone = undefined;\n        }\n      }\n    });\n  };\n\n  FindWidget.prototype._applyTheme = function (theme) {\n    var inputStyles = {\n      inputActiveOptionBorder: theme.getColor(inputActiveOptionBorder),\n      inputBackground: theme.getColor(inputBackground),\n      inputForeground: theme.getColor(inputForeground),\n      inputBorder: theme.getColor(inputBorder),\n      inputValidationInfoBackground: theme.getColor(inputValidationInfoBackground),\n      inputValidationInfoForeground: theme.getColor(inputValidationInfoForeground),\n      inputValidationInfoBorder: theme.getColor(inputValidationInfoBorder),\n      inputValidationWarningBackground: theme.getColor(inputValidationWarningBackground),\n      inputValidationWarningForeground: theme.getColor(inputValidationWarningForeground),\n      inputValidationWarningBorder: theme.getColor(inputValidationWarningBorder),\n      inputValidationErrorBackground: theme.getColor(inputValidationErrorBackground),\n      inputValidationErrorForeground: theme.getColor(inputValidationErrorForeground),\n      inputValidationErrorBorder: theme.getColor(inputValidationErrorBorder)\n    };\n\n    this._findInput.style(inputStyles);\n\n    this._replaceInputBox.style(inputStyles);\n  };\n\n  FindWidget.prototype._tryUpdateWidgetWidth = function () {\n    if (!this._isVisible) {\n      return;\n    }\n\n    var editorWidth = this._codeEditor.getConfiguration().layoutInfo.width;\n\n    var minimapWidth = this._codeEditor.getConfiguration().layoutInfo.minimapWidth;\n\n    var collapsedFindWidget = false;\n    var reducedFindWidget = false;\n    var narrowFindWidget = false;\n\n    if (this._resized) {\n      var widgetWidth = dom.getTotalWidth(this._domNode);\n\n      if (widgetWidth > FIND_WIDGET_INITIAL_WIDTH) {\n        // as the widget is resized by users, we may need to change the max width of the widget as the editor width changes.\n        this._domNode.style.maxWidth = editorWidth - 28 - minimapWidth - 15 + \"px\";\n        this._replaceInputBox.inputElement.style.width = dom.getTotalWidth(this._findInput.inputBox.inputElement) + \"px\";\n        return;\n      }\n    }\n\n    if (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth >= editorWidth) {\n      reducedFindWidget = true;\n    }\n\n    if (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth - MAX_MATCHES_COUNT_WIDTH >= editorWidth) {\n      narrowFindWidget = true;\n    }\n\n    if (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth - MAX_MATCHES_COUNT_WIDTH >= editorWidth + 50) {\n      collapsedFindWidget = true;\n    }\n\n    dom.toggleClass(this._domNode, 'collapsed-find-widget', collapsedFindWidget);\n    dom.toggleClass(this._domNode, 'narrow-find-widget', narrowFindWidget);\n    dom.toggleClass(this._domNode, 'reduced-find-widget', reducedFindWidget);\n\n    if (!narrowFindWidget && !collapsedFindWidget) {\n      // the minimal left offset of findwidget is 15px.\n      this._domNode.style.maxWidth = editorWidth - 28 - minimapWidth - 15 + \"px\";\n    }\n\n    if (this._resized) {\n      var findInputWidth = dom.getTotalWidth(this._findInput.inputBox.inputElement);\n\n      if (findInputWidth > 0) {\n        this._replaceInputBox.inputElement.style.width = findInputWidth + \"px\";\n      }\n    }\n  }; // ----- Public\n\n\n  FindWidget.prototype.focusFindInput = function () {\n    this._findInput.select(); // Edge browser requires focus() in addition to select()\n\n\n    this._findInput.focus();\n  };\n\n  FindWidget.prototype.focusReplaceInput = function () {\n    this._replaceInputBox.select(); // Edge browser requires focus() in addition to select()\n\n\n    this._replaceInputBox.focus();\n  };\n\n  FindWidget.prototype.highlightFindOptions = function () {\n    this._findInput.highlightFindOptions();\n  };\n\n  FindWidget.prototype._updateSearchScope = function () {\n    if (!this._codeEditor.hasModel()) {\n      return;\n    }\n\n    if (this._toggleSelectionFind.checked) {\n      var selection = this._codeEditor.getSelection();\n\n      if (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\n        selection = selection.setEndPosition(selection.endLineNumber - 1, this._codeEditor.getModel().getLineMaxColumn(selection.endLineNumber - 1));\n      }\n\n      var currentMatch = this._state.currentMatch;\n\n      if (selection.startLineNumber !== selection.endLineNumber) {\n        if (!Range.equalsRange(selection, currentMatch)) {\n          // Reseed find scope\n          this._state.change({\n            searchScope: selection\n          }, true);\n        }\n      }\n    }\n  };\n\n  FindWidget.prototype._onFindInputMouseDown = function (e) {\n    // on linux, middle key does pasting.\n    if (e.middleButton) {\n      e.stopPropagation();\n    }\n  };\n\n  FindWidget.prototype._onFindInputKeyDown = function (e) {\n    if (e.equals(3\n    /* Enter */\n    )) {\n      this._codeEditor.getAction(FIND_IDS.NextMatchFindAction).run().then(undefined, onUnexpectedError);\n\n      e.preventDefault();\n      return;\n    }\n\n    if (e.equals(1024\n    /* Shift */\n    | 3\n    /* Enter */\n    )) {\n      this._codeEditor.getAction(FIND_IDS.PreviousMatchFindAction).run().then(undefined, onUnexpectedError);\n\n      e.preventDefault();\n      return;\n    }\n\n    if (e.equals(2\n    /* Tab */\n    )) {\n      if (this._isReplaceVisible) {\n        this._replaceInputBox.focus();\n      } else {\n        this._findInput.focusOnCaseSensitive();\n      }\n\n      e.preventDefault();\n      return;\n    }\n\n    if (e.equals(2048\n    /* CtrlCmd */\n    | 18\n    /* DownArrow */\n    )) {\n      this._codeEditor.focus();\n\n      e.preventDefault();\n      return;\n    }\n  };\n\n  FindWidget.prototype._onReplaceInputKeyDown = function (e) {\n    if (e.equals(3\n    /* Enter */\n    )) {\n      this._controller.replace();\n\n      e.preventDefault();\n      return;\n    }\n\n    if (e.equals(2048\n    /* CtrlCmd */\n    | 3\n    /* Enter */\n    )) {\n      this._controller.replaceAll();\n\n      e.preventDefault();\n      return;\n    }\n\n    if (e.equals(2\n    /* Tab */\n    )) {\n      this._findInput.focusOnCaseSensitive();\n\n      e.preventDefault();\n      return;\n    }\n\n    if (e.equals(1024\n    /* Shift */\n    | 2\n    /* Tab */\n    )) {\n      this._findInput.focus();\n\n      e.preventDefault();\n      return;\n    }\n\n    if (e.equals(2048\n    /* CtrlCmd */\n    | 18\n    /* DownArrow */\n    )) {\n      this._codeEditor.focus();\n\n      e.preventDefault();\n      return;\n    }\n  }; // ----- sash\n\n\n  FindWidget.prototype.getHorizontalSashTop = function (_sash) {\n    return 0;\n  };\n\n  FindWidget.prototype.getHorizontalSashLeft = function (_sash) {\n    return 0;\n  };\n\n  FindWidget.prototype.getHorizontalSashWidth = function (_sash) {\n    return 500;\n  }; // ----- initialization\n\n\n  FindWidget.prototype._keybindingLabelFor = function (actionId) {\n    var kb = this._keybindingService.lookupKeybinding(actionId);\n\n    if (!kb) {\n      return '';\n    }\n\n    return \" (\" + kb.getLabel() + \")\";\n  };\n\n  FindWidget.prototype._buildFindPart = function () {\n    var _this = this; // Find input\n\n\n    this._findInput = this._register(new ContextScopedFindInput(null, this._contextViewProvider, {\n      width: FIND_INPUT_AREA_WIDTH,\n      label: NLS_FIND_INPUT_LABEL,\n      placeholder: NLS_FIND_INPUT_PLACEHOLDER,\n      appendCaseSensitiveLabel: this._keybindingLabelFor(FIND_IDS.ToggleCaseSensitiveCommand),\n      appendWholeWordsLabel: this._keybindingLabelFor(FIND_IDS.ToggleWholeWordCommand),\n      appendRegexLabel: this._keybindingLabelFor(FIND_IDS.ToggleRegexCommand),\n      validation: function validation(value) {\n        if (value.length === 0 || !_this._findInput.getRegex()) {\n          return null;\n        }\n\n        try {\n          /* tslint:disable-next-line:no-unused-expression */\n          new RegExp(value);\n          return null;\n        } catch (e) {\n          return {\n            content: e.message\n          };\n        }\n      }\n    }, this._contextKeyService, true));\n\n    this._findInput.setRegex(!!this._state.isRegex);\n\n    this._findInput.setCaseSensitive(!!this._state.matchCase);\n\n    this._findInput.setWholeWords(!!this._state.wholeWord);\n\n    this._register(this._findInput.onKeyDown(function (e) {\n      return _this._onFindInputKeyDown(e);\n    }));\n\n    this._register(this._findInput.inputBox.onDidChange(function () {\n      if (_this._ignoreChangeEvent) {\n        return;\n      }\n\n      _this._state.change({\n        searchString: _this._findInput.getValue()\n      }, true);\n    }));\n\n    this._register(this._findInput.onDidOptionChange(function () {\n      _this._state.change({\n        isRegex: _this._findInput.getRegex(),\n        wholeWord: _this._findInput.getWholeWords(),\n        matchCase: _this._findInput.getCaseSensitive()\n      }, true);\n    }));\n\n    this._register(this._findInput.onCaseSensitiveKeyDown(function (e) {\n      if (e.equals(1024\n      /* Shift */\n      | 2\n      /* Tab */\n      )) {\n        if (_this._isReplaceVisible) {\n          _this._replaceInputBox.focus();\n\n          e.preventDefault();\n        }\n      }\n    }));\n\n    if (platform.isLinux) {\n      this._register(this._findInput.onMouseDown(function (e) {\n        return _this._onFindInputMouseDown(e);\n      }));\n    }\n\n    this._matchesCount = document.createElement('div');\n    this._matchesCount.className = 'matchesCount';\n\n    this._updateMatchesCount(); // Previous button\n\n\n    this._prevBtn = this._register(new SimpleButton({\n      label: NLS_PREVIOUS_MATCH_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.PreviousMatchFindAction),\n      className: 'previous',\n      onTrigger: function onTrigger() {\n        _this._codeEditor.getAction(FIND_IDS.PreviousMatchFindAction).run().then(undefined, onUnexpectedError);\n      }\n    })); // Next button\n\n    this._nextBtn = this._register(new SimpleButton({\n      label: NLS_NEXT_MATCH_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.NextMatchFindAction),\n      className: 'next',\n      onTrigger: function onTrigger() {\n        _this._codeEditor.getAction(FIND_IDS.NextMatchFindAction).run().then(undefined, onUnexpectedError);\n      }\n    }));\n    var findPart = document.createElement('div');\n    findPart.className = 'find-part';\n    findPart.appendChild(this._findInput.domNode);\n    findPart.appendChild(this._matchesCount);\n    findPart.appendChild(this._prevBtn.domNode);\n    findPart.appendChild(this._nextBtn.domNode); // Toggle selection button\n\n    this._toggleSelectionFind = this._register(new SimpleCheckbox({\n      parent: findPart,\n      title: NLS_TOGGLE_SELECTION_FIND_TITLE + this._keybindingLabelFor(FIND_IDS.ToggleSearchScopeCommand),\n      onChange: function onChange() {\n        if (_this._toggleSelectionFind.checked) {\n          if (_this._codeEditor.hasModel()) {\n            var selection = _this._codeEditor.getSelection();\n\n            if (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\n              selection = selection.setEndPosition(selection.endLineNumber - 1, _this._codeEditor.getModel().getLineMaxColumn(selection.endLineNumber - 1));\n            }\n\n            if (!selection.isEmpty()) {\n              _this._state.change({\n                searchScope: selection\n              }, true);\n            }\n          }\n        } else {\n          _this._state.change({\n            searchScope: null\n          }, true);\n        }\n      }\n    })); // Close button\n\n    this._closeBtn = this._register(new SimpleButton({\n      label: NLS_CLOSE_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.CloseFindWidgetCommand),\n      className: 'close-fw',\n      onTrigger: function onTrigger() {\n        _this._state.change({\n          isRevealed: false,\n          searchScope: null\n        }, false);\n      },\n      onKeyDown: function onKeyDown(e) {\n        if (e.equals(2\n        /* Tab */\n        )) {\n          if (_this._isReplaceVisible) {\n            if (_this._replaceBtn.isEnabled()) {\n              _this._replaceBtn.focus();\n            } else {\n              _this._codeEditor.focus();\n            }\n\n            e.preventDefault();\n          }\n        }\n      }\n    }));\n    findPart.appendChild(this._closeBtn.domNode);\n    return findPart;\n  };\n\n  FindWidget.prototype._buildReplacePart = function () {\n    var _this = this; // Replace input\n\n\n    var replaceInput = document.createElement('div');\n    replaceInput.className = 'replace-input';\n    replaceInput.style.width = REPLACE_INPUT_AREA_WIDTH + 'px';\n    this._replaceInputBox = this._register(new ContextScopedHistoryInputBox(replaceInput, undefined, {\n      ariaLabel: NLS_REPLACE_INPUT_LABEL,\n      placeholder: NLS_REPLACE_INPUT_PLACEHOLDER,\n      history: []\n    }, this._contextKeyService));\n\n    this._register(dom.addStandardDisposableListener(this._replaceInputBox.inputElement, 'keydown', function (e) {\n      return _this._onReplaceInputKeyDown(e);\n    }));\n\n    this._register(this._replaceInputBox.onDidChange(function () {\n      _this._state.change({\n        replaceString: _this._replaceInputBox.value\n      }, false);\n    })); // Replace one button\n\n\n    this._replaceBtn = this._register(new SimpleButton({\n      label: NLS_REPLACE_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.ReplaceOneAction),\n      className: 'replace',\n      onTrigger: function onTrigger() {\n        _this._controller.replace();\n      },\n      onKeyDown: function onKeyDown(e) {\n        if (e.equals(1024\n        /* Shift */\n        | 2\n        /* Tab */\n        )) {\n          _this._closeBtn.focus();\n\n          e.preventDefault();\n        }\n      }\n    })); // Replace all button\n\n    this._replaceAllBtn = this._register(new SimpleButton({\n      label: NLS_REPLACE_ALL_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.ReplaceAllAction),\n      className: 'replace-all',\n      onTrigger: function onTrigger() {\n        _this._controller.replaceAll();\n      }\n    }));\n    var replacePart = document.createElement('div');\n    replacePart.className = 'replace-part';\n    replacePart.appendChild(replaceInput);\n    replacePart.appendChild(this._replaceBtn.domNode);\n    replacePart.appendChild(this._replaceAllBtn.domNode);\n    return replacePart;\n  };\n\n  FindWidget.prototype._buildDomNode = function () {\n    var _this = this; // Find part\n\n\n    var findPart = this._buildFindPart(); // Replace part\n\n\n    var replacePart = this._buildReplacePart(); // Toggle replace button\n\n\n    this._toggleReplaceBtn = this._register(new SimpleButton({\n      label: NLS_TOGGLE_REPLACE_MODE_BTN_LABEL,\n      className: 'toggle left',\n      onTrigger: function onTrigger() {\n        _this._state.change({\n          isReplaceRevealed: !_this._isReplaceVisible\n        }, false);\n\n        if (_this._isReplaceVisible) {\n          _this._replaceInputBox.width = _this._findInput.inputBox.width;\n        }\n\n        _this._showViewZone();\n      }\n    }));\n\n    this._toggleReplaceBtn.toggleClass('expand', this._isReplaceVisible);\n\n    this._toggleReplaceBtn.toggleClass('collapse', !this._isReplaceVisible);\n\n    this._toggleReplaceBtn.setExpanded(this._isReplaceVisible); // Widget\n\n\n    this._domNode = document.createElement('div');\n    this._domNode.className = 'editor-widget find-widget';\n\n    this._domNode.setAttribute('aria-hidden', 'true'); // We need to set this explicitly, otherwise on IE11, the width inheritence of flex doesn't work.\n\n\n    this._domNode.style.width = FIND_WIDGET_INITIAL_WIDTH + \"px\";\n\n    this._domNode.appendChild(this._toggleReplaceBtn.domNode);\n\n    this._domNode.appendChild(findPart);\n\n    this._domNode.appendChild(replacePart);\n\n    this._buildSash();\n  };\n\n  FindWidget.prototype._buildSash = function () {\n    var _this = this;\n\n    this._resizeSash = new Sash(this._domNode, this, {\n      orientation: 0\n      /* VERTICAL */\n\n    });\n    this._resized = false;\n    var originalWidth = FIND_WIDGET_INITIAL_WIDTH;\n\n    this._register(this._resizeSash.onDidStart(function () {\n      originalWidth = dom.getTotalWidth(_this._domNode);\n    }));\n\n    this._register(this._resizeSash.onDidChange(function (evt) {\n      _this._resized = true;\n      var width = originalWidth + evt.startX - evt.currentX;\n\n      if (width < FIND_WIDGET_INITIAL_WIDTH) {\n        // narrow down the find widget should be handled by CSS.\n        return;\n      }\n\n      var inputBoxWidth = width - FIND_ALL_CONTROLS_WIDTH;\n      var maxWidth = parseFloat(dom.getComputedStyle(_this._domNode).maxWidth) || 0;\n\n      if (width > maxWidth) {\n        return;\n      }\n\n      _this._domNode.style.width = width + \"px\";\n\n      if (_this._isReplaceVisible) {\n        _this._replaceInputBox.width = inputBoxWidth;\n      }\n    }));\n  };\n\n  FindWidget.prototype.updateAccessibilitySupport = function () {\n    var value = this._codeEditor.getConfiguration().accessibilitySupport;\n\n    this._findInput.setFocusInputOnOptionClick(value !== 2\n    /* Enabled */\n    );\n  };\n\n  FindWidget.ID = 'editor.contrib.findWidget';\n  return FindWidget;\n}(Widget);\n\nexport { FindWidget };\n\nvar SimpleCheckbox =\n/** @class */\nfunction (_super) {\n  __extends(SimpleCheckbox, _super);\n\n  function SimpleCheckbox(opts) {\n    var _this = _super.call(this) || this;\n\n    _this._opts = opts;\n    _this._domNode = document.createElement('div');\n    _this._domNode.className = 'monaco-checkbox';\n    _this._domNode.title = _this._opts.title;\n    _this._domNode.tabIndex = 0;\n    _this._checkbox = document.createElement('input');\n    _this._checkbox.type = 'checkbox';\n    _this._checkbox.className = 'checkbox';\n    _this._checkbox.id = 'checkbox-' + SimpleCheckbox._COUNTER++;\n    _this._checkbox.tabIndex = -1;\n    _this._label = document.createElement('label');\n    _this._label.className = 'label'; // Connect the label and the checkbox. Checkbox will get checked when the label receives a click.\n\n    _this._label.htmlFor = _this._checkbox.id;\n    _this._label.tabIndex = -1;\n\n    _this._domNode.appendChild(_this._checkbox);\n\n    _this._domNode.appendChild(_this._label);\n\n    _this._opts.parent.appendChild(_this._domNode);\n\n    _this.onchange(_this._checkbox, function () {\n      _this._opts.onChange();\n    });\n\n    return _this;\n  }\n\n  Object.defineProperty(SimpleCheckbox.prototype, \"domNode\", {\n    get: function get() {\n      return this._domNode;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(SimpleCheckbox.prototype, \"checked\", {\n    get: function get() {\n      return this._checkbox.checked;\n    },\n    set: function set(newValue) {\n      this._checkbox.checked = newValue;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  SimpleCheckbox.prototype.enable = function () {\n    this._checkbox.removeAttribute('disabled');\n  };\n\n  SimpleCheckbox.prototype.disable = function () {\n    this._checkbox.disabled = true;\n  };\n\n  SimpleCheckbox.prototype.setEnabled = function (enabled) {\n    if (enabled) {\n      this.enable();\n      this.domNode.tabIndex = 0;\n    } else {\n      this.disable();\n      this.domNode.tabIndex = -1;\n    }\n  };\n\n  SimpleCheckbox._COUNTER = 0;\n  return SimpleCheckbox;\n}(Widget);\n\nvar SimpleButton =\n/** @class */\nfunction (_super) {\n  __extends(SimpleButton, _super);\n\n  function SimpleButton(opts) {\n    var _this = _super.call(this) || this;\n\n    _this._opts = opts;\n    _this._domNode = document.createElement('div');\n    _this._domNode.title = _this._opts.label;\n    _this._domNode.tabIndex = 0;\n    _this._domNode.className = 'button ' + _this._opts.className;\n\n    _this._domNode.setAttribute('role', 'button');\n\n    _this._domNode.setAttribute('aria-label', _this._opts.label);\n\n    _this.onclick(_this._domNode, function (e) {\n      _this._opts.onTrigger();\n\n      e.preventDefault();\n    });\n\n    _this.onkeydown(_this._domNode, function (e) {\n      if (e.equals(10\n      /* Space */\n      ) || e.equals(3\n      /* Enter */\n      )) {\n        _this._opts.onTrigger();\n\n        e.preventDefault();\n        return;\n      }\n\n      if (_this._opts.onKeyDown) {\n        _this._opts.onKeyDown(e);\n      }\n    });\n\n    return _this;\n  }\n\n  Object.defineProperty(SimpleButton.prototype, \"domNode\", {\n    get: function get() {\n      return this._domNode;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  SimpleButton.prototype.isEnabled = function () {\n    return this._domNode.tabIndex >= 0;\n  };\n\n  SimpleButton.prototype.focus = function () {\n    this._domNode.focus();\n  };\n\n  SimpleButton.prototype.setEnabled = function (enabled) {\n    dom.toggleClass(this._domNode, 'disabled', !enabled);\n\n    this._domNode.setAttribute('aria-disabled', String(!enabled));\n\n    this._domNode.tabIndex = enabled ? 0 : -1;\n  };\n\n  SimpleButton.prototype.setExpanded = function (expanded) {\n    this._domNode.setAttribute('aria-expanded', String(!!expanded));\n  };\n\n  SimpleButton.prototype.toggleClass = function (className, shouldHaveIt) {\n    dom.toggleClass(this._domNode, className, shouldHaveIt);\n  };\n\n  return SimpleButton;\n}(Widget);\n\nexport { SimpleButton }; // theming\n\nregisterThemingParticipant(function (theme, collector) {\n  var addBackgroundColorRule = function addBackgroundColorRule(selector, color) {\n    if (color) {\n      collector.addRule(\".monaco-editor \" + selector + \" { background-color: \" + color + \"; }\");\n    }\n  };\n\n  addBackgroundColorRule('.findMatch', theme.getColor(editorFindMatchHighlight));\n  addBackgroundColorRule('.currentFindMatch', theme.getColor(editorFindMatch));\n  addBackgroundColorRule('.findScope', theme.getColor(editorFindRangeHighlight));\n  var widgetBackground = theme.getColor(editorWidgetBackground);\n  addBackgroundColorRule('.find-widget', widgetBackground);\n  var widgetShadowColor = theme.getColor(widgetShadow);\n\n  if (widgetShadowColor) {\n    collector.addRule(\".monaco-editor .find-widget { box-shadow: 0 2px 8px \" + widgetShadowColor + \"; }\");\n  }\n\n  var findMatchHighlightBorder = theme.getColor(editorFindMatchHighlightBorder);\n\n  if (findMatchHighlightBorder) {\n    collector.addRule(\".monaco-editor .findMatch { border: 1px \" + (theme.type === 'hc' ? 'dotted' : 'solid') + \" \" + findMatchHighlightBorder + \"; box-sizing: border-box; }\");\n  }\n\n  var findMatchBorder = theme.getColor(editorFindMatchBorder);\n\n  if (findMatchBorder) {\n    collector.addRule(\".monaco-editor .currentFindMatch { border: 2px solid \" + findMatchBorder + \"; padding: 1px; box-sizing: border-box; }\");\n  }\n\n  var findRangeHighlightBorder = theme.getColor(editorFindRangeHighlightBorder);\n\n  if (findRangeHighlightBorder) {\n    collector.addRule(\".monaco-editor .findScope { border: 1px \" + (theme.type === 'hc' ? 'dashed' : 'solid') + \" \" + findRangeHighlightBorder + \"; }\");\n  }\n\n  var hcBorder = theme.getColor(contrastBorder);\n\n  if (hcBorder) {\n    collector.addRule(\".monaco-editor .find-widget { border: 2px solid \" + hcBorder + \"; }\");\n  }\n\n  var error = theme.getColor(errorForeground);\n\n  if (error) {\n    collector.addRule(\".monaco-editor .find-widget.no-results .matchesCount { color: \" + error + \"; }\");\n  }\n\n  var resizeBorderBackground = theme.getColor(editorWidgetResizeBorder);\n\n  if (resizeBorderBackground) {\n    collector.addRule(\".monaco-editor .find-widget .monaco-sash { background-color: \" + resizeBorderBackground + \"; width: 3px !important; margin-left: -4px;}\");\n  } else {\n    var border = theme.getColor(editorWidgetBorder);\n\n    if (border) {\n      collector.addRule(\".monaco-editor .find-widget .monaco-sash { background-color: \" + border + \"; width: 3px !important; margin-left: -4px;}\");\n    }\n  }\n\n  var inputActiveBorder = theme.getColor(inputActiveOptionBorder);\n\n  if (inputActiveBorder) {\n    collector.addRule(\".monaco-editor .find-widget .monaco-checkbox .checkbox:checked + .label { border: 1px solid \" + inputActiveBorder.toString() + \"; }\");\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createDecorator } from '../../instantiation/common/instantiation.js';\nexport var IClipboardService = createDecorator('clipboardService');","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport * as nls from '../../../nls.js';\nimport { Delayer } from '../../../base/common/async.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport * as strings from '../../../base/common/strings.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport { CONTEXT_FIND_INPUT_FOCUSED, CONTEXT_FIND_WIDGET_VISIBLE, FIND_IDS, FindModelBoundToEditorModel, ToggleCaseSensitiveKeybinding, ToggleRegexKeybinding, ToggleSearchScopeKeybinding, ToggleWholeWordKeybinding } from './findModel.js';\nimport { FindOptionsWidget } from './findOptionsWidget.js';\nimport { FindReplaceState } from './findState.js';\nimport { FindWidget } from './findWidget.js';\nimport { IClipboardService } from '../../../platform/clipboard/common/clipboardService.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IContextViewService } from '../../../platform/contextview/browser/contextView.js';\nimport { optional } from '../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\nimport { IStorageService } from '../../../platform/storage/common/storage.js';\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\nvar SEARCH_STRING_MAX_LENGTH = 524288;\nexport function getSelectionSearchString(editor) {\n  if (!editor.hasModel()) {\n    return null;\n  }\n\n  var selection = editor.getSelection(); // if selection spans multiple lines, default search string to empty\n\n  if (selection.startLineNumber === selection.endLineNumber) {\n    if (selection.isEmpty()) {\n      var wordAtPosition = editor.getModel().getWordAtPosition(selection.getStartPosition());\n\n      if (wordAtPosition) {\n        return wordAtPosition.word;\n      }\n    } else {\n      if (editor.getModel().getValueLengthInRange(selection) < SEARCH_STRING_MAX_LENGTH) {\n        return editor.getModel().getValueInRange(selection);\n      }\n    }\n  }\n\n  return null;\n}\n\nvar CommonFindController =\n/** @class */\nfunction (_super) {\n  __extends(CommonFindController, _super);\n\n  function CommonFindController(editor, contextKeyService, storageService, clipboardService) {\n    var _this = _super.call(this) || this;\n\n    _this._editor = editor;\n    _this._findWidgetVisible = CONTEXT_FIND_WIDGET_VISIBLE.bindTo(contextKeyService);\n    _this._contextKeyService = contextKeyService;\n    _this._storageService = storageService;\n    _this._clipboardService = clipboardService;\n    _this._updateHistoryDelayer = new Delayer(500);\n    _this._state = _this._register(new FindReplaceState());\n\n    _this.loadQueryState();\n\n    _this._register(_this._state.onFindReplaceStateChange(function (e) {\n      return _this._onStateChanged(e);\n    }));\n\n    _this._model = null;\n\n    _this._register(_this._editor.onDidChangeModel(function () {\n      var shouldRestartFind = _this._editor.getModel() && _this._state.isRevealed;\n\n      _this.disposeModel();\n\n      _this._state.change({\n        searchScope: null,\n        matchCase: _this._storageService.getBoolean('editor.matchCase', 1\n        /* WORKSPACE */\n        , false),\n        wholeWord: _this._storageService.getBoolean('editor.wholeWord', 1\n        /* WORKSPACE */\n        , false),\n        isRegex: _this._storageService.getBoolean('editor.isRegex', 1\n        /* WORKSPACE */\n        , false)\n      }, false);\n\n      if (shouldRestartFind) {\n        _this._start({\n          forceRevealReplace: false,\n          seedSearchStringFromSelection: false && _this._editor.getConfiguration().contribInfo.find.seedSearchStringFromSelection,\n          seedSearchStringFromGlobalClipboard: false,\n          shouldFocus: 0\n          /* NoFocusChange */\n          ,\n          shouldAnimate: false,\n          updateSearchScope: false\n        });\n      }\n    }));\n\n    return _this;\n  }\n\n  CommonFindController.get = function (editor) {\n    return editor.getContribution(CommonFindController.ID);\n  };\n\n  CommonFindController.prototype.dispose = function () {\n    this.disposeModel();\n\n    _super.prototype.dispose.call(this);\n  };\n\n  CommonFindController.prototype.disposeModel = function () {\n    if (this._model) {\n      this._model.dispose();\n\n      this._model = null;\n    }\n  };\n\n  CommonFindController.prototype.getId = function () {\n    return CommonFindController.ID;\n  };\n\n  CommonFindController.prototype._onStateChanged = function (e) {\n    this.saveQueryState(e);\n\n    if (e.isRevealed) {\n      if (this._state.isRevealed) {\n        this._findWidgetVisible.set(true);\n      } else {\n        this._findWidgetVisible.reset();\n\n        this.disposeModel();\n      }\n    }\n\n    if (e.searchString) {\n      this.setGlobalBufferTerm(this._state.searchString);\n    }\n  };\n\n  CommonFindController.prototype.saveQueryState = function (e) {\n    if (e.isRegex) {\n      this._storageService.store('editor.isRegex', this._state.actualIsRegex, 1\n      /* WORKSPACE */\n      );\n    }\n\n    if (e.wholeWord) {\n      this._storageService.store('editor.wholeWord', this._state.actualWholeWord, 1\n      /* WORKSPACE */\n      );\n    }\n\n    if (e.matchCase) {\n      this._storageService.store('editor.matchCase', this._state.actualMatchCase, 1\n      /* WORKSPACE */\n      );\n    }\n  };\n\n  CommonFindController.prototype.loadQueryState = function () {\n    this._state.change({\n      matchCase: this._storageService.getBoolean('editor.matchCase', 1\n      /* WORKSPACE */\n      , this._state.matchCase),\n      wholeWord: this._storageService.getBoolean('editor.wholeWord', 1\n      /* WORKSPACE */\n      , this._state.wholeWord),\n      isRegex: this._storageService.getBoolean('editor.isRegex', 1\n      /* WORKSPACE */\n      , this._state.isRegex)\n    }, false);\n  };\n\n  CommonFindController.prototype.isFindInputFocused = function () {\n    return !!CONTEXT_FIND_INPUT_FOCUSED.getValue(this._contextKeyService);\n  };\n\n  CommonFindController.prototype.getState = function () {\n    return this._state;\n  };\n\n  CommonFindController.prototype.closeFindWidget = function () {\n    this._state.change({\n      isRevealed: false,\n      searchScope: null\n    }, false);\n\n    this._editor.focus();\n  };\n\n  CommonFindController.prototype.toggleCaseSensitive = function () {\n    this._state.change({\n      matchCase: !this._state.matchCase\n    }, false);\n\n    if (!this._state.isRevealed) {\n      this.highlightFindOptions();\n    }\n  };\n\n  CommonFindController.prototype.toggleWholeWords = function () {\n    this._state.change({\n      wholeWord: !this._state.wholeWord\n    }, false);\n\n    if (!this._state.isRevealed) {\n      this.highlightFindOptions();\n    }\n  };\n\n  CommonFindController.prototype.toggleRegex = function () {\n    this._state.change({\n      isRegex: !this._state.isRegex\n    }, false);\n\n    if (!this._state.isRevealed) {\n      this.highlightFindOptions();\n    }\n  };\n\n  CommonFindController.prototype.toggleSearchScope = function () {\n    if (this._state.searchScope) {\n      this._state.change({\n        searchScope: null\n      }, true);\n    } else {\n      if (this._editor.hasModel()) {\n        var selection = this._editor.getSelection();\n\n        if (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\n          selection = selection.setEndPosition(selection.endLineNumber - 1, this._editor.getModel().getLineMaxColumn(selection.endLineNumber - 1));\n        }\n\n        if (!selection.isEmpty()) {\n          this._state.change({\n            searchScope: selection\n          }, true);\n        }\n      }\n    }\n  };\n\n  CommonFindController.prototype.setSearchString = function (searchString) {\n    if (this._state.isRegex) {\n      searchString = strings.escapeRegExpCharacters(searchString);\n    }\n\n    this._state.change({\n      searchString: searchString\n    }, false);\n  };\n\n  CommonFindController.prototype.highlightFindOptions = function () {// overwritten in subclass\n  };\n\n  CommonFindController.prototype._start = function (opts) {\n    this.disposeModel();\n\n    if (!this._editor.hasModel()) {\n      // cannot do anything with an editor that doesn't have a model...\n      return;\n    }\n\n    var stateChanges = {\n      isRevealed: true\n    };\n\n    if (opts.seedSearchStringFromSelection) {\n      var selectionSearchString = getSelectionSearchString(this._editor);\n\n      if (selectionSearchString) {\n        if (this._state.isRegex) {\n          stateChanges.searchString = strings.escapeRegExpCharacters(selectionSearchString);\n        } else {\n          stateChanges.searchString = selectionSearchString;\n        }\n      }\n    }\n\n    if (!stateChanges.searchString && opts.seedSearchStringFromGlobalClipboard) {\n      var selectionSearchString = this.getGlobalBufferTerm();\n\n      if (selectionSearchString) {\n        stateChanges.searchString = selectionSearchString;\n      }\n    } // Overwrite isReplaceRevealed\n\n\n    if (opts.forceRevealReplace) {\n      stateChanges.isReplaceRevealed = true;\n    } else if (!this._findWidgetVisible.get()) {\n      stateChanges.isReplaceRevealed = false;\n    }\n\n    if (opts.updateSearchScope) {\n      var currentSelection = this._editor.getSelection();\n\n      if (!currentSelection.isEmpty()) {\n        stateChanges.searchScope = currentSelection;\n      }\n    }\n\n    this._state.change(stateChanges, false);\n\n    if (!this._model) {\n      this._model = new FindModelBoundToEditorModel(this._editor, this._state);\n    }\n  };\n\n  CommonFindController.prototype.start = function (opts) {\n    this._start(opts);\n  };\n\n  CommonFindController.prototype.moveToNextMatch = function () {\n    if (this._model) {\n      this._model.moveToNextMatch();\n\n      return true;\n    }\n\n    return false;\n  };\n\n  CommonFindController.prototype.moveToPrevMatch = function () {\n    if (this._model) {\n      this._model.moveToPrevMatch();\n\n      return true;\n    }\n\n    return false;\n  };\n\n  CommonFindController.prototype.replace = function () {\n    if (this._model) {\n      this._model.replace();\n\n      return true;\n    }\n\n    return false;\n  };\n\n  CommonFindController.prototype.replaceAll = function () {\n    if (this._model) {\n      this._model.replaceAll();\n\n      return true;\n    }\n\n    return false;\n  };\n\n  CommonFindController.prototype.selectAllMatches = function () {\n    if (this._model) {\n      this._model.selectAllMatches();\n\n      this._editor.focus();\n\n      return true;\n    }\n\n    return false;\n  };\n\n  CommonFindController.prototype.getGlobalBufferTerm = function () {\n    if (this._editor.getConfiguration().contribInfo.find.globalFindClipboard && this._clipboardService && this._editor.hasModel() && !this._editor.getModel().isTooLargeForSyncing()) {\n      return this._clipboardService.readFindText();\n    }\n\n    return '';\n  };\n\n  CommonFindController.prototype.setGlobalBufferTerm = function (text) {\n    if (this._editor.getConfiguration().contribInfo.find.globalFindClipboard && this._clipboardService && this._editor.hasModel() && !this._editor.getModel().isTooLargeForSyncing()) {\n      this._clipboardService.writeFindText(text);\n    }\n  };\n\n  CommonFindController.ID = 'editor.contrib.findController';\n  CommonFindController = __decorate([__param(1, IContextKeyService), __param(2, IStorageService), __param(3, IClipboardService)], CommonFindController);\n  return CommonFindController;\n}(Disposable);\n\nexport { CommonFindController };\n\nvar FindController =\n/** @class */\nfunction (_super) {\n  __extends(FindController, _super);\n\n  function FindController(editor, _contextViewService, _contextKeyService, _keybindingService, _themeService, storageService, clipboardService) {\n    var _this = _super.call(this, editor, _contextKeyService, storageService, clipboardService) || this;\n\n    _this._contextViewService = _contextViewService;\n    _this._keybindingService = _keybindingService;\n    _this._themeService = _themeService;\n    return _this;\n  }\n\n  FindController.prototype._start = function (opts) {\n    if (!this._widget) {\n      this._createFindWidget();\n    }\n\n    if (!this._widget.getPosition() && this._editor.getConfiguration().contribInfo.find.autoFindInSelection) {\n      // not visible yet so we need to set search scope if `editor.find.autoFindInSelection` is `true`\n      opts.updateSearchScope = true;\n    }\n\n    _super.prototype._start.call(this, opts);\n\n    if (opts.shouldFocus === 2\n    /* FocusReplaceInput */\n    ) {\n        this._widget.focusReplaceInput();\n      } else if (opts.shouldFocus === 1\n    /* FocusFindInput */\n    ) {\n        this._widget.focusFindInput();\n      }\n  };\n\n  FindController.prototype.highlightFindOptions = function () {\n    if (!this._widget) {\n      this._createFindWidget();\n    }\n\n    if (this._state.isRevealed) {\n      this._widget.highlightFindOptions();\n    } else {\n      this._findOptionsWidget.highlightFindOptions();\n    }\n  };\n\n  FindController.prototype._createFindWidget = function () {\n    this._widget = this._register(new FindWidget(this._editor, this, this._state, this._contextViewService, this._keybindingService, this._contextKeyService, this._themeService));\n    this._findOptionsWidget = this._register(new FindOptionsWidget(this._editor, this._state, this._keybindingService, this._themeService));\n  };\n\n  FindController = __decorate([__param(1, IContextViewService), __param(2, IContextKeyService), __param(3, IKeybindingService), __param(4, IThemeService), __param(5, IStorageService), __param(6, optional(IClipboardService))], FindController);\n  return FindController;\n}(CommonFindController);\n\nexport { FindController };\n\nvar StartFindAction =\n/** @class */\nfunction (_super) {\n  __extends(StartFindAction, _super);\n\n  function StartFindAction() {\n    return _super.call(this, {\n      id: FIND_IDS.StartFindAction,\n      label: nls.localize('startFindAction', \"Find\"),\n      alias: 'Find',\n      precondition: null,\n      kbOpts: {\n        kbExpr: null,\n        primary: 2048\n        /* CtrlCmd */\n        | 36\n        /* KEY_F */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      },\n      menubarOpts: {\n        menuId: 14\n        /* MenubarEditMenu */\n        ,\n        group: '3_find',\n        title: nls.localize({\n          key: 'miFind',\n          comment: ['&& denotes a mnemonic']\n        }, \"&&Find\"),\n        order: 1\n      }\n    }) || this;\n  }\n\n  StartFindAction.prototype.run = function (accessor, editor) {\n    var controller = CommonFindController.get(editor);\n\n    if (controller) {\n      controller.start({\n        forceRevealReplace: false,\n        seedSearchStringFromSelection: editor.getConfiguration().contribInfo.find.seedSearchStringFromSelection,\n        seedSearchStringFromGlobalClipboard: editor.getConfiguration().contribInfo.find.globalFindClipboard,\n        shouldFocus: 1\n        /* FocusFindInput */\n        ,\n        shouldAnimate: true,\n        updateSearchScope: false\n      });\n    }\n  };\n\n  return StartFindAction;\n}(EditorAction);\n\nexport { StartFindAction };\n\nvar StartFindWithSelectionAction =\n/** @class */\nfunction (_super) {\n  __extends(StartFindWithSelectionAction, _super);\n\n  function StartFindWithSelectionAction() {\n    return _super.call(this, {\n      id: FIND_IDS.StartFindWithSelection,\n      label: nls.localize('startFindWithSelectionAction', \"Find With Selection\"),\n      alias: 'Find With Selection',\n      precondition: null,\n      kbOpts: {\n        kbExpr: null,\n        primary: 0,\n        mac: {\n          primary: 2048\n          /* CtrlCmd */\n          | 35\n          /* KEY_E */\n\n        },\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  StartFindWithSelectionAction.prototype.run = function (accessor, editor) {\n    var controller = CommonFindController.get(editor);\n\n    if (controller) {\n      controller.start({\n        forceRevealReplace: false,\n        seedSearchStringFromSelection: true,\n        seedSearchStringFromGlobalClipboard: false,\n        shouldFocus: 1\n        /* FocusFindInput */\n        ,\n        shouldAnimate: true,\n        updateSearchScope: false\n      });\n      controller.setGlobalBufferTerm(controller.getState().searchString);\n    }\n  };\n\n  return StartFindWithSelectionAction;\n}(EditorAction);\n\nexport { StartFindWithSelectionAction };\n\nvar MatchFindAction =\n/** @class */\nfunction (_super) {\n  __extends(MatchFindAction, _super);\n\n  function MatchFindAction() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  MatchFindAction.prototype.run = function (accessor, editor) {\n    var controller = CommonFindController.get(editor);\n\n    if (controller && !this._run(controller)) {\n      controller.start({\n        forceRevealReplace: false,\n        seedSearchStringFromSelection: controller.getState().searchString.length === 0 && editor.getConfiguration().contribInfo.find.seedSearchStringFromSelection,\n        seedSearchStringFromGlobalClipboard: true,\n        shouldFocus: 0\n        /* NoFocusChange */\n        ,\n        shouldAnimate: true,\n        updateSearchScope: false\n      });\n\n      this._run(controller);\n    }\n  };\n\n  return MatchFindAction;\n}(EditorAction);\n\nexport { MatchFindAction };\n\nvar NextMatchFindAction =\n/** @class */\nfunction (_super) {\n  __extends(NextMatchFindAction, _super);\n\n  function NextMatchFindAction() {\n    return _super.call(this, {\n      id: FIND_IDS.NextMatchFindAction,\n      label: nls.localize('findNextMatchAction', \"Find Next\"),\n      alias: 'Find Next',\n      precondition: null,\n      kbOpts: {\n        kbExpr: EditorContextKeys.focus,\n        primary: 61\n        /* F3 */\n        ,\n        mac: {\n          primary: 2048\n          /* CtrlCmd */\n          | 37\n          /* KEY_G */\n          ,\n          secondary: [61\n          /* F3 */\n          ]\n        },\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  NextMatchFindAction.prototype._run = function (controller) {\n    return controller.moveToNextMatch();\n  };\n\n  return NextMatchFindAction;\n}(MatchFindAction);\n\nexport { NextMatchFindAction };\n\nvar PreviousMatchFindAction =\n/** @class */\nfunction (_super) {\n  __extends(PreviousMatchFindAction, _super);\n\n  function PreviousMatchFindAction() {\n    return _super.call(this, {\n      id: FIND_IDS.PreviousMatchFindAction,\n      label: nls.localize('findPreviousMatchAction', \"Find Previous\"),\n      alias: 'Find Previous',\n      precondition: null,\n      kbOpts: {\n        kbExpr: EditorContextKeys.focus,\n        primary: 1024\n        /* Shift */\n        | 61\n        /* F3 */\n        ,\n        mac: {\n          primary: 2048\n          /* CtrlCmd */\n          | 1024\n          /* Shift */\n          | 37\n          /* KEY_G */\n          ,\n          secondary: [1024\n          /* Shift */\n          | 61\n          /* F3 */\n          ]\n        },\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  PreviousMatchFindAction.prototype._run = function (controller) {\n    return controller.moveToPrevMatch();\n  };\n\n  return PreviousMatchFindAction;\n}(MatchFindAction);\n\nexport { PreviousMatchFindAction };\n\nvar SelectionMatchFindAction =\n/** @class */\nfunction (_super) {\n  __extends(SelectionMatchFindAction, _super);\n\n  function SelectionMatchFindAction() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  SelectionMatchFindAction.prototype.run = function (accessor, editor) {\n    var controller = CommonFindController.get(editor);\n\n    if (!controller) {\n      return;\n    }\n\n    var selectionSearchString = getSelectionSearchString(editor);\n\n    if (selectionSearchString) {\n      controller.setSearchString(selectionSearchString);\n    }\n\n    if (!this._run(controller)) {\n      controller.start({\n        forceRevealReplace: false,\n        seedSearchStringFromSelection: editor.getConfiguration().contribInfo.find.seedSearchStringFromSelection,\n        seedSearchStringFromGlobalClipboard: false,\n        shouldFocus: 0\n        /* NoFocusChange */\n        ,\n        shouldAnimate: true,\n        updateSearchScope: false\n      });\n\n      this._run(controller);\n    }\n  };\n\n  return SelectionMatchFindAction;\n}(EditorAction);\n\nexport { SelectionMatchFindAction };\n\nvar NextSelectionMatchFindAction =\n/** @class */\nfunction (_super) {\n  __extends(NextSelectionMatchFindAction, _super);\n\n  function NextSelectionMatchFindAction() {\n    return _super.call(this, {\n      id: FIND_IDS.NextSelectionMatchFindAction,\n      label: nls.localize('nextSelectionMatchFindAction', \"Find Next Selection\"),\n      alias: 'Find Next Selection',\n      precondition: null,\n      kbOpts: {\n        kbExpr: EditorContextKeys.focus,\n        primary: 2048\n        /* CtrlCmd */\n        | 61\n        /* F3 */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  NextSelectionMatchFindAction.prototype._run = function (controller) {\n    return controller.moveToNextMatch();\n  };\n\n  return NextSelectionMatchFindAction;\n}(SelectionMatchFindAction);\n\nexport { NextSelectionMatchFindAction };\n\nvar PreviousSelectionMatchFindAction =\n/** @class */\nfunction (_super) {\n  __extends(PreviousSelectionMatchFindAction, _super);\n\n  function PreviousSelectionMatchFindAction() {\n    return _super.call(this, {\n      id: FIND_IDS.PreviousSelectionMatchFindAction,\n      label: nls.localize('previousSelectionMatchFindAction', \"Find Previous Selection\"),\n      alias: 'Find Previous Selection',\n      precondition: null,\n      kbOpts: {\n        kbExpr: EditorContextKeys.focus,\n        primary: 2048\n        /* CtrlCmd */\n        | 1024\n        /* Shift */\n        | 61\n        /* F3 */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  PreviousSelectionMatchFindAction.prototype._run = function (controller) {\n    return controller.moveToPrevMatch();\n  };\n\n  return PreviousSelectionMatchFindAction;\n}(SelectionMatchFindAction);\n\nexport { PreviousSelectionMatchFindAction };\n\nvar StartFindReplaceAction =\n/** @class */\nfunction (_super) {\n  __extends(StartFindReplaceAction, _super);\n\n  function StartFindReplaceAction() {\n    return _super.call(this, {\n      id: FIND_IDS.StartFindReplaceAction,\n      label: nls.localize('startReplace', \"Replace\"),\n      alias: 'Replace',\n      precondition: null,\n      kbOpts: {\n        kbExpr: null,\n        primary: 2048\n        /* CtrlCmd */\n        | 38\n        /* KEY_H */\n        ,\n        mac: {\n          primary: 2048\n          /* CtrlCmd */\n          | 512\n          /* Alt */\n          | 36\n          /* KEY_F */\n\n        },\n        weight: 100\n        /* EditorContrib */\n\n      },\n      menubarOpts: {\n        menuId: 14\n        /* MenubarEditMenu */\n        ,\n        group: '3_find',\n        title: nls.localize({\n          key: 'miReplace',\n          comment: ['&& denotes a mnemonic']\n        }, \"&&Replace\"),\n        order: 2\n      }\n    }) || this;\n  }\n\n  StartFindReplaceAction.prototype.run = function (accessor, editor) {\n    if (!editor.hasModel() || editor.getConfiguration().readOnly) {\n      return;\n    }\n\n    var controller = CommonFindController.get(editor);\n    var currentSelection = editor.getSelection();\n    var findInputFocused = controller.isFindInputFocused(); // we only seed search string from selection when the current selection is single line and not empty,\n    // + the find input is not focused\n\n    var seedSearchStringFromSelection = !currentSelection.isEmpty() && currentSelection.startLineNumber === currentSelection.endLineNumber && editor.getConfiguration().contribInfo.find.seedSearchStringFromSelection && !findInputFocused;\n    /*\n     * if the existing search string in find widget is empty and we don't seed search string from selection, it means the Find Input is still empty, so we should focus the Find Input instead of Replace Input.\n      * findInputFocused true -> seedSearchStringFromSelection false, FocusReplaceInput\n     * findInputFocused false, seedSearchStringFromSelection true FocusReplaceInput\n     * findInputFocused false seedSearchStringFromSelection false FocusFindInput\n     */\n\n    var shouldFocus = findInputFocused || seedSearchStringFromSelection ? 2\n    /* FocusReplaceInput */\n    : 1\n    /* FocusFindInput */\n    ;\n\n    if (controller) {\n      controller.start({\n        forceRevealReplace: true,\n        seedSearchStringFromSelection: seedSearchStringFromSelection,\n        seedSearchStringFromGlobalClipboard: editor.getConfiguration().contribInfo.find.seedSearchStringFromSelection,\n        shouldFocus: shouldFocus,\n        shouldAnimate: true,\n        updateSearchScope: false\n      });\n    }\n  };\n\n  return StartFindReplaceAction;\n}(EditorAction);\n\nexport { StartFindReplaceAction };\nregisterEditorContribution(FindController);\nregisterEditorAction(StartFindAction);\nregisterEditorAction(StartFindWithSelectionAction);\nregisterEditorAction(NextMatchFindAction);\nregisterEditorAction(PreviousMatchFindAction);\nregisterEditorAction(NextSelectionMatchFindAction);\nregisterEditorAction(PreviousSelectionMatchFindAction);\nregisterEditorAction(StartFindReplaceAction);\nvar FindCommand = EditorCommand.bindToContribution(CommonFindController.get);\nregisterEditorCommand(new FindCommand({\n  id: FIND_IDS.CloseFindWidgetCommand,\n  precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n  handler: function handler(x) {\n    return x.closeFindWidget();\n  },\n  kbOpts: {\n    weight: 100\n    /* EditorContrib */\n    + 5,\n    kbExpr: EditorContextKeys.focus,\n    primary: 9\n    /* Escape */\n    ,\n    secondary: [1024\n    /* Shift */\n    | 9\n    /* Escape */\n    ]\n  }\n}));\nregisterEditorCommand(new FindCommand({\n  id: FIND_IDS.ToggleCaseSensitiveCommand,\n  precondition: null,\n  handler: function handler(x) {\n    return x.toggleCaseSensitive();\n  },\n  kbOpts: {\n    weight: 100\n    /* EditorContrib */\n    + 5,\n    kbExpr: EditorContextKeys.focus,\n    primary: ToggleCaseSensitiveKeybinding.primary,\n    mac: ToggleCaseSensitiveKeybinding.mac,\n    win: ToggleCaseSensitiveKeybinding.win,\n    linux: ToggleCaseSensitiveKeybinding.linux\n  }\n}));\nregisterEditorCommand(new FindCommand({\n  id: FIND_IDS.ToggleWholeWordCommand,\n  precondition: null,\n  handler: function handler(x) {\n    return x.toggleWholeWords();\n  },\n  kbOpts: {\n    weight: 100\n    /* EditorContrib */\n    + 5,\n    kbExpr: EditorContextKeys.focus,\n    primary: ToggleWholeWordKeybinding.primary,\n    mac: ToggleWholeWordKeybinding.mac,\n    win: ToggleWholeWordKeybinding.win,\n    linux: ToggleWholeWordKeybinding.linux\n  }\n}));\nregisterEditorCommand(new FindCommand({\n  id: FIND_IDS.ToggleRegexCommand,\n  precondition: null,\n  handler: function handler(x) {\n    return x.toggleRegex();\n  },\n  kbOpts: {\n    weight: 100\n    /* EditorContrib */\n    + 5,\n    kbExpr: EditorContextKeys.focus,\n    primary: ToggleRegexKeybinding.primary,\n    mac: ToggleRegexKeybinding.mac,\n    win: ToggleRegexKeybinding.win,\n    linux: ToggleRegexKeybinding.linux\n  }\n}));\nregisterEditorCommand(new FindCommand({\n  id: FIND_IDS.ToggleSearchScopeCommand,\n  precondition: null,\n  handler: function handler(x) {\n    return x.toggleSearchScope();\n  },\n  kbOpts: {\n    weight: 100\n    /* EditorContrib */\n    + 5,\n    kbExpr: EditorContextKeys.focus,\n    primary: ToggleSearchScopeKeybinding.primary,\n    mac: ToggleSearchScopeKeybinding.mac,\n    win: ToggleSearchScopeKeybinding.win,\n    linux: ToggleSearchScopeKeybinding.linux\n  }\n}));\nregisterEditorCommand(new FindCommand({\n  id: FIND_IDS.ReplaceOneAction,\n  precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n  handler: function handler(x) {\n    return x.replace();\n  },\n  kbOpts: {\n    weight: 100\n    /* EditorContrib */\n    + 5,\n    kbExpr: EditorContextKeys.focus,\n    primary: 2048\n    /* CtrlCmd */\n    | 1024\n    /* Shift */\n    | 22\n    /* KEY_1 */\n\n  }\n}));\nregisterEditorCommand(new FindCommand({\n  id: FIND_IDS.ReplaceAllAction,\n  precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n  handler: function handler(x) {\n    return x.replaceAll();\n  },\n  kbOpts: {\n    weight: 100\n    /* EditorContrib */\n    + 5,\n    kbExpr: EditorContextKeys.focus,\n    primary: 2048\n    /* CtrlCmd */\n    | 512\n    /* Alt */\n    | 3\n    /* Enter */\n\n  }\n}));\nregisterEditorCommand(new FindCommand({\n  id: FIND_IDS.SelectAllMatchesAction,\n  precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n  handler: function handler(x) {\n    return x.selectAllMatches();\n  },\n  kbOpts: {\n    weight: 100\n    /* EditorContrib */\n    + 5,\n    kbExpr: EditorContextKeys.focus,\n    primary: 512\n    /* Alt */\n    | 3\n    /* Enter */\n\n  }\n}));","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport var MAX_FOLDING_REGIONS = 0xFFFF;\nexport var MAX_LINE_NUMBER = 0xFFFFFF;\nvar MASK_INDENT = 0xFF000000;\n\nvar FoldingRegions =\n/** @class */\nfunction () {\n  function FoldingRegions(startIndexes, endIndexes, types) {\n    if (startIndexes.length !== endIndexes.length || startIndexes.length > MAX_FOLDING_REGIONS) {\n      throw new Error('invalid startIndexes or endIndexes size');\n    }\n\n    this._startIndexes = startIndexes;\n    this._endIndexes = endIndexes;\n    this._collapseStates = new Uint32Array(Math.ceil(startIndexes.length / 32));\n    this._types = types;\n  }\n\n  FoldingRegions.prototype.ensureParentIndices = function () {\n    var _this = this;\n\n    if (!this._parentsComputed) {\n      this._parentsComputed = true;\n      var parentIndexes_1 = [];\n\n      var isInsideLast = function isInsideLast(startLineNumber, endLineNumber) {\n        var index = parentIndexes_1[parentIndexes_1.length - 1];\n        return _this.getStartLineNumber(index) <= startLineNumber && _this.getEndLineNumber(index) >= endLineNumber;\n      };\n\n      for (var i = 0, len = this._startIndexes.length; i < len; i++) {\n        var startLineNumber = this._startIndexes[i];\n        var endLineNumber = this._endIndexes[i];\n\n        if (startLineNumber > MAX_LINE_NUMBER || endLineNumber > MAX_LINE_NUMBER) {\n          throw new Error('startLineNumber or endLineNumber must not exceed ' + MAX_LINE_NUMBER);\n        }\n\n        while (parentIndexes_1.length > 0 && !isInsideLast(startLineNumber, endLineNumber)) {\n          parentIndexes_1.pop();\n        }\n\n        var parentIndex = parentIndexes_1.length > 0 ? parentIndexes_1[parentIndexes_1.length - 1] : -1;\n        parentIndexes_1.push(i);\n        this._startIndexes[i] = startLineNumber + ((parentIndex & 0xFF) << 24);\n        this._endIndexes[i] = endLineNumber + ((parentIndex & 0xFF00) << 16);\n      }\n    }\n  };\n\n  Object.defineProperty(FoldingRegions.prototype, \"length\", {\n    get: function get() {\n      return this._startIndexes.length;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  FoldingRegions.prototype.getStartLineNumber = function (index) {\n    return this._startIndexes[index] & MAX_LINE_NUMBER;\n  };\n\n  FoldingRegions.prototype.getEndLineNumber = function (index) {\n    return this._endIndexes[index] & MAX_LINE_NUMBER;\n  };\n\n  FoldingRegions.prototype.getType = function (index) {\n    return this._types ? this._types[index] : undefined;\n  };\n\n  FoldingRegions.prototype.hasTypes = function () {\n    return !!this._types;\n  };\n\n  FoldingRegions.prototype.isCollapsed = function (index) {\n    var arrayIndex = index / 32 | 0;\n    var bit = index % 32;\n    return (this._collapseStates[arrayIndex] & 1 << bit) !== 0;\n  };\n\n  FoldingRegions.prototype.setCollapsed = function (index, newState) {\n    var arrayIndex = index / 32 | 0;\n    var bit = index % 32;\n    var value = this._collapseStates[arrayIndex];\n\n    if (newState) {\n      this._collapseStates[arrayIndex] = value | 1 << bit;\n    } else {\n      this._collapseStates[arrayIndex] = value & ~(1 << bit);\n    }\n  };\n\n  FoldingRegions.prototype.toRegion = function (index) {\n    return new FoldingRegion(this, index);\n  };\n\n  FoldingRegions.prototype.getParentIndex = function (index) {\n    this.ensureParentIndices();\n    var parent = ((this._startIndexes[index] & MASK_INDENT) >>> 24) + ((this._endIndexes[index] & MASK_INDENT) >>> 16);\n\n    if (parent === MAX_FOLDING_REGIONS) {\n      return -1;\n    }\n\n    return parent;\n  };\n\n  FoldingRegions.prototype.contains = function (index, line) {\n    return this.getStartLineNumber(index) <= line && this.getEndLineNumber(index) >= line;\n  };\n\n  FoldingRegions.prototype.findIndex = function (line) {\n    var low = 0,\n        high = this._startIndexes.length;\n\n    if (high === 0) {\n      return -1; // no children\n    }\n\n    while (low < high) {\n      var mid = Math.floor((low + high) / 2);\n\n      if (line < this.getStartLineNumber(mid)) {\n        high = mid;\n      } else {\n        low = mid + 1;\n      }\n    }\n\n    return low - 1;\n  };\n\n  FoldingRegions.prototype.findRange = function (line) {\n    var index = this.findIndex(line);\n\n    if (index >= 0) {\n      var endLineNumber = this.getEndLineNumber(index);\n\n      if (endLineNumber >= line) {\n        return index;\n      }\n\n      index = this.getParentIndex(index);\n\n      while (index !== -1) {\n        if (this.contains(index, line)) {\n          return index;\n        }\n\n        index = this.getParentIndex(index);\n      }\n    }\n\n    return -1;\n  };\n\n  FoldingRegions.prototype.toString = function () {\n    var res = [];\n\n    for (var i = 0; i < this.length; i++) {\n      res[i] = \"[\" + (this.isCollapsed(i) ? '+' : '-') + \"] \" + this.getStartLineNumber(i) + \"/\" + this.getEndLineNumber(i);\n    }\n\n    return res.join(', ');\n  };\n\n  return FoldingRegions;\n}();\n\nexport { FoldingRegions };\n\nvar FoldingRegion =\n/** @class */\nfunction () {\n  function FoldingRegion(ranges, index) {\n    this.ranges = ranges;\n    this.index = index;\n  }\n\n  Object.defineProperty(FoldingRegion.prototype, \"startLineNumber\", {\n    get: function get() {\n      return this.ranges.getStartLineNumber(this.index);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FoldingRegion.prototype, \"endLineNumber\", {\n    get: function get() {\n      return this.ranges.getEndLineNumber(this.index);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FoldingRegion.prototype, \"regionIndex\", {\n    get: function get() {\n      return this.index;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FoldingRegion.prototype, \"parentIndex\", {\n    get: function get() {\n      return this.ranges.getParentIndex(this.index);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FoldingRegion.prototype, \"isCollapsed\", {\n    get: function get() {\n      return this.ranges.isCollapsed(this.index);\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  FoldingRegion.prototype.containedBy = function (range) {\n    return range.startLineNumber <= this.startLineNumber && range.endLineNumber >= this.endLineNumber;\n  };\n\n  FoldingRegion.prototype.containsLine = function (lineNumber) {\n    return this.startLineNumber <= lineNumber && lineNumber <= this.endLineNumber;\n  };\n\n  return FoldingRegion;\n}();\n\nexport { FoldingRegion };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../base/common/event.js';\nimport { FoldingRegions } from './foldingRanges.js';\n\nvar FoldingModel =\n/** @class */\nfunction () {\n  function FoldingModel(textModel, decorationProvider) {\n    this._updateEventEmitter = new Emitter();\n    this._textModel = textModel;\n    this._decorationProvider = decorationProvider;\n    this._regions = new FoldingRegions(new Uint32Array(0), new Uint32Array(0));\n    this._editorDecorationIds = [];\n    this._isInitialized = false;\n  }\n\n  Object.defineProperty(FoldingModel.prototype, \"regions\", {\n    get: function get() {\n      return this._regions;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FoldingModel.prototype, \"onDidChange\", {\n    get: function get() {\n      return this._updateEventEmitter.event;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FoldingModel.prototype, \"textModel\", {\n    get: function get() {\n      return this._textModel;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FoldingModel.prototype, \"isInitialized\", {\n    get: function get() {\n      return this._isInitialized;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  FoldingModel.prototype.toggleCollapseState = function (regions) {\n    var _this = this;\n\n    if (!regions.length) {\n      return;\n    }\n\n    var processed = {};\n\n    this._decorationProvider.changeDecorations(function (accessor) {\n      for (var _i = 0, regions_1 = regions; _i < regions_1.length; _i++) {\n        var region = regions_1[_i];\n        var index = region.regionIndex;\n        var editorDecorationId = _this._editorDecorationIds[index];\n\n        if (editorDecorationId && !processed[editorDecorationId]) {\n          processed[editorDecorationId] = true;\n          var newCollapseState = !_this._regions.isCollapsed(index);\n\n          _this._regions.setCollapsed(index, newCollapseState);\n\n          accessor.changeDecorationOptions(editorDecorationId, _this._decorationProvider.getDecorationOption(newCollapseState));\n        }\n      }\n    });\n\n    this._updateEventEmitter.fire({\n      model: this,\n      collapseStateChanged: regions\n    });\n  };\n\n  FoldingModel.prototype.update = function (newRegions, blockedLineNumers) {\n    var _this = this;\n\n    if (blockedLineNumers === void 0) {\n      blockedLineNumers = [];\n    }\n\n    var newEditorDecorations = [];\n\n    var isBlocked = function isBlocked(startLineNumber, endLineNumber) {\n      for (var _i = 0, blockedLineNumers_1 = blockedLineNumers; _i < blockedLineNumers_1.length; _i++) {\n        var blockedLineNumber = blockedLineNumers_1[_i];\n\n        if (startLineNumber < blockedLineNumber && blockedLineNumber <= endLineNumber) {\n          // first line is visible\n          return true;\n        }\n      }\n\n      return false;\n    };\n\n    var initRange = function initRange(index, isCollapsed) {\n      var startLineNumber = newRegions.getStartLineNumber(index);\n\n      if (isCollapsed && isBlocked(startLineNumber, newRegions.getEndLineNumber(index))) {\n        isCollapsed = false;\n      }\n\n      newRegions.setCollapsed(index, isCollapsed);\n\n      var maxColumn = _this._textModel.getLineMaxColumn(startLineNumber);\n\n      var decorationRange = {\n        startLineNumber: startLineNumber,\n        startColumn: maxColumn,\n        endLineNumber: startLineNumber,\n        endColumn: maxColumn\n      };\n      newEditorDecorations.push({\n        range: decorationRange,\n        options: _this._decorationProvider.getDecorationOption(isCollapsed)\n      });\n    };\n\n    var i = 0;\n\n    var nextCollapsed = function nextCollapsed() {\n      while (i < _this._regions.length) {\n        var isCollapsed = _this._regions.isCollapsed(i);\n\n        i++;\n\n        if (isCollapsed) {\n          return i - 1;\n        }\n      }\n\n      return -1;\n    };\n\n    var k = 0;\n    var collapsedIndex = nextCollapsed();\n\n    while (collapsedIndex !== -1 && k < newRegions.length) {\n      // get the latest range\n      var decRange = this._textModel.getDecorationRange(this._editorDecorationIds[collapsedIndex]);\n\n      if (decRange) {\n        var collapsedStartLineNumber = decRange.startLineNumber;\n\n        if (this._textModel.getLineMaxColumn(collapsedStartLineNumber) === decRange.startColumn) {\n          // test that the decoration is still at the end otherwise it got deleted\n          while (k < newRegions.length) {\n            var startLineNumber = newRegions.getStartLineNumber(k);\n\n            if (collapsedStartLineNumber >= startLineNumber) {\n              initRange(k, collapsedStartLineNumber === startLineNumber);\n              k++;\n            } else {\n              break;\n            }\n          }\n        }\n      }\n\n      collapsedIndex = nextCollapsed();\n    }\n\n    while (k < newRegions.length) {\n      initRange(k, false);\n      k++;\n    }\n\n    this._editorDecorationIds = this._decorationProvider.deltaDecorations(this._editorDecorationIds, newEditorDecorations);\n    this._regions = newRegions;\n    this._isInitialized = true;\n\n    this._updateEventEmitter.fire({\n      model: this\n    });\n  };\n  /**\n   * Collapse state memento, for persistence only\n   */\n\n\n  FoldingModel.prototype.getMemento = function () {\n    var collapsedRanges = [];\n\n    for (var i = 0; i < this._regions.length; i++) {\n      if (this._regions.isCollapsed(i)) {\n        var range = this._textModel.getDecorationRange(this._editorDecorationIds[i]);\n\n        if (range) {\n          var startLineNumber = range.startLineNumber;\n\n          var endLineNumber = range.endLineNumber + this._regions.getEndLineNumber(i) - this._regions.getStartLineNumber(i);\n\n          collapsedRanges.push({\n            startLineNumber: startLineNumber,\n            endLineNumber: endLineNumber\n          });\n        }\n      }\n    }\n\n    if (collapsedRanges.length > 0) {\n      return collapsedRanges;\n    }\n\n    return undefined;\n  };\n  /**\n   * Apply persisted state, for persistence only\n   */\n\n\n  FoldingModel.prototype.applyMemento = function (state) {\n    if (!Array.isArray(state)) {\n      return;\n    }\n\n    var toToogle = [];\n\n    for (var _i = 0, state_1 = state; _i < state_1.length; _i++) {\n      var range = state_1[_i];\n      var region = this.getRegionAtLine(range.startLineNumber);\n\n      if (region && !region.isCollapsed) {\n        toToogle.push(region);\n      }\n    }\n\n    this.toggleCollapseState(toToogle);\n  };\n\n  FoldingModel.prototype.dispose = function () {\n    this._decorationProvider.deltaDecorations(this._editorDecorationIds, []);\n  };\n\n  FoldingModel.prototype.getAllRegionsAtLine = function (lineNumber, filter) {\n    var result = [];\n\n    if (this._regions) {\n      var index = this._regions.findRange(lineNumber);\n\n      var level = 1;\n\n      while (index >= 0) {\n        var current = this._regions.toRegion(index);\n\n        if (!filter || filter(current, level)) {\n          result.push(current);\n        }\n\n        level++;\n        index = current.parentIndex;\n      }\n    }\n\n    return result;\n  };\n\n  FoldingModel.prototype.getRegionAtLine = function (lineNumber) {\n    if (this._regions) {\n      var index = this._regions.findRange(lineNumber);\n\n      if (index >= 0) {\n        return this._regions.toRegion(index);\n      }\n    }\n\n    return null;\n  };\n\n  FoldingModel.prototype.getRegionsInside = function (region, filter) {\n    var result = [];\n    var index = region ? region.regionIndex + 1 : 0;\n    var endLineNumber = region ? region.endLineNumber : Number.MAX_VALUE;\n\n    if (filter && filter.length === 2) {\n      var levelStack = [];\n\n      for (var i = index, len = this._regions.length; i < len; i++) {\n        var current = this._regions.toRegion(i);\n\n        if (this._regions.getStartLineNumber(i) < endLineNumber) {\n          while (levelStack.length > 0 && !current.containedBy(levelStack[levelStack.length - 1])) {\n            levelStack.pop();\n          }\n\n          levelStack.push(current);\n\n          if (filter(current, levelStack.length)) {\n            result.push(current);\n          }\n        } else {\n          break;\n        }\n      }\n    } else {\n      for (var i = index, len = this._regions.length; i < len; i++) {\n        var current = this._regions.toRegion(i);\n\n        if (this._regions.getStartLineNumber(i) < endLineNumber) {\n          if (!filter || filter(current)) {\n            result.push(current);\n          }\n        } else {\n          break;\n        }\n      }\n    }\n\n    return result;\n  };\n\n  return FoldingModel;\n}();\n\nexport { FoldingModel };\n/**\n * Collapse or expand the regions at the given locations including all children.\n * @param doCollapse Wheter to collase or expand\n * @param levels The number of levels. Use 1 to only impact the regions at the location, use Number.MAX_VALUE for all levels.\n * @param lineNumbers the location of the regions to collapse or expand, or if not set, all regions in the model.\n */\n\nexport function setCollapseStateLevelsDown(foldingModel, doCollapse, levels, lineNumbers) {\n  if (levels === void 0) {\n    levels = Number.MAX_VALUE;\n  }\n\n  var toToggle = [];\n\n  if (lineNumbers && lineNumbers.length > 0) {\n    for (var _i = 0, lineNumbers_1 = lineNumbers; _i < lineNumbers_1.length; _i++) {\n      var lineNumber = lineNumbers_1[_i];\n      var region = foldingModel.getRegionAtLine(lineNumber);\n\n      if (region) {\n        if (region.isCollapsed !== doCollapse) {\n          toToggle.push(region);\n        }\n\n        if (levels > 1) {\n          var regionsInside = foldingModel.getRegionsInside(region, function (r, level) {\n            return r.isCollapsed !== doCollapse && level < levels;\n          });\n          toToggle.push.apply(toToggle, regionsInside);\n        }\n      }\n    }\n  } else {\n    var regionsInside = foldingModel.getRegionsInside(null, function (r, level) {\n      return r.isCollapsed !== doCollapse && level < levels;\n    });\n    toToggle.push.apply(toToggle, regionsInside);\n  }\n\n  foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Collapse or expand the regions at the given locations including all parents.\n * @param doCollapse Wheter to collase or expand\n * @param levels The number of levels. Use 1 to only impact the regions at the location, use Number.MAX_VALUE for all levels.\n * @param lineNumbers the location of the regions to collapse or expand, or if not set, all regions in the model.\n */\n\nexport function setCollapseStateLevelsUp(foldingModel, doCollapse, levels, lineNumbers) {\n  var toToggle = [];\n\n  for (var _i = 0, lineNumbers_2 = lineNumbers; _i < lineNumbers_2.length; _i++) {\n    var lineNumber = lineNumbers_2[_i];\n    var regions = foldingModel.getAllRegionsAtLine(lineNumber, function (region, level) {\n      return region.isCollapsed !== doCollapse && level <= levels;\n    });\n    toToggle.push.apply(toToggle, regions);\n  }\n\n  foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Folds or unfolds all regions that have a given level, except if they contain one of the blocked lines.\n * @param foldLevel level. Level == 1 is the top level\n * @param doCollapse Wheter to collase or expand\n*/\n\nexport function setCollapseStateAtLevel(foldingModel, foldLevel, doCollapse, blockedLineNumbers) {\n  var filter = function filter(region, level) {\n    return level === foldLevel && region.isCollapsed !== doCollapse && !blockedLineNumbers.some(function (line) {\n      return region.containsLine(line);\n    });\n  };\n\n  var toToggle = foldingModel.getRegionsInside(null, filter);\n  foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Folds all regions for which the lines start with a given regex\n * @param foldingModel the folding model\n */\n\nexport function setCollapseStateForMatchingLines(foldingModel, regExp, doCollapse) {\n  var editorModel = foldingModel.textModel;\n  var regions = foldingModel.regions;\n  var toToggle = [];\n\n  for (var i = regions.length - 1; i >= 0; i--) {\n    if (doCollapse !== regions.isCollapsed(i)) {\n      var startLineNumber = regions.getStartLineNumber(i);\n\n      if (regExp.test(editorModel.getLineContent(startLineNumber))) {\n        toToggle.push(regions.toRegion(i));\n      }\n    }\n  }\n\n  foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Folds all regions of the given type\n * @param foldingModel the folding model\n */\n\nexport function setCollapseStateForType(foldingModel, type, doCollapse) {\n  var regions = foldingModel.regions;\n  var toToggle = [];\n\n  for (var i = regions.length - 1; i >= 0; i--) {\n    if (doCollapse !== regions.isCollapsed(i) && type === regions.getType(i)) {\n      toToggle.push(regions.toRegion(i));\n    }\n  }\n\n  foldingModel.toggleCollapseState(toToggle);\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\n\nvar FoldingDecorationProvider =\n/** @class */\nfunction () {\n  function FoldingDecorationProvider(editor) {\n    this.editor = editor;\n    this.autoHideFoldingControls = true;\n  }\n\n  FoldingDecorationProvider.prototype.getDecorationOption = function (isCollapsed) {\n    if (isCollapsed) {\n      return FoldingDecorationProvider.COLLAPSED_VISUAL_DECORATION;\n    } else if (this.autoHideFoldingControls) {\n      return FoldingDecorationProvider.EXPANDED_AUTO_HIDE_VISUAL_DECORATION;\n    } else {\n      return FoldingDecorationProvider.EXPANDED_VISUAL_DECORATION;\n    }\n  };\n\n  FoldingDecorationProvider.prototype.deltaDecorations = function (oldDecorations, newDecorations) {\n    return this.editor.deltaDecorations(oldDecorations, newDecorations);\n  };\n\n  FoldingDecorationProvider.prototype.changeDecorations = function (callback) {\n    return this.editor.changeDecorations(callback);\n  };\n\n  FoldingDecorationProvider.COLLAPSED_VISUAL_DECORATION = ModelDecorationOptions.register({\n    stickiness: 1\n    /* NeverGrowsWhenTypingAtEdges */\n    ,\n    afterContentClassName: 'inline-folded',\n    linesDecorationsClassName: 'folding collapsed'\n  });\n  FoldingDecorationProvider.EXPANDED_AUTO_HIDE_VISUAL_DECORATION = ModelDecorationOptions.register({\n    stickiness: 1\n    /* NeverGrowsWhenTypingAtEdges */\n    ,\n    linesDecorationsClassName: 'folding'\n  });\n  FoldingDecorationProvider.EXPANDED_VISUAL_DECORATION = ModelDecorationOptions.register({\n    stickiness: 1\n    /* NeverGrowsWhenTypingAtEdges */\n    ,\n    linesDecorationsClassName: 'folding alwaysShowFoldIcons'\n  });\n  return FoldingDecorationProvider;\n}();\n\nexport { FoldingDecorationProvider };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../base/common/event.js';\nimport { Range } from '../../common/core/range.js';\nimport { findFirstInSorted } from '../../../base/common/arrays.js';\n\nvar HiddenRangeModel =\n/** @class */\nfunction () {\n  function HiddenRangeModel(model) {\n    var _this = this;\n\n    this._updateEventEmitter = new Emitter();\n    this._foldingModel = model;\n    this._foldingModelListener = model.onDidChange(function (_) {\n      return _this.updateHiddenRanges();\n    });\n    this._hiddenRanges = [];\n\n    if (model.regions.length) {\n      this.updateHiddenRanges();\n    }\n  }\n\n  Object.defineProperty(HiddenRangeModel.prototype, \"onDidChange\", {\n    get: function get() {\n      return this._updateEventEmitter.event;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(HiddenRangeModel.prototype, \"hiddenRanges\", {\n    get: function get() {\n      return this._hiddenRanges;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  HiddenRangeModel.prototype.updateHiddenRanges = function () {\n    var updateHiddenAreas = false;\n    var newHiddenAreas = [];\n    var i = 0; // index into hidden\n\n    var k = 0;\n    var lastCollapsedStart = Number.MAX_VALUE;\n    var lastCollapsedEnd = -1;\n    var ranges = this._foldingModel.regions;\n\n    for (; i < ranges.length; i++) {\n      if (!ranges.isCollapsed(i)) {\n        continue;\n      }\n\n      var startLineNumber = ranges.getStartLineNumber(i) + 1; // the first line is not hidden\n\n      var endLineNumber = ranges.getEndLineNumber(i);\n\n      if (lastCollapsedStart <= startLineNumber && endLineNumber <= lastCollapsedEnd) {\n        // ignore ranges contained in collapsed regions\n        continue;\n      }\n\n      if (!updateHiddenAreas && k < this._hiddenRanges.length && this._hiddenRanges[k].startLineNumber === startLineNumber && this._hiddenRanges[k].endLineNumber === endLineNumber) {\n        // reuse the old ranges\n        newHiddenAreas.push(this._hiddenRanges[k]);\n        k++;\n      } else {\n        updateHiddenAreas = true;\n        newHiddenAreas.push(new Range(startLineNumber, 1, endLineNumber, 1));\n      }\n\n      lastCollapsedStart = startLineNumber;\n      lastCollapsedEnd = endLineNumber;\n    }\n\n    if (updateHiddenAreas || k < this._hiddenRanges.length) {\n      this.applyHiddenRanges(newHiddenAreas);\n    }\n  };\n\n  HiddenRangeModel.prototype.applyMemento = function (state) {\n    if (!Array.isArray(state) || state.length === 0) {\n      return false;\n    }\n\n    var hiddenRanges = [];\n\n    for (var _i = 0, state_1 = state; _i < state_1.length; _i++) {\n      var r = state_1[_i];\n\n      if (!r.startLineNumber || !r.endLineNumber) {\n        return false;\n      }\n\n      hiddenRanges.push(new Range(r.startLineNumber + 1, 1, r.endLineNumber, 1));\n    }\n\n    this.applyHiddenRanges(hiddenRanges);\n    return true;\n  };\n  /**\n   * Collapse state memento, for persistence only, only used if folding model is not yet initialized\n   */\n\n\n  HiddenRangeModel.prototype.getMemento = function () {\n    return this._hiddenRanges.map(function (r) {\n      return {\n        startLineNumber: r.startLineNumber - 1,\n        endLineNumber: r.endLineNumber\n      };\n    });\n  };\n\n  HiddenRangeModel.prototype.applyHiddenRanges = function (newHiddenAreas) {\n    this._hiddenRanges = newHiddenAreas;\n\n    this._updateEventEmitter.fire(newHiddenAreas);\n  };\n\n  HiddenRangeModel.prototype.hasRanges = function () {\n    return this._hiddenRanges.length > 0;\n  };\n\n  HiddenRangeModel.prototype.isHidden = function (line) {\n    return findRange(this._hiddenRanges, line) !== null;\n  };\n\n  HiddenRangeModel.prototype.adjustSelections = function (selections) {\n    var _this = this;\n\n    var hasChanges = false;\n    var editorModel = this._foldingModel.textModel;\n    var lastRange = null;\n\n    var adjustLine = function adjustLine(line) {\n      if (!lastRange || !isInside(line, lastRange)) {\n        lastRange = findRange(_this._hiddenRanges, line);\n      }\n\n      if (lastRange) {\n        return lastRange.startLineNumber - 1;\n      }\n\n      return null;\n    };\n\n    for (var i = 0, len = selections.length; i < len; i++) {\n      var selection = selections[i];\n      var adjustedStartLine = adjustLine(selection.startLineNumber);\n\n      if (adjustedStartLine) {\n        selection = selection.setStartPosition(adjustedStartLine, editorModel.getLineMaxColumn(adjustedStartLine));\n        hasChanges = true;\n      }\n\n      var adjustedEndLine = adjustLine(selection.endLineNumber);\n\n      if (adjustedEndLine) {\n        selection = selection.setEndPosition(adjustedEndLine, editorModel.getLineMaxColumn(adjustedEndLine));\n        hasChanges = true;\n      }\n\n      selections[i] = selection;\n    }\n\n    return hasChanges;\n  };\n\n  HiddenRangeModel.prototype.dispose = function () {\n    if (this.hiddenRanges.length > 0) {\n      this._hiddenRanges = [];\n\n      this._updateEventEmitter.fire(this._hiddenRanges);\n    }\n\n    if (this._foldingModelListener) {\n      this._foldingModelListener.dispose();\n\n      this._foldingModelListener = null;\n    }\n  };\n\n  return HiddenRangeModel;\n}();\n\nexport { HiddenRangeModel };\n\nfunction isInside(line, range) {\n  return line >= range.startLineNumber && line <= range.endLineNumber;\n}\n\nfunction findRange(ranges, line) {\n  var i = findFirstInSorted(ranges, function (r) {\n    return line < r.startLineNumber;\n  }) - 1;\n\n  if (i >= 0 && ranges[i].endLineNumber >= line) {\n    return ranges[i];\n  }\n\n  return null;\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { FoldingRegions, MAX_LINE_NUMBER } from './foldingRanges.js';\nimport { TextModel } from '../../common/model/textModel.js';\nimport { LanguageConfigurationRegistry } from '../../common/modes/languageConfigurationRegistry.js';\nvar MAX_FOLDING_REGIONS_FOR_INDENT_LIMIT = 5000;\nexport var ID_INDENT_PROVIDER = 'indent';\n\nvar IndentRangeProvider =\n/** @class */\nfunction () {\n  function IndentRangeProvider(editorModel) {\n    this.editorModel = editorModel;\n    this.id = ID_INDENT_PROVIDER;\n  }\n\n  IndentRangeProvider.prototype.dispose = function () {};\n\n  IndentRangeProvider.prototype.compute = function (cancelationToken) {\n    var foldingRules = LanguageConfigurationRegistry.getFoldingRules(this.editorModel.getLanguageIdentifier().id);\n    var offSide = foldingRules && !!foldingRules.offSide;\n    var markers = foldingRules && foldingRules.markers;\n    return Promise.resolve(computeRanges(this.editorModel, offSide, markers));\n  };\n\n  return IndentRangeProvider;\n}();\n\nexport { IndentRangeProvider }; // public only for testing\n\nvar RangesCollector =\n/** @class */\nfunction () {\n  function RangesCollector(foldingRangesLimit) {\n    this._startIndexes = [];\n    this._endIndexes = [];\n    this._indentOccurrences = [];\n    this._length = 0;\n    this._foldingRangesLimit = foldingRangesLimit;\n  }\n\n  RangesCollector.prototype.insertFirst = function (startLineNumber, endLineNumber, indent) {\n    if (startLineNumber > MAX_LINE_NUMBER || endLineNumber > MAX_LINE_NUMBER) {\n      return;\n    }\n\n    var index = this._length;\n    this._startIndexes[index] = startLineNumber;\n    this._endIndexes[index] = endLineNumber;\n    this._length++;\n\n    if (indent < 1000) {\n      this._indentOccurrences[indent] = (this._indentOccurrences[indent] || 0) + 1;\n    }\n  };\n\n  RangesCollector.prototype.toIndentRanges = function (model) {\n    if (this._length <= this._foldingRangesLimit) {\n      // reverse and create arrays of the exact length\n      var startIndexes = new Uint32Array(this._length);\n      var endIndexes = new Uint32Array(this._length);\n\n      for (var i = this._length - 1, k = 0; i >= 0; i--, k++) {\n        startIndexes[k] = this._startIndexes[i];\n        endIndexes[k] = this._endIndexes[i];\n      }\n\n      return new FoldingRegions(startIndexes, endIndexes);\n    } else {\n      var entries = 0;\n      var maxIndent = this._indentOccurrences.length;\n\n      for (var i = 0; i < this._indentOccurrences.length; i++) {\n        var n = this._indentOccurrences[i];\n\n        if (n) {\n          if (n + entries > this._foldingRangesLimit) {\n            maxIndent = i;\n            break;\n          }\n\n          entries += n;\n        }\n      }\n\n      var tabSize = model.getOptions().tabSize; // reverse and create arrays of the exact length\n\n      var startIndexes = new Uint32Array(this._foldingRangesLimit);\n      var endIndexes = new Uint32Array(this._foldingRangesLimit);\n\n      for (var i = this._length - 1, k = 0; i >= 0; i--) {\n        var startIndex = this._startIndexes[i];\n        var lineContent = model.getLineContent(startIndex);\n        var indent = TextModel.computeIndentLevel(lineContent, tabSize);\n\n        if (indent < maxIndent || indent === maxIndent && entries++ < this._foldingRangesLimit) {\n          startIndexes[k] = startIndex;\n          endIndexes[k] = this._endIndexes[i];\n          k++;\n        }\n      }\n\n      return new FoldingRegions(startIndexes, endIndexes);\n    }\n  };\n\n  return RangesCollector;\n}();\n\nexport { RangesCollector };\nexport function computeRanges(model, offSide, markers, foldingRangesLimit) {\n  if (foldingRangesLimit === void 0) {\n    foldingRangesLimit = MAX_FOLDING_REGIONS_FOR_INDENT_LIMIT;\n  }\n\n  var tabSize = model.getOptions().tabSize;\n  var result = new RangesCollector(foldingRangesLimit);\n  var pattern = undefined;\n\n  if (markers) {\n    pattern = new RegExp(\"(\" + markers.start.source + \")|(?:\" + markers.end.source + \")\");\n  }\n\n  var previousRegions = [];\n  previousRegions.push({\n    indent: -1,\n    line: model.getLineCount() + 1,\n    marker: false\n  }); // sentinel, to make sure there's at least one entry\n\n  for (var line = model.getLineCount(); line > 0; line--) {\n    var lineContent = model.getLineContent(line);\n    var indent = TextModel.computeIndentLevel(lineContent, tabSize);\n    var previous = previousRegions[previousRegions.length - 1];\n\n    if (indent === -1) {\n      if (offSide && !previous.marker) {\n        // for offSide languages, empty lines are associated to the next block\n        previous.line = line;\n      }\n\n      continue; // only whitespace\n    }\n\n    var m = void 0;\n\n    if (pattern && (m = lineContent.match(pattern))) {\n      // folding pattern match\n      if (m[1]) {\n        // start pattern match\n        // discard all regions until the folding pattern\n        var i = previousRegions.length - 1;\n\n        while (i > 0 && !previousRegions[i].marker) {\n          i--;\n        }\n\n        if (i > 0) {\n          previousRegions.length = i + 1;\n          previous = previousRegions[i]; // new folding range from pattern, includes the end line\n\n          result.insertFirst(line, previous.line, indent);\n          previous.marker = false;\n          previous.indent = indent;\n          previous.line = line;\n          continue;\n        } else {// no end marker found, treat line as a regular line\n        }\n      } else {\n        // end pattern match\n        previousRegions.push({\n          indent: -2,\n          line: line,\n          marker: true\n        });\n        continue;\n      }\n    }\n\n    if (previous.indent > indent) {\n      // discard all regions with larger indent\n      do {\n        previousRegions.pop();\n        previous = previousRegions[previousRegions.length - 1];\n      } while (previous.indent > indent); // new folding range\n\n\n      var endLineNumber = previous.line - 1;\n\n      if (endLineNumber - line >= 1) {\n        // needs at east size 1\n        result.insertFirst(line, endLineNumber, indent);\n      }\n    }\n\n    if (previous.indent === indent) {\n      previous.line = line;\n    } else {\n      // previous.indent < indent\n      // new region with a bigger indent\n      previousRegions.push({\n        indent: indent,\n        line: line,\n        marker: false\n      });\n    }\n  }\n\n  return result.toIndentRanges(model);\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { onUnexpectedExternalError } from '../../../base/common/errors.js';\nimport { MAX_LINE_NUMBER, FoldingRegions } from './foldingRanges.js';\nvar MAX_FOLDING_REGIONS = 5000;\nvar foldingContext = {};\nexport var ID_SYNTAX_PROVIDER = 'syntax';\n\nvar SyntaxRangeProvider =\n/** @class */\nfunction () {\n  function SyntaxRangeProvider(editorModel, providers, limit) {\n    if (limit === void 0) {\n      limit = MAX_FOLDING_REGIONS;\n    }\n\n    this.editorModel = editorModel;\n    this.providers = providers;\n    this.limit = limit;\n    this.id = ID_SYNTAX_PROVIDER;\n  }\n\n  SyntaxRangeProvider.prototype.compute = function (cancellationToken) {\n    var _this = this;\n\n    return collectSyntaxRanges(this.providers, this.editorModel, cancellationToken).then(function (ranges) {\n      if (ranges) {\n        var res = sanitizeRanges(ranges, _this.limit);\n        return res;\n      }\n\n      return null;\n    });\n  };\n\n  SyntaxRangeProvider.prototype.dispose = function () {};\n\n  return SyntaxRangeProvider;\n}();\n\nexport { SyntaxRangeProvider };\n\nfunction collectSyntaxRanges(providers, model, cancellationToken) {\n  var rangeData = null;\n  var promises = providers.map(function (provider, i) {\n    return Promise.resolve(provider.provideFoldingRanges(model, foldingContext, cancellationToken)).then(function (ranges) {\n      if (cancellationToken.isCancellationRequested) {\n        return;\n      }\n\n      if (Array.isArray(ranges)) {\n        if (!Array.isArray(rangeData)) {\n          rangeData = [];\n        }\n\n        var nLines = model.getLineCount();\n\n        for (var _i = 0, ranges_1 = ranges; _i < ranges_1.length; _i++) {\n          var r = ranges_1[_i];\n\n          if (r.start > 0 && r.end > r.start && r.end <= nLines) {\n            rangeData.push({\n              start: r.start,\n              end: r.end,\n              rank: i,\n              kind: r.kind\n            });\n          }\n        }\n      }\n    }, onUnexpectedExternalError);\n  });\n  return Promise.all(promises).then(function (_) {\n    return rangeData;\n  });\n}\n\nvar RangesCollector =\n/** @class */\nfunction () {\n  function RangesCollector(foldingRangesLimit) {\n    this._startIndexes = [];\n    this._endIndexes = [];\n    this._nestingLevels = [];\n    this._nestingLevelCounts = [];\n    this._types = [];\n    this._length = 0;\n    this._foldingRangesLimit = foldingRangesLimit;\n  }\n\n  RangesCollector.prototype.add = function (startLineNumber, endLineNumber, type, nestingLevel) {\n    if (startLineNumber > MAX_LINE_NUMBER || endLineNumber > MAX_LINE_NUMBER) {\n      return;\n    }\n\n    var index = this._length;\n    this._startIndexes[index] = startLineNumber;\n    this._endIndexes[index] = endLineNumber;\n    this._nestingLevels[index] = nestingLevel;\n    this._types[index] = type;\n    this._length++;\n\n    if (nestingLevel < 30) {\n      this._nestingLevelCounts[nestingLevel] = (this._nestingLevelCounts[nestingLevel] || 0) + 1;\n    }\n  };\n\n  RangesCollector.prototype.toIndentRanges = function () {\n    if (this._length <= this._foldingRangesLimit) {\n      var startIndexes = new Uint32Array(this._length);\n      var endIndexes = new Uint32Array(this._length);\n\n      for (var i = 0; i < this._length; i++) {\n        startIndexes[i] = this._startIndexes[i];\n        endIndexes[i] = this._endIndexes[i];\n      }\n\n      return new FoldingRegions(startIndexes, endIndexes, this._types);\n    } else {\n      var entries = 0;\n      var maxLevel = this._nestingLevelCounts.length;\n\n      for (var i = 0; i < this._nestingLevelCounts.length; i++) {\n        var n = this._nestingLevelCounts[i];\n\n        if (n) {\n          if (n + entries > this._foldingRangesLimit) {\n            maxLevel = i;\n            break;\n          }\n\n          entries += n;\n        }\n      }\n\n      var startIndexes = new Uint32Array(this._foldingRangesLimit);\n      var endIndexes = new Uint32Array(this._foldingRangesLimit);\n      var types = [];\n\n      for (var i = 0, k = 0; i < this._length; i++) {\n        var level = this._nestingLevels[i];\n\n        if (level < maxLevel || level === maxLevel && entries++ < this._foldingRangesLimit) {\n          startIndexes[k] = this._startIndexes[i];\n          endIndexes[k] = this._endIndexes[i];\n          types[k] = this._types[i];\n          k++;\n        }\n      }\n\n      return new FoldingRegions(startIndexes, endIndexes, types);\n    }\n  };\n\n  return RangesCollector;\n}();\n\nexport { RangesCollector };\nexport function sanitizeRanges(rangeData, limit) {\n  var sorted = rangeData.sort(function (d1, d2) {\n    var diff = d1.start - d2.start;\n\n    if (diff === 0) {\n      diff = d1.rank - d2.rank;\n    }\n\n    return diff;\n  });\n  var collector = new RangesCollector(limit);\n  var top = undefined;\n  var previous = [];\n\n  for (var _i = 0, sorted_1 = sorted; _i < sorted_1.length; _i++) {\n    var entry = sorted_1[_i];\n\n    if (!top) {\n      top = entry;\n      collector.add(entry.start, entry.end, entry.kind && entry.kind.value, previous.length);\n    } else {\n      if (entry.start > top.start) {\n        if (entry.end <= top.end) {\n          previous.push(top);\n          top = entry;\n          collector.add(entry.start, entry.end, entry.kind && entry.kind.value, previous.length);\n        } else {\n          if (entry.start > top.end) {\n            do {\n              top = previous.pop();\n            } while (top && entry.start > top.end);\n\n            if (top) {\n              previous.push(top);\n            }\n\n            top = entry;\n          }\n\n          collector.add(entry.start, entry.end, entry.kind && entry.kind.value, previous.length);\n        }\n      }\n    }\n  }\n\n  return collector.toIndentRanges();\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { sanitizeRanges } from './syntaxRangeProvider.js';\nexport var ID_INIT_PROVIDER = 'init';\n\nvar InitializingRangeProvider =\n/** @class */\nfunction () {\n  function InitializingRangeProvider(editorModel, initialRanges, onTimeout, timeoutTime) {\n    this.editorModel = editorModel;\n    this.id = ID_INIT_PROVIDER;\n\n    if (initialRanges.length) {\n      var toDecorationRange = function toDecorationRange(range) {\n        return {\n          range: {\n            startLineNumber: range.startLineNumber,\n            startColumn: 0,\n            endLineNumber: range.endLineNumber,\n            endColumn: editorModel.getLineLength(range.endLineNumber)\n          },\n          options: {\n            stickiness: 1\n            /* NeverGrowsWhenTypingAtEdges */\n\n          }\n        };\n      };\n\n      this.decorationIds = editorModel.deltaDecorations([], initialRanges.map(toDecorationRange));\n      this.timeout = setTimeout(onTimeout, timeoutTime);\n    }\n  }\n\n  InitializingRangeProvider.prototype.dispose = function () {\n    if (this.decorationIds) {\n      this.editorModel.deltaDecorations(this.decorationIds, []);\n      this.decorationIds = undefined;\n    }\n\n    if (typeof this.timeout === 'number') {\n      clearTimeout(this.timeout);\n      this.timeout = undefined;\n    }\n  };\n\n  InitializingRangeProvider.prototype.compute = function (cancelationToken) {\n    var foldingRangeData = [];\n\n    if (this.decorationIds) {\n      for (var _i = 0, _a = this.decorationIds; _i < _a.length; _i++) {\n        var id = _a[_i];\n        var range = this.editorModel.getDecorationRange(id);\n\n        if (range) {\n          foldingRangeData.push({\n            start: range.startLineNumber,\n            end: range.endLineNumber,\n            rank: 1\n          });\n        }\n      }\n    }\n\n    return Promise.resolve(sanitizeRanges(foldingRangeData, Number.MAX_VALUE));\n  };\n\n  return InitializingRangeProvider;\n}();\n\nexport { InitializingRangeProvider };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport './folding.css';\nimport * as nls from '../../../nls.js';\nimport * as types from '../../../base/common/types.js';\nimport { escapeRegExpCharacters } from '../../../base/common/strings.js';\nimport { RunOnceScheduler, Delayer, createCancelablePromise } from '../../../base/common/async.js';\nimport { KeyChord } from '../../../base/common/keyCodes.js';\nimport { dispose as _dispose } from '../../../base/common/lifecycle.js';\nimport { registerEditorAction, registerEditorContribution, EditorAction, registerInstantiatedEditorAction } from '../../browser/editorExtensions.js';\nimport { FoldingModel, setCollapseStateAtLevel, setCollapseStateLevelsDown, setCollapseStateLevelsUp, setCollapseStateForMatchingLines, setCollapseStateForType } from './foldingModel.js';\nimport { FoldingDecorationProvider } from './foldingDecorations.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport { HiddenRangeModel } from './hiddenRangeModel.js';\nimport { LanguageConfigurationRegistry } from '../../common/modes/languageConfigurationRegistry.js';\nimport { IndentRangeProvider } from './indentRangeProvider.js';\nimport { FoldingRangeProviderRegistry, FoldingRangeKind } from '../../common/modes.js';\nimport { SyntaxRangeProvider, ID_SYNTAX_PROVIDER } from './syntaxRangeProvider.js';\nimport { InitializingRangeProvider, ID_INIT_PROVIDER } from './intializingRangeProvider.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nexport var ID = 'editor.contrib.folding';\n\nvar FoldingController =\n/** @class */\nfunction () {\n  function FoldingController(editor) {\n    var _this = this;\n\n    this.editor = editor;\n    this._isEnabled = this.editor.getConfiguration().contribInfo.folding;\n    this._autoHideFoldingControls = this.editor.getConfiguration().contribInfo.showFoldingControls === 'mouseover';\n    this._useFoldingProviders = this.editor.getConfiguration().contribInfo.foldingStrategy !== 'indentation';\n    this.globalToDispose = [];\n    this.localToDispose = [];\n    this.foldingDecorationProvider = new FoldingDecorationProvider(editor);\n    this.foldingDecorationProvider.autoHideFoldingControls = this._autoHideFoldingControls;\n    this.globalToDispose.push(this.editor.onDidChangeModel(function () {\n      return _this.onModelChanged();\n    }));\n    this.globalToDispose.push(this.editor.onDidChangeConfiguration(function (e) {\n      if (e.contribInfo) {\n        var oldIsEnabled = _this._isEnabled;\n        _this._isEnabled = _this.editor.getConfiguration().contribInfo.folding;\n\n        if (oldIsEnabled !== _this._isEnabled) {\n          _this.onModelChanged();\n        }\n\n        var oldShowFoldingControls = _this._autoHideFoldingControls;\n        _this._autoHideFoldingControls = _this.editor.getConfiguration().contribInfo.showFoldingControls === 'mouseover';\n\n        if (oldShowFoldingControls !== _this._autoHideFoldingControls) {\n          _this.foldingDecorationProvider.autoHideFoldingControls = _this._autoHideFoldingControls;\n\n          _this.onModelContentChanged();\n        }\n\n        var oldUseFoldingProviders = _this._useFoldingProviders;\n        _this._useFoldingProviders = _this.editor.getConfiguration().contribInfo.foldingStrategy !== 'indentation';\n\n        if (oldUseFoldingProviders !== _this._useFoldingProviders) {\n          _this.onFoldingStrategyChanged();\n        }\n      }\n    }));\n    this.globalToDispose.push({\n      dispose: function dispose() {\n        return _dispose(_this.localToDispose);\n      }\n    });\n    this.onModelChanged();\n  }\n\n  FoldingController.get = function (editor) {\n    return editor.getContribution(ID);\n  };\n\n  FoldingController.prototype.getId = function () {\n    return ID;\n  };\n\n  FoldingController.prototype.dispose = function () {\n    this.globalToDispose = _dispose(this.globalToDispose);\n  };\n  /**\n   * Store view state.\n   */\n\n\n  FoldingController.prototype.saveViewState = function () {\n    var model = this.editor.getModel();\n\n    if (!model || !this._isEnabled || model.isTooLargeForTokenization()) {\n      return {};\n    }\n\n    if (this.foldingModel) {\n      // disposed ?\n      var collapsedRegions = this.foldingModel.isInitialized ? this.foldingModel.getMemento() : this.hiddenRangeModel.getMemento();\n      var provider = this.rangeProvider ? this.rangeProvider.id : undefined;\n      return {\n        collapsedRegions: collapsedRegions,\n        lineCount: model.getLineCount(),\n        provider: provider\n      };\n    }\n\n    return undefined;\n  };\n  /**\n   * Restore view state.\n   */\n\n\n  FoldingController.prototype.restoreViewState = function (state) {\n    var model = this.editor.getModel();\n\n    if (!model || !this._isEnabled || model.isTooLargeForTokenization() || !this.hiddenRangeModel) {\n      return;\n    }\n\n    if (!state || !state.collapsedRegions || state.lineCount !== model.getLineCount()) {\n      return;\n    }\n\n    if (state.provider === ID_SYNTAX_PROVIDER || state.provider === ID_INIT_PROVIDER) {\n      this.foldingStateMemento = state;\n    }\n\n    var collapsedRegions = state.collapsedRegions; // set the hidden ranges right away, before waiting for the folding model.\n\n    if (this.hiddenRangeModel.applyMemento(collapsedRegions)) {\n      var foldingModel = this.getFoldingModel();\n\n      if (foldingModel) {\n        foldingModel.then(function (foldingModel) {\n          if (foldingModel) {\n            foldingModel.applyMemento(collapsedRegions);\n          }\n        }).then(undefined, onUnexpectedError);\n      }\n    }\n  };\n\n  FoldingController.prototype.onModelChanged = function () {\n    var _this = this;\n\n    this.localToDispose = _dispose(this.localToDispose);\n    var model = this.editor.getModel();\n\n    if (!this._isEnabled || !model || model.isTooLargeForTokenization()) {\n      // huge files get no view model, so they cannot support hidden areas\n      return;\n    }\n\n    this.foldingModel = new FoldingModel(model, this.foldingDecorationProvider);\n    this.localToDispose.push(this.foldingModel);\n    this.hiddenRangeModel = new HiddenRangeModel(this.foldingModel);\n    this.localToDispose.push(this.hiddenRangeModel);\n    this.localToDispose.push(this.hiddenRangeModel.onDidChange(function (hr) {\n      return _this.onHiddenRangesChanges(hr);\n    }));\n    this.updateScheduler = new Delayer(200);\n    this.cursorChangedScheduler = new RunOnceScheduler(function () {\n      return _this.revealCursor();\n    }, 200);\n    this.localToDispose.push(this.cursorChangedScheduler);\n    this.localToDispose.push(FoldingRangeProviderRegistry.onDidChange(function () {\n      return _this.onFoldingStrategyChanged();\n    }));\n    this.localToDispose.push(this.editor.onDidChangeModelLanguageConfiguration(function () {\n      return _this.onFoldingStrategyChanged();\n    })); // covers model language changes as well\n\n    this.localToDispose.push(this.editor.onDidChangeModelContent(function () {\n      return _this.onModelContentChanged();\n    }));\n    this.localToDispose.push(this.editor.onDidChangeCursorPosition(function () {\n      return _this.onCursorPositionChanged();\n    }));\n    this.localToDispose.push(this.editor.onMouseDown(function (e) {\n      return _this.onEditorMouseDown(e);\n    }));\n    this.localToDispose.push(this.editor.onMouseUp(function (e) {\n      return _this.onEditorMouseUp(e);\n    }));\n    this.localToDispose.push({\n      dispose: function dispose() {\n        if (_this.foldingRegionPromise) {\n          _this.foldingRegionPromise.cancel();\n\n          _this.foldingRegionPromise = null;\n        }\n\n        if (_this.updateScheduler) {\n          _this.updateScheduler.cancel();\n        }\n\n        _this.updateScheduler = null;\n        _this.foldingModel = null;\n        _this.foldingModelPromise = null;\n        _this.hiddenRangeModel = null;\n        _this.cursorChangedScheduler = null;\n        _this.foldingStateMemento = null;\n\n        if (_this.rangeProvider) {\n          _this.rangeProvider.dispose();\n        }\n\n        _this.rangeProvider = null;\n      }\n    });\n    this.onModelContentChanged();\n  };\n\n  FoldingController.prototype.onFoldingStrategyChanged = function () {\n    if (this.rangeProvider) {\n      this.rangeProvider.dispose();\n    }\n\n    this.rangeProvider = null;\n    this.onModelContentChanged();\n  };\n\n  FoldingController.prototype.getRangeProvider = function (editorModel) {\n    var _this = this;\n\n    if (this.rangeProvider) {\n      return this.rangeProvider;\n    }\n\n    this.rangeProvider = new IndentRangeProvider(editorModel); // fallback\n\n    if (this._useFoldingProviders && this.foldingModel) {\n      var foldingProviders = FoldingRangeProviderRegistry.ordered(this.foldingModel.textModel);\n\n      if (foldingProviders.length === 0 && this.foldingStateMemento && this.foldingStateMemento.collapsedRegions) {\n        var rangeProvider = this.rangeProvider = new InitializingRangeProvider(editorModel, this.foldingStateMemento.collapsedRegions, function () {\n          // if after 30 the InitializingRangeProvider is still not replaced, force a refresh\n          _this.foldingStateMemento = null;\n\n          _this.onFoldingStrategyChanged();\n        }, 30000);\n        return rangeProvider; // keep memento in case there are still no foldingProviders on the next request.\n      } else if (foldingProviders.length > 0) {\n        this.rangeProvider = new SyntaxRangeProvider(editorModel, foldingProviders);\n      }\n    }\n\n    this.foldingStateMemento = null;\n    return this.rangeProvider;\n  };\n\n  FoldingController.prototype.getFoldingModel = function () {\n    return this.foldingModelPromise;\n  };\n\n  FoldingController.prototype.onModelContentChanged = function () {\n    var _this = this;\n\n    if (this.updateScheduler) {\n      if (this.foldingRegionPromise) {\n        this.foldingRegionPromise.cancel();\n        this.foldingRegionPromise = null;\n      }\n\n      this.foldingModelPromise = this.updateScheduler.trigger(function () {\n        var foldingModel = _this.foldingModel;\n\n        if (!foldingModel) {\n          // null if editor has been disposed, or folding turned off\n          return null;\n        }\n\n        var foldingRegionPromise = _this.foldingRegionPromise = createCancelablePromise(function (token) {\n          return _this.getRangeProvider(foldingModel.textModel).compute(token);\n        });\n        return foldingRegionPromise.then(function (foldingRanges) {\n          if (foldingRanges && foldingRegionPromise === _this.foldingRegionPromise) {\n            // new request or cancelled in the meantime?\n            // some cursors might have moved into hidden regions, make sure they are in expanded regions\n            var selections = _this.editor.getSelections();\n\n            var selectionLineNumbers = selections ? selections.map(function (s) {\n              return s.startLineNumber;\n            }) : [];\n            foldingModel.update(foldingRanges, selectionLineNumbers);\n          }\n\n          return foldingModel;\n        });\n      }).then(undefined, function (err) {\n        onUnexpectedError(err);\n        return null;\n      });\n    }\n  };\n\n  FoldingController.prototype.onHiddenRangesChanges = function (hiddenRanges) {\n    if (this.hiddenRangeModel && hiddenRanges.length) {\n      var selections = this.editor.getSelections();\n\n      if (selections) {\n        if (this.hiddenRangeModel.adjustSelections(selections)) {\n          this.editor.setSelections(selections);\n        }\n      }\n    }\n\n    this.editor.setHiddenAreas(hiddenRanges);\n  };\n\n  FoldingController.prototype.onCursorPositionChanged = function () {\n    if (this.hiddenRangeModel && this.hiddenRangeModel.hasRanges()) {\n      this.cursorChangedScheduler.schedule();\n    }\n  };\n\n  FoldingController.prototype.revealCursor = function () {\n    var _this = this;\n\n    var foldingModel = this.getFoldingModel();\n\n    if (!foldingModel) {\n      return;\n    }\n\n    foldingModel.then(function (foldingModel) {\n      if (foldingModel) {\n        var selections = _this.editor.getSelections();\n\n        if (selections && selections.length > 0) {\n          var toToggle = [];\n\n          var _loop_1 = function _loop_1(selection) {\n            var lineNumber = selection.selectionStartLineNumber;\n\n            if (_this.hiddenRangeModel && _this.hiddenRangeModel.isHidden(lineNumber)) {\n              toToggle.push.apply(toToggle, foldingModel.getAllRegionsAtLine(lineNumber, function (r) {\n                return r.isCollapsed && lineNumber > r.startLineNumber;\n              }));\n            }\n          };\n\n          for (var _i = 0, selections_1 = selections; _i < selections_1.length; _i++) {\n            var selection = selections_1[_i];\n\n            _loop_1(selection);\n          }\n\n          if (toToggle.length) {\n            foldingModel.toggleCollapseState(toToggle);\n\n            _this.reveal(selections[0].getPosition());\n          }\n        }\n      }\n    }).then(undefined, onUnexpectedError);\n  };\n\n  FoldingController.prototype.onEditorMouseDown = function (e) {\n    this.mouseDownInfo = null;\n\n    if (!this.hiddenRangeModel || !e.target || !e.target.range) {\n      return;\n    }\n\n    if (!e.event.leftButton && !e.event.middleButton) {\n      return;\n    }\n\n    var range = e.target.range;\n    var iconClicked = false;\n\n    switch (e.target.type) {\n      case 4\n      /* GUTTER_LINE_DECORATIONS */\n      :\n        var data = e.target.detail;\n        var offsetLeftInGutter = e.target.element.offsetLeft;\n        var gutterOffsetX = data.offsetX - offsetLeftInGutter; // const gutterOffsetX = data.offsetX - data.glyphMarginWidth - data.lineNumbersWidth - data.glyphMarginLeft;\n        // TODO@joao TODO@alex TODO@martin this is such that we don't collide with dirty diff\n\n        if (gutterOffsetX < 5) {\n          // the whitespace between the border and the real folding icon border is 5px\n          return;\n        }\n\n        iconClicked = true;\n        break;\n\n      case 7\n      /* CONTENT_EMPTY */\n      :\n        {\n          if (this.hiddenRangeModel.hasRanges()) {\n            var data_1 = e.target.detail;\n\n            if (!data_1.isAfterLines) {\n              break;\n            }\n          }\n\n          return;\n        }\n\n      case 6\n      /* CONTENT_TEXT */\n      :\n        {\n          if (this.hiddenRangeModel.hasRanges()) {\n            var model = this.editor.getModel();\n\n            if (model && range.startColumn === model.getLineMaxColumn(range.startLineNumber)) {\n              break;\n            }\n          }\n\n          return;\n        }\n\n      default:\n        return;\n    }\n\n    this.mouseDownInfo = {\n      lineNumber: range.startLineNumber,\n      iconClicked: iconClicked\n    };\n  };\n\n  FoldingController.prototype.onEditorMouseUp = function (e) {\n    var _this = this;\n\n    var foldingModel = this.getFoldingModel();\n\n    if (!foldingModel || !this.mouseDownInfo || !e.target) {\n      return;\n    }\n\n    var lineNumber = this.mouseDownInfo.lineNumber;\n    var iconClicked = this.mouseDownInfo.iconClicked;\n    var range = e.target.range;\n\n    if (!range || range.startLineNumber !== lineNumber) {\n      return;\n    }\n\n    if (iconClicked) {\n      if (e.target.type !== 4\n      /* GUTTER_LINE_DECORATIONS */\n      ) {\n          return;\n        }\n    } else {\n      var model = this.editor.getModel();\n\n      if (!model || range.startColumn !== model.getLineMaxColumn(lineNumber)) {\n        return;\n      }\n    }\n\n    foldingModel.then(function (foldingModel) {\n      if (foldingModel) {\n        var region = foldingModel.getRegionAtLine(lineNumber);\n\n        if (region && region.startLineNumber === lineNumber) {\n          var isCollapsed_1 = region.isCollapsed;\n\n          if (iconClicked || isCollapsed_1) {\n            var toToggle = [region];\n\n            if (e.event.middleButton || e.event.shiftKey) {\n              toToggle.push.apply(toToggle, foldingModel.getRegionsInside(region, function (r) {\n                return r.isCollapsed === isCollapsed_1;\n              }));\n            }\n\n            foldingModel.toggleCollapseState(toToggle);\n\n            _this.reveal({\n              lineNumber: lineNumber,\n              column: 1\n            });\n          }\n        }\n      }\n    }).then(undefined, onUnexpectedError);\n  };\n\n  FoldingController.prototype.reveal = function (position) {\n    this.editor.revealPositionInCenterIfOutsideViewport(position, 0\n    /* Smooth */\n    );\n  };\n\n  return FoldingController;\n}();\n\nexport { FoldingController };\n\nvar FoldingAction =\n/** @class */\nfunction (_super) {\n  __extends(FoldingAction, _super);\n\n  function FoldingAction() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  FoldingAction.prototype.runEditorCommand = function (accessor, editor, args) {\n    var _this = this;\n\n    var foldingController = FoldingController.get(editor);\n\n    if (!foldingController) {\n      return;\n    }\n\n    var foldingModelPromise = foldingController.getFoldingModel();\n\n    if (foldingModelPromise) {\n      this.reportTelemetry(accessor, editor);\n      return foldingModelPromise.then(function (foldingModel) {\n        if (foldingModel) {\n          _this.invoke(foldingController, foldingModel, editor, args);\n\n          var selection = editor.getSelection();\n\n          if (selection) {\n            foldingController.reveal(selection.getStartPosition());\n          }\n        }\n      });\n    }\n  };\n\n  FoldingAction.prototype.getSelectedLines = function (editor) {\n    var selections = editor.getSelections();\n    return selections ? selections.map(function (s) {\n      return s.startLineNumber;\n    }) : [];\n  };\n\n  FoldingAction.prototype.getLineNumbers = function (args, editor) {\n    if (args && args.selectionLines) {\n      return args.selectionLines.map(function (l) {\n        return l + 1;\n      }); // to 0-bases line numbers\n    }\n\n    return this.getSelectedLines(editor);\n  };\n\n  FoldingAction.prototype.run = function (_accessor, _editor) {};\n\n  return FoldingAction;\n}(EditorAction);\n\nfunction foldingArgumentsConstraint(args) {\n  if (!types.isUndefined(args)) {\n    if (!types.isObject(args)) {\n      return false;\n    }\n\n    var foldingArgs = args;\n\n    if (!types.isUndefined(foldingArgs.levels) && !types.isNumber(foldingArgs.levels)) {\n      return false;\n    }\n\n    if (!types.isUndefined(foldingArgs.direction) && !types.isString(foldingArgs.direction)) {\n      return false;\n    }\n\n    if (!types.isUndefined(foldingArgs.selectionLines) && (!types.isArray(foldingArgs.selectionLines) || !foldingArgs.selectionLines.every(types.isNumber))) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nvar UnfoldAction =\n/** @class */\nfunction (_super) {\n  __extends(UnfoldAction, _super);\n\n  function UnfoldAction() {\n    return _super.call(this, {\n      id: 'editor.unfold',\n      label: nls.localize('unfoldAction.label', \"Unfold\"),\n      alias: 'Unfold',\n      precondition: null,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048\n        /* CtrlCmd */\n        | 1024\n        /* Shift */\n        | 89\n        /* US_CLOSE_SQUARE_BRACKET */\n        ,\n        mac: {\n          primary: 2048\n          /* CtrlCmd */\n          | 512\n          /* Alt */\n          | 89\n          /* US_CLOSE_SQUARE_BRACKET */\n\n        },\n        weight: 100\n        /* EditorContrib */\n\n      },\n      description: {\n        description: 'Unfold the content in the editor',\n        args: [{\n          name: 'Unfold editor argument',\n          description: \"Property-value pairs that can be passed through this argument:\\n\\t\\t\\t\\t\\t\\t* 'levels': Number of levels to unfold. If not set, defaults to 1.\\n\\t\\t\\t\\t\\t\\t* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.\\n\\t\\t\\t\\t\\t\\t* 'selectionLines': The start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.\\n\\t\\t\\t\\t\\t\\t\",\n          constraint: foldingArgumentsConstraint,\n          schema: {\n            'type': 'object',\n            'properties': {\n              'levels': {\n                'type': 'number',\n                'default': 1\n              },\n              'direction': {\n                'type': 'string',\n                'enum': ['up', 'down'],\n                'default': 'down'\n              },\n              'selectionLines': {\n                'type': 'array',\n                'items': {\n                  'type': 'number'\n                }\n              }\n            }\n          }\n        }]\n      }\n    }) || this;\n  }\n\n  UnfoldAction.prototype.invoke = function (_foldingController, foldingModel, editor, args) {\n    var levels = args && args.levels || 1;\n    var lineNumbers = this.getLineNumbers(args, editor);\n\n    if (args && args.direction === 'up') {\n      setCollapseStateLevelsUp(foldingModel, false, levels, lineNumbers);\n    } else {\n      setCollapseStateLevelsDown(foldingModel, false, levels, lineNumbers);\n    }\n  };\n\n  return UnfoldAction;\n}(FoldingAction);\n\nvar UnFoldRecursivelyAction =\n/** @class */\nfunction (_super) {\n  __extends(UnFoldRecursivelyAction, _super);\n\n  function UnFoldRecursivelyAction() {\n    return _super.call(this, {\n      id: 'editor.unfoldRecursively',\n      label: nls.localize('unFoldRecursivelyAction.label', \"Unfold Recursively\"),\n      alias: 'Unfold Recursively',\n      precondition: null,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: KeyChord(2048\n        /* CtrlCmd */\n        | 41\n        /* KEY_K */\n        , 2048\n        /* CtrlCmd */\n        | 89\n        /* US_CLOSE_SQUARE_BRACKET */\n        ),\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  UnFoldRecursivelyAction.prototype.invoke = function (_foldingController, foldingModel, editor, _args) {\n    setCollapseStateLevelsDown(foldingModel, false, Number.MAX_VALUE, this.getSelectedLines(editor));\n  };\n\n  return UnFoldRecursivelyAction;\n}(FoldingAction);\n\nvar FoldAction =\n/** @class */\nfunction (_super) {\n  __extends(FoldAction, _super);\n\n  function FoldAction() {\n    return _super.call(this, {\n      id: 'editor.fold',\n      label: nls.localize('foldAction.label', \"Fold\"),\n      alias: 'Fold',\n      precondition: null,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048\n        /* CtrlCmd */\n        | 1024\n        /* Shift */\n        | 87\n        /* US_OPEN_SQUARE_BRACKET */\n        ,\n        mac: {\n          primary: 2048\n          /* CtrlCmd */\n          | 512\n          /* Alt */\n          | 87\n          /* US_OPEN_SQUARE_BRACKET */\n\n        },\n        weight: 100\n        /* EditorContrib */\n\n      },\n      description: {\n        description: 'Fold the content in the editor',\n        args: [{\n          name: 'Fold editor argument',\n          description: \"Property-value pairs that can be passed through this argument:\\n\\t\\t\\t\\t\\t\\t\\t* 'levels': Number of levels to fold. Defaults to 1.\\n\\t\\t\\t\\t\\t\\t\\t* 'direction': If 'up', folds given number of levels up otherwise folds down.\\n\\t\\t\\t\\t\\t\\t\\t* 'selectionLines': The start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.\\n\\t\\t\\t\\t\\t\\t\",\n          constraint: foldingArgumentsConstraint,\n          schema: {\n            'type': 'object',\n            'properties': {\n              'levels': {\n                'type': 'number',\n                'default': 1\n              },\n              'direction': {\n                'type': 'string',\n                'enum': ['up', 'down'],\n                'default': 'down'\n              },\n              'selectionLines': {\n                'type': 'array',\n                'items': {\n                  'type': 'number'\n                }\n              }\n            }\n          }\n        }]\n      }\n    }) || this;\n  }\n\n  FoldAction.prototype.invoke = function (_foldingController, foldingModel, editor, args) {\n    var levels = args && args.levels || 1;\n    var lineNumbers = this.getLineNumbers(args, editor);\n\n    if (args && args.direction === 'up') {\n      setCollapseStateLevelsUp(foldingModel, true, levels, lineNumbers);\n    } else {\n      setCollapseStateLevelsDown(foldingModel, true, levels, lineNumbers);\n    }\n  };\n\n  return FoldAction;\n}(FoldingAction);\n\nvar FoldRecursivelyAction =\n/** @class */\nfunction (_super) {\n  __extends(FoldRecursivelyAction, _super);\n\n  function FoldRecursivelyAction() {\n    return _super.call(this, {\n      id: 'editor.foldRecursively',\n      label: nls.localize('foldRecursivelyAction.label', \"Fold Recursively\"),\n      alias: 'Fold Recursively',\n      precondition: null,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: KeyChord(2048\n        /* CtrlCmd */\n        | 41\n        /* KEY_K */\n        , 2048\n        /* CtrlCmd */\n        | 87\n        /* US_OPEN_SQUARE_BRACKET */\n        ),\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  FoldRecursivelyAction.prototype.invoke = function (_foldingController, foldingModel, editor) {\n    var selectedLines = this.getSelectedLines(editor);\n    setCollapseStateLevelsDown(foldingModel, true, Number.MAX_VALUE, selectedLines);\n  };\n\n  return FoldRecursivelyAction;\n}(FoldingAction);\n\nvar FoldAllBlockCommentsAction =\n/** @class */\nfunction (_super) {\n  __extends(FoldAllBlockCommentsAction, _super);\n\n  function FoldAllBlockCommentsAction() {\n    return _super.call(this, {\n      id: 'editor.foldAllBlockComments',\n      label: nls.localize('foldAllBlockComments.label', \"Fold All Block Comments\"),\n      alias: 'Fold All Block Comments',\n      precondition: null,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: KeyChord(2048\n        /* CtrlCmd */\n        | 41\n        /* KEY_K */\n        , 2048\n        /* CtrlCmd */\n        | 85\n        /* US_SLASH */\n        ),\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  FoldAllBlockCommentsAction.prototype.invoke = function (_foldingController, foldingModel, editor) {\n    if (foldingModel.regions.hasTypes()) {\n      setCollapseStateForType(foldingModel, FoldingRangeKind.Comment.value, true);\n    } else {\n      var editorModel = editor.getModel();\n\n      if (!editorModel) {\n        return;\n      }\n\n      var comments = LanguageConfigurationRegistry.getComments(editorModel.getLanguageIdentifier().id);\n\n      if (comments && comments.blockCommentStartToken) {\n        var regExp = new RegExp('^\\\\s*' + escapeRegExpCharacters(comments.blockCommentStartToken));\n        setCollapseStateForMatchingLines(foldingModel, regExp, true);\n      }\n    }\n  };\n\n  return FoldAllBlockCommentsAction;\n}(FoldingAction);\n\nvar FoldAllRegionsAction =\n/** @class */\nfunction (_super) {\n  __extends(FoldAllRegionsAction, _super);\n\n  function FoldAllRegionsAction() {\n    return _super.call(this, {\n      id: 'editor.foldAllMarkerRegions',\n      label: nls.localize('foldAllMarkerRegions.label', \"Fold All Regions\"),\n      alias: 'Fold All Regions',\n      precondition: null,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: KeyChord(2048\n        /* CtrlCmd */\n        | 41\n        /* KEY_K */\n        , 2048\n        /* CtrlCmd */\n        | 29\n        /* KEY_8 */\n        ),\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  FoldAllRegionsAction.prototype.invoke = function (_foldingController, foldingModel, editor) {\n    if (foldingModel.regions.hasTypes()) {\n      setCollapseStateForType(foldingModel, FoldingRangeKind.Region.value, true);\n    } else {\n      var editorModel = editor.getModel();\n\n      if (!editorModel) {\n        return;\n      }\n\n      var foldingRules = LanguageConfigurationRegistry.getFoldingRules(editorModel.getLanguageIdentifier().id);\n\n      if (foldingRules && foldingRules.markers && foldingRules.markers.start) {\n        var regExp = new RegExp(foldingRules.markers.start);\n        setCollapseStateForMatchingLines(foldingModel, regExp, true);\n      }\n    }\n  };\n\n  return FoldAllRegionsAction;\n}(FoldingAction);\n\nvar UnfoldAllRegionsAction =\n/** @class */\nfunction (_super) {\n  __extends(UnfoldAllRegionsAction, _super);\n\n  function UnfoldAllRegionsAction() {\n    return _super.call(this, {\n      id: 'editor.unfoldAllMarkerRegions',\n      label: nls.localize('unfoldAllMarkerRegions.label', \"Unfold All Regions\"),\n      alias: 'Unfold All Regions',\n      precondition: null,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: KeyChord(2048\n        /* CtrlCmd */\n        | 41\n        /* KEY_K */\n        , 2048\n        /* CtrlCmd */\n        | 30\n        /* KEY_9 */\n        ),\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  UnfoldAllRegionsAction.prototype.invoke = function (_foldingController, foldingModel, editor) {\n    if (foldingModel.regions.hasTypes()) {\n      setCollapseStateForType(foldingModel, FoldingRangeKind.Region.value, false);\n    } else {\n      var editorModel = editor.getModel();\n\n      if (!editorModel) {\n        return;\n      }\n\n      var foldingRules = LanguageConfigurationRegistry.getFoldingRules(editorModel.getLanguageIdentifier().id);\n\n      if (foldingRules && foldingRules.markers && foldingRules.markers.start) {\n        var regExp = new RegExp(foldingRules.markers.start);\n        setCollapseStateForMatchingLines(foldingModel, regExp, false);\n      }\n    }\n  };\n\n  return UnfoldAllRegionsAction;\n}(FoldingAction);\n\nvar FoldAllAction =\n/** @class */\nfunction (_super) {\n  __extends(FoldAllAction, _super);\n\n  function FoldAllAction() {\n    return _super.call(this, {\n      id: 'editor.foldAll',\n      label: nls.localize('foldAllAction.label', \"Fold All\"),\n      alias: 'Fold All',\n      precondition: null,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: KeyChord(2048\n        /* CtrlCmd */\n        | 41\n        /* KEY_K */\n        , 2048\n        /* CtrlCmd */\n        | 21\n        /* KEY_0 */\n        ),\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  FoldAllAction.prototype.invoke = function (_foldingController, foldingModel, _editor) {\n    setCollapseStateLevelsDown(foldingModel, true);\n  };\n\n  return FoldAllAction;\n}(FoldingAction);\n\nvar UnfoldAllAction =\n/** @class */\nfunction (_super) {\n  __extends(UnfoldAllAction, _super);\n\n  function UnfoldAllAction() {\n    return _super.call(this, {\n      id: 'editor.unfoldAll',\n      label: nls.localize('unfoldAllAction.label', \"Unfold All\"),\n      alias: 'Unfold All',\n      precondition: null,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: KeyChord(2048\n        /* CtrlCmd */\n        | 41\n        /* KEY_K */\n        , 2048\n        /* CtrlCmd */\n        | 40\n        /* KEY_J */\n        ),\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  UnfoldAllAction.prototype.invoke = function (_foldingController, foldingModel, _editor) {\n    setCollapseStateLevelsDown(foldingModel, false);\n  };\n\n  return UnfoldAllAction;\n}(FoldingAction);\n\nvar FoldLevelAction =\n/** @class */\nfunction (_super) {\n  __extends(FoldLevelAction, _super);\n\n  function FoldLevelAction() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  FoldLevelAction.prototype.getFoldingLevel = function () {\n    return parseInt(this.id.substr(FoldLevelAction.ID_PREFIX.length));\n  };\n\n  FoldLevelAction.prototype.invoke = function (_foldingController, foldingModel, editor) {\n    setCollapseStateAtLevel(foldingModel, this.getFoldingLevel(), true, this.getSelectedLines(editor));\n  };\n\n  FoldLevelAction.ID_PREFIX = 'editor.foldLevel';\n\n  FoldLevelAction.ID = function (level) {\n    return FoldLevelAction.ID_PREFIX + level;\n  };\n\n  return FoldLevelAction;\n}(FoldingAction);\n\nregisterEditorContribution(FoldingController);\nregisterEditorAction(UnfoldAction);\nregisterEditorAction(UnFoldRecursivelyAction);\nregisterEditorAction(FoldAction);\nregisterEditorAction(FoldRecursivelyAction);\nregisterEditorAction(FoldAllAction);\nregisterEditorAction(UnfoldAllAction);\nregisterEditorAction(FoldAllBlockCommentsAction);\nregisterEditorAction(FoldAllRegionsAction);\nregisterEditorAction(UnfoldAllRegionsAction);\n\nfor (var i = 1; i <= 7; i++) {\n  registerInstantiatedEditorAction(new FoldLevelAction({\n    id: FoldLevelAction.ID(i),\n    label: nls.localize('foldLevelAction.label', \"Fold Level {0}\", i),\n    alias: \"Fold Level \" + i,\n    precondition: null,\n    kbOpts: {\n      kbExpr: EditorContextKeys.editorTextFocus,\n      primary: KeyChord(2048\n      /* CtrlCmd */\n      | 41\n      /* KEY_K */\n      , 2048\n      /* CtrlCmd */\n      | 21\n      /* KEY_0 */\n      + i),\n      weight: 100\n      /* EditorContrib */\n\n    }\n  }));\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport * as nls from '../../../nls.js';\nimport { EditorAction, registerEditorAction } from '../../browser/editorExtensions.js';\nimport { EditorZoom } from '../../common/config/editorZoom.js';\n\nvar EditorFontZoomIn =\n/** @class */\nfunction (_super) {\n  __extends(EditorFontZoomIn, _super);\n\n  function EditorFontZoomIn() {\n    return _super.call(this, {\n      id: 'editor.action.fontZoomIn',\n      label: nls.localize('EditorFontZoomIn.label', \"Editor Font Zoom In\"),\n      alias: 'Editor Font Zoom In',\n      precondition: null\n    }) || this;\n  }\n\n  EditorFontZoomIn.prototype.run = function (accessor, editor) {\n    EditorZoom.setZoomLevel(EditorZoom.getZoomLevel() + 1);\n  };\n\n  return EditorFontZoomIn;\n}(EditorAction);\n\nvar EditorFontZoomOut =\n/** @class */\nfunction (_super) {\n  __extends(EditorFontZoomOut, _super);\n\n  function EditorFontZoomOut() {\n    return _super.call(this, {\n      id: 'editor.action.fontZoomOut',\n      label: nls.localize('EditorFontZoomOut.label', \"Editor Font Zoom Out\"),\n      alias: 'Editor Font Zoom Out',\n      precondition: null\n    }) || this;\n  }\n\n  EditorFontZoomOut.prototype.run = function (accessor, editor) {\n    EditorZoom.setZoomLevel(EditorZoom.getZoomLevel() - 1);\n  };\n\n  return EditorFontZoomOut;\n}(EditorAction);\n\nvar EditorFontZoomReset =\n/** @class */\nfunction (_super) {\n  __extends(EditorFontZoomReset, _super);\n\n  function EditorFontZoomReset() {\n    return _super.call(this, {\n      id: 'editor.action.fontZoomReset',\n      label: nls.localize('EditorFontZoomReset.label', \"Editor Font Zoom Reset\"),\n      alias: 'Editor Font Zoom Reset',\n      precondition: null\n    }) || this;\n  }\n\n  EditorFontZoomReset.prototype.run = function (accessor, editor) {\n    EditorZoom.setZoomLevel(0);\n  };\n\n  return EditorFontZoomReset;\n}(EditorAction);\n\nregisterEditorAction(EditorFontZoomIn);\nregisterEditorAction(EditorFontZoomOut);\nregisterEditorAction(EditorFontZoomReset);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditOperation } from '../../common/core/editOperation.js';\nimport { Range } from '../../common/core/range.js';\n\nvar FormattingEdit =\n/** @class */\nfunction () {\n  function FormattingEdit() {}\n\n  FormattingEdit._handleEolEdits = function (editor, edits) {\n    var newEol = undefined;\n    var singleEdits = [];\n\n    for (var _i = 0, edits_1 = edits; _i < edits_1.length; _i++) {\n      var edit = edits_1[_i];\n\n      if (typeof edit.eol === 'number') {\n        newEol = edit.eol;\n      }\n\n      if (edit.range && typeof edit.text === 'string') {\n        singleEdits.push(edit);\n      }\n    }\n\n    if (typeof newEol === 'number') {\n      if (editor.hasModel()) {\n        editor.getModel().pushEOL(newEol);\n      }\n    }\n\n    return singleEdits;\n  };\n\n  FormattingEdit._isFullModelReplaceEdit = function (editor, edit) {\n    if (!editor.hasModel()) {\n      return false;\n    }\n\n    var model = editor.getModel();\n    var editRange = model.validateRange(edit.range);\n    var fullModelRange = model.getFullModelRange();\n    return fullModelRange.equalsRange(editRange);\n  };\n\n  FormattingEdit.execute = function (editor, _edits) {\n    editor.pushUndoStop();\n\n    var edits = FormattingEdit._handleEolEdits(editor, _edits);\n\n    if (edits.length === 1 && FormattingEdit._isFullModelReplaceEdit(editor, edits[0])) {\n      // We use replace semantics and hope that markers stay put...\n      editor.executeEdits('formatEditsCommand', edits.map(function (edit) {\n        return EditOperation.replace(Range.lift(edit.range), edit.text);\n      }));\n    } else {\n      editor.executeEdits('formatEditsCommand', edits.map(function (edit) {\n        return EditOperation.replaceMove(Range.lift(edit.range), edit.text);\n      }));\n    }\n\n    editor.pushUndoStop();\n  };\n\n  return FormattingEdit;\n}();\n\nexport { FormattingEdit };","/**\n * **!Do not construct directly!**\n *\n * **!Only static methods because it gets serialized!**\n *\n * This represents the \"canonical\" version for an extension identifier. Extension ids\n * have to be case-insensitive (due to the marketplace), but we must ensure case\n * preservation because the extension API is already public at this time.\n *\n * For example, given an extension with the publisher `\"Hello\"` and the name `\"World\"`,\n * its canonical extension identifier is `\"Hello.World\"`. This extension could be\n * referenced in some other extension's dependencies using the string `\"hello.world\"`.\n *\n * To make matters more complicated, an extension can optionally have an UUID. When two\n * extensions have the same UUID, they are considered equal even if their identifier is different.\n */\nvar ExtensionIdentifier =\n/** @class */\nfunction () {\n  function ExtensionIdentifier(value) {\n    this.value = value;\n    this._lower = value.toLowerCase();\n  }\n  /**\n   * Gives the value by which to index (for equality).\n   */\n\n\n  ExtensionIdentifier.toKey = function (id) {\n    if (typeof id === 'string') {\n      return id.toLowerCase();\n    }\n\n    return id._lower;\n  };\n\n  return ExtensionIdentifier;\n}();\n\nexport { ExtensionIdentifier };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nimport { alert } from '../../../base/browser/ui/aria/aria.js';\nimport { isNonEmptyArray } from '../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { illegalArgument, onUnexpectedExternalError } from '../../../base/common/errors.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { EditorState, EditorStateCancellationTokenSource, TextModelCancellationTokenSource } from '../../browser/core/editorState.js';\nimport { isCodeEditor } from '../../browser/editorBrowser.js';\nimport { registerLanguageCommand } from '../../browser/editorExtensions.js';\nimport { Position } from '../../common/core/position.js';\nimport { Range } from '../../common/core/range.js';\nimport { Selection } from '../../common/core/selection.js';\nimport { DocumentFormattingEditProviderRegistry, DocumentRangeFormattingEditProviderRegistry, OnTypeFormattingEditProviderRegistry } from '../../common/modes.js';\nimport { IEditorWorkerService } from '../../common/services/editorWorkerService.js';\nimport { IModelService } from '../../common/services/modelService.js';\nimport { FormattingEdit } from './formattingEdit.js';\nimport * as nls from '../../../nls.js';\nimport { ExtensionIdentifier } from '../../../platform/extensions/common/extensions.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { LinkedList } from '../../../base/common/linkedList.js';\nexport function alertFormattingEdits(edits) {\n  edits = edits.filter(function (edit) {\n    return edit.range;\n  });\n\n  if (!edits.length) {\n    return;\n  }\n\n  var range = edits[0].range;\n\n  for (var i = 1; i < edits.length; i++) {\n    range = Range.plusRange(range, edits[i].range);\n  }\n\n  var startLineNumber = range.startLineNumber,\n      endLineNumber = range.endLineNumber;\n\n  if (startLineNumber === endLineNumber) {\n    if (edits.length === 1) {\n      alert(nls.localize('hint11', \"Made 1 formatting edit on line {0}\", startLineNumber));\n    } else {\n      alert(nls.localize('hintn1', \"Made {0} formatting edits on line {1}\", edits.length, startLineNumber));\n    }\n  } else {\n    if (edits.length === 1) {\n      alert(nls.localize('hint1n', \"Made 1 formatting edit between lines {0} and {1}\", startLineNumber, endLineNumber));\n    } else {\n      alert(nls.localize('hintnn', \"Made {0} formatting edits between lines {1} and {2}\", edits.length, startLineNumber, endLineNumber));\n    }\n  }\n}\nexport function getRealAndSyntheticDocumentFormattersOrdered(model) {\n  var result = [];\n  var seen = new Set(); // (1) add all document formatter\n\n  var docFormatter = DocumentFormattingEditProviderRegistry.ordered(model);\n\n  for (var _i = 0, docFormatter_1 = docFormatter; _i < docFormatter_1.length; _i++) {\n    var formatter = docFormatter_1[_i];\n    result.push(formatter);\n\n    if (formatter.extensionId) {\n      seen.add(ExtensionIdentifier.toKey(formatter.extensionId));\n    }\n  } // (2) add all range formatter as document formatter (unless the same extension already did that)\n\n\n  var rangeFormatter = DocumentRangeFormattingEditProviderRegistry.ordered(model);\n\n  var _loop_1 = function _loop_1(formatter) {\n    if (formatter.extensionId) {\n      if (seen.has(ExtensionIdentifier.toKey(formatter.extensionId))) {\n        return \"continue\";\n      }\n\n      seen.add(ExtensionIdentifier.toKey(formatter.extensionId));\n    }\n\n    result.push({\n      displayName: formatter.displayName,\n      extensionId: formatter.extensionId,\n      provideDocumentFormattingEdits: function provideDocumentFormattingEdits(model, options, token) {\n        return formatter.provideDocumentRangeFormattingEdits(model, model.getFullModelRange(), options, token);\n      }\n    });\n  };\n\n  for (var _a = 0, rangeFormatter_1 = rangeFormatter; _a < rangeFormatter_1.length; _a++) {\n    var formatter = rangeFormatter_1[_a];\n\n    _loop_1(formatter);\n  }\n\n  return result;\n}\n\nvar FormattingConflicts =\n/** @class */\nfunction () {\n  function FormattingConflicts() {}\n\n  FormattingConflicts.select = function (formatter, document, mode) {\n    return __awaiter(this, void 0, void 0, function () {\n      var selector;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (formatter.length === 0) {\n              return [2\n              /*return*/\n              , undefined];\n            }\n\n            selector = FormattingConflicts._selectors.iterator().next().value;\n            if (!selector) return [3\n            /*break*/\n            , 2];\n            return [4\n            /*yield*/\n            , selector(formatter, document, mode)];\n\n          case 1:\n            return [2\n            /*return*/\n            , _a.sent()];\n\n          case 2:\n            return [2\n            /*return*/\n            , formatter[0]];\n        }\n      });\n    });\n  };\n\n  FormattingConflicts._selectors = new LinkedList();\n  return FormattingConflicts;\n}();\n\nexport { FormattingConflicts };\nexport function formatDocumentRangeWithSelectedProvider(accessor, editorOrModel, range, mode, token) {\n  return __awaiter(this, void 0, void 0, function () {\n    var instaService, model, provider, selected;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          instaService = accessor.get(IInstantiationService);\n          model = isCodeEditor(editorOrModel) ? editorOrModel.getModel() : editorOrModel;\n          provider = DocumentRangeFormattingEditProviderRegistry.ordered(model);\n          return [4\n          /*yield*/\n          , FormattingConflicts.select(provider, model, mode)];\n\n        case 1:\n          selected = _a.sent();\n          if (!selected) return [3\n          /*break*/\n          , 3];\n          return [4\n          /*yield*/\n          , instaService.invokeFunction(formatDocumentRangeWithProvider, selected, editorOrModel, range, token)];\n\n        case 2:\n          _a.sent();\n\n          _a.label = 3;\n\n        case 3:\n          return [2\n          /*return*/\n          ];\n      }\n    });\n  });\n}\nexport function formatDocumentRangeWithProvider(accessor, provider, editorOrModel, range, token) {\n  return __awaiter(this, void 0, void 0, function () {\n    var workerService, model, validate, state_1, versionNow_1, rawEdits, edits, range_1, initialSelection_1;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          workerService = accessor.get(IEditorWorkerService);\n\n          if (isCodeEditor(editorOrModel)) {\n            model = editorOrModel.getModel();\n            state_1 = new EditorState(editorOrModel, 1\n            /* Value */\n            | 4\n            /* Position */\n            );\n\n            validate = function validate() {\n              return state_1.validate(editorOrModel);\n            };\n          } else {\n            model = editorOrModel;\n            versionNow_1 = editorOrModel.getVersionId();\n\n            validate = function validate() {\n              return versionNow_1 === editorOrModel.getVersionId();\n            };\n          }\n\n          return [4\n          /*yield*/\n          , provider.provideDocumentRangeFormattingEdits(model, range, model.getFormattingOptions(), token)];\n\n        case 1:\n          rawEdits = _a.sent();\n          return [4\n          /*yield*/\n          , workerService.computeMoreMinimalEdits(model.uri, rawEdits)];\n\n        case 2:\n          edits = _a.sent();\n\n          if (!validate()) {\n            return [2\n            /*return*/\n            , true];\n          }\n\n          if (!edits || edits.length === 0) {\n            return [2\n            /*return*/\n            , false];\n          }\n\n          if (isCodeEditor(editorOrModel)) {\n            // use editor to apply edits\n            FormattingEdit.execute(editorOrModel, edits);\n            alertFormattingEdits(edits);\n            editorOrModel.pushUndoStop();\n            editorOrModel.focus();\n            editorOrModel.revealPositionInCenterIfOutsideViewport(editorOrModel.getPosition(), 1\n            /* Immediate */\n            );\n          } else {\n            range_1 = edits[0].range;\n            initialSelection_1 = new Selection(range_1.startLineNumber, range_1.startColumn, range_1.endLineNumber, range_1.endColumn);\n            model.pushEditOperations([initialSelection_1], edits.map(function (edit) {\n              return {\n                text: edit.text,\n                range: Range.lift(edit.range),\n                forceMoveMarkers: true\n              };\n            }), function (undoEdits) {\n              for (var _i = 0, undoEdits_1 = undoEdits; _i < undoEdits_1.length; _i++) {\n                var range_2 = undoEdits_1[_i].range;\n\n                if (Range.areIntersectingOrTouching(range_2, initialSelection_1)) {\n                  return [new Selection(range_2.startLineNumber, range_2.startColumn, range_2.endLineNumber, range_2.endColumn)];\n                }\n              }\n\n              return null;\n            });\n          }\n\n          return [2\n          /*return*/\n          , true];\n      }\n    });\n  });\n}\nexport function formatDocumentWithSelectedProvider(accessor, editorOrModel, mode, token) {\n  return __awaiter(this, void 0, void 0, function () {\n    var instaService, model, provider, selected;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          instaService = accessor.get(IInstantiationService);\n          model = isCodeEditor(editorOrModel) ? editorOrModel.getModel() : editorOrModel;\n          provider = getRealAndSyntheticDocumentFormattersOrdered(model);\n          return [4\n          /*yield*/\n          , FormattingConflicts.select(provider, model, mode)];\n\n        case 1:\n          selected = _a.sent();\n          if (!selected) return [3\n          /*break*/\n          , 3];\n          return [4\n          /*yield*/\n          , instaService.invokeFunction(formatDocumentWithProvider, selected, editorOrModel, mode, token)];\n\n        case 2:\n          _a.sent();\n\n          _a.label = 3;\n\n        case 3:\n          return [2\n          /*return*/\n          ];\n      }\n    });\n  });\n}\nexport function formatDocumentWithProvider(accessor, provider, editorOrModel, mode, token) {\n  return __awaiter(this, void 0, void 0, function () {\n    var workerService, model, cts, rawEdits, edits, range, initialSelection_2;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          workerService = accessor.get(IEditorWorkerService);\n\n          if (isCodeEditor(editorOrModel)) {\n            model = editorOrModel.getModel();\n            cts = new EditorStateCancellationTokenSource(editorOrModel, 1\n            /* Value */\n            | 4\n            /* Position */\n            , token);\n          } else {\n            model = editorOrModel;\n            cts = new TextModelCancellationTokenSource(editorOrModel, token);\n          }\n\n          return [4\n          /*yield*/\n          , provider.provideDocumentFormattingEdits(model, model.getFormattingOptions(), cts.token)];\n\n        case 1:\n          rawEdits = _a.sent();\n          return [4\n          /*yield*/\n          , workerService.computeMoreMinimalEdits(model.uri, rawEdits)];\n\n        case 2:\n          edits = _a.sent();\n\n          if (cts.token.isCancellationRequested) {\n            return [2\n            /*return*/\n            , true];\n          }\n\n          if (!edits || edits.length === 0) {\n            return [2\n            /*return*/\n            , false];\n          }\n\n          if (isCodeEditor(editorOrModel)) {\n            // use editor to apply edits\n            FormattingEdit.execute(editorOrModel, edits);\n\n            if (mode !== 2\n            /* Silent */\n            ) {\n                alertFormattingEdits(edits);\n                editorOrModel.pushUndoStop();\n                editorOrModel.focus();\n                editorOrModel.revealPositionInCenterIfOutsideViewport(editorOrModel.getPosition(), 1\n                /* Immediate */\n                );\n              }\n          } else {\n            range = edits[0].range;\n            initialSelection_2 = new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn);\n            model.pushEditOperations([initialSelection_2], edits.map(function (edit) {\n              return {\n                text: edit.text,\n                range: Range.lift(edit.range),\n                forceMoveMarkers: true\n              };\n            }), function (undoEdits) {\n              for (var _i = 0, undoEdits_2 = undoEdits; _i < undoEdits_2.length; _i++) {\n                var range_3 = undoEdits_2[_i].range;\n\n                if (Range.areIntersectingOrTouching(range_3, initialSelection_2)) {\n                  return [new Selection(range_3.startLineNumber, range_3.startColumn, range_3.endLineNumber, range_3.endColumn)];\n                }\n              }\n\n              return null;\n            });\n          }\n\n          return [2\n          /*return*/\n          , true];\n      }\n    });\n  });\n}\nexport function getDocumentRangeFormattingEditsUntilResult(workerService, model, range, options, token) {\n  return __awaiter(this, void 0, void 0, function () {\n    var providers, _i, providers_1, provider, rawEdits;\n\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          providers = DocumentRangeFormattingEditProviderRegistry.ordered(model);\n          _i = 0, providers_1 = providers;\n          _a.label = 1;\n\n        case 1:\n          if (!(_i < providers_1.length)) return [3\n          /*break*/\n          , 5];\n          provider = providers_1[_i];\n          return [4\n          /*yield*/\n          , Promise.resolve(provider.provideDocumentRangeFormattingEdits(model, range, options, token)).catch(onUnexpectedExternalError)];\n\n        case 2:\n          rawEdits = _a.sent();\n          if (!isNonEmptyArray(rawEdits)) return [3\n          /*break*/\n          , 4];\n          return [4\n          /*yield*/\n          , workerService.computeMoreMinimalEdits(model.uri, rawEdits)];\n\n        case 3:\n          return [2\n          /*return*/\n          , _a.sent()];\n\n        case 4:\n          _i++;\n          return [3\n          /*break*/\n          , 1];\n\n        case 5:\n          return [2\n          /*return*/\n          , undefined];\n      }\n    });\n  });\n}\nexport function getDocumentFormattingEditsUntilResult(workerService, model, options, token) {\n  return __awaiter(this, void 0, void 0, function () {\n    var providers, _i, providers_2, provider, rawEdits;\n\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          providers = getRealAndSyntheticDocumentFormattersOrdered(model);\n          _i = 0, providers_2 = providers;\n          _a.label = 1;\n\n        case 1:\n          if (!(_i < providers_2.length)) return [3\n          /*break*/\n          , 5];\n          provider = providers_2[_i];\n          return [4\n          /*yield*/\n          , Promise.resolve(provider.provideDocumentFormattingEdits(model, options, token)).catch(onUnexpectedExternalError)];\n\n        case 2:\n          rawEdits = _a.sent();\n          if (!isNonEmptyArray(rawEdits)) return [3\n          /*break*/\n          , 4];\n          return [4\n          /*yield*/\n          , workerService.computeMoreMinimalEdits(model.uri, rawEdits)];\n\n        case 3:\n          return [2\n          /*return*/\n          , _a.sent()];\n\n        case 4:\n          _i++;\n          return [3\n          /*break*/\n          , 1];\n\n        case 5:\n          return [2\n          /*return*/\n          , undefined];\n      }\n    });\n  });\n}\nexport function getOnTypeFormattingEdits(workerService, model, position, ch, options) {\n  var providers = OnTypeFormattingEditProviderRegistry.ordered(model);\n\n  if (providers.length === 0) {\n    return Promise.resolve(undefined);\n  }\n\n  if (providers[0].autoFormatTriggerCharacters.indexOf(ch) < 0) {\n    return Promise.resolve(undefined);\n  }\n\n  return Promise.resolve(providers[0].provideOnTypeFormattingEdits(model, position, ch, options, CancellationToken.None)).catch(onUnexpectedExternalError).then(function (edits) {\n    return workerService.computeMoreMinimalEdits(model.uri, edits);\n  });\n}\nregisterLanguageCommand('_executeFormatRangeProvider', function (accessor, args) {\n  var resource = args.resource,\n      range = args.range,\n      options = args.options;\n\n  if (!(resource instanceof URI) || !Range.isIRange(range)) {\n    throw illegalArgument();\n  }\n\n  var model = accessor.get(IModelService).getModel(resource);\n\n  if (!model) {\n    throw illegalArgument('resource');\n  }\n\n  return getDocumentRangeFormattingEditsUntilResult(accessor.get(IEditorWorkerService), model, Range.lift(range), options, CancellationToken.None);\n});\nregisterLanguageCommand('_executeFormatDocumentProvider', function (accessor, args) {\n  var resource = args.resource,\n      options = args.options;\n\n  if (!(resource instanceof URI)) {\n    throw illegalArgument('resource');\n  }\n\n  var model = accessor.get(IModelService).getModel(resource);\n\n  if (!model) {\n    throw illegalArgument('resource');\n  }\n\n  return getDocumentFormattingEditsUntilResult(accessor.get(IEditorWorkerService), model, options, CancellationToken.None);\n});\nregisterLanguageCommand('_executeFormatOnTypeProvider', function (accessor, args) {\n  var resource = args.resource,\n      position = args.position,\n      ch = args.ch,\n      options = args.options;\n\n  if (!(resource instanceof URI) || !Position.isIPosition(position) || typeof ch !== 'string') {\n    throw illegalArgument();\n  }\n\n  var model = accessor.get(IModelService).getModel(resource);\n\n  if (!model) {\n    throw illegalArgument('resource');\n  }\n\n  return getOnTypeFormattingEdits(accessor.get(IEditorWorkerService), model, Position.lift(position), ch, options);\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar _this = this;\n\nimport { isNonEmptyArray } from '../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { KeyChord } from '../../../base/common/keyCodes.js';\nimport { dispose } from '../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\nimport { CharacterSet } from '../../common/core/characterClassifier.js';\nimport { Range } from '../../common/core/range.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport { DocumentRangeFormattingEditProviderRegistry, OnTypeFormattingEditProviderRegistry } from '../../common/modes.js';\nimport { IEditorWorkerService } from '../../common/services/editorWorkerService.js';\nimport { getOnTypeFormattingEdits, alertFormattingEdits, formatDocumentRangeWithSelectedProvider, formatDocumentWithSelectedProvider } from './format.js';\nimport { FormattingEdit } from './formattingEdit.js';\nimport * as nls from '../../../nls.js';\nimport { CommandsRegistry, ICommandService } from '../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr } from '../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\n\nvar FormatOnType =\n/** @class */\nfunction () {\n  function FormatOnType(editor, _workerService) {\n    var _this = this;\n\n    this._workerService = _workerService;\n    this._callOnDispose = [];\n    this._callOnModel = [];\n    this._editor = editor;\n\n    this._callOnDispose.push(editor.onDidChangeConfiguration(function () {\n      return _this._update();\n    }));\n\n    this._callOnDispose.push(editor.onDidChangeModel(function () {\n      return _this._update();\n    }));\n\n    this._callOnDispose.push(editor.onDidChangeModelLanguage(function () {\n      return _this._update();\n    }));\n\n    this._callOnDispose.push(OnTypeFormattingEditProviderRegistry.onDidChange(this._update, this));\n  }\n\n  FormatOnType.prototype.getId = function () {\n    return FormatOnType.ID;\n  };\n\n  FormatOnType.prototype.dispose = function () {\n    this._callOnDispose = dispose(this._callOnDispose);\n    this._callOnModel = dispose(this._callOnModel);\n  };\n\n  FormatOnType.prototype._update = function () {\n    var _this = this; // clean up\n\n\n    this._callOnModel = dispose(this._callOnModel); // we are disabled\n\n    if (!this._editor.getConfiguration().contribInfo.formatOnType) {\n      return;\n    } // no model\n\n\n    if (!this._editor.hasModel()) {\n      return;\n    }\n\n    var model = this._editor.getModel(); // no support\n\n\n    var support = OnTypeFormattingEditProviderRegistry.ordered(model)[0];\n\n    if (!support || !support.autoFormatTriggerCharacters) {\n      return;\n    } // register typing listeners that will trigger the format\n\n\n    var triggerChars = new CharacterSet();\n\n    for (var _i = 0, _a = support.autoFormatTriggerCharacters; _i < _a.length; _i++) {\n      var ch = _a[_i];\n      triggerChars.add(ch.charCodeAt(0));\n    }\n\n    this._callOnModel.push(this._editor.onDidType(function (text) {\n      var lastCharCode = text.charCodeAt(text.length - 1);\n\n      if (triggerChars.has(lastCharCode)) {\n        _this._trigger(String.fromCharCode(lastCharCode));\n      }\n    }));\n  };\n\n  FormatOnType.prototype._trigger = function (ch) {\n    var _this = this;\n\n    if (!this._editor.hasModel()) {\n      return;\n    }\n\n    if (this._editor.getSelections().length > 1) {\n      return;\n    }\n\n    var model = this._editor.getModel();\n\n    var position = this._editor.getPosition();\n\n    var canceled = false; // install a listener that checks if edits happens before the\n    // position on which we format right now. If so, we won't\n    // apply the format edits\n\n    var unbind = this._editor.onDidChangeModelContent(function (e) {\n      if (e.isFlush) {\n        // a model.setValue() was called\n        // cancel only once\n        canceled = true;\n        unbind.dispose();\n        return;\n      }\n\n      for (var i = 0, len = e.changes.length; i < len; i++) {\n        var change = e.changes[i];\n\n        if (change.range.endLineNumber <= position.lineNumber) {\n          // cancel only once\n          canceled = true;\n          unbind.dispose();\n          return;\n        }\n      }\n    });\n\n    getOnTypeFormattingEdits(this._workerService, model, position, ch, model.getFormattingOptions()).then(function (edits) {\n      unbind.dispose();\n\n      if (canceled) {\n        return;\n      }\n\n      if (isNonEmptyArray(edits)) {\n        FormattingEdit.execute(_this._editor, edits);\n        alertFormattingEdits(edits);\n      }\n    }, function (err) {\n      unbind.dispose();\n      throw err;\n    });\n  };\n\n  FormatOnType.ID = 'editor.contrib.autoFormat';\n  FormatOnType = __decorate([__param(1, IEditorWorkerService)], FormatOnType);\n  return FormatOnType;\n}();\n\nvar FormatOnPaste =\n/** @class */\nfunction () {\n  function FormatOnPaste(editor, _instantiationService) {\n    var _this = this;\n\n    this.editor = editor;\n    this._instantiationService = _instantiationService;\n    this._callOnDispose = [];\n    this._callOnModel = [];\n\n    this._callOnDispose.push(editor.onDidChangeConfiguration(function () {\n      return _this._update();\n    }));\n\n    this._callOnDispose.push(editor.onDidChangeModel(function () {\n      return _this._update();\n    }));\n\n    this._callOnDispose.push(editor.onDidChangeModelLanguage(function () {\n      return _this._update();\n    }));\n\n    this._callOnDispose.push(DocumentRangeFormattingEditProviderRegistry.onDidChange(this._update, this));\n  }\n\n  FormatOnPaste.prototype.getId = function () {\n    return FormatOnPaste.ID;\n  };\n\n  FormatOnPaste.prototype.dispose = function () {\n    this._callOnDispose = dispose(this._callOnDispose);\n    this._callOnModel = dispose(this._callOnModel);\n  };\n\n  FormatOnPaste.prototype._update = function () {\n    var _this = this; // clean up\n\n\n    this._callOnModel = dispose(this._callOnModel); // we are disabled\n\n    if (!this.editor.getConfiguration().contribInfo.formatOnPaste) {\n      return;\n    } // no model\n\n\n    if (!this.editor.hasModel()) {\n      return;\n    } // no formatter\n\n\n    if (!DocumentRangeFormattingEditProviderRegistry.has(this.editor.getModel())) {\n      return;\n    }\n\n    this._callOnModel.push(this.editor.onDidPaste(function (range) {\n      return _this._trigger(range);\n    }));\n  };\n\n  FormatOnPaste.prototype._trigger = function (range) {\n    if (!this.editor.hasModel()) {\n      return;\n    }\n\n    if (this.editor.getSelections().length > 1) {\n      return;\n    }\n\n    this._instantiationService.invokeFunction(formatDocumentRangeWithSelectedProvider, this.editor, range, 2\n    /* Silent */\n    , CancellationToken.None).catch(onUnexpectedError);\n  };\n\n  FormatOnPaste.ID = 'editor.contrib.formatOnPaste';\n  FormatOnPaste = __decorate([__param(1, IInstantiationService)], FormatOnPaste);\n  return FormatOnPaste;\n}();\n\nvar FormatDocumentAction =\n/** @class */\nfunction (_super) {\n  __extends(FormatDocumentAction, _super);\n\n  function FormatDocumentAction() {\n    return _super.call(this, {\n      id: 'editor.action.formatDocument',\n      label: nls.localize('formatDocument.label', \"Format Document\"),\n      alias: 'Format Document',\n      precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasDocumentFormattingProvider),\n      kbOpts: {\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.editorTextFocus, EditorContextKeys.hasDocumentFormattingProvider),\n        primary: 1024\n        /* Shift */\n        | 512\n        /* Alt */\n        | 36\n        /* KEY_F */\n        ,\n        linux: {\n          primary: 2048\n          /* CtrlCmd */\n          | 1024\n          /* Shift */\n          | 39\n          /* KEY_I */\n\n        },\n        weight: 100\n        /* EditorContrib */\n\n      },\n      menuOpts: {\n        when: EditorContextKeys.hasDocumentFormattingProvider,\n        group: '1_modification',\n        order: 1.3\n      }\n    }) || this;\n  }\n\n  FormatDocumentAction.prototype.run = function (accessor, editor) {\n    return __awaiter(this, void 0, void 0, function () {\n      var instaService;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (!editor.hasModel()) return [3\n            /*break*/\n            , 2];\n            instaService = accessor.get(IInstantiationService);\n            return [4\n            /*yield*/\n            , instaService.invokeFunction(formatDocumentWithSelectedProvider, editor, 1\n            /* Explicit */\n            , CancellationToken.None)];\n\n          case 1:\n            _a.sent();\n\n            _a.label = 2;\n\n          case 2:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  return FormatDocumentAction;\n}(EditorAction);\n\nvar FormatSelectionAction =\n/** @class */\nfunction (_super) {\n  __extends(FormatSelectionAction, _super);\n\n  function FormatSelectionAction() {\n    return _super.call(this, {\n      id: 'editor.action.formatSelection',\n      label: nls.localize('formatSelection.label', \"Format Selection\"),\n      alias: 'Format Code',\n      precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasDocumentSelectionFormattingProvider),\n      kbOpts: {\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.editorTextFocus, EditorContextKeys.hasDocumentSelectionFormattingProvider),\n        primary: KeyChord(2048\n        /* CtrlCmd */\n        | 41\n        /* KEY_K */\n        , 2048\n        /* CtrlCmd */\n        | 36\n        /* KEY_F */\n        ),\n        weight: 100\n        /* EditorContrib */\n\n      },\n      menuOpts: {\n        when: ContextKeyExpr.and(EditorContextKeys.hasDocumentSelectionFormattingProvider, EditorContextKeys.hasNonEmptySelection),\n        group: '1_modification',\n        order: 1.31\n      }\n    }) || this;\n  }\n\n  FormatSelectionAction.prototype.run = function (accessor, editor) {\n    return __awaiter(this, void 0, void 0, function () {\n      var instaService, model, range;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (!editor.hasModel()) {\n              return [2\n              /*return*/\n              ];\n            }\n\n            instaService = accessor.get(IInstantiationService);\n            model = editor.getModel();\n            range = editor.getSelection();\n\n            if (range.isEmpty()) {\n              range = new Range(range.startLineNumber, 1, range.startLineNumber, model.getLineMaxColumn(range.startLineNumber));\n            }\n\n            return [4\n            /*yield*/\n            , instaService.invokeFunction(formatDocumentRangeWithSelectedProvider, editor, range, 1\n            /* Explicit */\n            , CancellationToken.None)];\n\n          case 1:\n            _a.sent();\n\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  return FormatSelectionAction;\n}(EditorAction);\n\nregisterEditorContribution(FormatOnType);\nregisterEditorContribution(FormatOnPaste);\nregisterEditorAction(FormatDocumentAction);\nregisterEditorAction(FormatSelectionAction); // this is the old format action that does both (format document OR format selection)\n// and we keep it here such that existing keybinding configurations etc will still work\n\nCommandsRegistry.registerCommand('editor.action.format', function (accessor) {\n  return __awaiter(_this, void 0, void 0, function () {\n    var editor, commandService;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          editor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n\n          if (!editor || !editor.hasModel()) {\n            return [2\n            /*return*/\n            ];\n          }\n\n          commandService = accessor.get(ICommandService);\n          if (!editor.getSelection().isEmpty()) return [3\n          /*break*/\n          , 2];\n          return [4\n          /*yield*/\n          , commandService.executeCommand('editor.action.formatDocument')];\n\n        case 1:\n          _a.sent();\n\n          return [3\n          /*break*/\n          , 4];\n\n        case 2:\n          return [4\n          /*yield*/\n          , commandService.executeCommand('editor.action.formatSelection')];\n\n        case 3:\n          _a.sent();\n\n          _a.label = 4;\n\n        case 4:\n          return [2\n          /*return*/\n          ];\n      }\n    });\n  });\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport * as dom from '../../../base/browser/dom.js';\nimport { ActionBar } from '../../../base/browser/ui/actionbar/actionbar.js';\nimport { Action } from '../../../base/common/actions.js';\nimport { Color } from '../../../base/common/color.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport * as objects from '../../../base/common/objects.js';\nimport * as strings from '../../../base/common/strings.js';\nimport './media/peekViewWidget.css';\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\nimport { EmbeddedCodeEditorWidget } from '../../browser/widget/embeddedCodeEditorWidget.js';\nimport { ZoneWidget } from '../zoneWidget/zoneWidget.js';\nimport * as nls from '../../../nls.js';\nimport { RawContextKey } from '../../../platform/contextkey/common/contextkey.js';\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\nimport { registerSingleton } from '../../../platform/instantiation/common/extensions.js';\nexport var IPeekViewService = createDecorator('IPeekViewService');\nregisterSingleton(IPeekViewService,\n/** @class */\nfunction () {\n  function class_1() {\n    this._widgets = new Map();\n  }\n\n  class_1.prototype.addExclusiveWidget = function (editor, widget) {\n    var _this = this;\n\n    var existing = this._widgets.get(editor);\n\n    if (existing) {\n      existing.listener.dispose();\n      existing.widget.dispose();\n    }\n\n    var remove = function remove() {\n      var data = _this._widgets.get(editor);\n\n      if (data && data.widget === widget) {\n        data.listener.dispose();\n\n        _this._widgets.delete(editor);\n      }\n    };\n\n    this._widgets.set(editor, {\n      widget: widget,\n      listener: widget.onDidClose(remove)\n    });\n  };\n\n  return class_1;\n}());\nexport var PeekContext;\n\n(function (PeekContext) {\n  PeekContext.inPeekEditor = new RawContextKey('inReferenceSearchEditor', true);\n  PeekContext.notInPeekEditor = PeekContext.inPeekEditor.toNegated();\n})(PeekContext || (PeekContext = {}));\n\nexport function getOuterEditor(accessor) {\n  var editor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n\n  if (editor instanceof EmbeddedCodeEditorWidget) {\n    return editor.getParentEditor();\n  }\n\n  return editor;\n}\nvar defaultOptions = {\n  headerBackgroundColor: Color.white,\n  primaryHeadingColor: Color.fromHex('#333333'),\n  secondaryHeadingColor: Color.fromHex('#6c6c6cb3')\n};\n\nvar PeekViewWidget =\n/** @class */\nfunction (_super) {\n  __extends(PeekViewWidget, _super);\n\n  function PeekViewWidget(editor, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var _this = _super.call(this, editor, options) || this;\n\n    _this._onDidClose = new Emitter();\n    objects.mixin(_this.options, defaultOptions, false);\n    return _this;\n  }\n\n  PeekViewWidget.prototype.dispose = function () {\n    _super.prototype.dispose.call(this);\n\n    this._onDidClose.fire(this);\n  };\n\n  Object.defineProperty(PeekViewWidget.prototype, \"onDidClose\", {\n    get: function get() {\n      return this._onDidClose.event;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  PeekViewWidget.prototype.style = function (styles) {\n    var options = this.options;\n\n    if (styles.headerBackgroundColor) {\n      options.headerBackgroundColor = styles.headerBackgroundColor;\n    }\n\n    if (styles.primaryHeadingColor) {\n      options.primaryHeadingColor = styles.primaryHeadingColor;\n    }\n\n    if (styles.secondaryHeadingColor) {\n      options.secondaryHeadingColor = styles.secondaryHeadingColor;\n    }\n\n    _super.prototype.style.call(this, styles);\n  };\n\n  PeekViewWidget.prototype._applyStyles = function () {\n    _super.prototype._applyStyles.call(this);\n\n    var options = this.options;\n\n    if (this._headElement && options.headerBackgroundColor) {\n      this._headElement.style.backgroundColor = options.headerBackgroundColor.toString();\n    }\n\n    if (this._primaryHeading && options.primaryHeadingColor) {\n      this._primaryHeading.style.color = options.primaryHeadingColor.toString();\n    }\n\n    if (this._secondaryHeading && options.secondaryHeadingColor) {\n      this._secondaryHeading.style.color = options.secondaryHeadingColor.toString();\n    }\n\n    if (this._bodyElement && options.frameColor) {\n      this._bodyElement.style.borderColor = options.frameColor.toString();\n    }\n  };\n\n  PeekViewWidget.prototype._fillContainer = function (container) {\n    this.setCssClass('peekview-widget');\n    this._headElement = dom.$('.head');\n    this._bodyElement = dom.$('.body');\n\n    this._fillHead(this._headElement);\n\n    this._fillBody(this._bodyElement);\n\n    container.appendChild(this._headElement);\n    container.appendChild(this._bodyElement);\n  };\n\n  PeekViewWidget.prototype._fillHead = function (container) {\n    var _this = this;\n\n    var titleElement = dom.$('.peekview-title');\n    dom.append(this._headElement, titleElement);\n    dom.addStandardDisposableListener(titleElement, 'click', function (event) {\n      return _this._onTitleClick(event);\n    });\n    this._headingIcon = dom.$('span');\n    this._primaryHeading = dom.$('span.filename');\n    this._secondaryHeading = dom.$('span.dirname');\n    this._metaHeading = dom.$('span.meta');\n    dom.append(titleElement, this._headingIcon, this._primaryHeading, this._secondaryHeading, this._metaHeading);\n    var actionsContainer = dom.$('.peekview-actions');\n    dom.append(this._headElement, actionsContainer);\n\n    var actionBarOptions = this._getActionBarOptions();\n\n    this._actionbarWidget = new ActionBar(actionsContainer, actionBarOptions);\n\n    this._disposables.push(this._actionbarWidget);\n\n    this._actionbarWidget.push(new Action('peekview.close', nls.localize('label.close', \"Close\"), 'close-peekview-action', true, function () {\n      _this.dispose();\n\n      return Promise.resolve();\n    }), {\n      label: false,\n      icon: true\n    });\n  };\n\n  PeekViewWidget.prototype._getActionBarOptions = function () {\n    return {};\n  };\n\n  PeekViewWidget.prototype._onTitleClick = function (event) {// implement me\n  };\n\n  PeekViewWidget.prototype.setTitleIcon = function (iconClassName) {\n    this._headingIcon.className = iconClassName ? \"icon \" + iconClassName : '';\n  };\n\n  PeekViewWidget.prototype.setTitle = function (primaryHeading, secondaryHeading) {\n    this._primaryHeading.innerHTML = strings.escape(primaryHeading);\n\n    this._primaryHeading.setAttribute('aria-label', primaryHeading);\n\n    if (secondaryHeading) {\n      this._secondaryHeading.innerHTML = strings.escape(secondaryHeading);\n    } else {\n      dom.clearNode(this._secondaryHeading);\n    }\n  };\n\n  PeekViewWidget.prototype.setMetaTitle = function (value) {\n    if (value) {\n      this._metaHeading.innerHTML = strings.escape(value);\n    } else {\n      dom.clearNode(this._metaHeading);\n    }\n  };\n\n  PeekViewWidget.prototype._doLayout = function (heightInPixel, widthInPixel) {\n    if (!this._isShowing && heightInPixel < 0) {\n      // Looks like the view zone got folded away!\n      this.dispose();\n      return;\n    }\n\n    var headHeight = Math.ceil(this.editor.getConfiguration().lineHeight * 1.2);\n    var bodyHeight = heightInPixel - (headHeight + 2\n    /* the border-top/bottom width*/\n    );\n\n    this._doLayoutHead(headHeight, widthInPixel);\n\n    this._doLayoutBody(bodyHeight, widthInPixel);\n  };\n\n  PeekViewWidget.prototype._doLayoutHead = function (heightInPixel, widthInPixel) {\n    this._headElement.style.height = heightInPixel + \"px\";\n    this._headElement.style.lineHeight = this._headElement.style.height;\n  };\n\n  PeekViewWidget.prototype._doLayoutBody = function (heightInPixel, widthInPixel) {\n    this._bodyElement.style.height = heightInPixel + \"px\";\n  };\n\n  return PeekViewWidget;\n}(ZoneWidget);\n\nexport { PeekViewWidget };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport * as objects from '../../../base/common/objects.js';\nimport { ICodeEditorService } from '../services/codeEditorService.js';\nimport { CodeEditorWidget } from './codeEditorWidget.js';\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\n\nvar EmbeddedCodeEditorWidget =\n/** @class */\nfunction (_super) {\n  __extends(EmbeddedCodeEditorWidget, _super);\n\n  function EmbeddedCodeEditorWidget(domElement, options, parentEditor, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService) {\n    var _this = _super.call(this, domElement, parentEditor.getRawConfiguration(), {}, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService) || this;\n\n    _this._parentEditor = parentEditor;\n    _this._overwriteOptions = options; // Overwrite parent's options\n\n    _super.prototype.updateOptions.call(_this, _this._overwriteOptions);\n\n    _this._register(parentEditor.onDidChangeConfiguration(function (e) {\n      return _this._onParentConfigurationChanged(e);\n    }));\n\n    return _this;\n  }\n\n  EmbeddedCodeEditorWidget.prototype.getParentEditor = function () {\n    return this._parentEditor;\n  };\n\n  EmbeddedCodeEditorWidget.prototype._onParentConfigurationChanged = function (e) {\n    _super.prototype.updateOptions.call(this, this._parentEditor.getRawConfiguration());\n\n    _super.prototype.updateOptions.call(this, this._overwriteOptions);\n  };\n\n  EmbeddedCodeEditorWidget.prototype.updateOptions = function (newOptions) {\n    objects.mixin(this._overwriteOptions, newOptions, true);\n\n    _super.prototype.updateOptions.call(this, this._overwriteOptions);\n  };\n\n  EmbeddedCodeEditorWidget = __decorate([__param(3, IInstantiationService), __param(4, ICodeEditorService), __param(5, ICommandService), __param(6, IContextKeyService), __param(7, IThemeService), __param(8, INotificationService), __param(9, IAccessibilityService)], EmbeddedCodeEditorWidget);\n  return EmbeddedCodeEditorWidget;\n}(CodeEditorWidget);\n\nexport { EmbeddedCodeEditorWidget };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './zoneWidget.css';\nimport * as dom from '../../../base/browser/dom.js';\nimport { Sash } from '../../../base/browser/ui/sash/sash.js';\nimport { Color, RGBA } from '../../../base/common/color.js';\nimport { IdGenerator } from '../../../base/common/idGenerator.js';\nimport { dispose } from '../../../base/common/lifecycle.js';\nimport * as objects from '../../../base/common/objects.js';\nimport { Range } from '../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\nvar defaultColor = new Color(new RGBA(0, 122, 204));\nvar defaultOptions = {\n  showArrow: true,\n  showFrame: true,\n  className: '',\n  frameColor: defaultColor,\n  arrowColor: defaultColor,\n  keepEditorSelection: false\n};\nvar WIDGET_ID = 'vs.editor.contrib.zoneWidget';\n\nvar ViewZoneDelegate =\n/** @class */\nfunction () {\n  function ViewZoneDelegate(domNode, afterLineNumber, afterColumn, heightInLines, onDomNodeTop, onComputedHeight) {\n    this.domNode = domNode;\n    this.afterLineNumber = afterLineNumber;\n    this.afterColumn = afterColumn;\n    this.heightInLines = heightInLines;\n    this._onDomNodeTop = onDomNodeTop;\n    this._onComputedHeight = onComputedHeight;\n  }\n\n  ViewZoneDelegate.prototype.onDomNodeTop = function (top) {\n    this._onDomNodeTop(top);\n  };\n\n  ViewZoneDelegate.prototype.onComputedHeight = function (height) {\n    this._onComputedHeight(height);\n  };\n\n  return ViewZoneDelegate;\n}();\n\nexport { ViewZoneDelegate };\n\nvar OverlayWidgetDelegate =\n/** @class */\nfunction () {\n  function OverlayWidgetDelegate(id, domNode) {\n    this._id = id;\n    this._domNode = domNode;\n  }\n\n  OverlayWidgetDelegate.prototype.getId = function () {\n    return this._id;\n  };\n\n  OverlayWidgetDelegate.prototype.getDomNode = function () {\n    return this._domNode;\n  };\n\n  OverlayWidgetDelegate.prototype.getPosition = function () {\n    return null;\n  };\n\n  return OverlayWidgetDelegate;\n}();\n\nexport { OverlayWidgetDelegate };\n\nvar Arrow =\n/** @class */\nfunction () {\n  function Arrow(_editor) {\n    this._editor = _editor;\n    this._ruleName = Arrow._IdGenerator.nextId();\n    this._decorations = []; //\n  }\n\n  Arrow.prototype.dispose = function () {\n    this.hide();\n    dom.removeCSSRulesContainingSelector(this._ruleName);\n  };\n\n  Object.defineProperty(Arrow.prototype, \"color\", {\n    set: function set(value) {\n      if (this._color !== value) {\n        this._color = value;\n\n        this._updateStyle();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Arrow.prototype, \"height\", {\n    set: function set(value) {\n      if (this._height !== value) {\n        this._height = value;\n\n        this._updateStyle();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Arrow.prototype._updateStyle = function () {\n    dom.removeCSSRulesContainingSelector(this._ruleName);\n    dom.createCSSRule(\".monaco-editor \" + this._ruleName, \"border-style: solid; border-color: transparent; border-bottom-color: \" + this._color + \"; border-width: \" + this._height + \"px; bottom: -\" + this._height + \"px; margin-left: -\" + this._height + \"px; \");\n  };\n\n  Arrow.prototype.show = function (where) {\n    this._decorations = this._editor.deltaDecorations(this._decorations, [{\n      range: Range.fromPositions(where),\n      options: {\n        className: this._ruleName,\n        stickiness: 1\n        /* NeverGrowsWhenTypingAtEdges */\n\n      }\n    }]);\n  };\n\n  Arrow.prototype.hide = function () {\n    this._editor.deltaDecorations(this._decorations, []);\n  };\n\n  Arrow._IdGenerator = new IdGenerator('.arrow-decoration-');\n  return Arrow;\n}();\n\nvar ZoneWidget =\n/** @class */\nfunction () {\n  function ZoneWidget(editor, options) {\n    var _this = this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    this._positionMarkerId = [];\n    this._disposables = [];\n    this._isShowing = false;\n    this.editor = editor;\n    this.options = objects.deepClone(options);\n    objects.mixin(this.options, defaultOptions, false);\n    this.domNode = document.createElement('div');\n\n    if (!this.options.isAccessible) {\n      this.domNode.setAttribute('aria-hidden', 'true');\n      this.domNode.setAttribute('role', 'presentation');\n    }\n\n    this._disposables.push(this.editor.onDidLayoutChange(function (info) {\n      var width = _this._getWidth(info);\n\n      _this.domNode.style.width = width + 'px';\n      _this.domNode.style.left = _this._getLeft(info) + 'px';\n\n      _this._onWidth(width);\n    }));\n  }\n\n  ZoneWidget.prototype.dispose = function () {\n    var _this = this;\n\n    dispose(this._disposables);\n\n    if (this._overlayWidget) {\n      this.editor.removeOverlayWidget(this._overlayWidget);\n      this._overlayWidget = null;\n    }\n\n    if (this._viewZone) {\n      this.editor.changeViewZones(function (accessor) {\n        if (_this._viewZone) {\n          accessor.removeZone(_this._viewZone.id);\n        }\n\n        _this._viewZone = null;\n      });\n    }\n\n    this.editor.deltaDecorations(this._positionMarkerId, []);\n    this._positionMarkerId = [];\n  };\n\n  ZoneWidget.prototype.create = function () {\n    dom.addClass(this.domNode, 'zone-widget');\n\n    if (this.options.className) {\n      dom.addClass(this.domNode, this.options.className);\n    }\n\n    this.container = document.createElement('div');\n    dom.addClass(this.container, 'zone-widget-container');\n    this.domNode.appendChild(this.container);\n\n    if (this.options.showArrow) {\n      this._arrow = new Arrow(this.editor);\n\n      this._disposables.push(this._arrow);\n    }\n\n    this._fillContainer(this.container);\n\n    this._initSash();\n\n    this._applyStyles();\n  };\n\n  ZoneWidget.prototype.style = function (styles) {\n    if (styles.frameColor) {\n      this.options.frameColor = styles.frameColor;\n    }\n\n    if (styles.arrowColor) {\n      this.options.arrowColor = styles.arrowColor;\n    }\n\n    this._applyStyles();\n  };\n\n  ZoneWidget.prototype._applyStyles = function () {\n    if (this.container && this.options.frameColor) {\n      var frameColor = this.options.frameColor.toString();\n      this.container.style.borderTopColor = frameColor;\n      this.container.style.borderBottomColor = frameColor;\n    }\n\n    if (this._arrow && this.options.arrowColor) {\n      var arrowColor = this.options.arrowColor.toString();\n      this._arrow.color = arrowColor;\n    }\n  };\n\n  ZoneWidget.prototype._getWidth = function (info) {\n    return info.width - info.minimapWidth - info.verticalScrollbarWidth;\n  };\n\n  ZoneWidget.prototype._getLeft = function (info) {\n    // If minimap is to the left, we move beyond it\n    if (info.minimapWidth > 0 && info.minimapLeft === 0) {\n      return info.minimapWidth;\n    }\n\n    return 0;\n  };\n\n  ZoneWidget.prototype._onViewZoneTop = function (top) {\n    this.domNode.style.top = top + 'px';\n  };\n\n  ZoneWidget.prototype._onViewZoneHeight = function (height) {\n    this.domNode.style.height = height + \"px\";\n\n    var containerHeight = height - this._decoratingElementsHeight();\n\n    this.container.style.height = containerHeight + \"px\";\n    var layoutInfo = this.editor.getLayoutInfo();\n\n    this._doLayout(containerHeight, this._getWidth(layoutInfo));\n\n    this._resizeSash.layout();\n  };\n\n  Object.defineProperty(ZoneWidget.prototype, \"position\", {\n    get: function get() {\n      var id = this._positionMarkerId[0];\n\n      if (!id) {\n        return undefined;\n      }\n\n      var model = this.editor.getModel();\n\n      if (!model) {\n        return undefined;\n      }\n\n      var range = model.getDecorationRange(id);\n\n      if (!range) {\n        return undefined;\n      }\n\n      return range.getStartPosition();\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ZoneWidget.prototype.show = function (rangeOrPos, heightInLines) {\n    var range = Range.isIRange(rangeOrPos) ? rangeOrPos : new Range(rangeOrPos.lineNumber, rangeOrPos.column, rangeOrPos.lineNumber, rangeOrPos.column);\n    this._isShowing = true;\n\n    this._showImpl(range, heightInLines);\n\n    this._isShowing = false;\n    this._positionMarkerId = this.editor.deltaDecorations(this._positionMarkerId, [{\n      range: range,\n      options: ModelDecorationOptions.EMPTY\n    }]);\n  };\n\n  ZoneWidget.prototype.hide = function () {\n    var _this = this;\n\n    if (this._viewZone) {\n      this.editor.changeViewZones(function (accessor) {\n        if (_this._viewZone) {\n          accessor.removeZone(_this._viewZone.id);\n        }\n      });\n      this._viewZone = null;\n    }\n\n    if (this._overlayWidget) {\n      this.editor.removeOverlayWidget(this._overlayWidget);\n      this._overlayWidget = null;\n    }\n\n    if (this._arrow) {\n      this._arrow.hide();\n    }\n  };\n\n  ZoneWidget.prototype._decoratingElementsHeight = function () {\n    var lineHeight = this.editor.getConfiguration().lineHeight;\n    var result = 0;\n\n    if (this.options.showArrow) {\n      var arrowHeight = Math.round(lineHeight / 3);\n      result += 2 * arrowHeight;\n    }\n\n    if (this.options.showFrame) {\n      var frameThickness = Math.round(lineHeight / 9);\n      result += 2 * frameThickness;\n    }\n\n    return result;\n  };\n\n  ZoneWidget.prototype._showImpl = function (where, heightInLines) {\n    var _this = this;\n\n    var position = {\n      lineNumber: where.startLineNumber,\n      column: where.startColumn\n    };\n    var layoutInfo = this.editor.getLayoutInfo();\n\n    var width = this._getWidth(layoutInfo);\n\n    this.domNode.style.width = width + \"px\";\n    this.domNode.style.left = this._getLeft(layoutInfo) + 'px'; // Render the widget as zone (rendering) and widget (lifecycle)\n\n    var viewZoneDomNode = document.createElement('div');\n    viewZoneDomNode.style.overflow = 'hidden';\n    var lineHeight = this.editor.getConfiguration().lineHeight; // adjust heightInLines to viewport\n\n    var maxHeightInLines = this.editor.getLayoutInfo().height / lineHeight * 0.8;\n\n    if (heightInLines >= maxHeightInLines) {\n      heightInLines = maxHeightInLines;\n    }\n\n    var arrowHeight = 0;\n    var frameThickness = 0; // Render the arrow one 1/3 of an editor line height\n\n    if (this.options.showArrow) {\n      arrowHeight = Math.round(lineHeight / 3);\n      this._arrow.height = arrowHeight;\n\n      this._arrow.show(position);\n    } // Render the frame as 1/9 of an editor line height\n\n\n    if (this.options.showFrame) {\n      frameThickness = Math.round(lineHeight / 9);\n    } // insert zone widget\n\n\n    this.editor.changeViewZones(function (accessor) {\n      if (_this._viewZone) {\n        accessor.removeZone(_this._viewZone.id);\n      }\n\n      if (_this._overlayWidget) {\n        _this.editor.removeOverlayWidget(_this._overlayWidget);\n\n        _this._overlayWidget = null;\n      }\n\n      _this.domNode.style.top = '-1000px';\n      _this._viewZone = new ViewZoneDelegate(viewZoneDomNode, position.lineNumber, position.column, heightInLines, function (top) {\n        return _this._onViewZoneTop(top);\n      }, function (height) {\n        return _this._onViewZoneHeight(height);\n      });\n      _this._viewZone.id = accessor.addZone(_this._viewZone);\n      _this._overlayWidget = new OverlayWidgetDelegate(WIDGET_ID + _this._viewZone.id, _this.domNode);\n\n      _this.editor.addOverlayWidget(_this._overlayWidget);\n    });\n\n    if (this.options.showFrame) {\n      var width_1 = this.options.frameWidth ? this.options.frameWidth : frameThickness;\n      this.container.style.borderTopWidth = width_1 + 'px';\n      this.container.style.borderBottomWidth = width_1 + 'px';\n    }\n\n    var containerHeight = heightInLines * lineHeight - this._decoratingElementsHeight();\n\n    this.container.style.top = arrowHeight + 'px';\n    this.container.style.height = containerHeight + 'px';\n    this.container.style.overflow = 'hidden';\n\n    this._doLayout(containerHeight, width);\n\n    if (!this.options.keepEditorSelection) {\n      this.editor.setSelection(where);\n    }\n\n    var model = this.editor.getModel();\n\n    if (model) {\n      // Reveal the line above or below the zone widget, to get the zone widget in the viewport\n      var revealLineNumber = Math.min(model.getLineCount(), Math.max(1, where.endLineNumber + 1));\n      this.revealLine(revealLineNumber);\n    }\n  };\n\n  ZoneWidget.prototype.revealLine = function (lineNumber) {\n    this.editor.revealLine(lineNumber, 0\n    /* Smooth */\n    );\n  };\n\n  ZoneWidget.prototype.setCssClass = function (className, classToReplace) {\n    if (classToReplace) {\n      this.container.classList.remove(classToReplace);\n    }\n\n    dom.addClass(this.container, className);\n  };\n\n  ZoneWidget.prototype._onWidth = function (widthInPixel) {// implement in subclass\n  };\n\n  ZoneWidget.prototype._doLayout = function (heightInPixel, widthInPixel) {// implement in subclass\n  };\n\n  ZoneWidget.prototype._relayout = function (newHeightInLines) {\n    var _this = this;\n\n    if (this._viewZone && this._viewZone.heightInLines !== newHeightInLines) {\n      this.editor.changeViewZones(function (accessor) {\n        if (_this._viewZone) {\n          _this._viewZone.heightInLines = newHeightInLines;\n          accessor.layoutZone(_this._viewZone.id);\n        }\n      });\n    }\n  }; // --- sash\n\n\n  ZoneWidget.prototype._initSash = function () {\n    var _this = this;\n\n    this._resizeSash = new Sash(this.domNode, this, {\n      orientation: 1\n      /* HORIZONTAL */\n\n    });\n\n    if (!this.options.isResizeable) {\n      this._resizeSash.hide();\n\n      this._resizeSash.state = 0\n      /* Disabled */\n      ;\n    }\n\n    var data;\n\n    this._disposables.push(this._resizeSash.onDidStart(function (e) {\n      if (_this._viewZone) {\n        data = {\n          startY: e.startY,\n          heightInLines: _this._viewZone.heightInLines\n        };\n      }\n    }));\n\n    this._disposables.push(this._resizeSash.onDidEnd(function () {\n      data = undefined;\n    }));\n\n    this._disposables.push(this._resizeSash.onDidChange(function (evt) {\n      if (data) {\n        var lineDelta = (evt.currentY - data.startY) / _this.editor.getConfiguration().lineHeight;\n\n        var roundedLineDelta = lineDelta < 0 ? Math.ceil(lineDelta) : Math.floor(lineDelta);\n        var newHeightInLines = data.heightInLines + roundedLineDelta;\n\n        if (newHeightInLines > 5 && newHeightInLines < 35) {\n          _this._relayout(newHeightInLines);\n        }\n      }\n    }));\n  };\n\n  ZoneWidget.prototype.getHorizontalSashLeft = function () {\n    return 0;\n  };\n\n  ZoneWidget.prototype.getHorizontalSashTop = function () {\n    return (this.domNode.style.height === null ? 0 : parseInt(this.domNode.style.height)) - this._decoratingElementsHeight() / 2;\n  };\n\n  ZoneWidget.prototype.getHorizontalSashWidth = function () {\n    var layoutInfo = this.editor.getLayoutInfo();\n    return layoutInfo.width - layoutInfo.minimapWidth;\n  };\n\n  return ZoneWidget;\n}();\n\nexport { ZoneWidget };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { localize } from '../../../nls.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { basename } from '../../../base/common/resources.js';\nimport { dispose } from '../../../base/common/lifecycle.js';\nimport * as strings from '../../../base/common/strings.js';\nimport { defaultGenerator } from '../../../base/common/idGenerator.js';\nimport { Range } from '../../common/core/range.js';\n\nvar OneReference =\n/** @class */\nfunction () {\n  function OneReference(parent, _range, isProviderFirst) {\n    this.parent = parent;\n    this._range = _range;\n    this.isProviderFirst = isProviderFirst;\n    this._onRefChanged = new Emitter();\n    this.onRefChanged = this._onRefChanged.event;\n    this.id = defaultGenerator.nextId();\n  }\n\n  Object.defineProperty(OneReference.prototype, \"uri\", {\n    get: function get() {\n      return this.parent.uri;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(OneReference.prototype, \"range\", {\n    get: function get() {\n      return this._range;\n    },\n    set: function set(value) {\n      this._range = value;\n\n      this._onRefChanged.fire(this);\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  OneReference.prototype.getAriaMessage = function () {\n    return localize('aria.oneReference', \"symbol in {0} on line {1} at column {2}\", basename(this.uri), this.range.startLineNumber, this.range.startColumn);\n  };\n\n  return OneReference;\n}();\n\nexport { OneReference };\n\nvar FilePreview =\n/** @class */\nfunction () {\n  function FilePreview(_modelReference) {\n    this._modelReference = _modelReference;\n  }\n\n  FilePreview.prototype.dispose = function () {\n    dispose(this._modelReference);\n  };\n\n  FilePreview.prototype.preview = function (range, n) {\n    if (n === void 0) {\n      n = 8;\n    }\n\n    var model = this._modelReference.object.textEditorModel;\n\n    if (!model) {\n      return undefined;\n    }\n\n    var startLineNumber = range.startLineNumber,\n        startColumn = range.startColumn,\n        endLineNumber = range.endLineNumber,\n        endColumn = range.endColumn;\n    var word = model.getWordUntilPosition({\n      lineNumber: startLineNumber,\n      column: startColumn - n\n    });\n    var beforeRange = new Range(startLineNumber, word.startColumn, startLineNumber, startColumn);\n    var afterRange = new Range(endLineNumber, endColumn, endLineNumber, Number.MAX_VALUE);\n    var ret = {\n      before: model.getValueInRange(beforeRange).replace(/^\\s+/, strings.empty),\n      inside: model.getValueInRange(range),\n      after: model.getValueInRange(afterRange).replace(/\\s+$/, strings.empty)\n    };\n    return ret;\n  };\n\n  return FilePreview;\n}();\n\nexport { FilePreview };\n\nvar FileReferences =\n/** @class */\nfunction () {\n  function FileReferences(_parent, _uri) {\n    this._parent = _parent;\n    this._uri = _uri;\n    this._children = [];\n  }\n\n  Object.defineProperty(FileReferences.prototype, \"id\", {\n    get: function get() {\n      return this._uri.toString();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FileReferences.prototype, \"parent\", {\n    get: function get() {\n      return this._parent;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FileReferences.prototype, \"children\", {\n    get: function get() {\n      return this._children;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FileReferences.prototype, \"uri\", {\n    get: function get() {\n      return this._uri;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FileReferences.prototype, \"preview\", {\n    get: function get() {\n      return this._preview;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FileReferences.prototype, \"failure\", {\n    get: function get() {\n      return this._loadFailure;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  FileReferences.prototype.getAriaMessage = function () {\n    var len = this.children.length;\n\n    if (len === 1) {\n      return localize('aria.fileReferences.1', \"1 symbol in {0}, full path {1}\", basename(this.uri), this.uri.fsPath);\n    } else {\n      return localize('aria.fileReferences.N', \"{0} symbols in {1}, full path {2}\", len, basename(this.uri), this.uri.fsPath);\n    }\n  };\n\n  FileReferences.prototype.resolve = function (textModelResolverService) {\n    var _this = this;\n\n    if (this._resolved) {\n      return Promise.resolve(this);\n    }\n\n    return Promise.resolve(textModelResolverService.createModelReference(this._uri).then(function (modelReference) {\n      var model = modelReference.object;\n\n      if (!model) {\n        modelReference.dispose();\n        throw new Error();\n      }\n\n      _this._preview = new FilePreview(modelReference);\n      _this._resolved = true;\n      return _this;\n    }, function (err) {\n      // something wrong here\n      _this._children = [];\n      _this._resolved = true;\n      _this._loadFailure = err;\n      return _this;\n    }));\n  };\n\n  FileReferences.prototype.dispose = function () {\n    if (this._preview) {\n      this._preview.dispose();\n\n      this._preview = undefined;\n    }\n  };\n\n  return FileReferences;\n}();\n\nexport { FileReferences };\n\nvar ReferencesModel =\n/** @class */\nfunction () {\n  function ReferencesModel(references) {\n    var _this = this;\n\n    this.groups = [];\n    this.references = [];\n    this._onDidChangeReferenceRange = new Emitter();\n    this.onDidChangeReferenceRange = this._onDidChangeReferenceRange.event;\n    this._disposables = []; // grouping and sorting\n\n    var providersFirst = references[0];\n    references.sort(ReferencesModel._compareReferences);\n    var current;\n\n    for (var _i = 0, references_1 = references; _i < references_1.length; _i++) {\n      var ref = references_1[_i];\n\n      if (!current || current.uri.toString() !== ref.uri.toString()) {\n        // new group\n        current = new FileReferences(this, ref.uri);\n        this.groups.push(current);\n      } // append, check for equality first!\n\n\n      if (current.children.length === 0 || !Range.equalsRange(ref.range, current.children[current.children.length - 1].range)) {\n        var oneRef = new OneReference(current, ref.targetSelectionRange || ref.range, providersFirst === ref);\n\n        this._disposables.push(oneRef.onRefChanged(function (e) {\n          return _this._onDidChangeReferenceRange.fire(e);\n        }));\n\n        this.references.push(oneRef);\n        current.children.push(oneRef);\n      }\n    }\n  }\n\n  Object.defineProperty(ReferencesModel.prototype, \"empty\", {\n    get: function get() {\n      return this.groups.length === 0;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ReferencesModel.prototype.getAriaMessage = function () {\n    if (this.empty) {\n      return localize('aria.result.0', \"No results found\");\n    } else if (this.references.length === 1) {\n      return localize('aria.result.1', \"Found 1 symbol in {0}\", this.references[0].uri.fsPath);\n    } else if (this.groups.length === 1) {\n      return localize('aria.result.n1', \"Found {0} symbols in {1}\", this.references.length, this.groups[0].uri.fsPath);\n    } else {\n      return localize('aria.result.nm', \"Found {0} symbols in {1} files\", this.references.length, this.groups.length);\n    }\n  };\n\n  ReferencesModel.prototype.nextOrPreviousReference = function (reference, next) {\n    var parent = reference.parent;\n    var idx = parent.children.indexOf(reference);\n    var childCount = parent.children.length;\n    var groupCount = parent.parent.groups.length;\n\n    if (groupCount === 1 || next && idx + 1 < childCount || !next && idx > 0) {\n      // cycling within one file\n      if (next) {\n        idx = (idx + 1) % childCount;\n      } else {\n        idx = (idx + childCount - 1) % childCount;\n      }\n\n      return parent.children[idx];\n    }\n\n    idx = parent.parent.groups.indexOf(parent);\n\n    if (next) {\n      idx = (idx + 1) % groupCount;\n      return parent.parent.groups[idx].children[0];\n    } else {\n      idx = (idx + groupCount - 1) % groupCount;\n      return parent.parent.groups[idx].children[parent.parent.groups[idx].children.length - 1];\n    }\n  };\n\n  ReferencesModel.prototype.nearestReference = function (resource, position) {\n    var nearest = this.references.map(function (ref, idx) {\n      return {\n        idx: idx,\n        prefixLen: strings.commonPrefixLength(ref.uri.toString(), resource.toString()),\n        offsetDist: Math.abs(ref.range.startLineNumber - position.lineNumber) * 100 + Math.abs(ref.range.startColumn - position.column)\n      };\n    }).sort(function (a, b) {\n      if (a.prefixLen > b.prefixLen) {\n        return -1;\n      } else if (a.prefixLen < b.prefixLen) {\n        return 1;\n      } else if (a.offsetDist < b.offsetDist) {\n        return -1;\n      } else if (a.offsetDist > b.offsetDist) {\n        return 1;\n      } else {\n        return 0;\n      }\n    })[0];\n\n    if (nearest) {\n      return this.references[nearest.idx];\n    }\n\n    return undefined;\n  };\n\n  ReferencesModel.prototype.firstReference = function () {\n    for (var _i = 0, _a = this.references; _i < _a.length; _i++) {\n      var ref = _a[_i];\n\n      if (ref.isProviderFirst) {\n        return ref;\n      }\n    }\n\n    return this.references[0];\n  };\n\n  ReferencesModel.prototype.dispose = function () {\n    dispose(this.groups);\n    dispose(this._disposables);\n    this.groups.length = 0;\n    this._disposables.length = 0;\n  };\n\n  ReferencesModel._compareReferences = function (a, b) {\n    var auri = a.uri.toString();\n    var buri = b.uri.toString();\n\n    if (auri < buri) {\n      return -1;\n    } else if (auri > buri) {\n      return 1;\n    } else {\n      return Range.compareRangesUsingStarts(a.range, b.range);\n    }\n  };\n\n  return ReferencesModel;\n}();\n\nexport { ReferencesModel };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { escape } from '../../../common/strings.js';\nexport function renderOcticons(text) {\n  return escape(text);\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as objects from '../../../common/objects.js';\nimport { renderOcticons } from '../octiconLabel/octiconLabel.js';\nimport { escape } from '../../../common/strings.js';\n\nvar HighlightedLabel =\n/** @class */\nfunction () {\n  function HighlightedLabel(container, supportOcticons) {\n    this.supportOcticons = supportOcticons;\n    this.domNode = document.createElement('span');\n    this.domNode.className = 'monaco-highlighted-label';\n    this.didEverRender = false;\n    container.appendChild(this.domNode);\n  }\n\n  Object.defineProperty(HighlightedLabel.prototype, \"element\", {\n    get: function get() {\n      return this.domNode;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  HighlightedLabel.prototype.set = function (text, highlights, title, escapeNewLines) {\n    if (highlights === void 0) {\n      highlights = [];\n    }\n\n    if (title === void 0) {\n      title = '';\n    }\n\n    if (!text) {\n      text = '';\n    }\n\n    if (escapeNewLines) {\n      // adjusts highlights inplace\n      text = HighlightedLabel.escapeNewLines(text, highlights);\n    }\n\n    if (this.didEverRender && this.text === text && this.title === title && objects.equals(this.highlights, highlights)) {\n      return;\n    }\n\n    if (!Array.isArray(highlights)) {\n      highlights = [];\n    }\n\n    this.text = text;\n    this.title = title;\n    this.highlights = highlights;\n    this.render();\n  };\n\n  HighlightedLabel.prototype.render = function () {\n    var htmlContent = '';\n    var pos = 0;\n\n    for (var _i = 0, _a = this.highlights; _i < _a.length; _i++) {\n      var highlight = _a[_i];\n\n      if (highlight.end === highlight.start) {\n        continue;\n      }\n\n      if (pos < highlight.start) {\n        htmlContent += '<span>';\n        var substring_1 = this.text.substring(pos, highlight.start);\n        htmlContent += this.supportOcticons ? renderOcticons(substring_1) : escape(substring_1);\n        htmlContent += '</span>';\n        pos = highlight.end;\n      }\n\n      htmlContent += '<span class=\"highlight\">';\n      var substring = this.text.substring(highlight.start, highlight.end);\n      htmlContent += this.supportOcticons ? renderOcticons(substring) : escape(substring);\n      htmlContent += '</span>';\n      pos = highlight.end;\n    }\n\n    if (pos < this.text.length) {\n      htmlContent += '<span>';\n      var substring = this.text.substring(pos);\n      htmlContent += this.supportOcticons ? renderOcticons(substring) : escape(substring);\n      htmlContent += '</span>';\n    }\n\n    this.domNode.innerHTML = htmlContent;\n    this.domNode.title = this.title;\n    this.didEverRender = true;\n  };\n\n  HighlightedLabel.escapeNewLines = function (text, highlights) {\n    var total = 0;\n    var extra = 0;\n    return text.replace(/\\r\\n|\\r|\\n/g, function (match, offset) {\n      extra = match === '\\r\\n' ? -1 : 0;\n      offset += total;\n\n      for (var _i = 0, highlights_1 = highlights; _i < highlights_1.length; _i++) {\n        var highlight = highlights_1[_i];\n\n        if (highlight.end <= offset) {\n          continue;\n        }\n\n        if (highlight.start >= offset) {\n          highlight.start += extra;\n        }\n\n        if (highlight.end >= offset) {\n          highlight.end += extra;\n        }\n      }\n\n      total += extra;\n      return \"\\u23CE\";\n    });\n  };\n\n  return HighlightedLabel;\n}();\n\nexport { HighlightedLabel };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport './iconlabel.css';\nimport * as dom from '../../dom.js';\nimport { HighlightedLabel } from '../highlightedlabel/highlightedLabel.js';\nimport { Disposable } from '../../../common/lifecycle.js';\n\nvar FastLabelNode =\n/** @class */\nfunction () {\n  function FastLabelNode(_element) {\n    this._element = _element;\n  }\n\n  Object.defineProperty(FastLabelNode.prototype, \"element\", {\n    get: function get() {\n      return this._element;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FastLabelNode.prototype, \"textContent\", {\n    set: function set(content) {\n      if (this.disposed || content === this._textContent) {\n        return;\n      }\n\n      this._textContent = content;\n      this._element.textContent = content;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FastLabelNode.prototype, \"className\", {\n    set: function set(className) {\n      if (this.disposed || className === this._className) {\n        return;\n      }\n\n      this._className = className;\n      this._element.className = className;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FastLabelNode.prototype, \"title\", {\n    set: function set(title) {\n      if (this.disposed || title === this._title) {\n        return;\n      }\n\n      this._title = title;\n\n      if (this._title) {\n        this._element.title = title;\n      } else {\n        this._element.removeAttribute('title');\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FastLabelNode.prototype, \"empty\", {\n    set: function set(empty) {\n      if (this.disposed || empty === this._empty) {\n        return;\n      }\n\n      this._empty = empty;\n      this._element.style.marginLeft = empty ? '0' : null;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  FastLabelNode.prototype.dispose = function () {\n    this.disposed = true;\n  };\n\n  return FastLabelNode;\n}();\n\nvar IconLabel =\n/** @class */\nfunction (_super) {\n  __extends(IconLabel, _super);\n\n  function IconLabel(container, options) {\n    var _this = _super.call(this) || this;\n\n    _this.domNode = _this._register(new FastLabelNode(dom.append(container, dom.$('.monaco-icon-label'))));\n    _this.labelDescriptionContainer = _this._register(new FastLabelNode(dom.append(_this.domNode.element, dom.$('.monaco-icon-label-description-container'))));\n\n    if (options && options.supportHighlights) {\n      _this.labelNode = new HighlightedLabel(dom.append(_this.labelDescriptionContainer.element, dom.$('a.label-name')), !options.donotSupportOcticons);\n    } else {\n      _this.labelNode = _this._register(new FastLabelNode(dom.append(_this.labelDescriptionContainer.element, dom.$('a.label-name'))));\n    }\n\n    if (options && options.supportDescriptionHighlights) {\n      _this.descriptionNodeFactory = function () {\n        return new HighlightedLabel(dom.append(_this.labelDescriptionContainer.element, dom.$('span.label-description')), !options.donotSupportOcticons);\n      };\n    } else {\n      _this.descriptionNodeFactory = function () {\n        return _this._register(new FastLabelNode(dom.append(_this.labelDescriptionContainer.element, dom.$('span.label-description'))));\n      };\n    }\n\n    return _this;\n  }\n\n  IconLabel.prototype.setLabel = function (label, description, options) {\n    var classes = ['monaco-icon-label'];\n\n    if (options) {\n      if (options.extraClasses) {\n        classes.push.apply(classes, options.extraClasses);\n      }\n\n      if (options.italic) {\n        classes.push('italic');\n      }\n    }\n\n    this.domNode.className = classes.join(' ');\n    this.domNode.title = options && options.title ? options.title : '';\n\n    if (this.labelNode instanceof HighlightedLabel) {\n      this.labelNode.set(label || '', options ? options.matches : undefined, options && options.title ? options.title : undefined, options && options.labelEscapeNewLines);\n    } else {\n      this.labelNode.textContent = label || '';\n    }\n\n    if (description || this.descriptionNode) {\n      if (!this.descriptionNode) {\n        this.descriptionNode = this.descriptionNodeFactory(); // description node is created lazily on demand\n      }\n\n      if (this.descriptionNode instanceof HighlightedLabel) {\n        this.descriptionNode.set(description || '', options ? options.descriptionMatches : undefined);\n\n        if (options && options.descriptionTitle) {\n          this.descriptionNode.element.title = options.descriptionTitle;\n        } else {\n          this.descriptionNode.element.removeAttribute('title');\n        }\n      } else {\n        this.descriptionNode.textContent = description || '';\n        this.descriptionNode.title = options && options.descriptionTitle ? options.descriptionTitle : '';\n        this.descriptionNode.empty = !description;\n      }\n    }\n  };\n\n  return IconLabel;\n}(Disposable);\n\nexport { IconLabel };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './countBadge.css';\nimport { $, append } from '../../dom.js';\nimport { format } from '../../../common/strings.js';\nimport { Color } from '../../../common/color.js';\nimport { mixin } from '../../../common/objects.js';\nvar defaultOpts = {\n  badgeBackground: Color.fromHex('#4D4D4D'),\n  badgeForeground: Color.fromHex('#FFFFFF')\n};\n\nvar CountBadge =\n/** @class */\nfunction () {\n  function CountBadge(container, options) {\n    this.options = options || Object.create(null);\n    mixin(this.options, defaultOpts, false);\n    this.badgeBackground = this.options.badgeBackground;\n    this.badgeForeground = this.options.badgeForeground;\n    this.badgeBorder = this.options.badgeBorder;\n    this.element = append(container, $('.monaco-count-badge'));\n    this.countFormat = this.options.countFormat || '{0}';\n    this.titleFormat = this.options.titleFormat || '';\n    this.setCount(this.options.count || 0);\n  }\n\n  CountBadge.prototype.setCount = function (count) {\n    this.count = count;\n    this.render();\n  };\n\n  CountBadge.prototype.setTitleFormat = function (titleFormat) {\n    this.titleFormat = titleFormat;\n    this.render();\n  };\n\n  CountBadge.prototype.render = function () {\n    this.element.textContent = format(this.countFormat, this.count);\n    this.element.title = format(this.titleFormat, this.count);\n    this.applyStyles();\n  };\n\n  CountBadge.prototype.style = function (styles) {\n    this.badgeBackground = styles.badgeBackground;\n    this.badgeForeground = styles.badgeForeground;\n    this.badgeBorder = styles.badgeBorder;\n    this.applyStyles();\n  };\n\n  CountBadge.prototype.applyStyles = function () {\n    if (this.element) {\n      var background = this.badgeBackground ? this.badgeBackground.toString() : null;\n      var foreground = this.badgeForeground ? this.badgeForeground.toString() : null;\n      var border = this.badgeBorder ? this.badgeBorder.toString() : null;\n      this.element.style.backgroundColor = background;\n      this.element.style.color = foreground;\n      this.element.style.borderWidth = border ? '1px' : null;\n      this.element.style.borderStyle = border ? 'solid' : null;\n      this.element.style.borderColor = border;\n    }\n  };\n\n  return CountBadge;\n}();\n\nexport { CountBadge };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { URI } from './uri.js';\nimport { posix, normalize } from './path.js';\nimport { startsWithIgnoreCase, rtrim, startsWith } from './strings.js';\nimport { Schemas } from './network.js';\nimport { isLinux, isWindows } from './platform.js';\nimport { isEqual, basename, relativePath } from './resources.js';\n/**\n * @deprecated use LabelService instead\n */\n\nexport function getPathLabel(resource, userHomeProvider, rootProvider) {\n  if (typeof resource === 'string') {\n    resource = URI.file(resource);\n  } // return early if we can resolve a relative path label from the root\n\n\n  if (rootProvider) {\n    var baseResource = rootProvider.getWorkspaceFolder(resource);\n\n    if (baseResource) {\n      var hasMultipleRoots = rootProvider.getWorkspace().folders.length > 1;\n      var pathLabel = void 0;\n\n      if (isEqual(baseResource.uri, resource)) {\n        pathLabel = ''; // no label if paths are identical\n      } else {\n        pathLabel = relativePath(baseResource.uri, resource);\n      }\n\n      if (hasMultipleRoots) {\n        var rootName = baseResource && baseResource.name ? baseResource.name : basename(baseResource.uri);\n        pathLabel = pathLabel ? rootName + ' • ' + pathLabel : rootName; // always show root basename if there are multiple\n      }\n\n      return pathLabel;\n    }\n  } // return if the resource is neither file:// nor untitled:// and no baseResource was provided\n\n\n  if (resource.scheme !== Schemas.file && resource.scheme !== Schemas.untitled) {\n    return resource.with({\n      query: null,\n      fragment: null\n    }).toString(true);\n  } // convert c:\\something => C:\\something\n\n\n  if (hasDriveLetter(resource.fsPath)) {\n    return normalize(normalizeDriveLetter(resource.fsPath));\n  } // normalize and tildify (macOS, Linux only)\n\n\n  var res = normalize(resource.fsPath);\n\n  if (!isWindows && userHomeProvider) {\n    res = tildify(res, userHomeProvider.userHome);\n  }\n\n  return res;\n}\nexport function getBaseLabel(resource) {\n  if (!resource) {\n    return undefined;\n  }\n\n  if (typeof resource === 'string') {\n    resource = URI.file(resource);\n  }\n\n  var base = basename(resource) || (resource.scheme === Schemas.file ? resource.fsPath : resource.path)\n  /* can be empty string if '/' is passed in */\n  ; // convert c: => C:\n\n  if (hasDriveLetter(base)) {\n    return normalizeDriveLetter(base);\n  }\n\n  return base;\n}\n\nfunction hasDriveLetter(path) {\n  return !!(isWindows && path && path[1] === ':');\n}\n\nexport function normalizeDriveLetter(path) {\n  if (hasDriveLetter(path)) {\n    return path.charAt(0).toUpperCase() + path.slice(1);\n  }\n\n  return path;\n}\nvar normalizedUserHomeCached = Object.create(null);\nexport function tildify(path, userHome) {\n  if (isWindows || !path || !userHome) {\n    return path; // unsupported\n  } // Keep a normalized user home path as cache to prevent accumulated string creation\n\n\n  var normalizedUserHome = normalizedUserHomeCached.original === userHome ? normalizedUserHomeCached.normalized : undefined;\n\n  if (!normalizedUserHome) {\n    normalizedUserHome = \"\" + rtrim(userHome, posix.sep) + posix.sep;\n    normalizedUserHomeCached = {\n      original: userHome,\n      normalized: normalizedUserHome\n    };\n  } // Linux: case sensitive, macOS: case insensitive\n\n\n  if (isLinux ? startsWith(path, normalizedUserHome) : startsWithIgnoreCase(path, normalizedUserHome)) {\n    path = \"~/\" + path.substr(normalizedUserHome.length);\n  }\n\n  return path;\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport './splitview.css';\nimport { combinedDisposable, toDisposable, Disposable } from '../../../common/lifecycle.js';\nimport { Event, Emitter } from '../../../common/event.js';\nimport * as types from '../../../common/types.js';\nimport * as dom from '../../dom.js';\nimport { clamp } from '../../../common/numbers.js';\nimport { range, firstIndex, pushToStart, pushToEnd } from '../../../common/arrays.js';\nimport { Sash } from '../sash/sash.js';\nimport { Color } from '../../../common/color.js';\nimport { domEvent } from '../../event.js';\nvar defaultStyles = {\n  separatorBorder: Color.transparent\n};\nvar State;\n\n(function (State) {\n  State[State[\"Idle\"] = 0] = \"Idle\";\n  State[State[\"Busy\"] = 1] = \"Busy\";\n})(State || (State = {}));\n\nexport var Sizing;\n\n(function (Sizing) {\n  Sizing.Distribute = {\n    type: 'distribute'\n  };\n\n  function Split(index) {\n    return {\n      type: 'split',\n      index: index\n    };\n  }\n\n  Sizing.Split = Split;\n})(Sizing || (Sizing = {}));\n\nvar SplitView =\n/** @class */\nfunction (_super) {\n  __extends(SplitView, _super);\n\n  function SplitView(container, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var _this = _super.call(this) || this;\n\n    _this.size = 0;\n    _this.contentSize = 0;\n    _this.proportions = undefined;\n    _this.viewItems = [];\n    _this.sashItems = [];\n    _this.state = State.Idle;\n    _this._onDidSashChange = _this._register(new Emitter());\n    _this.onDidSashChange = _this._onDidSashChange.event;\n    _this._onDidSashReset = _this._register(new Emitter());\n    _this.orientation = types.isUndefined(options.orientation) ? 0\n    /* VERTICAL */\n    : options.orientation;\n    _this.inverseAltBehavior = !!options.inverseAltBehavior;\n    _this.proportionalLayout = types.isUndefined(options.proportionalLayout) ? true : !!options.proportionalLayout;\n    _this.el = document.createElement('div');\n    dom.addClass(_this.el, 'monaco-split-view2');\n    dom.addClass(_this.el, _this.orientation === 0\n    /* VERTICAL */\n    ? 'vertical' : 'horizontal');\n    container.appendChild(_this.el);\n    _this.sashContainer = dom.append(_this.el, dom.$('.sash-container'));\n    _this.viewContainer = dom.append(_this.el, dom.$('.split-view-container'));\n\n    _this.style(options.styles || defaultStyles);\n\n    return _this;\n  }\n\n  Object.defineProperty(SplitView.prototype, \"orthogonalStartSash\", {\n    get: function get() {\n      return this._orthogonalStartSash;\n    },\n    set: function set(sash) {\n      for (var _i = 0, _a = this.sashItems; _i < _a.length; _i++) {\n        var sashItem = _a[_i];\n        sashItem.sash.orthogonalStartSash = sash;\n      }\n\n      this._orthogonalStartSash = sash;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(SplitView.prototype, \"orthogonalEndSash\", {\n    get: function get() {\n      return this._orthogonalEndSash;\n    },\n    set: function set(sash) {\n      for (var _i = 0, _a = this.sashItems; _i < _a.length; _i++) {\n        var sashItem = _a[_i];\n        sashItem.sash.orthogonalEndSash = sash;\n      }\n\n      this._orthogonalEndSash = sash;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  SplitView.prototype.style = function (styles) {\n    if (styles.separatorBorder.isTransparent()) {\n      dom.removeClass(this.el, 'separator-border');\n      this.el.style.removeProperty('--separator-border');\n    } else {\n      dom.addClass(this.el, 'separator-border');\n      this.el.style.setProperty('--separator-border', styles.separatorBorder.toString());\n    }\n  };\n\n  SplitView.prototype.addView = function (view, size, index) {\n    var _this = this;\n\n    if (index === void 0) {\n      index = this.viewItems.length;\n    }\n\n    if (this.state !== State.Idle) {\n      throw new Error('Cant modify splitview');\n    }\n\n    this.state = State.Busy; // Add view\n\n    var container = dom.$('.split-view-view');\n\n    if (index === this.viewItems.length) {\n      this.viewContainer.appendChild(container);\n    } else {\n      this.viewContainer.insertBefore(container, this.viewContainer.children.item(index));\n    }\n\n    var onChangeDisposable = view.onDidChange(function (size) {\n      return _this.onViewChange(item, size);\n    });\n    var containerDisposable = toDisposable(function () {\n      return _this.viewContainer.removeChild(container);\n    });\n    var disposable = combinedDisposable([onChangeDisposable, containerDisposable]);\n    var layoutContainer = this.orientation === 0\n    /* VERTICAL */\n    ? function () {\n      return item.container.style.height = item.size + \"px\";\n    } : function () {\n      return item.container.style.width = item.size + \"px\";\n    };\n\n    var layout = function layout() {\n      layoutContainer();\n      item.view.layout(item.size, _this.orientation);\n    };\n\n    var viewSize;\n\n    if (typeof size === 'number') {\n      viewSize = size;\n    } else if (size.type === 'split') {\n      viewSize = this.getViewSize(size.index) / 2;\n    } else {\n      viewSize = view.minimumSize;\n    }\n\n    var item = {\n      view: view,\n      container: container,\n      size: viewSize,\n      layout: layout,\n      disposable: disposable\n    };\n    this.viewItems.splice(index, 0, item); // Add sash\n\n    if (this.viewItems.length > 1) {\n      var orientation_1 = this.orientation === 0\n      /* VERTICAL */\n      ? 1\n      /* HORIZONTAL */\n      : 0\n      /* VERTICAL */\n      ;\n      var layoutProvider = this.orientation === 0\n      /* VERTICAL */\n      ? {\n        getHorizontalSashTop: function getHorizontalSashTop(sash) {\n          return _this.getSashPosition(sash);\n        }\n      } : {\n        getVerticalSashLeft: function getVerticalSashLeft(sash) {\n          return _this.getSashPosition(sash);\n        }\n      };\n      var sash_1 = new Sash(this.sashContainer, layoutProvider, {\n        orientation: orientation_1,\n        orthogonalStartSash: this.orthogonalStartSash,\n        orthogonalEndSash: this.orthogonalEndSash\n      });\n      var sashEventMapper = this.orientation === 0\n      /* VERTICAL */\n      ? function (e) {\n        return {\n          sash: sash_1,\n          start: e.startY,\n          current: e.currentY,\n          alt: e.altKey\n        };\n      } : function (e) {\n        return {\n          sash: sash_1,\n          start: e.startX,\n          current: e.currentX,\n          alt: e.altKey\n        };\n      };\n      var onStart = Event.map(sash_1.onDidStart, sashEventMapper);\n      var onStartDisposable = onStart(this.onSashStart, this);\n      var onChange = Event.map(sash_1.onDidChange, sashEventMapper);\n      var onChangeDisposable_1 = onChange(this.onSashChange, this);\n      var onEnd = Event.map(sash_1.onDidEnd, function () {\n        return firstIndex(_this.sashItems, function (item) {\n          return item.sash === sash_1;\n        });\n      });\n      var onEndDisposable = onEnd(this.onSashEnd, this);\n      var onDidResetDisposable = sash_1.onDidReset(function () {\n        return _this._onDidSashReset.fire(firstIndex(_this.sashItems, function (item) {\n          return item.sash === sash_1;\n        }));\n      });\n      var disposable_1 = combinedDisposable([onStartDisposable, onChangeDisposable_1, onEndDisposable, onDidResetDisposable, sash_1]);\n      var sashItem = {\n        sash: sash_1,\n        disposable: disposable_1\n      };\n      this.sashItems.splice(index - 1, 0, sashItem);\n    }\n\n    container.appendChild(view.element);\n    var highPriorityIndex;\n\n    if (typeof size !== 'number' && size.type === 'split') {\n      highPriorityIndex = size.index;\n    }\n\n    this.relayout(index, highPriorityIndex);\n    this.state = State.Idle;\n\n    if (typeof size !== 'number' && size.type === 'distribute') {\n      this.distributeViewSizes();\n    }\n  };\n\n  SplitView.prototype.relayout = function (lowPriorityIndex, highPriorityIndex) {\n    var contentSize = this.viewItems.reduce(function (r, i) {\n      return r + i.size;\n    }, 0);\n    var lowPriorityIndexes = typeof lowPriorityIndex === 'number' ? [lowPriorityIndex] : undefined;\n    var highPriorityIndexes = typeof highPriorityIndex === 'number' ? [highPriorityIndex] : undefined;\n    this.resize(this.viewItems.length - 1, this.size - contentSize, undefined, lowPriorityIndexes, highPriorityIndexes);\n    this.distributeEmptySpace();\n    this.layoutViews();\n    this.saveProportions();\n  };\n\n  SplitView.prototype.layout = function (size) {\n    var _this = this;\n\n    var previousSize = Math.max(this.size, this.contentSize);\n    this.size = size;\n\n    if (!this.proportions) {\n      var indexes = range(this.viewItems.length);\n      var lowPriorityIndexes = indexes.filter(function (i) {\n        return _this.viewItems[i].view.priority === 1\n        /* Low */\n        ;\n      });\n      var highPriorityIndexes = indexes.filter(function (i) {\n        return _this.viewItems[i].view.priority === 2\n        /* High */\n        ;\n      });\n      this.resize(this.viewItems.length - 1, size - previousSize, undefined, lowPriorityIndexes, highPriorityIndexes);\n    } else {\n      for (var i = 0; i < this.viewItems.length; i++) {\n        var item = this.viewItems[i];\n        item.size = clamp(Math.round(this.proportions[i] * size), item.view.minimumSize, item.view.maximumSize);\n      }\n    }\n\n    this.distributeEmptySpace();\n    this.layoutViews();\n  };\n\n  SplitView.prototype.saveProportions = function () {\n    var _this = this;\n\n    if (this.proportionalLayout && this.contentSize > 0) {\n      this.proportions = this.viewItems.map(function (i) {\n        return i.size / _this.contentSize;\n      });\n    }\n  };\n\n  SplitView.prototype.onSashStart = function (_a) {\n    var _this = this;\n\n    var sash = _a.sash,\n        start = _a.start,\n        alt = _a.alt;\n    var index = firstIndex(this.sashItems, function (item) {\n      return item.sash === sash;\n    }); // This way, we can press Alt while we resize a sash, macOS style!\n\n    var disposable = combinedDisposable([domEvent(document.body, 'keydown')(function (e) {\n      return resetSashDragState(_this.sashDragState.current, e.altKey);\n    }), domEvent(document.body, 'keyup')(function () {\n      return resetSashDragState(_this.sashDragState.current, false);\n    })]);\n\n    var resetSashDragState = function resetSashDragState(start, alt) {\n      var sizes = _this.viewItems.map(function (i) {\n        return i.size;\n      });\n\n      var minDelta = Number.NEGATIVE_INFINITY;\n      var maxDelta = Number.POSITIVE_INFINITY;\n\n      if (_this.inverseAltBehavior) {\n        alt = !alt;\n      }\n\n      if (alt) {\n        // When we're using the last sash with Alt, we're resizing\n        // the view to the left/up, instead of right/down as usual\n        // Thus, we must do the inverse of the usual\n        var isLastSash = index === _this.sashItems.length - 1;\n\n        if (isLastSash) {\n          var viewItem = _this.viewItems[index];\n          minDelta = (viewItem.view.minimumSize - viewItem.size) / 2;\n          maxDelta = (viewItem.view.maximumSize - viewItem.size) / 2;\n        } else {\n          var viewItem = _this.viewItems[index + 1];\n          minDelta = (viewItem.size - viewItem.view.maximumSize) / 2;\n          maxDelta = (viewItem.size - viewItem.view.minimumSize) / 2;\n        }\n      }\n\n      _this.sashDragState = {\n        start: start,\n        current: start,\n        index: index,\n        sizes: sizes,\n        minDelta: minDelta,\n        maxDelta: maxDelta,\n        alt: alt,\n        disposable: disposable\n      };\n    };\n\n    resetSashDragState(start, alt);\n  };\n\n  SplitView.prototype.onSashChange = function (_a) {\n    var current = _a.current;\n    var _b = this.sashDragState,\n        index = _b.index,\n        start = _b.start,\n        sizes = _b.sizes,\n        alt = _b.alt,\n        minDelta = _b.minDelta,\n        maxDelta = _b.maxDelta;\n    this.sashDragState.current = current;\n    var delta = current - start;\n    var newDelta = this.resize(index, delta, sizes, undefined, undefined, minDelta, maxDelta);\n\n    if (alt) {\n      var isLastSash = index === this.sashItems.length - 1;\n      var newSizes = this.viewItems.map(function (i) {\n        return i.size;\n      });\n      var viewItemIndex = isLastSash ? index : index + 1;\n      var viewItem = this.viewItems[viewItemIndex];\n      var newMinDelta = viewItem.size - viewItem.view.maximumSize;\n      var newMaxDelta = viewItem.size - viewItem.view.minimumSize;\n      var resizeIndex = isLastSash ? index - 1 : index + 1;\n      this.resize(resizeIndex, -newDelta, newSizes, undefined, undefined, newMinDelta, newMaxDelta);\n    }\n\n    this.distributeEmptySpace();\n    this.layoutViews();\n  };\n\n  SplitView.prototype.onSashEnd = function (index) {\n    this._onDidSashChange.fire(index);\n\n    this.sashDragState.disposable.dispose();\n    this.saveProportions();\n  };\n\n  SplitView.prototype.onViewChange = function (item, size) {\n    var index = this.viewItems.indexOf(item);\n\n    if (index < 0 || index >= this.viewItems.length) {\n      return;\n    }\n\n    size = typeof size === 'number' ? size : item.size;\n    size = clamp(size, item.view.minimumSize, item.view.maximumSize);\n\n    if (this.inverseAltBehavior && index > 0) {\n      // In this case, we want the view to grow or shrink both sides equally\n      // so we just resize the \"left\" side by half and let `resize` do the clamping magic\n      this.resize(index - 1, Math.floor((item.size - size) / 2));\n      this.distributeEmptySpace();\n      this.layoutViews();\n    } else {\n      item.size = size;\n      this.relayout(index, undefined);\n    }\n  };\n\n  SplitView.prototype.resizeView = function (index, size) {\n    var _this = this;\n\n    if (this.state !== State.Idle) {\n      throw new Error('Cant modify splitview');\n    }\n\n    this.state = State.Busy;\n\n    if (index < 0 || index >= this.viewItems.length) {\n      return;\n    }\n\n    var item = this.viewItems[index];\n    size = Math.round(size);\n    size = clamp(size, item.view.minimumSize, item.view.maximumSize);\n    var delta = size - item.size;\n\n    if (delta !== 0 && index < this.viewItems.length - 1) {\n      var downIndexes = range(index + 1, this.viewItems.length);\n      var collapseDown = downIndexes.reduce(function (r, i) {\n        return r + (_this.viewItems[i].size - _this.viewItems[i].view.minimumSize);\n      }, 0);\n      var expandDown = downIndexes.reduce(function (r, i) {\n        return r + (_this.viewItems[i].view.maximumSize - _this.viewItems[i].size);\n      }, 0);\n      var deltaDown = clamp(delta, -expandDown, collapseDown);\n      this.resize(index, deltaDown);\n      delta -= deltaDown;\n    }\n\n    if (delta !== 0 && index > 0) {\n      var upIndexes = range(index - 1, -1);\n      var collapseUp = upIndexes.reduce(function (r, i) {\n        return r + (_this.viewItems[i].size - _this.viewItems[i].view.minimumSize);\n      }, 0);\n      var expandUp = upIndexes.reduce(function (r, i) {\n        return r + (_this.viewItems[i].view.maximumSize - _this.viewItems[i].size);\n      }, 0);\n      var deltaUp = clamp(-delta, -collapseUp, expandUp);\n      this.resize(index - 1, deltaUp);\n    }\n\n    this.distributeEmptySpace();\n    this.layoutViews();\n    this.saveProportions();\n    this.state = State.Idle;\n  };\n\n  SplitView.prototype.distributeViewSizes = function () {\n    var size = Math.floor(this.size / this.viewItems.length);\n\n    for (var i = 0; i < this.viewItems.length - 1; i++) {\n      this.resizeView(i, size);\n    }\n  };\n\n  SplitView.prototype.getViewSize = function (index) {\n    if (index < 0 || index >= this.viewItems.length) {\n      return -1;\n    }\n\n    return this.viewItems[index].size;\n  };\n\n  SplitView.prototype.resize = function (index, delta, sizes, lowPriorityIndexes, highPriorityIndexes, overloadMinDelta, overloadMaxDelta) {\n    var _this = this;\n\n    if (sizes === void 0) {\n      sizes = this.viewItems.map(function (i) {\n        return i.size;\n      });\n    }\n\n    if (overloadMinDelta === void 0) {\n      overloadMinDelta = Number.NEGATIVE_INFINITY;\n    }\n\n    if (overloadMaxDelta === void 0) {\n      overloadMaxDelta = Number.POSITIVE_INFINITY;\n    }\n\n    if (index < 0 || index >= this.viewItems.length) {\n      return 0;\n    }\n\n    var upIndexes = range(index, -1);\n    var downIndexes = range(index + 1, this.viewItems.length);\n\n    if (highPriorityIndexes) {\n      for (var _i = 0, highPriorityIndexes_1 = highPriorityIndexes; _i < highPriorityIndexes_1.length; _i++) {\n        var index_1 = highPriorityIndexes_1[_i];\n        pushToStart(upIndexes, index_1);\n        pushToStart(downIndexes, index_1);\n      }\n    }\n\n    if (lowPriorityIndexes) {\n      for (var _a = 0, lowPriorityIndexes_1 = lowPriorityIndexes; _a < lowPriorityIndexes_1.length; _a++) {\n        var index_2 = lowPriorityIndexes_1[_a];\n        pushToEnd(upIndexes, index_2);\n        pushToEnd(downIndexes, index_2);\n      }\n    }\n\n    var upItems = upIndexes.map(function (i) {\n      return _this.viewItems[i];\n    });\n    var upSizes = upIndexes.map(function (i) {\n      return sizes[i];\n    });\n    var downItems = downIndexes.map(function (i) {\n      return _this.viewItems[i];\n    });\n    var downSizes = downIndexes.map(function (i) {\n      return sizes[i];\n    });\n    var minDeltaUp = upIndexes.reduce(function (r, i) {\n      return r + (_this.viewItems[i].view.minimumSize - sizes[i]);\n    }, 0);\n    var maxDeltaUp = upIndexes.reduce(function (r, i) {\n      return r + (_this.viewItems[i].view.maximumSize - sizes[i]);\n    }, 0);\n    var maxDeltaDown = downIndexes.length === 0 ? Number.POSITIVE_INFINITY : downIndexes.reduce(function (r, i) {\n      return r + (sizes[i] - _this.viewItems[i].view.minimumSize);\n    }, 0);\n    var minDeltaDown = downIndexes.length === 0 ? Number.NEGATIVE_INFINITY : downIndexes.reduce(function (r, i) {\n      return r + (sizes[i] - _this.viewItems[i].view.maximumSize);\n    }, 0);\n    var minDelta = Math.max(minDeltaUp, minDeltaDown, overloadMinDelta);\n    var maxDelta = Math.min(maxDeltaDown, maxDeltaUp, overloadMaxDelta);\n    delta = clamp(delta, minDelta, maxDelta);\n\n    for (var i = 0, deltaUp = delta; i < upItems.length; i++) {\n      var item = upItems[i];\n      var size = clamp(upSizes[i] + deltaUp, item.view.minimumSize, item.view.maximumSize);\n      var viewDelta = size - upSizes[i];\n      deltaUp -= viewDelta;\n      item.size = size;\n    }\n\n    for (var i = 0, deltaDown = delta; i < downItems.length; i++) {\n      var item = downItems[i];\n      var size = clamp(downSizes[i] - deltaDown, item.view.minimumSize, item.view.maximumSize);\n      var viewDelta = size - downSizes[i];\n      deltaDown += viewDelta;\n      item.size = size;\n    }\n\n    return delta;\n  };\n\n  SplitView.prototype.distributeEmptySpace = function () {\n    var contentSize = this.viewItems.reduce(function (r, i) {\n      return r + i.size;\n    }, 0);\n    var emptyDelta = this.size - contentSize;\n\n    for (var i = this.viewItems.length - 1; emptyDelta !== 0 && i >= 0; i--) {\n      var item = this.viewItems[i];\n      var size = clamp(item.size + emptyDelta, item.view.minimumSize, item.view.maximumSize);\n      var viewDelta = size - item.size;\n      emptyDelta -= viewDelta;\n      item.size = size;\n    }\n  };\n\n  SplitView.prototype.layoutViews = function () {\n    // Save new content size\n    this.contentSize = this.viewItems.reduce(function (r, i) {\n      return r + i.size;\n    }, 0); // Layout views\n\n    this.viewItems.forEach(function (item) {\n      return item.layout();\n    }); // Layout sashes\n\n    this.sashItems.forEach(function (item) {\n      return item.sash.layout();\n    }); // Update sashes enablement\n\n    var previous = false;\n    var collapsesDown = this.viewItems.map(function (i) {\n      return previous = i.size - i.view.minimumSize > 0 || previous;\n    });\n    previous = false;\n    var expandsDown = this.viewItems.map(function (i) {\n      return previous = i.view.maximumSize - i.size > 0 || previous;\n    });\n    var reverseViews = this.viewItems.slice().reverse();\n    previous = false;\n    var collapsesUp = reverseViews.map(function (i) {\n      return previous = i.size - i.view.minimumSize > 0 || previous;\n    }).reverse();\n    previous = false;\n    var expandsUp = reverseViews.map(function (i) {\n      return previous = i.view.maximumSize - i.size > 0 || previous;\n    }).reverse();\n    this.sashItems.forEach(function (s, i) {\n      var min = !(collapsesDown[i] && expandsUp[i + 1]);\n      var max = !(expandsDown[i] && collapsesUp[i + 1]);\n\n      if (min && max) {\n        s.sash.state = 0\n        /* Disabled */\n        ;\n      } else if (min && !max) {\n        s.sash.state = 1\n        /* Minimum */\n        ;\n      } else if (!min && max) {\n        s.sash.state = 2\n        /* Maximum */\n        ;\n      } else {\n        s.sash.state = 3\n        /* Enabled */\n        ;\n      }\n    });\n  };\n\n  SplitView.prototype.getSashPosition = function (sash) {\n    var position = 0;\n\n    for (var i = 0; i < this.sashItems.length; i++) {\n      position += this.viewItems[i].size;\n\n      if (this.sashItems[i].sash === sash) {\n        return position;\n      }\n    }\n\n    return 0;\n  };\n\n  SplitView.prototype.dispose = function () {\n    _super.prototype.dispose.call(this);\n\n    this.viewItems.forEach(function (i) {\n      return i.disposable.dispose();\n    });\n    this.viewItems = [];\n    this.sashItems.forEach(function (i) {\n      return i.disposable.dispose();\n    });\n    this.sashItems = [];\n  };\n\n  return SplitView;\n}(Disposable);\n\nexport { SplitView };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport { ReferencesModel, FileReferences, OneReference } from './referencesModel.js';\nimport { ITextModelService } from '../../common/services/resolverService.js';\nimport { IconLabel } from '../../../base/browser/ui/iconLabel/iconLabel.js';\nimport { CountBadge } from '../../../base/browser/ui/countBadge/countBadge.js';\nimport { ILabelService } from '../../../platform/label/common/label.js';\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\nimport { attachBadgeStyler } from '../../../platform/theme/common/styler.js';\nimport * as dom from '../../../base/browser/dom.js';\nimport { localize } from '../../../nls.js';\nimport { getBaseLabel } from '../../../base/common/labels.js';\nimport { dirname, basename } from '../../../base/common/resources.js';\nimport { escape } from '../../../base/common/strings.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\nimport { createMatches } from '../../../base/common/filters.js';\n\nvar DataSource =\n/** @class */\nfunction () {\n  function DataSource(_resolverService) {\n    this._resolverService = _resolverService;\n  }\n\n  DataSource.prototype.hasChildren = function (element) {\n    if (element instanceof ReferencesModel) {\n      return true;\n    }\n\n    if (element instanceof FileReferences && !element.failure) {\n      return true;\n    }\n\n    return false;\n  };\n\n  DataSource.prototype.getChildren = function (element) {\n    if (element instanceof ReferencesModel) {\n      return element.groups;\n    }\n\n    if (element instanceof FileReferences) {\n      return element.resolve(this._resolverService).then(function (val) {\n        // if (element.failure) {\n        // \t// refresh the element on failure so that\n        // \t// we can update its rendering\n        // \treturn tree.refresh(element).then(() => val.children);\n        // }\n        return val.children;\n      });\n    }\n\n    throw new Error('bad tree');\n  };\n\n  DataSource = __decorate([__param(0, ITextModelService)], DataSource);\n  return DataSource;\n}();\n\nexport { DataSource }; //#endregion\n\nvar Delegate =\n/** @class */\nfunction () {\n  function Delegate() {}\n\n  Delegate.prototype.getHeight = function () {\n    return 23;\n  };\n\n  Delegate.prototype.getTemplateId = function (element) {\n    if (element instanceof FileReferences) {\n      return FileReferencesRenderer.id;\n    } else {\n      return OneReferenceRenderer.id;\n    }\n  };\n\n  return Delegate;\n}();\n\nexport { Delegate };\n\nvar StringRepresentationProvider =\n/** @class */\nfunction () {\n  function StringRepresentationProvider(_keybindingService) {\n    this._keybindingService = _keybindingService;\n  }\n\n  StringRepresentationProvider.prototype.getKeyboardNavigationLabel = function (element) {\n    // todo@joao `OneReference` elements are lazy and their \"real\" label\n    // isn't known yet\n    return basename(element.uri);\n  };\n\n  StringRepresentationProvider.prototype.mightProducePrintableCharacter = function (event) {\n    return this._keybindingService.mightProducePrintableCharacter(event);\n  };\n\n  StringRepresentationProvider = __decorate([__param(0, IKeybindingService)], StringRepresentationProvider);\n  return StringRepresentationProvider;\n}();\n\nexport { StringRepresentationProvider };\n\nvar IdentityProvider =\n/** @class */\nfunction () {\n  function IdentityProvider() {}\n\n  IdentityProvider.prototype.getId = function (element) {\n    return element.id;\n  };\n\n  return IdentityProvider;\n}();\n\nexport { IdentityProvider }; //#region render: File\n\nvar FileReferencesTemplate =\n/** @class */\nfunction (_super) {\n  __extends(FileReferencesTemplate, _super);\n\n  function FileReferencesTemplate(container, _uriLabel, themeService) {\n    var _this = _super.call(this) || this;\n\n    _this._uriLabel = _uriLabel;\n    var parent = document.createElement('div');\n    dom.addClass(parent, 'reference-file');\n    _this.file = _this._register(new IconLabel(parent, {\n      supportHighlights: true\n    }));\n    _this.badge = new CountBadge(dom.append(parent, dom.$('.count')));\n\n    _this._register(attachBadgeStyler(_this.badge, themeService));\n\n    container.appendChild(parent);\n    return _this;\n  }\n\n  FileReferencesTemplate.prototype.set = function (element, matches) {\n    var parent = dirname(element.uri);\n    this.file.setLabel(getBaseLabel(element.uri), this._uriLabel.getUriLabel(parent, {\n      relative: true\n    }), {\n      title: this._uriLabel.getUriLabel(element.uri),\n      matches: matches\n    });\n    var len = element.children.length;\n    this.badge.setCount(len);\n\n    if (element.failure) {\n      this.badge.setTitleFormat(localize('referencesFailre', \"Failed to resolve file.\"));\n    } else if (len > 1) {\n      this.badge.setTitleFormat(localize('referencesCount', \"{0} references\", len));\n    } else {\n      this.badge.setTitleFormat(localize('referenceCount', \"{0} reference\", len));\n    }\n  };\n\n  FileReferencesTemplate = __decorate([__param(1, ILabelService), __param(2, IThemeService)], FileReferencesTemplate);\n  return FileReferencesTemplate;\n}(Disposable);\n\nvar FileReferencesRenderer =\n/** @class */\nfunction () {\n  function FileReferencesRenderer(_instantiationService) {\n    this._instantiationService = _instantiationService;\n    this.templateId = FileReferencesRenderer.id;\n  }\n\n  FileReferencesRenderer.prototype.renderTemplate = function (container) {\n    return this._instantiationService.createInstance(FileReferencesTemplate, container);\n  };\n\n  FileReferencesRenderer.prototype.renderElement = function (node, index, template) {\n    template.set(node.element, createMatches(node.filterData));\n  };\n\n  FileReferencesRenderer.prototype.disposeTemplate = function (templateData) {\n    templateData.dispose();\n  };\n\n  FileReferencesRenderer.id = 'FileReferencesRenderer';\n  FileReferencesRenderer = __decorate([__param(0, IInstantiationService)], FileReferencesRenderer);\n  return FileReferencesRenderer;\n}();\n\nexport { FileReferencesRenderer }; //#endregion\n//#region render: Reference\n\nvar OneReferenceTemplate =\n/** @class */\nfunction () {\n  function OneReferenceTemplate(container) {\n    var parent = document.createElement('div');\n    this.before = document.createElement('span');\n    this.inside = document.createElement('span');\n    this.after = document.createElement('span');\n    dom.addClass(this.inside, 'referenceMatch');\n    dom.addClass(parent, 'reference');\n    parent.appendChild(this.before);\n    parent.appendChild(this.inside);\n    parent.appendChild(this.after);\n    container.appendChild(parent);\n  }\n\n  OneReferenceTemplate.prototype.set = function (element) {\n    var filePreview = element.parent.preview;\n    var preview = filePreview && filePreview.preview(element.range);\n\n    if (preview) {\n      var before = preview.before,\n          inside = preview.inside,\n          after = preview.after;\n      this.before.innerHTML = escape(before);\n      this.inside.innerHTML = escape(inside);\n      this.after.innerHTML = escape(after);\n    }\n  };\n\n  return OneReferenceTemplate;\n}();\n\nvar OneReferenceRenderer =\n/** @class */\nfunction () {\n  function OneReferenceRenderer() {\n    this.templateId = OneReferenceRenderer.id;\n  }\n\n  OneReferenceRenderer.prototype.renderTemplate = function (container) {\n    return new OneReferenceTemplate(container);\n  };\n\n  OneReferenceRenderer.prototype.renderElement = function (element, index, templateData) {\n    templateData.set(element.element);\n  };\n\n  OneReferenceRenderer.prototype.disposeTemplate = function () {//\n  };\n\n  OneReferenceRenderer.id = 'OneReferenceRenderer';\n  return OneReferenceRenderer;\n}();\n\nexport { OneReferenceRenderer }; //#endregion\n\nvar AriaProvider =\n/** @class */\nfunction () {\n  function AriaProvider() {}\n\n  AriaProvider.prototype.getAriaLabel = function (element) {\n    if (element instanceof FileReferences) {\n      return element.getAriaMessage();\n    } else if (element instanceof OneReference) {\n      return element.getAriaMessage();\n    } else {\n      return null;\n    }\n  };\n\n  return AriaProvider;\n}();\n\nexport { AriaProvider };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nimport * as dom from '../../../base/browser/dom.js';\nimport { Color } from '../../../base/common/color.js';\nimport { Emitter, Event } from '../../../base/common/event.js';\nimport { dispose } from '../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../base/common/network.js';\nimport { basenameOrAuthority, dirname } from '../../../base/common/resources.js';\nimport './media/referencesWidget.css';\nimport { EmbeddedCodeEditorWidget } from '../../browser/widget/embeddedCodeEditorWidget.js';\nimport { Range } from '../../common/core/range.js';\nimport { ModelDecorationOptions, TextModel } from '../../common/model/textModel.js';\nimport { ITextModelService } from '../../common/services/resolverService.js';\nimport { AriaProvider, DataSource, Delegate, FileReferencesRenderer, OneReferenceRenderer, StringRepresentationProvider, IdentityProvider } from './referencesTree.js';\nimport * as nls from '../../../nls.js';\nimport { RawContextKey } from '../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { ILabelService } from '../../../platform/label/common/label.js';\nimport { WorkbenchAsyncDataTree } from '../../../platform/list/browser/listService.js';\nimport { activeContrastBorder, contrastBorder, registerColor } from '../../../platform/theme/common/colorRegistry.js';\nimport { IThemeService, registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\nimport { PeekViewWidget, IPeekViewService } from './peekViewWidget.js';\nimport { FileReferences, OneReference } from './referencesModel.js';\nimport { SplitView, Sizing } from '../../../base/browser/ui/splitview/splitview.js';\n\nvar DecorationsManager =\n/** @class */\nfunction () {\n  function DecorationsManager(_editor, _model) {\n    var _this = this;\n\n    this._editor = _editor;\n    this._model = _model;\n    this._decorations = new Map();\n    this._decorationIgnoreSet = new Set();\n    this._callOnDispose = [];\n    this._callOnModelChange = [];\n\n    this._callOnDispose.push(this._editor.onDidChangeModel(function () {\n      return _this._onModelChanged();\n    }));\n\n    this._onModelChanged();\n  }\n\n  DecorationsManager.prototype.dispose = function () {\n    this._callOnModelChange = dispose(this._callOnModelChange);\n    this._callOnDispose = dispose(this._callOnDispose);\n    this.removeDecorations();\n  };\n\n  DecorationsManager.prototype._onModelChanged = function () {\n    this._callOnModelChange = dispose(this._callOnModelChange);\n\n    var model = this._editor.getModel();\n\n    if (model) {\n      for (var _i = 0, _a = this._model.groups; _i < _a.length; _i++) {\n        var ref = _a[_i];\n\n        if (ref.uri.toString() === model.uri.toString()) {\n          this._addDecorations(ref);\n\n          return;\n        }\n      }\n    }\n  };\n\n  DecorationsManager.prototype._addDecorations = function (reference) {\n    var _this = this;\n\n    if (!this._editor.hasModel()) {\n      return;\n    }\n\n    this._callOnModelChange.push(this._editor.getModel().onDidChangeDecorations(function (event) {\n      return _this._onDecorationChanged();\n    }));\n\n    var newDecorations = [];\n    var newDecorationsActualIndex = [];\n\n    for (var i = 0, len = reference.children.length; i < len; i++) {\n      var oneReference = reference.children[i];\n\n      if (this._decorationIgnoreSet.has(oneReference.id)) {\n        continue;\n      }\n\n      newDecorations.push({\n        range: oneReference.range,\n        options: DecorationsManager.DecorationOptions\n      });\n      newDecorationsActualIndex.push(i);\n    }\n\n    var decorations = this._editor.deltaDecorations([], newDecorations);\n\n    for (var i = 0; i < decorations.length; i++) {\n      this._decorations.set(decorations[i], reference.children[newDecorationsActualIndex[i]]);\n    }\n  };\n\n  DecorationsManager.prototype._onDecorationChanged = function () {\n    var _this = this;\n\n    var toRemove = [];\n\n    var model = this._editor.getModel();\n\n    if (!model) {\n      return;\n    }\n\n    this._decorations.forEach(function (reference, decorationId) {\n      var newRange = model.getDecorationRange(decorationId);\n\n      if (!newRange) {\n        return;\n      }\n\n      var ignore = false;\n\n      if (Range.equalsRange(newRange, reference.range)) {\n        return;\n      } else if (Range.spansMultipleLines(newRange)) {\n        ignore = true;\n      } else {\n        var lineLength = reference.range.endColumn - reference.range.startColumn;\n        var newLineLength = newRange.endColumn - newRange.startColumn;\n\n        if (lineLength !== newLineLength) {\n          ignore = true;\n        }\n      }\n\n      if (ignore) {\n        _this._decorationIgnoreSet.add(reference.id);\n\n        toRemove.push(decorationId);\n      } else {\n        reference.range = newRange;\n      }\n    });\n\n    for (var i = 0, len = toRemove.length; i < len; i++) {\n      this._decorations.delete(toRemove[i]);\n    }\n\n    this._editor.deltaDecorations(toRemove, []);\n  };\n\n  DecorationsManager.prototype.removeDecorations = function () {\n    var toRemove = [];\n\n    this._decorations.forEach(function (value, key) {\n      toRemove.push(key);\n    });\n\n    this._editor.deltaDecorations(toRemove, []);\n\n    this._decorations.clear();\n  };\n\n  DecorationsManager.DecorationOptions = ModelDecorationOptions.register({\n    stickiness: 1\n    /* NeverGrowsWhenTypingAtEdges */\n    ,\n    className: 'reference-decoration'\n  });\n  return DecorationsManager;\n}();\n\nvar LayoutData =\n/** @class */\nfunction () {\n  function LayoutData() {}\n\n  LayoutData.fromJSON = function (raw) {\n    var ratio;\n    var heightInLines;\n\n    try {\n      var data = JSON.parse(raw);\n      ratio = data.ratio;\n      heightInLines = data.heightInLines;\n    } catch (_a) {//\n    }\n\n    return {\n      ratio: ratio || 0.7,\n      heightInLines: heightInLines || 18\n    };\n  };\n\n  return LayoutData;\n}();\n\nexport { LayoutData };\nexport var ctxReferenceWidgetSearchTreeFocused = new RawContextKey('referenceSearchTreeFocused', true);\n/**\n * ZoneWidget that is shown inside the editor\n */\n\nvar ReferenceWidget =\n/** @class */\nfunction (_super) {\n  __extends(ReferenceWidget, _super);\n\n  function ReferenceWidget(editor, _defaultTreeKeyboardSupport, layoutData, themeService, _textModelResolverService, _instantiationService, _peekViewService, _uriLabel) {\n    var _this = _super.call(this, editor, {\n      showFrame: false,\n      showArrow: true,\n      isResizeable: true,\n      isAccessible: true\n    }) || this;\n\n    _this._defaultTreeKeyboardSupport = _defaultTreeKeyboardSupport;\n    _this.layoutData = layoutData;\n    _this._textModelResolverService = _textModelResolverService;\n    _this._instantiationService = _instantiationService;\n    _this._peekViewService = _peekViewService;\n    _this._uriLabel = _uriLabel;\n    _this._disposeOnNewModel = [];\n    _this._callOnDispose = [];\n    _this._onDidSelectReference = new Emitter();\n    _this._dim = {\n      height: 0,\n      width: 0\n    };\n\n    _this._applyTheme(themeService.getTheme());\n\n    _this._callOnDispose.push(themeService.onThemeChange(_this._applyTheme.bind(_this)));\n\n    _this._peekViewService.addExclusiveWidget(editor, _this);\n\n    _this.create();\n\n    return _this;\n  }\n\n  ReferenceWidget.prototype.dispose = function () {\n    this.setModel(undefined);\n    this._callOnDispose = dispose(this._callOnDispose);\n    dispose(this._preview, this._previewNotAvailableMessage, this._tree, this._previewModelReference);\n\n    this._splitView.dispose();\n\n    _super.prototype.dispose.call(this);\n  };\n\n  ReferenceWidget.prototype._applyTheme = function (theme) {\n    var borderColor = theme.getColor(peekViewBorder) || Color.transparent;\n    this.style({\n      arrowColor: borderColor,\n      frameColor: borderColor,\n      headerBackgroundColor: theme.getColor(peekViewTitleBackground) || Color.transparent,\n      primaryHeadingColor: theme.getColor(peekViewTitleForeground),\n      secondaryHeadingColor: theme.getColor(peekViewTitleInfoForeground)\n    });\n  };\n\n  Object.defineProperty(ReferenceWidget.prototype, \"onDidSelectReference\", {\n    get: function get() {\n      return this._onDidSelectReference.event;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ReferenceWidget.prototype.show = function (where) {\n    this.editor.revealRangeInCenterIfOutsideViewport(where, 0\n    /* Smooth */\n    );\n\n    _super.prototype.show.call(this, where, this.layoutData.heightInLines || 18);\n  };\n\n  ReferenceWidget.prototype.focus = function () {\n    this._tree.domFocus();\n  };\n\n  ReferenceWidget.prototype._onTitleClick = function (e) {\n    if (this._preview && this._preview.getModel()) {\n      this._onDidSelectReference.fire({\n        element: this._getFocusedReference(),\n        kind: e.ctrlKey || e.metaKey || e.altKey ? 'side' : 'open',\n        source: 'title'\n      });\n    }\n  };\n\n  ReferenceWidget.prototype._fillBody = function (containerElement) {\n    var _this = this;\n\n    this.setCssClass('reference-zone-widget'); // message pane\n\n    this._messageContainer = dom.append(containerElement, dom.$('div.messages'));\n    dom.hide(this._messageContainer);\n    this._splitView = new SplitView(containerElement, {\n      orientation: 1\n      /* HORIZONTAL */\n\n    }); // editor\n\n    this._previewContainer = dom.append(containerElement, dom.$('div.preview.inline'));\n    var options = {\n      scrollBeyondLastLine: false,\n      scrollbar: {\n        verticalScrollbarSize: 14,\n        horizontal: 'auto',\n        useShadows: true,\n        verticalHasArrows: false,\n        horizontalHasArrows: false\n      },\n      overviewRulerLanes: 2,\n      fixedOverflowWidgets: true,\n      minimap: {\n        enabled: false\n      }\n    };\n    this._preview = this._instantiationService.createInstance(EmbeddedCodeEditorWidget, this._previewContainer, options, this.editor);\n    dom.hide(this._previewContainer);\n    this._previewNotAvailableMessage = TextModel.createFromString(nls.localize('missingPreviewMessage', \"no preview available\")); // tree\n\n    this._treeContainer = dom.append(containerElement, dom.$('div.ref-tree.inline'));\n    var treeOptions = {\n      ariaLabel: nls.localize('treeAriaLabel', \"References\"),\n      keyboardSupport: this._defaultTreeKeyboardSupport,\n      accessibilityProvider: new AriaProvider(),\n      keyboardNavigationLabelProvider: this._instantiationService.createInstance(StringRepresentationProvider),\n      identityProvider: new IdentityProvider()\n    };\n    this._tree = this._instantiationService.createInstance(WorkbenchAsyncDataTree, this._treeContainer, new Delegate(), [this._instantiationService.createInstance(FileReferencesRenderer), this._instantiationService.createInstance(OneReferenceRenderer)], this._instantiationService.createInstance(DataSource), treeOptions);\n    ctxReferenceWidgetSearchTreeFocused.bindTo(this._tree.contextKeyService); // split stuff\n\n    this._splitView.addView({\n      onDidChange: Event.None,\n      element: this._previewContainer,\n      minimumSize: 200,\n      maximumSize: Number.MAX_VALUE,\n      layout: function layout(width) {\n        _this._preview.layout({\n          height: _this._dim.height,\n          width: width\n        });\n      }\n    }, Sizing.Distribute);\n\n    this._splitView.addView({\n      onDidChange: Event.None,\n      element: this._treeContainer,\n      minimumSize: 100,\n      maximumSize: Number.MAX_VALUE,\n      layout: function layout(width) {\n        _this._treeContainer.style.height = _this._dim.height + \"px\";\n        _this._treeContainer.style.width = width + \"px\";\n\n        _this._tree.layout(_this._dim.height, width);\n      }\n    }, Sizing.Distribute);\n\n    this._splitView.onDidSashChange(function () {\n      if (_this._dim.width) {\n        _this.layoutData.ratio = _this._splitView.getViewSize(0) / _this._dim.width;\n      }\n    }, undefined, this._disposables); // listen on selection and focus\n\n\n    var onEvent = function onEvent(element, kind) {\n      if (element instanceof OneReference) {\n        if (kind === 'show') {\n          _this._revealReference(element, false);\n        }\n\n        _this._onDidSelectReference.fire({\n          element: element,\n          kind: kind,\n          source: 'tree'\n        });\n      }\n    };\n\n    this._tree.onDidChangeFocus(function (e) {\n      onEvent(e.elements[0], 'show');\n    });\n\n    this._tree.onDidChangeSelection(function (e) {\n      var aside = false;\n      var _goto = false;\n\n      if (e.browserEvent instanceof KeyboardEvent) {\n        // todo@joh make this a command\n        _goto = true;\n      }\n\n      if (aside) {\n        onEvent(e.elements[0], 'side');\n      } else if (_goto) {\n        onEvent(e.elements[0], 'goto');\n      } else {\n        onEvent(e.elements[0], 'show');\n      }\n    });\n\n    this._tree.onDidOpen(function (e) {\n      var aside = e.browserEvent instanceof MouseEvent && (e.browserEvent.ctrlKey || e.browserEvent.metaKey || e.browserEvent.altKey);\n\n      var _goto2 = !e.browserEvent || e.browserEvent instanceof MouseEvent && e.browserEvent.detail === 2;\n\n      if (aside) {\n        onEvent(e.elements[0], 'side');\n      } else if (_goto2) {\n        onEvent(e.elements[0], 'goto');\n      } else {\n        onEvent(e.elements[0], 'show');\n      }\n    });\n\n    dom.hide(this._treeContainer);\n  };\n\n  ReferenceWidget.prototype._onWidth = function (width) {\n    if (this._dim) {\n      this._doLayoutBody(this._dim.height, width);\n    }\n  };\n\n  ReferenceWidget.prototype._doLayoutBody = function (heightInPixel, widthInPixel) {\n    _super.prototype._doLayoutBody.call(this, heightInPixel, widthInPixel);\n\n    this._dim = {\n      height: heightInPixel,\n      width: widthInPixel\n    };\n    this.layoutData.heightInLines = this._viewZone ? this._viewZone.heightInLines : this.layoutData.heightInLines;\n\n    this._splitView.layout(widthInPixel);\n\n    this._splitView.resizeView(0, widthInPixel * this.layoutData.ratio);\n  };\n\n  ReferenceWidget.prototype.setSelection = function (selection) {\n    var _this = this;\n\n    return this._revealReference(selection, true).then(function () {\n      if (!_this._model) {\n        // disposed\n        return;\n      } // show in tree\n\n\n      _this._tree.setSelection([selection]);\n\n      _this._tree.setFocus([selection]);\n    });\n  };\n\n  ReferenceWidget.prototype.setModel = function (newModel) {\n    // clean up\n    this._disposeOnNewModel = dispose(this._disposeOnNewModel);\n    this._model = newModel;\n\n    if (this._model) {\n      return this._onNewModel();\n    }\n\n    return Promise.resolve();\n  };\n\n  ReferenceWidget.prototype._onNewModel = function () {\n    var _this = this;\n\n    if (!this._model) {\n      return Promise.resolve(undefined);\n    }\n\n    if (this._model.empty) {\n      this.setTitle('');\n      this._messageContainer.innerHTML = nls.localize('noResults', \"No results\");\n      dom.show(this._messageContainer);\n      return Promise.resolve(undefined);\n    }\n\n    dom.hide(this._messageContainer);\n    this._decorationsManager = new DecorationsManager(this._preview, this._model);\n\n    this._disposeOnNewModel.push(this._decorationsManager); // listen on model changes\n\n\n    this._disposeOnNewModel.push(this._model.onDidChangeReferenceRange(function (reference) {\n      return _this._tree.rerender(reference);\n    })); // listen on editor\n\n\n    this._disposeOnNewModel.push(this._preview.onMouseDown(function (e) {\n      var event = e.event,\n          target = e.target;\n\n      if (event.detail !== 2) {\n        return;\n      }\n\n      var element = _this._getFocusedReference();\n\n      if (!element) {\n        return;\n      }\n\n      _this._onDidSelectReference.fire({\n        element: {\n          uri: element.uri,\n          range: target.range\n        },\n        kind: event.ctrlKey || event.metaKey || event.altKey ? 'side' : 'open',\n        source: 'editor'\n      });\n    })); // make sure things are rendered\n\n\n    dom.addClass(this.container, 'results-loaded');\n    dom.show(this._treeContainer);\n    dom.show(this._previewContainer);\n\n    this._splitView.layout(this._dim.width);\n\n    this.focus(); // pick input and a reference to begin with\n\n    return this._tree.setInput(this._model.groups.length === 1 ? this._model.groups[0] : this._model);\n  };\n\n  ReferenceWidget.prototype._getFocusedReference = function () {\n    var element = this._tree.getFocus()[0];\n\n    if (element instanceof OneReference) {\n      return element;\n    } else if (element instanceof FileReferences) {\n      if (element.children.length > 0) {\n        return element.children[0];\n      }\n    }\n\n    return undefined;\n  };\n\n  ReferenceWidget.prototype._revealReference = function (reference, revealParent) {\n    return __awaiter(this, void 0, void 0, function () {\n      var promise, ref, model, scrollType, sel;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            // check if there is anything to do...\n            if (this._revealedReference === reference) {\n              return [2\n              /*return*/\n              ];\n            }\n\n            this._revealedReference = reference; // Update widget header\n\n            if (reference.uri.scheme !== Schemas.inMemory) {\n              this.setTitle(basenameOrAuthority(reference.uri), this._uriLabel.getUriLabel(dirname(reference.uri)));\n            } else {\n              this.setTitle(nls.localize('peekView.alternateTitle', \"References\"));\n            }\n\n            promise = this._textModelResolverService.createModelReference(reference.uri);\n            if (!(this._tree.getInput() === reference.parent)) return [3\n            /*break*/\n            , 1];\n\n            this._tree.reveal(reference);\n\n            return [3\n            /*break*/\n            , 3];\n\n          case 1:\n            if (revealParent) {\n              this._tree.reveal(reference.parent);\n            }\n\n            return [4\n            /*yield*/\n            , this._tree.expand(reference.parent)];\n\n          case 2:\n            _a.sent();\n\n            this._tree.reveal(reference);\n\n            _a.label = 3;\n\n          case 3:\n            return [4\n            /*yield*/\n            , promise];\n\n          case 4:\n            ref = _a.sent();\n\n            if (!this._model) {\n              // disposed\n              ref.dispose();\n              return [2\n              /*return*/\n              ];\n            }\n\n            dispose(this._previewModelReference);\n            model = ref.object;\n\n            if (model) {\n              scrollType = this._preview.getModel() === model.textEditorModel ? 0\n              /* Smooth */\n              : 1\n              /* Immediate */\n              ;\n              sel = Range.lift(reference.range).collapseToStart();\n              this._previewModelReference = ref;\n\n              this._preview.setModel(model.textEditorModel);\n\n              this._preview.setSelection(sel);\n\n              this._preview.revealRangeInCenter(sel, scrollType);\n            } else {\n              this._preview.setModel(this._previewNotAvailableMessage);\n\n              ref.dispose();\n            }\n\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  ReferenceWidget = __decorate([__param(3, IThemeService), __param(4, ITextModelService), __param(5, IInstantiationService), __param(6, IPeekViewService), __param(7, ILabelService)], ReferenceWidget);\n  return ReferenceWidget;\n}(PeekViewWidget);\n\nexport { ReferenceWidget }; // theming\n\nexport var peekViewTitleBackground = registerColor('peekViewTitle.background', {\n  dark: '#1E1E1E',\n  light: '#FFFFFF',\n  hc: '#0C141F'\n}, nls.localize('peekViewTitleBackground', 'Background color of the peek view title area.'));\nexport var peekViewTitleForeground = registerColor('peekViewTitleLabel.foreground', {\n  dark: '#FFFFFF',\n  light: '#333333',\n  hc: '#FFFFFF'\n}, nls.localize('peekViewTitleForeground', 'Color of the peek view title.'));\nexport var peekViewTitleInfoForeground = registerColor('peekViewTitleDescription.foreground', {\n  dark: '#ccccccb3',\n  light: '#6c6c6cb3',\n  hc: '#FFFFFF99'\n}, nls.localize('peekViewTitleInfoForeground', 'Color of the peek view title info.'));\nexport var peekViewBorder = registerColor('peekView.border', {\n  dark: '#007acc',\n  light: '#007acc',\n  hc: contrastBorder\n}, nls.localize('peekViewBorder', 'Color of the peek view borders and arrow.'));\nexport var peekViewResultsBackground = registerColor('peekViewResult.background', {\n  dark: '#252526',\n  light: '#F3F3F3',\n  hc: Color.black\n}, nls.localize('peekViewResultsBackground', 'Background color of the peek view result list.'));\nexport var peekViewResultsMatchForeground = registerColor('peekViewResult.lineForeground', {\n  dark: '#bbbbbb',\n  light: '#646465',\n  hc: Color.white\n}, nls.localize('peekViewResultsMatchForeground', 'Foreground color for line nodes in the peek view result list.'));\nexport var peekViewResultsFileForeground = registerColor('peekViewResult.fileForeground', {\n  dark: Color.white,\n  light: '#1E1E1E',\n  hc: Color.white\n}, nls.localize('peekViewResultsFileForeground', 'Foreground color for file nodes in the peek view result list.'));\nexport var peekViewResultsSelectionBackground = registerColor('peekViewResult.selectionBackground', {\n  dark: '#3399ff33',\n  light: '#3399ff33',\n  hc: null\n}, nls.localize('peekViewResultsSelectionBackground', 'Background color of the selected entry in the peek view result list.'));\nexport var peekViewResultsSelectionForeground = registerColor('peekViewResult.selectionForeground', {\n  dark: Color.white,\n  light: '#6C6C6C',\n  hc: Color.white\n}, nls.localize('peekViewResultsSelectionForeground', 'Foreground color of the selected entry in the peek view result list.'));\nexport var peekViewEditorBackground = registerColor('peekViewEditor.background', {\n  dark: '#001F33',\n  light: '#F2F8FC',\n  hc: Color.black\n}, nls.localize('peekViewEditorBackground', 'Background color of the peek view editor.'));\nexport var peekViewEditorGutterBackground = registerColor('peekViewEditorGutter.background', {\n  dark: peekViewEditorBackground,\n  light: peekViewEditorBackground,\n  hc: peekViewEditorBackground\n}, nls.localize('peekViewEditorGutterBackground', 'Background color of the gutter in the peek view editor.'));\nexport var peekViewResultsMatchHighlight = registerColor('peekViewResult.matchHighlightBackground', {\n  dark: '#ea5c004d',\n  light: '#ea5c004d',\n  hc: null\n}, nls.localize('peekViewResultsMatchHighlight', 'Match highlight color in the peek view result list.'));\nexport var peekViewEditorMatchHighlight = registerColor('peekViewEditor.matchHighlightBackground', {\n  dark: '#ff8f0099',\n  light: '#f5d802de',\n  hc: null\n}, nls.localize('peekViewEditorMatchHighlight', 'Match highlight color in the peek view editor.'));\nexport var peekViewEditorMatchHighlightBorder = registerColor('peekViewEditor.matchHighlightBorder', {\n  dark: null,\n  light: null,\n  hc: activeContrastBorder\n}, nls.localize('peekViewEditorMatchHighlightBorder', 'Match highlight border in the peek view editor.'));\nregisterThemingParticipant(function (theme, collector) {\n  var findMatchHighlightColor = theme.getColor(peekViewResultsMatchHighlight);\n\n  if (findMatchHighlightColor) {\n    collector.addRule(\".monaco-editor .reference-zone-widget .ref-tree .referenceMatch { background-color: \" + findMatchHighlightColor + \"; }\");\n  }\n\n  var referenceHighlightColor = theme.getColor(peekViewEditorMatchHighlight);\n\n  if (referenceHighlightColor) {\n    collector.addRule(\".monaco-editor .reference-zone-widget .preview .reference-decoration { background-color: \" + referenceHighlightColor + \"; }\");\n  }\n\n  var referenceHighlightBorder = theme.getColor(peekViewEditorMatchHighlightBorder);\n\n  if (referenceHighlightBorder) {\n    collector.addRule(\".monaco-editor .reference-zone-widget .preview .reference-decoration { border: 2px solid \" + referenceHighlightBorder + \"; box-sizing: border-box; }\");\n  }\n\n  var hcOutline = theme.getColor(activeContrastBorder);\n\n  if (hcOutline) {\n    collector.addRule(\".monaco-editor .reference-zone-widget .ref-tree .referenceMatch { border: 1px dotted \" + hcOutline + \"; box-sizing: border-box; }\");\n  }\n\n  var resultsBackground = theme.getColor(peekViewResultsBackground);\n\n  if (resultsBackground) {\n    collector.addRule(\".monaco-editor .reference-zone-widget .ref-tree { background-color: \" + resultsBackground + \"; }\");\n  }\n\n  var resultsMatchForeground = theme.getColor(peekViewResultsMatchForeground);\n\n  if (resultsMatchForeground) {\n    collector.addRule(\".monaco-editor .reference-zone-widget .ref-tree { color: \" + resultsMatchForeground + \"; }\");\n  }\n\n  var resultsFileForeground = theme.getColor(peekViewResultsFileForeground);\n\n  if (resultsFileForeground) {\n    collector.addRule(\".monaco-editor .reference-zone-widget .ref-tree .reference-file { color: \" + resultsFileForeground + \"; }\");\n  }\n\n  var resultsSelectedBackground = theme.getColor(peekViewResultsSelectionBackground);\n\n  if (resultsSelectedBackground) {\n    collector.addRule(\".monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) { background-color: \" + resultsSelectedBackground + \"; }\");\n  }\n\n  var resultsSelectedForeground = theme.getColor(peekViewResultsSelectionForeground);\n\n  if (resultsSelectedForeground) {\n    collector.addRule(\".monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) { color: \" + resultsSelectedForeground + \" !important; }\");\n  }\n\n  var editorBackground = theme.getColor(peekViewEditorBackground);\n\n  if (editorBackground) {\n    collector.addRule(\".monaco-editor .reference-zone-widget .preview .monaco-editor .monaco-editor-background,\" + \".monaco-editor .reference-zone-widget .preview .monaco-editor .inputarea.ime-input {\" + (\"\\tbackground-color: \" + editorBackground + \";\") + \"}\");\n  }\n\n  var editorGutterBackground = theme.getColor(peekViewEditorGutterBackground);\n\n  if (editorGutterBackground) {\n    collector.addRule(\".monaco-editor .reference-zone-widget .preview .monaco-editor .margin {\" + (\"\\tbackground-color: \" + editorGutterBackground + \";\") + \"}\");\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nimport * as nls from '../../../nls.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { dispose } from '../../../base/common/lifecycle.js';\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { IContextKeyService, RawContextKey } from '../../../platform/contextkey/common/contextkey.js';\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\nimport { IStorageService } from '../../../platform/storage/common/storage.js';\nimport { ReferenceWidget, LayoutData } from './referencesWidget.js';\nimport { Range } from '../../common/core/range.js';\nimport { Position } from '../../common/core/position.js';\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\nexport var ctxReferenceSearchVisible = new RawContextKey('referenceSearchVisible', false);\n\nvar ReferencesController =\n/** @class */\nfunction () {\n  function ReferencesController(_defaultTreeKeyboardSupport, editor, contextKeyService, _editorService, _notificationService, _instantiationService, _storageService, _configurationService) {\n    this._defaultTreeKeyboardSupport = _defaultTreeKeyboardSupport;\n    this._editorService = _editorService;\n    this._notificationService = _notificationService;\n    this._instantiationService = _instantiationService;\n    this._storageService = _storageService;\n    this._configurationService = _configurationService;\n    this._requestIdPool = 0;\n    this._disposables = [];\n    this._ignoreModelChangeEvent = false;\n    this._editor = editor;\n    this._referenceSearchVisible = ctxReferenceSearchVisible.bindTo(contextKeyService);\n  }\n\n  ReferencesController.get = function (editor) {\n    return editor.getContribution(ReferencesController.ID);\n  };\n\n  ReferencesController.prototype.getId = function () {\n    return ReferencesController.ID;\n  };\n\n  ReferencesController.prototype.dispose = function () {\n    this._referenceSearchVisible.reset();\n\n    dispose(this._disposables);\n\n    if (this._widget) {\n      dispose(this._widget);\n      this._widget = null;\n    }\n\n    if (this._model) {\n      dispose(this._model);\n      this._model = null;\n    }\n  };\n\n  ReferencesController.prototype.toggleWidget = function (range, modelPromise, options) {\n    var _this = this; // close current widget and return early is position didn't change\n\n\n    var widgetPosition;\n\n    if (this._widget) {\n      widgetPosition = this._widget.position;\n    }\n\n    this.closeWidget();\n\n    if (!!widgetPosition && range.containsPosition(widgetPosition)) {\n      return;\n    }\n\n    this._referenceSearchVisible.set(true); // close the widget on model/mode changes\n\n\n    this._disposables.push(this._editor.onDidChangeModelLanguage(function () {\n      _this.closeWidget();\n    }));\n\n    this._disposables.push(this._editor.onDidChangeModel(function () {\n      if (!_this._ignoreModelChangeEvent) {\n        _this.closeWidget();\n      }\n    }));\n\n    var storageKey = 'peekViewLayout';\n    var data = LayoutData.fromJSON(this._storageService.get(storageKey, 0\n    /* GLOBAL */\n    , '{}'));\n    this._widget = this._instantiationService.createInstance(ReferenceWidget, this._editor, this._defaultTreeKeyboardSupport, data);\n\n    this._widget.setTitle(nls.localize('labelLoading', \"Loading...\"));\n\n    this._widget.show(range);\n\n    this._disposables.push(this._widget.onDidClose(function () {\n      modelPromise.cancel();\n\n      if (_this._widget) {\n        _this._storageService.store(storageKey, JSON.stringify(_this._widget.layoutData), 0\n        /* GLOBAL */\n        );\n\n        _this._widget = null;\n      }\n\n      _this.closeWidget();\n    }));\n\n    this._disposables.push(this._widget.onDidSelectReference(function (event) {\n      var element = event.element,\n          kind = event.kind;\n\n      switch (kind) {\n        case 'open':\n          if (event.source === 'editor' && _this._configurationService.getValue('editor.stablePeek')) {\n            // when stable peek is configured we don't close\n            // the peek window on selecting the editor\n            break;\n          }\n\n        case 'side':\n          if (element) {\n            _this.openReference(element, kind === 'side');\n          }\n\n          break;\n\n        case 'goto':\n          if (element) {\n            if (options.onGoto) {\n              options.onGoto(element);\n            } else {\n              _this._gotoReference(element);\n            }\n          }\n\n          break;\n      }\n    }));\n\n    var requestId = ++this._requestIdPool;\n    modelPromise.then(function (model) {\n      // still current request? widget still open?\n      if (requestId !== _this._requestIdPool || !_this._widget) {\n        return undefined;\n      }\n\n      if (_this._model) {\n        _this._model.dispose();\n      }\n\n      _this._model = model; // show widget\n\n      return _this._widget.setModel(_this._model).then(function () {\n        if (_this._widget && _this._model && _this._editor.hasModel()) {\n          // might have been closed\n          // set title\n          _this._widget.setMetaTitle(options.getMetaTitle(_this._model)); // set 'best' selection\n\n\n          var uri = _this._editor.getModel().uri;\n\n          var pos = new Position(range.startLineNumber, range.startColumn);\n\n          var selection = _this._model.nearestReference(uri, pos);\n\n          if (selection) {\n            return _this._widget.setSelection(selection);\n          }\n        }\n\n        return undefined;\n      });\n    }, function (error) {\n      _this._notificationService.error(error);\n    });\n  };\n\n  ReferencesController.prototype.goToNextOrPreviousReference = function (fwd) {\n    return __awaiter(this, void 0, void 0, function () {\n      var currentPosition, source, target, editorFocus;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (!this._editor.hasModel() || !this._model || !this._widget) {\n              // can be called while still resolving...\n              return [2\n              /*return*/\n              ];\n            }\n\n            currentPosition = this._widget.position;\n\n            if (!currentPosition) {\n              return [2\n              /*return*/\n              ];\n            }\n\n            source = this._model.nearestReference(this._editor.getModel().uri, currentPosition);\n\n            if (!source) {\n              return [2\n              /*return*/\n              ];\n            }\n\n            target = this._model.nextOrPreviousReference(source, fwd);\n            editorFocus = this._editor.hasTextFocus();\n            return [4\n            /*yield*/\n            , this._widget.setSelection(target)];\n\n          case 1:\n            _a.sent();\n\n            return [4\n            /*yield*/\n            , this._gotoReference(target)];\n\n          case 2:\n            _a.sent();\n\n            if (editorFocus) {\n              this._editor.focus();\n            }\n\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  ReferencesController.prototype.closeWidget = function () {\n    if (this._widget) {\n      dispose(this._widget);\n      this._widget = null;\n    }\n\n    this._referenceSearchVisible.reset();\n\n    this._disposables = dispose(this._disposables);\n\n    if (this._model) {\n      dispose(this._model);\n      this._model = null;\n    }\n\n    this._editor.focus();\n\n    this._requestIdPool += 1; // Cancel pending requests\n  };\n\n  ReferencesController.prototype._gotoReference = function (ref) {\n    var _this = this;\n\n    if (this._widget) {\n      this._widget.hide();\n    }\n\n    this._ignoreModelChangeEvent = true;\n    var range = Range.lift(ref.range).collapseToStart();\n    return this._editorService.openCodeEditor({\n      resource: ref.uri,\n      options: {\n        selection: range\n      }\n    }, this._editor).then(function (openedEditor) {\n      _this._ignoreModelChangeEvent = false;\n\n      if (!openedEditor || openedEditor !== _this._editor) {\n        // TODO@Alex TODO@Joh\n        // when opening the current reference we might end up\n        // in a different editor instance. that means we also have\n        // a different instance of this reference search controller\n        // and cannot hold onto the widget (which likely doesn't\n        // exist). Instead of bailing out we should find the\n        // 'sister' action and pass our current model on to it.\n        _this.closeWidget();\n\n        return;\n      }\n\n      if (_this._widget) {\n        _this._widget.show(range);\n\n        _this._widget.focus();\n      }\n    }, function (err) {\n      _this._ignoreModelChangeEvent = false;\n      onUnexpectedError(err);\n    });\n  };\n\n  ReferencesController.prototype.openReference = function (ref, sideBySide) {\n    // clear stage\n    if (!sideBySide) {\n      this.closeWidget();\n    }\n\n    var uri = ref.uri,\n        range = ref.range;\n\n    this._editorService.openCodeEditor({\n      resource: uri,\n      options: {\n        selection: range\n      }\n    }, this._editor, sideBySide);\n  };\n\n  ReferencesController.ID = 'editor.contrib.referencesController';\n  ReferencesController = __decorate([__param(2, IContextKeyService), __param(3, ICodeEditorService), __param(4, INotificationService), __param(5, IInstantiationService), __param(6, IStorageService), __param(7, IConfigurationService)], ReferencesController);\n  return ReferencesController;\n}();\n\nexport { ReferencesController };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { flatten, coalesce } from '../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../base/common/errors.js';\nimport { registerDefaultLanguageCommand } from '../../browser/editorExtensions.js';\nimport { DefinitionProviderRegistry, ImplementationProviderRegistry, TypeDefinitionProviderRegistry, DeclarationProviderRegistry } from '../../common/modes.js';\n\nfunction getDefinitions(model, position, registry, provide) {\n  var provider = registry.ordered(model); // get results\n\n  var promises = provider.map(function (provider) {\n    return Promise.resolve(provide(provider, model, position)).then(undefined, function (err) {\n      onUnexpectedExternalError(err);\n      return undefined;\n    });\n  });\n  return Promise.all(promises).then(flatten).then(coalesce);\n}\n\nexport function getDefinitionsAtPosition(model, position, token) {\n  return getDefinitions(model, position, DefinitionProviderRegistry, function (provider, model, position) {\n    return provider.provideDefinition(model, position, token);\n  });\n}\nexport function getDeclarationsAtPosition(model, position, token) {\n  return getDefinitions(model, position, DeclarationProviderRegistry, function (provider, model, position) {\n    return provider.provideDeclaration(model, position, token);\n  });\n}\nexport function getImplementationsAtPosition(model, position, token) {\n  return getDefinitions(model, position, ImplementationProviderRegistry, function (provider, model, position) {\n    return provider.provideImplementation(model, position, token);\n  });\n}\nexport function getTypeDefinitionsAtPosition(model, position, token) {\n  return getDefinitions(model, position, TypeDefinitionProviderRegistry, function (provider, model, position) {\n    return provider.provideTypeDefinition(model, position, token);\n  });\n}\nregisterDefaultLanguageCommand('_executeDefinitionProvider', function (model, position) {\n  return getDefinitionsAtPosition(model, position, CancellationToken.None);\n});\nregisterDefaultLanguageCommand('_executeDeclarationProvider', function (model, position) {\n  return getDeclarationsAtPosition(model, position, CancellationToken.None);\n});\nregisterDefaultLanguageCommand('_executeImplementationProvider', function (model, position) {\n  return getImplementationsAtPosition(model, position, CancellationToken.None);\n});\nregisterDefaultLanguageCommand('_executeTypeDefinitionProvider', function (model, position) {\n  return getTypeDefinitionsAtPosition(model, position, CancellationToken.None);\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nimport { alert } from '../../../base/browser/ui/aria/aria.js';\nimport { createCancelablePromise } from '../../../base/common/async.js';\nimport { KeyChord } from '../../../base/common/keyCodes.js';\nimport * as platform from '../../../base/common/platform.js';\nimport { EditorAction, registerEditorAction } from '../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\nimport { Range } from '../../common/core/range.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport { isLocationLink } from '../../common/modes.js';\nimport { MessageController } from '../message/messageController.js';\nimport { PeekContext } from '../referenceSearch/peekViewWidget.js';\nimport { ReferencesController } from '../referenceSearch/referencesController.js';\nimport { ReferencesModel } from '../referenceSearch/referencesModel.js';\nimport * as nls from '../../../nls.js';\nimport { MenuRegistry } from '../../../platform/actions/common/actions.js';\nimport { ContextKeyExpr } from '../../../platform/contextkey/common/contextkey.js';\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\nimport { IProgressService } from '../../../platform/progress/common/progress.js';\nimport { getDefinitionsAtPosition, getImplementationsAtPosition, getTypeDefinitionsAtPosition, getDeclarationsAtPosition } from './goToDefinition.js';\nimport { CommandsRegistry } from '../../../platform/commands/common/commands.js';\nimport { EditorStateCancellationTokenSource } from '../../browser/core/editorState.js';\n\nvar DefinitionActionConfig =\n/** @class */\nfunction () {\n  function DefinitionActionConfig(openToSide, openInPeek, filterCurrent, showMessage) {\n    if (openToSide === void 0) {\n      openToSide = false;\n    }\n\n    if (openInPeek === void 0) {\n      openInPeek = false;\n    }\n\n    if (filterCurrent === void 0) {\n      filterCurrent = true;\n    }\n\n    if (showMessage === void 0) {\n      showMessage = true;\n    }\n\n    this.openToSide = openToSide;\n    this.openInPeek = openInPeek;\n    this.filterCurrent = filterCurrent;\n    this.showMessage = showMessage; //\n  }\n\n  return DefinitionActionConfig;\n}();\n\nexport { DefinitionActionConfig };\n\nvar DefinitionAction =\n/** @class */\nfunction (_super) {\n  __extends(DefinitionAction, _super);\n\n  function DefinitionAction(configuration, opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this._configuration = configuration;\n    return _this;\n  }\n\n  DefinitionAction.prototype.run = function (accessor, editor) {\n    var _this = this;\n\n    if (!editor.hasModel()) {\n      return Promise.resolve(undefined);\n    }\n\n    var notificationService = accessor.get(INotificationService);\n    var editorService = accessor.get(ICodeEditorService);\n    var progressService = accessor.get(IProgressService);\n    var model = editor.getModel();\n    var pos = editor.getPosition();\n    var cts = new EditorStateCancellationTokenSource(editor, 1\n    /* Value */\n    | 4\n    /* Position */\n    );\n\n    var definitionPromise = this._getTargetLocationForPosition(model, pos, cts.token).then(function (references) {\n      return __awaiter(_this, void 0, void 0, function () {\n        var idxOfCurrent, result, _i, references_1, reference, newLen, info, current;\n\n        return __generator(this, function (_a) {\n          if (cts.token.isCancellationRequested || model.isDisposed() || editor.getModel() !== model) {\n            // new model, no more model\n            return [2\n            /*return*/\n            ];\n          }\n\n          idxOfCurrent = -1;\n          result = [];\n\n          for (_i = 0, references_1 = references; _i < references_1.length; _i++) {\n            reference = references_1[_i];\n\n            if (!reference || !reference.range) {\n              continue;\n            }\n\n            newLen = result.push(reference);\n\n            if (this._configuration.filterCurrent && reference.uri.toString() === model.uri.toString() && Range.containsPosition(reference.range, pos) && idxOfCurrent === -1) {\n              idxOfCurrent = newLen - 1;\n            }\n          }\n\n          if (result.length === 0) {\n            // no result -> show message\n            if (this._configuration.showMessage) {\n              info = model.getWordAtPosition(pos);\n              MessageController.get(editor).showMessage(this._getNoResultFoundMessage(info), pos);\n            }\n          } else if (result.length === 1 && idxOfCurrent !== -1) {\n            current = result[0];\n            return [2\n            /*return*/\n            , this._openReference(editor, editorService, current, false).then(function () {\n              return undefined;\n            })];\n          } else {\n            // handle multile results\n            return [2\n            /*return*/\n            , this._onResult(editorService, editor, new ReferencesModel(result))];\n          }\n\n          return [2\n          /*return*/\n          ];\n        });\n      });\n    }, function (err) {\n      // report an error\n      notificationService.error(err);\n    }).finally(function () {\n      cts.dispose();\n    });\n\n    progressService.showWhile(definitionPromise, 250);\n    return definitionPromise;\n  };\n\n  DefinitionAction.prototype._getTargetLocationForPosition = function (model, position, token) {\n    return getDefinitionsAtPosition(model, position, token);\n  };\n\n  DefinitionAction.prototype._getNoResultFoundMessage = function (info) {\n    return info && info.word ? nls.localize('noResultWord', \"No definition found for '{0}'\", info.word) : nls.localize('generic.noResults', \"No definition found\");\n  };\n\n  DefinitionAction.prototype._getMetaTitle = function (model) {\n    return model.references.length > 1 ? nls.localize('meta.title', \" – {0} definitions\", model.references.length) : '';\n  };\n\n  DefinitionAction.prototype._onResult = function (editorService, editor, model) {\n    return __awaiter(this, void 0, void 0, function () {\n      var msg, gotoLocation, next, targetEditor;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            msg = model.getAriaMessage();\n            alert(msg);\n            gotoLocation = editor.getConfiguration().contribInfo.gotoLocation;\n            if (!(this._configuration.openInPeek || gotoLocation.multiple === 'peek' && model.references.length > 1)) return [3\n            /*break*/\n            , 1];\n\n            this._openInPeek(editorService, editor, model);\n\n            return [3\n            /*break*/\n            , 3];\n\n          case 1:\n            if (!editor.hasModel()) return [3\n            /*break*/\n            , 3];\n            next = model.firstReference();\n\n            if (!next) {\n              return [2\n              /*return*/\n              ];\n            }\n\n            return [4\n            /*yield*/\n            , this._openReference(editor, editorService, next, this._configuration.openToSide)];\n\n          case 2:\n            targetEditor = _a.sent();\n\n            if (targetEditor && model.references.length > 1 && gotoLocation.multiple === 'gotoAndPeek') {\n              this._openInPeek(editorService, targetEditor, model);\n            } else {\n              model.dispose();\n            }\n\n            _a.label = 3;\n\n          case 3:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  DefinitionAction.prototype._openReference = function (editor, editorService, reference, sideBySide) {\n    // range is the target-selection-range when we have one\n    // and the the fallback is the 'full' range\n    var range = undefined;\n\n    if (isLocationLink(reference)) {\n      range = reference.targetSelectionRange;\n    }\n\n    if (!range) {\n      range = reference.range;\n    }\n\n    return editorService.openCodeEditor({\n      resource: reference.uri,\n      options: {\n        selection: Range.collapseToStart(range),\n        revealIfOpened: true,\n        revealInCenterIfOutsideViewport: true\n      }\n    }, editor, sideBySide);\n  };\n\n  DefinitionAction.prototype._openInPeek = function (editorService, target, model) {\n    var _this = this;\n\n    var controller = ReferencesController.get(target);\n\n    if (controller && target.hasModel()) {\n      controller.toggleWidget(target.getSelection(), createCancelablePromise(function (_) {\n        return Promise.resolve(model);\n      }), {\n        getMetaTitle: function getMetaTitle(model) {\n          return _this._getMetaTitle(model);\n        },\n        onGoto: function onGoto(reference) {\n          controller.closeWidget();\n          return _this._openReference(target, editorService, reference, false);\n        }\n      });\n    } else {\n      model.dispose();\n    }\n  };\n\n  return DefinitionAction;\n}(EditorAction);\n\nexport { DefinitionAction };\nvar goToDefinitionKb = platform.isWeb ? 2048\n/* CtrlCmd */\n| 70\n/* F12 */\n: 70\n/* F12 */\n;\n\nvar GoToDefinitionAction =\n/** @class */\nfunction (_super) {\n  __extends(GoToDefinitionAction, _super);\n\n  function GoToDefinitionAction() {\n    var _this = _super.call(this, new DefinitionActionConfig(), {\n      id: GoToDefinitionAction.id,\n      label: nls.localize('actions.goToDecl.label', \"Go to Definition\"),\n      alias: 'Go to Definition',\n      precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, EditorContextKeys.isInEmbeddedEditor.toNegated()),\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: goToDefinitionKb,\n        weight: 100\n        /* EditorContrib */\n\n      },\n      menuOpts: {\n        group: 'navigation',\n        order: 1.1\n      }\n    }) || this;\n\n    CommandsRegistry.registerCommandAlias('editor.action.goToDeclaration', GoToDefinitionAction.id);\n    return _this;\n  }\n\n  GoToDefinitionAction.id = 'editor.action.revealDefinition';\n  return GoToDefinitionAction;\n}(DefinitionAction);\n\nexport { GoToDefinitionAction };\n\nvar OpenDefinitionToSideAction =\n/** @class */\nfunction (_super) {\n  __extends(OpenDefinitionToSideAction, _super);\n\n  function OpenDefinitionToSideAction() {\n    var _this = _super.call(this, new DefinitionActionConfig(true), {\n      id: OpenDefinitionToSideAction.id,\n      label: nls.localize('actions.goToDeclToSide.label', \"Open Definition to the Side\"),\n      alias: 'Open Definition to the Side',\n      precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, EditorContextKeys.isInEmbeddedEditor.toNegated()),\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: KeyChord(2048\n        /* CtrlCmd */\n        | 41\n        /* KEY_K */\n        , goToDefinitionKb),\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n\n    CommandsRegistry.registerCommandAlias('editor.action.openDeclarationToTheSide', OpenDefinitionToSideAction.id);\n    return _this;\n  }\n\n  OpenDefinitionToSideAction.id = 'editor.action.revealDefinitionAside';\n  return OpenDefinitionToSideAction;\n}(DefinitionAction);\n\nexport { OpenDefinitionToSideAction };\n\nvar PeekDefinitionAction =\n/** @class */\nfunction (_super) {\n  __extends(PeekDefinitionAction, _super);\n\n  function PeekDefinitionAction() {\n    var _this = _super.call(this, new DefinitionActionConfig(undefined, true, false), {\n      id: PeekDefinitionAction.id,\n      label: nls.localize('actions.previewDecl.label', \"Peek Definition\"),\n      alias: 'Peek Definition',\n      precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInEmbeddedEditor.toNegated()),\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 512\n        /* Alt */\n        | 70\n        /* F12 */\n        ,\n        linux: {\n          primary: 2048\n          /* CtrlCmd */\n          | 1024\n          /* Shift */\n          | 68\n          /* F10 */\n\n        },\n        weight: 100\n        /* EditorContrib */\n\n      },\n      menuOpts: {\n        group: 'navigation',\n        order: 1.2\n      }\n    }) || this;\n\n    CommandsRegistry.registerCommandAlias('editor.action.previewDeclaration', PeekDefinitionAction.id);\n    return _this;\n  }\n\n  PeekDefinitionAction.id = 'editor.action.peekDefinition';\n  return PeekDefinitionAction;\n}(DefinitionAction);\n\nexport { PeekDefinitionAction };\n\nvar DeclarationAction =\n/** @class */\nfunction (_super) {\n  __extends(DeclarationAction, _super);\n\n  function DeclarationAction() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  DeclarationAction.prototype._getTargetLocationForPosition = function (model, position, token) {\n    return getDeclarationsAtPosition(model, position, token);\n  };\n\n  DeclarationAction.prototype._getNoResultFoundMessage = function (info) {\n    return info && info.word ? nls.localize('decl.noResultWord', \"No declaration found for '{0}'\", info.word) : nls.localize('decl.generic.noResults', \"No declaration found\");\n  };\n\n  DeclarationAction.prototype._getMetaTitle = function (model) {\n    return model.references.length > 1 ? nls.localize('decl.meta.title', \" – {0} declarations\", model.references.length) : '';\n  };\n\n  return DeclarationAction;\n}(DefinitionAction);\n\nexport { DeclarationAction };\n\nvar GoToDeclarationAction =\n/** @class */\nfunction (_super) {\n  __extends(GoToDeclarationAction, _super);\n\n  function GoToDeclarationAction() {\n    return _super.call(this, new DefinitionActionConfig(), {\n      id: GoToDeclarationAction.id,\n      label: nls.localize('actions.goToDeclaration.label', \"Go to Declaration\"),\n      alias: 'Go to Declaration',\n      precondition: ContextKeyExpr.and(EditorContextKeys.hasDeclarationProvider, EditorContextKeys.isInEmbeddedEditor.toNegated()),\n      menuOpts: {\n        group: 'navigation',\n        order: 1.3\n      }\n    }) || this;\n  }\n\n  GoToDeclarationAction.prototype._getNoResultFoundMessage = function (info) {\n    return info && info.word ? nls.localize('decl.noResultWord', \"No declaration found for '{0}'\", info.word) : nls.localize('decl.generic.noResults', \"No declaration found\");\n  };\n\n  GoToDeclarationAction.prototype._getMetaTitle = function (model) {\n    return model.references.length > 1 ? nls.localize('decl.meta.title', \" – {0} declarations\", model.references.length) : '';\n  };\n\n  GoToDeclarationAction.id = 'editor.action.revealDeclaration';\n  return GoToDeclarationAction;\n}(DeclarationAction);\n\nexport { GoToDeclarationAction };\n\nvar PeekDeclarationAction =\n/** @class */\nfunction (_super) {\n  __extends(PeekDeclarationAction, _super);\n\n  function PeekDeclarationAction() {\n    return _super.call(this, new DefinitionActionConfig(undefined, true, false), {\n      id: 'editor.action.peekDeclaration',\n      label: nls.localize('actions.peekDecl.label', \"Peek Declaration\"),\n      alias: 'Peek Declaration',\n      precondition: ContextKeyExpr.and(EditorContextKeys.hasDeclarationProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInEmbeddedEditor.toNegated()),\n      menuOpts: {\n        group: 'navigation',\n        order: 1.31\n      }\n    }) || this;\n  }\n\n  return PeekDeclarationAction;\n}(DeclarationAction);\n\nexport { PeekDeclarationAction };\n\nvar ImplementationAction =\n/** @class */\nfunction (_super) {\n  __extends(ImplementationAction, _super);\n\n  function ImplementationAction() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  ImplementationAction.prototype._getTargetLocationForPosition = function (model, position, token) {\n    return getImplementationsAtPosition(model, position, token);\n  };\n\n  ImplementationAction.prototype._getNoResultFoundMessage = function (info) {\n    return info && info.word ? nls.localize('goToImplementation.noResultWord', \"No implementation found for '{0}'\", info.word) : nls.localize('goToImplementation.generic.noResults', \"No implementation found\");\n  };\n\n  ImplementationAction.prototype._getMetaTitle = function (model) {\n    return model.references.length > 1 ? nls.localize('meta.implementations.title', \" – {0} implementations\", model.references.length) : '';\n  };\n\n  return ImplementationAction;\n}(DefinitionAction);\n\nexport { ImplementationAction };\n\nvar GoToImplementationAction =\n/** @class */\nfunction (_super) {\n  __extends(GoToImplementationAction, _super);\n\n  function GoToImplementationAction() {\n    return _super.call(this, new DefinitionActionConfig(), {\n      id: GoToImplementationAction.ID,\n      label: nls.localize('actions.goToImplementation.label', \"Go to Implementation\"),\n      alias: 'Go to Implementation',\n      precondition: ContextKeyExpr.and(EditorContextKeys.hasImplementationProvider, EditorContextKeys.isInEmbeddedEditor.toNegated()),\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048\n        /* CtrlCmd */\n        | 70\n        /* F12 */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  GoToImplementationAction.ID = 'editor.action.goToImplementation';\n  return GoToImplementationAction;\n}(ImplementationAction);\n\nexport { GoToImplementationAction };\n\nvar PeekImplementationAction =\n/** @class */\nfunction (_super) {\n  __extends(PeekImplementationAction, _super);\n\n  function PeekImplementationAction() {\n    return _super.call(this, new DefinitionActionConfig(false, true, false), {\n      id: PeekImplementationAction.ID,\n      label: nls.localize('actions.peekImplementation.label', \"Peek Implementation\"),\n      alias: 'Peek Implementation',\n      precondition: ContextKeyExpr.and(EditorContextKeys.hasImplementationProvider, EditorContextKeys.isInEmbeddedEditor.toNegated()),\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048\n        /* CtrlCmd */\n        | 1024\n        /* Shift */\n        | 70\n        /* F12 */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  PeekImplementationAction.ID = 'editor.action.peekImplementation';\n  return PeekImplementationAction;\n}(ImplementationAction);\n\nexport { PeekImplementationAction };\n\nvar TypeDefinitionAction =\n/** @class */\nfunction (_super) {\n  __extends(TypeDefinitionAction, _super);\n\n  function TypeDefinitionAction() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  TypeDefinitionAction.prototype._getTargetLocationForPosition = function (model, position, token) {\n    return getTypeDefinitionsAtPosition(model, position, token);\n  };\n\n  TypeDefinitionAction.prototype._getNoResultFoundMessage = function (info) {\n    return info && info.word ? nls.localize('goToTypeDefinition.noResultWord', \"No type definition found for '{0}'\", info.word) : nls.localize('goToTypeDefinition.generic.noResults', \"No type definition found\");\n  };\n\n  TypeDefinitionAction.prototype._getMetaTitle = function (model) {\n    return model.references.length > 1 ? nls.localize('meta.typeDefinitions.title', \" – {0} type definitions\", model.references.length) : '';\n  };\n\n  return TypeDefinitionAction;\n}(DefinitionAction);\n\nexport { TypeDefinitionAction };\n\nvar GoToTypeDefinitionAction =\n/** @class */\nfunction (_super) {\n  __extends(GoToTypeDefinitionAction, _super);\n\n  function GoToTypeDefinitionAction() {\n    return _super.call(this, new DefinitionActionConfig(), {\n      id: GoToTypeDefinitionAction.ID,\n      label: nls.localize('actions.goToTypeDefinition.label', \"Go to Type Definition\"),\n      alias: 'Go to Type Definition',\n      precondition: ContextKeyExpr.and(EditorContextKeys.hasTypeDefinitionProvider, EditorContextKeys.isInEmbeddedEditor.toNegated()),\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 0,\n        weight: 100\n        /* EditorContrib */\n\n      },\n      menuOpts: {\n        group: 'navigation',\n        order: 1.4\n      }\n    }) || this;\n  }\n\n  GoToTypeDefinitionAction.ID = 'editor.action.goToTypeDefinition';\n  return GoToTypeDefinitionAction;\n}(TypeDefinitionAction);\n\nexport { GoToTypeDefinitionAction };\n\nvar PeekTypeDefinitionAction =\n/** @class */\nfunction (_super) {\n  __extends(PeekTypeDefinitionAction, _super);\n\n  function PeekTypeDefinitionAction() {\n    return _super.call(this, new DefinitionActionConfig(false, true, false), {\n      id: PeekTypeDefinitionAction.ID,\n      label: nls.localize('actions.peekTypeDefinition.label', \"Peek Type Definition\"),\n      alias: 'Peek Type Definition',\n      precondition: ContextKeyExpr.and(EditorContextKeys.hasTypeDefinitionProvider, EditorContextKeys.isInEmbeddedEditor.toNegated()),\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 0,\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  PeekTypeDefinitionAction.ID = 'editor.action.peekTypeDefinition';\n  return PeekTypeDefinitionAction;\n}(TypeDefinitionAction);\n\nexport { PeekTypeDefinitionAction };\nregisterEditorAction(GoToDefinitionAction);\nregisterEditorAction(OpenDefinitionToSideAction);\nregisterEditorAction(PeekDefinitionAction);\nregisterEditorAction(GoToDeclarationAction);\nregisterEditorAction(PeekDeclarationAction);\nregisterEditorAction(GoToImplementationAction);\nregisterEditorAction(PeekImplementationAction);\nregisterEditorAction(GoToTypeDefinitionAction);\nregisterEditorAction(PeekTypeDefinitionAction); // Go to menu\n\nMenuRegistry.appendMenuItem(16\n/* MenubarGoMenu */\n, {\n  group: '4_symbol_nav',\n  command: {\n    id: 'editor.action.goToDeclaration',\n    title: nls.localize({\n      key: 'miGotoDefinition',\n      comment: ['&& denotes a mnemonic']\n    }, \"Go to &&Definition\")\n  },\n  order: 2\n});\nMenuRegistry.appendMenuItem(16\n/* MenubarGoMenu */\n, {\n  group: '4_symbol_nav',\n  command: {\n    id: 'editor.action.goToTypeDefinition',\n    title: nls.localize({\n      key: 'miGotoTypeDefinition',\n      comment: ['&& denotes a mnemonic']\n    }, \"Go to &&Type Definition\")\n  },\n  order: 3\n});\nMenuRegistry.appendMenuItem(16\n/* MenubarGoMenu */\n, {\n  group: '4_symbol_nav',\n  command: {\n    id: 'editor.action.goToImplementation',\n    title: nls.localize({\n      key: 'miGotoImplementation',\n      comment: ['&& denotes a mnemonic']\n    }, \"Go to &&Implementation\")\n  },\n  order: 4\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport './goToDefinitionMouse.css';\nimport * as browser from '../../../base/browser/browser.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport * as platform from '../../../base/common/platform.js';\n\nfunction hasModifier(e, modifier) {\n  return !!e[modifier];\n}\n/**\n * An event that encapsulates the various trigger modifiers logic needed for go to definition.\n */\n\n\nvar ClickLinkMouseEvent =\n/** @class */\nfunction () {\n  function ClickLinkMouseEvent(source, opts) {\n    this.target = source.target;\n    this.hasTriggerModifier = hasModifier(source.event, opts.triggerModifier);\n    this.hasSideBySideModifier = hasModifier(source.event, opts.triggerSideBySideModifier);\n    this.isNoneOrSingleMouseDown = browser.isIE || source.event.detail <= 1; // IE does not support event.detail properly\n  }\n\n  return ClickLinkMouseEvent;\n}();\n\nexport { ClickLinkMouseEvent };\n/**\n * An event that encapsulates the various trigger modifiers logic needed for go to definition.\n */\n\nvar ClickLinkKeyboardEvent =\n/** @class */\nfunction () {\n  function ClickLinkKeyboardEvent(source, opts) {\n    this.keyCodeIsTriggerKey = source.keyCode === opts.triggerKey;\n    this.keyCodeIsSideBySideKey = source.keyCode === opts.triggerSideBySideKey;\n    this.hasTriggerModifier = hasModifier(source, opts.triggerModifier);\n  }\n\n  return ClickLinkKeyboardEvent;\n}();\n\nexport { ClickLinkKeyboardEvent };\n\nvar ClickLinkOptions =\n/** @class */\nfunction () {\n  function ClickLinkOptions(triggerKey, triggerModifier, triggerSideBySideKey, triggerSideBySideModifier) {\n    this.triggerKey = triggerKey;\n    this.triggerModifier = triggerModifier;\n    this.triggerSideBySideKey = triggerSideBySideKey;\n    this.triggerSideBySideModifier = triggerSideBySideModifier;\n  }\n\n  ClickLinkOptions.prototype.equals = function (other) {\n    return this.triggerKey === other.triggerKey && this.triggerModifier === other.triggerModifier && this.triggerSideBySideKey === other.triggerSideBySideKey && this.triggerSideBySideModifier === other.triggerSideBySideModifier;\n  };\n\n  return ClickLinkOptions;\n}();\n\nexport { ClickLinkOptions };\n\nfunction createOptions(multiCursorModifier) {\n  if (multiCursorModifier === 'altKey') {\n    if (platform.isMacintosh) {\n      return new ClickLinkOptions(57\n      /* Meta */\n      , 'metaKey', 6\n      /* Alt */\n      , 'altKey');\n    }\n\n    return new ClickLinkOptions(5\n    /* Ctrl */\n    , 'ctrlKey', 6\n    /* Alt */\n    , 'altKey');\n  }\n\n  if (platform.isMacintosh) {\n    return new ClickLinkOptions(6\n    /* Alt */\n    , 'altKey', 57\n    /* Meta */\n    , 'metaKey');\n  }\n\n  return new ClickLinkOptions(6\n  /* Alt */\n  , 'altKey', 5\n  /* Ctrl */\n  , 'ctrlKey');\n}\n\nvar ClickLinkGesture =\n/** @class */\nfunction (_super) {\n  __extends(ClickLinkGesture, _super);\n\n  function ClickLinkGesture(editor) {\n    var _this = _super.call(this) || this;\n\n    _this._onMouseMoveOrRelevantKeyDown = _this._register(new Emitter());\n    _this.onMouseMoveOrRelevantKeyDown = _this._onMouseMoveOrRelevantKeyDown.event;\n    _this._onExecute = _this._register(new Emitter());\n    _this.onExecute = _this._onExecute.event;\n    _this._onCancel = _this._register(new Emitter());\n    _this.onCancel = _this._onCancel.event;\n    _this._editor = editor;\n    _this._opts = createOptions(_this._editor.getConfiguration().multiCursorModifier);\n    _this.lastMouseMoveEvent = null;\n    _this.hasTriggerKeyOnMouseDown = false;\n\n    _this._register(_this._editor.onDidChangeConfiguration(function (e) {\n      if (e.multiCursorModifier) {\n        var newOpts = createOptions(_this._editor.getConfiguration().multiCursorModifier);\n\n        if (_this._opts.equals(newOpts)) {\n          return;\n        }\n\n        _this._opts = newOpts;\n        _this.lastMouseMoveEvent = null;\n        _this.hasTriggerKeyOnMouseDown = false;\n\n        _this._onCancel.fire();\n      }\n    }));\n\n    _this._register(_this._editor.onMouseMove(function (e) {\n      return _this.onEditorMouseMove(new ClickLinkMouseEvent(e, _this._opts));\n    }));\n\n    _this._register(_this._editor.onMouseDown(function (e) {\n      return _this.onEditorMouseDown(new ClickLinkMouseEvent(e, _this._opts));\n    }));\n\n    _this._register(_this._editor.onMouseUp(function (e) {\n      return _this.onEditorMouseUp(new ClickLinkMouseEvent(e, _this._opts));\n    }));\n\n    _this._register(_this._editor.onKeyDown(function (e) {\n      return _this.onEditorKeyDown(new ClickLinkKeyboardEvent(e, _this._opts));\n    }));\n\n    _this._register(_this._editor.onKeyUp(function (e) {\n      return _this.onEditorKeyUp(new ClickLinkKeyboardEvent(e, _this._opts));\n    }));\n\n    _this._register(_this._editor.onMouseDrag(function () {\n      return _this.resetHandler();\n    }));\n\n    _this._register(_this._editor.onDidChangeCursorSelection(function (e) {\n      return _this.onDidChangeCursorSelection(e);\n    }));\n\n    _this._register(_this._editor.onDidChangeModel(function (e) {\n      return _this.resetHandler();\n    }));\n\n    _this._register(_this._editor.onDidChangeModelContent(function () {\n      return _this.resetHandler();\n    }));\n\n    _this._register(_this._editor.onDidScrollChange(function (e) {\n      if (e.scrollTopChanged || e.scrollLeftChanged) {\n        _this.resetHandler();\n      }\n    }));\n\n    return _this;\n  }\n\n  ClickLinkGesture.prototype.onDidChangeCursorSelection = function (e) {\n    if (e.selection && e.selection.startColumn !== e.selection.endColumn) {\n      this.resetHandler(); // immediately stop this feature if the user starts to select (https://github.com/Microsoft/vscode/issues/7827)\n    }\n  };\n\n  ClickLinkGesture.prototype.onEditorMouseMove = function (mouseEvent) {\n    this.lastMouseMoveEvent = mouseEvent;\n\n    this._onMouseMoveOrRelevantKeyDown.fire([mouseEvent, null]);\n  };\n\n  ClickLinkGesture.prototype.onEditorMouseDown = function (mouseEvent) {\n    // We need to record if we had the trigger key on mouse down because someone might select something in the editor\n    // holding the mouse down and then while mouse is down start to press Ctrl/Cmd to start a copy operation and then\n    // release the mouse button without wanting to do the navigation.\n    // With this flag we prevent goto definition if the mouse was down before the trigger key was pressed.\n    this.hasTriggerKeyOnMouseDown = mouseEvent.hasTriggerModifier;\n  };\n\n  ClickLinkGesture.prototype.onEditorMouseUp = function (mouseEvent) {\n    if (this.hasTriggerKeyOnMouseDown) {\n      this._onExecute.fire(mouseEvent);\n    }\n  };\n\n  ClickLinkGesture.prototype.onEditorKeyDown = function (e) {\n    if (this.lastMouseMoveEvent && (e.keyCodeIsTriggerKey // User just pressed Ctrl/Cmd (normal goto definition)\n    || e.keyCodeIsSideBySideKey && e.hasTriggerModifier // User pressed Ctrl/Cmd+Alt (goto definition to the side)\n    )) {\n      this._onMouseMoveOrRelevantKeyDown.fire([this.lastMouseMoveEvent, e]);\n    } else if (e.hasTriggerModifier) {\n      this._onCancel.fire(); // remove decorations if user holds another key with ctrl/cmd to prevent accident goto declaration\n\n    }\n  };\n\n  ClickLinkGesture.prototype.onEditorKeyUp = function (e) {\n    if (e.keyCodeIsTriggerKey) {\n      this._onCancel.fire();\n    }\n  };\n\n  ClickLinkGesture.prototype.resetHandler = function () {\n    this.lastMouseMoveEvent = null;\n    this.hasTriggerKeyOnMouseDown = false;\n\n    this._onCancel.fire();\n  };\n\n  return ClickLinkGesture;\n}(Disposable);\n\nexport { ClickLinkGesture };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport './goToDefinitionMouse.css';\nimport * as nls from '../../../nls.js';\nimport { createCancelablePromise } from '../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { MarkdownString } from '../../../base/common/htmlContent.js';\nimport { IModeService } from '../../common/services/modeService.js';\nimport { Range } from '../../common/core/range.js';\nimport { DefinitionProviderRegistry } from '../../common/modes.js';\nimport { registerEditorContribution } from '../../browser/editorExtensions.js';\nimport { getDefinitionsAtPosition } from './goToDefinition.js';\nimport { dispose } from '../../../base/common/lifecycle.js';\nimport { ITextModelService } from '../../common/services/resolverService.js';\nimport { registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\nimport { editorActiveLinkForeground } from '../../../platform/theme/common/colorRegistry.js';\nimport { EditorState } from '../../browser/core/editorState.js';\nimport { DefinitionAction, DefinitionActionConfig } from './goToDefinitionCommands.js';\nimport { ClickLinkGesture } from './clickLinkGesture.js';\nimport { Position } from '../../common/core/position.js';\nimport { withNullAsUndefined } from '../../../base/common/types.js';\n\nvar GotoDefinitionWithMouseEditorContribution =\n/** @class */\nfunction () {\n  function GotoDefinitionWithMouseEditorContribution(editor, textModelResolverService, modeService) {\n    var _this = this;\n\n    this.textModelResolverService = textModelResolverService;\n    this.modeService = modeService;\n    this.toUnhook = [];\n    this.decorations = [];\n    this.editor = editor;\n    this.previousPromise = null;\n    var linkGesture = new ClickLinkGesture(editor);\n    this.toUnhook.push(linkGesture);\n    this.toUnhook.push(linkGesture.onMouseMoveOrRelevantKeyDown(function (_a) {\n      var mouseEvent = _a[0],\n          keyboardEvent = _a[1];\n\n      _this.startFindDefinition(mouseEvent, withNullAsUndefined(keyboardEvent));\n    }));\n    this.toUnhook.push(linkGesture.onExecute(function (mouseEvent) {\n      if (_this.isEnabled(mouseEvent)) {\n        _this.gotoDefinition(mouseEvent.target, mouseEvent.hasSideBySideModifier).then(function () {\n          _this.removeDecorations();\n        }, function (error) {\n          _this.removeDecorations();\n\n          onUnexpectedError(error);\n        });\n      }\n    }));\n    this.toUnhook.push(linkGesture.onCancel(function () {\n      _this.removeDecorations();\n\n      _this.currentWordUnderMouse = null;\n    }));\n  }\n\n  GotoDefinitionWithMouseEditorContribution.prototype.startFindDefinition = function (mouseEvent, withKey) {\n    var _this = this; // check if we are active and on a content widget\n\n\n    if (mouseEvent.target.type === 9\n    /* CONTENT_WIDGET */\n    && this.decorations.length > 0) {\n      return;\n    }\n\n    if (!this.editor.hasModel() || !this.isEnabled(mouseEvent, withKey)) {\n      this.currentWordUnderMouse = null;\n      this.removeDecorations();\n      return;\n    } // Find word at mouse position\n\n\n    var word = mouseEvent.target.position ? this.editor.getModel().getWordAtPosition(mouseEvent.target.position) : null;\n\n    if (!word) {\n      this.currentWordUnderMouse = null;\n      this.removeDecorations();\n      return;\n    }\n\n    var position = mouseEvent.target.position; // Return early if word at position is still the same\n\n    if (this.currentWordUnderMouse && this.currentWordUnderMouse.startColumn === word.startColumn && this.currentWordUnderMouse.endColumn === word.endColumn && this.currentWordUnderMouse.word === word.word) {\n      return;\n    }\n\n    this.currentWordUnderMouse = word; // Find definition and decorate word if found\n\n    var state = new EditorState(this.editor, 4\n    /* Position */\n    | 1\n    /* Value */\n    | 2\n    /* Selection */\n    | 8\n    /* Scroll */\n    );\n\n    if (this.previousPromise) {\n      this.previousPromise.cancel();\n      this.previousPromise = null;\n    }\n\n    this.previousPromise = createCancelablePromise(function (token) {\n      return _this.findDefinition(mouseEvent.target, token);\n    });\n    this.previousPromise.then(function (results) {\n      if (!results || !results.length || !state.validate(_this.editor)) {\n        _this.removeDecorations();\n\n        return;\n      } // Multiple results\n\n\n      if (results.length > 1) {\n        _this.addDecoration(new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn), new MarkdownString().appendText(nls.localize('multipleResults', \"Click to show {0} definitions.\", results.length)));\n      } // Single result\n      else {\n          var result_1 = results[0];\n\n          if (!result_1.uri) {\n            return;\n          }\n\n          _this.textModelResolverService.createModelReference(result_1.uri).then(function (ref) {\n            if (!ref.object || !ref.object.textEditorModel) {\n              ref.dispose();\n              return;\n            }\n\n            var textEditorModel = ref.object.textEditorModel;\n            var startLineNumber = result_1.range.startLineNumber;\n\n            if (startLineNumber < 1 || startLineNumber > textEditorModel.getLineCount()) {\n              // invalid range\n              ref.dispose();\n              return;\n            }\n\n            var previewValue = _this.getPreviewValue(textEditorModel, startLineNumber);\n\n            var wordRange;\n\n            if (result_1.originSelectionRange) {\n              wordRange = Range.lift(result_1.originSelectionRange);\n            } else {\n              wordRange = new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn);\n            }\n\n            var modeId = _this.modeService.getModeIdByFilepathOrFirstLine(textEditorModel.uri.fsPath);\n\n            _this.addDecoration(wordRange, new MarkdownString().appendCodeblock(modeId ? modeId : '', previewValue));\n\n            ref.dispose();\n          });\n        }\n    }).then(undefined, onUnexpectedError);\n  };\n\n  GotoDefinitionWithMouseEditorContribution.prototype.getPreviewValue = function (textEditorModel, startLineNumber) {\n    var rangeToUse = this.getPreviewRangeBasedOnBrackets(textEditorModel, startLineNumber);\n    var numberOfLinesInRange = rangeToUse.endLineNumber - rangeToUse.startLineNumber;\n\n    if (numberOfLinesInRange >= GotoDefinitionWithMouseEditorContribution.MAX_SOURCE_PREVIEW_LINES) {\n      rangeToUse = this.getPreviewRangeBasedOnIndentation(textEditorModel, startLineNumber);\n    }\n\n    var previewValue = this.stripIndentationFromPreviewRange(textEditorModel, startLineNumber, rangeToUse);\n    return previewValue;\n  };\n\n  GotoDefinitionWithMouseEditorContribution.prototype.stripIndentationFromPreviewRange = function (textEditorModel, startLineNumber, previewRange) {\n    var startIndent = textEditorModel.getLineFirstNonWhitespaceColumn(startLineNumber);\n    var minIndent = startIndent;\n\n    for (var endLineNumber = startLineNumber + 1; endLineNumber < previewRange.endLineNumber; endLineNumber++) {\n      var endIndent = textEditorModel.getLineFirstNonWhitespaceColumn(endLineNumber);\n      minIndent = Math.min(minIndent, endIndent);\n    }\n\n    var previewValue = textEditorModel.getValueInRange(previewRange).replace(new RegExp(\"^\\\\s{\" + (minIndent - 1) + \"}\", 'gm'), '').trim();\n    return previewValue;\n  };\n\n  GotoDefinitionWithMouseEditorContribution.prototype.getPreviewRangeBasedOnIndentation = function (textEditorModel, startLineNumber) {\n    var startIndent = textEditorModel.getLineFirstNonWhitespaceColumn(startLineNumber);\n    var maxLineNumber = Math.min(textEditorModel.getLineCount(), startLineNumber + GotoDefinitionWithMouseEditorContribution.MAX_SOURCE_PREVIEW_LINES);\n    var endLineNumber = startLineNumber + 1;\n\n    for (; endLineNumber < maxLineNumber; endLineNumber++) {\n      var endIndent = textEditorModel.getLineFirstNonWhitespaceColumn(endLineNumber);\n\n      if (startIndent === endIndent) {\n        break;\n      }\n    }\n\n    return new Range(startLineNumber, 1, endLineNumber + 1, 1);\n  };\n\n  GotoDefinitionWithMouseEditorContribution.prototype.getPreviewRangeBasedOnBrackets = function (textEditorModel, startLineNumber) {\n    var maxLineNumber = Math.min(textEditorModel.getLineCount(), startLineNumber + GotoDefinitionWithMouseEditorContribution.MAX_SOURCE_PREVIEW_LINES);\n    var brackets = [];\n    var ignoreFirstEmpty = true;\n    var currentBracket = textEditorModel.findNextBracket(new Position(startLineNumber, 1));\n\n    while (currentBracket !== null) {\n      if (brackets.length === 0) {\n        brackets.push(currentBracket);\n      } else {\n        var lastBracket = brackets[brackets.length - 1];\n\n        if (lastBracket.open === currentBracket.open && lastBracket.isOpen && !currentBracket.isOpen) {\n          brackets.pop();\n        } else {\n          brackets.push(currentBracket);\n        }\n\n        if (brackets.length === 0) {\n          if (ignoreFirstEmpty) {\n            ignoreFirstEmpty = false;\n          } else {\n            return new Range(startLineNumber, 1, currentBracket.range.endLineNumber + 1, 1);\n          }\n        }\n      }\n\n      var maxColumn = textEditorModel.getLineMaxColumn(startLineNumber);\n      var nextLineNumber = currentBracket.range.endLineNumber;\n      var nextColumn = currentBracket.range.endColumn;\n\n      if (maxColumn === currentBracket.range.endColumn) {\n        nextLineNumber++;\n        nextColumn = 1;\n      }\n\n      if (nextLineNumber > maxLineNumber) {\n        return new Range(startLineNumber, 1, maxLineNumber + 1, 1);\n      }\n\n      currentBracket = textEditorModel.findNextBracket(new Position(nextLineNumber, nextColumn));\n    }\n\n    return new Range(startLineNumber, 1, maxLineNumber + 1, 1);\n  };\n\n  GotoDefinitionWithMouseEditorContribution.prototype.addDecoration = function (range, hoverMessage) {\n    var newDecorations = {\n      range: range,\n      options: {\n        inlineClassName: 'goto-definition-link',\n        hoverMessage: hoverMessage\n      }\n    };\n    this.decorations = this.editor.deltaDecorations(this.decorations, [newDecorations]);\n  };\n\n  GotoDefinitionWithMouseEditorContribution.prototype.removeDecorations = function () {\n    if (this.decorations.length > 0) {\n      this.decorations = this.editor.deltaDecorations(this.decorations, []);\n    }\n  };\n\n  GotoDefinitionWithMouseEditorContribution.prototype.isEnabled = function (mouseEvent, withKey) {\n    return this.editor.hasModel() && mouseEvent.isNoneOrSingleMouseDown && mouseEvent.target.type === 6\n    /* CONTENT_TEXT */\n    && (mouseEvent.hasTriggerModifier || (withKey ? withKey.keyCodeIsTriggerKey : false)) && DefinitionProviderRegistry.has(this.editor.getModel());\n  };\n\n  GotoDefinitionWithMouseEditorContribution.prototype.findDefinition = function (target, token) {\n    var model = this.editor.getModel();\n\n    if (!model) {\n      return Promise.resolve(null);\n    }\n\n    return getDefinitionsAtPosition(model, target.position, token);\n  };\n\n  GotoDefinitionWithMouseEditorContribution.prototype.gotoDefinition = function (target, sideBySide) {\n    var _this = this;\n\n    this.editor.setPosition(target.position);\n    var action = new DefinitionAction(new DefinitionActionConfig(sideBySide, false, true, false), {\n      alias: '',\n      label: '',\n      id: '',\n      precondition: null\n    });\n    return this.editor.invokeWithinContext(function (accessor) {\n      return action.run(accessor, _this.editor);\n    });\n  };\n\n  GotoDefinitionWithMouseEditorContribution.prototype.getId = function () {\n    return GotoDefinitionWithMouseEditorContribution.ID;\n  };\n\n  GotoDefinitionWithMouseEditorContribution.prototype.dispose = function () {\n    this.toUnhook = dispose(this.toUnhook);\n  };\n\n  GotoDefinitionWithMouseEditorContribution.ID = 'editor.contrib.gotodefinitionwithmouse';\n  GotoDefinitionWithMouseEditorContribution.MAX_SOURCE_PREVIEW_LINES = 8;\n  GotoDefinitionWithMouseEditorContribution = __decorate([__param(1, ITextModelService), __param(2, IModeService)], GotoDefinitionWithMouseEditorContribution);\n  return GotoDefinitionWithMouseEditorContribution;\n}();\n\nregisterEditorContribution(GotoDefinitionWithMouseEditorContribution);\nregisterThemingParticipant(function (theme, collector) {\n  var activeLinkForeground = theme.getColor(editorActiveLinkForeground);\n\n  if (activeLinkForeground) {\n    collector.addRule(\".monaco-editor .goto-definition-link { color: \" + activeLinkForeground + \" !important; }\");\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport './media/gotoErrorWidget.css';\nimport * as nls from '../../../nls.js';\nimport * as dom from '../../../base/browser/dom.js';\nimport { dispose } from '../../../base/common/lifecycle.js';\nimport { MarkerSeverity } from '../../../platform/markers/common/markers.js';\nimport { Range } from '../../common/core/range.js';\nimport { registerColor, oneOf, textLinkForeground } from '../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\nimport { Color } from '../../../base/common/color.js';\nimport { editorErrorForeground, editorErrorBorder, editorWarningForeground, editorWarningBorder, editorInfoForeground, editorInfoBorder } from '../../common/view/editorColorRegistry.js';\nimport { ScrollableElement } from '../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { getBaseLabel, getPathLabel } from '../../../base/common/labels.js';\nimport { isNonEmptyArray } from '../../../base/common/arrays.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { PeekViewWidget } from '../referenceSearch/peekViewWidget.js';\nimport { basename } from '../../../base/common/resources.js';\nimport { peekViewTitleForeground, peekViewTitleInfoForeground } from '../referenceSearch/referencesWidget.js';\n\nvar MessageWidget =\n/** @class */\nfunction () {\n  function MessageWidget(parent, editor, onRelatedInformation) {\n    var _this = this;\n\n    this._lines = 0;\n    this._longestLineLength = 0;\n    this._relatedDiagnostics = new WeakMap();\n    this._disposables = [];\n    this._editor = editor;\n    var domNode = document.createElement('div');\n    domNode.className = 'descriptioncontainer';\n    domNode.setAttribute('aria-live', 'assertive');\n    domNode.setAttribute('role', 'alert');\n    this._messageBlock = document.createElement('div');\n    dom.addClass(this._messageBlock, 'message');\n    domNode.appendChild(this._messageBlock);\n    this._relatedBlock = document.createElement('div');\n    domNode.appendChild(this._relatedBlock);\n\n    this._disposables.push(dom.addStandardDisposableListener(this._relatedBlock, 'click', function (event) {\n      event.preventDefault();\n\n      var related = _this._relatedDiagnostics.get(event.target);\n\n      if (related) {\n        onRelatedInformation(related);\n      }\n    }));\n\n    this._scrollable = new ScrollableElement(domNode, {\n      horizontal: 1\n      /* Auto */\n      ,\n      vertical: 1\n      /* Auto */\n      ,\n      useShadows: false,\n      horizontalScrollbarSize: 3,\n      verticalScrollbarSize: 3\n    });\n    parent.appendChild(this._scrollable.getDomNode());\n\n    this._disposables.push(this._scrollable.onScroll(function (e) {\n      domNode.style.left = \"-\" + e.scrollLeft + \"px\";\n      domNode.style.top = \"-\" + e.scrollTop + \"px\";\n    }));\n\n    this._disposables.push(this._scrollable);\n  }\n\n  MessageWidget.prototype.dispose = function () {\n    dispose(this._disposables);\n  };\n\n  MessageWidget.prototype.update = function (_a) {\n    var source = _a.source,\n        message = _a.message,\n        relatedInformation = _a.relatedInformation,\n        code = _a.code;\n    var lines = message.split(/\\r\\n|\\r|\\n/g);\n    this._lines = lines.length;\n    this._longestLineLength = 0;\n\n    for (var _i = 0, lines_1 = lines; _i < lines_1.length; _i++) {\n      var line = lines_1[_i];\n      this._longestLineLength = Math.max(line.length, this._longestLineLength);\n    }\n\n    dom.clearNode(this._messageBlock);\n\n    this._editor.applyFontInfo(this._messageBlock);\n\n    var lastLineElement = this._messageBlock;\n\n    for (var _b = 0, lines_2 = lines; _b < lines_2.length; _b++) {\n      var line = lines_2[_b];\n      lastLineElement = document.createElement('div');\n      lastLineElement.innerText = line;\n\n      if (line === '') {\n        lastLineElement.style.height = this._messageBlock.style.lineHeight;\n      }\n\n      this._messageBlock.appendChild(lastLineElement);\n    }\n\n    if (source || code) {\n      var detailsElement = document.createElement('span');\n      dom.addClass(detailsElement, 'details');\n      lastLineElement.appendChild(detailsElement);\n\n      if (source) {\n        var sourceElement = document.createElement('span');\n        sourceElement.innerText = source;\n        dom.addClass(sourceElement, 'source');\n        detailsElement.appendChild(sourceElement);\n      }\n\n      if (code) {\n        var codeElement = document.createElement('span');\n        codeElement.innerText = \"(\" + code + \")\";\n        dom.addClass(codeElement, 'code');\n        detailsElement.appendChild(codeElement);\n      }\n    }\n\n    dom.clearNode(this._relatedBlock);\n\n    this._editor.applyFontInfo(this._relatedBlock);\n\n    if (isNonEmptyArray(relatedInformation)) {\n      var relatedInformationNode = this._relatedBlock.appendChild(document.createElement('div'));\n\n      relatedInformationNode.style.paddingTop = Math.floor(this._editor.getConfiguration().lineHeight * 0.66) + \"px\";\n      this._lines += 1;\n\n      for (var _c = 0, relatedInformation_1 = relatedInformation; _c < relatedInformation_1.length; _c++) {\n        var related = relatedInformation_1[_c];\n        var container = document.createElement('div');\n        var relatedResource = document.createElement('a');\n        dom.addClass(relatedResource, 'filename');\n        relatedResource.innerHTML = getBaseLabel(related.resource) + \"(\" + related.startLineNumber + \", \" + related.startColumn + \"): \";\n        relatedResource.title = getPathLabel(related.resource, undefined);\n\n        this._relatedDiagnostics.set(relatedResource, related);\n\n        var relatedMessage = document.createElement('span');\n        relatedMessage.innerText = related.message;\n        container.appendChild(relatedResource);\n        container.appendChild(relatedMessage);\n        this._lines += 1;\n        relatedInformationNode.appendChild(container);\n      }\n    }\n\n    var fontInfo = this._editor.getConfiguration().fontInfo;\n\n    var scrollWidth = Math.ceil(fontInfo.typicalFullwidthCharacterWidth * this._longestLineLength * 0.75);\n    var scrollHeight = fontInfo.lineHeight * this._lines;\n\n    this._scrollable.setScrollDimensions({\n      scrollWidth: scrollWidth,\n      scrollHeight: scrollHeight\n    });\n  };\n\n  MessageWidget.prototype.layout = function (height, width) {\n    this._scrollable.getDomNode().style.height = height + \"px\";\n    this._scrollable.getDomNode().style.width = width + \"px\";\n\n    this._scrollable.setScrollDimensions({\n      width: width,\n      height: height\n    });\n  };\n\n  MessageWidget.prototype.getHeightInLines = function () {\n    return Math.min(17, this._lines);\n  };\n\n  return MessageWidget;\n}();\n\nvar MarkerNavigationWidget =\n/** @class */\nfunction (_super) {\n  __extends(MarkerNavigationWidget, _super);\n\n  function MarkerNavigationWidget(editor, actions, _themeService) {\n    var _this = _super.call(this, editor, {\n      showArrow: true,\n      showFrame: true,\n      isAccessible: true\n    }) || this;\n\n    _this.actions = actions;\n    _this._themeService = _themeService;\n    _this._callOnDispose = [];\n    _this._onDidSelectRelatedInformation = new Emitter();\n    _this.onDidSelectRelatedInformation = _this._onDidSelectRelatedInformation.event;\n    _this._severity = MarkerSeverity.Warning;\n    _this._backgroundColor = Color.white;\n\n    _this._applyTheme(_themeService.getTheme());\n\n    _this._callOnDispose.push(_themeService.onThemeChange(_this._applyTheme.bind(_this)));\n\n    _this.create();\n\n    return _this;\n  }\n\n  MarkerNavigationWidget.prototype._applyTheme = function (theme) {\n    this._backgroundColor = theme.getColor(editorMarkerNavigationBackground);\n    var colorId = editorMarkerNavigationError;\n\n    if (this._severity === MarkerSeverity.Warning) {\n      colorId = editorMarkerNavigationWarning;\n    } else if (this._severity === MarkerSeverity.Info) {\n      colorId = editorMarkerNavigationInfo;\n    }\n\n    var frameColor = theme.getColor(colorId);\n    this.style({\n      arrowColor: frameColor,\n      frameColor: frameColor,\n      headerBackgroundColor: this._backgroundColor,\n      primaryHeadingColor: theme.getColor(peekViewTitleForeground),\n      secondaryHeadingColor: theme.getColor(peekViewTitleInfoForeground)\n    }); // style() will trigger _applyStyles\n  };\n\n  MarkerNavigationWidget.prototype._applyStyles = function () {\n    if (this._parentContainer) {\n      this._parentContainer.style.backgroundColor = this._backgroundColor ? this._backgroundColor.toString() : '';\n    }\n\n    _super.prototype._applyStyles.call(this);\n  };\n\n  MarkerNavigationWidget.prototype.dispose = function () {\n    this._callOnDispose = dispose(this._callOnDispose);\n\n    _super.prototype.dispose.call(this);\n  };\n\n  MarkerNavigationWidget.prototype.focus = function () {\n    this._parentContainer.focus();\n  };\n\n  MarkerNavigationWidget.prototype._fillHead = function (container) {\n    _super.prototype._fillHead.call(this, container);\n\n    this._actionbarWidget.push(this.actions, {\n      label: false,\n      icon: true\n    });\n  };\n\n  MarkerNavigationWidget.prototype._getActionBarOptions = function () {\n    return {\n      orientation: 1\n      /* HORIZONTAL_REVERSE */\n\n    };\n  };\n\n  MarkerNavigationWidget.prototype._fillBody = function (container) {\n    var _this = this;\n\n    this._parentContainer = container;\n    dom.addClass(container, 'marker-widget');\n    this._parentContainer.tabIndex = 0;\n\n    this._parentContainer.setAttribute('role', 'tooltip');\n\n    this._container = document.createElement('div');\n    container.appendChild(this._container);\n    this._message = new MessageWidget(this._container, this.editor, function (related) {\n      return _this._onDidSelectRelatedInformation.fire(related);\n    });\n\n    this._disposables.push(this._message);\n  };\n\n  MarkerNavigationWidget.prototype.show = function (where, heightInLines) {\n    throw new Error('call showAtMarker');\n  };\n\n  MarkerNavigationWidget.prototype.showAtMarker = function (marker, markerIdx, markerCount) {\n    // update:\n    // * title\n    // * message\n    this._container.classList.remove('stale');\n\n    this._message.update(marker); // update frame color (only applied on 'show')\n\n\n    this._severity = marker.severity;\n\n    this._applyTheme(this._themeService.getTheme()); // show\n\n\n    var range = Range.lift(marker);\n    var editorPosition = this.editor.getPosition();\n    var position = editorPosition && range.containsPosition(editorPosition) ? editorPosition : range.getStartPosition();\n\n    _super.prototype.show.call(this, position, this.computeRequiredHeight());\n\n    var model = this.editor.getModel();\n\n    if (model) {\n      var detail = markerCount > 1 ? nls.localize('problems', \"{0} of {1} problems\", markerIdx, markerCount) : nls.localize('change', \"{0} of {1} problem\", markerIdx, markerCount);\n      this.setTitle(basename(model.uri), detail);\n    }\n\n    var headingIconClassName = 'error';\n\n    if (this._severity === MarkerSeverity.Warning) {\n      headingIconClassName = 'warning';\n    } else if (this._severity === MarkerSeverity.Info) {\n      headingIconClassName = 'info';\n    }\n\n    this.setTitleIcon(headingIconClassName);\n    this.editor.revealPositionInCenter(position, 0\n    /* Smooth */\n    );\n\n    if (this.editor.getConfiguration().accessibilitySupport !== 1\n    /* Disabled */\n    ) {\n        this.focus();\n      }\n  };\n\n  MarkerNavigationWidget.prototype.updateMarker = function (marker) {\n    this._container.classList.remove('stale');\n\n    this._message.update(marker);\n  };\n\n  MarkerNavigationWidget.prototype.showStale = function () {\n    this._container.classList.add('stale');\n\n    this._relayout();\n  };\n\n  MarkerNavigationWidget.prototype._doLayoutBody = function (heightInPixel, widthInPixel) {\n    _super.prototype._doLayoutBody.call(this, heightInPixel, widthInPixel);\n\n    this._heightInPixel = heightInPixel;\n\n    this._message.layout(heightInPixel, widthInPixel);\n\n    this._container.style.height = heightInPixel + \"px\";\n  };\n\n  MarkerNavigationWidget.prototype._onWidth = function (widthInPixel) {\n    this._message.layout(this._heightInPixel, widthInPixel);\n  };\n\n  MarkerNavigationWidget.prototype._relayout = function () {\n    _super.prototype._relayout.call(this, this.computeRequiredHeight());\n  };\n\n  MarkerNavigationWidget.prototype.computeRequiredHeight = function () {\n    return 3 + this._message.getHeightInLines();\n  };\n\n  return MarkerNavigationWidget;\n}(PeekViewWidget);\n\nexport { MarkerNavigationWidget }; // theming\n\nvar errorDefault = oneOf(editorErrorForeground, editorErrorBorder);\nvar warningDefault = oneOf(editorWarningForeground, editorWarningBorder);\nvar infoDefault = oneOf(editorInfoForeground, editorInfoBorder);\nexport var editorMarkerNavigationError = registerColor('editorMarkerNavigationError.background', {\n  dark: errorDefault,\n  light: errorDefault,\n  hc: errorDefault\n}, nls.localize('editorMarkerNavigationError', 'Editor marker navigation widget error color.'));\nexport var editorMarkerNavigationWarning = registerColor('editorMarkerNavigationWarning.background', {\n  dark: warningDefault,\n  light: warningDefault,\n  hc: warningDefault\n}, nls.localize('editorMarkerNavigationWarning', 'Editor marker navigation widget warning color.'));\nexport var editorMarkerNavigationInfo = registerColor('editorMarkerNavigationInfo.background', {\n  dark: infoDefault,\n  light: infoDefault,\n  hc: infoDefault\n}, nls.localize('editorMarkerNavigationInfo', 'Editor marker navigation widget info color.'));\nexport var editorMarkerNavigationBackground = registerColor('editorMarkerNavigation.background', {\n  dark: '#2D2D30',\n  light: Color.white,\n  hc: '#0C141F'\n}, nls.localize('editorMarkerNavigationBackground', 'Editor marker navigation widget background.'));\nregisterThemingParticipant(function (theme, collector) {\n  var link = theme.getColor(textLinkForeground);\n\n  if (link) {\n    collector.addRule(\".monaco-editor .marker-widget a { color: \" + link + \"; }\");\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nimport * as nls from '../../../nls.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { dispose } from '../../../base/common/lifecycle.js';\nimport { RawContextKey, IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IMarkerService, MarkerSeverity } from '../../../platform/markers/common/markers.js';\nimport { Range } from '../../common/core/range.js';\nimport { registerEditorAction, registerEditorContribution, EditorAction, EditorCommand, registerEditorCommand } from '../../browser/editorExtensions.js';\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport { MarkerNavigationWidget } from './gotoErrorWidget.js';\nimport { compare } from '../../../base/common/strings.js';\nimport { binarySearch } from '../../../base/common/arrays.js';\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { MenuRegistry } from '../../../platform/actions/common/actions.js';\nimport { Action } from '../../../base/common/actions.js';\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\n\nvar MarkerModel =\n/** @class */\nfunction () {\n  function MarkerModel(editor, markers) {\n    var _this = this;\n\n    this._editor = editor;\n    this._markers = [];\n    this._nextIdx = -1;\n    this._toUnbind = [];\n    this._ignoreSelectionChange = false;\n    this._onCurrentMarkerChanged = new Emitter();\n    this._onMarkerSetChanged = new Emitter();\n    this.setMarkers(markers); // listen on editor\n\n    this._toUnbind.push(this._editor.onDidDispose(function () {\n      return _this.dispose();\n    }));\n\n    this._toUnbind.push(this._editor.onDidChangeCursorPosition(function () {\n      if (_this._ignoreSelectionChange) {\n        return;\n      }\n\n      if (_this.currentMarker && _this._editor.getPosition() && Range.containsPosition(_this.currentMarker, _this._editor.getPosition())) {\n        return;\n      }\n\n      _this._nextIdx = -1;\n    }));\n  }\n\n  Object.defineProperty(MarkerModel.prototype, \"onCurrentMarkerChanged\", {\n    get: function get() {\n      return this._onCurrentMarkerChanged.event;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MarkerModel.prototype, \"onMarkerSetChanged\", {\n    get: function get() {\n      return this._onMarkerSetChanged.event;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  MarkerModel.prototype.setMarkers = function (markers) {\n    var oldMarker = this._nextIdx >= 0 ? this._markers[this._nextIdx] : undefined;\n    this._markers = markers || [];\n\n    this._markers.sort(MarkerNavigationAction.compareMarker);\n\n    if (!oldMarker) {\n      this._nextIdx = -1;\n    } else {\n      this._nextIdx = Math.max(-1, binarySearch(this._markers, oldMarker, MarkerNavigationAction.compareMarker));\n    }\n\n    this._onMarkerSetChanged.fire(this);\n  };\n\n  MarkerModel.prototype.withoutWatchingEditorPosition = function (callback) {\n    this._ignoreSelectionChange = true;\n\n    try {\n      callback();\n    } finally {\n      this._ignoreSelectionChange = false;\n    }\n  };\n\n  MarkerModel.prototype._initIdx = function (fwd) {\n    var found = false;\n\n    var position = this._editor.getPosition();\n\n    for (var i = 0; i < this._markers.length; i++) {\n      var range = Range.lift(this._markers[i]);\n\n      if (range.isEmpty() && this._editor.getModel()) {\n        var word = this._editor.getModel().getWordAtPosition(range.getStartPosition());\n\n        if (word) {\n          range = new Range(range.startLineNumber, word.startColumn, range.startLineNumber, word.endColumn);\n        }\n      }\n\n      if (position && (range.containsPosition(position) || position.isBeforeOrEqual(range.getStartPosition()))) {\n        this._nextIdx = i;\n        found = true;\n        break;\n      }\n    }\n\n    if (!found) {\n      // after the last change\n      this._nextIdx = fwd ? 0 : this._markers.length - 1;\n    }\n\n    if (this._nextIdx < 0) {\n      this._nextIdx = this._markers.length - 1;\n    }\n  };\n\n  Object.defineProperty(MarkerModel.prototype, \"currentMarker\", {\n    get: function get() {\n      return this.canNavigate() ? this._markers[this._nextIdx] : undefined;\n    },\n    set: function set(marker) {\n      var idx = this._nextIdx;\n      this._nextIdx = -1;\n\n      if (marker) {\n        this._nextIdx = this.indexOf(marker);\n      }\n\n      if (this._nextIdx !== idx) {\n        this._onCurrentMarkerChanged.fire(marker);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  MarkerModel.prototype.move = function (fwd, inCircles) {\n    if (!this.canNavigate()) {\n      this._onCurrentMarkerChanged.fire(undefined);\n\n      return !inCircles;\n    }\n\n    var oldIdx = this._nextIdx;\n    var atEdge = false;\n\n    if (this._nextIdx === -1) {\n      this._initIdx(fwd);\n    } else if (fwd) {\n      if (inCircles || this._nextIdx + 1 < this._markers.length) {\n        this._nextIdx = (this._nextIdx + 1) % this._markers.length;\n      } else {\n        atEdge = true;\n      }\n    } else if (!fwd) {\n      if (inCircles || this._nextIdx > 0) {\n        this._nextIdx = (this._nextIdx - 1 + this._markers.length) % this._markers.length;\n      } else {\n        atEdge = true;\n      }\n    }\n\n    if (oldIdx !== this._nextIdx) {\n      var marker = this._markers[this._nextIdx];\n\n      this._onCurrentMarkerChanged.fire(marker);\n    }\n\n    return atEdge;\n  };\n\n  MarkerModel.prototype.canNavigate = function () {\n    return this._markers.length > 0;\n  };\n\n  MarkerModel.prototype.findMarkerAtPosition = function (pos) {\n    for (var _i = 0, _a = this._markers; _i < _a.length; _i++) {\n      var marker = _a[_i];\n\n      if (Range.containsPosition(marker, pos)) {\n        return marker;\n      }\n    }\n\n    return undefined;\n  };\n\n  Object.defineProperty(MarkerModel.prototype, \"total\", {\n    get: function get() {\n      return this._markers.length;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  MarkerModel.prototype.indexOf = function (marker) {\n    return 1 + this._markers.indexOf(marker);\n  };\n\n  MarkerModel.prototype.dispose = function () {\n    this._toUnbind = dispose(this._toUnbind);\n  };\n\n  return MarkerModel;\n}();\n\nvar MarkerController =\n/** @class */\nfunction () {\n  function MarkerController(editor, _markerService, _contextKeyService, _themeService, _editorService, _keybindingService) {\n    this._markerService = _markerService;\n    this._contextKeyService = _contextKeyService;\n    this._themeService = _themeService;\n    this._editorService = _editorService;\n    this._keybindingService = _keybindingService;\n    this._model = null;\n    this._widget = null;\n    this._disposeOnClose = [];\n    this._editor = editor;\n    this._widgetVisible = CONTEXT_MARKERS_NAVIGATION_VISIBLE.bindTo(this._contextKeyService);\n  }\n\n  MarkerController.get = function (editor) {\n    return editor.getContribution(MarkerController.ID);\n  };\n\n  MarkerController.prototype.getId = function () {\n    return MarkerController.ID;\n  };\n\n  MarkerController.prototype.dispose = function () {\n    this._cleanUp();\n  };\n\n  MarkerController.prototype._cleanUp = function () {\n    this._widgetVisible.reset();\n\n    this._disposeOnClose = dispose(this._disposeOnClose);\n    this._widget = null;\n    this._model = null;\n  };\n\n  MarkerController.prototype.getOrCreateModel = function () {\n    var _this = this;\n\n    var _a;\n\n    if (this._model) {\n      return this._model;\n    }\n\n    var markers = this._getMarkers();\n\n    this._model = new MarkerModel(this._editor, markers);\n\n    this._markerService.onMarkerChanged(this._onMarkerChanged, this, this._disposeOnClose);\n\n    var prevMarkerKeybinding = this._keybindingService.lookupKeybinding(PrevMarkerAction.ID);\n\n    var nextMarkerKeybinding = this._keybindingService.lookupKeybinding(NextMarkerAction.ID);\n\n    var actions = [new Action(PrevMarkerAction.ID, PrevMarkerAction.LABEL + (prevMarkerKeybinding ? \" (\" + prevMarkerKeybinding.getLabel() + \")\" : ''), 'show-previous-problem chevron-up', this._model.canNavigate(), function () {\n      return __awaiter(_this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n          if (this._model) {\n            this._model.move(false, true);\n          }\n\n          return [2\n          /*return*/\n          ];\n        });\n      });\n    }), new Action(NextMarkerAction.ID, NextMarkerAction.LABEL + (nextMarkerKeybinding ? \" (\" + nextMarkerKeybinding.getLabel() + \")\" : ''), 'show-next-problem chevron-down', this._model.canNavigate(), function () {\n      return __awaiter(_this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n          if (this._model) {\n            this._model.move(true, true);\n          }\n\n          return [2\n          /*return*/\n          ];\n        });\n      });\n    })];\n    this._widget = new MarkerNavigationWidget(this._editor, actions, this._themeService);\n\n    this._widgetVisible.set(true);\n\n    this._widget.onDidClose(function () {\n      return _this._cleanUp();\n    }, this, this._disposeOnClose);\n\n    this._disposeOnClose.push(this._model);\n\n    this._disposeOnClose.push(this._widget);\n\n    (_a = this._disposeOnClose).push.apply(_a, actions);\n\n    this._disposeOnClose.push(this._widget.onDidSelectRelatedInformation(function (related) {\n      _this._editorService.openCodeEditor({\n        resource: related.resource,\n        options: {\n          pinned: true,\n          revealIfOpened: true,\n          selection: Range.lift(related).collapseToStart()\n        }\n      }, _this._editor).then(undefined, onUnexpectedError);\n\n      _this.closeMarkersNavigation(false);\n    }));\n\n    this._disposeOnClose.push(this._editor.onDidChangeModel(function () {\n      return _this._cleanUp();\n    }));\n\n    this._disposeOnClose.push(this._model.onCurrentMarkerChanged(function (marker) {\n      if (!marker || !_this._model) {\n        _this._cleanUp();\n      } else {\n        _this._model.withoutWatchingEditorPosition(function () {\n          if (!_this._widget || !_this._model) {\n            return;\n          }\n\n          _this._widget.showAtMarker(marker, _this._model.indexOf(marker), _this._model.total);\n        });\n      }\n    }));\n\n    this._disposeOnClose.push(this._model.onMarkerSetChanged(function () {\n      if (!_this._widget || !_this._widget.position || !_this._model) {\n        return;\n      }\n\n      var marker = _this._model.findMarkerAtPosition(_this._widget.position);\n\n      if (marker) {\n        _this._widget.updateMarker(marker);\n      } else {\n        _this._widget.showStale();\n      }\n    }));\n\n    return this._model;\n  };\n\n  MarkerController.prototype.closeMarkersNavigation = function (focusEditor) {\n    if (focusEditor === void 0) {\n      focusEditor = true;\n    }\n\n    this._cleanUp();\n\n    if (focusEditor) {\n      this._editor.focus();\n    }\n  };\n\n  MarkerController.prototype.show = function (marker) {\n    var model = this.getOrCreateModel();\n    model.currentMarker = marker;\n  };\n\n  MarkerController.prototype._onMarkerChanged = function (changedResources) {\n    var editorModel = this._editor.getModel();\n\n    if (!editorModel) {\n      return;\n    }\n\n    if (!this._model) {\n      return;\n    }\n\n    if (!changedResources.some(function (r) {\n      return editorModel.uri.toString() === r.toString();\n    })) {\n      return;\n    }\n\n    this._model.setMarkers(this._getMarkers());\n  };\n\n  MarkerController.prototype._getMarkers = function () {\n    var model = this._editor.getModel();\n\n    if (!model) {\n      return [];\n    }\n\n    return this._markerService.read({\n      resource: model.uri,\n      severities: MarkerSeverity.Error | MarkerSeverity.Warning | MarkerSeverity.Info\n    });\n  };\n\n  MarkerController.ID = 'editor.contrib.markerController';\n  MarkerController = __decorate([__param(1, IMarkerService), __param(2, IContextKeyService), __param(3, IThemeService), __param(4, ICodeEditorService), __param(5, IKeybindingService)], MarkerController);\n  return MarkerController;\n}();\n\nexport { MarkerController };\n\nvar MarkerNavigationAction =\n/** @class */\nfunction (_super) {\n  __extends(MarkerNavigationAction, _super);\n\n  function MarkerNavigationAction(next, multiFile, opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this._isNext = next;\n    _this._multiFile = multiFile;\n    return _this;\n  }\n\n  MarkerNavigationAction.prototype.run = function (accessor, editor) {\n    var _this = this;\n\n    var markerService = accessor.get(IMarkerService);\n    var editorService = accessor.get(ICodeEditorService);\n    var controller = MarkerController.get(editor);\n\n    if (!controller) {\n      return Promise.resolve(undefined);\n    }\n\n    var model = controller.getOrCreateModel();\n    var atEdge = model.move(this._isNext, !this._multiFile);\n\n    if (!atEdge || !this._multiFile) {\n      return Promise.resolve(undefined);\n    } // try with the next/prev file\n\n\n    var markers = markerService.read({\n      severities: MarkerSeverity.Error | MarkerSeverity.Warning | MarkerSeverity.Info\n    }).sort(MarkerNavigationAction.compareMarker);\n\n    if (markers.length === 0) {\n      return Promise.resolve(undefined);\n    }\n\n    var editorModel = editor.getModel();\n\n    if (!editorModel) {\n      return Promise.resolve(undefined);\n    }\n\n    var oldMarker = model.currentMarker || {\n      resource: editorModel.uri,\n      severity: MarkerSeverity.Error,\n      startLineNumber: 1,\n      startColumn: 1,\n      endLineNumber: 1,\n      endColumn: 1\n    };\n    var idx = binarySearch(markers, oldMarker, MarkerNavigationAction.compareMarker);\n\n    if (idx < 0) {\n      // find best match...\n      idx = ~idx;\n      idx %= markers.length;\n    } else if (this._isNext) {\n      idx = (idx + 1) % markers.length;\n    } else {\n      idx = (idx + markers.length - 1) % markers.length;\n    }\n\n    var newMarker = markers[idx];\n\n    if (newMarker.resource.toString() === editorModel.uri.toString()) {\n      // the next `resource` is this resource which\n      // means we cycle within this file\n      model.move(this._isNext, true);\n      return Promise.resolve(undefined);\n    } // close the widget for this editor-instance, open the resource\n    // for the next marker and re-start marker navigation in there\n\n\n    controller.closeMarkersNavigation();\n    return editorService.openCodeEditor({\n      resource: newMarker.resource,\n      options: {\n        pinned: false,\n        revealIfOpened: true,\n        revealInCenterIfOutsideViewport: true,\n        selection: newMarker\n      }\n    }, editor).then(function (editor) {\n      if (!editor) {\n        return undefined;\n      }\n\n      return editor.getAction(_this.id).run();\n    });\n  };\n\n  MarkerNavigationAction.compareMarker = function (a, b) {\n    var res = compare(a.resource.toString(), b.resource.toString());\n\n    if (res === 0) {\n      res = MarkerSeverity.compare(a.severity, b.severity);\n    }\n\n    if (res === 0) {\n      res = Range.compareRangesUsingStarts(a, b);\n    }\n\n    return res;\n  };\n\n  return MarkerNavigationAction;\n}(EditorAction);\n\nvar NextMarkerAction =\n/** @class */\nfunction (_super) {\n  __extends(NextMarkerAction, _super);\n\n  function NextMarkerAction() {\n    return _super.call(this, true, false, {\n      id: NextMarkerAction.ID,\n      label: NextMarkerAction.LABEL,\n      alias: 'Go to Next Error or Warning',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 512\n        /* Alt */\n        | 66\n        /* F8 */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  NextMarkerAction.ID = 'editor.action.marker.next';\n  NextMarkerAction.LABEL = nls.localize('markerAction.next.label', \"Go to Next Problem (Error, Warning, Info)\");\n  return NextMarkerAction;\n}(MarkerNavigationAction);\n\nexport { NextMarkerAction };\n\nvar PrevMarkerAction =\n/** @class */\nfunction (_super) {\n  __extends(PrevMarkerAction, _super);\n\n  function PrevMarkerAction() {\n    return _super.call(this, false, false, {\n      id: PrevMarkerAction.ID,\n      label: PrevMarkerAction.LABEL,\n      alias: 'Go to Previous Error or Warning',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 1024\n        /* Shift */\n        | 512\n        /* Alt */\n        | 66\n        /* F8 */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  PrevMarkerAction.ID = 'editor.action.marker.prev';\n  PrevMarkerAction.LABEL = nls.localize('markerAction.previous.label', \"Go to Previous Problem (Error, Warning, Info)\");\n  return PrevMarkerAction;\n}(MarkerNavigationAction);\n\nvar NextMarkerInFilesAction =\n/** @class */\nfunction (_super) {\n  __extends(NextMarkerInFilesAction, _super);\n\n  function NextMarkerInFilesAction() {\n    return _super.call(this, true, true, {\n      id: 'editor.action.marker.nextInFiles',\n      label: nls.localize('markerAction.nextInFiles.label', \"Go to Next Problem in Files (Error, Warning, Info)\"),\n      alias: 'Go to Next Error or Warning in Files',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.focus,\n        primary: 66\n        /* F8 */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  return NextMarkerInFilesAction;\n}(MarkerNavigationAction);\n\nvar PrevMarkerInFilesAction =\n/** @class */\nfunction (_super) {\n  __extends(PrevMarkerInFilesAction, _super);\n\n  function PrevMarkerInFilesAction() {\n    return _super.call(this, false, true, {\n      id: 'editor.action.marker.prevInFiles',\n      label: nls.localize('markerAction.previousInFiles.label', \"Go to Previous Problem in Files (Error, Warning, Info)\"),\n      alias: 'Go to Previous Error or Warning in Files',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.focus,\n        primary: 1024\n        /* Shift */\n        | 66\n        /* F8 */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  return PrevMarkerInFilesAction;\n}(MarkerNavigationAction);\n\nregisterEditorContribution(MarkerController);\nregisterEditorAction(NextMarkerAction);\nregisterEditorAction(PrevMarkerAction);\nregisterEditorAction(NextMarkerInFilesAction);\nregisterEditorAction(PrevMarkerInFilesAction);\nvar CONTEXT_MARKERS_NAVIGATION_VISIBLE = new RawContextKey('markersNavigationVisible', false);\nvar MarkerCommand = EditorCommand.bindToContribution(MarkerController.get);\nregisterEditorCommand(new MarkerCommand({\n  id: 'closeMarkersNavigation',\n  precondition: CONTEXT_MARKERS_NAVIGATION_VISIBLE,\n  handler: function handler(x) {\n    return x.closeMarkersNavigation();\n  },\n  kbOpts: {\n    weight: 100\n    /* EditorContrib */\n    + 50,\n    kbExpr: EditorContextKeys.focus,\n    primary: 9\n    /* Escape */\n    ,\n    secondary: [1024\n    /* Shift */\n    | 9\n    /* Escape */\n    ]\n  }\n})); // Go to menu\n\nMenuRegistry.appendMenuItem(16\n/* MenubarGoMenu */\n, {\n  group: '6_problem_nav',\n  command: {\n    id: 'editor.action.marker.nextInFiles',\n    title: nls.localize({\n      key: 'miGotoNextProblem',\n      comment: ['&& denotes a mnemonic']\n    }, \"Next &&Problem\")\n  },\n  order: 1\n});\nMenuRegistry.appendMenuItem(16\n/* MenubarGoMenu */\n, {\n  group: '6_problem_nav',\n  command: {\n    id: 'editor.action.marker.prevInFiles',\n    title: nls.localize({\n      key: 'miGotoPreviousProblem',\n      comment: ['&& denotes a mnemonic']\n    }, \"Previous &&Problem\")\n  },\n  order: 2\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../base/common/event.js';\n\nvar ColorPickerModel =\n/** @class */\nfunction () {\n  function ColorPickerModel(color, availableColorPresentations, presentationIndex) {\n    this.presentationIndex = presentationIndex;\n    this._onColorFlushed = new Emitter();\n    this.onColorFlushed = this._onColorFlushed.event;\n    this._onDidChangeColor = new Emitter();\n    this.onDidChangeColor = this._onDidChangeColor.event;\n    this._onDidChangePresentation = new Emitter();\n    this.onDidChangePresentation = this._onDidChangePresentation.event;\n    this.originalColor = color;\n    this._color = color;\n    this._colorPresentations = availableColorPresentations;\n  }\n\n  Object.defineProperty(ColorPickerModel.prototype, \"color\", {\n    get: function get() {\n      return this._color;\n    },\n    set: function set(color) {\n      if (this._color.equals(color)) {\n        return;\n      }\n\n      this._color = color;\n\n      this._onDidChangeColor.fire(color);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ColorPickerModel.prototype, \"presentation\", {\n    get: function get() {\n      return this.colorPresentations[this.presentationIndex];\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ColorPickerModel.prototype, \"colorPresentations\", {\n    get: function get() {\n      return this._colorPresentations;\n    },\n    set: function set(colorPresentations) {\n      this._colorPresentations = colorPresentations;\n\n      if (this.presentationIndex > colorPresentations.length - 1) {\n        this.presentationIndex = 0;\n      }\n\n      this._onDidChangePresentation.fire(this.presentation);\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ColorPickerModel.prototype.selectNextColorPresentation = function () {\n    this.presentationIndex = (this.presentationIndex + 1) % this.colorPresentations.length;\n    this.flushColor();\n\n    this._onDidChangePresentation.fire(this.presentation);\n  };\n\n  ColorPickerModel.prototype.guessColorPresentation = function (color, originalText) {\n    for (var i = 0; i < this.colorPresentations.length; i++) {\n      if (originalText === this.colorPresentations[i].label) {\n        this.presentationIndex = i;\n\n        this._onDidChangePresentation.fire(this.presentation);\n\n        break;\n      }\n    }\n  };\n\n  ColorPickerModel.prototype.flushColor = function () {\n    this._onColorFlushed.fire(this._color);\n  };\n\n  return ColorPickerModel;\n}();\n\nexport { ColorPickerModel };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport './colorPicker.css';\nimport { onDidChangeZoomLevel } from '../../../base/browser/browser.js';\nimport * as dom from '../../../base/browser/dom.js';\nimport { GlobalMouseMoveMonitor, standardMouseMoveMerger } from '../../../base/browser/globalMouseMoveMonitor.js';\nimport { Widget } from '../../../base/browser/ui/widget.js';\nimport { Color, HSVA, RGBA } from '../../../base/common/color.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { editorHoverBackground } from '../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\nvar $ = dom.$;\n\nvar ColorPickerHeader =\n/** @class */\nfunction (_super) {\n  __extends(ColorPickerHeader, _super);\n\n  function ColorPickerHeader(container, model, themeService) {\n    var _this = _super.call(this) || this;\n\n    _this.model = model;\n    _this.domNode = $('.colorpicker-header');\n    dom.append(container, _this.domNode);\n    _this.pickedColorNode = dom.append(_this.domNode, $('.picked-color'));\n    var colorBox = dom.append(_this.domNode, $('.original-color'));\n    colorBox.style.backgroundColor = Color.Format.CSS.format(_this.model.originalColor);\n    _this.backgroundColor = themeService.getTheme().getColor(editorHoverBackground) || Color.white;\n\n    _this._register(registerThemingParticipant(function (theme, collector) {\n      _this.backgroundColor = theme.getColor(editorHoverBackground) || Color.white;\n    }));\n\n    _this._register(dom.addDisposableListener(_this.pickedColorNode, dom.EventType.CLICK, function () {\n      return _this.model.selectNextColorPresentation();\n    }));\n\n    _this._register(dom.addDisposableListener(colorBox, dom.EventType.CLICK, function () {\n      _this.model.color = _this.model.originalColor;\n\n      _this.model.flushColor();\n    }));\n\n    _this._register(model.onDidChangeColor(_this.onDidChangeColor, _this));\n\n    _this._register(model.onDidChangePresentation(_this.onDidChangePresentation, _this));\n\n    _this.pickedColorNode.style.backgroundColor = Color.Format.CSS.format(model.color);\n    dom.toggleClass(_this.pickedColorNode, 'light', model.color.rgba.a < 0.5 ? _this.backgroundColor.isLighter() : model.color.isLighter());\n    return _this;\n  }\n\n  ColorPickerHeader.prototype.onDidChangeColor = function (color) {\n    this.pickedColorNode.style.backgroundColor = Color.Format.CSS.format(color);\n    dom.toggleClass(this.pickedColorNode, 'light', color.rgba.a < 0.5 ? this.backgroundColor.isLighter() : color.isLighter());\n    this.onDidChangePresentation();\n  };\n\n  ColorPickerHeader.prototype.onDidChangePresentation = function () {\n    this.pickedColorNode.textContent = this.model.presentation ? this.model.presentation.label : '';\n  };\n\n  return ColorPickerHeader;\n}(Disposable);\n\nexport { ColorPickerHeader };\n\nvar ColorPickerBody =\n/** @class */\nfunction (_super) {\n  __extends(ColorPickerBody, _super);\n\n  function ColorPickerBody(container, model, pixelRatio) {\n    var _this = _super.call(this) || this;\n\n    _this.model = model;\n    _this.pixelRatio = pixelRatio;\n    _this.domNode = $('.colorpicker-body');\n    dom.append(container, _this.domNode);\n    _this.saturationBox = new SaturationBox(_this.domNode, _this.model, _this.pixelRatio);\n\n    _this._register(_this.saturationBox);\n\n    _this._register(_this.saturationBox.onDidChange(_this.onDidSaturationValueChange, _this));\n\n    _this._register(_this.saturationBox.onColorFlushed(_this.flushColor, _this));\n\n    _this.opacityStrip = new OpacityStrip(_this.domNode, _this.model);\n\n    _this._register(_this.opacityStrip);\n\n    _this._register(_this.opacityStrip.onDidChange(_this.onDidOpacityChange, _this));\n\n    _this._register(_this.opacityStrip.onColorFlushed(_this.flushColor, _this));\n\n    _this.hueStrip = new HueStrip(_this.domNode, _this.model);\n\n    _this._register(_this.hueStrip);\n\n    _this._register(_this.hueStrip.onDidChange(_this.onDidHueChange, _this));\n\n    _this._register(_this.hueStrip.onColorFlushed(_this.flushColor, _this));\n\n    return _this;\n  }\n\n  ColorPickerBody.prototype.flushColor = function () {\n    this.model.flushColor();\n  };\n\n  ColorPickerBody.prototype.onDidSaturationValueChange = function (_a) {\n    var s = _a.s,\n        v = _a.v;\n    var hsva = this.model.color.hsva;\n    this.model.color = new Color(new HSVA(hsva.h, s, v, hsva.a));\n  };\n\n  ColorPickerBody.prototype.onDidOpacityChange = function (a) {\n    var hsva = this.model.color.hsva;\n    this.model.color = new Color(new HSVA(hsva.h, hsva.s, hsva.v, a));\n  };\n\n  ColorPickerBody.prototype.onDidHueChange = function (value) {\n    var hsva = this.model.color.hsva;\n    var h = (1 - value) * 360;\n    this.model.color = new Color(new HSVA(h === 360 ? 0 : h, hsva.s, hsva.v, hsva.a));\n  };\n\n  ColorPickerBody.prototype.layout = function () {\n    this.saturationBox.layout();\n    this.opacityStrip.layout();\n    this.hueStrip.layout();\n  };\n\n  return ColorPickerBody;\n}(Disposable);\n\nexport { ColorPickerBody };\n\nvar SaturationBox =\n/** @class */\nfunction (_super) {\n  __extends(SaturationBox, _super);\n\n  function SaturationBox(container, model, pixelRatio) {\n    var _this = _super.call(this) || this;\n\n    _this.model = model;\n    _this.pixelRatio = pixelRatio;\n    _this._onDidChange = new Emitter();\n    _this.onDidChange = _this._onDidChange.event;\n    _this._onColorFlushed = new Emitter();\n    _this.onColorFlushed = _this._onColorFlushed.event;\n    _this.domNode = $('.saturation-wrap');\n    dom.append(container, _this.domNode); // Create canvas, draw selected color\n\n    _this.canvas = document.createElement('canvas');\n    _this.canvas.className = 'saturation-box';\n    dom.append(_this.domNode, _this.canvas); // Add selection circle\n\n    _this.selection = $('.saturation-selection');\n    dom.append(_this.domNode, _this.selection);\n\n    _this.layout();\n\n    _this._register(dom.addDisposableListener(_this.domNode, dom.EventType.MOUSE_DOWN, function (e) {\n      return _this.onMouseDown(e);\n    }));\n\n    _this._register(_this.model.onDidChangeColor(_this.onDidChangeColor, _this));\n\n    _this.monitor = null;\n    return _this;\n  }\n\n  SaturationBox.prototype.onMouseDown = function (e) {\n    var _this = this;\n\n    this.monitor = this._register(new GlobalMouseMoveMonitor());\n    var origin = dom.getDomNodePagePosition(this.domNode);\n\n    if (e.target !== this.selection) {\n      this.onDidChangePosition(e.offsetX, e.offsetY);\n    }\n\n    this.monitor.startMonitoring(standardMouseMoveMerger, function (event) {\n      return _this.onDidChangePosition(event.posx - origin.left, event.posy - origin.top);\n    }, function () {\n      return null;\n    });\n    var mouseUpListener = dom.addDisposableListener(document, dom.EventType.MOUSE_UP, function () {\n      _this._onColorFlushed.fire();\n\n      mouseUpListener.dispose();\n\n      if (_this.monitor) {\n        _this.monitor.stopMonitoring(true);\n\n        _this.monitor = null;\n      }\n    }, true);\n  };\n\n  SaturationBox.prototype.onDidChangePosition = function (left, top) {\n    var s = Math.max(0, Math.min(1, left / this.width));\n    var v = Math.max(0, Math.min(1, 1 - top / this.height));\n    this.paintSelection(s, v);\n\n    this._onDidChange.fire({\n      s: s,\n      v: v\n    });\n  };\n\n  SaturationBox.prototype.layout = function () {\n    this.width = this.domNode.offsetWidth;\n    this.height = this.domNode.offsetHeight;\n    this.canvas.width = this.width * this.pixelRatio;\n    this.canvas.height = this.height * this.pixelRatio;\n    this.paint();\n    var hsva = this.model.color.hsva;\n    this.paintSelection(hsva.s, hsva.v);\n  };\n\n  SaturationBox.prototype.paint = function () {\n    var hsva = this.model.color.hsva;\n    var saturatedColor = new Color(new HSVA(hsva.h, 1, 1, 1));\n    var ctx = this.canvas.getContext('2d');\n    var whiteGradient = ctx.createLinearGradient(0, 0, this.canvas.width, 0);\n    whiteGradient.addColorStop(0, 'rgba(255, 255, 255, 1)');\n    whiteGradient.addColorStop(0.5, 'rgba(255, 255, 255, 0.5)');\n    whiteGradient.addColorStop(1, 'rgba(255, 255, 255, 0)');\n    var blackGradient = ctx.createLinearGradient(0, 0, 0, this.canvas.height);\n    blackGradient.addColorStop(0, 'rgba(0, 0, 0, 0)');\n    blackGradient.addColorStop(1, 'rgba(0, 0, 0, 1)');\n    ctx.rect(0, 0, this.canvas.width, this.canvas.height);\n    ctx.fillStyle = Color.Format.CSS.format(saturatedColor);\n    ctx.fill();\n    ctx.fillStyle = whiteGradient;\n    ctx.fill();\n    ctx.fillStyle = blackGradient;\n    ctx.fill();\n  };\n\n  SaturationBox.prototype.paintSelection = function (s, v) {\n    this.selection.style.left = s * this.width + \"px\";\n    this.selection.style.top = this.height - v * this.height + \"px\";\n  };\n\n  SaturationBox.prototype.onDidChangeColor = function () {\n    if (this.monitor && this.monitor.isMonitoring()) {\n      return;\n    }\n\n    this.paint();\n  };\n\n  return SaturationBox;\n}(Disposable);\n\nvar Strip =\n/** @class */\nfunction (_super) {\n  __extends(Strip, _super);\n\n  function Strip(container, model) {\n    var _this = _super.call(this) || this;\n\n    _this.model = model;\n    _this._onDidChange = new Emitter();\n    _this.onDidChange = _this._onDidChange.event;\n    _this._onColorFlushed = new Emitter();\n    _this.onColorFlushed = _this._onColorFlushed.event;\n    _this.domNode = dom.append(container, $('.strip'));\n    _this.overlay = dom.append(_this.domNode, $('.overlay'));\n    _this.slider = dom.append(_this.domNode, $('.slider'));\n    _this.slider.style.top = \"0px\";\n\n    _this._register(dom.addDisposableListener(_this.domNode, dom.EventType.MOUSE_DOWN, function (e) {\n      return _this.onMouseDown(e);\n    }));\n\n    _this.layout();\n\n    return _this;\n  }\n\n  Strip.prototype.layout = function () {\n    this.height = this.domNode.offsetHeight - this.slider.offsetHeight;\n    var value = this.getValue(this.model.color);\n    this.updateSliderPosition(value);\n  };\n\n  Strip.prototype.onMouseDown = function (e) {\n    var _this = this;\n\n    var monitor = this._register(new GlobalMouseMoveMonitor());\n\n    var origin = dom.getDomNodePagePosition(this.domNode);\n    dom.addClass(this.domNode, 'grabbing');\n\n    if (e.target !== this.slider) {\n      this.onDidChangeTop(e.offsetY);\n    }\n\n    monitor.startMonitoring(standardMouseMoveMerger, function (event) {\n      return _this.onDidChangeTop(event.posy - origin.top);\n    }, function () {\n      return null;\n    });\n    var mouseUpListener = dom.addDisposableListener(document, dom.EventType.MOUSE_UP, function () {\n      _this._onColorFlushed.fire();\n\n      mouseUpListener.dispose();\n      monitor.stopMonitoring(true);\n      dom.removeClass(_this.domNode, 'grabbing');\n    }, true);\n  };\n\n  Strip.prototype.onDidChangeTop = function (top) {\n    var value = Math.max(0, Math.min(1, 1 - top / this.height));\n    this.updateSliderPosition(value);\n\n    this._onDidChange.fire(value);\n  };\n\n  Strip.prototype.updateSliderPosition = function (value) {\n    this.slider.style.top = (1 - value) * this.height + \"px\";\n  };\n\n  return Strip;\n}(Disposable);\n\nvar OpacityStrip =\n/** @class */\nfunction (_super) {\n  __extends(OpacityStrip, _super);\n\n  function OpacityStrip(container, model) {\n    var _this = _super.call(this, container, model) || this;\n\n    dom.addClass(_this.domNode, 'opacity-strip');\n\n    _this._register(model.onDidChangeColor(_this.onDidChangeColor, _this));\n\n    _this.onDidChangeColor(_this.model.color);\n\n    return _this;\n  }\n\n  OpacityStrip.prototype.onDidChangeColor = function (color) {\n    var _a = color.rgba,\n        r = _a.r,\n        g = _a.g,\n        b = _a.b;\n    var opaque = new Color(new RGBA(r, g, b, 1));\n    var transparent = new Color(new RGBA(r, g, b, 0));\n    this.overlay.style.background = \"linear-gradient(to bottom, \" + opaque + \" 0%, \" + transparent + \" 100%)\";\n  };\n\n  OpacityStrip.prototype.getValue = function (color) {\n    return color.hsva.a;\n  };\n\n  return OpacityStrip;\n}(Strip);\n\nvar HueStrip =\n/** @class */\nfunction (_super) {\n  __extends(HueStrip, _super);\n\n  function HueStrip(container, model) {\n    var _this = _super.call(this, container, model) || this;\n\n    dom.addClass(_this.domNode, 'hue-strip');\n    return _this;\n  }\n\n  HueStrip.prototype.getValue = function (color) {\n    return 1 - color.hsva.h / 360;\n  };\n\n  return HueStrip;\n}(Strip);\n\nvar ColorPickerWidget =\n/** @class */\nfunction (_super) {\n  __extends(ColorPickerWidget, _super);\n\n  function ColorPickerWidget(container, model, pixelRatio, themeService) {\n    var _this = _super.call(this) || this;\n\n    _this.model = model;\n    _this.pixelRatio = pixelRatio;\n\n    _this._register(onDidChangeZoomLevel(function () {\n      return _this.layout();\n    }));\n\n    var element = $('.colorpicker-widget');\n    container.appendChild(element);\n    var header = new ColorPickerHeader(element, _this.model, themeService);\n    _this.body = new ColorPickerBody(element, _this.model, _this.pixelRatio);\n\n    _this._register(header);\n\n    _this._register(_this.body);\n\n    return _this;\n  }\n\n  ColorPickerWidget.prototype.layout = function () {\n    this.body.layout();\n  };\n\n  return ColorPickerWidget;\n}(Widget);\n\nexport { ColorPickerWidget };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { coalesce } from '../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../base/common/errors.js';\nimport { registerDefaultLanguageCommand } from '../../browser/editorExtensions.js';\nimport { HoverProviderRegistry } from '../../common/modes.js';\nexport function getHover(model, position, token) {\n  var supports = HoverProviderRegistry.ordered(model);\n  var promises = supports.map(function (support) {\n    return Promise.resolve(support.provideHover(model, position, token)).then(function (hover) {\n      return hover && isValid(hover) ? hover : undefined;\n    }, function (err) {\n      onUnexpectedExternalError(err);\n      return undefined;\n    });\n  });\n  return Promise.all(promises).then(coalesce);\n}\nregisterDefaultLanguageCommand('_executeHoverProvider', function (model, position) {\n  return getHover(model, position, CancellationToken.None);\n});\n\nfunction isValid(result) {\n  var hasRange = typeof result.range !== 'undefined';\n  var hasHtmlContent = typeof result.contents !== 'undefined' && result.contents && result.contents.length > 0;\n  return hasRange && hasHtmlContent;\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { RunOnceScheduler, createCancelablePromise } from '../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\n\nvar HoverOperation =\n/** @class */\nfunction () {\n  function HoverOperation(computer, success, error, progress, hoverTime) {\n    var _this = this;\n\n    this._computer = computer;\n    this._state = 0\n    /* IDLE */\n    ;\n    this._hoverTime = hoverTime;\n    this._firstWaitScheduler = new RunOnceScheduler(function () {\n      return _this._triggerAsyncComputation();\n    }, 0);\n    this._secondWaitScheduler = new RunOnceScheduler(function () {\n      return _this._triggerSyncComputation();\n    }, 0);\n    this._loadingMessageScheduler = new RunOnceScheduler(function () {\n      return _this._showLoadingMessage();\n    }, 0);\n    this._asyncComputationPromise = null;\n    this._asyncComputationPromiseDone = false;\n    this._completeCallback = success;\n    this._errorCallback = error;\n    this._progressCallback = progress;\n  }\n\n  HoverOperation.prototype.setHoverTime = function (hoverTime) {\n    this._hoverTime = hoverTime;\n  };\n\n  HoverOperation.prototype._firstWaitTime = function () {\n    return this._hoverTime / 2;\n  };\n\n  HoverOperation.prototype._secondWaitTime = function () {\n    return this._hoverTime / 2;\n  };\n\n  HoverOperation.prototype._loadingMessageTime = function () {\n    return 3 * this._hoverTime;\n  };\n\n  HoverOperation.prototype._triggerAsyncComputation = function () {\n    var _this = this;\n\n    this._state = 2\n    /* SECOND_WAIT */\n    ;\n\n    this._secondWaitScheduler.schedule(this._secondWaitTime());\n\n    if (this._computer.computeAsync) {\n      this._asyncComputationPromiseDone = false;\n      this._asyncComputationPromise = createCancelablePromise(function (token) {\n        return _this._computer.computeAsync(token);\n      });\n\n      this._asyncComputationPromise.then(function (asyncResult) {\n        _this._asyncComputationPromiseDone = true;\n\n        _this._withAsyncResult(asyncResult);\n      }, function (e) {\n        return _this._onError(e);\n      });\n    } else {\n      this._asyncComputationPromiseDone = true;\n    }\n  };\n\n  HoverOperation.prototype._triggerSyncComputation = function () {\n    if (this._computer.computeSync) {\n      this._computer.onResult(this._computer.computeSync(), true);\n    }\n\n    if (this._asyncComputationPromiseDone) {\n      this._state = 0\n      /* IDLE */\n      ;\n\n      this._onComplete(this._computer.getResult());\n    } else {\n      this._state = 3\n      /* WAITING_FOR_ASYNC_COMPUTATION */\n      ;\n\n      this._onProgress(this._computer.getResult());\n    }\n  };\n\n  HoverOperation.prototype._showLoadingMessage = function () {\n    if (this._state === 3\n    /* WAITING_FOR_ASYNC_COMPUTATION */\n    ) {\n        this._onProgress(this._computer.getResultWithLoadingMessage());\n      }\n  };\n\n  HoverOperation.prototype._withAsyncResult = function (asyncResult) {\n    if (asyncResult) {\n      this._computer.onResult(asyncResult, false);\n    }\n\n    if (this._state === 3\n    /* WAITING_FOR_ASYNC_COMPUTATION */\n    ) {\n        this._state = 0\n        /* IDLE */\n        ;\n\n        this._onComplete(this._computer.getResult());\n      }\n  };\n\n  HoverOperation.prototype._onComplete = function (value) {\n    if (this._completeCallback) {\n      this._completeCallback(value);\n    }\n  };\n\n  HoverOperation.prototype._onError = function (error) {\n    if (this._errorCallback) {\n      this._errorCallback(error);\n    } else {\n      onUnexpectedError(error);\n    }\n  };\n\n  HoverOperation.prototype._onProgress = function (value) {\n    if (this._progressCallback) {\n      this._progressCallback(value);\n    }\n  };\n\n  HoverOperation.prototype.start = function (mode) {\n    if (mode === 0\n    /* Delayed */\n    ) {\n        if (this._state === 0\n        /* IDLE */\n        ) {\n            this._state = 1\n            /* FIRST_WAIT */\n            ;\n\n            this._firstWaitScheduler.schedule(this._firstWaitTime());\n\n            this._loadingMessageScheduler.schedule(this._loadingMessageTime());\n          }\n      } else {\n      switch (this._state) {\n        case 0\n        /* IDLE */\n        :\n          this._triggerAsyncComputation();\n\n          this._secondWaitScheduler.cancel();\n\n          this._triggerSyncComputation();\n\n          break;\n\n        case 2\n        /* SECOND_WAIT */\n        :\n          this._secondWaitScheduler.cancel();\n\n          this._triggerSyncComputation();\n\n          break;\n      }\n    }\n  };\n\n  HoverOperation.prototype.cancel = function () {\n    this._loadingMessageScheduler.cancel();\n\n    if (this._state === 1\n    /* FIRST_WAIT */\n    ) {\n        this._firstWaitScheduler.cancel();\n      }\n\n    if (this._state === 2\n    /* SECOND_WAIT */\n    ) {\n        this._secondWaitScheduler.cancel();\n\n        if (this._asyncComputationPromise) {\n          this._asyncComputationPromise.cancel();\n\n          this._asyncComputationPromise = null;\n        }\n      }\n\n    if (this._state === 3\n    /* WAITING_FOR_ASYNC_COMPUTATION */\n    ) {\n        if (this._asyncComputationPromise) {\n          this._asyncComputationPromise.cancel();\n\n          this._asyncComputationPromise = null;\n        }\n      }\n\n    this._state = 0\n    /* IDLE */\n    ;\n  };\n\n  return HoverOperation;\n}();\n\nexport { HoverOperation };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { toggleClass } from '../../../base/browser/dom.js';\nimport { DomScrollableElement } from '../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { Widget } from '../../../base/browser/ui/widget.js';\nimport { dispose } from '../../../base/common/lifecycle.js';\n\nvar ContentHoverWidget =\n/** @class */\nfunction (_super) {\n  __extends(ContentHoverWidget, _super);\n\n  function ContentHoverWidget(id, editor) {\n    var _this = _super.call(this) || this;\n\n    _this.disposables = []; // Editor.IContentWidget.allowEditorOverflow\n\n    _this.allowEditorOverflow = true;\n    _this._id = id;\n    _this._editor = editor;\n    _this._isVisible = false;\n    _this._containerDomNode = document.createElement('div');\n    _this._containerDomNode.className = 'monaco-editor-hover hidden';\n    _this._containerDomNode.tabIndex = 0;\n    _this._domNode = document.createElement('div');\n    _this._domNode.className = 'monaco-editor-hover-content';\n    _this.scrollbar = new DomScrollableElement(_this._domNode, {});\n\n    _this.disposables.push(_this.scrollbar);\n\n    _this._containerDomNode.appendChild(_this.scrollbar.getDomNode());\n\n    _this.onkeydown(_this._containerDomNode, function (e) {\n      if (e.equals(9\n      /* Escape */\n      )) {\n        _this.hide();\n      }\n    });\n\n    _this._register(_this._editor.onDidChangeConfiguration(function (e) {\n      if (e.fontInfo) {\n        _this.updateFont();\n      }\n    }));\n\n    _this._editor.onDidLayoutChange(function (e) {\n      return _this.layout();\n    });\n\n    _this.layout();\n\n    _this._editor.addContentWidget(_this);\n\n    _this._showAtPosition = null;\n    _this._showAtRange = null;\n    return _this;\n  }\n\n  Object.defineProperty(ContentHoverWidget.prototype, \"isVisible\", {\n    get: function get() {\n      return this._isVisible;\n    },\n    set: function set(value) {\n      this._isVisible = value;\n      toggleClass(this._containerDomNode, 'hidden', !this._isVisible);\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ContentHoverWidget.prototype.getId = function () {\n    return this._id;\n  };\n\n  ContentHoverWidget.prototype.getDomNode = function () {\n    return this._containerDomNode;\n  };\n\n  ContentHoverWidget.prototype.showAt = function (position, range, focus) {\n    // Position has changed\n    this._showAtPosition = position;\n    this._showAtRange = range;\n    this.isVisible = true;\n\n    this._editor.layoutContentWidget(this); // Simply force a synchronous render on the editor\n    // such that the widget does not really render with left = '0px'\n\n\n    this._editor.render();\n\n    this._stoleFocus = focus;\n\n    if (focus) {\n      this._containerDomNode.focus();\n    }\n  };\n\n  ContentHoverWidget.prototype.hide = function () {\n    if (!this.isVisible) {\n      return;\n    }\n\n    this.isVisible = false;\n\n    this._editor.layoutContentWidget(this);\n\n    if (this._stoleFocus) {\n      this._editor.focus();\n    }\n  };\n\n  ContentHoverWidget.prototype.getPosition = function () {\n    if (this.isVisible) {\n      return {\n        position: this._showAtPosition,\n        range: this._showAtRange,\n        preference: [1\n        /* ABOVE */\n        , 2\n        /* BELOW */\n        ]\n      };\n    }\n\n    return null;\n  };\n\n  ContentHoverWidget.prototype.dispose = function () {\n    this._editor.removeContentWidget(this);\n\n    this.disposables = dispose(this.disposables);\n\n    _super.prototype.dispose.call(this);\n  };\n\n  ContentHoverWidget.prototype.updateFont = function () {\n    var _this = this;\n\n    var codeClasses = Array.prototype.slice.call(this._domNode.getElementsByClassName('code'));\n    codeClasses.forEach(function (node) {\n      return _this._editor.applyFontInfo(node);\n    });\n  };\n\n  ContentHoverWidget.prototype.updateContents = function (node) {\n    this._domNode.textContent = '';\n\n    this._domNode.appendChild(node);\n\n    this.updateFont();\n\n    this._editor.layoutContentWidget(this);\n\n    this.onContentsChange();\n  };\n\n  ContentHoverWidget.prototype.onContentsChange = function () {\n    this.scrollbar.scanDomNode();\n  };\n\n  ContentHoverWidget.prototype.layout = function () {\n    var height = Math.max(this._editor.getLayoutInfo().height / 4, 250);\n\n    var _a = this._editor.getConfiguration().fontInfo,\n        fontSize = _a.fontSize,\n        lineHeight = _a.lineHeight;\n\n    this._domNode.style.fontSize = fontSize + \"px\";\n    this._domNode.style.lineHeight = lineHeight + \"px\";\n    this._domNode.style.maxHeight = height + \"px\";\n    this._domNode.style.maxWidth = Math.max(this._editor.getLayoutInfo().width * 0.66, 500) + \"px\";\n  };\n\n  return ContentHoverWidget;\n}(Widget);\n\nexport { ContentHoverWidget };\n\nvar GlyphHoverWidget =\n/** @class */\nfunction (_super) {\n  __extends(GlyphHoverWidget, _super);\n\n  function GlyphHoverWidget(id, editor) {\n    var _this = _super.call(this) || this;\n\n    _this._id = id;\n    _this._editor = editor;\n    _this._isVisible = false;\n    _this._domNode = document.createElement('div');\n    _this._domNode.className = 'monaco-editor-hover hidden';\n\n    _this._domNode.setAttribute('aria-hidden', 'true');\n\n    _this._domNode.setAttribute('role', 'presentation');\n\n    _this._showAtLineNumber = -1;\n\n    _this._register(_this._editor.onDidChangeConfiguration(function (e) {\n      if (e.fontInfo) {\n        _this.updateFont();\n      }\n    }));\n\n    _this._editor.addOverlayWidget(_this);\n\n    return _this;\n  }\n\n  Object.defineProperty(GlyphHoverWidget.prototype, \"isVisible\", {\n    get: function get() {\n      return this._isVisible;\n    },\n    set: function set(value) {\n      this._isVisible = value;\n      toggleClass(this._domNode, 'hidden', !this._isVisible);\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  GlyphHoverWidget.prototype.getId = function () {\n    return this._id;\n  };\n\n  GlyphHoverWidget.prototype.getDomNode = function () {\n    return this._domNode;\n  };\n\n  GlyphHoverWidget.prototype.showAt = function (lineNumber) {\n    this._showAtLineNumber = lineNumber;\n\n    if (!this.isVisible) {\n      this.isVisible = true;\n    }\n\n    var editorLayout = this._editor.getLayoutInfo();\n\n    var topForLineNumber = this._editor.getTopForLineNumber(this._showAtLineNumber);\n\n    var editorScrollTop = this._editor.getScrollTop();\n\n    var lineHeight = this._editor.getConfiguration().lineHeight;\n\n    var nodeHeight = this._domNode.clientHeight;\n    var top = topForLineNumber - editorScrollTop - (nodeHeight - lineHeight) / 2;\n    this._domNode.style.left = editorLayout.glyphMarginLeft + editorLayout.glyphMarginWidth + \"px\";\n    this._domNode.style.top = Math.max(Math.round(top), 0) + \"px\";\n  };\n\n  GlyphHoverWidget.prototype.hide = function () {\n    if (!this.isVisible) {\n      return;\n    }\n\n    this.isVisible = false;\n  };\n\n  GlyphHoverWidget.prototype.getPosition = function () {\n    return null;\n  };\n\n  GlyphHoverWidget.prototype.dispose = function () {\n    this._editor.removeOverlayWidget(this);\n\n    _super.prototype.dispose.call(this);\n  };\n\n  GlyphHoverWidget.prototype.updateFont = function () {\n    var _this = this;\n\n    var codeTags = Array.prototype.slice.call(this._domNode.getElementsByTagName('code'));\n    var codeClasses = Array.prototype.slice.call(this._domNode.getElementsByClassName('code'));\n    codeTags.concat(codeClasses).forEach(function (node) {\n      return _this._editor.applyFontInfo(node);\n    });\n  };\n\n  GlyphHoverWidget.prototype.updateContents = function (node) {\n    this._domNode.textContent = '';\n\n    this._domNode.appendChild(node);\n\n    this.updateFont();\n  };\n\n  return GlyphHoverWidget;\n}(Widget);\n\nexport { GlyphHoverWidget };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport { renderMarkdown } from '../../../base/browser/htmlContentRenderer.js';\nimport { IOpenerService, NullOpenerService } from '../../../platform/opener/common/opener.js';\nimport { IModeService } from '../../common/services/modeService.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { tokenizeToString } from '../../common/modes/textToHtmlTokenizer.js';\nimport { optional } from '../../../platform/instantiation/common/instantiation.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { dispose as _dispose } from '../../../base/common/lifecycle.js';\nimport { TokenizationRegistry } from '../../common/modes.js';\n\nvar MarkdownRenderer =\n/** @class */\nfunction () {\n  function MarkdownRenderer(_editor, _modeService, _openerService) {\n    if (_openerService === void 0) {\n      _openerService = NullOpenerService;\n    }\n\n    this._editor = _editor;\n    this._modeService = _modeService;\n    this._openerService = _openerService;\n    this._onDidRenderCodeBlock = new Emitter();\n    this.onDidRenderCodeBlock = this._onDidRenderCodeBlock.event;\n  }\n\n  MarkdownRenderer.prototype.getOptions = function (disposeables) {\n    var _this = this;\n\n    return {\n      codeBlockRenderer: function codeBlockRenderer(languageAlias, value) {\n        // In markdown,\n        // it is possible that we stumble upon language aliases (e.g.js instead of javascript)\n        // it is possible no alias is given in which case we fall back to the current editor lang\n        var modeId = null;\n\n        if (languageAlias) {\n          modeId = _this._modeService.getModeIdForLanguageName(languageAlias);\n        } else {\n          var model = _this._editor.getModel();\n\n          if (model) {\n            modeId = model.getLanguageIdentifier().language;\n          }\n        }\n\n        _this._modeService.triggerMode(modeId || '');\n\n        return Promise.resolve(true).then(function (_) {\n          var promise = TokenizationRegistry.getPromise(modeId || '');\n\n          if (promise) {\n            return promise.then(function (support) {\n              return tokenizeToString(value, support);\n            });\n          }\n\n          return tokenizeToString(value, undefined);\n        }).then(function (code) {\n          return \"<span style=\\\"font-family: \" + _this._editor.getConfiguration().fontInfo.fontFamily + \"\\\">\" + code + \"</span>\";\n        });\n      },\n      codeBlockRenderCallback: function codeBlockRenderCallback() {\n        return _this._onDidRenderCodeBlock.fire();\n      },\n      actionHandler: {\n        callback: function callback(content) {\n          var uri;\n\n          try {\n            uri = URI.parse(content);\n          } catch (_a) {// ignore\n          }\n\n          if (uri && _this._openerService) {\n            _this._openerService.open(uri).catch(onUnexpectedError);\n          }\n        },\n        disposeables: disposeables\n      }\n    };\n  };\n\n  MarkdownRenderer.prototype.render = function (markdown) {\n    var disposeables = [];\n    var element;\n\n    if (!markdown) {\n      element = document.createElement('span');\n    } else {\n      element = renderMarkdown(markdown, this.getOptions(disposeables));\n    }\n\n    return {\n      element: element,\n      dispose: function dispose() {\n        return _dispose(disposeables);\n      }\n    };\n  };\n\n  MarkdownRenderer = __decorate([__param(1, IModeService), __param(2, optional(IOpenerService))], MarkdownRenderer);\n  return MarkdownRenderer;\n}();\n\nexport { MarkdownRenderer };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nimport * as nls from '../../../nls.js';\nimport * as dom from '../../../base/browser/dom.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { Color, RGBA } from '../../../base/common/color.js';\nimport { MarkdownString, isEmptyMarkdownString, markedStringsEquals } from '../../../base/common/htmlContent.js';\nimport { Disposable, combinedDisposable, toDisposable } from '../../../base/common/lifecycle.js';\nimport { Position } from '../../common/core/position.js';\nimport { Range } from '../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\nimport { HoverProviderRegistry } from '../../common/modes.js';\nimport { getColorPresentations } from '../colorPicker/color.js';\nimport { ColorDetector } from '../colorPicker/colorDetector.js';\nimport { ColorPickerModel } from '../colorPicker/colorPickerModel.js';\nimport { ColorPickerWidget } from '../colorPicker/colorPickerWidget.js';\nimport { getHover } from './getHover.js';\nimport { HoverOperation } from './hoverOperation.js';\nimport { ContentHoverWidget } from './hoverWidgets.js';\nimport { MarkdownRenderer } from '../markdown/markdownRenderer.js';\nimport { coalesce, isNonEmptyArray, asArray } from '../../../base/common/arrays.js';\nimport { IMarkerData, MarkerSeverity } from '../../../platform/markers/common/markers.js';\nimport { basename } from '../../../base/common/resources.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { NullOpenerService } from '../../../platform/opener/common/opener.js';\nimport { MarkerController, NextMarkerAction } from '../gotoError/gotoError.js';\nimport { createCancelablePromise } from '../../../base/common/async.js';\nimport { getCodeActions } from '../codeAction/codeAction.js';\nimport { applyCodeAction, QuickFixAction } from '../codeAction/codeActionCommands.js';\nimport { Action } from '../../../base/common/actions.js';\nimport { CodeActionKind } from '../codeAction/codeActionTrigger.js';\nimport { withNullAsUndefined } from '../../../base/common/types.js';\nvar $ = dom.$;\n\nvar ColorHover =\n/** @class */\nfunction () {\n  function ColorHover(range, color, provider) {\n    this.range = range;\n    this.color = color;\n    this.provider = provider;\n  }\n\n  return ColorHover;\n}();\n\nvar MarkerHover =\n/** @class */\nfunction () {\n  function MarkerHover(range, marker) {\n    this.range = range;\n    this.marker = marker;\n  }\n\n  return MarkerHover;\n}();\n\nvar ModesContentComputer =\n/** @class */\nfunction () {\n  function ModesContentComputer(editor, _markerDecorationsService) {\n    this._markerDecorationsService = _markerDecorationsService;\n    this._editor = editor;\n    this._range = null;\n  }\n\n  ModesContentComputer.prototype.setRange = function (range) {\n    this._range = range;\n    this._result = [];\n  };\n\n  ModesContentComputer.prototype.clearResult = function () {\n    this._result = [];\n  };\n\n  ModesContentComputer.prototype.computeAsync = function (token) {\n    if (!this._editor.hasModel() || !this._range) {\n      return Promise.resolve([]);\n    }\n\n    var model = this._editor.getModel();\n\n    if (!HoverProviderRegistry.has(model)) {\n      return Promise.resolve([]);\n    }\n\n    return getHover(model, new Position(this._range.startLineNumber, this._range.startColumn), token);\n  };\n\n  ModesContentComputer.prototype.computeSync = function () {\n    var _this = this;\n\n    if (!this._editor.hasModel() || !this._range) {\n      return [];\n    }\n\n    var model = this._editor.getModel();\n\n    var lineNumber = this._range.startLineNumber;\n\n    if (lineNumber > this._editor.getModel().getLineCount()) {\n      // Illegal line number => no results\n      return [];\n    }\n\n    var colorDetector = ColorDetector.get(this._editor);\n    var maxColumn = model.getLineMaxColumn(lineNumber);\n\n    var lineDecorations = this._editor.getLineDecorations(lineNumber);\n\n    var didFindColor = false;\n    var hoverRange = this._range;\n    var result = lineDecorations.map(function (d) {\n      var startColumn = d.range.startLineNumber === lineNumber ? d.range.startColumn : 1;\n      var endColumn = d.range.endLineNumber === lineNumber ? d.range.endColumn : maxColumn;\n\n      if (startColumn > hoverRange.startColumn || hoverRange.endColumn > endColumn) {\n        return null;\n      }\n\n      var range = new Range(hoverRange.startLineNumber, startColumn, hoverRange.startLineNumber, endColumn);\n\n      var marker = _this._markerDecorationsService.getMarker(model, d);\n\n      if (marker) {\n        return new MarkerHover(range, marker);\n      }\n\n      var colorData = colorDetector.getColorData(d.range.getStartPosition());\n\n      if (!didFindColor && colorData) {\n        didFindColor = true;\n        var _a = colorData.colorInfo,\n            color = _a.color,\n            range_1 = _a.range;\n        return new ColorHover(range_1, color, colorData.provider);\n      } else {\n        if (isEmptyMarkdownString(d.options.hoverMessage)) {\n          return null;\n        }\n\n        var contents = d.options.hoverMessage ? asArray(d.options.hoverMessage) : [];\n        return {\n          contents: contents,\n          range: range\n        };\n      }\n    });\n    return coalesce(result);\n  };\n\n  ModesContentComputer.prototype.onResult = function (result, isFromSynchronousComputation) {\n    // Always put synchronous messages before asynchronous ones\n    if (isFromSynchronousComputation) {\n      this._result = result.concat(this._result.sort(function (a, b) {\n        if (a instanceof ColorHover) {\n          // sort picker messages at to the top\n          return -1;\n        } else if (b instanceof ColorHover) {\n          return 1;\n        }\n\n        return 0;\n      }));\n    } else {\n      this._result = this._result.concat(result);\n    }\n  };\n\n  ModesContentComputer.prototype.getResult = function () {\n    return this._result.slice(0);\n  };\n\n  ModesContentComputer.prototype.getResultWithLoadingMessage = function () {\n    return this._result.slice(0).concat([this._getLoadingMessage()]);\n  };\n\n  ModesContentComputer.prototype._getLoadingMessage = function () {\n    return {\n      range: withNullAsUndefined(this._range),\n      contents: [new MarkdownString().appendText(nls.localize('modesContentHover.loading', \"Loading...\"))]\n    };\n  };\n\n  return ModesContentComputer;\n}();\n\nvar ModesContentHoverWidget =\n/** @class */\nfunction (_super) {\n  __extends(ModesContentHoverWidget, _super);\n\n  function ModesContentHoverWidget(editor, markerDecorationsService, _themeService, _keybindingService, _contextMenuService, _bulkEditService, _commandService, _modeService, _openerService) {\n    if (_openerService === void 0) {\n      _openerService = NullOpenerService;\n    }\n\n    var _this = _super.call(this, ModesContentHoverWidget.ID, editor) || this;\n\n    _this._themeService = _themeService;\n    _this._keybindingService = _keybindingService;\n    _this._contextMenuService = _contextMenuService;\n    _this._bulkEditService = _bulkEditService;\n    _this._commandService = _commandService;\n    _this._modeService = _modeService;\n    _this._openerService = _openerService;\n    _this.renderDisposable = Disposable.None;\n    _this._messages = [];\n    _this._lastRange = null;\n    _this._computer = new ModesContentComputer(_this._editor, markerDecorationsService);\n    _this._highlightDecorations = [];\n    _this._isChangingDecorations = false;\n    _this._hoverOperation = new HoverOperation(_this._computer, function (result) {\n      return _this._withResult(result, true);\n    }, null, function (result) {\n      return _this._withResult(result, false);\n    }, _this._editor.getConfiguration().contribInfo.hover.delay);\n\n    _this._register(dom.addStandardDisposableListener(_this.getDomNode(), dom.EventType.FOCUS, function () {\n      if (_this._colorPicker) {\n        dom.addClass(_this.getDomNode(), 'colorpicker-hover');\n      }\n    }));\n\n    _this._register(dom.addStandardDisposableListener(_this.getDomNode(), dom.EventType.BLUR, function () {\n      dom.removeClass(_this.getDomNode(), 'colorpicker-hover');\n    }));\n\n    _this._register(editor.onDidChangeConfiguration(function (e) {\n      _this._hoverOperation.setHoverTime(_this._editor.getConfiguration().contribInfo.hover.delay);\n    }));\n\n    return _this;\n  }\n\n  ModesContentHoverWidget.prototype.dispose = function () {\n    this.renderDisposable.dispose();\n    this.renderDisposable = Disposable.None;\n\n    this._hoverOperation.cancel();\n\n    _super.prototype.dispose.call(this);\n  };\n\n  ModesContentHoverWidget.prototype.onModelDecorationsChanged = function () {\n    if (this._isChangingDecorations) {\n      return;\n    }\n\n    if (this.isVisible) {\n      // The decorations have changed and the hover is visible,\n      // we need to recompute the displayed text\n      this._hoverOperation.cancel();\n\n      this._computer.clearResult();\n\n      if (!this._colorPicker) {\n        // TODO@Michel ensure that displayed text for other decorations is computed even if color picker is in place\n        this._hoverOperation.start(0\n        /* Delayed */\n        );\n      }\n    }\n  };\n\n  ModesContentHoverWidget.prototype.startShowingAt = function (range, mode, focus) {\n    if (this._lastRange && this._lastRange.equalsRange(range)) {\n      // We have to show the widget at the exact same range as before, so no work is needed\n      return;\n    }\n\n    this._hoverOperation.cancel();\n\n    if (this.isVisible) {\n      // The range might have changed, but the hover is visible\n      // Instead of hiding it completely, filter out messages that are still in the new range and\n      // kick off a new computation\n      if (!this._showAtPosition || this._showAtPosition.lineNumber !== range.startLineNumber) {\n        this.hide();\n      } else {\n        var filteredMessages = [];\n\n        for (var i = 0, len = this._messages.length; i < len; i++) {\n          var msg = this._messages[i];\n          var rng = msg.range;\n\n          if (rng && rng.startColumn <= range.startColumn && rng.endColumn >= range.endColumn) {\n            filteredMessages.push(msg);\n          }\n        }\n\n        if (filteredMessages.length > 0) {\n          if (hoverContentsEquals(filteredMessages, this._messages)) {\n            return;\n          }\n\n          this._renderMessages(range, filteredMessages);\n        } else {\n          this.hide();\n        }\n      }\n    }\n\n    this._lastRange = range;\n\n    this._computer.setRange(range);\n\n    this._shouldFocus = focus;\n\n    this._hoverOperation.start(mode);\n  };\n\n  ModesContentHoverWidget.prototype.hide = function () {\n    this._lastRange = null;\n\n    this._hoverOperation.cancel();\n\n    _super.prototype.hide.call(this);\n\n    this._isChangingDecorations = true;\n    this._highlightDecorations = this._editor.deltaDecorations(this._highlightDecorations, []);\n    this._isChangingDecorations = false;\n    this.renderDisposable.dispose();\n    this.renderDisposable = Disposable.None;\n    this._colorPicker = null;\n  };\n\n  ModesContentHoverWidget.prototype.isColorPickerVisible = function () {\n    if (this._colorPicker) {\n      return true;\n    }\n\n    return false;\n  };\n\n  ModesContentHoverWidget.prototype._withResult = function (result, complete) {\n    this._messages = result;\n\n    if (this._lastRange && this._messages.length > 0) {\n      this._renderMessages(this._lastRange, this._messages);\n    } else if (complete) {\n      this.hide();\n    }\n  };\n\n  ModesContentHoverWidget.prototype._renderMessages = function (renderRange, messages) {\n    var _this = this;\n\n    this.renderDisposable.dispose();\n    this._colorPicker = null; // update column from which to show\n\n    var renderColumn = Number.MAX_VALUE;\n    var highlightRange = messages[0].range ? Range.lift(messages[0].range) : null;\n    var fragment = document.createDocumentFragment();\n    var isEmptyHoverContent = true;\n    var containColorPicker = false;\n    var markdownDisposeables = [];\n    var markerMessages = [];\n    messages.forEach(function (msg) {\n      if (!msg.range) {\n        return;\n      }\n\n      renderColumn = Math.min(renderColumn, msg.range.startColumn);\n      highlightRange = highlightRange ? Range.plusRange(highlightRange, msg.range) : Range.lift(msg.range);\n\n      if (msg instanceof ColorHover) {\n        containColorPicker = true;\n        var _a = msg.color,\n            red = _a.red,\n            green = _a.green,\n            blue = _a.blue,\n            alpha = _a.alpha;\n        var rgba = new RGBA(red * 255, green * 255, blue * 255, alpha);\n        var color_1 = new Color(rgba);\n\n        if (!_this._editor.hasModel()) {\n          return;\n        }\n\n        var editorModel_1 = _this._editor.getModel();\n\n        var range_2 = new Range(msg.range.startLineNumber, msg.range.startColumn, msg.range.endLineNumber, msg.range.endColumn);\n        var colorInfo = {\n          range: msg.range,\n          color: msg.color\n        }; // create blank olor picker model and widget first to ensure it's positioned correctly.\n\n        var model_1 = new ColorPickerModel(color_1, [], 0);\n        var widget_1 = new ColorPickerWidget(fragment, model_1, _this._editor.getConfiguration().pixelRatio, _this._themeService);\n        getColorPresentations(editorModel_1, colorInfo, msg.provider, CancellationToken.None).then(function (colorPresentations) {\n          model_1.colorPresentations = colorPresentations || [];\n\n          if (!_this._editor.hasModel()) {\n            // gone...\n            return;\n          }\n\n          var originalText = _this._editor.getModel().getValueInRange(msg.range);\n\n          model_1.guessColorPresentation(color_1, originalText);\n\n          var updateEditorModel = function updateEditorModel() {\n            var textEdits;\n            var newRange;\n\n            if (model_1.presentation.textEdit) {\n              textEdits = [model_1.presentation.textEdit];\n              newRange = new Range(model_1.presentation.textEdit.range.startLineNumber, model_1.presentation.textEdit.range.startColumn, model_1.presentation.textEdit.range.endLineNumber, model_1.presentation.textEdit.range.endColumn);\n              newRange = newRange.setEndPosition(newRange.endLineNumber, newRange.startColumn + model_1.presentation.textEdit.text.length);\n            } else {\n              textEdits = [{\n                identifier: null,\n                range: range_2,\n                text: model_1.presentation.label,\n                forceMoveMarkers: false\n              }];\n              newRange = range_2.setEndPosition(range_2.endLineNumber, range_2.startColumn + model_1.presentation.label.length);\n            }\n\n            _this._editor.pushUndoStop();\n\n            _this._editor.executeEdits('colorpicker', textEdits);\n\n            if (model_1.presentation.additionalTextEdits) {\n              textEdits = model_1.presentation.additionalTextEdits.slice();\n\n              _this._editor.executeEdits('colorpicker', textEdits);\n\n              _this.hide();\n            }\n\n            _this._editor.pushUndoStop();\n\n            range_2 = newRange;\n          };\n\n          var updateColorPresentations = function updateColorPresentations(color) {\n            return getColorPresentations(editorModel_1, {\n              range: range_2,\n              color: {\n                red: color.rgba.r / 255,\n                green: color.rgba.g / 255,\n                blue: color.rgba.b / 255,\n                alpha: color.rgba.a\n              }\n            }, msg.provider, CancellationToken.None).then(function (colorPresentations) {\n              model_1.colorPresentations = colorPresentations || [];\n            });\n          };\n\n          var colorListener = model_1.onColorFlushed(function (color) {\n            updateColorPresentations(color).then(updateEditorModel);\n          });\n          var colorChangeListener = model_1.onDidChangeColor(updateColorPresentations);\n          _this._colorPicker = widget_1;\n\n          _this.showAt(range_2.getStartPosition(), range_2, _this._shouldFocus);\n\n          _this.updateContents(fragment);\n\n          _this._colorPicker.layout();\n\n          _this.renderDisposable = combinedDisposable([colorListener, colorChangeListener, widget_1].concat(markdownDisposeables));\n        });\n      } else {\n        if (msg instanceof MarkerHover) {\n          markerMessages.push(msg);\n          isEmptyHoverContent = false;\n        } else {\n          msg.contents.filter(function (contents) {\n            return !isEmptyMarkdownString(contents);\n          }).forEach(function (contents) {\n            var markdownHoverElement = $('div.hover-row.markdown-hover');\n            var hoverContentsElement = dom.append(markdownHoverElement, $('div.hover-contents'));\n            var renderer = new MarkdownRenderer(_this._editor, _this._modeService, _this._openerService);\n            markdownDisposeables.push(renderer.onDidRenderCodeBlock(function () {\n              hoverContentsElement.className = 'hover-contents code-hover-contents';\n\n              _this.onContentsChange();\n            }));\n            var renderedContents = renderer.render(contents);\n            hoverContentsElement.appendChild(renderedContents.element);\n            fragment.appendChild(markdownHoverElement);\n            markdownDisposeables.push(renderedContents);\n            isEmptyHoverContent = false;\n          });\n        }\n      }\n    });\n\n    if (markerMessages.length) {\n      markerMessages.forEach(function (msg) {\n        return fragment.appendChild(_this.renderMarkerHover(msg));\n      });\n      var markerHoverForStatusbar = markerMessages.length === 1 ? markerMessages[0] : markerMessages.sort(function (a, b) {\n        return MarkerSeverity.compare(a.marker.severity, b.marker.severity);\n      })[0];\n      fragment.appendChild(this.renderMarkerStatusbar(markerHoverForStatusbar));\n    } // show\n\n\n    if (!containColorPicker && !isEmptyHoverContent) {\n      this.showAt(new Position(renderRange.startLineNumber, renderColumn), highlightRange, this._shouldFocus);\n      this.updateContents(fragment);\n    }\n\n    this._isChangingDecorations = true;\n    this._highlightDecorations = this._editor.deltaDecorations(this._highlightDecorations, highlightRange ? [{\n      range: highlightRange,\n      options: ModesContentHoverWidget._DECORATION_OPTIONS\n    }] : []);\n    this._isChangingDecorations = false;\n  };\n\n  ModesContentHoverWidget.prototype.renderMarkerHover = function (markerHover) {\n    var _this = this;\n\n    var hoverElement = $('div.hover-row');\n    var markerElement = dom.append(hoverElement, $('div.marker.hover-contents'));\n    var _a = markerHover.marker,\n        source = _a.source,\n        message = _a.message,\n        code = _a.code,\n        relatedInformation = _a.relatedInformation;\n\n    this._editor.applyFontInfo(markerElement);\n\n    var messageElement = dom.append(markerElement, $('span'));\n    messageElement.style.whiteSpace = 'pre-wrap';\n    messageElement.innerText = message;\n\n    if (source || code) {\n      var detailsElement = dom.append(markerElement, $('span'));\n      detailsElement.style.opacity = '0.6';\n      detailsElement.style.paddingLeft = '6px';\n      detailsElement.innerText = source && code ? source + \"(\" + code + \")\" : source ? source : \"(\" + code + \")\";\n    }\n\n    if (isNonEmptyArray(relatedInformation)) {\n      var _loop_1 = function _loop_1(message_1, resource, startLineNumber, startColumn) {\n        var relatedInfoContainer = dom.append(markerElement, $('div'));\n        relatedInfoContainer.style.marginTop = '8px';\n        var a = dom.append(relatedInfoContainer, $('a'));\n        a.innerText = basename(resource) + \"(\" + startLineNumber + \", \" + startColumn + \"): \";\n        a.style.cursor = 'pointer';\n\n        a.onclick = function (e) {\n          e.stopPropagation();\n          e.preventDefault();\n\n          if (_this._openerService) {\n            _this._openerService.open(resource.with({\n              fragment: startLineNumber + \",\" + startColumn\n            })).catch(onUnexpectedError);\n          }\n        };\n\n        var messageElement_1 = dom.append(relatedInfoContainer, $('span'));\n        messageElement_1.innerText = message_1;\n\n        this_1._editor.applyFontInfo(messageElement_1);\n      };\n\n      var this_1 = this;\n\n      for (var _i = 0, relatedInformation_1 = relatedInformation; _i < relatedInformation_1.length; _i++) {\n        var _b = relatedInformation_1[_i],\n            message_1 = _b.message,\n            resource = _b.resource,\n            startLineNumber = _b.startLineNumber,\n            startColumn = _b.startColumn;\n\n        _loop_1(message_1, resource, startLineNumber, startColumn);\n      }\n    }\n\n    return hoverElement;\n  };\n\n  ModesContentHoverWidget.prototype.renderMarkerStatusbar = function (markerHover) {\n    var _this = this;\n\n    var hoverElement = $('div.hover-row.status-bar');\n    var disposables = [];\n    var actionsElement = dom.append(hoverElement, $('div.actions'));\n    disposables.push(this.renderAction(actionsElement, {\n      label: nls.localize('quick fixes', \"Quick Fix...\"),\n      commandId: QuickFixAction.Id,\n      run: function run(target) {\n        return __awaiter(_this, void 0, void 0, function () {\n          var codeActionsPromise, actions, elementPosition;\n          return __generator(this, function (_a) {\n            switch (_a.label) {\n              case 0:\n                codeActionsPromise = this.getCodeActions(markerHover.marker);\n                disposables.push(toDisposable(function () {\n                  return codeActionsPromise.cancel();\n                }));\n                return [4\n                /*yield*/\n                , codeActionsPromise];\n\n              case 1:\n                actions = _a.sent();\n                elementPosition = dom.getDomNodePagePosition(target);\n\n                this._contextMenuService.showContextMenu({\n                  getAnchor: function getAnchor() {\n                    return {\n                      x: elementPosition.left + 6,\n                      y: elementPosition.top + elementPosition.height + 6\n                    };\n                  },\n                  getActions: function getActions() {\n                    return actions;\n                  }\n                });\n\n                return [2\n                /*return*/\n                ];\n            }\n          });\n        });\n      }\n    }));\n\n    if (markerHover.marker.severity === MarkerSeverity.Error || markerHover.marker.severity === MarkerSeverity.Warning || markerHover.marker.severity === MarkerSeverity.Info) {\n      disposables.push(this.renderAction(actionsElement, {\n        label: nls.localize('peek problem', \"Peek Problem\"),\n        commandId: NextMarkerAction.ID,\n        run: function run() {\n          _this.hide();\n\n          MarkerController.get(_this._editor).show(markerHover.marker);\n\n          _this._editor.focus();\n        }\n      }));\n    }\n\n    this.renderDisposable = combinedDisposable(disposables);\n    return hoverElement;\n  };\n\n  ModesContentHoverWidget.prototype.getCodeActions = function (marker) {\n    var _this = this;\n\n    return createCancelablePromise(function (cancellationToken) {\n      return __awaiter(_this, void 0, void 0, function () {\n        var codeActions;\n\n        var _this = this;\n\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              return [4\n              /*yield*/\n              , getCodeActions(this._editor.getModel(), new Range(marker.startLineNumber, marker.startColumn, marker.endLineNumber, marker.endColumn), {\n                type: 'manual',\n                filter: {\n                  kind: CodeActionKind.QuickFix\n                }\n              }, cancellationToken)];\n\n            case 1:\n              codeActions = _a.sent();\n\n              if (codeActions.actions.length) {\n                return [2\n                /*return*/\n                , codeActions.actions.map(function (codeAction) {\n                  return new Action(codeAction.command ? codeAction.command.id : codeAction.title, codeAction.title, undefined, true, function () {\n                    return applyCodeAction(codeAction, _this._bulkEditService, _this._commandService);\n                  });\n                })];\n              }\n\n              return [2\n              /*return*/\n              , [new Action('', nls.localize('editor.action.quickFix.noneMessage', \"No code actions available\"))]];\n          }\n        });\n      });\n    });\n  };\n\n  ModesContentHoverWidget.prototype.renderAction = function (parent, actionOptions) {\n    var actionContainer = dom.append(parent, $('div.action-container'));\n    var action = dom.append(actionContainer, $('a.action'));\n\n    if (actionOptions.iconClass) {\n      dom.append(action, $(\"span.icon.\" + actionOptions.iconClass));\n    }\n\n    var label = dom.append(action, $('span'));\n    label.textContent = actionOptions.label;\n\n    var keybinding = this._keybindingService.lookupKeybinding(actionOptions.commandId);\n\n    if (keybinding) {\n      label.title = actionOptions.label + \" (\" + keybinding.getLabel() + \")\";\n    }\n\n    return dom.addDisposableListener(actionContainer, dom.EventType.CLICK, function (e) {\n      e.stopPropagation();\n      e.preventDefault();\n      actionOptions.run(actionContainer);\n    });\n  };\n\n  ModesContentHoverWidget.ID = 'editor.contrib.modesContentHoverWidget';\n  ModesContentHoverWidget._DECORATION_OPTIONS = ModelDecorationOptions.register({\n    className: 'hoverHighlight'\n  });\n  return ModesContentHoverWidget;\n}(ContentHoverWidget);\n\nexport { ModesContentHoverWidget };\n\nfunction hoverContentsEquals(first, second) {\n  if (!first && second || first && !second || first.length !== second.length) {\n    return false;\n  }\n\n  for (var i = 0; i < first.length; i++) {\n    var firstElement = first[i];\n    var secondElement = second[i];\n\n    if (firstElement instanceof MarkerHover && secondElement instanceof MarkerHover) {\n      return IMarkerData.makeKey(firstElement.marker) === IMarkerData.makeKey(secondElement.marker);\n    }\n\n    if (firstElement instanceof ColorHover || secondElement instanceof ColorHover) {\n      return false;\n    }\n\n    if (firstElement instanceof MarkerHover || secondElement instanceof MarkerHover) {\n      return false;\n    }\n\n    if (!markedStringsEquals(firstElement.contents, secondElement.contents)) {\n      return false;\n    }\n  }\n\n  return true;\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { $ } from '../../../base/browser/dom.js';\nimport { isEmptyMarkdownString } from '../../../base/common/htmlContent.js';\nimport { dispose } from '../../../base/common/lifecycle.js';\nimport { HoverOperation } from './hoverOperation.js';\nimport { GlyphHoverWidget } from './hoverWidgets.js';\nimport { MarkdownRenderer } from '../markdown/markdownRenderer.js';\nimport { NullOpenerService } from '../../../platform/opener/common/opener.js';\nimport { asArray } from '../../../base/common/arrays.js';\n\nvar MarginComputer =\n/** @class */\nfunction () {\n  function MarginComputer(editor) {\n    this._editor = editor;\n    this._lineNumber = -1;\n  }\n\n  MarginComputer.prototype.setLineNumber = function (lineNumber) {\n    this._lineNumber = lineNumber;\n    this._result = [];\n  };\n\n  MarginComputer.prototype.clearResult = function () {\n    this._result = [];\n  };\n\n  MarginComputer.prototype.computeSync = function () {\n    var toHoverMessage = function toHoverMessage(contents) {\n      return {\n        value: contents\n      };\n    };\n\n    var lineDecorations = this._editor.getLineDecorations(this._lineNumber);\n\n    var result = [];\n\n    if (!lineDecorations) {\n      return result;\n    }\n\n    for (var _i = 0, lineDecorations_1 = lineDecorations; _i < lineDecorations_1.length; _i++) {\n      var d = lineDecorations_1[_i];\n\n      if (!d.options.glyphMarginClassName) {\n        continue;\n      }\n\n      var hoverMessage = d.options.glyphMarginHoverMessage;\n\n      if (!hoverMessage || isEmptyMarkdownString(hoverMessage)) {\n        continue;\n      }\n\n      result.push.apply(result, asArray(hoverMessage).map(toHoverMessage));\n    }\n\n    return result;\n  };\n\n  MarginComputer.prototype.onResult = function (result, isFromSynchronousComputation) {\n    this._result = this._result.concat(result);\n  };\n\n  MarginComputer.prototype.getResult = function () {\n    return this._result;\n  };\n\n  MarginComputer.prototype.getResultWithLoadingMessage = function () {\n    return this.getResult();\n  };\n\n  return MarginComputer;\n}();\n\nvar ModesGlyphHoverWidget =\n/** @class */\nfunction (_super) {\n  __extends(ModesGlyphHoverWidget, _super);\n\n  function ModesGlyphHoverWidget(editor, modeService, openerService) {\n    if (openerService === void 0) {\n      openerService = NullOpenerService;\n    }\n\n    var _this = _super.call(this, ModesGlyphHoverWidget.ID, editor) || this;\n\n    _this._lastLineNumber = -1;\n    _this._markdownRenderer = new MarkdownRenderer(_this._editor, modeService, openerService);\n    _this._computer = new MarginComputer(_this._editor);\n    _this._hoverOperation = new HoverOperation(_this._computer, function (result) {\n      return _this._withResult(result);\n    }, undefined, function (result) {\n      return _this._withResult(result);\n    }, 300);\n    return _this;\n  }\n\n  ModesGlyphHoverWidget.prototype.dispose = function () {\n    this._renderDisposeables = dispose(this._renderDisposeables);\n\n    this._hoverOperation.cancel();\n\n    _super.prototype.dispose.call(this);\n  };\n\n  ModesGlyphHoverWidget.prototype.onModelDecorationsChanged = function () {\n    if (this.isVisible) {\n      // The decorations have changed and the hover is visible,\n      // we need to recompute the displayed text\n      this._hoverOperation.cancel();\n\n      this._computer.clearResult();\n\n      this._hoverOperation.start(0\n      /* Delayed */\n      );\n    }\n  };\n\n  ModesGlyphHoverWidget.prototype.startShowingAt = function (lineNumber) {\n    if (this._lastLineNumber === lineNumber) {\n      // We have to show the widget at the exact same line number as before, so no work is needed\n      return;\n    }\n\n    this._hoverOperation.cancel();\n\n    this.hide();\n    this._lastLineNumber = lineNumber;\n\n    this._computer.setLineNumber(lineNumber);\n\n    this._hoverOperation.start(0\n    /* Delayed */\n    );\n  };\n\n  ModesGlyphHoverWidget.prototype.hide = function () {\n    this._lastLineNumber = -1;\n\n    this._hoverOperation.cancel();\n\n    _super.prototype.hide.call(this);\n  };\n\n  ModesGlyphHoverWidget.prototype._withResult = function (result) {\n    this._messages = result;\n\n    if (this._messages.length > 0) {\n      this._renderMessages(this._lastLineNumber, this._messages);\n    } else {\n      this.hide();\n    }\n  };\n\n  ModesGlyphHoverWidget.prototype._renderMessages = function (lineNumber, messages) {\n    var _this = this;\n\n    dispose(this._renderDisposeables);\n    this._renderDisposeables = [];\n    var fragment = document.createDocumentFragment();\n    messages.forEach(function (msg) {\n      var renderedContents = _this._markdownRenderer.render(msg.value);\n\n      _this._renderDisposeables.push(renderedContents);\n\n      fragment.appendChild($('div.hover-row', undefined, renderedContents.element));\n    });\n    this.updateContents(fragment);\n    this.showAt(lineNumber);\n  };\n\n  ModesGlyphHoverWidget.ID = 'editor.contrib.modesGlyphHoverWidget';\n  return ModesGlyphHoverWidget;\n}(GlyphHoverWidget);\n\nexport { ModesGlyphHoverWidget };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport './hover.css';\nimport * as nls from '../../../nls.js';\nimport { KeyChord } from '../../../base/common/keyCodes.js';\nimport { dispose } from '../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../browser/editorExtensions.js';\nimport { Range } from '../../common/core/range.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport { IModeService } from '../../common/services/modeService.js';\nimport { ModesContentHoverWidget } from './modesContentHover.js';\nimport { ModesGlyphHoverWidget } from './modesGlyphHover.js';\nimport { IOpenerService } from '../../../platform/opener/common/opener.js';\nimport { editorHoverBackground, editorHoverBorder, editorHoverHighlight, textCodeBlockBackground, textLinkForeground, editorHoverStatusBarBackground } from '../../../platform/theme/common/colorRegistry.js';\nimport { IThemeService, registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\nimport { IMarkerDecorationsService } from '../../common/services/markersDecorationService.js';\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\nimport { IContextMenuService } from '../../../platform/contextview/browser/contextView.js';\nimport { IBulkEditService } from '../../browser/services/bulkEditService.js';\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\n\nvar ModesHoverController =\n/** @class */\nfunction () {\n  function ModesHoverController(_editor, _openerService, _modeService, _markerDecorationsService, _keybindingService, _contextMenuService, _bulkEditService, _commandService, _themeService) {\n    var _this = this;\n\n    this._editor = _editor;\n    this._openerService = _openerService;\n    this._modeService = _modeService;\n    this._markerDecorationsService = _markerDecorationsService;\n    this._keybindingService = _keybindingService;\n    this._contextMenuService = _contextMenuService;\n    this._bulkEditService = _bulkEditService;\n    this._commandService = _commandService;\n    this._themeService = _themeService;\n    this._toUnhook = [];\n    this._isMouseDown = false;\n    this._hoverClicked = false;\n\n    this._hookEvents();\n\n    this._didChangeConfigurationHandler = this._editor.onDidChangeConfiguration(function (e) {\n      if (e.contribInfo) {\n        _this._hideWidgets();\n\n        _this._unhookEvents();\n\n        _this._hookEvents();\n      }\n    });\n  }\n\n  Object.defineProperty(ModesHoverController.prototype, \"contentWidget\", {\n    get: function get() {\n      if (!this._contentWidget) {\n        this._createHoverWidget();\n      }\n\n      return this._contentWidget;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ModesHoverController.prototype, \"glyphWidget\", {\n    get: function get() {\n      if (!this._glyphWidget) {\n        this._createHoverWidget();\n      }\n\n      return this._glyphWidget;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ModesHoverController.get = function (editor) {\n    return editor.getContribution(ModesHoverController.ID);\n  };\n\n  ModesHoverController.prototype._hookEvents = function () {\n    var _this = this;\n\n    var hideWidgetsEventHandler = function hideWidgetsEventHandler() {\n      return _this._hideWidgets();\n    };\n\n    var hoverOpts = this._editor.getConfiguration().contribInfo.hover;\n\n    this._isHoverEnabled = hoverOpts.enabled;\n    this._isHoverSticky = hoverOpts.sticky;\n\n    if (this._isHoverEnabled) {\n      this._toUnhook.push(this._editor.onMouseDown(function (e) {\n        return _this._onEditorMouseDown(e);\n      }));\n\n      this._toUnhook.push(this._editor.onMouseUp(function (e) {\n        return _this._onEditorMouseUp(e);\n      }));\n\n      this._toUnhook.push(this._editor.onMouseMove(function (e) {\n        return _this._onEditorMouseMove(e);\n      }));\n\n      this._toUnhook.push(this._editor.onKeyDown(function (e) {\n        return _this._onKeyDown(e);\n      }));\n\n      this._toUnhook.push(this._editor.onDidChangeModelDecorations(function () {\n        return _this._onModelDecorationsChanged();\n      }));\n    } else {\n      this._toUnhook.push(this._editor.onMouseMove(hideWidgetsEventHandler));\n    }\n\n    this._toUnhook.push(this._editor.onMouseLeave(hideWidgetsEventHandler));\n\n    this._toUnhook.push(this._editor.onDidChangeModel(hideWidgetsEventHandler));\n\n    this._toUnhook.push(this._editor.onDidScrollChange(function (e) {\n      return _this._onEditorScrollChanged(e);\n    }));\n  };\n\n  ModesHoverController.prototype._unhookEvents = function () {\n    this._toUnhook = dispose(this._toUnhook);\n  };\n\n  ModesHoverController.prototype._onModelDecorationsChanged = function () {\n    this.contentWidget.onModelDecorationsChanged();\n    this.glyphWidget.onModelDecorationsChanged();\n  };\n\n  ModesHoverController.prototype._onEditorScrollChanged = function (e) {\n    if (e.scrollTopChanged || e.scrollLeftChanged) {\n      this._hideWidgets();\n    }\n  };\n\n  ModesHoverController.prototype._onEditorMouseDown = function (mouseEvent) {\n    this._isMouseDown = true;\n    var targetType = mouseEvent.target.type;\n\n    if (targetType === 9\n    /* CONTENT_WIDGET */\n    && mouseEvent.target.detail === ModesContentHoverWidget.ID) {\n      this._hoverClicked = true; // mouse down on top of content hover widget\n\n      return;\n    }\n\n    if (targetType === 12\n    /* OVERLAY_WIDGET */\n    && mouseEvent.target.detail === ModesGlyphHoverWidget.ID) {\n      // mouse down on top of overlay hover widget\n      return;\n    }\n\n    if (targetType !== 12\n    /* OVERLAY_WIDGET */\n    && mouseEvent.target.detail !== ModesGlyphHoverWidget.ID) {\n      this._hoverClicked = false;\n    }\n\n    this._hideWidgets();\n  };\n\n  ModesHoverController.prototype._onEditorMouseUp = function (mouseEvent) {\n    this._isMouseDown = false;\n  };\n\n  ModesHoverController.prototype._onEditorMouseMove = function (mouseEvent) {\n    // const this._editor.getConfiguration().contribInfo.hover.sticky;\n    var targetType = mouseEvent.target.type;\n\n    if (this._isMouseDown && this._hoverClicked && this.contentWidget.isColorPickerVisible()) {\n      return;\n    }\n\n    if (this._isHoverSticky && targetType === 9\n    /* CONTENT_WIDGET */\n    && mouseEvent.target.detail === ModesContentHoverWidget.ID) {\n      // mouse moved on top of content hover widget\n      return;\n    }\n\n    if (this._isHoverSticky && targetType === 12\n    /* OVERLAY_WIDGET */\n    && mouseEvent.target.detail === ModesGlyphHoverWidget.ID) {\n      // mouse moved on top of overlay hover widget\n      return;\n    }\n\n    if (targetType === 7\n    /* CONTENT_EMPTY */\n    ) {\n        var epsilon = this._editor.getConfiguration().fontInfo.typicalHalfwidthCharacterWidth / 2;\n        var data = mouseEvent.target.detail;\n\n        if (data && !data.isAfterLines && typeof data.horizontalDistanceToText === 'number' && data.horizontalDistanceToText < epsilon) {\n          // Let hover kick in even when the mouse is technically in the empty area after a line, given the distance is small enough\n          targetType = 6\n          /* CONTENT_TEXT */\n          ;\n        }\n      }\n\n    if (targetType === 6\n    /* CONTENT_TEXT */\n    ) {\n        this.glyphWidget.hide();\n\n        if (this._isHoverEnabled && mouseEvent.target.range) {\n          this.contentWidget.startShowingAt(mouseEvent.target.range, 0\n          /* Delayed */\n          , false);\n        }\n      } else if (targetType === 2\n    /* GUTTER_GLYPH_MARGIN */\n    ) {\n        this.contentWidget.hide();\n\n        if (this._isHoverEnabled && mouseEvent.target.position) {\n          this.glyphWidget.startShowingAt(mouseEvent.target.position.lineNumber);\n        }\n      } else {\n      this._hideWidgets();\n    }\n  };\n\n  ModesHoverController.prototype._onKeyDown = function (e) {\n    if (e.keyCode !== 5\n    /* Ctrl */\n    && e.keyCode !== 6\n    /* Alt */\n    && e.keyCode !== 57\n    /* Meta */\n    && e.keyCode !== 4\n    /* Shift */\n    ) {\n        // Do not hide hover when a modifier key is pressed\n        this._hideWidgets();\n      }\n  };\n\n  ModesHoverController.prototype._hideWidgets = function () {\n    if (!this._contentWidget || this._isMouseDown && this._hoverClicked && this._contentWidget.isColorPickerVisible()) {\n      return;\n    }\n\n    this._glyphWidget.hide();\n\n    this._contentWidget.hide();\n  };\n\n  ModesHoverController.prototype._createHoverWidget = function () {\n    this._contentWidget = new ModesContentHoverWidget(this._editor, this._markerDecorationsService, this._themeService, this._keybindingService, this._contextMenuService, this._bulkEditService, this._commandService, this._modeService, this._openerService);\n    this._glyphWidget = new ModesGlyphHoverWidget(this._editor, this._modeService, this._openerService);\n  };\n\n  ModesHoverController.prototype.showContentHover = function (range, mode, focus) {\n    this.contentWidget.startShowingAt(range, mode, focus);\n  };\n\n  ModesHoverController.prototype.getId = function () {\n    return ModesHoverController.ID;\n  };\n\n  ModesHoverController.prototype.dispose = function () {\n    this._unhookEvents();\n\n    this._didChangeConfigurationHandler.dispose();\n\n    if (this._glyphWidget) {\n      this._glyphWidget.dispose();\n    }\n\n    if (this._contentWidget) {\n      this._contentWidget.dispose();\n    }\n  };\n\n  ModesHoverController.ID = 'editor.contrib.hover';\n  ModesHoverController = __decorate([__param(1, IOpenerService), __param(2, IModeService), __param(3, IMarkerDecorationsService), __param(4, IKeybindingService), __param(5, IContextMenuService), __param(6, IBulkEditService), __param(7, ICommandService), __param(8, IThemeService)], ModesHoverController);\n  return ModesHoverController;\n}();\n\nexport { ModesHoverController };\n\nvar ShowHoverAction =\n/** @class */\nfunction (_super) {\n  __extends(ShowHoverAction, _super);\n\n  function ShowHoverAction() {\n    return _super.call(this, {\n      id: 'editor.action.showHover',\n      label: nls.localize({\n        key: 'showHover',\n        comment: ['Label for action that will trigger the showing of a hover in the editor.', 'This allows for users to show the hover without using the mouse.']\n      }, \"Show Hover\"),\n      alias: 'Show Hover',\n      precondition: null,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: KeyChord(2048\n        /* CtrlCmd */\n        | 41\n        /* KEY_K */\n        , 2048\n        /* CtrlCmd */\n        | 39\n        /* KEY_I */\n        ),\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  ShowHoverAction.prototype.run = function (accessor, editor) {\n    if (!editor.hasModel()) {\n      return;\n    }\n\n    var controller = ModesHoverController.get(editor);\n\n    if (!controller) {\n      return;\n    }\n\n    var position = editor.getPosition();\n    var range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n    var focus = editor.getConfiguration().accessibilitySupport === 2\n    /* Enabled */\n    ;\n    controller.showContentHover(range, 1\n    /* Immediate */\n    , focus);\n  };\n\n  return ShowHoverAction;\n}(EditorAction);\n\nregisterEditorContribution(ModesHoverController);\nregisterEditorAction(ShowHoverAction); // theming\n\nregisterThemingParticipant(function (theme, collector) {\n  var editorHoverHighlightColor = theme.getColor(editorHoverHighlight);\n\n  if (editorHoverHighlightColor) {\n    collector.addRule(\".monaco-editor .hoverHighlight { background-color: \" + editorHoverHighlightColor + \"; }\");\n  }\n\n  var hoverBackground = theme.getColor(editorHoverBackground);\n\n  if (hoverBackground) {\n    collector.addRule(\".monaco-editor .monaco-editor-hover { background-color: \" + hoverBackground + \"; }\");\n  }\n\n  var hoverBorder = theme.getColor(editorHoverBorder);\n\n  if (hoverBorder) {\n    collector.addRule(\".monaco-editor .monaco-editor-hover { border: 1px solid \" + hoverBorder + \"; }\");\n    collector.addRule(\".monaco-editor .monaco-editor-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid \" + hoverBorder.transparent(0.5) + \"; }\");\n    collector.addRule(\".monaco-editor .monaco-editor-hover hr { border-top: 1px solid \" + hoverBorder.transparent(0.5) + \"; }\");\n    collector.addRule(\".monaco-editor .monaco-editor-hover hr { border-bottom: 0px solid \" + hoverBorder.transparent(0.5) + \"; }\");\n  }\n\n  var link = theme.getColor(textLinkForeground);\n\n  if (link) {\n    collector.addRule(\".monaco-editor .monaco-editor-hover a { color: \" + link + \"; }\");\n  }\n\n  var actionsBackground = theme.getColor(editorHoverStatusBarBackground);\n\n  if (actionsBackground) {\n    collector.addRule(\".monaco-editor .monaco-editor-hover .hover-row .actions { background-color: \" + actionsBackground + \"; }\");\n  }\n\n  var codeBackground = theme.getColor(textCodeBlockBackground);\n\n  if (codeBackground) {\n    collector.addRule(\".monaco-editor .monaco-editor-hover code { background-color: \" + codeBackground + \"; }\");\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Selection } from '../../common/core/selection.js';\n\nvar InPlaceReplaceCommand =\n/** @class */\nfunction () {\n  function InPlaceReplaceCommand(editRange, originalSelection, text) {\n    this._editRange = editRange;\n    this._originalSelection = originalSelection;\n    this._text = text;\n  }\n\n  InPlaceReplaceCommand.prototype.getEditOperations = function (model, builder) {\n    builder.addTrackedEditOperation(this._editRange, this._text);\n  };\n\n  InPlaceReplaceCommand.prototype.computeCursorState = function (model, helper) {\n    var inverseEditOperations = helper.getInverseEditOperations();\n    var srcRange = inverseEditOperations[0].range;\n\n    if (!this._originalSelection.isEmpty()) {\n      // Preserve selection and extends to typed text\n      return new Selection(srcRange.endLineNumber, srcRange.endColumn - this._text.length, srcRange.endLineNumber, srcRange.endColumn);\n    }\n\n    return new Selection(srcRange.endLineNumber, Math.min(this._originalSelection.positionColumn, srcRange.endColumn), srcRange.endLineNumber, Math.min(this._originalSelection.positionColumn, srcRange.endColumn));\n  };\n\n  return InPlaceReplaceCommand;\n}();\n\nexport { InPlaceReplaceCommand };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport * as nls from '../../../nls.js';\nimport { Range } from '../../common/core/range.js';\nimport { Selection } from '../../common/core/selection.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport { registerEditorAction, EditorAction, registerEditorContribution } from '../../browser/editorExtensions.js';\nimport { IEditorWorkerService } from '../../common/services/editorWorkerService.js';\nimport { InPlaceReplaceCommand } from './inPlaceReplaceCommand.js';\nimport { EditorState } from '../../browser/core/editorState.js';\nimport { registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\nimport { editorBracketMatchBorder } from '../../common/view/editorColorRegistry.js';\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\nimport { createCancelablePromise, timeout } from '../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\n\nvar InPlaceReplaceController =\n/** @class */\nfunction () {\n  function InPlaceReplaceController(editor, editorWorkerService) {\n    this.decorationIds = [];\n    this.editor = editor;\n    this.editorWorkerService = editorWorkerService;\n  }\n\n  InPlaceReplaceController.get = function (editor) {\n    return editor.getContribution(InPlaceReplaceController.ID);\n  };\n\n  InPlaceReplaceController.prototype.dispose = function () {};\n\n  InPlaceReplaceController.prototype.getId = function () {\n    return InPlaceReplaceController.ID;\n  };\n\n  InPlaceReplaceController.prototype.run = function (source, up) {\n    var _this = this; // cancel any pending request\n\n\n    if (this.currentRequest) {\n      this.currentRequest.cancel();\n    }\n\n    var editorSelection = this.editor.getSelection();\n    var model = this.editor.getModel();\n\n    if (!model || !editorSelection) {\n      return undefined;\n    }\n\n    var selection = editorSelection;\n\n    if (selection.startLineNumber !== selection.endLineNumber) {\n      // Can't accept multiline selection\n      return undefined;\n    }\n\n    var state = new EditorState(this.editor, 1\n    /* Value */\n    | 4\n    /* Position */\n    );\n    var modelURI = model.uri;\n\n    if (!this.editorWorkerService.canNavigateValueSet(modelURI)) {\n      return Promise.resolve(undefined);\n    }\n\n    this.currentRequest = createCancelablePromise(function (token) {\n      return _this.editorWorkerService.navigateValueSet(modelURI, selection, up);\n    });\n    return this.currentRequest.then(function (result) {\n      if (!result || !result.range || !result.value) {\n        // No proper result\n        return;\n      }\n\n      if (!state.validate(_this.editor)) {\n        // state has changed\n        return;\n      } // Selection\n\n\n      var editRange = Range.lift(result.range);\n      var highlightRange = result.range;\n      var diff = result.value.length - (selection.endColumn - selection.startColumn); // highlight\n\n      highlightRange = {\n        startLineNumber: highlightRange.startLineNumber,\n        startColumn: highlightRange.startColumn,\n        endLineNumber: highlightRange.endLineNumber,\n        endColumn: highlightRange.startColumn + result.value.length\n      };\n\n      if (diff > 1) {\n        selection = new Selection(selection.startLineNumber, selection.startColumn, selection.endLineNumber, selection.endColumn + diff - 1);\n      } // Insert new text\n\n\n      var command = new InPlaceReplaceCommand(editRange, selection, result.value);\n\n      _this.editor.pushUndoStop();\n\n      _this.editor.executeCommand(source, command);\n\n      _this.editor.pushUndoStop(); // add decoration\n\n\n      _this.decorationIds = _this.editor.deltaDecorations(_this.decorationIds, [{\n        range: highlightRange,\n        options: InPlaceReplaceController.DECORATION\n      }]); // remove decoration after delay\n\n      if (_this.decorationRemover) {\n        _this.decorationRemover.cancel();\n      }\n\n      _this.decorationRemover = timeout(350);\n\n      _this.decorationRemover.then(function () {\n        return _this.decorationIds = _this.editor.deltaDecorations(_this.decorationIds, []);\n      }).catch(onUnexpectedError);\n    }).catch(onUnexpectedError);\n  };\n\n  InPlaceReplaceController.ID = 'editor.contrib.inPlaceReplaceController';\n  InPlaceReplaceController.DECORATION = ModelDecorationOptions.register({\n    className: 'valueSetReplacement'\n  });\n  InPlaceReplaceController = __decorate([__param(1, IEditorWorkerService)], InPlaceReplaceController);\n  return InPlaceReplaceController;\n}();\n\nvar InPlaceReplaceUp =\n/** @class */\nfunction (_super) {\n  __extends(InPlaceReplaceUp, _super);\n\n  function InPlaceReplaceUp() {\n    return _super.call(this, {\n      id: 'editor.action.inPlaceReplace.up',\n      label: nls.localize('InPlaceReplaceAction.previous.label', \"Replace with Previous Value\"),\n      alias: 'Replace with Previous Value',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048\n        /* CtrlCmd */\n        | 1024\n        /* Shift */\n        | 82\n        /* US_COMMA */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  InPlaceReplaceUp.prototype.run = function (accessor, editor) {\n    var controller = InPlaceReplaceController.get(editor);\n\n    if (!controller) {\n      return Promise.resolve(undefined);\n    }\n\n    return controller.run(this.id, true);\n  };\n\n  return InPlaceReplaceUp;\n}(EditorAction);\n\nvar InPlaceReplaceDown =\n/** @class */\nfunction (_super) {\n  __extends(InPlaceReplaceDown, _super);\n\n  function InPlaceReplaceDown() {\n    return _super.call(this, {\n      id: 'editor.action.inPlaceReplace.down',\n      label: nls.localize('InPlaceReplaceAction.next.label', \"Replace with Next Value\"),\n      alias: 'Replace with Next Value',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048\n        /* CtrlCmd */\n        | 1024\n        /* Shift */\n        | 84\n        /* US_DOT */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  InPlaceReplaceDown.prototype.run = function (accessor, editor) {\n    var controller = InPlaceReplaceController.get(editor);\n\n    if (!controller) {\n      return Promise.resolve(undefined);\n    }\n\n    return controller.run(this.id, false);\n  };\n\n  return InPlaceReplaceDown;\n}(EditorAction);\n\nregisterEditorContribution(InPlaceReplaceController);\nregisterEditorAction(InPlaceReplaceUp);\nregisterEditorAction(InPlaceReplaceDown);\nregisterThemingParticipant(function (theme, collector) {\n  var border = theme.getColor(editorBracketMatchBorder);\n\n  if (border) {\n    collector.addRule(\".monaco-editor.vs .valueSetReplacement { outline: solid 2px \" + border + \"; }\");\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as strings from '../../../base/common/strings.js';\nimport { EditOperation } from '../core/editOperation.js';\nimport { Range } from '../core/range.js';\n\nvar TrimTrailingWhitespaceCommand =\n/** @class */\nfunction () {\n  function TrimTrailingWhitespaceCommand(selection, cursors) {\n    this.selection = selection;\n    this.cursors = cursors;\n  }\n\n  TrimTrailingWhitespaceCommand.prototype.getEditOperations = function (model, builder) {\n    var ops = trimTrailingWhitespace(model, this.cursors);\n\n    for (var i = 0, len = ops.length; i < len; i++) {\n      var op = ops[i];\n      builder.addEditOperation(op.range, op.text);\n    }\n\n    this.selectionId = builder.trackSelection(this.selection);\n  };\n\n  TrimTrailingWhitespaceCommand.prototype.computeCursorState = function (model, helper) {\n    return helper.getTrackedSelection(this.selectionId);\n  };\n\n  return TrimTrailingWhitespaceCommand;\n}();\n\nexport { TrimTrailingWhitespaceCommand };\n/**\n * Generate commands for trimming trailing whitespace on a model and ignore lines on which cursors are sitting.\n */\n\nexport function trimTrailingWhitespace(model, cursors) {\n  // Sort cursors ascending\n  cursors.sort(function (a, b) {\n    if (a.lineNumber === b.lineNumber) {\n      return a.column - b.column;\n    }\n\n    return a.lineNumber - b.lineNumber;\n  }); // Reduce multiple cursors on the same line and only keep the last one on the line\n\n  for (var i = cursors.length - 2; i >= 0; i--) {\n    if (cursors[i].lineNumber === cursors[i + 1].lineNumber) {\n      // Remove cursor at `i`\n      cursors.splice(i, 1);\n    }\n  }\n\n  var r = [];\n  var rLen = 0;\n  var cursorIndex = 0;\n  var cursorLen = cursors.length;\n\n  for (var lineNumber = 1, lineCount = model.getLineCount(); lineNumber <= lineCount; lineNumber++) {\n    var lineContent = model.getLineContent(lineNumber);\n    var maxLineColumn = lineContent.length + 1;\n    var minEditColumn = 0;\n\n    if (cursorIndex < cursorLen && cursors[cursorIndex].lineNumber === lineNumber) {\n      minEditColumn = cursors[cursorIndex].column;\n      cursorIndex++;\n\n      if (minEditColumn === maxLineColumn) {\n        // The cursor is at the end of the line => no edits for sure on this line\n        continue;\n      }\n    }\n\n    if (lineContent.length === 0) {\n      continue;\n    }\n\n    var lastNonWhitespaceIndex = strings.lastNonWhitespaceIndex(lineContent);\n    var fromColumn = 0;\n\n    if (lastNonWhitespaceIndex === -1) {\n      // Entire line is whitespace\n      fromColumn = 1;\n    } else if (lastNonWhitespaceIndex !== lineContent.length - 1) {\n      // There is trailing whitespace\n      fromColumn = lastNonWhitespaceIndex + 2;\n    } else {\n      // There is no trailing whitespace\n      continue;\n    }\n\n    fromColumn = Math.max(minEditColumn, fromColumn);\n    r[rLen++] = EditOperation.delete(new Range(lineNumber, fromColumn, lineNumber, maxLineColumn));\n  }\n\n  return r;\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../common/core/range.js';\nimport { Selection } from '../../common/core/selection.js';\n\nvar CopyLinesCommand =\n/** @class */\nfunction () {\n  function CopyLinesCommand(selection, isCopyingDown) {\n    this._selection = selection;\n    this._isCopyingDown = isCopyingDown;\n  }\n\n  CopyLinesCommand.prototype.getEditOperations = function (model, builder) {\n    var s = this._selection;\n    this._startLineNumberDelta = 0;\n    this._endLineNumberDelta = 0;\n\n    if (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\n      this._endLineNumberDelta = 1;\n      s = s.setEndPosition(s.endLineNumber - 1, model.getLineMaxColumn(s.endLineNumber - 1));\n    }\n\n    var sourceLines = [];\n\n    for (var i = s.startLineNumber; i <= s.endLineNumber; i++) {\n      sourceLines.push(model.getLineContent(i));\n    }\n\n    var sourceText = sourceLines.join('\\n');\n\n    if (sourceText === '') {\n      // Duplicating empty line\n      if (this._isCopyingDown) {\n        this._startLineNumberDelta++;\n        this._endLineNumberDelta++;\n      }\n    }\n\n    if (!this._isCopyingDown) {\n      builder.addEditOperation(new Range(s.endLineNumber, model.getLineMaxColumn(s.endLineNumber), s.endLineNumber, model.getLineMaxColumn(s.endLineNumber)), '\\n' + sourceText);\n    } else {\n      builder.addEditOperation(new Range(s.startLineNumber, 1, s.startLineNumber, 1), sourceText + '\\n');\n    }\n\n    this._selectionId = builder.trackSelection(s);\n    this._selectionDirection = this._selection.getDirection();\n  };\n\n  CopyLinesCommand.prototype.computeCursorState = function (model, helper) {\n    var result = helper.getTrackedSelection(this._selectionId);\n\n    if (this._startLineNumberDelta !== 0 || this._endLineNumberDelta !== 0) {\n      var startLineNumber = result.startLineNumber;\n      var startColumn = result.startColumn;\n      var endLineNumber = result.endLineNumber;\n      var endColumn = result.endColumn;\n\n      if (this._startLineNumberDelta !== 0) {\n        startLineNumber = startLineNumber + this._startLineNumberDelta;\n        startColumn = 1;\n      }\n\n      if (this._endLineNumberDelta !== 0) {\n        endLineNumber = endLineNumber + this._endLineNumberDelta;\n        endColumn = 1;\n      }\n\n      result = Selection.createWithDirection(startLineNumber, startColumn, endLineNumber, endColumn, this._selectionDirection);\n    }\n\n    return result;\n  };\n\n  return CopyLinesCommand;\n}();\n\nexport { CopyLinesCommand };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport function getSpaceCnt(str, tabSize) {\n  var spacesCnt = 0;\n\n  for (var i = 0; i < str.length; i++) {\n    if (str.charAt(i) === '\\t') {\n      spacesCnt += tabSize;\n    } else {\n      spacesCnt++;\n    }\n  }\n\n  return spacesCnt;\n}\nexport function generateIndent(spacesCnt, tabSize, insertSpaces) {\n  spacesCnt = spacesCnt < 0 ? 0 : spacesCnt;\n  var result = '';\n\n  if (!insertSpaces) {\n    var tabsCnt = Math.floor(spacesCnt / tabSize);\n    spacesCnt = spacesCnt % tabSize;\n\n    for (var i = 0; i < tabsCnt; i++) {\n      result += '\\t';\n    }\n  }\n\n  for (var i = 0; i < spacesCnt; i++) {\n    result += ' ';\n  }\n\n  return result;\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as strings from '../../../base/common/strings.js';\nimport { ShiftCommand } from '../../common/commands/shiftCommand.js';\nimport { Range } from '../../common/core/range.js';\nimport { Selection } from '../../common/core/selection.js';\nimport { IndentAction } from '../../common/modes/languageConfiguration.js';\nimport { LanguageConfigurationRegistry } from '../../common/modes/languageConfigurationRegistry.js';\nimport * as indentUtils from '../indentation/indentUtils.js';\n\nvar MoveLinesCommand =\n/** @class */\nfunction () {\n  function MoveLinesCommand(selection, isMovingDown, autoIndent) {\n    this._selection = selection;\n    this._isMovingDown = isMovingDown;\n    this._autoIndent = autoIndent;\n    this._moveEndLineSelectionShrink = false;\n  }\n\n  MoveLinesCommand.prototype.getEditOperations = function (model, builder) {\n    var modelLineCount = model.getLineCount();\n\n    if (this._isMovingDown && this._selection.endLineNumber === modelLineCount) {\n      return;\n    }\n\n    if (!this._isMovingDown && this._selection.startLineNumber === 1) {\n      return;\n    }\n\n    this._moveEndPositionDown = false;\n    var s = this._selection;\n\n    if (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\n      this._moveEndPositionDown = true;\n      s = s.setEndPosition(s.endLineNumber - 1, model.getLineMaxColumn(s.endLineNumber - 1));\n    }\n\n    var _a = model.getOptions(),\n        tabSize = _a.tabSize,\n        indentSize = _a.indentSize,\n        insertSpaces = _a.insertSpaces;\n\n    var indentConverter = this.buildIndentConverter(tabSize, indentSize, insertSpaces);\n    var virtualModel = {\n      getLineTokens: function getLineTokens(lineNumber) {\n        return model.getLineTokens(lineNumber);\n      },\n      getLanguageIdentifier: function getLanguageIdentifier() {\n        return model.getLanguageIdentifier();\n      },\n      getLanguageIdAtPosition: function getLanguageIdAtPosition(lineNumber, column) {\n        return model.getLanguageIdAtPosition(lineNumber, column);\n      },\n      getLineContent: null\n    };\n\n    if (s.startLineNumber === s.endLineNumber && model.getLineMaxColumn(s.startLineNumber) === 1) {\n      // Current line is empty\n      var lineNumber = s.startLineNumber;\n      var otherLineNumber = this._isMovingDown ? lineNumber + 1 : lineNumber - 1;\n\n      if (model.getLineMaxColumn(otherLineNumber) === 1) {\n        // Other line number is empty too, so no editing is needed\n        // Add a no-op to force running by the model\n        builder.addEditOperation(new Range(1, 1, 1, 1), null);\n      } else {\n        // Type content from other line number on line number\n        builder.addEditOperation(new Range(lineNumber, 1, lineNumber, 1), model.getLineContent(otherLineNumber)); // Remove content from other line number\n\n        builder.addEditOperation(new Range(otherLineNumber, 1, otherLineNumber, model.getLineMaxColumn(otherLineNumber)), null);\n      } // Track selection at the other line number\n\n\n      s = new Selection(otherLineNumber, 1, otherLineNumber, 1);\n    } else {\n      var movingLineNumber_1;\n      var movingLineText = void 0;\n\n      if (this._isMovingDown) {\n        movingLineNumber_1 = s.endLineNumber + 1;\n        movingLineText = model.getLineContent(movingLineNumber_1); // Delete line that needs to be moved\n\n        builder.addEditOperation(new Range(movingLineNumber_1 - 1, model.getLineMaxColumn(movingLineNumber_1 - 1), movingLineNumber_1, model.getLineMaxColumn(movingLineNumber_1)), null);\n        var insertingText_1 = movingLineText;\n\n        if (this.shouldAutoIndent(model, s)) {\n          var movingLineMatchResult = this.matchEnterRule(model, indentConverter, tabSize, movingLineNumber_1, s.startLineNumber - 1); // if s.startLineNumber - 1 matches onEnter rule, we still honor that.\n\n          if (movingLineMatchResult !== null) {\n            var oldIndentation = strings.getLeadingWhitespace(model.getLineContent(movingLineNumber_1));\n            var newSpaceCnt = movingLineMatchResult + indentUtils.getSpaceCnt(oldIndentation, tabSize);\n            var newIndentation = indentUtils.generateIndent(newSpaceCnt, tabSize, insertSpaces);\n            insertingText_1 = newIndentation + this.trimLeft(movingLineText);\n          } else {\n            // no enter rule matches, let's check indentatin rules then.\n            virtualModel.getLineContent = function (lineNumber) {\n              if (lineNumber === s.startLineNumber) {\n                return model.getLineContent(movingLineNumber_1);\n              } else {\n                return model.getLineContent(lineNumber);\n              }\n            };\n\n            var indentOfMovingLine = LanguageConfigurationRegistry.getGoodIndentForLine(virtualModel, model.getLanguageIdAtPosition(movingLineNumber_1, 1), s.startLineNumber, indentConverter);\n\n            if (indentOfMovingLine !== null) {\n              var oldIndentation = strings.getLeadingWhitespace(model.getLineContent(movingLineNumber_1));\n              var newSpaceCnt = indentUtils.getSpaceCnt(indentOfMovingLine, tabSize);\n              var oldSpaceCnt = indentUtils.getSpaceCnt(oldIndentation, tabSize);\n\n              if (newSpaceCnt !== oldSpaceCnt) {\n                var newIndentation = indentUtils.generateIndent(newSpaceCnt, tabSize, insertSpaces);\n                insertingText_1 = newIndentation + this.trimLeft(movingLineText);\n              }\n            }\n          } // add edit operations for moving line first to make sure it's executed after we make indentation change\n          // to s.startLineNumber\n\n\n          builder.addEditOperation(new Range(s.startLineNumber, 1, s.startLineNumber, 1), insertingText_1 + '\\n');\n          var ret = this.matchEnterRule(model, indentConverter, tabSize, s.startLineNumber, s.startLineNumber, insertingText_1); // check if the line being moved before matches onEnter rules, if so let's adjust the indentation by onEnter rules.\n\n          if (ret !== null) {\n            if (ret !== 0) {\n              this.getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, ret);\n            }\n          } else {\n            // it doesn't match onEnter rules, let's check indentation rules then.\n            virtualModel.getLineContent = function (lineNumber) {\n              if (lineNumber === s.startLineNumber) {\n                return insertingText_1;\n              } else if (lineNumber >= s.startLineNumber + 1 && lineNumber <= s.endLineNumber + 1) {\n                return model.getLineContent(lineNumber - 1);\n              } else {\n                return model.getLineContent(lineNumber);\n              }\n            };\n\n            var newIndentatOfMovingBlock = LanguageConfigurationRegistry.getGoodIndentForLine(virtualModel, model.getLanguageIdAtPosition(movingLineNumber_1, 1), s.startLineNumber + 1, indentConverter);\n\n            if (newIndentatOfMovingBlock !== null) {\n              var oldIndentation = strings.getLeadingWhitespace(model.getLineContent(s.startLineNumber));\n              var newSpaceCnt = indentUtils.getSpaceCnt(newIndentatOfMovingBlock, tabSize);\n              var oldSpaceCnt = indentUtils.getSpaceCnt(oldIndentation, tabSize);\n\n              if (newSpaceCnt !== oldSpaceCnt) {\n                var spaceCntOffset = newSpaceCnt - oldSpaceCnt;\n                this.getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, spaceCntOffset);\n              }\n            }\n          }\n        } else {\n          // Insert line that needs to be moved before\n          builder.addEditOperation(new Range(s.startLineNumber, 1, s.startLineNumber, 1), insertingText_1 + '\\n');\n        }\n      } else {\n        movingLineNumber_1 = s.startLineNumber - 1;\n        movingLineText = model.getLineContent(movingLineNumber_1); // Delete line that needs to be moved\n\n        builder.addEditOperation(new Range(movingLineNumber_1, 1, movingLineNumber_1 + 1, 1), null); // Insert line that needs to be moved after\n\n        builder.addEditOperation(new Range(s.endLineNumber, model.getLineMaxColumn(s.endLineNumber), s.endLineNumber, model.getLineMaxColumn(s.endLineNumber)), '\\n' + movingLineText);\n\n        if (this.shouldAutoIndent(model, s)) {\n          virtualModel.getLineContent = function (lineNumber) {\n            if (lineNumber === movingLineNumber_1) {\n              return model.getLineContent(s.startLineNumber);\n            } else {\n              return model.getLineContent(lineNumber);\n            }\n          };\n\n          var ret = this.matchEnterRule(model, indentConverter, tabSize, s.startLineNumber, s.startLineNumber - 2); // check if s.startLineNumber - 2 matches onEnter rules, if so adjust the moving block by onEnter rules.\n\n          if (ret !== null) {\n            if (ret !== 0) {\n              this.getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, ret);\n            }\n          } else {\n            // it doesn't match any onEnter rule, let's check indentation rules then.\n            var indentOfFirstLine = LanguageConfigurationRegistry.getGoodIndentForLine(virtualModel, model.getLanguageIdAtPosition(s.startLineNumber, 1), movingLineNumber_1, indentConverter);\n\n            if (indentOfFirstLine !== null) {\n              // adjust the indentation of the moving block\n              var oldIndent = strings.getLeadingWhitespace(model.getLineContent(s.startLineNumber));\n              var newSpaceCnt = indentUtils.getSpaceCnt(indentOfFirstLine, tabSize);\n              var oldSpaceCnt = indentUtils.getSpaceCnt(oldIndent, tabSize);\n\n              if (newSpaceCnt !== oldSpaceCnt) {\n                var spaceCntOffset = newSpaceCnt - oldSpaceCnt;\n                this.getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, spaceCntOffset);\n              }\n            }\n          }\n        }\n      }\n    }\n\n    this._selectionId = builder.trackSelection(s);\n  };\n\n  MoveLinesCommand.prototype.buildIndentConverter = function (tabSize, indentSize, insertSpaces) {\n    return {\n      shiftIndent: function shiftIndent(indentation) {\n        return ShiftCommand.shiftIndent(indentation, indentation.length + 1, tabSize, indentSize, insertSpaces);\n      },\n      unshiftIndent: function unshiftIndent(indentation) {\n        return ShiftCommand.unshiftIndent(indentation, indentation.length + 1, tabSize, indentSize, insertSpaces);\n      }\n    };\n  };\n\n  MoveLinesCommand.prototype.matchEnterRule = function (model, indentConverter, tabSize, line, oneLineAbove, oneLineAboveText) {\n    var validPrecedingLine = oneLineAbove;\n\n    while (validPrecedingLine >= 1) {\n      // ship empty lines as empty lines just inherit indentation\n      var lineContent = void 0;\n\n      if (validPrecedingLine === oneLineAbove && oneLineAboveText !== undefined) {\n        lineContent = oneLineAboveText;\n      } else {\n        lineContent = model.getLineContent(validPrecedingLine);\n      }\n\n      var nonWhitespaceIdx = strings.lastNonWhitespaceIndex(lineContent);\n\n      if (nonWhitespaceIdx >= 0) {\n        break;\n      }\n\n      validPrecedingLine--;\n    }\n\n    if (validPrecedingLine < 1 || line > model.getLineCount()) {\n      return null;\n    }\n\n    var maxColumn = model.getLineMaxColumn(validPrecedingLine);\n    var enter = LanguageConfigurationRegistry.getEnterAction(model, new Range(validPrecedingLine, maxColumn, validPrecedingLine, maxColumn));\n\n    if (enter) {\n      var enterPrefix = enter.indentation;\n      var enterAction = enter.enterAction;\n\n      if (enterAction.indentAction === IndentAction.None) {\n        enterPrefix = enter.indentation + enterAction.appendText;\n      } else if (enterAction.indentAction === IndentAction.Indent) {\n        enterPrefix = enter.indentation + enterAction.appendText;\n      } else if (enterAction.indentAction === IndentAction.IndentOutdent) {\n        enterPrefix = enter.indentation;\n      } else if (enterAction.indentAction === IndentAction.Outdent) {\n        enterPrefix = indentConverter.unshiftIndent(enter.indentation) + enterAction.appendText;\n      }\n\n      var movingLineText = model.getLineContent(line);\n\n      if (this.trimLeft(movingLineText).indexOf(this.trimLeft(enterPrefix)) >= 0) {\n        var oldIndentation = strings.getLeadingWhitespace(model.getLineContent(line));\n        var newIndentation = strings.getLeadingWhitespace(enterPrefix);\n        var indentMetadataOfMovelingLine = LanguageConfigurationRegistry.getIndentMetadata(model, line);\n\n        if (indentMetadataOfMovelingLine !== null && indentMetadataOfMovelingLine & 2\n        /* DECREASE_MASK */\n        ) {\n            newIndentation = indentConverter.unshiftIndent(newIndentation);\n          }\n\n        var newSpaceCnt = indentUtils.getSpaceCnt(newIndentation, tabSize);\n        var oldSpaceCnt = indentUtils.getSpaceCnt(oldIndentation, tabSize);\n        return newSpaceCnt - oldSpaceCnt;\n      }\n    }\n\n    return null;\n  };\n\n  MoveLinesCommand.prototype.trimLeft = function (str) {\n    return str.replace(/^\\s+/, '');\n  };\n\n  MoveLinesCommand.prototype.shouldAutoIndent = function (model, selection) {\n    if (!this._autoIndent) {\n      return false;\n    } // if it's not easy to tokenize, we stop auto indent.\n\n\n    if (!model.isCheapToTokenize(selection.startLineNumber)) {\n      return false;\n    }\n\n    var languageAtSelectionStart = model.getLanguageIdAtPosition(selection.startLineNumber, 1);\n    var languageAtSelectionEnd = model.getLanguageIdAtPosition(selection.endLineNumber, 1);\n\n    if (languageAtSelectionStart !== languageAtSelectionEnd) {\n      return false;\n    }\n\n    if (LanguageConfigurationRegistry.getIndentRulesSupport(languageAtSelectionStart) === null) {\n      return false;\n    }\n\n    return true;\n  };\n\n  MoveLinesCommand.prototype.getIndentEditsOfMovingBlock = function (model, builder, s, tabSize, insertSpaces, offset) {\n    for (var i = s.startLineNumber; i <= s.endLineNumber; i++) {\n      var lineContent = model.getLineContent(i);\n      var originalIndent = strings.getLeadingWhitespace(lineContent);\n      var originalSpacesCnt = indentUtils.getSpaceCnt(originalIndent, tabSize);\n      var newSpacesCnt = originalSpacesCnt + offset;\n      var newIndent = indentUtils.generateIndent(newSpacesCnt, tabSize, insertSpaces);\n\n      if (newIndent !== originalIndent) {\n        builder.addEditOperation(new Range(i, 1, i, originalIndent.length + 1), newIndent);\n\n        if (i === s.endLineNumber && s.endColumn <= originalIndent.length + 1 && newIndent === '') {\n          // as users select part of the original indent white spaces\n          // when we adjust the indentation of endLine, we should adjust the cursor position as well.\n          this._moveEndLineSelectionShrink = true;\n        }\n      }\n    }\n  };\n\n  MoveLinesCommand.prototype.computeCursorState = function (model, helper) {\n    var result = helper.getTrackedSelection(this._selectionId);\n\n    if (this._moveEndPositionDown) {\n      result = result.setEndPosition(result.endLineNumber + 1, 1);\n    }\n\n    if (this._moveEndLineSelectionShrink && result.startLineNumber < result.endLineNumber) {\n      result = result.setEndPosition(result.endLineNumber, 2);\n    }\n\n    return result;\n  };\n\n  return MoveLinesCommand;\n}();\n\nexport { MoveLinesCommand };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditOperation } from '../../common/core/editOperation.js';\nimport { Range } from '../../common/core/range.js';\n\nvar SortLinesCommand =\n/** @class */\nfunction () {\n  function SortLinesCommand(selection, descending) {\n    this.selection = selection;\n    this.descending = descending;\n  }\n\n  SortLinesCommand.prototype.getEditOperations = function (model, builder) {\n    var op = sortLines(model, this.selection, this.descending);\n\n    if (op) {\n      builder.addEditOperation(op.range, op.text);\n    }\n\n    this.selectionId = builder.trackSelection(this.selection);\n  };\n\n  SortLinesCommand.prototype.computeCursorState = function (model, helper) {\n    return helper.getTrackedSelection(this.selectionId);\n  };\n\n  SortLinesCommand.canRun = function (model, selection, descending) {\n    if (model === null) {\n      return false;\n    }\n\n    var data = getSortData(model, selection, descending);\n\n    if (!data) {\n      return false;\n    }\n\n    for (var i = 0, len = data.before.length; i < len; i++) {\n      if (data.before[i] !== data.after[i]) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  return SortLinesCommand;\n}();\n\nexport { SortLinesCommand };\n\nfunction getSortData(model, selection, descending) {\n  var startLineNumber = selection.startLineNumber;\n  var endLineNumber = selection.endLineNumber;\n\n  if (selection.endColumn === 1) {\n    endLineNumber--;\n  } // Nothing to sort if user didn't select anything.\n\n\n  if (startLineNumber >= endLineNumber) {\n    return null;\n  }\n\n  var linesToSort = []; // Get the contents of the selection to be sorted.\n\n  for (var lineNumber = startLineNumber; lineNumber <= endLineNumber; lineNumber++) {\n    linesToSort.push(model.getLineContent(lineNumber));\n  }\n\n  var sorted = linesToSort.slice(0);\n  sorted.sort(function (a, b) {\n    return a.toLowerCase().localeCompare(b.toLowerCase());\n  }); // If descending, reverse the order.\n\n  if (descending === true) {\n    sorted = sorted.reverse();\n  }\n\n  return {\n    startLineNumber: startLineNumber,\n    endLineNumber: endLineNumber,\n    before: linesToSort,\n    after: sorted\n  };\n}\n/**\n * Generate commands for sorting lines on a model.\n */\n\n\nfunction sortLines(model, selection, descending) {\n  var data = getSortData(model, selection, descending);\n\n  if (!data) {\n    return null;\n  }\n\n  return EditOperation.replace(new Range(data.startLineNumber, 1, data.endLineNumber, model.getLineMaxColumn(data.endLineNumber)), data.after.join('\\n'));\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport * as nls from '../../../nls.js';\nimport { KeyChord } from '../../../base/common/keyCodes.js';\nimport { CoreEditingCommands } from '../../browser/controller/coreCommands.js';\nimport { EditorAction, registerEditorAction } from '../../browser/editorExtensions.js';\nimport { ReplaceCommand, ReplaceCommandThatPreservesSelection } from '../../common/commands/replaceCommand.js';\nimport { TrimTrailingWhitespaceCommand } from '../../common/commands/trimTrailingWhitespaceCommand.js';\nimport { TypeOperations } from '../../common/controller/cursorTypeOperations.js';\nimport { EditOperation } from '../../common/core/editOperation.js';\nimport { Position } from '../../common/core/position.js';\nimport { Range } from '../../common/core/range.js';\nimport { Selection } from '../../common/core/selection.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport { CopyLinesCommand } from './copyLinesCommand.js';\nimport { MoveLinesCommand } from './moveLinesCommand.js';\nimport { SortLinesCommand } from './sortLinesCommand.js'; // copy lines\n\nvar AbstractCopyLinesAction =\n/** @class */\nfunction (_super) {\n  __extends(AbstractCopyLinesAction, _super);\n\n  function AbstractCopyLinesAction(down, opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.down = down;\n    return _this;\n  }\n\n  AbstractCopyLinesAction.prototype.run = function (_accessor, editor) {\n    var commands = [];\n    var selections = editor.getSelections() || [];\n\n    for (var _i = 0, selections_1 = selections; _i < selections_1.length; _i++) {\n      var selection = selections_1[_i];\n      commands.push(new CopyLinesCommand(selection, this.down));\n    }\n\n    editor.pushUndoStop();\n    editor.executeCommands(this.id, commands);\n    editor.pushUndoStop();\n  };\n\n  return AbstractCopyLinesAction;\n}(EditorAction);\n\nvar CopyLinesUpAction =\n/** @class */\nfunction (_super) {\n  __extends(CopyLinesUpAction, _super);\n\n  function CopyLinesUpAction() {\n    return _super.call(this, false, {\n      id: 'editor.action.copyLinesUpAction',\n      label: nls.localize('lines.copyUp', \"Copy Line Up\"),\n      alias: 'Copy Line Up',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 512\n        /* Alt */\n        | 1024\n        /* Shift */\n        | 16\n        /* UpArrow */\n        ,\n        linux: {\n          primary: 2048\n          /* CtrlCmd */\n          | 512\n          /* Alt */\n          | 1024\n          /* Shift */\n          | 16\n          /* UpArrow */\n\n        },\n        weight: 100\n        /* EditorContrib */\n\n      },\n      menubarOpts: {\n        menuId: 22\n        /* MenubarSelectionMenu */\n        ,\n        group: '2_line',\n        title: nls.localize({\n          key: 'miCopyLinesUp',\n          comment: ['&& denotes a mnemonic']\n        }, \"&&Copy Line Up\"),\n        order: 1\n      }\n    }) || this;\n  }\n\n  return CopyLinesUpAction;\n}(AbstractCopyLinesAction);\n\nvar CopyLinesDownAction =\n/** @class */\nfunction (_super) {\n  __extends(CopyLinesDownAction, _super);\n\n  function CopyLinesDownAction() {\n    return _super.call(this, true, {\n      id: 'editor.action.copyLinesDownAction',\n      label: nls.localize('lines.copyDown', \"Copy Line Down\"),\n      alias: 'Copy Line Down',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 512\n        /* Alt */\n        | 1024\n        /* Shift */\n        | 18\n        /* DownArrow */\n        ,\n        linux: {\n          primary: 2048\n          /* CtrlCmd */\n          | 512\n          /* Alt */\n          | 1024\n          /* Shift */\n          | 18\n          /* DownArrow */\n\n        },\n        weight: 100\n        /* EditorContrib */\n\n      },\n      menubarOpts: {\n        menuId: 22\n        /* MenubarSelectionMenu */\n        ,\n        group: '2_line',\n        title: nls.localize({\n          key: 'miCopyLinesDown',\n          comment: ['&& denotes a mnemonic']\n        }, \"Co&&py Line Down\"),\n        order: 2\n      }\n    }) || this;\n  }\n\n  return CopyLinesDownAction;\n}(AbstractCopyLinesAction); // move lines\n\n\nvar AbstractMoveLinesAction =\n/** @class */\nfunction (_super) {\n  __extends(AbstractMoveLinesAction, _super);\n\n  function AbstractMoveLinesAction(down, opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.down = down;\n    return _this;\n  }\n\n  AbstractMoveLinesAction.prototype.run = function (_accessor, editor) {\n    var commands = [];\n    var selections = editor.getSelections() || [];\n    var autoIndent = editor.getConfiguration().autoIndent;\n\n    for (var _i = 0, selections_2 = selections; _i < selections_2.length; _i++) {\n      var selection = selections_2[_i];\n      commands.push(new MoveLinesCommand(selection, this.down, autoIndent));\n    }\n\n    editor.pushUndoStop();\n    editor.executeCommands(this.id, commands);\n    editor.pushUndoStop();\n  };\n\n  return AbstractMoveLinesAction;\n}(EditorAction);\n\nvar MoveLinesUpAction =\n/** @class */\nfunction (_super) {\n  __extends(MoveLinesUpAction, _super);\n\n  function MoveLinesUpAction() {\n    return _super.call(this, false, {\n      id: 'editor.action.moveLinesUpAction',\n      label: nls.localize('lines.moveUp', \"Move Line Up\"),\n      alias: 'Move Line Up',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 512\n        /* Alt */\n        | 16\n        /* UpArrow */\n        ,\n        linux: {\n          primary: 512\n          /* Alt */\n          | 16\n          /* UpArrow */\n\n        },\n        weight: 100\n        /* EditorContrib */\n\n      },\n      menubarOpts: {\n        menuId: 22\n        /* MenubarSelectionMenu */\n        ,\n        group: '2_line',\n        title: nls.localize({\n          key: 'miMoveLinesUp',\n          comment: ['&& denotes a mnemonic']\n        }, \"Mo&&ve Line Up\"),\n        order: 3\n      }\n    }) || this;\n  }\n\n  return MoveLinesUpAction;\n}(AbstractMoveLinesAction);\n\nvar MoveLinesDownAction =\n/** @class */\nfunction (_super) {\n  __extends(MoveLinesDownAction, _super);\n\n  function MoveLinesDownAction() {\n    return _super.call(this, true, {\n      id: 'editor.action.moveLinesDownAction',\n      label: nls.localize('lines.moveDown', \"Move Line Down\"),\n      alias: 'Move Line Down',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 512\n        /* Alt */\n        | 18\n        /* DownArrow */\n        ,\n        linux: {\n          primary: 512\n          /* Alt */\n          | 18\n          /* DownArrow */\n\n        },\n        weight: 100\n        /* EditorContrib */\n\n      },\n      menubarOpts: {\n        menuId: 22\n        /* MenubarSelectionMenu */\n        ,\n        group: '2_line',\n        title: nls.localize({\n          key: 'miMoveLinesDown',\n          comment: ['&& denotes a mnemonic']\n        }, \"Move &&Line Down\"),\n        order: 4\n      }\n    }) || this;\n  }\n\n  return MoveLinesDownAction;\n}(AbstractMoveLinesAction);\n\nvar AbstractSortLinesAction =\n/** @class */\nfunction (_super) {\n  __extends(AbstractSortLinesAction, _super);\n\n  function AbstractSortLinesAction(descending, opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.descending = descending;\n    return _this;\n  }\n\n  AbstractSortLinesAction.prototype.run = function (_accessor, editor) {\n    var selections = editor.getSelections() || [];\n\n    for (var _i = 0, selections_3 = selections; _i < selections_3.length; _i++) {\n      var selection = selections_3[_i];\n\n      if (!SortLinesCommand.canRun(editor.getModel(), selection, this.descending)) {\n        return;\n      }\n    }\n\n    var commands = [];\n\n    for (var i = 0, len = selections.length; i < len; i++) {\n      commands[i] = new SortLinesCommand(selections[i], this.descending);\n    }\n\n    editor.pushUndoStop();\n    editor.executeCommands(this.id, commands);\n    editor.pushUndoStop();\n  };\n\n  return AbstractSortLinesAction;\n}(EditorAction);\n\nexport { AbstractSortLinesAction };\n\nvar SortLinesAscendingAction =\n/** @class */\nfunction (_super) {\n  __extends(SortLinesAscendingAction, _super);\n\n  function SortLinesAscendingAction() {\n    return _super.call(this, false, {\n      id: 'editor.action.sortLinesAscending',\n      label: nls.localize('lines.sortAscending', \"Sort Lines Ascending\"),\n      alias: 'Sort Lines Ascending',\n      precondition: EditorContextKeys.writable\n    }) || this;\n  }\n\n  return SortLinesAscendingAction;\n}(AbstractSortLinesAction);\n\nexport { SortLinesAscendingAction };\n\nvar SortLinesDescendingAction =\n/** @class */\nfunction (_super) {\n  __extends(SortLinesDescendingAction, _super);\n\n  function SortLinesDescendingAction() {\n    return _super.call(this, true, {\n      id: 'editor.action.sortLinesDescending',\n      label: nls.localize('lines.sortDescending', \"Sort Lines Descending\"),\n      alias: 'Sort Lines Descending',\n      precondition: EditorContextKeys.writable\n    }) || this;\n  }\n\n  return SortLinesDescendingAction;\n}(AbstractSortLinesAction);\n\nexport { SortLinesDescendingAction };\n\nvar TrimTrailingWhitespaceAction =\n/** @class */\nfunction (_super) {\n  __extends(TrimTrailingWhitespaceAction, _super);\n\n  function TrimTrailingWhitespaceAction() {\n    return _super.call(this, {\n      id: TrimTrailingWhitespaceAction.ID,\n      label: nls.localize('lines.trimTrailingWhitespace', \"Trim Trailing Whitespace\"),\n      alias: 'Trim Trailing Whitespace',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: KeyChord(2048\n        /* CtrlCmd */\n        | 41\n        /* KEY_K */\n        , 2048\n        /* CtrlCmd */\n        | 54\n        /* KEY_X */\n        ),\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  TrimTrailingWhitespaceAction.prototype.run = function (_accessor, editor, args) {\n    var cursors = [];\n\n    if (args.reason === 'auto-save') {\n      // See https://github.com/editorconfig/editorconfig-vscode/issues/47\n      // It is very convenient for the editor config extension to invoke this action.\n      // So, if we get a reason:'auto-save' passed in, let's preserve cursor positions.\n      cursors = (editor.getSelections() || []).map(function (s) {\n        return new Position(s.positionLineNumber, s.positionColumn);\n      });\n    }\n\n    var selection = editor.getSelection();\n\n    if (selection === null) {\n      return;\n    }\n\n    var command = new TrimTrailingWhitespaceCommand(selection, cursors);\n    editor.pushUndoStop();\n    editor.executeCommands(this.id, [command]);\n    editor.pushUndoStop();\n  };\n\n  TrimTrailingWhitespaceAction.ID = 'editor.action.trimTrailingWhitespace';\n  return TrimTrailingWhitespaceAction;\n}(EditorAction);\n\nexport { TrimTrailingWhitespaceAction };\n\nvar DeleteLinesAction =\n/** @class */\nfunction (_super) {\n  __extends(DeleteLinesAction, _super);\n\n  function DeleteLinesAction() {\n    return _super.call(this, {\n      id: 'editor.action.deleteLines',\n      label: nls.localize('lines.delete', \"Delete Line\"),\n      alias: 'Delete Line',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048\n        /* CtrlCmd */\n        | 1024\n        /* Shift */\n        | 41\n        /* KEY_K */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  DeleteLinesAction.prototype.run = function (_accessor, editor) {\n    if (!editor.hasModel()) {\n      return;\n    }\n\n    var ops = this._getLinesToRemove(editor);\n\n    var model = editor.getModel();\n\n    if (model.getLineCount() === 1 && model.getLineMaxColumn(1) === 1) {\n      // Model is empty\n      return;\n    }\n\n    var linesDeleted = 0;\n    var edits = [];\n    var cursorState = [];\n\n    for (var i = 0, len = ops.length; i < len; i++) {\n      var op = ops[i];\n      var startLineNumber = op.startLineNumber;\n      var endLineNumber = op.endLineNumber;\n      var startColumn = 1;\n      var endColumn = model.getLineMaxColumn(endLineNumber);\n\n      if (endLineNumber < model.getLineCount()) {\n        endLineNumber += 1;\n        endColumn = 1;\n      } else if (startLineNumber > 1) {\n        startLineNumber -= 1;\n        startColumn = model.getLineMaxColumn(startLineNumber);\n      }\n\n      edits.push(EditOperation.replace(new Selection(startLineNumber, startColumn, endLineNumber, endColumn), ''));\n      cursorState.push(new Selection(startLineNumber - linesDeleted, op.positionColumn, startLineNumber - linesDeleted, op.positionColumn));\n      linesDeleted += op.endLineNumber - op.startLineNumber + 1;\n    }\n\n    editor.pushUndoStop();\n    editor.executeEdits(this.id, edits, cursorState);\n    editor.pushUndoStop();\n  };\n\n  DeleteLinesAction.prototype._getLinesToRemove = function (editor) {\n    // Construct delete operations\n    var operations = editor.getSelections().map(function (s) {\n      var endLineNumber = s.endLineNumber;\n\n      if (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\n        endLineNumber -= 1;\n      }\n\n      return {\n        startLineNumber: s.startLineNumber,\n        selectionStartColumn: s.selectionStartColumn,\n        endLineNumber: endLineNumber,\n        positionColumn: s.positionColumn\n      };\n    }); // Sort delete operations\n\n    operations.sort(function (a, b) {\n      if (a.startLineNumber === b.startLineNumber) {\n        return a.endLineNumber - b.endLineNumber;\n      }\n\n      return a.startLineNumber - b.startLineNumber;\n    }); // Merge delete operations which are adjacent or overlapping\n\n    var mergedOperations = [];\n    var previousOperation = operations[0];\n\n    for (var i = 1; i < operations.length; i++) {\n      if (previousOperation.endLineNumber + 1 >= operations[i].startLineNumber) {\n        // Merge current operations into the previous one\n        previousOperation.endLineNumber = operations[i].endLineNumber;\n      } else {\n        // Push previous operation\n        mergedOperations.push(previousOperation);\n        previousOperation = operations[i];\n      }\n    } // Push the last operation\n\n\n    mergedOperations.push(previousOperation);\n    return mergedOperations;\n  };\n\n  return DeleteLinesAction;\n}(EditorAction);\n\nexport { DeleteLinesAction };\n\nvar IndentLinesAction =\n/** @class */\nfunction (_super) {\n  __extends(IndentLinesAction, _super);\n\n  function IndentLinesAction() {\n    return _super.call(this, {\n      id: 'editor.action.indentLines',\n      label: nls.localize('lines.indent', \"Indent Line\"),\n      alias: 'Indent Line',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048\n        /* CtrlCmd */\n        | 89\n        /* US_CLOSE_SQUARE_BRACKET */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  IndentLinesAction.prototype.run = function (_accessor, editor) {\n    var cursors = editor._getCursors();\n\n    if (!cursors) {\n      return;\n    }\n\n    editor.pushUndoStop();\n    editor.executeCommands(this.id, TypeOperations.indent(cursors.context.config, editor.getModel(), editor.getSelections()));\n    editor.pushUndoStop();\n  };\n\n  return IndentLinesAction;\n}(EditorAction);\n\nexport { IndentLinesAction };\n\nvar OutdentLinesAction =\n/** @class */\nfunction (_super) {\n  __extends(OutdentLinesAction, _super);\n\n  function OutdentLinesAction() {\n    return _super.call(this, {\n      id: 'editor.action.outdentLines',\n      label: nls.localize('lines.outdent', \"Outdent Line\"),\n      alias: 'Outdent Line',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048\n        /* CtrlCmd */\n        | 87\n        /* US_OPEN_SQUARE_BRACKET */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  OutdentLinesAction.prototype.run = function (_accessor, editor) {\n    CoreEditingCommands.Outdent.runEditorCommand(_accessor, editor, null);\n  };\n\n  return OutdentLinesAction;\n}(EditorAction);\n\nvar InsertLineBeforeAction =\n/** @class */\nfunction (_super) {\n  __extends(InsertLineBeforeAction, _super);\n\n  function InsertLineBeforeAction() {\n    return _super.call(this, {\n      id: 'editor.action.insertLineBefore',\n      label: nls.localize('lines.insertBefore', \"Insert Line Above\"),\n      alias: 'Insert Line Above',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048\n        /* CtrlCmd */\n        | 1024\n        /* Shift */\n        | 3\n        /* Enter */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  InsertLineBeforeAction.prototype.run = function (_accessor, editor) {\n    var cursors = editor._getCursors();\n\n    if (!cursors) {\n      return;\n    }\n\n    editor.pushUndoStop();\n    editor.executeCommands(this.id, TypeOperations.lineInsertBefore(cursors.context.config, editor.getModel(), editor.getSelections()));\n  };\n\n  return InsertLineBeforeAction;\n}(EditorAction);\n\nexport { InsertLineBeforeAction };\n\nvar InsertLineAfterAction =\n/** @class */\nfunction (_super) {\n  __extends(InsertLineAfterAction, _super);\n\n  function InsertLineAfterAction() {\n    return _super.call(this, {\n      id: 'editor.action.insertLineAfter',\n      label: nls.localize('lines.insertAfter', \"Insert Line Below\"),\n      alias: 'Insert Line Below',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048\n        /* CtrlCmd */\n        | 3\n        /* Enter */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  InsertLineAfterAction.prototype.run = function (_accessor, editor) {\n    var cursors = editor._getCursors();\n\n    if (!cursors) {\n      return;\n    }\n\n    editor.pushUndoStop();\n    editor.executeCommands(this.id, TypeOperations.lineInsertAfter(cursors.context.config, editor.getModel(), editor.getSelections()));\n  };\n\n  return InsertLineAfterAction;\n}(EditorAction);\n\nexport { InsertLineAfterAction };\n\nvar AbstractDeleteAllToBoundaryAction =\n/** @class */\nfunction (_super) {\n  __extends(AbstractDeleteAllToBoundaryAction, _super);\n\n  function AbstractDeleteAllToBoundaryAction() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  AbstractDeleteAllToBoundaryAction.prototype.run = function (_accessor, editor) {\n    if (!editor.hasModel()) {\n      return;\n    }\n\n    var primaryCursor = editor.getSelection();\n\n    var rangesToDelete = this._getRangesToDelete(editor); // merge overlapping selections\n\n\n    var effectiveRanges = [];\n\n    for (var i = 0, count = rangesToDelete.length - 1; i < count; i++) {\n      var range = rangesToDelete[i];\n      var nextRange = rangesToDelete[i + 1];\n\n      if (Range.intersectRanges(range, nextRange) === null) {\n        effectiveRanges.push(range);\n      } else {\n        rangesToDelete[i + 1] = Range.plusRange(range, nextRange);\n      }\n    }\n\n    effectiveRanges.push(rangesToDelete[rangesToDelete.length - 1]);\n\n    var endCursorState = this._getEndCursorState(primaryCursor, effectiveRanges);\n\n    var edits = effectiveRanges.map(function (range) {\n      return EditOperation.replace(range, '');\n    });\n    editor.pushUndoStop();\n    editor.executeEdits(this.id, edits, endCursorState);\n    editor.pushUndoStop();\n  };\n\n  return AbstractDeleteAllToBoundaryAction;\n}(EditorAction);\n\nexport { AbstractDeleteAllToBoundaryAction };\n\nvar DeleteAllLeftAction =\n/** @class */\nfunction (_super) {\n  __extends(DeleteAllLeftAction, _super);\n\n  function DeleteAllLeftAction() {\n    return _super.call(this, {\n      id: 'deleteAllLeft',\n      label: nls.localize('lines.deleteAllLeft', \"Delete All Left\"),\n      alias: 'Delete All Left',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 0,\n        mac: {\n          primary: 2048\n          /* CtrlCmd */\n          | 1\n          /* Backspace */\n\n        },\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  DeleteAllLeftAction.prototype._getEndCursorState = function (primaryCursor, rangesToDelete) {\n    var endPrimaryCursor = null;\n    var endCursorState = [];\n    var deletedLines = 0;\n    rangesToDelete.forEach(function (range) {\n      var endCursor;\n\n      if (range.endColumn === 1 && deletedLines > 0) {\n        var newStartLine = range.startLineNumber - deletedLines;\n        endCursor = new Selection(newStartLine, range.startColumn, newStartLine, range.startColumn);\n      } else {\n        endCursor = new Selection(range.startLineNumber, range.startColumn, range.startLineNumber, range.startColumn);\n      }\n\n      deletedLines += range.endLineNumber - range.startLineNumber;\n\n      if (range.intersectRanges(primaryCursor)) {\n        endPrimaryCursor = endCursor;\n      } else {\n        endCursorState.push(endCursor);\n      }\n    });\n\n    if (endPrimaryCursor) {\n      endCursorState.unshift(endPrimaryCursor);\n    }\n\n    return endCursorState;\n  };\n\n  DeleteAllLeftAction.prototype._getRangesToDelete = function (editor) {\n    var selections = editor.getSelections();\n\n    if (selections === null) {\n      return [];\n    }\n\n    var rangesToDelete = selections;\n    var model = editor.getModel();\n\n    if (model === null) {\n      return [];\n    }\n\n    rangesToDelete.sort(Range.compareRangesUsingStarts);\n    rangesToDelete = rangesToDelete.map(function (selection) {\n      if (selection.isEmpty()) {\n        if (selection.startColumn === 1) {\n          var deleteFromLine = Math.max(1, selection.startLineNumber - 1);\n          var deleteFromColumn = selection.startLineNumber === 1 ? 1 : model.getLineContent(deleteFromLine).length + 1;\n          return new Range(deleteFromLine, deleteFromColumn, selection.startLineNumber, 1);\n        } else {\n          return new Range(selection.startLineNumber, 1, selection.startLineNumber, selection.startColumn);\n        }\n      } else {\n        return selection;\n      }\n    });\n    return rangesToDelete;\n  };\n\n  return DeleteAllLeftAction;\n}(AbstractDeleteAllToBoundaryAction);\n\nexport { DeleteAllLeftAction };\n\nvar DeleteAllRightAction =\n/** @class */\nfunction (_super) {\n  __extends(DeleteAllRightAction, _super);\n\n  function DeleteAllRightAction() {\n    return _super.call(this, {\n      id: 'deleteAllRight',\n      label: nls.localize('lines.deleteAllRight', \"Delete All Right\"),\n      alias: 'Delete All Right',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 0,\n        mac: {\n          primary: 256\n          /* WinCtrl */\n          | 41\n          /* KEY_K */\n          ,\n          secondary: [2048\n          /* CtrlCmd */\n          | 20\n          /* Delete */\n          ]\n        },\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  DeleteAllRightAction.prototype._getEndCursorState = function (primaryCursor, rangesToDelete) {\n    var endPrimaryCursor = null;\n    var endCursorState = [];\n\n    for (var i = 0, len = rangesToDelete.length, offset = 0; i < len; i++) {\n      var range = rangesToDelete[i];\n      var endCursor = new Selection(range.startLineNumber - offset, range.startColumn, range.startLineNumber - offset, range.startColumn);\n\n      if (range.intersectRanges(primaryCursor)) {\n        endPrimaryCursor = endCursor;\n      } else {\n        endCursorState.push(endCursor);\n      }\n    }\n\n    if (endPrimaryCursor) {\n      endCursorState.unshift(endPrimaryCursor);\n    }\n\n    return endCursorState;\n  };\n\n  DeleteAllRightAction.prototype._getRangesToDelete = function (editor) {\n    var model = editor.getModel();\n\n    if (model === null) {\n      return [];\n    }\n\n    var selections = editor.getSelections();\n\n    if (selections === null) {\n      return [];\n    }\n\n    var rangesToDelete = selections.map(function (sel) {\n      if (sel.isEmpty()) {\n        var maxColumn = model.getLineMaxColumn(sel.startLineNumber);\n\n        if (sel.startColumn === maxColumn) {\n          return new Range(sel.startLineNumber, sel.startColumn, sel.startLineNumber + 1, 1);\n        } else {\n          return new Range(sel.startLineNumber, sel.startColumn, sel.startLineNumber, maxColumn);\n        }\n      }\n\n      return sel;\n    });\n    rangesToDelete.sort(Range.compareRangesUsingStarts);\n    return rangesToDelete;\n  };\n\n  return DeleteAllRightAction;\n}(AbstractDeleteAllToBoundaryAction);\n\nexport { DeleteAllRightAction };\n\nvar JoinLinesAction =\n/** @class */\nfunction (_super) {\n  __extends(JoinLinesAction, _super);\n\n  function JoinLinesAction() {\n    return _super.call(this, {\n      id: 'editor.action.joinLines',\n      label: nls.localize('lines.joinLines', \"Join Lines\"),\n      alias: 'Join Lines',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 0,\n        mac: {\n          primary: 256\n          /* WinCtrl */\n          | 40\n          /* KEY_J */\n\n        },\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  JoinLinesAction.prototype.run = function (_accessor, editor) {\n    var selections = editor.getSelections();\n\n    if (selections === null) {\n      return;\n    }\n\n    var primaryCursor = editor.getSelection();\n\n    if (primaryCursor === null) {\n      return;\n    }\n\n    selections.sort(Range.compareRangesUsingStarts);\n    var reducedSelections = [];\n    var lastSelection = selections.reduce(function (previousValue, currentValue) {\n      if (previousValue.isEmpty()) {\n        if (previousValue.endLineNumber === currentValue.startLineNumber) {\n          if (primaryCursor.equalsSelection(previousValue)) {\n            primaryCursor = currentValue;\n          }\n\n          return currentValue;\n        }\n\n        if (currentValue.startLineNumber > previousValue.endLineNumber + 1) {\n          reducedSelections.push(previousValue);\n          return currentValue;\n        } else {\n          return new Selection(previousValue.startLineNumber, previousValue.startColumn, currentValue.endLineNumber, currentValue.endColumn);\n        }\n      } else {\n        if (currentValue.startLineNumber > previousValue.endLineNumber) {\n          reducedSelections.push(previousValue);\n          return currentValue;\n        } else {\n          return new Selection(previousValue.startLineNumber, previousValue.startColumn, currentValue.endLineNumber, currentValue.endColumn);\n        }\n      }\n    });\n    reducedSelections.push(lastSelection);\n    var model = editor.getModel();\n\n    if (model === null) {\n      return;\n    }\n\n    var edits = [];\n    var endCursorState = [];\n    var endPrimaryCursor = primaryCursor;\n    var lineOffset = 0;\n\n    for (var i = 0, len = reducedSelections.length; i < len; i++) {\n      var selection = reducedSelections[i];\n      var startLineNumber = selection.startLineNumber;\n      var startColumn = 1;\n      var columnDeltaOffset = 0;\n      var endLineNumber = void 0,\n          endColumn = void 0;\n      var selectionEndPositionOffset = model.getLineContent(selection.endLineNumber).length - selection.endColumn;\n\n      if (selection.isEmpty() || selection.startLineNumber === selection.endLineNumber) {\n        var position = selection.getStartPosition();\n\n        if (position.lineNumber < model.getLineCount()) {\n          endLineNumber = startLineNumber + 1;\n          endColumn = model.getLineMaxColumn(endLineNumber);\n        } else {\n          endLineNumber = position.lineNumber;\n          endColumn = model.getLineMaxColumn(position.lineNumber);\n        }\n      } else {\n        endLineNumber = selection.endLineNumber;\n        endColumn = model.getLineMaxColumn(endLineNumber);\n      }\n\n      var trimmedLinesContent = model.getLineContent(startLineNumber);\n\n      for (var i_1 = startLineNumber + 1; i_1 <= endLineNumber; i_1++) {\n        var lineText = model.getLineContent(i_1);\n        var firstNonWhitespaceIdx = model.getLineFirstNonWhitespaceColumn(i_1);\n\n        if (firstNonWhitespaceIdx >= 1) {\n          var insertSpace = true;\n\n          if (trimmedLinesContent === '') {\n            insertSpace = false;\n          }\n\n          if (insertSpace && (trimmedLinesContent.charAt(trimmedLinesContent.length - 1) === ' ' || trimmedLinesContent.charAt(trimmedLinesContent.length - 1) === '\\t')) {\n            insertSpace = false;\n            trimmedLinesContent = trimmedLinesContent.replace(/[\\s\\uFEFF\\xA0]+$/g, ' ');\n          }\n\n          var lineTextWithoutIndent = lineText.substr(firstNonWhitespaceIdx - 1);\n          trimmedLinesContent += (insertSpace ? ' ' : '') + lineTextWithoutIndent;\n\n          if (insertSpace) {\n            columnDeltaOffset = lineTextWithoutIndent.length + 1;\n          } else {\n            columnDeltaOffset = lineTextWithoutIndent.length;\n          }\n        } else {\n          columnDeltaOffset = 0;\n        }\n      }\n\n      var deleteSelection = new Range(startLineNumber, startColumn, endLineNumber, endColumn);\n\n      if (!deleteSelection.isEmpty()) {\n        var resultSelection = void 0;\n\n        if (selection.isEmpty()) {\n          edits.push(EditOperation.replace(deleteSelection, trimmedLinesContent));\n          resultSelection = new Selection(deleteSelection.startLineNumber - lineOffset, trimmedLinesContent.length - columnDeltaOffset + 1, startLineNumber - lineOffset, trimmedLinesContent.length - columnDeltaOffset + 1);\n        } else {\n          if (selection.startLineNumber === selection.endLineNumber) {\n            edits.push(EditOperation.replace(deleteSelection, trimmedLinesContent));\n            resultSelection = new Selection(selection.startLineNumber - lineOffset, selection.startColumn, selection.endLineNumber - lineOffset, selection.endColumn);\n          } else {\n            edits.push(EditOperation.replace(deleteSelection, trimmedLinesContent));\n            resultSelection = new Selection(selection.startLineNumber - lineOffset, selection.startColumn, selection.startLineNumber - lineOffset, trimmedLinesContent.length - selectionEndPositionOffset);\n          }\n        }\n\n        if (Range.intersectRanges(deleteSelection, primaryCursor) !== null) {\n          endPrimaryCursor = resultSelection;\n        } else {\n          endCursorState.push(resultSelection);\n        }\n      }\n\n      lineOffset += deleteSelection.endLineNumber - deleteSelection.startLineNumber;\n    }\n\n    endCursorState.unshift(endPrimaryCursor);\n    editor.pushUndoStop();\n    editor.executeEdits(this.id, edits, endCursorState);\n    editor.pushUndoStop();\n  };\n\n  return JoinLinesAction;\n}(EditorAction);\n\nexport { JoinLinesAction };\n\nvar TransposeAction =\n/** @class */\nfunction (_super) {\n  __extends(TransposeAction, _super);\n\n  function TransposeAction() {\n    return _super.call(this, {\n      id: 'editor.action.transpose',\n      label: nls.localize('editor.transpose', \"Transpose characters around the cursor\"),\n      alias: 'Transpose characters around the cursor',\n      precondition: EditorContextKeys.writable\n    }) || this;\n  }\n\n  TransposeAction.prototype.run = function (_accessor, editor) {\n    var selections = editor.getSelections();\n\n    if (selections === null) {\n      return;\n    }\n\n    var model = editor.getModel();\n\n    if (model === null) {\n      return;\n    }\n\n    var commands = [];\n\n    for (var i = 0, len = selections.length; i < len; i++) {\n      var selection = selections[i];\n\n      if (!selection.isEmpty()) {\n        continue;\n      }\n\n      var cursor = selection.getStartPosition();\n      var maxColumn = model.getLineMaxColumn(cursor.lineNumber);\n\n      if (cursor.column >= maxColumn) {\n        if (cursor.lineNumber === model.getLineCount()) {\n          continue;\n        } // The cursor is at the end of current line and current line is not empty\n        // then we transpose the character before the cursor and the line break if there is any following line.\n\n\n        var deleteSelection = new Range(cursor.lineNumber, Math.max(1, cursor.column - 1), cursor.lineNumber + 1, 1);\n        var chars = model.getValueInRange(deleteSelection).split('').reverse().join('');\n        commands.push(new ReplaceCommand(new Selection(cursor.lineNumber, Math.max(1, cursor.column - 1), cursor.lineNumber + 1, 1), chars));\n      } else {\n        var deleteSelection = new Range(cursor.lineNumber, Math.max(1, cursor.column - 1), cursor.lineNumber, cursor.column + 1);\n        var chars = model.getValueInRange(deleteSelection).split('').reverse().join('');\n        commands.push(new ReplaceCommandThatPreservesSelection(deleteSelection, chars, new Selection(cursor.lineNumber, cursor.column + 1, cursor.lineNumber, cursor.column + 1)));\n      }\n    }\n\n    editor.pushUndoStop();\n    editor.executeCommands(this.id, commands);\n    editor.pushUndoStop();\n  };\n\n  return TransposeAction;\n}(EditorAction);\n\nexport { TransposeAction };\n\nvar AbstractCaseAction =\n/** @class */\nfunction (_super) {\n  __extends(AbstractCaseAction, _super);\n\n  function AbstractCaseAction() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  AbstractCaseAction.prototype.run = function (_accessor, editor) {\n    var selections = editor.getSelections();\n\n    if (selections === null) {\n      return;\n    }\n\n    var model = editor.getModel();\n\n    if (model === null) {\n      return;\n    }\n\n    var wordSeparators = editor.getConfiguration().wordSeparators;\n    var commands = [];\n\n    for (var i = 0, len = selections.length; i < len; i++) {\n      var selection = selections[i];\n\n      if (selection.isEmpty()) {\n        var cursor = selection.getStartPosition();\n        var word = model.getWordAtPosition(cursor);\n\n        if (!word) {\n          continue;\n        }\n\n        var wordRange = new Range(cursor.lineNumber, word.startColumn, cursor.lineNumber, word.endColumn);\n        var text = model.getValueInRange(wordRange);\n        commands.push(new ReplaceCommandThatPreservesSelection(wordRange, this._modifyText(text, wordSeparators), new Selection(cursor.lineNumber, cursor.column, cursor.lineNumber, cursor.column)));\n      } else {\n        var text = model.getValueInRange(selection);\n        commands.push(new ReplaceCommandThatPreservesSelection(selection, this._modifyText(text, wordSeparators), selection));\n      }\n    }\n\n    editor.pushUndoStop();\n    editor.executeCommands(this.id, commands);\n    editor.pushUndoStop();\n  };\n\n  return AbstractCaseAction;\n}(EditorAction);\n\nexport { AbstractCaseAction };\n\nvar UpperCaseAction =\n/** @class */\nfunction (_super) {\n  __extends(UpperCaseAction, _super);\n\n  function UpperCaseAction() {\n    return _super.call(this, {\n      id: 'editor.action.transformToUppercase',\n      label: nls.localize('editor.transformToUppercase', \"Transform to Uppercase\"),\n      alias: 'Transform to Uppercase',\n      precondition: EditorContextKeys.writable\n    }) || this;\n  }\n\n  UpperCaseAction.prototype._modifyText = function (text, wordSeparators) {\n    return text.toLocaleUpperCase();\n  };\n\n  return UpperCaseAction;\n}(AbstractCaseAction);\n\nexport { UpperCaseAction };\n\nvar LowerCaseAction =\n/** @class */\nfunction (_super) {\n  __extends(LowerCaseAction, _super);\n\n  function LowerCaseAction() {\n    return _super.call(this, {\n      id: 'editor.action.transformToLowercase',\n      label: nls.localize('editor.transformToLowercase', \"Transform to Lowercase\"),\n      alias: 'Transform to Lowercase',\n      precondition: EditorContextKeys.writable\n    }) || this;\n  }\n\n  LowerCaseAction.prototype._modifyText = function (text, wordSeparators) {\n    return text.toLocaleLowerCase();\n  };\n\n  return LowerCaseAction;\n}(AbstractCaseAction);\n\nexport { LowerCaseAction };\n\nvar TitleCaseAction =\n/** @class */\nfunction (_super) {\n  __extends(TitleCaseAction, _super);\n\n  function TitleCaseAction() {\n    return _super.call(this, {\n      id: 'editor.action.transformToTitlecase',\n      label: nls.localize('editor.transformToTitlecase', \"Transform to Title Case\"),\n      alias: 'Transform to Title Case',\n      precondition: EditorContextKeys.writable\n    }) || this;\n  }\n\n  TitleCaseAction.prototype._modifyText = function (text, wordSeparators) {\n    var separators = '\\r\\n\\t ' + wordSeparators;\n    var excludedChars = separators.split('');\n    var title = '';\n    var startUpperCase = true;\n\n    for (var i = 0; i < text.length; i++) {\n      var currentChar = text[i];\n\n      if (excludedChars.indexOf(currentChar) >= 0) {\n        startUpperCase = true;\n        title += currentChar;\n      } else if (startUpperCase) {\n        startUpperCase = false;\n        title += currentChar.toLocaleUpperCase();\n      } else {\n        title += currentChar.toLocaleLowerCase();\n      }\n    }\n\n    return title;\n  };\n\n  return TitleCaseAction;\n}(AbstractCaseAction);\n\nexport { TitleCaseAction };\nregisterEditorAction(CopyLinesUpAction);\nregisterEditorAction(CopyLinesDownAction);\nregisterEditorAction(MoveLinesUpAction);\nregisterEditorAction(MoveLinesDownAction);\nregisterEditorAction(SortLinesAscendingAction);\nregisterEditorAction(SortLinesDescendingAction);\nregisterEditorAction(TrimTrailingWhitespaceAction);\nregisterEditorAction(DeleteLinesAction);\nregisterEditorAction(IndentLinesAction);\nregisterEditorAction(OutdentLinesAction);\nregisterEditorAction(InsertLineBeforeAction);\nregisterEditorAction(InsertLineAfterAction);\nregisterEditorAction(DeleteAllLeftAction);\nregisterEditorAction(DeleteAllRightAction);\nregisterEditorAction(JoinLinesAction);\nregisterEditorAction(TransposeAction);\nregisterEditorAction(UpperCaseAction);\nregisterEditorAction(LowerCaseAction);\nregisterEditorAction(TitleCaseAction);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar _this = this;\n\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../base/common/errors.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { Range } from '../../common/core/range.js';\nimport { LinkProviderRegistry } from '../../common/modes.js';\nimport { IModelService } from '../../common/services/modelService.js';\nimport { CommandsRegistry } from '../../../platform/commands/common/commands.js';\nimport { isDisposable, Disposable } from '../../../base/common/lifecycle.js';\nimport { coalesce } from '../../../base/common/arrays.js';\n\nvar Link =\n/** @class */\nfunction () {\n  function Link(link, provider) {\n    this._link = link;\n    this._provider = provider;\n  }\n\n  Link.prototype.toJSON = function () {\n    return {\n      range: this.range,\n      url: this.url\n    };\n  };\n\n  Object.defineProperty(Link.prototype, \"range\", {\n    get: function get() {\n      return this._link.range;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Link.prototype, \"url\", {\n    get: function get() {\n      return this._link.url;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Link.prototype.resolve = function (token) {\n    var _this = this;\n\n    if (this._link.url) {\n      try {\n        if (typeof this._link.url === 'string') {\n          return Promise.resolve(URI.parse(this._link.url));\n        } else {\n          return Promise.resolve(this._link.url);\n        }\n      } catch (e) {\n        return Promise.reject(new Error('invalid'));\n      }\n    }\n\n    if (typeof this._provider.resolveLink === 'function') {\n      return Promise.resolve(this._provider.resolveLink(this._link, token)).then(function (value) {\n        _this._link = value || _this._link;\n\n        if (_this._link.url) {\n          // recurse\n          return _this.resolve(token);\n        }\n\n        return Promise.reject(new Error('missing'));\n      });\n    }\n\n    return Promise.reject(new Error('missing'));\n  };\n\n  return Link;\n}();\n\nexport { Link };\n\nvar LinksList =\n/** @class */\nfunction (_super) {\n  __extends(LinksList, _super);\n\n  function LinksList(tuples) {\n    var _this = _super.call(this) || this;\n\n    var links = [];\n\n    var _loop_1 = function _loop_1(list, provider) {\n      // merge all links\n      var newLinks = list.links.map(function (link) {\n        return new Link(link, provider);\n      });\n      links = LinksList._union(links, newLinks); // register disposables\n\n      if (isDisposable(provider)) {\n        this_1._register(provider);\n      }\n    };\n\n    var this_1 = this;\n\n    for (var _i = 0, tuples_1 = tuples; _i < tuples_1.length; _i++) {\n      var _a = tuples_1[_i],\n          list = _a[0],\n          provider = _a[1];\n\n      _loop_1(list, provider);\n    }\n\n    _this.links = links;\n    return _this;\n  }\n\n  LinksList._union = function (oldLinks, newLinks) {\n    // reunite oldLinks with newLinks and remove duplicates\n    var result = [];\n    var oldIndex;\n    var oldLen;\n    var newIndex;\n    var newLen;\n\n    for (oldIndex = 0, newIndex = 0, oldLen = oldLinks.length, newLen = newLinks.length; oldIndex < oldLen && newIndex < newLen;) {\n      var oldLink = oldLinks[oldIndex];\n      var newLink = newLinks[newIndex];\n\n      if (Range.areIntersectingOrTouching(oldLink.range, newLink.range)) {\n        // Remove the oldLink\n        oldIndex++;\n        continue;\n      }\n\n      var comparisonResult = Range.compareRangesUsingStarts(oldLink.range, newLink.range);\n\n      if (comparisonResult < 0) {\n        // oldLink is before\n        result.push(oldLink);\n        oldIndex++;\n      } else {\n        // newLink is before\n        result.push(newLink);\n        newIndex++;\n      }\n    }\n\n    for (; oldIndex < oldLen; oldIndex++) {\n      result.push(oldLinks[oldIndex]);\n    }\n\n    for (; newIndex < newLen; newIndex++) {\n      result.push(newLinks[newIndex]);\n    }\n\n    return result;\n  };\n\n  return LinksList;\n}(Disposable);\n\nexport { LinksList };\nexport function getLinks(model, token) {\n  var lists = []; // ask all providers for links in parallel\n\n  var promises = LinkProviderRegistry.ordered(model).reverse().map(function (provider, i) {\n    return Promise.resolve(provider.provideLinks(model, token)).then(function (result) {\n      if (result) {\n        lists[i] = [result, provider];\n      }\n    }, onUnexpectedExternalError);\n  });\n  return Promise.all(promises).then(function () {\n    return new LinksList(coalesce(lists));\n  });\n}\nCommandsRegistry.registerCommand('_executeLinkProvider', function (accessor) {\n  var args = [];\n\n  for (var _i = 1; _i < arguments.length; _i++) {\n    args[_i - 1] = arguments[_i];\n  }\n\n  return __awaiter(_this, void 0, void 0, function () {\n    var uri, model, list, result;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          uri = args[0];\n\n          if (!(uri instanceof URI)) {\n            return [2\n            /*return*/\n            , []];\n          }\n\n          model = accessor.get(IModelService).getModel(uri);\n\n          if (!model) {\n            return [2\n            /*return*/\n            , []];\n          }\n\n          return [4\n          /*yield*/\n          , getLinks(model, CancellationToken.None)];\n\n        case 1:\n          list = _a.sent();\n\n          if (!list) {\n            return [2\n            /*return*/\n            , []];\n          }\n\n          result = list.links.slice(0);\n          list.dispose();\n          return [2\n          /*return*/\n          , result];\n      }\n    });\n  });\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nimport './links.css';\nimport * as nls from '../../../nls.js';\nimport * as async from '../../../base/common/async.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { MarkdownString } from '../../../base/common/htmlContent.js';\nimport { dispose } from '../../../base/common/lifecycle.js';\nimport * as platform from '../../../base/common/platform.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../browser/editorExtensions.js';\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\nimport { LinkProviderRegistry } from '../../common/modes.js';\nimport { ClickLinkGesture } from '../goToDefinition/clickLinkGesture.js';\nimport { getLinks } from './getLinks.js';\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\nimport { IOpenerService } from '../../../platform/opener/common/opener.js';\nimport { editorActiveLinkForeground } from '../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\nvar HOVER_MESSAGE_GENERAL_META = new MarkdownString().appendText(platform.isMacintosh ? nls.localize('links.navigate.mac', \"Cmd + click to follow link\") : nls.localize('links.navigate', \"Ctrl + click to follow link\"));\nvar HOVER_MESSAGE_COMMAND_META = new MarkdownString().appendText(platform.isMacintosh ? nls.localize('links.command.mac', \"Cmd + click to execute command\") : nls.localize('links.command', \"Ctrl + click to execute command\"));\nvar HOVER_MESSAGE_GENERAL_ALT = new MarkdownString().appendText(platform.isMacintosh ? nls.localize('links.navigate.al.mac', \"Option + click to follow link\") : nls.localize('links.navigate.al', \"Alt + click to follow link\"));\nvar HOVER_MESSAGE_COMMAND_ALT = new MarkdownString().appendText(platform.isMacintosh ? nls.localize('links.command.al.mac', \"Option + click to execute command\") : nls.localize('links.command.al', \"Alt + click to execute command\"));\nvar decoration = {\n  meta: ModelDecorationOptions.register({\n    stickiness: 1\n    /* NeverGrowsWhenTypingAtEdges */\n    ,\n    collapseOnReplaceEdit: true,\n    inlineClassName: 'detected-link',\n    hoverMessage: HOVER_MESSAGE_GENERAL_META\n  }),\n  metaActive: ModelDecorationOptions.register({\n    stickiness: 1\n    /* NeverGrowsWhenTypingAtEdges */\n    ,\n    collapseOnReplaceEdit: true,\n    inlineClassName: 'detected-link-active',\n    hoverMessage: HOVER_MESSAGE_GENERAL_META\n  }),\n  alt: ModelDecorationOptions.register({\n    stickiness: 1\n    /* NeverGrowsWhenTypingAtEdges */\n    ,\n    collapseOnReplaceEdit: true,\n    inlineClassName: 'detected-link',\n    hoverMessage: HOVER_MESSAGE_GENERAL_ALT\n  }),\n  altActive: ModelDecorationOptions.register({\n    stickiness: 1\n    /* NeverGrowsWhenTypingAtEdges */\n    ,\n    collapseOnReplaceEdit: true,\n    inlineClassName: 'detected-link-active',\n    hoverMessage: HOVER_MESSAGE_GENERAL_ALT\n  }),\n  altCommand: ModelDecorationOptions.register({\n    stickiness: 1\n    /* NeverGrowsWhenTypingAtEdges */\n    ,\n    collapseOnReplaceEdit: true,\n    inlineClassName: 'detected-link',\n    hoverMessage: HOVER_MESSAGE_COMMAND_ALT\n  }),\n  altCommandActive: ModelDecorationOptions.register({\n    stickiness: 1\n    /* NeverGrowsWhenTypingAtEdges */\n    ,\n    collapseOnReplaceEdit: true,\n    inlineClassName: 'detected-link-active',\n    hoverMessage: HOVER_MESSAGE_COMMAND_ALT\n  }),\n  metaCommand: ModelDecorationOptions.register({\n    stickiness: 1\n    /* NeverGrowsWhenTypingAtEdges */\n    ,\n    collapseOnReplaceEdit: true,\n    inlineClassName: 'detected-link',\n    hoverMessage: HOVER_MESSAGE_COMMAND_META\n  }),\n  metaCommandActive: ModelDecorationOptions.register({\n    stickiness: 1\n    /* NeverGrowsWhenTypingAtEdges */\n    ,\n    collapseOnReplaceEdit: true,\n    inlineClassName: 'detected-link-active',\n    hoverMessage: HOVER_MESSAGE_COMMAND_META\n  })\n};\n\nvar LinkOccurrence =\n/** @class */\nfunction () {\n  function LinkOccurrence(link, decorationId) {\n    this.link = link;\n    this.decorationId = decorationId;\n  }\n\n  LinkOccurrence.decoration = function (link, useMetaKey) {\n    return {\n      range: link.range,\n      options: LinkOccurrence._getOptions(link, useMetaKey, false)\n    };\n  };\n\n  LinkOccurrence._getOptions = function (link, useMetaKey, isActive) {\n    if (link.url && /^command:/i.test(link.url.toString())) {\n      if (useMetaKey) {\n        return isActive ? decoration.metaCommandActive : decoration.metaCommand;\n      } else {\n        return isActive ? decoration.altCommandActive : decoration.altCommand;\n      }\n    } else {\n      if (useMetaKey) {\n        return isActive ? decoration.metaActive : decoration.meta;\n      } else {\n        return isActive ? decoration.altActive : decoration.alt;\n      }\n    }\n  };\n\n  LinkOccurrence.prototype.activate = function (changeAccessor, useMetaKey) {\n    changeAccessor.changeDecorationOptions(this.decorationId, LinkOccurrence._getOptions(this.link, useMetaKey, true));\n  };\n\n  LinkOccurrence.prototype.deactivate = function (changeAccessor, useMetaKey) {\n    changeAccessor.changeDecorationOptions(this.decorationId, LinkOccurrence._getOptions(this.link, useMetaKey, false));\n  };\n\n  return LinkOccurrence;\n}();\n\nvar LinkDetector =\n/** @class */\nfunction () {\n  function LinkDetector(editor, openerService, notificationService) {\n    var _this = this;\n\n    this.editor = editor;\n    this.openerService = openerService;\n    this.notificationService = notificationService;\n    this.listenersToRemove = [];\n    var clickLinkGesture = new ClickLinkGesture(editor);\n    this.listenersToRemove.push(clickLinkGesture);\n    this.listenersToRemove.push(clickLinkGesture.onMouseMoveOrRelevantKeyDown(function (_a) {\n      var mouseEvent = _a[0],\n          keyboardEvent = _a[1];\n\n      _this._onEditorMouseMove(mouseEvent, keyboardEvent);\n    }));\n    this.listenersToRemove.push(clickLinkGesture.onExecute(function (e) {\n      _this.onEditorMouseUp(e);\n    }));\n    this.listenersToRemove.push(clickLinkGesture.onCancel(function (e) {\n      _this.cleanUpActiveLinkDecoration();\n    }));\n    this.enabled = editor.getConfiguration().contribInfo.links;\n    this.listenersToRemove.push(editor.onDidChangeConfiguration(function (e) {\n      var enabled = editor.getConfiguration().contribInfo.links;\n\n      if (_this.enabled === enabled) {\n        // No change in our configuration option\n        return;\n      }\n\n      _this.enabled = enabled; // Remove any links (for the getting disabled case)\n\n      _this.updateDecorations([]); // Stop any computation (for the getting disabled case)\n\n\n      _this.stop(); // Start computing (for the getting enabled case)\n\n\n      _this.beginCompute();\n    }));\n    this.listenersToRemove.push(editor.onDidChangeModelContent(function (e) {\n      return _this.onChange();\n    }));\n    this.listenersToRemove.push(editor.onDidChangeModel(function (e) {\n      return _this.onModelChanged();\n    }));\n    this.listenersToRemove.push(editor.onDidChangeModelLanguage(function (e) {\n      return _this.onModelModeChanged();\n    }));\n    this.listenersToRemove.push(LinkProviderRegistry.onDidChange(function (e) {\n      return _this.onModelModeChanged();\n    }));\n    this.timeout = new async.TimeoutTimer();\n    this.computePromise = null;\n    this.activeLinksList = null;\n    this.currentOccurrences = {};\n    this.activeLinkDecorationId = null;\n    this.beginCompute();\n  }\n\n  LinkDetector.get = function (editor) {\n    return editor.getContribution(LinkDetector.ID);\n  };\n\n  LinkDetector.prototype.getId = function () {\n    return LinkDetector.ID;\n  };\n\n  LinkDetector.prototype.onModelChanged = function () {\n    this.currentOccurrences = {};\n    this.activeLinkDecorationId = null;\n    this.stop();\n    this.beginCompute();\n  };\n\n  LinkDetector.prototype.onModelModeChanged = function () {\n    this.stop();\n    this.beginCompute();\n  };\n\n  LinkDetector.prototype.onChange = function () {\n    var _this = this;\n\n    this.timeout.setIfNotSet(function () {\n      return _this.beginCompute();\n    }, LinkDetector.RECOMPUTE_TIME);\n  };\n\n  LinkDetector.prototype.beginCompute = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var model, _a, err_1;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            if (!this.editor.hasModel() || !this.enabled) {\n              return [2\n              /*return*/\n              ];\n            }\n\n            model = this.editor.getModel();\n\n            if (!LinkProviderRegistry.has(model)) {\n              return [2\n              /*return*/\n              ];\n            }\n\n            if (this.activeLinksList) {\n              this.activeLinksList.dispose();\n              this.activeLinksList = null;\n            }\n\n            this.computePromise = async.createCancelablePromise(function (token) {\n              return getLinks(model, token);\n            });\n            _b.label = 1;\n\n          case 1:\n            _b.trys.push([1, 3, 4, 5]);\n\n            _a = this;\n            return [4\n            /*yield*/\n            , this.computePromise];\n\n          case 2:\n            _a.activeLinksList = _b.sent();\n            this.updateDecorations(this.activeLinksList.links);\n            return [3\n            /*break*/\n            , 5];\n\n          case 3:\n            err_1 = _b.sent();\n            onUnexpectedError(err_1);\n            return [3\n            /*break*/\n            , 5];\n\n          case 4:\n            this.computePromise = null;\n            return [7\n            /*endfinally*/\n            ];\n\n          case 5:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  LinkDetector.prototype.updateDecorations = function (links) {\n    var useMetaKey = this.editor.getConfiguration().multiCursorModifier === 'altKey';\n    var oldDecorations = [];\n    var keys = Object.keys(this.currentOccurrences);\n\n    for (var i = 0, len = keys.length; i < len; i++) {\n      var decorationId = keys[i];\n      var occurance = this.currentOccurrences[decorationId];\n      oldDecorations.push(occurance.decorationId);\n    }\n\n    var newDecorations = [];\n\n    if (links) {\n      // Not sure why this is sometimes null\n      for (var _i = 0, links_1 = links; _i < links_1.length; _i++) {\n        var link = links_1[_i];\n        newDecorations.push(LinkOccurrence.decoration(link, useMetaKey));\n      }\n    }\n\n    var decorations = this.editor.deltaDecorations(oldDecorations, newDecorations);\n    this.currentOccurrences = {};\n    this.activeLinkDecorationId = null;\n\n    for (var i = 0, len = decorations.length; i < len; i++) {\n      var occurance = new LinkOccurrence(links[i], decorations[i]);\n      this.currentOccurrences[occurance.decorationId] = occurance;\n    }\n  };\n\n  LinkDetector.prototype._onEditorMouseMove = function (mouseEvent, withKey) {\n    var _this = this;\n\n    var useMetaKey = this.editor.getConfiguration().multiCursorModifier === 'altKey';\n\n    if (this.isEnabled(mouseEvent, withKey)) {\n      this.cleanUpActiveLinkDecoration(); // always remove previous link decoration as their can only be one\n\n      var occurrence_1 = this.getLinkOccurrence(mouseEvent.target.position);\n\n      if (occurrence_1) {\n        this.editor.changeDecorations(function (changeAccessor) {\n          occurrence_1.activate(changeAccessor, useMetaKey);\n          _this.activeLinkDecorationId = occurrence_1.decorationId;\n        });\n      }\n    } else {\n      this.cleanUpActiveLinkDecoration();\n    }\n  };\n\n  LinkDetector.prototype.cleanUpActiveLinkDecoration = function () {\n    var useMetaKey = this.editor.getConfiguration().multiCursorModifier === 'altKey';\n\n    if (this.activeLinkDecorationId) {\n      var occurrence_2 = this.currentOccurrences[this.activeLinkDecorationId];\n\n      if (occurrence_2) {\n        this.editor.changeDecorations(function (changeAccessor) {\n          occurrence_2.deactivate(changeAccessor, useMetaKey);\n        });\n      }\n\n      this.activeLinkDecorationId = null;\n    }\n  };\n\n  LinkDetector.prototype.onEditorMouseUp = function (mouseEvent) {\n    if (!this.isEnabled(mouseEvent)) {\n      return;\n    }\n\n    var occurrence = this.getLinkOccurrence(mouseEvent.target.position);\n\n    if (!occurrence) {\n      return;\n    }\n\n    this.openLinkOccurrence(occurrence, mouseEvent.hasSideBySideModifier);\n  };\n\n  LinkDetector.prototype.openLinkOccurrence = function (occurrence, openToSide) {\n    var _this = this;\n\n    if (!this.openerService) {\n      return;\n    }\n\n    var link = occurrence.link;\n    link.resolve(CancellationToken.None).then(function (uri) {\n      // open the uri\n      return _this.openerService.open(uri, {\n        openToSide: openToSide\n      });\n    }, function (err) {\n      // different error cases\n      if (err === 'invalid') {\n        _this.notificationService.warn(nls.localize('invalid.url', 'Failed to open this link because it is not well-formed: {0}', link.url.toString()));\n      } else if (err === 'missing') {\n        _this.notificationService.warn(nls.localize('missing.url', 'Failed to open this link because its target is missing.'));\n      } else {\n        onUnexpectedError(err);\n      }\n    });\n  };\n\n  LinkDetector.prototype.getLinkOccurrence = function (position) {\n    if (!this.editor.hasModel() || !position) {\n      return null;\n    }\n\n    var decorations = this.editor.getModel().getDecorationsInRange({\n      startLineNumber: position.lineNumber,\n      startColumn: position.column,\n      endLineNumber: position.lineNumber,\n      endColumn: position.column\n    }, 0, true);\n\n    for (var _i = 0, decorations_1 = decorations; _i < decorations_1.length; _i++) {\n      var decoration_1 = decorations_1[_i];\n      var currentOccurrence = this.currentOccurrences[decoration_1.id];\n\n      if (currentOccurrence) {\n        return currentOccurrence;\n      }\n    }\n\n    return null;\n  };\n\n  LinkDetector.prototype.isEnabled = function (mouseEvent, withKey) {\n    return Boolean(mouseEvent.target.type === 6\n    /* CONTENT_TEXT */\n    && (mouseEvent.hasTriggerModifier || withKey && withKey.keyCodeIsTriggerKey));\n  };\n\n  LinkDetector.prototype.stop = function () {\n    this.timeout.cancel();\n\n    if (this.activeLinksList) {\n      this.activeLinksList.dispose();\n    }\n\n    if (this.computePromise) {\n      this.computePromise.cancel();\n      this.computePromise = null;\n    }\n  };\n\n  LinkDetector.prototype.dispose = function () {\n    this.listenersToRemove = dispose(this.listenersToRemove);\n    this.stop();\n    this.timeout.dispose();\n  };\n\n  LinkDetector.ID = 'editor.linkDetector';\n  LinkDetector.RECOMPUTE_TIME = 1000; // ms\n\n  LinkDetector = __decorate([__param(1, IOpenerService), __param(2, INotificationService)], LinkDetector);\n  return LinkDetector;\n}();\n\nvar OpenLinkAction =\n/** @class */\nfunction (_super) {\n  __extends(OpenLinkAction, _super);\n\n  function OpenLinkAction() {\n    return _super.call(this, {\n      id: 'editor.action.openLink',\n      label: nls.localize('label', \"Open Link\"),\n      alias: 'Open Link',\n      precondition: null\n    }) || this;\n  }\n\n  OpenLinkAction.prototype.run = function (accessor, editor) {\n    var linkDetector = LinkDetector.get(editor);\n\n    if (!linkDetector) {\n      return;\n    }\n\n    if (!editor.hasModel()) {\n      return;\n    }\n\n    var selections = editor.getSelections();\n\n    for (var _i = 0, selections_1 = selections; _i < selections_1.length; _i++) {\n      var sel = selections_1[_i];\n      var link = linkDetector.getLinkOccurrence(sel.getEndPosition());\n\n      if (link) {\n        linkDetector.openLinkOccurrence(link, false);\n      }\n    }\n  };\n\n  return OpenLinkAction;\n}(EditorAction);\n\nregisterEditorContribution(LinkDetector);\nregisterEditorAction(OpenLinkAction);\nregisterThemingParticipant(function (theme, collector) {\n  var activeLinkForeground = theme.getColor(editorActiveLinkForeground);\n\n  if (activeLinkForeground) {\n    collector.addRule(\".monaco-editor .detected-link-active { color: \" + activeLinkForeground + \" !important; }\");\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport * as nls from '../../../nls.js';\nimport { RunOnceScheduler } from '../../../base/common/async.js';\nimport { KeyChord } from '../../../base/common/keyCodes.js';\nimport { Disposable, dispose } from '../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../browser/editorExtensions.js';\nimport { CursorMoveCommands } from '../../common/controller/cursorMoveCommands.js';\nimport { Range } from '../../common/core/range.js';\nimport { Selection } from '../../common/core/selection.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport { OverviewRulerLane } from '../../common/model.js';\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\nimport { DocumentHighlightProviderRegistry } from '../../common/modes.js';\nimport { CommonFindController } from '../find/findController.js';\nimport { overviewRulerSelectionHighlightForeground } from '../../../platform/theme/common/colorRegistry.js';\nimport { themeColorFromId } from '../../../platform/theme/common/themeService.js';\n\nvar InsertCursorAbove =\n/** @class */\nfunction (_super) {\n  __extends(InsertCursorAbove, _super);\n\n  function InsertCursorAbove() {\n    return _super.call(this, {\n      id: 'editor.action.insertCursorAbove',\n      label: nls.localize('mutlicursor.insertAbove', \"Add Cursor Above\"),\n      alias: 'Add Cursor Above',\n      precondition: null,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048\n        /* CtrlCmd */\n        | 512\n        /* Alt */\n        | 16\n        /* UpArrow */\n        ,\n        linux: {\n          primary: 1024\n          /* Shift */\n          | 512\n          /* Alt */\n          | 16\n          /* UpArrow */\n          ,\n          secondary: [2048\n          /* CtrlCmd */\n          | 1024\n          /* Shift */\n          | 16\n          /* UpArrow */\n          ]\n        },\n        weight: 100\n        /* EditorContrib */\n\n      },\n      menubarOpts: {\n        menuId: 22\n        /* MenubarSelectionMenu */\n        ,\n        group: '3_multi',\n        title: nls.localize({\n          key: 'miInsertCursorAbove',\n          comment: ['&& denotes a mnemonic']\n        }, \"&&Add Cursor Above\"),\n        order: 2\n      }\n    }) || this;\n  }\n\n  InsertCursorAbove.prototype.run = function (accessor, editor, args) {\n    if (!editor.hasModel()) {\n      return;\n    }\n\n    var useLogicalLine = args && args.logicalLine === true;\n\n    var cursors = editor._getCursors();\n\n    var context = cursors.context;\n\n    if (context.config.readOnly) {\n      return;\n    }\n\n    context.model.pushStackElement();\n    cursors.setStates(args.source, 3\n    /* Explicit */\n    , CursorMoveCommands.addCursorUp(context, cursors.getAll(), useLogicalLine));\n    cursors.reveal(true, 1\n    /* TopMost */\n    , 0\n    /* Smooth */\n    );\n  };\n\n  return InsertCursorAbove;\n}(EditorAction);\n\nexport { InsertCursorAbove };\n\nvar InsertCursorBelow =\n/** @class */\nfunction (_super) {\n  __extends(InsertCursorBelow, _super);\n\n  function InsertCursorBelow() {\n    return _super.call(this, {\n      id: 'editor.action.insertCursorBelow',\n      label: nls.localize('mutlicursor.insertBelow', \"Add Cursor Below\"),\n      alias: 'Add Cursor Below',\n      precondition: null,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048\n        /* CtrlCmd */\n        | 512\n        /* Alt */\n        | 18\n        /* DownArrow */\n        ,\n        linux: {\n          primary: 1024\n          /* Shift */\n          | 512\n          /* Alt */\n          | 18\n          /* DownArrow */\n          ,\n          secondary: [2048\n          /* CtrlCmd */\n          | 1024\n          /* Shift */\n          | 18\n          /* DownArrow */\n          ]\n        },\n        weight: 100\n        /* EditorContrib */\n\n      },\n      menubarOpts: {\n        menuId: 22\n        /* MenubarSelectionMenu */\n        ,\n        group: '3_multi',\n        title: nls.localize({\n          key: 'miInsertCursorBelow',\n          comment: ['&& denotes a mnemonic']\n        }, \"A&&dd Cursor Below\"),\n        order: 3\n      }\n    }) || this;\n  }\n\n  InsertCursorBelow.prototype.run = function (accessor, editor, args) {\n    if (!editor.hasModel()) {\n      return;\n    }\n\n    var useLogicalLine = args && args.logicalLine === true;\n\n    var cursors = editor._getCursors();\n\n    var context = cursors.context;\n\n    if (context.config.readOnly) {\n      return;\n    }\n\n    context.model.pushStackElement();\n    cursors.setStates(args.source, 3\n    /* Explicit */\n    , CursorMoveCommands.addCursorDown(context, cursors.getAll(), useLogicalLine));\n    cursors.reveal(true, 2\n    /* BottomMost */\n    , 0\n    /* Smooth */\n    );\n  };\n\n  return InsertCursorBelow;\n}(EditorAction);\n\nexport { InsertCursorBelow };\n\nvar InsertCursorAtEndOfEachLineSelected =\n/** @class */\nfunction (_super) {\n  __extends(InsertCursorAtEndOfEachLineSelected, _super);\n\n  function InsertCursorAtEndOfEachLineSelected() {\n    return _super.call(this, {\n      id: 'editor.action.insertCursorAtEndOfEachLineSelected',\n      label: nls.localize('mutlicursor.insertAtEndOfEachLineSelected', \"Add Cursors to Line Ends\"),\n      alias: 'Add Cursors to Line Ends',\n      precondition: null,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 1024\n        /* Shift */\n        | 512\n        /* Alt */\n        | 39\n        /* KEY_I */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      },\n      menubarOpts: {\n        menuId: 22\n        /* MenubarSelectionMenu */\n        ,\n        group: '3_multi',\n        title: nls.localize({\n          key: 'miInsertCursorAtEndOfEachLineSelected',\n          comment: ['&& denotes a mnemonic']\n        }, \"Add C&&ursors to Line Ends\"),\n        order: 4\n      }\n    }) || this;\n  }\n\n  InsertCursorAtEndOfEachLineSelected.prototype.getCursorsForSelection = function (selection, model, result) {\n    if (selection.isEmpty()) {\n      return;\n    }\n\n    for (var i = selection.startLineNumber; i < selection.endLineNumber; i++) {\n      var currentLineMaxColumn = model.getLineMaxColumn(i);\n      result.push(new Selection(i, currentLineMaxColumn, i, currentLineMaxColumn));\n    }\n\n    if (selection.endColumn > 1) {\n      result.push(new Selection(selection.endLineNumber, selection.endColumn, selection.endLineNumber, selection.endColumn));\n    }\n  };\n\n  InsertCursorAtEndOfEachLineSelected.prototype.run = function (accessor, editor) {\n    var _this = this;\n\n    if (!editor.hasModel()) {\n      return;\n    }\n\n    var model = editor.getModel();\n    var selections = editor.getSelections();\n    var newSelections = [];\n    selections.forEach(function (sel) {\n      return _this.getCursorsForSelection(sel, model, newSelections);\n    });\n\n    if (newSelections.length > 0) {\n      editor.setSelections(newSelections);\n    }\n  };\n\n  return InsertCursorAtEndOfEachLineSelected;\n}(EditorAction);\n\nvar InsertCursorAtEndOfLineSelected =\n/** @class */\nfunction (_super) {\n  __extends(InsertCursorAtEndOfLineSelected, _super);\n\n  function InsertCursorAtEndOfLineSelected() {\n    return _super.call(this, {\n      id: 'editor.action.addCursorsToBottom',\n      label: nls.localize('mutlicursor.addCursorsToBottom', \"Add Cursors To Bottom\"),\n      alias: 'Add Cursors To Bottom',\n      precondition: null\n    }) || this;\n  }\n\n  InsertCursorAtEndOfLineSelected.prototype.run = function (accessor, editor) {\n    if (!editor.hasModel()) {\n      return;\n    }\n\n    var selections = editor.getSelections();\n    var lineCount = editor.getModel().getLineCount();\n    var newSelections = [];\n\n    for (var i = selections[0].startLineNumber; i <= lineCount; i++) {\n      newSelections.push(new Selection(i, selections[0].startColumn, i, selections[0].endColumn));\n    }\n\n    if (newSelections.length > 0) {\n      editor.setSelections(newSelections);\n    }\n  };\n\n  return InsertCursorAtEndOfLineSelected;\n}(EditorAction);\n\nvar InsertCursorAtTopOfLineSelected =\n/** @class */\nfunction (_super) {\n  __extends(InsertCursorAtTopOfLineSelected, _super);\n\n  function InsertCursorAtTopOfLineSelected() {\n    return _super.call(this, {\n      id: 'editor.action.addCursorsToTop',\n      label: nls.localize('mutlicursor.addCursorsToTop', \"Add Cursors To Top\"),\n      alias: 'Add Cursors To Top',\n      precondition: null\n    }) || this;\n  }\n\n  InsertCursorAtTopOfLineSelected.prototype.run = function (accessor, editor) {\n    if (!editor.hasModel()) {\n      return;\n    }\n\n    var selections = editor.getSelections();\n    var newSelections = [];\n\n    for (var i = selections[0].startLineNumber; i >= 1; i--) {\n      newSelections.push(new Selection(i, selections[0].startColumn, i, selections[0].endColumn));\n    }\n\n    if (newSelections.length > 0) {\n      editor.setSelections(newSelections);\n    }\n  };\n\n  return InsertCursorAtTopOfLineSelected;\n}(EditorAction);\n\nvar MultiCursorSessionResult =\n/** @class */\nfunction () {\n  function MultiCursorSessionResult(selections, revealRange, revealScrollType) {\n    this.selections = selections;\n    this.revealRange = revealRange;\n    this.revealScrollType = revealScrollType;\n  }\n\n  return MultiCursorSessionResult;\n}();\n\nexport { MultiCursorSessionResult };\n\nvar MultiCursorSession =\n/** @class */\nfunction () {\n  function MultiCursorSession(_editor, findController, isDisconnectedFromFindController, searchText, wholeWord, matchCase, currentMatch) {\n    this._editor = _editor;\n    this.findController = findController;\n    this.isDisconnectedFromFindController = isDisconnectedFromFindController;\n    this.searchText = searchText;\n    this.wholeWord = wholeWord;\n    this.matchCase = matchCase;\n    this.currentMatch = currentMatch;\n  }\n\n  MultiCursorSession.create = function (editor, findController) {\n    if (!editor.hasModel()) {\n      return null;\n    }\n\n    var findState = findController.getState(); // Find widget owns entirely what we search for if:\n    //  - focus is not in the editor (i.e. it is in the find widget)\n    //  - and the search widget is visible\n    //  - and the search string is non-empty\n\n    if (!editor.hasTextFocus() && findState.isRevealed && findState.searchString.length > 0) {\n      // Find widget owns what is searched for\n      return new MultiCursorSession(editor, findController, false, findState.searchString, findState.wholeWord, findState.matchCase, null);\n    } // Otherwise, the selection gives the search text, and the find widget gives the search settings\n    // The exception is the find state disassociation case: when beginning with a single, collapsed selection\n\n\n    var isDisconnectedFromFindController = false;\n    var wholeWord;\n    var matchCase;\n    var selections = editor.getSelections();\n\n    if (selections.length === 1 && selections[0].isEmpty()) {\n      isDisconnectedFromFindController = true;\n      wholeWord = true;\n      matchCase = true;\n    } else {\n      wholeWord = findState.wholeWord;\n      matchCase = findState.matchCase;\n    } // Selection owns what is searched for\n\n\n    var s = editor.getSelection();\n    var searchText;\n    var currentMatch = null;\n\n    if (s.isEmpty()) {\n      // selection is empty => expand to current word\n      var word = editor.getModel().getWordAtPosition(s.getStartPosition());\n\n      if (!word) {\n        return null;\n      }\n\n      searchText = word.word;\n      currentMatch = new Selection(s.startLineNumber, word.startColumn, s.startLineNumber, word.endColumn);\n    } else {\n      searchText = editor.getModel().getValueInRange(s).replace(/\\r\\n/g, '\\n');\n    }\n\n    return new MultiCursorSession(editor, findController, isDisconnectedFromFindController, searchText, wholeWord, matchCase, currentMatch);\n  };\n\n  MultiCursorSession.prototype.addSelectionToNextFindMatch = function () {\n    if (!this._editor.hasModel()) {\n      return null;\n    }\n\n    var nextMatch = this._getNextMatch();\n\n    if (!nextMatch) {\n      return null;\n    }\n\n    var allSelections = this._editor.getSelections();\n\n    return new MultiCursorSessionResult(allSelections.concat(nextMatch), nextMatch, 0\n    /* Smooth */\n    );\n  };\n\n  MultiCursorSession.prototype.moveSelectionToNextFindMatch = function () {\n    if (!this._editor.hasModel()) {\n      return null;\n    }\n\n    var nextMatch = this._getNextMatch();\n\n    if (!nextMatch) {\n      return null;\n    }\n\n    var allSelections = this._editor.getSelections();\n\n    return new MultiCursorSessionResult(allSelections.slice(0, allSelections.length - 1).concat(nextMatch), nextMatch, 0\n    /* Smooth */\n    );\n  };\n\n  MultiCursorSession.prototype._getNextMatch = function () {\n    if (!this._editor.hasModel()) {\n      return null;\n    }\n\n    if (this.currentMatch) {\n      var result = this.currentMatch;\n      this.currentMatch = null;\n      return result;\n    }\n\n    this.findController.highlightFindOptions();\n\n    var allSelections = this._editor.getSelections();\n\n    var lastAddedSelection = allSelections[allSelections.length - 1];\n\n    var nextMatch = this._editor.getModel().findNextMatch(this.searchText, lastAddedSelection.getEndPosition(), false, this.matchCase, this.wholeWord ? this._editor.getConfiguration().wordSeparators : null, false);\n\n    if (!nextMatch) {\n      return null;\n    }\n\n    return new Selection(nextMatch.range.startLineNumber, nextMatch.range.startColumn, nextMatch.range.endLineNumber, nextMatch.range.endColumn);\n  };\n\n  MultiCursorSession.prototype.addSelectionToPreviousFindMatch = function () {\n    if (!this._editor.hasModel()) {\n      return null;\n    }\n\n    var previousMatch = this._getPreviousMatch();\n\n    if (!previousMatch) {\n      return null;\n    }\n\n    var allSelections = this._editor.getSelections();\n\n    return new MultiCursorSessionResult(allSelections.concat(previousMatch), previousMatch, 0\n    /* Smooth */\n    );\n  };\n\n  MultiCursorSession.prototype.moveSelectionToPreviousFindMatch = function () {\n    if (!this._editor.hasModel()) {\n      return null;\n    }\n\n    var previousMatch = this._getPreviousMatch();\n\n    if (!previousMatch) {\n      return null;\n    }\n\n    var allSelections = this._editor.getSelections();\n\n    return new MultiCursorSessionResult(allSelections.slice(0, allSelections.length - 1).concat(previousMatch), previousMatch, 0\n    /* Smooth */\n    );\n  };\n\n  MultiCursorSession.prototype._getPreviousMatch = function () {\n    if (!this._editor.hasModel()) {\n      return null;\n    }\n\n    if (this.currentMatch) {\n      var result = this.currentMatch;\n      this.currentMatch = null;\n      return result;\n    }\n\n    this.findController.highlightFindOptions();\n\n    var allSelections = this._editor.getSelections();\n\n    var lastAddedSelection = allSelections[allSelections.length - 1];\n\n    var previousMatch = this._editor.getModel().findPreviousMatch(this.searchText, lastAddedSelection.getStartPosition(), false, this.matchCase, this.wholeWord ? this._editor.getConfiguration().wordSeparators : null, false);\n\n    if (!previousMatch) {\n      return null;\n    }\n\n    return new Selection(previousMatch.range.startLineNumber, previousMatch.range.startColumn, previousMatch.range.endLineNumber, previousMatch.range.endColumn);\n  };\n\n  MultiCursorSession.prototype.selectAll = function () {\n    if (!this._editor.hasModel()) {\n      return [];\n    }\n\n    this.findController.highlightFindOptions();\n    return this._editor.getModel().findMatches(this.searchText, true, false, this.matchCase, this.wholeWord ? this._editor.getConfiguration().wordSeparators : null, false, 1073741824\n    /* MAX_SAFE_SMALL_INTEGER */\n    );\n  };\n\n  return MultiCursorSession;\n}();\n\nexport { MultiCursorSession };\n\nvar MultiCursorSelectionController =\n/** @class */\nfunction (_super) {\n  __extends(MultiCursorSelectionController, _super);\n\n  function MultiCursorSelectionController(editor) {\n    var _this = _super.call(this) || this;\n\n    _this._editor = editor;\n    _this._ignoreSelectionChange = false;\n    _this._session = null;\n    _this._sessionDispose = [];\n    return _this;\n  }\n\n  MultiCursorSelectionController.get = function (editor) {\n    return editor.getContribution(MultiCursorSelectionController.ID);\n  };\n\n  MultiCursorSelectionController.prototype.dispose = function () {\n    this._endSession();\n\n    _super.prototype.dispose.call(this);\n  };\n\n  MultiCursorSelectionController.prototype.getId = function () {\n    return MultiCursorSelectionController.ID;\n  };\n\n  MultiCursorSelectionController.prototype._beginSessionIfNeeded = function (findController) {\n    var _this = this;\n\n    if (!this._session) {\n      // Create a new session\n      var session = MultiCursorSession.create(this._editor, findController);\n\n      if (!session) {\n        return;\n      }\n\n      this._session = session;\n      var newState = {\n        searchString: this._session.searchText\n      };\n\n      if (this._session.isDisconnectedFromFindController) {\n        newState.wholeWordOverride = 1\n        /* True */\n        ;\n        newState.matchCaseOverride = 1\n        /* True */\n        ;\n        newState.isRegexOverride = 2\n        /* False */\n        ;\n      }\n\n      findController.getState().change(newState, false);\n      this._sessionDispose = [this._editor.onDidChangeCursorSelection(function (e) {\n        if (_this._ignoreSelectionChange) {\n          return;\n        }\n\n        _this._endSession();\n      }), this._editor.onDidBlurEditorText(function () {\n        _this._endSession();\n      }), findController.getState().onFindReplaceStateChange(function (e) {\n        if (e.matchCase || e.wholeWord) {\n          _this._endSession();\n        }\n      })];\n    }\n  };\n\n  MultiCursorSelectionController.prototype._endSession = function () {\n    this._sessionDispose = dispose(this._sessionDispose);\n\n    if (this._session && this._session.isDisconnectedFromFindController) {\n      var newState = {\n        wholeWordOverride: 0\n        /* NotSet */\n        ,\n        matchCaseOverride: 0\n        /* NotSet */\n        ,\n        isRegexOverride: 0\n        /* NotSet */\n\n      };\n\n      this._session.findController.getState().change(newState, false);\n    }\n\n    this._session = null;\n  };\n\n  MultiCursorSelectionController.prototype._setSelections = function (selections) {\n    this._ignoreSelectionChange = true;\n\n    this._editor.setSelections(selections);\n\n    this._ignoreSelectionChange = false;\n  };\n\n  MultiCursorSelectionController.prototype._expandEmptyToWord = function (model, selection) {\n    if (!selection.isEmpty()) {\n      return selection;\n    }\n\n    var word = model.getWordAtPosition(selection.getStartPosition());\n\n    if (!word) {\n      return selection;\n    }\n\n    return new Selection(selection.startLineNumber, word.startColumn, selection.startLineNumber, word.endColumn);\n  };\n\n  MultiCursorSelectionController.prototype._applySessionResult = function (result) {\n    if (!result) {\n      return;\n    }\n\n    this._setSelections(result.selections);\n\n    if (result.revealRange) {\n      this._editor.revealRangeInCenterIfOutsideViewport(result.revealRange, result.revealScrollType);\n    }\n  };\n\n  MultiCursorSelectionController.prototype.getSession = function (findController) {\n    return this._session;\n  };\n\n  MultiCursorSelectionController.prototype.addSelectionToNextFindMatch = function (findController) {\n    if (!this._editor.hasModel()) {\n      return;\n    }\n\n    if (!this._session) {\n      // If there are multiple cursors, handle the case where they do not all select the same text.\n      var allSelections = this._editor.getSelections();\n\n      if (allSelections.length > 1) {\n        var findState = findController.getState();\n        var matchCase = findState.matchCase;\n        var selectionsContainSameText = modelRangesContainSameText(this._editor.getModel(), allSelections, matchCase);\n\n        if (!selectionsContainSameText) {\n          var model = this._editor.getModel();\n\n          var resultingSelections = [];\n\n          for (var i = 0, len = allSelections.length; i < len; i++) {\n            resultingSelections[i] = this._expandEmptyToWord(model, allSelections[i]);\n          }\n\n          this._editor.setSelections(resultingSelections);\n\n          return;\n        }\n      }\n    }\n\n    this._beginSessionIfNeeded(findController);\n\n    if (this._session) {\n      this._applySessionResult(this._session.addSelectionToNextFindMatch());\n    }\n  };\n\n  MultiCursorSelectionController.prototype.addSelectionToPreviousFindMatch = function (findController) {\n    this._beginSessionIfNeeded(findController);\n\n    if (this._session) {\n      this._applySessionResult(this._session.addSelectionToPreviousFindMatch());\n    }\n  };\n\n  MultiCursorSelectionController.prototype.moveSelectionToNextFindMatch = function (findController) {\n    this._beginSessionIfNeeded(findController);\n\n    if (this._session) {\n      this._applySessionResult(this._session.moveSelectionToNextFindMatch());\n    }\n  };\n\n  MultiCursorSelectionController.prototype.moveSelectionToPreviousFindMatch = function (findController) {\n    this._beginSessionIfNeeded(findController);\n\n    if (this._session) {\n      this._applySessionResult(this._session.moveSelectionToPreviousFindMatch());\n    }\n  };\n\n  MultiCursorSelectionController.prototype.selectAll = function (findController) {\n    if (!this._editor.hasModel()) {\n      return;\n    }\n\n    var matches = null;\n    var findState = findController.getState(); // Special case: find widget owns entirely what we search for if:\n    // - focus is not in the editor (i.e. it is in the find widget)\n    // - and the search widget is visible\n    // - and the search string is non-empty\n    // - and we're searching for a regex\n\n    if (findState.isRevealed && findState.searchString.length > 0 && findState.isRegex) {\n      matches = this._editor.getModel().findMatches(findState.searchString, true, findState.isRegex, findState.matchCase, findState.wholeWord ? this._editor.getConfiguration().wordSeparators : null, false, 1073741824\n      /* MAX_SAFE_SMALL_INTEGER */\n      );\n    } else {\n      this._beginSessionIfNeeded(findController);\n\n      if (!this._session) {\n        return;\n      }\n\n      matches = this._session.selectAll();\n    }\n\n    if (matches.length > 0) {\n      var editorSelection = this._editor.getSelection(); // Have the primary cursor remain the one where the action was invoked\n\n\n      for (var i = 0, len = matches.length; i < len; i++) {\n        var match = matches[i];\n        var intersection = match.range.intersectRanges(editorSelection);\n\n        if (intersection) {\n          // bingo!\n          matches[i] = matches[0];\n          matches[0] = match;\n          break;\n        }\n      }\n\n      this._setSelections(matches.map(function (m) {\n        return new Selection(m.range.startLineNumber, m.range.startColumn, m.range.endLineNumber, m.range.endColumn);\n      }));\n    }\n  };\n\n  MultiCursorSelectionController.ID = 'editor.contrib.multiCursorController';\n  return MultiCursorSelectionController;\n}(Disposable);\n\nexport { MultiCursorSelectionController };\n\nvar MultiCursorSelectionControllerAction =\n/** @class */\nfunction (_super) {\n  __extends(MultiCursorSelectionControllerAction, _super);\n\n  function MultiCursorSelectionControllerAction() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  MultiCursorSelectionControllerAction.prototype.run = function (accessor, editor) {\n    var multiCursorController = MultiCursorSelectionController.get(editor);\n\n    if (!multiCursorController) {\n      return;\n    }\n\n    var findController = CommonFindController.get(editor);\n\n    if (!findController) {\n      return;\n    }\n\n    this._run(multiCursorController, findController);\n  };\n\n  return MultiCursorSelectionControllerAction;\n}(EditorAction);\n\nexport { MultiCursorSelectionControllerAction };\n\nvar AddSelectionToNextFindMatchAction =\n/** @class */\nfunction (_super) {\n  __extends(AddSelectionToNextFindMatchAction, _super);\n\n  function AddSelectionToNextFindMatchAction() {\n    return _super.call(this, {\n      id: 'editor.action.addSelectionToNextFindMatch',\n      label: nls.localize('addSelectionToNextFindMatch', \"Add Selection To Next Find Match\"),\n      alias: 'Add Selection To Next Find Match',\n      precondition: null,\n      kbOpts: {\n        kbExpr: EditorContextKeys.focus,\n        primary: 2048\n        /* CtrlCmd */\n        | 34\n        /* KEY_D */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      },\n      menubarOpts: {\n        menuId: 22\n        /* MenubarSelectionMenu */\n        ,\n        group: '3_multi',\n        title: nls.localize({\n          key: 'miAddSelectionToNextFindMatch',\n          comment: ['&& denotes a mnemonic']\n        }, \"Add &&Next Occurrence\"),\n        order: 5\n      }\n    }) || this;\n  }\n\n  AddSelectionToNextFindMatchAction.prototype._run = function (multiCursorController, findController) {\n    multiCursorController.addSelectionToNextFindMatch(findController);\n  };\n\n  return AddSelectionToNextFindMatchAction;\n}(MultiCursorSelectionControllerAction);\n\nexport { AddSelectionToNextFindMatchAction };\n\nvar AddSelectionToPreviousFindMatchAction =\n/** @class */\nfunction (_super) {\n  __extends(AddSelectionToPreviousFindMatchAction, _super);\n\n  function AddSelectionToPreviousFindMatchAction() {\n    return _super.call(this, {\n      id: 'editor.action.addSelectionToPreviousFindMatch',\n      label: nls.localize('addSelectionToPreviousFindMatch', \"Add Selection To Previous Find Match\"),\n      alias: 'Add Selection To Previous Find Match',\n      precondition: null,\n      menubarOpts: {\n        menuId: 22\n        /* MenubarSelectionMenu */\n        ,\n        group: '3_multi',\n        title: nls.localize({\n          key: 'miAddSelectionToPreviousFindMatch',\n          comment: ['&& denotes a mnemonic']\n        }, \"Add P&&revious Occurrence\"),\n        order: 6\n      }\n    }) || this;\n  }\n\n  AddSelectionToPreviousFindMatchAction.prototype._run = function (multiCursorController, findController) {\n    multiCursorController.addSelectionToPreviousFindMatch(findController);\n  };\n\n  return AddSelectionToPreviousFindMatchAction;\n}(MultiCursorSelectionControllerAction);\n\nexport { AddSelectionToPreviousFindMatchAction };\n\nvar MoveSelectionToNextFindMatchAction =\n/** @class */\nfunction (_super) {\n  __extends(MoveSelectionToNextFindMatchAction, _super);\n\n  function MoveSelectionToNextFindMatchAction() {\n    return _super.call(this, {\n      id: 'editor.action.moveSelectionToNextFindMatch',\n      label: nls.localize('moveSelectionToNextFindMatch', \"Move Last Selection To Next Find Match\"),\n      alias: 'Move Last Selection To Next Find Match',\n      precondition: null,\n      kbOpts: {\n        kbExpr: EditorContextKeys.focus,\n        primary: KeyChord(2048\n        /* CtrlCmd */\n        | 41\n        /* KEY_K */\n        , 2048\n        /* CtrlCmd */\n        | 34\n        /* KEY_D */\n        ),\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  MoveSelectionToNextFindMatchAction.prototype._run = function (multiCursorController, findController) {\n    multiCursorController.moveSelectionToNextFindMatch(findController);\n  };\n\n  return MoveSelectionToNextFindMatchAction;\n}(MultiCursorSelectionControllerAction);\n\nexport { MoveSelectionToNextFindMatchAction };\n\nvar MoveSelectionToPreviousFindMatchAction =\n/** @class */\nfunction (_super) {\n  __extends(MoveSelectionToPreviousFindMatchAction, _super);\n\n  function MoveSelectionToPreviousFindMatchAction() {\n    return _super.call(this, {\n      id: 'editor.action.moveSelectionToPreviousFindMatch',\n      label: nls.localize('moveSelectionToPreviousFindMatch', \"Move Last Selection To Previous Find Match\"),\n      alias: 'Move Last Selection To Previous Find Match',\n      precondition: null\n    }) || this;\n  }\n\n  MoveSelectionToPreviousFindMatchAction.prototype._run = function (multiCursorController, findController) {\n    multiCursorController.moveSelectionToPreviousFindMatch(findController);\n  };\n\n  return MoveSelectionToPreviousFindMatchAction;\n}(MultiCursorSelectionControllerAction);\n\nexport { MoveSelectionToPreviousFindMatchAction };\n\nvar SelectHighlightsAction =\n/** @class */\nfunction (_super) {\n  __extends(SelectHighlightsAction, _super);\n\n  function SelectHighlightsAction() {\n    return _super.call(this, {\n      id: 'editor.action.selectHighlights',\n      label: nls.localize('selectAllOccurrencesOfFindMatch', \"Select All Occurrences of Find Match\"),\n      alias: 'Select All Occurrences of Find Match',\n      precondition: null,\n      kbOpts: {\n        kbExpr: EditorContextKeys.focus,\n        primary: 2048\n        /* CtrlCmd */\n        | 1024\n        /* Shift */\n        | 42\n        /* KEY_L */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      },\n      menubarOpts: {\n        menuId: 22\n        /* MenubarSelectionMenu */\n        ,\n        group: '3_multi',\n        title: nls.localize({\n          key: 'miSelectHighlights',\n          comment: ['&& denotes a mnemonic']\n        }, \"Select All &&Occurrences\"),\n        order: 7\n      }\n    }) || this;\n  }\n\n  SelectHighlightsAction.prototype._run = function (multiCursorController, findController) {\n    multiCursorController.selectAll(findController);\n  };\n\n  return SelectHighlightsAction;\n}(MultiCursorSelectionControllerAction);\n\nexport { SelectHighlightsAction };\n\nvar CompatChangeAll =\n/** @class */\nfunction (_super) {\n  __extends(CompatChangeAll, _super);\n\n  function CompatChangeAll() {\n    return _super.call(this, {\n      id: 'editor.action.changeAll',\n      label: nls.localize('changeAll.label', \"Change All Occurrences\"),\n      alias: 'Change All Occurrences',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048\n        /* CtrlCmd */\n        | 60\n        /* F2 */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      },\n      menuOpts: {\n        group: '1_modification',\n        order: 1.2\n      }\n    }) || this;\n  }\n\n  CompatChangeAll.prototype._run = function (multiCursorController, findController) {\n    multiCursorController.selectAll(findController);\n  };\n\n  return CompatChangeAll;\n}(MultiCursorSelectionControllerAction);\n\nexport { CompatChangeAll };\n\nvar SelectionHighlighterState =\n/** @class */\nfunction () {\n  function SelectionHighlighterState(searchText, matchCase, wordSeparators) {\n    this.searchText = searchText;\n    this.matchCase = matchCase;\n    this.wordSeparators = wordSeparators;\n  }\n  /**\n   * Everything equals except for `lastWordUnderCursor`\n   */\n\n\n  SelectionHighlighterState.softEquals = function (a, b) {\n    if (!a && !b) {\n      return true;\n    }\n\n    if (!a || !b) {\n      return false;\n    }\n\n    return a.searchText === b.searchText && a.matchCase === b.matchCase && a.wordSeparators === b.wordSeparators;\n  };\n\n  return SelectionHighlighterState;\n}();\n\nvar SelectionHighlighter =\n/** @class */\nfunction (_super) {\n  __extends(SelectionHighlighter, _super);\n\n  function SelectionHighlighter(editor) {\n    var _this = _super.call(this) || this;\n\n    _this.editor = editor;\n    _this._isEnabled = editor.getConfiguration().contribInfo.selectionHighlight;\n    _this.decorations = [];\n    _this.updateSoon = _this._register(new RunOnceScheduler(function () {\n      return _this._update();\n    }, 300));\n    _this.state = null;\n\n    _this._register(editor.onDidChangeConfiguration(function (e) {\n      _this._isEnabled = editor.getConfiguration().contribInfo.selectionHighlight;\n    }));\n\n    _this._register(editor.onDidChangeCursorSelection(function (e) {\n      if (!_this._isEnabled) {\n        // Early exit if nothing needs to be done!\n        // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n        return;\n      }\n\n      if (e.selection.isEmpty()) {\n        if (e.reason === 3\n        /* Explicit */\n        ) {\n            if (_this.state) {\n              // no longer valid\n              _this._setState(null);\n            }\n\n            _this.updateSoon.schedule();\n          } else {\n          _this._setState(null);\n        }\n      } else {\n        _this._update();\n      }\n    }));\n\n    _this._register(editor.onDidChangeModel(function (e) {\n      _this._setState(null);\n    }));\n\n    _this._register(CommonFindController.get(editor).getState().onFindReplaceStateChange(function (e) {\n      _this._update();\n    }));\n\n    return _this;\n  }\n\n  SelectionHighlighter.prototype.getId = function () {\n    return SelectionHighlighter.ID;\n  };\n\n  SelectionHighlighter.prototype._update = function () {\n    this._setState(SelectionHighlighter._createState(this._isEnabled, this.editor));\n  };\n\n  SelectionHighlighter._createState = function (isEnabled, editor) {\n    if (!isEnabled) {\n      return null;\n    }\n\n    if (!editor.hasModel()) {\n      return null;\n    }\n\n    var s = editor.getSelection();\n\n    if (s.startLineNumber !== s.endLineNumber) {\n      // multiline forbidden for perf reasons\n      return null;\n    }\n\n    var multiCursorController = MultiCursorSelectionController.get(editor);\n\n    if (!multiCursorController) {\n      return null;\n    }\n\n    var findController = CommonFindController.get(editor);\n\n    if (!findController) {\n      return null;\n    }\n\n    var r = multiCursorController.getSession(findController);\n\n    if (!r) {\n      var allSelections = editor.getSelections();\n\n      if (allSelections.length > 1) {\n        var findState_1 = findController.getState();\n        var matchCase = findState_1.matchCase;\n        var selectionsContainSameText = modelRangesContainSameText(editor.getModel(), allSelections, matchCase);\n\n        if (!selectionsContainSameText) {\n          return null;\n        }\n      }\n\n      r = MultiCursorSession.create(editor, findController);\n    }\n\n    if (!r) {\n      return null;\n    }\n\n    if (r.currentMatch) {\n      // This is an empty selection\n      // Do not interfere with semantic word highlighting in the no selection case\n      return null;\n    }\n\n    if (/^[ \\t]+$/.test(r.searchText)) {\n      // whitespace only selection\n      return null;\n    }\n\n    if (r.searchText.length > 200) {\n      // very long selection\n      return null;\n    } // TODO: better handling of this case\n\n\n    var findState = findController.getState();\n    var caseSensitive = findState.matchCase; // Return early if the find widget shows the exact same matches\n\n    if (findState.isRevealed) {\n      var findStateSearchString = findState.searchString;\n\n      if (!caseSensitive) {\n        findStateSearchString = findStateSearchString.toLowerCase();\n      }\n\n      var mySearchString = r.searchText;\n\n      if (!caseSensitive) {\n        mySearchString = mySearchString.toLowerCase();\n      }\n\n      if (findStateSearchString === mySearchString && r.matchCase === findState.matchCase && r.wholeWord === findState.wholeWord && !findState.isRegex) {\n        return null;\n      }\n    }\n\n    return new SelectionHighlighterState(r.searchText, r.matchCase, r.wholeWord ? editor.getConfiguration().wordSeparators : null);\n  };\n\n  SelectionHighlighter.prototype._setState = function (state) {\n    if (SelectionHighlighterState.softEquals(this.state, state)) {\n      this.state = state;\n      return;\n    }\n\n    this.state = state;\n\n    if (!this.state) {\n      this.decorations = this.editor.deltaDecorations(this.decorations, []);\n      return;\n    }\n\n    if (!this.editor.hasModel()) {\n      return;\n    }\n\n    var model = this.editor.getModel();\n\n    if (model.isTooLargeForTokenization()) {\n      // the file is too large, so searching word under cursor in the whole document takes is blocking the UI.\n      return;\n    }\n\n    var hasFindOccurrences = DocumentHighlightProviderRegistry.has(model);\n    var allMatches = model.findMatches(this.state.searchText, true, false, this.state.matchCase, this.state.wordSeparators, false).map(function (m) {\n      return m.range;\n    });\n    allMatches.sort(Range.compareRangesUsingStarts);\n    var selections = this.editor.getSelections();\n    selections.sort(Range.compareRangesUsingStarts); // do not overlap with selection (issue #64 and #512)\n\n    var matches = [];\n\n    for (var i = 0, j = 0, len = allMatches.length, lenJ = selections.length; i < len;) {\n      var match = allMatches[i];\n\n      if (j >= lenJ) {\n        // finished all editor selections\n        matches.push(match);\n        i++;\n      } else {\n        var cmp = Range.compareRangesUsingStarts(match, selections[j]);\n\n        if (cmp < 0) {\n          // match is before sel\n          if (selections[j].isEmpty() || !Range.areIntersecting(match, selections[j])) {\n            matches.push(match);\n          }\n\n          i++;\n        } else if (cmp > 0) {\n          // sel is before match\n          j++;\n        } else {\n          // sel is equal to match\n          i++;\n          j++;\n        }\n      }\n    }\n\n    var decorations = matches.map(function (r) {\n      return {\n        range: r,\n        // Show in overviewRuler only if model has no semantic highlighting\n        options: hasFindOccurrences ? SelectionHighlighter._SELECTION_HIGHLIGHT : SelectionHighlighter._SELECTION_HIGHLIGHT_OVERVIEW\n      };\n    });\n    this.decorations = this.editor.deltaDecorations(this.decorations, decorations);\n  };\n\n  SelectionHighlighter.prototype.dispose = function () {\n    this._setState(null);\n\n    _super.prototype.dispose.call(this);\n  };\n\n  SelectionHighlighter.ID = 'editor.contrib.selectionHighlighter';\n  SelectionHighlighter._SELECTION_HIGHLIGHT_OVERVIEW = ModelDecorationOptions.register({\n    stickiness: 1\n    /* NeverGrowsWhenTypingAtEdges */\n    ,\n    className: 'selectionHighlight',\n    overviewRuler: {\n      color: themeColorFromId(overviewRulerSelectionHighlightForeground),\n      position: OverviewRulerLane.Center\n    }\n  });\n  SelectionHighlighter._SELECTION_HIGHLIGHT = ModelDecorationOptions.register({\n    stickiness: 1\n    /* NeverGrowsWhenTypingAtEdges */\n    ,\n    className: 'selectionHighlight'\n  });\n  return SelectionHighlighter;\n}(Disposable);\n\nexport { SelectionHighlighter };\n\nfunction modelRangesContainSameText(model, ranges, matchCase) {\n  var selectedText = getValueInRange(model, ranges[0], !matchCase);\n\n  for (var i = 1, len = ranges.length; i < len; i++) {\n    var range = ranges[i];\n\n    if (range.isEmpty()) {\n      return false;\n    }\n\n    var thisSelectedText = getValueInRange(model, range, !matchCase);\n\n    if (selectedText !== thisSelectedText) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction getValueInRange(model, range, toLowerCase) {\n  var text = model.getValueInRange(range);\n  return toLowerCase ? text.toLowerCase() : text;\n}\n\nregisterEditorContribution(MultiCursorSelectionController);\nregisterEditorContribution(SelectionHighlighter);\nregisterEditorAction(InsertCursorAbove);\nregisterEditorAction(InsertCursorBelow);\nregisterEditorAction(InsertCursorAtEndOfEachLineSelected);\nregisterEditorAction(AddSelectionToNextFindMatchAction);\nregisterEditorAction(AddSelectionToPreviousFindMatchAction);\nregisterEditorAction(MoveSelectionToNextFindMatchAction);\nregisterEditorAction(MoveSelectionToPreviousFindMatchAction);\nregisterEditorAction(SelectHighlightsAction);\nregisterEditorAction(CompatChangeAll);\nregisterEditorAction(InsertCursorAtEndOfLineSelected);\nregisterEditorAction(InsertCursorAtTopOfLineSelected);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { first } from '../../../base/common/async.js';\nimport { onUnexpectedExternalError } from '../../../base/common/errors.js';\nimport { registerDefaultLanguageCommand } from '../../browser/editorExtensions.js';\nimport * as modes from '../../common/modes.js';\nimport { RawContextKey } from '../../../platform/contextkey/common/contextkey.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nexport var Context = {\n  Visible: new RawContextKey('parameterHintsVisible', false),\n  MultipleSignatures: new RawContextKey('parameterHintsMultipleSignatures', false)\n};\nexport function provideSignatureHelp(model, position, context, token) {\n  var supports = modes.SignatureHelpProviderRegistry.ordered(model);\n  return first(supports.map(function (support) {\n    return function () {\n      return Promise.resolve(support.provideSignatureHelp(model, position, token, context)).catch(onUnexpectedExternalError);\n    };\n  }));\n}\nregisterDefaultLanguageCommand('_executeSignatureHelpProvider', function (model, position, args) {\n  return provideSignatureHelp(model, position, {\n    triggerKind: modes.SignatureHelpTriggerKind.Invoke,\n    isRetrigger: false,\n    triggerCharacter: args['triggerCharacter']\n  }, CancellationToken.None);\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport { createCancelablePromise, Delayer } from '../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { CharacterSet } from '../../common/core/characterClassifier.js';\nimport * as modes from '../../common/modes.js';\nimport { provideSignatureHelp } from './provideSignatureHelp.js';\nvar ParameterHintState;\n\n(function (ParameterHintState) {\n  ParameterHintState.Default = new (\n  /** @class */\n  function () {\n    function class_1() {\n      this.type = 0\n      /* Default */\n      ;\n    }\n\n    return class_1;\n  }())();\n\n  var Pending =\n  /** @class */\n  function () {\n    function Pending(request) {\n      this.request = request;\n      this.type = 2\n      /* Pending */\n      ;\n    }\n\n    return Pending;\n  }();\n\n  ParameterHintState.Pending = Pending;\n\n  var Active =\n  /** @class */\n  function () {\n    function Active(hints) {\n      this.hints = hints;\n      this.type = 1\n      /* Active */\n      ;\n    }\n\n    return Active;\n  }();\n\n  ParameterHintState.Active = Active;\n})(ParameterHintState || (ParameterHintState = {}));\n\nvar ParameterHintsModel =\n/** @class */\nfunction (_super) {\n  __extends(ParameterHintsModel, _super);\n\n  function ParameterHintsModel(editor, delay) {\n    if (delay === void 0) {\n      delay = ParameterHintsModel.DEFAULT_DELAY;\n    }\n\n    var _this = _super.call(this) || this;\n\n    _this._onChangedHints = _this._register(new Emitter());\n    _this.onChangedHints = _this._onChangedHints.event;\n    _this._state = ParameterHintState.Default;\n    _this.triggerChars = new CharacterSet();\n    _this.retriggerChars = new CharacterSet();\n    _this.triggerId = 0;\n    _this.editor = editor;\n    _this.enabled = false;\n    _this.throttledDelayer = new Delayer(delay);\n\n    _this._register(_this.editor.onDidChangeConfiguration(function () {\n      return _this.onEditorConfigurationChange();\n    }));\n\n    _this._register(_this.editor.onDidChangeModel(function (e) {\n      return _this.onModelChanged();\n    }));\n\n    _this._register(_this.editor.onDidChangeModelLanguage(function (_) {\n      return _this.onModelChanged();\n    }));\n\n    _this._register(_this.editor.onDidChangeCursorSelection(function (e) {\n      return _this.onCursorChange(e);\n    }));\n\n    _this._register(_this.editor.onDidChangeModelContent(function (e) {\n      return _this.onModelContentChange();\n    }));\n\n    _this._register(modes.SignatureHelpProviderRegistry.onDidChange(_this.onModelChanged, _this));\n\n    _this._register(_this.editor.onDidType(function (text) {\n      return _this.onDidType(text);\n    }));\n\n    _this.onEditorConfigurationChange();\n\n    _this.onModelChanged();\n\n    return _this;\n  }\n\n  Object.defineProperty(ParameterHintsModel.prototype, \"state\", {\n    get: function get() {\n      return this._state;\n    },\n    set: function set(value) {\n      if (this._state.type === 2\n      /* Pending */\n      ) {\n          this._state.request.cancel();\n        }\n\n      this._state = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ParameterHintsModel.prototype.cancel = function (silent) {\n    if (silent === void 0) {\n      silent = false;\n    }\n\n    this.state = ParameterHintState.Default;\n    this.throttledDelayer.cancel();\n\n    if (!silent) {\n      this._onChangedHints.fire(undefined);\n    }\n  };\n\n  ParameterHintsModel.prototype.trigger = function (context, delay) {\n    var _this = this;\n\n    var model = this.editor.getModel();\n\n    if (!model || !modes.SignatureHelpProviderRegistry.has(model)) {\n      return;\n    }\n\n    var triggerId = ++this.triggerId;\n    this.throttledDelayer.trigger(function () {\n      return _this.doTrigger({\n        triggerKind: context.triggerKind,\n        triggerCharacter: context.triggerCharacter,\n        isRetrigger: _this.state.type === 1\n        /* Active */\n        || _this.state.type === 2\n        /* Pending */\n        ,\n        activeSignatureHelp: _this.state.type === 1\n        /* Active */\n        ? _this.state.hints : undefined\n      }, triggerId);\n    }, delay).then(undefined, onUnexpectedError);\n  };\n\n  ParameterHintsModel.prototype.next = function () {\n    if (this.state.type !== 1\n    /* Active */\n    ) {\n        return;\n      }\n\n    var length = this.state.hints.signatures.length;\n    var activeSignature = this.state.hints.activeSignature;\n    var last = activeSignature % length === length - 1;\n    var cycle = this.editor.getConfiguration().contribInfo.parameterHints.cycle; // If there is only one signature, or we're on last signature of list\n\n    if ((length < 2 || last) && !cycle) {\n      this.cancel();\n      return;\n    }\n\n    this.updateActiveSignature(last && cycle ? 0 : activeSignature + 1);\n  };\n\n  ParameterHintsModel.prototype.previous = function () {\n    if (this.state.type !== 1\n    /* Active */\n    ) {\n        return;\n      }\n\n    var length = this.state.hints.signatures.length;\n    var activeSignature = this.state.hints.activeSignature;\n    var first = activeSignature === 0;\n    var cycle = this.editor.getConfiguration().contribInfo.parameterHints.cycle; // If there is only one signature, or we're on first signature of list\n\n    if ((length < 2 || first) && !cycle) {\n      this.cancel();\n      return;\n    }\n\n    this.updateActiveSignature(first && cycle ? length - 1 : activeSignature - 1);\n  };\n\n  ParameterHintsModel.prototype.updateActiveSignature = function (activeSignature) {\n    if (this.state.type !== 1\n    /* Active */\n    ) {\n        return;\n      }\n\n    this.state = new ParameterHintState.Active(__assign({}, this.state.hints, {\n      activeSignature: activeSignature\n    }));\n\n    this._onChangedHints.fire(this.state.hints);\n  };\n\n  ParameterHintsModel.prototype.doTrigger = function (triggerContext, triggerId) {\n    var _this = this;\n\n    this.cancel(true);\n\n    if (!this.editor.hasModel()) {\n      return Promise.resolve(false);\n    }\n\n    var model = this.editor.getModel();\n    var position = this.editor.getPosition();\n    this.state = new ParameterHintState.Pending(createCancelablePromise(function (token) {\n      return provideSignatureHelp(model, position, triggerContext, token);\n    }));\n    return this.state.request.then(function (result) {\n      // Check that we are still resolving the correct signature help\n      if (triggerId !== _this.triggerId) {\n        return false;\n      }\n\n      if (!result || !result.signatures || result.signatures.length === 0) {\n        _this.cancel();\n\n        return false;\n      } else {\n        _this.state = new ParameterHintState.Active(result);\n\n        _this._onChangedHints.fire(_this.state.hints);\n\n        return true;\n      }\n    }).catch(function (error) {\n      if (triggerId === _this.triggerId) {\n        _this.state = ParameterHintState.Default;\n      }\n\n      onUnexpectedError(error);\n      return false;\n    });\n  };\n\n  Object.defineProperty(ParameterHintsModel.prototype, \"isTriggered\", {\n    get: function get() {\n      return this.state.type === 1\n      /* Active */\n      || this.state.type === 2\n      /* Pending */\n      || this.throttledDelayer.isTriggered();\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ParameterHintsModel.prototype.onModelChanged = function () {\n    this.cancel(); // Update trigger characters\n\n    this.triggerChars = new CharacterSet();\n    this.retriggerChars = new CharacterSet();\n    var model = this.editor.getModel();\n\n    if (!model) {\n      return;\n    }\n\n    for (var _i = 0, _a = modes.SignatureHelpProviderRegistry.ordered(model); _i < _a.length; _i++) {\n      var support = _a[_i];\n\n      for (var _b = 0, _c = support.signatureHelpTriggerCharacters || []; _b < _c.length; _b++) {\n        var ch = _c[_b];\n        this.triggerChars.add(ch.charCodeAt(0)); // All trigger characters are also considered retrigger characters\n\n        this.retriggerChars.add(ch.charCodeAt(0));\n      }\n\n      for (var _d = 0, _e = support.signatureHelpRetriggerCharacters || []; _d < _e.length; _d++) {\n        var ch = _e[_d];\n        this.retriggerChars.add(ch.charCodeAt(0));\n      }\n    }\n  };\n\n  ParameterHintsModel.prototype.onDidType = function (text) {\n    if (!this.enabled) {\n      return;\n    }\n\n    var lastCharIndex = text.length - 1;\n    var triggerCharCode = text.charCodeAt(lastCharIndex);\n\n    if (this.triggerChars.has(triggerCharCode) || this.isTriggered && this.retriggerChars.has(triggerCharCode)) {\n      this.trigger({\n        triggerKind: modes.SignatureHelpTriggerKind.TriggerCharacter,\n        triggerCharacter: text.charAt(lastCharIndex)\n      });\n    }\n  };\n\n  ParameterHintsModel.prototype.onCursorChange = function (e) {\n    if (e.source === 'mouse') {\n      this.cancel();\n    } else if (this.isTriggered) {\n      this.trigger({\n        triggerKind: modes.SignatureHelpTriggerKind.ContentChange\n      });\n    }\n  };\n\n  ParameterHintsModel.prototype.onModelContentChange = function () {\n    if (this.isTriggered) {\n      this.trigger({\n        triggerKind: modes.SignatureHelpTriggerKind.ContentChange\n      });\n    }\n  };\n\n  ParameterHintsModel.prototype.onEditorConfigurationChange = function () {\n    this.enabled = this.editor.getConfiguration().contribInfo.parameterHints.enabled;\n\n    if (!this.enabled) {\n      this.cancel();\n    }\n  };\n\n  ParameterHintsModel.prototype.dispose = function () {\n    this.cancel(true);\n\n    _super.prototype.dispose.call(this);\n  };\n\n  ParameterHintsModel.DEFAULT_DELAY = 120; // ms\n\n  return ParameterHintsModel;\n}(Disposable);\n\nexport { ParameterHintsModel };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport * as dom from '../../../base/browser/dom.js';\nimport { domEvent, stop } from '../../../base/browser/event.js';\nimport * as aria from '../../../base/browser/ui/aria/aria.js';\nimport { DomScrollableElement } from '../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { Event } from '../../../base/common/event.js';\nimport { dispose } from '../../../base/common/lifecycle.js';\nimport './parameterHints.css';\nimport { IModeService } from '../../common/services/modeService.js';\nimport { MarkdownRenderer } from '../markdown/markdownRenderer.js';\nimport { Context } from './provideSignatureHelp.js';\nimport * as nls from '../../../nls.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IOpenerService } from '../../../platform/opener/common/opener.js';\nimport { editorHoverBackground, editorHoverBorder, textCodeBlockBackground, textLinkForeground } from '../../../platform/theme/common/colorRegistry.js';\nimport { HIGH_CONTRAST, registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\nimport { ParameterHintsModel } from './parameterHintsModel.js';\nvar $ = dom.$;\n\nvar ParameterHintsWidget =\n/** @class */\nfunction () {\n  function ParameterHintsWidget(editor, contextKeyService, openerService, modeService) {\n    var _this = this;\n\n    this.editor = editor; // Editor.IContentWidget.allowEditorOverflow\n\n    this.allowEditorOverflow = true;\n    this.markdownRenderer = new MarkdownRenderer(editor, modeService, openerService);\n    this.model = new ParameterHintsModel(editor);\n    this.keyVisible = Context.Visible.bindTo(contextKeyService);\n    this.keyMultipleSignatures = Context.MultipleSignatures.bindTo(contextKeyService);\n    this.visible = false;\n    this.disposables = [];\n    this.disposables.push(this.model.onChangedHints(function (newParameterHints) {\n      if (newParameterHints) {\n        _this.show();\n\n        _this.render(newParameterHints);\n      } else {\n        _this.hide();\n      }\n    }));\n  }\n\n  ParameterHintsWidget.prototype.createParamaterHintDOMNodes = function () {\n    var _this = this;\n\n    this.element = $('.editor-widget.parameter-hints-widget');\n    var wrapper = dom.append(this.element, $('.wrapper'));\n    wrapper.tabIndex = -1;\n    var buttons = dom.append(wrapper, $('.buttons'));\n    var previous = dom.append(buttons, $('.button.previous'));\n    var next = dom.append(buttons, $('.button.next'));\n    var onPreviousClick = stop(domEvent(previous, 'click'));\n    onPreviousClick(this.previous, this, this.disposables);\n    var onNextClick = stop(domEvent(next, 'click'));\n    onNextClick(this.next, this, this.disposables);\n    this.overloads = dom.append(wrapper, $('.overloads'));\n    var body = $('.body');\n    this.scrollbar = new DomScrollableElement(body, {});\n    this.disposables.push(this.scrollbar);\n    wrapper.appendChild(this.scrollbar.getDomNode());\n    this.signature = dom.append(body, $('.signature'));\n    this.docs = dom.append(body, $('.docs'));\n    this.editor.addContentWidget(this);\n    this.hide();\n    this.element.style.userSelect = 'text';\n    this.disposables.push(this.editor.onDidChangeCursorSelection(function (e) {\n      if (_this.visible) {\n        _this.editor.layoutContentWidget(_this);\n      }\n    }));\n\n    var updateFont = function updateFont() {\n      var fontInfo = _this.editor.getConfiguration().fontInfo;\n\n      _this.element.style.fontSize = fontInfo.fontSize + \"px\";\n    };\n\n    updateFont();\n    Event.chain(this.editor.onDidChangeConfiguration.bind(this.editor)).filter(function (e) {\n      return e.fontInfo;\n    }).on(updateFont, null, this.disposables);\n    this.disposables.push(this.editor.onDidLayoutChange(function (e) {\n      return _this.updateMaxHeight();\n    }));\n    this.updateMaxHeight();\n  };\n\n  ParameterHintsWidget.prototype.show = function () {\n    var _this = this;\n\n    if (!this.model || this.visible) {\n      return;\n    }\n\n    if (!this.element) {\n      this.createParamaterHintDOMNodes();\n    }\n\n    this.keyVisible.set(true);\n    this.visible = true;\n    setTimeout(function () {\n      return dom.addClass(_this.element, 'visible');\n    }, 100);\n    this.editor.layoutContentWidget(this);\n  };\n\n  ParameterHintsWidget.prototype.hide = function () {\n    if (!this.model || !this.visible) {\n      return;\n    }\n\n    if (!this.element) {\n      this.createParamaterHintDOMNodes();\n    }\n\n    this.keyVisible.reset();\n    this.visible = false;\n    this.announcedLabel = null;\n    dom.removeClass(this.element, 'visible');\n    this.editor.layoutContentWidget(this);\n  };\n\n  ParameterHintsWidget.prototype.getPosition = function () {\n    if (this.visible) {\n      return {\n        position: this.editor.getPosition(),\n        preference: [1\n        /* ABOVE */\n        , 2\n        /* BELOW */\n        ]\n      };\n    }\n\n    return null;\n  };\n\n  ParameterHintsWidget.prototype.render = function (hints) {\n    var multiple = hints.signatures.length > 1;\n    dom.toggleClass(this.element, 'multiple', multiple);\n    this.keyMultipleSignatures.set(multiple);\n    this.signature.innerHTML = '';\n    this.docs.innerHTML = '';\n    var signature = hints.signatures[hints.activeSignature];\n\n    if (!signature) {\n      return;\n    }\n\n    var code = dom.append(this.signature, $('.code'));\n    var hasParameters = signature.parameters.length > 0;\n    var fontInfo = this.editor.getConfiguration().fontInfo;\n    code.style.fontSize = fontInfo.fontSize + \"px\";\n    code.style.fontFamily = fontInfo.fontFamily;\n\n    if (!hasParameters) {\n      var label = dom.append(code, $('span'));\n      label.textContent = signature.label;\n    } else {\n      this.renderParameters(code, signature, hints.activeParameter);\n    }\n\n    dispose(this.renderDisposeables);\n    this.renderDisposeables = [];\n    var activeParameter = signature.parameters[hints.activeParameter];\n\n    if (activeParameter && activeParameter.documentation) {\n      var documentation = $('span.documentation');\n\n      if (typeof activeParameter.documentation === 'string') {\n        documentation.textContent = activeParameter.documentation;\n      } else {\n        var renderedContents = this.markdownRenderer.render(activeParameter.documentation);\n        dom.addClass(renderedContents.element, 'markdown-docs');\n        this.renderDisposeables.push(renderedContents);\n        documentation.appendChild(renderedContents.element);\n      }\n\n      dom.append(this.docs, $('p', {}, documentation));\n    }\n\n    dom.toggleClass(this.signature, 'has-docs', !!signature.documentation);\n\n    if (signature.documentation === undefined) {\n      /** no op */\n    } else if (typeof signature.documentation === 'string') {\n      dom.append(this.docs, $('p', {}, signature.documentation));\n    } else {\n      var renderedContents = this.markdownRenderer.render(signature.documentation);\n      dom.addClass(renderedContents.element, 'markdown-docs');\n      this.renderDisposeables.push(renderedContents);\n      dom.append(this.docs, renderedContents.element);\n    }\n\n    var currentOverload = String(hints.activeSignature + 1);\n\n    if (hints.signatures.length < 10) {\n      currentOverload += \"/\" + hints.signatures.length;\n    }\n\n    this.overloads.textContent = currentOverload;\n\n    if (activeParameter) {\n      var labelToAnnounce = this.getParameterLabel(signature, hints.activeParameter); // Select method gets called on every user type while parameter hints are visible.\n      // We do not want to spam the user with same announcements, so we only announce if the current parameter changed.\n\n      if (this.announcedLabel !== labelToAnnounce) {\n        aria.alert(nls.localize('hint', \"{0}, hint\", labelToAnnounce));\n        this.announcedLabel = labelToAnnounce;\n      }\n    }\n\n    this.editor.layoutContentWidget(this);\n    this.scrollbar.scanDomNode();\n  };\n\n  ParameterHintsWidget.prototype.renderParameters = function (parent, signature, currentParameter) {\n    var _a = this.getParameterLabelOffsets(signature, currentParameter),\n        start = _a[0],\n        end = _a[1];\n\n    var beforeSpan = document.createElement('span');\n    beforeSpan.textContent = signature.label.substring(0, start);\n    var paramSpan = document.createElement('span');\n    paramSpan.textContent = signature.label.substring(start, end);\n    paramSpan.className = 'parameter active';\n    var afterSpan = document.createElement('span');\n    afterSpan.textContent = signature.label.substring(end);\n    dom.append(parent, beforeSpan, paramSpan, afterSpan);\n  };\n\n  ParameterHintsWidget.prototype.getParameterLabel = function (signature, paramIdx) {\n    var param = signature.parameters[paramIdx];\n\n    if (typeof param.label === 'string') {\n      return param.label;\n    } else {\n      return signature.label.substring(param.label[0], param.label[1]);\n    }\n  };\n\n  ParameterHintsWidget.prototype.getParameterLabelOffsets = function (signature, paramIdx) {\n    var param = signature.parameters[paramIdx];\n\n    if (!param) {\n      return [0, 0];\n    } else if (Array.isArray(param.label)) {\n      return param.label;\n    } else {\n      var idx = signature.label.lastIndexOf(param.label);\n      return idx >= 0 ? [idx, idx + param.label.length] : [0, 0];\n    }\n  };\n\n  ParameterHintsWidget.prototype.next = function () {\n    if (this.model) {\n      this.editor.focus();\n      this.model.next();\n    }\n  };\n\n  ParameterHintsWidget.prototype.previous = function () {\n    if (this.model) {\n      this.editor.focus();\n      this.model.previous();\n    }\n  };\n\n  ParameterHintsWidget.prototype.cancel = function () {\n    if (this.model) {\n      this.model.cancel();\n    }\n  };\n\n  ParameterHintsWidget.prototype.getDomNode = function () {\n    return this.element;\n  };\n\n  ParameterHintsWidget.prototype.getId = function () {\n    return ParameterHintsWidget.ID;\n  };\n\n  ParameterHintsWidget.prototype.trigger = function (context) {\n    if (this.model) {\n      this.model.trigger(context, 0);\n    }\n  };\n\n  ParameterHintsWidget.prototype.updateMaxHeight = function () {\n    var height = Math.max(this.editor.getLayoutInfo().height / 4, 250);\n    this.element.style.maxHeight = height + \"px\";\n  };\n\n  ParameterHintsWidget.prototype.dispose = function () {\n    this.disposables = dispose(this.disposables);\n    this.renderDisposeables = dispose(this.renderDisposeables);\n\n    if (this.model) {\n      this.model.dispose();\n      this.model = null;\n    }\n  };\n\n  ParameterHintsWidget.ID = 'editor.widget.parameterHintsWidget';\n  ParameterHintsWidget = __decorate([__param(1, IContextKeyService), __param(2, IOpenerService), __param(3, IModeService)], ParameterHintsWidget);\n  return ParameterHintsWidget;\n}();\n\nexport { ParameterHintsWidget };\nregisterThemingParticipant(function (theme, collector) {\n  var border = theme.getColor(editorHoverBorder);\n\n  if (border) {\n    var borderWidth = theme.type === HIGH_CONTRAST ? 2 : 1;\n    collector.addRule(\".monaco-editor .parameter-hints-widget { border: \" + borderWidth + \"px solid \" + border + \"; }\");\n    collector.addRule(\".monaco-editor .parameter-hints-widget.multiple .body { border-left: 1px solid \" + border.transparent(0.5) + \"; }\");\n    collector.addRule(\".monaco-editor .parameter-hints-widget .signature.has-docs { border-bottom: 1px solid \" + border.transparent(0.5) + \"; }\");\n  }\n\n  var background = theme.getColor(editorHoverBackground);\n\n  if (background) {\n    collector.addRule(\".monaco-editor .parameter-hints-widget { background-color: \" + background + \"; }\");\n  }\n\n  var link = theme.getColor(textLinkForeground);\n\n  if (link) {\n    collector.addRule(\".monaco-editor .parameter-hints-widget a { color: \" + link + \"; }\");\n  }\n\n  var codeBackground = theme.getColor(textCodeBlockBackground);\n\n  if (codeBackground) {\n    collector.addRule(\".monaco-editor .parameter-hints-widget code { background-color: \" + codeBackground + \"; }\");\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport * as nls from '../../../nls.js';\nimport { dispose } from '../../../base/common/lifecycle.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport { ContextKeyExpr } from '../../../platform/contextkey/common/contextkey.js';\nimport { registerEditorAction, registerEditorContribution, EditorAction, EditorCommand, registerEditorCommand } from '../../browser/editorExtensions.js';\nimport { ParameterHintsWidget } from './parameterHintsWidget.js';\nimport { Context } from './provideSignatureHelp.js';\nimport * as modes from '../../common/modes.js';\n\nvar ParameterHintsController =\n/** @class */\nfunction () {\n  function ParameterHintsController(editor, instantiationService) {\n    this.editor = editor;\n    this.widget = instantiationService.createInstance(ParameterHintsWidget, this.editor);\n  }\n\n  ParameterHintsController.get = function (editor) {\n    return editor.getContribution(ParameterHintsController.ID);\n  };\n\n  ParameterHintsController.prototype.getId = function () {\n    return ParameterHintsController.ID;\n  };\n\n  ParameterHintsController.prototype.cancel = function () {\n    this.widget.cancel();\n  };\n\n  ParameterHintsController.prototype.previous = function () {\n    this.widget.previous();\n  };\n\n  ParameterHintsController.prototype.next = function () {\n    this.widget.next();\n  };\n\n  ParameterHintsController.prototype.trigger = function (context) {\n    this.widget.trigger(context);\n  };\n\n  ParameterHintsController.prototype.dispose = function () {\n    dispose(this.widget);\n  };\n\n  ParameterHintsController.ID = 'editor.controller.parameterHints';\n  ParameterHintsController = __decorate([__param(1, IInstantiationService)], ParameterHintsController);\n  return ParameterHintsController;\n}();\n\nvar TriggerParameterHintsAction =\n/** @class */\nfunction (_super) {\n  __extends(TriggerParameterHintsAction, _super);\n\n  function TriggerParameterHintsAction() {\n    return _super.call(this, {\n      id: 'editor.action.triggerParameterHints',\n      label: nls.localize('parameterHints.trigger.label', \"Trigger Parameter Hints\"),\n      alias: 'Trigger Parameter Hints',\n      precondition: EditorContextKeys.hasSignatureHelpProvider,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048\n        /* CtrlCmd */\n        | 1024\n        /* Shift */\n        | 10\n        /* Space */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  TriggerParameterHintsAction.prototype.run = function (accessor, editor) {\n    var controller = ParameterHintsController.get(editor);\n\n    if (controller) {\n      controller.trigger({\n        triggerKind: modes.SignatureHelpTriggerKind.Invoke\n      });\n    }\n  };\n\n  return TriggerParameterHintsAction;\n}(EditorAction);\n\nexport { TriggerParameterHintsAction };\nregisterEditorContribution(ParameterHintsController);\nregisterEditorAction(TriggerParameterHintsAction);\nvar weight = 100\n/* EditorContrib */\n+ 75;\nvar ParameterHintsCommand = EditorCommand.bindToContribution(ParameterHintsController.get);\nregisterEditorCommand(new ParameterHintsCommand({\n  id: 'closeParameterHints',\n  precondition: Context.Visible,\n  handler: function handler(x) {\n    return x.cancel();\n  },\n  kbOpts: {\n    weight: weight,\n    kbExpr: EditorContextKeys.focus,\n    primary: 9\n    /* Escape */\n    ,\n    secondary: [1024\n    /* Shift */\n    | 9\n    /* Escape */\n    ]\n  }\n}));\nregisterEditorCommand(new ParameterHintsCommand({\n  id: 'showPrevParameterHint',\n  precondition: ContextKeyExpr.and(Context.Visible, Context.MultipleSignatures),\n  handler: function handler(x) {\n    return x.previous();\n  },\n  kbOpts: {\n    weight: weight,\n    kbExpr: EditorContextKeys.focus,\n    primary: 16\n    /* UpArrow */\n    ,\n    secondary: [512\n    /* Alt */\n    | 16\n    /* UpArrow */\n    ],\n    mac: {\n      primary: 16\n      /* UpArrow */\n      ,\n      secondary: [512\n      /* Alt */\n      | 16\n      /* UpArrow */\n      , 256\n      /* WinCtrl */\n      | 46\n      /* KEY_P */\n      ]\n    }\n  }\n}));\nregisterEditorCommand(new ParameterHintsCommand({\n  id: 'showNextParameterHint',\n  precondition: ContextKeyExpr.and(Context.Visible, Context.MultipleSignatures),\n  handler: function handler(x) {\n    return x.next();\n  },\n  kbOpts: {\n    weight: weight,\n    kbExpr: EditorContextKeys.focus,\n    primary: 18\n    /* DownArrow */\n    ,\n    secondary: [512\n    /* Alt */\n    | 18\n    /* DownArrow */\n    ],\n    mac: {\n      primary: 18\n      /* DownArrow */\n      ,\n      secondary: [512\n      /* Alt */\n      | 18\n      /* DownArrow */\n      , 256\n      /* WinCtrl */\n      | 44\n      /* KEY_N */\n      ]\n    }\n  }\n}));","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport * as nls from '../../../nls.js';\nimport { IContextKeyService, ContextKeyExpr } from '../../../platform/contextkey/common/contextkey.js';\nimport { KeybindingsRegistry } from '../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { Position } from '../../common/core/position.js';\nimport { registerEditorAction, EditorAction, registerEditorContribution, registerDefaultLanguageCommand } from '../../browser/editorExtensions.js';\nimport { ReferenceProviderRegistry } from '../../common/modes.js';\nimport { Range } from '../../common/core/range.js';\nimport { PeekContext, getOuterEditor } from './peekViewWidget.js';\nimport { ReferencesController, ctxReferenceSearchVisible } from './referencesController.js';\nimport { ReferencesModel, OneReference } from './referencesModel.js';\nimport { createCancelablePromise } from '../../../base/common/async.js';\nimport { onUnexpectedExternalError } from '../../../base/common/errors.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport { EmbeddedCodeEditorWidget } from '../../browser/widget/embeddedCodeEditorWidget.js';\nimport { isCodeEditor } from '../../browser/editorBrowser.js';\nimport { IListService } from '../../../platform/list/browser/listService.js';\nimport { ctxReferenceWidgetSearchTreeFocused } from './referencesWidget.js';\nimport { CommandsRegistry } from '../../../platform/commands/common/commands.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nexport var defaultReferenceSearchOptions = {\n  getMetaTitle: function getMetaTitle(model) {\n    return model.references.length > 1 ? nls.localize('meta.titleReference', \" – {0} references\", model.references.length) : '';\n  }\n};\n\nvar ReferenceController =\n/** @class */\nfunction () {\n  function ReferenceController(editor, contextKeyService) {\n    if (editor instanceof EmbeddedCodeEditorWidget) {\n      PeekContext.inPeekEditor.bindTo(contextKeyService);\n    }\n  }\n\n  ReferenceController.prototype.dispose = function () {};\n\n  ReferenceController.prototype.getId = function () {\n    return ReferenceController.ID;\n  };\n\n  ReferenceController.ID = 'editor.contrib.referenceController';\n  ReferenceController = __decorate([__param(1, IContextKeyService)], ReferenceController);\n  return ReferenceController;\n}();\n\nexport { ReferenceController };\n\nvar ReferenceAction =\n/** @class */\nfunction (_super) {\n  __extends(ReferenceAction, _super);\n\n  function ReferenceAction() {\n    return _super.call(this, {\n      id: 'editor.action.referenceSearch.trigger',\n      label: nls.localize('references.action.label', \"Peek References\"),\n      alias: 'Find All References',\n      precondition: ContextKeyExpr.and(EditorContextKeys.hasReferenceProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInEmbeddedEditor.toNegated()),\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 1024\n        /* Shift */\n        | 70\n        /* F12 */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      },\n      menuOpts: {\n        group: 'navigation',\n        order: 1.5\n      }\n    }) || this;\n  }\n\n  ReferenceAction.prototype.run = function (_accessor, editor) {\n    var controller = ReferencesController.get(editor);\n\n    if (!controller) {\n      return;\n    }\n\n    if (editor.hasModel()) {\n      var range_1 = editor.getSelection();\n      var model_1 = editor.getModel();\n      var references = createCancelablePromise(function (token) {\n        return provideReferences(model_1, range_1.getStartPosition(), token).then(function (references) {\n          return new ReferencesModel(references);\n        });\n      });\n      controller.toggleWidget(range_1, references, defaultReferenceSearchOptions);\n    }\n  };\n\n  return ReferenceAction;\n}(EditorAction);\n\nexport { ReferenceAction };\nregisterEditorContribution(ReferenceController);\nregisterEditorAction(ReferenceAction);\n\nvar findReferencesCommand = function findReferencesCommand(accessor, resource, position) {\n  if (!(resource instanceof URI)) {\n    throw new Error('illegal argument, uri');\n  }\n\n  if (!position) {\n    throw new Error('illegal argument, position');\n  }\n\n  var codeEditorService = accessor.get(ICodeEditorService);\n  return codeEditorService.openCodeEditor({\n    resource: resource\n  }, codeEditorService.getFocusedCodeEditor()).then(function (control) {\n    if (!isCodeEditor(control) || !control.hasModel()) {\n      return undefined;\n    }\n\n    var controller = ReferencesController.get(control);\n\n    if (!controller) {\n      return undefined;\n    }\n\n    var references = createCancelablePromise(function (token) {\n      return provideReferences(control.getModel(), Position.lift(position), token).then(function (references) {\n        return new ReferencesModel(references);\n      });\n    });\n    var range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n    return Promise.resolve(controller.toggleWidget(range, references, defaultReferenceSearchOptions));\n  });\n};\n\nvar showReferencesCommand = function showReferencesCommand(accessor, resource, position, references) {\n  if (!(resource instanceof URI)) {\n    throw new Error('illegal argument, uri expected');\n  }\n\n  if (!references) {\n    throw new Error('missing references');\n  }\n\n  var codeEditorService = accessor.get(ICodeEditorService);\n  return codeEditorService.openCodeEditor({\n    resource: resource\n  }, codeEditorService.getFocusedCodeEditor()).then(function (control) {\n    if (!isCodeEditor(control)) {\n      return undefined;\n    }\n\n    var controller = ReferencesController.get(control);\n\n    if (!controller) {\n      return undefined;\n    }\n\n    return controller.toggleWidget(new Range(position.lineNumber, position.column, position.lineNumber, position.column), createCancelablePromise(function (_) {\n      return Promise.resolve(new ReferencesModel(references));\n    }), defaultReferenceSearchOptions);\n  });\n}; // register commands\n\n\nCommandsRegistry.registerCommand({\n  id: 'editor.action.findReferences',\n  handler: findReferencesCommand\n});\nCommandsRegistry.registerCommand({\n  id: 'editor.action.showReferences',\n  handler: showReferencesCommand,\n  description: {\n    description: 'Show references at a position in a file',\n    args: [{\n      name: 'uri',\n      description: 'The text document in which to show references',\n      constraint: URI\n    }, {\n      name: 'position',\n      description: 'The position at which to show',\n      constraint: Position.isIPosition\n    }, {\n      name: 'locations',\n      description: 'An array of locations.',\n      constraint: Array\n    }]\n  }\n});\n\nfunction closeActiveReferenceSearch(accessor, args) {\n  withController(accessor, function (controller) {\n    return controller.closeWidget();\n  });\n}\n\nfunction openReferenceToSide(accessor, args) {\n  var listService = accessor.get(IListService);\n  var focus = listService.lastFocusedList && listService.lastFocusedList.getFocus();\n\n  if (focus instanceof OneReference) {\n    withController(accessor, function (controller) {\n      return controller.openReference(focus, true);\n    });\n  }\n}\n\nfunction withController(accessor, fn) {\n  var outerEditor = getOuterEditor(accessor);\n\n  if (!outerEditor) {\n    return;\n  }\n\n  var controller = ReferencesController.get(outerEditor);\n\n  if (!controller) {\n    return;\n  }\n\n  fn(controller);\n}\n\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n  id: 'goToNextReference',\n  weight: 200\n  /* WorkbenchContrib */\n  + 50,\n  primary: 62\n  /* F4 */\n  ,\n  when: ctxReferenceSearchVisible,\n  handler: function handler(accessor) {\n    withController(accessor, function (controller) {\n      controller.goToNextOrPreviousReference(true);\n    });\n  }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n  id: 'goToNextReferenceFromEmbeddedEditor',\n  weight: 100\n  /* EditorContrib */\n  + 50,\n  primary: 62\n  /* F4 */\n  ,\n  when: PeekContext.inPeekEditor,\n  handler: function handler(accessor) {\n    withController(accessor, function (controller) {\n      controller.goToNextOrPreviousReference(true);\n    });\n  }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n  id: 'goToPreviousReference',\n  weight: 200\n  /* WorkbenchContrib */\n  + 50,\n  primary: 1024\n  /* Shift */\n  | 62\n  /* F4 */\n  ,\n  when: ctxReferenceSearchVisible,\n  handler: function handler(accessor) {\n    withController(accessor, function (controller) {\n      controller.goToNextOrPreviousReference(false);\n    });\n  }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n  id: 'goToPreviousReferenceFromEmbeddedEditor',\n  weight: 100\n  /* EditorContrib */\n  + 50,\n  primary: 1024\n  /* Shift */\n  | 62\n  /* F4 */\n  ,\n  when: PeekContext.inPeekEditor,\n  handler: function handler(accessor) {\n    withController(accessor, function (controller) {\n      controller.goToNextOrPreviousReference(false);\n    });\n  }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n  id: 'closeReferenceSearch',\n  weight: 200\n  /* WorkbenchContrib */\n  + 50,\n  primary: 9\n  /* Escape */\n  ,\n  secondary: [1024\n  /* Shift */\n  | 9\n  /* Escape */\n  ],\n  when: ContextKeyExpr.and(ctxReferenceSearchVisible, ContextKeyExpr.not('config.editor.stablePeek')),\n  handler: closeActiveReferenceSearch\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n  id: 'closeReferenceSearchEditor',\n  weight: 100\n  /* EditorContrib */\n  - 101,\n  primary: 9\n  /* Escape */\n  ,\n  secondary: [1024\n  /* Shift */\n  | 9\n  /* Escape */\n  ],\n  when: ContextKeyExpr.and(PeekContext.inPeekEditor, ContextKeyExpr.not('config.editor.stablePeek')),\n  handler: closeActiveReferenceSearch\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n  id: 'openReferenceToSide',\n  weight: 100\n  /* EditorContrib */\n  ,\n  primary: 2048\n  /* CtrlCmd */\n  | 3\n  /* Enter */\n  ,\n  mac: {\n    primary: 256\n    /* WinCtrl */\n    | 3\n    /* Enter */\n\n  },\n  when: ContextKeyExpr.and(ctxReferenceSearchVisible, ctxReferenceWidgetSearchTreeFocused),\n  handler: openReferenceToSide\n});\nexport function provideReferences(model, position, token) {\n  // collect references from all providers\n  var promises = ReferenceProviderRegistry.ordered(model).map(function (provider) {\n    return Promise.resolve(provider.provideReferences(model, position, {\n      includeDeclaration: true\n    }, token)).then(function (result) {\n      if (Array.isArray(result)) {\n        return result;\n      }\n\n      return undefined;\n    }, function (err) {\n      onUnexpectedExternalError(err);\n    });\n  });\n  return Promise.all(promises).then(function (references) {\n    var result = [];\n\n    for (var _i = 0, references_1 = references; _i < references_1.length; _i++) {\n      var ref = references_1[_i];\n\n      if (ref) {\n        result.push.apply(result, ref);\n      }\n    }\n\n    return result;\n  });\n}\nregisterDefaultLanguageCommand('_executeReferenceProvider', function (model, position) {\n  return provideReferences(model, position, CancellationToken.None);\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { dispose } from '../../../base/common/lifecycle.js';\nimport './renameInputField.css';\nimport { Position } from '../../common/core/position.js';\nimport { Range } from '../../common/core/range.js';\nimport { localize } from '../../../nls.js';\nimport { RawContextKey } from '../../../platform/contextkey/common/contextkey.js';\nimport { inputBackground, inputBorder, inputForeground, widgetShadow } from '../../../platform/theme/common/colorRegistry.js';\nexport var CONTEXT_RENAME_INPUT_VISIBLE = new RawContextKey('renameInputVisible', false);\n\nvar RenameInputField =\n/** @class */\nfunction () {\n  function RenameInputField(editor, themeService, contextKeyService) {\n    var _this = this;\n\n    this.themeService = themeService;\n    this._disposables = []; // Editor.IContentWidget.allowEditorOverflow\n\n    this.allowEditorOverflow = true;\n    this._currentAcceptInput = null;\n    this._currentCancelInput = null;\n    this._visibleContextKey = CONTEXT_RENAME_INPUT_VISIBLE.bindTo(contextKeyService);\n    this._editor = editor;\n\n    this._editor.addContentWidget(this);\n\n    this._disposables.push(editor.onDidChangeConfiguration(function (e) {\n      if (e.fontInfo) {\n        _this.updateFont();\n      }\n    }));\n\n    this._disposables.push(themeService.onThemeChange(function (theme) {\n      return _this.onThemeChange(theme);\n    }));\n  }\n\n  RenameInputField.prototype.onThemeChange = function (theme) {\n    this.updateStyles(theme);\n  };\n\n  RenameInputField.prototype.dispose = function () {\n    this._disposables = dispose(this._disposables);\n\n    this._editor.removeContentWidget(this);\n  };\n\n  RenameInputField.prototype.getId = function () {\n    return '__renameInputWidget';\n  };\n\n  RenameInputField.prototype.getDomNode = function () {\n    if (!this._domNode) {\n      this._inputField = document.createElement('input');\n      this._inputField.className = 'rename-input';\n      this._inputField.type = 'text';\n\n      this._inputField.setAttribute('aria-label', localize('renameAriaLabel', \"Rename input. Type new name and press Enter to commit.\"));\n\n      this._domNode = document.createElement('div');\n      this._domNode.style.height = this._editor.getConfiguration().lineHeight + \"px\";\n      this._domNode.className = 'monaco-editor rename-box';\n\n      this._domNode.appendChild(this._inputField);\n\n      this.updateFont();\n      this.updateStyles(this.themeService.getTheme());\n    }\n\n    return this._domNode;\n  };\n\n  RenameInputField.prototype.updateStyles = function (theme) {\n    if (!this._inputField) {\n      return;\n    }\n\n    var background = theme.getColor(inputBackground);\n    var foreground = theme.getColor(inputForeground);\n    var widgetShadowColor = theme.getColor(widgetShadow);\n    var border = theme.getColor(inputBorder);\n    this._inputField.style.backgroundColor = background ? background.toString() : null;\n    this._inputField.style.color = foreground ? foreground.toString() : null;\n    this._inputField.style.borderWidth = border ? '1px' : '0px';\n    this._inputField.style.borderStyle = border ? 'solid' : 'none';\n    this._inputField.style.borderColor = border ? border.toString() : 'none';\n    this._domNode.style.boxShadow = widgetShadowColor ? \" 0 2px 8px \" + widgetShadowColor : null;\n  };\n\n  RenameInputField.prototype.updateFont = function () {\n    if (!this._inputField) {\n      return;\n    }\n\n    var fontInfo = this._editor.getConfiguration().fontInfo;\n\n    this._inputField.style.fontFamily = fontInfo.fontFamily;\n    this._inputField.style.fontWeight = fontInfo.fontWeight;\n    this._inputField.style.fontSize = fontInfo.fontSize + \"px\";\n  };\n\n  RenameInputField.prototype.getPosition = function () {\n    return this._visible ? {\n      position: this._position,\n      preference: [2\n      /* BELOW */\n      , 1\n      /* ABOVE */\n      ]\n    } : null;\n  };\n\n  RenameInputField.prototype.acceptInput = function () {\n    if (this._currentAcceptInput) {\n      this._currentAcceptInput();\n    }\n  };\n\n  RenameInputField.prototype.cancelInput = function (focusEditor) {\n    if (this._currentCancelInput) {\n      this._currentCancelInput(focusEditor);\n    }\n  };\n\n  RenameInputField.prototype.getInput = function (where, value, selectionStart, selectionEnd) {\n    var _this = this;\n\n    this._position = new Position(where.startLineNumber, where.startColumn);\n    this._inputField.value = value;\n\n    this._inputField.setAttribute('selectionStart', selectionStart.toString());\n\n    this._inputField.setAttribute('selectionEnd', selectionEnd.toString());\n\n    this._inputField.size = Math.max((where.endColumn - where.startColumn) * 1.1, 20);\n    var disposeOnDone = [];\n\n    var always = function always() {\n      dispose(disposeOnDone);\n\n      _this._hide();\n    };\n\n    return new Promise(function (resolve) {\n      _this._currentCancelInput = function (focusEditor) {\n        _this._currentAcceptInput = null;\n        _this._currentCancelInput = null;\n        resolve(focusEditor);\n        return true;\n      };\n\n      _this._currentAcceptInput = function () {\n        if (_this._inputField.value.trim().length === 0 || _this._inputField.value === value) {\n          // empty or whitespace only or not changed\n          _this.cancelInput(true);\n\n          return;\n        }\n\n        _this._currentAcceptInput = null;\n        _this._currentCancelInput = null;\n        resolve(_this._inputField.value);\n      };\n\n      var onCursorChanged = function onCursorChanged() {\n        var editorPosition = _this._editor.getPosition();\n\n        if (!editorPosition || !Range.containsPosition(where, editorPosition)) {\n          _this.cancelInput(true);\n        }\n      };\n\n      disposeOnDone.push(_this._editor.onDidChangeCursorSelection(onCursorChanged));\n      disposeOnDone.push(_this._editor.onDidBlurEditorWidget(function () {\n        return _this.cancelInput(false);\n      }));\n\n      _this._show();\n    }).then(function (newValue) {\n      always();\n      return newValue;\n    }, function (err) {\n      always();\n      return Promise.reject(err);\n    });\n  };\n\n  RenameInputField.prototype._show = function () {\n    var _this = this;\n\n    this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber, 0\n    /* Smooth */\n    );\n\n    this._visible = true;\n\n    this._visibleContextKey.set(true);\n\n    this._editor.layoutContentWidget(this);\n\n    setTimeout(function () {\n      _this._inputField.focus();\n\n      _this._inputField.setSelectionRange(parseInt(_this._inputField.getAttribute('selectionStart')), parseInt(_this._inputField.getAttribute('selectionEnd')));\n    }, 100);\n  };\n\n  RenameInputField.prototype._hide = function () {\n    this._visible = false;\n\n    this._visibleContextKey.reset();\n\n    this._editor.layoutContentWidget(this);\n  };\n\n  return RenameInputField;\n}();\n\nexport { RenameInputField };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nimport * as nls from '../../../nls.js';\nimport { illegalArgument, onUnexpectedError } from '../../../base/common/errors.js';\nimport { IContextKeyService, ContextKeyExpr } from '../../../platform/contextkey/common/contextkey.js';\nimport { IProgressService } from '../../../platform/progress/common/progress.js';\nimport { registerEditorAction, registerEditorContribution, EditorAction, EditorCommand, registerEditorCommand, registerDefaultLanguageCommand } from '../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport { RenameInputField, CONTEXT_RENAME_INPUT_VISIBLE } from './renameInputField.js';\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\nimport { RenameProviderRegistry } from '../../common/modes.js';\nimport { Position } from '../../common/core/position.js';\nimport { alert } from '../../../base/browser/ui/aria/aria.js';\nimport { Range } from '../../common/core/range.js';\nimport { MessageController } from '../message/messageController.js';\nimport { EditorState } from '../../browser/core/editorState.js';\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\nimport { IBulkEditService } from '../../browser/services/bulkEditService.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { createCancelablePromise } from '../../../base/common/async.js';\n\nvar RenameSkeleton =\n/** @class */\nfunction () {\n  function RenameSkeleton(model, position) {\n    this.model = model;\n    this.position = position;\n    this._providers = RenameProviderRegistry.ordered(model);\n  }\n\n  RenameSkeleton.prototype.hasProvider = function () {\n    return this._providers.length > 0;\n  };\n\n  RenameSkeleton.prototype.resolveRenameLocation = function (token) {\n    return __awaiter(this, void 0, void 0, function () {\n      var firstProvider, res, word;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            firstProvider = this._providers[0];\n\n            if (!firstProvider) {\n              return [2\n              /*return*/\n              , undefined];\n            }\n\n            if (!firstProvider.resolveRenameLocation) return [3\n            /*break*/\n            , 2];\n            return [4\n            /*yield*/\n            , firstProvider.resolveRenameLocation(this.model, this.position, token)];\n\n          case 1:\n            res = _a.sent();\n            _a.label = 2;\n\n          case 2:\n            if (!res) {\n              word = this.model.getWordAtPosition(this.position);\n\n              if (word) {\n                return [2\n                /*return*/\n                , {\n                  range: new Range(this.position.lineNumber, word.startColumn, this.position.lineNumber, word.endColumn),\n                  text: word.word\n                }];\n              }\n            }\n\n            return [2\n            /*return*/\n            , res];\n        }\n      });\n    });\n  };\n\n  RenameSkeleton.prototype.provideRenameEdits = function (newName, i, rejects, token) {\n    return __awaiter(this, void 0, void 0, function () {\n      var provider, result;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            provider = this._providers[i];\n\n            if (!provider) {\n              return [2\n              /*return*/\n              , {\n                edits: [],\n                rejectReason: rejects.join('\\n')\n              }];\n            }\n\n            return [4\n            /*yield*/\n            , provider.provideRenameEdits(this.model, this.position, newName, token)];\n\n          case 1:\n            result = _a.sent();\n\n            if (!result) {\n              return [2\n              /*return*/\n              , this.provideRenameEdits(newName, i + 1, rejects.concat(nls.localize('no result', \"No result.\")), token)];\n            } else if (result.rejectReason) {\n              return [2\n              /*return*/\n              , this.provideRenameEdits(newName, i + 1, rejects.concat(result.rejectReason), token)];\n            }\n\n            return [2\n            /*return*/\n            , result];\n        }\n      });\n    });\n  };\n\n  return RenameSkeleton;\n}();\n\nexport function rename(model, position, newName) {\n  return __awaiter(this, void 0, void 0, function () {\n    return __generator(this, function (_a) {\n      return [2\n      /*return*/\n      , new RenameSkeleton(model, position).provideRenameEdits(newName, 0, [], CancellationToken.None)];\n    });\n  });\n} // ---  register actions and commands\n\nvar RenameController =\n/** @class */\nfunction (_super) {\n  __extends(RenameController, _super);\n\n  function RenameController(editor, _notificationService, _bulkEditService, _progressService, _contextKeyService, _themeService) {\n    var _this = _super.call(this) || this;\n\n    _this.editor = editor;\n    _this._notificationService = _notificationService;\n    _this._bulkEditService = _bulkEditService;\n    _this._progressService = _progressService;\n    _this._contextKeyService = _contextKeyService;\n    _this._themeService = _themeService;\n    _this._renameOperationIdPool = 1;\n\n    _this._register(_this.editor.onDidChangeModel(function () {\n      return _this.onModelChanged();\n    }));\n\n    _this._register(_this.editor.onDidChangeModelLanguage(function () {\n      return _this.onModelChanged();\n    }));\n\n    _this._register(_this.editor.onDidChangeCursorSelection(function () {\n      return _this.onModelChanged();\n    }));\n\n    return _this;\n  }\n\n  RenameController.get = function (editor) {\n    return editor.getContribution(RenameController.ID);\n  };\n\n  Object.defineProperty(RenameController.prototype, \"renameInputField\", {\n    get: function get() {\n      if (!this._renameInputField) {\n        this._renameInputField = this._register(new RenameInputField(this.editor, this._themeService, this._contextKeyService));\n      }\n\n      return this._renameInputField;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  RenameController.prototype.getId = function () {\n    return RenameController.ID;\n  };\n\n  RenameController.prototype.run = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var id;\n\n      var _this = this;\n\n      return __generator(this, function (_a) {\n        if (this._activeRename) {\n          this._activeRename.operation.cancel();\n        }\n\n        id = this._renameOperationIdPool++;\n        this._activeRename = {\n          id: id,\n          operation: createCancelablePromise(function (token) {\n            return _this.doRename(token, id);\n          })\n        };\n        return [2\n        /*return*/\n        , this._activeRename.operation];\n      });\n    });\n  };\n\n  RenameController.prototype.doRename = function (token, id) {\n    return __awaiter(this, void 0, void 0, function () {\n      var position, skeleton, loc, resolveLocationOperation, e_1, selection, selectionStart, selectionEnd;\n\n      var _this = this;\n\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (!this.editor.hasModel()) {\n              return [2\n              /*return*/\n              , undefined];\n            }\n\n            position = this.editor.getPosition();\n            skeleton = new RenameSkeleton(this.editor.getModel(), position);\n\n            if (!skeleton.hasProvider()) {\n              return [2\n              /*return*/\n              , undefined];\n            }\n\n            _a.label = 1;\n\n          case 1:\n            _a.trys.push([1, 3,, 4]);\n\n            resolveLocationOperation = skeleton.resolveRenameLocation(token);\n\n            this._progressService.showWhile(resolveLocationOperation, 250);\n\n            return [4\n            /*yield*/\n            , resolveLocationOperation];\n\n          case 2:\n            loc = _a.sent();\n            return [3\n            /*break*/\n            , 4];\n\n          case 3:\n            e_1 = _a.sent();\n            MessageController.get(this.editor).showMessage(e_1 || nls.localize('resolveRenameLocationFailed', \"An unknown error occurred while resolving rename location\"), position);\n            return [2\n            /*return*/\n            , undefined];\n\n          case 4:\n            if (!loc) {\n              return [2\n              /*return*/\n              , undefined];\n            }\n\n            if (loc.rejectReason) {\n              MessageController.get(this.editor).showMessage(loc.rejectReason, position);\n              return [2\n              /*return*/\n              , undefined];\n            }\n\n            if (!this._activeRename || this._activeRename.id !== id) {\n              return [2\n              /*return*/\n              , undefined];\n            }\n\n            selection = this.editor.getSelection();\n            selectionStart = 0;\n            selectionEnd = loc.text.length;\n\n            if (!Range.isEmpty(selection) && !Range.spansMultipleLines(selection) && Range.containsRange(loc.range, selection)) {\n              selectionStart = Math.max(0, selection.startColumn - loc.range.startColumn);\n              selectionEnd = Math.min(loc.range.endColumn, selection.endColumn) - loc.range.startColumn;\n            }\n\n            return [2\n            /*return*/\n            , this.renameInputField.getInput(loc.range, loc.text, selectionStart, selectionEnd).then(function (newNameOrFocusFlag) {\n              if (typeof newNameOrFocusFlag === 'boolean') {\n                if (newNameOrFocusFlag) {\n                  _this.editor.focus();\n                }\n\n                return undefined;\n              }\n\n              _this.editor.focus();\n\n              var state = new EditorState(_this.editor, 4\n              /* Position */\n              | 1\n              /* Value */\n              | 2\n              /* Selection */\n              | 8\n              /* Scroll */\n              );\n              var renameOperation = Promise.resolve(skeleton.provideRenameEdits(newNameOrFocusFlag, 0, [], token).then(function (result) {\n                if (!_this.editor.hasModel()) {\n                  return undefined;\n                }\n\n                if (result.rejectReason) {\n                  if (state.validate(_this.editor)) {\n                    MessageController.get(_this.editor).showMessage(result.rejectReason, _this.editor.getPosition());\n                  } else {\n                    _this._notificationService.info(result.rejectReason);\n                  }\n\n                  return undefined;\n                }\n\n                return _this._bulkEditService.apply(result, {\n                  editor: _this.editor\n                }).then(function (result) {\n                  // alert\n                  if (result.ariaSummary) {\n                    alert(nls.localize('aria', \"Successfully renamed '{0}' to '{1}'. Summary: {2}\", loc.text, newNameOrFocusFlag, result.ariaSummary));\n                  }\n                });\n              }, function (err) {\n                _this._notificationService.error(nls.localize('rename.failed', \"Rename failed to execute.\"));\n\n                return Promise.reject(err);\n              }));\n\n              _this._progressService.showWhile(renameOperation, 250);\n\n              return renameOperation;\n            })];\n        }\n      });\n    });\n  };\n\n  RenameController.prototype.acceptRenameInput = function () {\n    if (this._renameInputField) {\n      this._renameInputField.acceptInput();\n    }\n  };\n\n  RenameController.prototype.cancelRenameInput = function () {\n    if (this._renameInputField) {\n      this._renameInputField.cancelInput(true);\n    }\n  };\n\n  RenameController.prototype.onModelChanged = function () {\n    if (this._activeRename) {\n      this._activeRename.operation.cancel();\n\n      this._activeRename = undefined;\n    }\n  };\n\n  RenameController.ID = 'editor.contrib.renameController';\n  RenameController = __decorate([__param(1, INotificationService), __param(2, IBulkEditService), __param(3, IProgressService), __param(4, IContextKeyService), __param(5, IThemeService)], RenameController);\n  return RenameController;\n}(Disposable); // ---- action implementation\n\n\nvar RenameAction =\n/** @class */\nfunction (_super) {\n  __extends(RenameAction, _super);\n\n  function RenameAction() {\n    return _super.call(this, {\n      id: 'editor.action.rename',\n      label: nls.localize('rename.label', \"Rename Symbol\"),\n      alias: 'Rename Symbol',\n      precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasRenameProvider),\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 60\n        /* F2 */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      },\n      menuOpts: {\n        group: '1_modification',\n        order: 1.1\n      }\n    }) || this;\n  }\n\n  RenameAction.prototype.runCommand = function (accessor, args) {\n    var _this = this;\n\n    var editorService = accessor.get(ICodeEditorService);\n\n    var _a = Array.isArray(args) && args || [undefined, undefined],\n        uri = _a[0],\n        pos = _a[1];\n\n    if (URI.isUri(uri) && Position.isIPosition(pos)) {\n      return editorService.openCodeEditor({\n        resource: uri\n      }, editorService.getActiveCodeEditor()).then(function (editor) {\n        if (!editor) {\n          return;\n        }\n\n        editor.setPosition(pos);\n        editor.invokeWithinContext(function (accessor) {\n          _this.reportTelemetry(accessor, editor);\n\n          return _this.run(accessor, editor);\n        });\n      }, onUnexpectedError);\n    }\n\n    return _super.prototype.runCommand.call(this, accessor, args);\n  };\n\n  RenameAction.prototype.run = function (accessor, editor) {\n    var controller = RenameController.get(editor);\n\n    if (controller) {\n      return controller.run();\n    }\n\n    return Promise.resolve();\n  };\n\n  return RenameAction;\n}(EditorAction);\n\nexport { RenameAction };\nregisterEditorContribution(RenameController);\nregisterEditorAction(RenameAction);\nvar RenameCommand = EditorCommand.bindToContribution(RenameController.get);\nregisterEditorCommand(new RenameCommand({\n  id: 'acceptRenameInput',\n  precondition: CONTEXT_RENAME_INPUT_VISIBLE,\n  handler: function handler(x) {\n    return x.acceptRenameInput();\n  },\n  kbOpts: {\n    weight: 100\n    /* EditorContrib */\n    + 99,\n    kbExpr: EditorContextKeys.focus,\n    primary: 3\n    /* Enter */\n\n  }\n}));\nregisterEditorCommand(new RenameCommand({\n  id: 'cancelRenameInput',\n  precondition: CONTEXT_RENAME_INPUT_VISIBLE,\n  handler: function handler(x) {\n    return x.cancelRenameInput();\n  },\n  kbOpts: {\n    weight: 100\n    /* EditorContrib */\n    + 99,\n    kbExpr: EditorContextKeys.focus,\n    primary: 9\n    /* Escape */\n    ,\n    secondary: [1024\n    /* Shift */\n    | 9\n    /* Escape */\n    ]\n  }\n})); // ---- api bridge command\n\nregisterDefaultLanguageCommand('_executeDocumentRenameProvider', function (model, position, args) {\n  var newName = args.newName;\n\n  if (typeof newName !== 'string') {\n    throw illegalArgument('newName');\n  }\n\n  return rename(model, position, newName);\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../common/core/range.js';\nimport { isUpperAsciiLetter, isLowerAsciiLetter } from '../../../base/common/strings.js';\n\nvar WordSelectionRangeProvider =\n/** @class */\nfunction () {\n  function WordSelectionRangeProvider() {}\n\n  WordSelectionRangeProvider.prototype.provideSelectionRanges = function (model, positions) {\n    var result = [];\n\n    for (var _i = 0, positions_1 = positions; _i < positions_1.length; _i++) {\n      var position = positions_1[_i];\n      var bucket = [];\n      result.push(bucket);\n\n      this._addInWordRanges(bucket, model, position);\n\n      this._addWordRanges(bucket, model, position);\n\n      this._addWhitespaceLine(bucket, model, position);\n\n      bucket.push({\n        range: model.getFullModelRange(),\n        kind: 'statement.all'\n      });\n    }\n\n    return result;\n  };\n\n  WordSelectionRangeProvider.prototype._addInWordRanges = function (bucket, model, pos) {\n    var obj = model.getWordAtPosition(pos);\n\n    if (!obj) {\n      return;\n    }\n\n    var word = obj.word,\n        startColumn = obj.startColumn;\n    var offset = pos.column - startColumn;\n    var start = offset;\n    var end = offset;\n    var lastCh = 0; // LEFT anchor (start)\n\n    for (; start >= 0; start--) {\n      var ch = word.charCodeAt(start);\n\n      if (ch === 95\n      /* Underline */\n      || ch === 45\n      /* Dash */\n      ) {\n          // foo-bar OR foo_bar\n          break;\n        } else if (isLowerAsciiLetter(ch) && isUpperAsciiLetter(lastCh)) {\n        // fooBar\n        break;\n      }\n\n      lastCh = ch;\n    }\n\n    start += 1; // RIGHT anchor (end)\n\n    for (; end < word.length; end++) {\n      var ch = word.charCodeAt(end);\n\n      if (isUpperAsciiLetter(ch) && isLowerAsciiLetter(lastCh)) {\n        // fooBar\n        break;\n      } else if (ch === 95\n      /* Underline */\n      || ch === 45\n      /* Dash */\n      ) {\n          // foo-bar OR foo_bar\n          break;\n        }\n\n      lastCh = ch;\n    }\n\n    if (start < end) {\n      bucket.push({\n        range: new Range(pos.lineNumber, startColumn + start, pos.lineNumber, startColumn + end),\n        kind: 'statement.word.part'\n      });\n    }\n  };\n\n  WordSelectionRangeProvider.prototype._addWordRanges = function (bucket, model, pos) {\n    var word = model.getWordAtPosition(pos);\n\n    if (word) {\n      bucket.push({\n        range: new Range(pos.lineNumber, word.startColumn, pos.lineNumber, word.endColumn),\n        kind: 'statement.word'\n      });\n    }\n  };\n\n  WordSelectionRangeProvider.prototype._addWhitespaceLine = function (bucket, model, pos) {\n    if (model.getLineLength(pos.lineNumber) > 0 && model.getLineFirstNonWhitespaceColumn(pos.lineNumber) === 0 && model.getLineLastNonWhitespaceColumn(pos.lineNumber) === 0) {\n      bucket.push({\n        range: new Range(pos.lineNumber, 1, pos.lineNumber, model.getLineMaxColumn(pos.lineNumber)),\n        kind: 'statement.line'\n      });\n    }\n  };\n\n  return WordSelectionRangeProvider;\n}();\n\nexport { WordSelectionRangeProvider };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nimport { Position } from '../../common/core/position.js';\nimport { Range } from '../../common/core/range.js';\nimport { LinkedList } from '../../../base/common/linkedList.js';\n\nvar BracketSelectionRangeProvider =\n/** @class */\nfunction () {\n  function BracketSelectionRangeProvider() {}\n\n  BracketSelectionRangeProvider.prototype.provideSelectionRanges = function (model, positions) {\n    return __awaiter(this, void 0, void 0, function () {\n      var result, _loop_1, _i, positions_1, position;\n\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            result = [];\n\n            _loop_1 = function _loop_1(position) {\n              var bucket, ranges;\n              return __generator(this, function (_a) {\n                switch (_a.label) {\n                  case 0:\n                    bucket = [];\n                    result.push(bucket);\n                    ranges = new Map();\n                    return [4\n                    /*yield*/\n                    , new Promise(function (resolve) {\n                      return BracketSelectionRangeProvider._bracketsRightYield(resolve, 0, model, position, ranges);\n                    })];\n\n                  case 1:\n                    _a.sent();\n\n                    return [4\n                    /*yield*/\n                    , new Promise(function (resolve) {\n                      return BracketSelectionRangeProvider._bracketsLeftYield(resolve, 0, model, position, ranges, bucket);\n                    })];\n\n                  case 2:\n                    _a.sent();\n\n                    return [2\n                    /*return*/\n                    ];\n                }\n              });\n            };\n\n            _i = 0, positions_1 = positions;\n            _a.label = 1;\n\n          case 1:\n            if (!(_i < positions_1.length)) return [3\n            /*break*/\n            , 4];\n            position = positions_1[_i];\n            return [5\n            /*yield**/\n            , _loop_1(position)];\n\n          case 2:\n            _a.sent();\n\n            _a.label = 3;\n\n          case 3:\n            _i++;\n            return [3\n            /*break*/\n            , 1];\n\n          case 4:\n            return [2\n            /*return*/\n            , result];\n        }\n      });\n    });\n  };\n\n  BracketSelectionRangeProvider._bracketsRightYield = function (resolve, round, model, pos, ranges) {\n    var counts = new Map();\n    var t1 = Date.now();\n\n    while (true) {\n      if (round >= BracketSelectionRangeProvider._maxRounds) {\n        resolve();\n        break;\n      }\n\n      if (!pos) {\n        resolve();\n        break;\n      }\n\n      var bracket = model.findNextBracket(pos);\n\n      if (!bracket) {\n        resolve();\n        break;\n      }\n\n      var d = Date.now() - t1;\n\n      if (d > BracketSelectionRangeProvider._maxDuration) {\n        setTimeout(function () {\n          return BracketSelectionRangeProvider._bracketsRightYield(resolve, round + 1, model, pos, ranges);\n        });\n        break;\n      }\n\n      var key = bracket.close;\n\n      if (bracket.isOpen) {\n        // wait for closing\n        var val = counts.has(key) ? counts.get(key) : 0;\n        counts.set(key, val + 1);\n      } else {\n        // process closing\n        var val = counts.has(key) ? counts.get(key) : 0;\n        val -= 1;\n        counts.set(key, Math.max(0, val));\n\n        if (val < 0) {\n          var list = ranges.get(key);\n\n          if (!list) {\n            list = new LinkedList();\n            ranges.set(key, list);\n          }\n\n          list.push(bracket.range);\n        }\n      }\n\n      pos = bracket.range.getEndPosition();\n    }\n  };\n\n  BracketSelectionRangeProvider._bracketsLeftYield = function (resolve, round, model, pos, ranges, bucket) {\n    var counts = new Map();\n    var t1 = Date.now();\n\n    while (true) {\n      if (round >= BracketSelectionRangeProvider._maxRounds && ranges.size === 0) {\n        resolve();\n        break;\n      }\n\n      if (!pos) {\n        resolve();\n        break;\n      }\n\n      var bracket = model.findPrevBracket(pos);\n\n      if (!bracket) {\n        resolve();\n        break;\n      }\n\n      var d = Date.now() - t1;\n\n      if (d > BracketSelectionRangeProvider._maxDuration) {\n        setTimeout(function () {\n          return BracketSelectionRangeProvider._bracketsLeftYield(resolve, round + 1, model, pos, ranges, bucket);\n        });\n        break;\n      }\n\n      var key = bracket.close;\n\n      if (!bracket.isOpen) {\n        // wait for opening\n        var val = counts.has(key) ? counts.get(key) : 0;\n        counts.set(key, val + 1);\n      } else {\n        // opening\n        var val = counts.has(key) ? counts.get(key) : 0;\n        val -= 1;\n        counts.set(key, Math.max(0, val));\n\n        if (val < 0) {\n          var list = ranges.get(key);\n\n          if (list) {\n            var closing = list.shift();\n\n            if (list.size === 0) {\n              ranges.delete(key);\n            }\n\n            var innerBracket = Range.fromPositions(bracket.range.getEndPosition(), closing.getStartPosition());\n            var outerBracket = Range.fromPositions(bracket.range.getStartPosition(), closing.getEndPosition());\n            bucket.push({\n              range: innerBracket,\n              kind: 'statement.brackets'\n            });\n            bucket.push({\n              range: outerBracket,\n              kind: 'statement.brackets.full'\n            });\n\n            BracketSelectionRangeProvider._addBracketLeading(model, outerBracket, bucket);\n          }\n        }\n      }\n\n      pos = bracket.range.getStartPosition();\n    }\n  };\n\n  BracketSelectionRangeProvider._addBracketLeading = function (model, bracket, bucket) {\n    if (bracket.startLineNumber === bracket.endLineNumber) {\n      return;\n    } // xxxxxxxx {\n    //\n    // }\n\n\n    var startLine = bracket.startLineNumber;\n    var column = model.getLineFirstNonWhitespaceColumn(startLine);\n\n    if (column !== 0 && column !== bracket.startColumn) {\n      bucket.push({\n        range: Range.fromPositions(new Position(startLine, column), bracket.getEndPosition()),\n        kind: 'statement.brackets.leading'\n      });\n      bucket.push({\n        range: Range.fromPositions(new Position(startLine, 1), bracket.getEndPosition()),\n        kind: 'statement.brackets.leading.full'\n      });\n    } // xxxxxxxx\n    // {\n    //\n    // }\n\n\n    var aboveLine = startLine - 1;\n\n    if (aboveLine > 0) {\n      var column_1 = model.getLineFirstNonWhitespaceColumn(aboveLine);\n\n      if (column_1 === bracket.startColumn && column_1 !== model.getLineLastNonWhitespaceColumn(aboveLine)) {\n        bucket.push({\n          range: Range.fromPositions(new Position(aboveLine, column_1), bracket.getEndPosition()),\n          kind: 'statement.brackets.leading'\n        });\n        bucket.push({\n          range: Range.fromPositions(new Position(aboveLine, 1), bracket.getEndPosition()),\n          kind: 'statement.brackets.leading.full'\n        });\n      }\n    }\n  };\n\n  BracketSelectionRangeProvider._maxDuration = 30;\n  BracketSelectionRangeProvider._maxRounds = 2;\n  return BracketSelectionRangeProvider;\n}();\n\nexport { BracketSelectionRangeProvider };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nimport * as arrays from '../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution, registerDefaultLanguageCommand } from '../../browser/editorExtensions.js';\nimport { Position } from '../../common/core/position.js';\nimport { Range } from '../../common/core/range.js';\nimport { Selection } from '../../common/core/selection.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport * as modes from '../../common/modes.js';\nimport * as nls from '../../../nls.js';\nimport { dispose } from '../../../base/common/lifecycle.js';\nimport { WordSelectionRangeProvider } from './wordSelections.js';\nimport { BracketSelectionRangeProvider } from './bracketSelections.js';\nimport { CommandsRegistry } from '../../../platform/commands/common/commands.js';\nimport { onUnexpectedExternalError } from '../../../base/common/errors.js';\n\nvar SelectionRanges =\n/** @class */\nfunction () {\n  function SelectionRanges(index, ranges) {\n    this.index = index;\n    this.ranges = ranges;\n  }\n\n  SelectionRanges.prototype.mov = function (fwd) {\n    var index = this.index + (fwd ? 1 : -1);\n\n    if (index < 0 || index >= this.ranges.length) {\n      return this;\n    }\n\n    var res = new SelectionRanges(index, this.ranges);\n\n    if (res.ranges[index].equalsRange(this.ranges[this.index])) {\n      // next range equals this range, retry with next-next\n      return res.mov(fwd);\n    }\n\n    return res;\n  };\n\n  return SelectionRanges;\n}();\n\nvar SmartSelectController =\n/** @class */\nfunction () {\n  function SmartSelectController(editor) {\n    this._ignoreSelection = false;\n    this._editor = editor;\n  }\n\n  SmartSelectController.get = function (editor) {\n    return editor.getContribution(SmartSelectController._id);\n  };\n\n  SmartSelectController.prototype.dispose = function () {\n    dispose(this._selectionListener);\n  };\n\n  SmartSelectController.prototype.getId = function () {\n    return SmartSelectController._id;\n  };\n\n  SmartSelectController.prototype.run = function (forward) {\n    var _this = this;\n\n    if (!this._editor.hasModel()) {\n      return;\n    }\n\n    var selections = this._editor.getSelections();\n\n    var model = this._editor.getModel();\n\n    if (!modes.SelectionRangeRegistry.has(model)) {\n      return;\n    }\n\n    var promise = Promise.resolve(undefined);\n\n    if (!this._state) {\n      promise = provideSelectionRanges(model, selections.map(function (s) {\n        return s.getPosition();\n      }), CancellationToken.None).then(function (ranges) {\n        if (!arrays.isNonEmptyArray(ranges) || ranges.length !== selections.length) {\n          // invalid result\n          return;\n        }\n\n        if (!_this._editor.hasModel() || !arrays.equals(_this._editor.getSelections(), selections, function (a, b) {\n          return a.equalsSelection(b);\n        })) {\n          // invalid editor state\n          return;\n        }\n\n        var _loop_1 = function _loop_1(i) {\n          ranges[i] = ranges[i].filter(function (range) {\n            // filter ranges inside the selection\n            return range.containsPosition(selections[i].getStartPosition()) && range.containsPosition(selections[i].getEndPosition());\n          }); // prepend current selection\n\n          ranges[i].unshift(selections[i]);\n        };\n\n        for (var i = 0; i < ranges.length; i++) {\n          _loop_1(i);\n        }\n\n        _this._state = ranges.map(function (ranges) {\n          return new SelectionRanges(0, ranges);\n        }); // listen to caret move and forget about state\n\n        dispose(_this._selectionListener);\n        _this._selectionListener = _this._editor.onDidChangeCursorPosition(function () {\n          if (!_this._ignoreSelection) {\n            dispose(_this._selectionListener);\n            _this._state = undefined;\n          }\n        });\n      });\n    }\n\n    return promise.then(function () {\n      if (!_this._state) {\n        // no state\n        return;\n      }\n\n      _this._state = _this._state.map(function (state) {\n        return state.mov(forward);\n      });\n\n      var selections = _this._state.map(function (state) {\n        return Selection.fromPositions(state.ranges[state.index].getStartPosition(), state.ranges[state.index].getEndPosition());\n      });\n\n      _this._ignoreSelection = true;\n\n      try {\n        _this._editor.setSelections(selections);\n      } finally {\n        _this._ignoreSelection = false;\n      }\n    });\n  };\n\n  SmartSelectController._id = 'editor.contrib.smartSelectController';\n  return SmartSelectController;\n}();\n\nvar AbstractSmartSelect =\n/** @class */\nfunction (_super) {\n  __extends(AbstractSmartSelect, _super);\n\n  function AbstractSmartSelect(forward, opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this._forward = forward;\n    return _this;\n  }\n\n  AbstractSmartSelect.prototype.run = function (_accessor, editor) {\n    return __awaiter(this, void 0, void 0, function () {\n      var controller;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            controller = SmartSelectController.get(editor);\n            if (!controller) return [3\n            /*break*/\n            , 2];\n            return [4\n            /*yield*/\n            , controller.run(this._forward)];\n\n          case 1:\n            _a.sent();\n\n            _a.label = 2;\n\n          case 2:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  return AbstractSmartSelect;\n}(EditorAction);\n\nvar GrowSelectionAction =\n/** @class */\nfunction (_super) {\n  __extends(GrowSelectionAction, _super);\n\n  function GrowSelectionAction() {\n    return _super.call(this, true, {\n      id: 'editor.action.smartSelect.expand',\n      label: nls.localize('smartSelect.expand', \"Expand Selection\"),\n      alias: 'Expand Selection',\n      precondition: null,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 1024\n        /* Shift */\n        | 512\n        /* Alt */\n        | 17\n        /* RightArrow */\n        ,\n        mac: {\n          primary: 2048\n          /* CtrlCmd */\n          | 256\n          /* WinCtrl */\n          | 1024\n          /* Shift */\n          | 17\n          /* RightArrow */\n\n        },\n        weight: 100\n        /* EditorContrib */\n\n      },\n      menubarOpts: {\n        menuId: 22\n        /* MenubarSelectionMenu */\n        ,\n        group: '1_basic',\n        title: nls.localize({\n          key: 'miSmartSelectGrow',\n          comment: ['&& denotes a mnemonic']\n        }, \"&&Expand Selection\"),\n        order: 2\n      }\n    }) || this;\n  }\n\n  return GrowSelectionAction;\n}(AbstractSmartSelect); // renamed command id\n\n\nCommandsRegistry.registerCommandAlias('editor.action.smartSelect.grow', 'editor.action.smartSelect.expand');\n\nvar ShrinkSelectionAction =\n/** @class */\nfunction (_super) {\n  __extends(ShrinkSelectionAction, _super);\n\n  function ShrinkSelectionAction() {\n    return _super.call(this, false, {\n      id: 'editor.action.smartSelect.shrink',\n      label: nls.localize('smartSelect.shrink', \"Shrink Selection\"),\n      alias: 'Shrink Selection',\n      precondition: null,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 1024\n        /* Shift */\n        | 512\n        /* Alt */\n        | 15\n        /* LeftArrow */\n        ,\n        mac: {\n          primary: 2048\n          /* CtrlCmd */\n          | 256\n          /* WinCtrl */\n          | 1024\n          /* Shift */\n          | 15\n          /* LeftArrow */\n\n        },\n        weight: 100\n        /* EditorContrib */\n\n      },\n      menubarOpts: {\n        menuId: 22\n        /* MenubarSelectionMenu */\n        ,\n        group: '1_basic',\n        title: nls.localize({\n          key: 'miSmartSelectShrink',\n          comment: ['&& denotes a mnemonic']\n        }, \"&&Shrink Selection\"),\n        order: 3\n      }\n    }) || this;\n  }\n\n  return ShrinkSelectionAction;\n}(AbstractSmartSelect);\n\nregisterEditorContribution(SmartSelectController);\nregisterEditorAction(GrowSelectionAction);\nregisterEditorAction(ShrinkSelectionAction); // word selection\n\nmodes.SelectionRangeRegistry.register('*', new WordSelectionRangeProvider());\nexport function provideSelectionRanges(model, positions, token) {\n  var providers = modes.SelectionRangeRegistry.all(model);\n\n  if (providers.length === 1) {\n    // add word selection and bracket selection when no provider exists\n    providers.unshift(new BracketSelectionRangeProvider());\n  }\n\n  var work = [];\n  var allRawRanges = [];\n\n  for (var _i = 0, providers_1 = providers; _i < providers_1.length; _i++) {\n    var provider = providers_1[_i];\n    work.push(Promise.resolve(provider.provideSelectionRanges(model, positions, token)).then(function (allProviderRanges) {\n      if (arrays.isNonEmptyArray(allProviderRanges) && allProviderRanges.length === positions.length) {\n        for (var i = 0; i < positions.length; i++) {\n          if (!allRawRanges[i]) {\n            allRawRanges[i] = [];\n          }\n\n          for (var _i = 0, _a = allProviderRanges[i]; _i < _a.length; _i++) {\n            var oneProviderRanges = _a[_i];\n\n            if (Range.isIRange(oneProviderRanges.range) && Range.containsPosition(oneProviderRanges.range, positions[i])) {\n              allRawRanges[i].push(Range.lift(oneProviderRanges.range));\n            }\n          }\n        }\n      }\n    }, onUnexpectedExternalError));\n  }\n\n  return Promise.all(work).then(function () {\n    return allRawRanges.map(function (oneRawRanges) {\n      if (oneRawRanges.length === 0) {\n        return [];\n      } // sort all by start/end position\n\n\n      oneRawRanges.sort(function (a, b) {\n        if (Position.isBefore(a.getStartPosition(), b.getStartPosition())) {\n          return 1;\n        } else if (Position.isBefore(b.getStartPosition(), a.getStartPosition())) {\n          return -1;\n        } else if (Position.isBefore(a.getEndPosition(), b.getEndPosition())) {\n          return -1;\n        } else if (Position.isBefore(b.getEndPosition(), a.getEndPosition())) {\n          return 1;\n        } else {\n          return 0;\n        }\n      }); // remove ranges that don't contain the former range or that are equal to the\n      // former range\n\n      var oneRanges = [];\n      var last;\n\n      for (var _i = 0, oneRawRanges_1 = oneRawRanges; _i < oneRawRanges_1.length; _i++) {\n        var range = oneRawRanges_1[_i];\n\n        if (!last || Range.containsRange(range, last) && !Range.equalsRange(range, last)) {\n          oneRanges.push(range);\n          last = range;\n        }\n      } // add ranges that expand trivia at line starts and ends whenever a range\n      // wraps onto the a new line\n\n\n      var oneRangesWithTrivia = [oneRanges[0]];\n\n      for (var i = 1; i < oneRanges.length; i++) {\n        var prev = oneRanges[i - 1];\n        var cur = oneRanges[i];\n\n        if (cur.startLineNumber !== prev.startLineNumber || cur.endLineNumber !== prev.endLineNumber) {\n          // add line/block range without leading/failing whitespace\n          var rangeNoWhitespace = new Range(prev.startLineNumber, model.getLineFirstNonWhitespaceColumn(prev.startLineNumber), prev.endLineNumber, model.getLineLastNonWhitespaceColumn(prev.endLineNumber));\n\n          if (rangeNoWhitespace.containsRange(prev) && !rangeNoWhitespace.equalsRange(prev)) {\n            oneRangesWithTrivia.push(rangeNoWhitespace);\n          } // add line/block range\n\n\n          var rangeFull = new Range(prev.startLineNumber, 1, prev.endLineNumber, model.getLineMaxColumn(prev.endLineNumber));\n\n          if (rangeFull.containsRange(prev) && !rangeFull.equalsRange(rangeNoWhitespace)) {\n            oneRangesWithTrivia.push(rangeFull);\n          }\n        }\n\n        oneRangesWithTrivia.push(cur);\n      }\n\n      return oneRangesWithTrivia;\n    });\n  });\n}\nregisterDefaultLanguageCommand('_executeSelectionRangeProvider', function (model, _position, args) {\n  return provideSelectionRanges(model, args.positions, CancellationToken.None);\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { first } from '../../../base/common/async.js';\nimport { assign } from '../../../base/common/objects.js';\nimport { onUnexpectedExternalError, canceled, isPromiseCanceledError } from '../../../base/common/errors.js';\nimport { registerDefaultLanguageCommand } from '../../browser/editorExtensions.js';\nimport * as modes from '../../common/modes.js';\nimport { RawContextKey } from '../../../platform/contextkey/common/contextkey.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { Range } from '../../common/core/range.js';\nimport { FuzzyScore } from '../../../base/common/filters.js';\nexport var Context = {\n  Visible: new RawContextKey('suggestWidgetVisible', false),\n  MultipleSuggestions: new RawContextKey('suggestWidgetMultipleSuggestions', false),\n  MakesTextEdit: new RawContextKey('suggestionMakesTextEdit', true),\n  AcceptSuggestionsOnEnter: new RawContextKey('acceptSuggestionOnEnter', true)\n};\n\nvar CompletionItem =\n/** @class */\nfunction () {\n  function CompletionItem(position, completion, container, provider, model) {\n    this.position = position;\n    this.completion = completion;\n    this.container = container;\n    this.provider = provider; // sorting, filtering\n\n    this.score = FuzzyScore.Default;\n    this.distance = 0; // ensure lower-variants (perf)\n\n    this.labelLow = completion.label.toLowerCase();\n    this.sortTextLow = completion.sortText && completion.sortText.toLowerCase();\n    this.filterTextLow = completion.filterText && completion.filterText.toLowerCase(); // create the suggestion resolver\n\n    var resolveCompletionItem = provider.resolveCompletionItem;\n\n    if (typeof resolveCompletionItem !== 'function') {\n      this.resolve = function () {\n        return Promise.resolve();\n      };\n    } else {\n      var cached_1;\n\n      this.resolve = function (token) {\n        if (!cached_1) {\n          var isDone_1 = false;\n          cached_1 = Promise.resolve(resolveCompletionItem.call(provider, model, position, completion, token)).then(function (value) {\n            assign(completion, value);\n            isDone_1 = true;\n          }, function (err) {\n            if (isPromiseCanceledError(err)) {\n              // the IPC queue will reject the request with the\n              // cancellation error -> reset cached\n              cached_1 = undefined;\n            }\n          });\n          token.onCancellationRequested(function () {\n            if (!isDone_1) {\n              // cancellation after the request has been\n              // dispatched -> reset cache\n              cached_1 = undefined;\n            }\n          });\n        }\n\n        return cached_1;\n      };\n    }\n  }\n\n  return CompletionItem;\n}();\n\nexport { CompletionItem };\n\nvar CompletionOptions =\n/** @class */\nfunction () {\n  function CompletionOptions(snippetSortOrder, kindFilter, providerFilter) {\n    if (snippetSortOrder === void 0) {\n      snippetSortOrder = 2\n      /* Bottom */\n      ;\n    }\n\n    if (kindFilter === void 0) {\n      kindFilter = new Set();\n    }\n\n    if (providerFilter === void 0) {\n      providerFilter = new Set();\n    }\n\n    this.snippetSortOrder = snippetSortOrder;\n    this.kindFilter = kindFilter;\n    this.providerFilter = providerFilter;\n  }\n\n  CompletionOptions.default = new CompletionOptions();\n  return CompletionOptions;\n}();\n\nexport { CompletionOptions };\n\nvar _snippetSuggestSupport;\n\nexport function getSnippetSuggestSupport() {\n  return _snippetSuggestSupport;\n}\nexport function provideSuggestionItems(model, position, options, context, token) {\n  if (options === void 0) {\n    options = CompletionOptions.default;\n  }\n\n  if (context === void 0) {\n    context = {\n      triggerKind: 0\n      /* Invoke */\n\n    };\n  }\n\n  if (token === void 0) {\n    token = CancellationToken.None;\n  }\n\n  var allSuggestions = [];\n  var wordUntil = model.getWordUntilPosition(position);\n  var defaultRange = new Range(position.lineNumber, wordUntil.startColumn, position.lineNumber, wordUntil.endColumn);\n  position = position.clone(); // get provider groups, always add snippet suggestion provider\n\n  var supports = modes.CompletionProviderRegistry.orderedGroups(model); // add snippets provider unless turned off\n\n  if (!options.kindFilter.has(25\n  /* Snippet */\n  ) && _snippetSuggestSupport) {\n    supports.unshift([_snippetSuggestSupport]);\n  } // add suggestions from contributed providers - providers are ordered in groups of\n  // equal score and once a group produces a result the process stops\n\n\n  var hasResult = false;\n  var factory = supports.map(function (supports) {\n    return function () {\n      // for each support in the group ask for suggestions\n      return Promise.all(supports.map(function (provider) {\n        if (options.providerFilter.size > 0 && !options.providerFilter.has(provider)) {\n          return undefined;\n        }\n\n        return Promise.resolve(provider.provideCompletionItems(model, position, context, token)).then(function (container) {\n          var len = allSuggestions.length;\n\n          if (container) {\n            for (var _i = 0, _a = container.suggestions || []; _i < _a.length; _i++) {\n              var suggestion = _a[_i];\n\n              if (!options.kindFilter.has(suggestion.kind)) {\n                // fill in default range when missing\n                if (!suggestion.range) {\n                  suggestion.range = defaultRange;\n                }\n\n                allSuggestions.push(new CompletionItem(position, suggestion, container, provider, model));\n              }\n            }\n          }\n\n          if (len !== allSuggestions.length && provider !== _snippetSuggestSupport) {\n            hasResult = true;\n          }\n        }, onUnexpectedExternalError);\n      }));\n    };\n  });\n  var result = first(factory, function () {\n    // stop on result or cancellation\n    return hasResult || token.isCancellationRequested;\n  }).then(function () {\n    if (token.isCancellationRequested) {\n      return Promise.reject(canceled());\n    }\n\n    return allSuggestions.sort(getSuggestionComparator(options.snippetSortOrder));\n  }); // result.then(items => {\n  // \tconsole.log(model.getWordUntilPosition(position), items.map(item => `${item.suggestion.label}, type=${item.suggestion.type}, incomplete?${item.container.incomplete}, overwriteBefore=${item.suggestion.overwriteBefore}`));\n  // \treturn items;\n  // }, err => {\n  // \tconsole.warn(model.getWordUntilPosition(position), err);\n  // });\n\n  return result;\n}\n\nfunction defaultComparator(a, b) {\n  // check with 'sortText'\n  if (a.sortTextLow && b.sortTextLow) {\n    if (a.sortTextLow < b.sortTextLow) {\n      return -1;\n    } else if (a.sortTextLow > b.sortTextLow) {\n      return 1;\n    }\n  } // check with 'label'\n\n\n  if (a.completion.label < b.completion.label) {\n    return -1;\n  } else if (a.completion.label > b.completion.label) {\n    return 1;\n  } // check with 'type'\n\n\n  return a.completion.kind - b.completion.kind;\n}\n\nfunction snippetUpComparator(a, b) {\n  if (a.completion.kind !== b.completion.kind) {\n    if (a.completion.kind === 25\n    /* Snippet */\n    ) {\n        return -1;\n      } else if (b.completion.kind === 25\n    /* Snippet */\n    ) {\n        return 1;\n      }\n  }\n\n  return defaultComparator(a, b);\n}\n\nfunction snippetDownComparator(a, b) {\n  if (a.completion.kind !== b.completion.kind) {\n    if (a.completion.kind === 25\n    /* Snippet */\n    ) {\n        return 1;\n      } else if (b.completion.kind === 25\n    /* Snippet */\n    ) {\n        return -1;\n      }\n  }\n\n  return defaultComparator(a, b);\n}\n\nvar _snippetComparators = new Map();\n\n_snippetComparators.set(0\n/* Top */\n, snippetUpComparator);\n\n_snippetComparators.set(2\n/* Bottom */\n, snippetDownComparator);\n\n_snippetComparators.set(1\n/* Inline */\n, defaultComparator);\n\nexport function getSuggestionComparator(snippetConfig) {\n  return _snippetComparators.get(snippetConfig);\n}\nregisterDefaultLanguageCommand('_executeCompletionItemProvider', function (model, position, args) {\n  var result = {\n    incomplete: false,\n    suggestions: []\n  };\n  var resolving = [];\n  var maxItemsToResolve = args['maxItemsToResolve'] || 0;\n  return provideSuggestionItems(model, position).then(function (items) {\n    for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n      var item = items_1[_i];\n\n      if (resolving.length < maxItemsToResolve) {\n        resolving.push(item.resolve(CancellationToken.None));\n      }\n\n      result.incomplete = result.incomplete || item.container.incomplete;\n      result.suggestions.push(item.completion);\n    }\n  }).then(function () {\n    return Promise.all(resolving);\n  }).then(function () {\n    return result;\n  });\n});\n\nvar _provider = new (\n/** @class */\nfunction () {\n  function class_1() {\n    this.onlyOnceSuggestions = [];\n  }\n\n  class_1.prototype.provideCompletionItems = function () {\n    var suggestions = this.onlyOnceSuggestions.slice(0);\n    var result = {\n      suggestions: suggestions\n    };\n    this.onlyOnceSuggestions.length = 0;\n    return result;\n  };\n\n  return class_1;\n}())();\n\nmodes.CompletionProviderRegistry.register('*', _provider);\nexport function showSimpleSuggestions(editor, suggestions) {\n  setTimeout(function () {\n    var _a;\n\n    (_a = _provider.onlyOnceSuggestions).push.apply(_a, suggestions);\n\n    editor.getContribution('editor.contrib.suggestController').triggerSuggest(new Set().add(_provider));\n  }, 0);\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar _a;\n\nvar Scanner =\n/** @class */\nfunction () {\n  function Scanner() {\n    this.text('');\n  }\n\n  Scanner.isDigitCharacter = function (ch) {\n    return ch >= 48\n    /* Digit0 */\n    && ch <= 57\n    /* Digit9 */\n    ;\n  };\n\n  Scanner.isVariableCharacter = function (ch) {\n    return ch === 95\n    /* Underline */\n    || ch >= 97\n    /* a */\n    && ch <= 122\n    /* z */\n    || ch >= 65\n    /* A */\n    && ch <= 90\n    /* Z */\n    ;\n  };\n\n  Scanner.prototype.text = function (value) {\n    this.value = value;\n    this.pos = 0;\n  };\n\n  Scanner.prototype.tokenText = function (token) {\n    return this.value.substr(token.pos, token.len);\n  };\n\n  Scanner.prototype.next = function () {\n    if (this.pos >= this.value.length) {\n      return {\n        type: 14\n        /* EOF */\n        ,\n        pos: this.pos,\n        len: 0\n      };\n    }\n\n    var pos = this.pos;\n    var len = 0;\n    var ch = this.value.charCodeAt(pos);\n    var type; // static types\n\n    type = Scanner._table[ch];\n\n    if (typeof type === 'number') {\n      this.pos += 1;\n      return {\n        type: type,\n        pos: pos,\n        len: 1\n      };\n    } // number\n\n\n    if (Scanner.isDigitCharacter(ch)) {\n      type = 8\n      /* Int */\n      ;\n\n      do {\n        len += 1;\n        ch = this.value.charCodeAt(pos + len);\n      } while (Scanner.isDigitCharacter(ch));\n\n      this.pos += len;\n      return {\n        type: type,\n        pos: pos,\n        len: len\n      };\n    } // variable name\n\n\n    if (Scanner.isVariableCharacter(ch)) {\n      type = 9\n      /* VariableName */\n      ;\n\n      do {\n        ch = this.value.charCodeAt(pos + ++len);\n      } while (Scanner.isVariableCharacter(ch) || Scanner.isDigitCharacter(ch));\n\n      this.pos += len;\n      return {\n        type: type,\n        pos: pos,\n        len: len\n      };\n    } // format\n\n\n    type = 10\n    /* Format */\n    ;\n\n    do {\n      len += 1;\n      ch = this.value.charCodeAt(pos + len);\n    } while (!isNaN(ch) && typeof Scanner._table[ch] === 'undefined' // not static token\n    && !Scanner.isDigitCharacter(ch) // not number\n    && !Scanner.isVariableCharacter(ch) // not variable\n    );\n\n    this.pos += len;\n    return {\n      type: type,\n      pos: pos,\n      len: len\n    };\n  };\n\n  Scanner._table = (_a = {}, _a[36\n  /* DollarSign */\n  ] = 0\n  /* Dollar */\n  , _a[58\n  /* Colon */\n  ] = 1\n  /* Colon */\n  , _a[44\n  /* Comma */\n  ] = 2\n  /* Comma */\n  , _a[123\n  /* OpenCurlyBrace */\n  ] = 3\n  /* CurlyOpen */\n  , _a[125\n  /* CloseCurlyBrace */\n  ] = 4\n  /* CurlyClose */\n  , _a[92\n  /* Backslash */\n  ] = 5\n  /* Backslash */\n  , _a[47\n  /* Slash */\n  ] = 6\n  /* Forwardslash */\n  , _a[124\n  /* Pipe */\n  ] = 7\n  /* Pipe */\n  , _a[43\n  /* Plus */\n  ] = 11\n  /* Plus */\n  , _a[45\n  /* Dash */\n  ] = 12\n  /* Dash */\n  , _a[63\n  /* QuestionMark */\n  ] = 13\n  /* QuestionMark */\n  , _a);\n  return Scanner;\n}();\n\nexport { Scanner };\n\nvar Marker =\n/** @class */\nfunction () {\n  function Marker() {\n    this._children = [];\n  }\n\n  Marker.prototype.appendChild = function (child) {\n    if (child instanceof Text && this._children[this._children.length - 1] instanceof Text) {\n      // this and previous child are text -> merge them\n      this._children[this._children.length - 1].value += child.value;\n    } else {\n      // normal adoption of child\n      child.parent = this;\n\n      this._children.push(child);\n    }\n\n    return this;\n  };\n\n  Marker.prototype.replace = function (child, others) {\n    var parent = child.parent;\n    var idx = parent.children.indexOf(child);\n    var newChildren = parent.children.slice(0);\n    newChildren.splice.apply(newChildren, [idx, 1].concat(others));\n    parent._children = newChildren;\n\n    (function _fixParent(children, parent) {\n      for (var _i = 0, children_1 = children; _i < children_1.length; _i++) {\n        var child_1 = children_1[_i];\n        child_1.parent = parent;\n\n        _fixParent(child_1.children, child_1);\n      }\n    })(others, parent);\n  };\n\n  Object.defineProperty(Marker.prototype, \"children\", {\n    get: function get() {\n      return this._children;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Marker.prototype, \"snippet\", {\n    get: function get() {\n      var candidate = this;\n\n      while (true) {\n        if (!candidate) {\n          return undefined;\n        }\n\n        if (candidate instanceof TextmateSnippet) {\n          return candidate;\n        }\n\n        candidate = candidate.parent;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Marker.prototype.toString = function () {\n    return this.children.reduce(function (prev, cur) {\n      return prev + cur.toString();\n    }, '');\n  };\n\n  Marker.prototype.len = function () {\n    return 0;\n  };\n\n  return Marker;\n}();\n\nexport { Marker };\n\nvar Text =\n/** @class */\nfunction (_super) {\n  __extends(Text, _super);\n\n  function Text(value) {\n    var _this_1 = _super.call(this) || this;\n\n    _this_1.value = value;\n    return _this_1;\n  }\n\n  Text.prototype.toString = function () {\n    return this.value;\n  };\n\n  Text.prototype.len = function () {\n    return this.value.length;\n  };\n\n  Text.prototype.clone = function () {\n    return new Text(this.value);\n  };\n\n  return Text;\n}(Marker);\n\nexport { Text };\n\nvar TransformableMarker =\n/** @class */\nfunction (_super) {\n  __extends(TransformableMarker, _super);\n\n  function TransformableMarker() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  return TransformableMarker;\n}(Marker);\n\nexport { TransformableMarker };\n\nvar Placeholder =\n/** @class */\nfunction (_super) {\n  __extends(Placeholder, _super);\n\n  function Placeholder(index) {\n    var _this_1 = _super.call(this) || this;\n\n    _this_1.index = index;\n    return _this_1;\n  }\n\n  Placeholder.compareByIndex = function (a, b) {\n    if (a.index === b.index) {\n      return 0;\n    } else if (a.isFinalTabstop) {\n      return 1;\n    } else if (b.isFinalTabstop) {\n      return -1;\n    } else if (a.index < b.index) {\n      return -1;\n    } else if (a.index > b.index) {\n      return 1;\n    } else {\n      return 0;\n    }\n  };\n\n  Object.defineProperty(Placeholder.prototype, \"isFinalTabstop\", {\n    get: function get() {\n      return this.index === 0;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Placeholder.prototype, \"choice\", {\n    get: function get() {\n      return this._children.length === 1 && this._children[0] instanceof Choice ? this._children[0] : undefined;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Placeholder.prototype.clone = function () {\n    var ret = new Placeholder(this.index);\n\n    if (this.transform) {\n      ret.transform = this.transform.clone();\n    }\n\n    ret._children = this.children.map(function (child) {\n      return child.clone();\n    });\n    return ret;\n  };\n\n  return Placeholder;\n}(TransformableMarker);\n\nexport { Placeholder };\n\nvar Choice =\n/** @class */\nfunction (_super) {\n  __extends(Choice, _super);\n\n  function Choice() {\n    var _this_1 = _super !== null && _super.apply(this, arguments) || this;\n\n    _this_1.options = [];\n    return _this_1;\n  }\n\n  Choice.prototype.appendChild = function (marker) {\n    if (marker instanceof Text) {\n      marker.parent = this;\n      this.options.push(marker);\n    }\n\n    return this;\n  };\n\n  Choice.prototype.toString = function () {\n    return this.options[0].value;\n  };\n\n  Choice.prototype.len = function () {\n    return this.options[0].len();\n  };\n\n  Choice.prototype.clone = function () {\n    var ret = new Choice();\n    this.options.forEach(ret.appendChild, ret);\n    return ret;\n  };\n\n  return Choice;\n}(Marker);\n\nexport { Choice };\n\nvar Transform =\n/** @class */\nfunction (_super) {\n  __extends(Transform, _super);\n\n  function Transform() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Transform.prototype.resolve = function (value) {\n    var _this = this;\n\n    var didMatch = false;\n    var ret = value.replace(this.regexp, function () {\n      didMatch = true;\n      return _this._replace(Array.prototype.slice.call(arguments, 0, -2));\n    }); // when the regex didn't match and when the transform has\n    // else branches, then run those\n\n    if (!didMatch && this._children.some(function (child) {\n      return child instanceof FormatString && Boolean(child.elseValue);\n    })) {\n      ret = this._replace([]);\n    }\n\n    return ret;\n  };\n\n  Transform.prototype._replace = function (groups) {\n    var ret = '';\n\n    for (var _i = 0, _a = this._children; _i < _a.length; _i++) {\n      var marker = _a[_i];\n\n      if (marker instanceof FormatString) {\n        var value = groups[marker.index] || '';\n        value = marker.resolve(value);\n        ret += value;\n      } else {\n        ret += marker.toString();\n      }\n    }\n\n    return ret;\n  };\n\n  Transform.prototype.toString = function () {\n    return '';\n  };\n\n  Transform.prototype.clone = function () {\n    var ret = new Transform();\n    ret.regexp = new RegExp(this.regexp.source, '' + (this.regexp.ignoreCase ? 'i' : '') + (this.regexp.global ? 'g' : ''));\n    ret._children = this.children.map(function (child) {\n      return child.clone();\n    });\n    return ret;\n  };\n\n  return Transform;\n}(Marker);\n\nexport { Transform };\n\nvar FormatString =\n/** @class */\nfunction (_super) {\n  __extends(FormatString, _super);\n\n  function FormatString(index, shorthandName, ifValue, elseValue) {\n    var _this_1 = _super.call(this) || this;\n\n    _this_1.index = index;\n    _this_1.shorthandName = shorthandName;\n    _this_1.ifValue = ifValue;\n    _this_1.elseValue = elseValue;\n    return _this_1;\n  }\n\n  FormatString.prototype.resolve = function (value) {\n    if (this.shorthandName === 'upcase') {\n      return !value ? '' : value.toLocaleUpperCase();\n    } else if (this.shorthandName === 'downcase') {\n      return !value ? '' : value.toLocaleLowerCase();\n    } else if (this.shorthandName === 'capitalize') {\n      return !value ? '' : value[0].toLocaleUpperCase() + value.substr(1);\n    } else if (this.shorthandName === 'pascalcase') {\n      return !value ? '' : this._toPascalCase(value);\n    } else if (Boolean(value) && typeof this.ifValue === 'string') {\n      return this.ifValue;\n    } else if (!Boolean(value) && typeof this.elseValue === 'string') {\n      return this.elseValue;\n    } else {\n      return value || '';\n    }\n  };\n\n  FormatString.prototype._toPascalCase = function (value) {\n    var match = value.match(/[a-z]+/gi);\n\n    if (!match) {\n      return value;\n    }\n\n    return match.map(function (word) {\n      return word.charAt(0).toUpperCase() + word.substr(1).toLowerCase();\n    }).join('');\n  };\n\n  FormatString.prototype.clone = function () {\n    var ret = new FormatString(this.index, this.shorthandName, this.ifValue, this.elseValue);\n    return ret;\n  };\n\n  return FormatString;\n}(Marker);\n\nexport { FormatString };\n\nvar Variable =\n/** @class */\nfunction (_super) {\n  __extends(Variable, _super);\n\n  function Variable(name) {\n    var _this_1 = _super.call(this) || this;\n\n    _this_1.name = name;\n    return _this_1;\n  }\n\n  Variable.prototype.resolve = function (resolver) {\n    var value = resolver.resolve(this);\n\n    if (this.transform) {\n      value = this.transform.resolve(value || '');\n    }\n\n    if (value !== undefined) {\n      this._children = [new Text(value)];\n      return true;\n    }\n\n    return false;\n  };\n\n  Variable.prototype.clone = function () {\n    var ret = new Variable(this.name);\n\n    if (this.transform) {\n      ret.transform = this.transform.clone();\n    }\n\n    ret._children = this.children.map(function (child) {\n      return child.clone();\n    });\n    return ret;\n  };\n\n  return Variable;\n}(TransformableMarker);\n\nexport { Variable };\n\nfunction walk(marker, visitor) {\n  var stack = marker.slice();\n\n  while (stack.length > 0) {\n    var marker_1 = stack.shift();\n    var recurse = visitor(marker_1);\n\n    if (!recurse) {\n      break;\n    }\n\n    stack.unshift.apply(stack, marker_1.children);\n  }\n}\n\nvar TextmateSnippet =\n/** @class */\nfunction (_super) {\n  __extends(TextmateSnippet, _super);\n\n  function TextmateSnippet() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Object.defineProperty(TextmateSnippet.prototype, \"placeholderInfo\", {\n    get: function get() {\n      if (!this._placeholders) {\n        // fill in placeholders\n        var all_1 = [];\n        var last_1;\n        this.walk(function (candidate) {\n          if (candidate instanceof Placeholder) {\n            all_1.push(candidate);\n            last_1 = !last_1 || last_1.index < candidate.index ? candidate : last_1;\n          }\n\n          return true;\n        });\n        this._placeholders = {\n          all: all_1,\n          last: last_1\n        };\n      }\n\n      return this._placeholders;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(TextmateSnippet.prototype, \"placeholders\", {\n    get: function get() {\n      var all = this.placeholderInfo.all;\n      return all;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  TextmateSnippet.prototype.offset = function (marker) {\n    var pos = 0;\n    var found = false;\n    this.walk(function (candidate) {\n      if (candidate === marker) {\n        found = true;\n        return false;\n      }\n\n      pos += candidate.len();\n      return true;\n    });\n\n    if (!found) {\n      return -1;\n    }\n\n    return pos;\n  };\n\n  TextmateSnippet.prototype.fullLen = function (marker) {\n    var ret = 0;\n    walk([marker], function (marker) {\n      ret += marker.len();\n      return true;\n    });\n    return ret;\n  };\n\n  TextmateSnippet.prototype.enclosingPlaceholders = function (placeholder) {\n    var ret = [];\n    var parent = placeholder.parent;\n\n    while (parent) {\n      if (parent instanceof Placeholder) {\n        ret.push(parent);\n      }\n\n      parent = parent.parent;\n    }\n\n    return ret;\n  };\n\n  TextmateSnippet.prototype.resolveVariables = function (resolver) {\n    var _this_1 = this;\n\n    this.walk(function (candidate) {\n      if (candidate instanceof Variable) {\n        if (candidate.resolve(resolver)) {\n          _this_1._placeholders = undefined;\n        }\n      }\n\n      return true;\n    });\n    return this;\n  };\n\n  TextmateSnippet.prototype.appendChild = function (child) {\n    this._placeholders = undefined;\n    return _super.prototype.appendChild.call(this, child);\n  };\n\n  TextmateSnippet.prototype.replace = function (child, others) {\n    this._placeholders = undefined;\n    return _super.prototype.replace.call(this, child, others);\n  };\n\n  TextmateSnippet.prototype.clone = function () {\n    var ret = new TextmateSnippet();\n    this._children = this.children.map(function (child) {\n      return child.clone();\n    });\n    return ret;\n  };\n\n  TextmateSnippet.prototype.walk = function (visitor) {\n    walk(this.children, visitor);\n  };\n\n  return TextmateSnippet;\n}(Marker);\n\nexport { TextmateSnippet };\n\nvar SnippetParser =\n/** @class */\nfunction () {\n  function SnippetParser() {\n    this._scanner = new Scanner();\n  }\n\n  SnippetParser.escape = function (value) {\n    return value.replace(/\\$|}|\\\\/g, '\\\\$&');\n  };\n\n  SnippetParser.prototype.parse = function (value, insertFinalTabstop, enforceFinalTabstop) {\n    this._scanner.text(value);\n\n    this._token = this._scanner.next();\n    var snippet = new TextmateSnippet();\n\n    while (this._parse(snippet)) {} // nothing\n    // fill in values for placeholders. the first placeholder of an index\n    // that has a value defines the value for all placeholders with that index\n\n\n    var placeholderDefaultValues = new Map();\n    var incompletePlaceholders = [];\n    var placeholderCount = 0;\n    snippet.walk(function (marker) {\n      if (marker instanceof Placeholder) {\n        placeholderCount += 1;\n\n        if (marker.isFinalTabstop) {\n          placeholderDefaultValues.set(0, undefined);\n        } else if (!placeholderDefaultValues.has(marker.index) && marker.children.length > 0) {\n          placeholderDefaultValues.set(marker.index, marker.children);\n        } else {\n          incompletePlaceholders.push(marker);\n        }\n      }\n\n      return true;\n    });\n\n    for (var _i = 0, incompletePlaceholders_1 = incompletePlaceholders; _i < incompletePlaceholders_1.length; _i++) {\n      var placeholder = incompletePlaceholders_1[_i];\n      var defaultValues = placeholderDefaultValues.get(placeholder.index);\n\n      if (defaultValues) {\n        var clone = new Placeholder(placeholder.index);\n        clone.transform = placeholder.transform;\n\n        for (var _a = 0, defaultValues_1 = defaultValues; _a < defaultValues_1.length; _a++) {\n          var child = defaultValues_1[_a];\n          clone.appendChild(child.clone());\n        }\n\n        snippet.replace(placeholder, [clone]);\n      }\n    }\n\n    if (!enforceFinalTabstop) {\n      enforceFinalTabstop = placeholderCount > 0 && insertFinalTabstop;\n    }\n\n    if (!placeholderDefaultValues.has(0) && enforceFinalTabstop) {\n      // the snippet uses placeholders but has no\n      // final tabstop defined -> insert at the end\n      snippet.appendChild(new Placeholder(0));\n    }\n\n    return snippet;\n  };\n\n  SnippetParser.prototype._accept = function (type, value) {\n    if (type === undefined || this._token.type === type) {\n      var ret = !value ? true : this._scanner.tokenText(this._token);\n      this._token = this._scanner.next();\n      return ret;\n    }\n\n    return false;\n  };\n\n  SnippetParser.prototype._backTo = function (token) {\n    this._scanner.pos = token.pos + token.len;\n    this._token = token;\n    return false;\n  };\n\n  SnippetParser.prototype._until = function (type) {\n    if (this._token.type === 14\n    /* EOF */\n    ) {\n        return false;\n      }\n\n    var start = this._token;\n\n    while (this._token.type !== type) {\n      this._token = this._scanner.next();\n\n      if (this._token.type === 14\n      /* EOF */\n      ) {\n          return false;\n        }\n    }\n\n    var value = this._scanner.value.substring(start.pos, this._token.pos);\n\n    this._token = this._scanner.next();\n    return value;\n  };\n\n  SnippetParser.prototype._parse = function (marker) {\n    return this._parseEscaped(marker) || this._parseTabstopOrVariableName(marker) || this._parseComplexPlaceholder(marker) || this._parseComplexVariable(marker) || this._parseAnything(marker);\n  }; // \\$, \\\\, \\} -> just text\n\n\n  SnippetParser.prototype._parseEscaped = function (marker) {\n    var value;\n\n    if (value = this._accept(5\n    /* Backslash */\n    , true)) {\n      // saw a backslash, append escaped token or that backslash\n      value = this._accept(0\n      /* Dollar */\n      , true) || this._accept(4\n      /* CurlyClose */\n      , true) || this._accept(5\n      /* Backslash */\n      , true) || value;\n      marker.appendChild(new Text(value));\n      return true;\n    }\n\n    return false;\n  }; // $foo -> variable, $1 -> tabstop\n\n\n  SnippetParser.prototype._parseTabstopOrVariableName = function (parent) {\n    var value;\n    var token = this._token;\n\n    var match = this._accept(0\n    /* Dollar */\n    ) && (value = this._accept(9\n    /* VariableName */\n    , true) || this._accept(8\n    /* Int */\n    , true));\n\n    if (!match) {\n      return this._backTo(token);\n    }\n\n    parent.appendChild(/^\\d+$/.test(value) ? new Placeholder(Number(value)) : new Variable(value));\n    return true;\n  }; // ${1:<children>}, ${1} -> placeholder\n\n\n  SnippetParser.prototype._parseComplexPlaceholder = function (parent) {\n    var index;\n    var token = this._token;\n\n    var match = this._accept(0\n    /* Dollar */\n    ) && this._accept(3\n    /* CurlyOpen */\n    ) && (index = this._accept(8\n    /* Int */\n    , true));\n\n    if (!match) {\n      return this._backTo(token);\n    }\n\n    var placeholder = new Placeholder(Number(index));\n\n    if (this._accept(1\n    /* Colon */\n    )) {\n      // ${1:<children>}\n      while (true) {\n        // ...} -> done\n        if (this._accept(4\n        /* CurlyClose */\n        )) {\n          parent.appendChild(placeholder);\n          return true;\n        }\n\n        if (this._parse(placeholder)) {\n          continue;\n        } // fallback\n\n\n        parent.appendChild(new Text('${' + index + ':'));\n        placeholder.children.forEach(parent.appendChild, parent);\n        return true;\n      }\n    } else if (placeholder.index > 0 && this._accept(7\n    /* Pipe */\n    )) {\n      // ${1|one,two,three|}\n      var choice = new Choice();\n\n      while (true) {\n        if (this._parseChoiceElement(choice)) {\n          if (this._accept(2\n          /* Comma */\n          )) {\n            // opt, -> more\n            continue;\n          }\n\n          if (this._accept(7\n          /* Pipe */\n          )) {\n            placeholder.appendChild(choice);\n\n            if (this._accept(4\n            /* CurlyClose */\n            )) {\n              // ..|} -> done\n              parent.appendChild(placeholder);\n              return true;\n            }\n          }\n        }\n\n        this._backTo(token);\n\n        return false;\n      }\n    } else if (this._accept(6\n    /* Forwardslash */\n    )) {\n      // ${1/<regex>/<format>/<options>}\n      if (this._parseTransform(placeholder)) {\n        parent.appendChild(placeholder);\n        return true;\n      }\n\n      this._backTo(token);\n\n      return false;\n    } else if (this._accept(4\n    /* CurlyClose */\n    )) {\n      // ${1}\n      parent.appendChild(placeholder);\n      return true;\n    } else {\n      // ${1 <- missing curly or colon\n      return this._backTo(token);\n    }\n  };\n\n  SnippetParser.prototype._parseChoiceElement = function (parent) {\n    var token = this._token;\n    var values = [];\n\n    while (true) {\n      if (this._token.type === 2\n      /* Comma */\n      || this._token.type === 7\n      /* Pipe */\n      ) {\n          break;\n        }\n\n      var value = void 0;\n\n      if (value = this._accept(5\n      /* Backslash */\n      , true)) {\n        // \\, \\|, or \\\\\n        value = this._accept(2\n        /* Comma */\n        , true) || this._accept(7\n        /* Pipe */\n        , true) || this._accept(5\n        /* Backslash */\n        , true) || value;\n      } else {\n        value = this._accept(undefined, true);\n      }\n\n      if (!value) {\n        // EOF\n        this._backTo(token);\n\n        return false;\n      }\n\n      values.push(value);\n    }\n\n    if (values.length === 0) {\n      this._backTo(token);\n\n      return false;\n    }\n\n    parent.appendChild(new Text(values.join('')));\n    return true;\n  }; // ${foo:<children>}, ${foo} -> variable\n\n\n  SnippetParser.prototype._parseComplexVariable = function (parent) {\n    var name;\n    var token = this._token;\n\n    var match = this._accept(0\n    /* Dollar */\n    ) && this._accept(3\n    /* CurlyOpen */\n    ) && (name = this._accept(9\n    /* VariableName */\n    , true));\n\n    if (!match) {\n      return this._backTo(token);\n    }\n\n    var variable = new Variable(name);\n\n    if (this._accept(1\n    /* Colon */\n    )) {\n      // ${foo:<children>}\n      while (true) {\n        // ...} -> done\n        if (this._accept(4\n        /* CurlyClose */\n        )) {\n          parent.appendChild(variable);\n          return true;\n        }\n\n        if (this._parse(variable)) {\n          continue;\n        } // fallback\n\n\n        parent.appendChild(new Text('${' + name + ':'));\n        variable.children.forEach(parent.appendChild, parent);\n        return true;\n      }\n    } else if (this._accept(6\n    /* Forwardslash */\n    )) {\n      // ${foo/<regex>/<format>/<options>}\n      if (this._parseTransform(variable)) {\n        parent.appendChild(variable);\n        return true;\n      }\n\n      this._backTo(token);\n\n      return false;\n    } else if (this._accept(4\n    /* CurlyClose */\n    )) {\n      // ${foo}\n      parent.appendChild(variable);\n      return true;\n    } else {\n      // ${foo <- missing curly or colon\n      return this._backTo(token);\n    }\n  };\n\n  SnippetParser.prototype._parseTransform = function (parent) {\n    // ...<regex>/<format>/<options>}\n    var transform = new Transform();\n    var regexValue = '';\n    var regexOptions = ''; // (1) /regex\n\n    while (true) {\n      if (this._accept(6\n      /* Forwardslash */\n      )) {\n        break;\n      }\n\n      var escaped = void 0;\n\n      if (escaped = this._accept(5\n      /* Backslash */\n      , true)) {\n        escaped = this._accept(6\n        /* Forwardslash */\n        , true) || escaped;\n        regexValue += escaped;\n        continue;\n      }\n\n      if (this._token.type !== 14\n      /* EOF */\n      ) {\n          regexValue += this._accept(undefined, true);\n          continue;\n        }\n\n      return false;\n    } // (2) /format\n\n\n    while (true) {\n      if (this._accept(6\n      /* Forwardslash */\n      )) {\n        break;\n      }\n\n      var escaped = void 0;\n\n      if (escaped = this._accept(5\n      /* Backslash */\n      , true)) {\n        escaped = this._accept(5\n        /* Backslash */\n        , true) || this._accept(6\n        /* Forwardslash */\n        , true) || escaped;\n        transform.appendChild(new Text(escaped));\n        continue;\n      }\n\n      if (this._parseFormatString(transform) || this._parseAnything(transform)) {\n        continue;\n      }\n\n      return false;\n    } // (3) /option\n\n\n    while (true) {\n      if (this._accept(4\n      /* CurlyClose */\n      )) {\n        break;\n      }\n\n      if (this._token.type !== 14\n      /* EOF */\n      ) {\n          regexOptions += this._accept(undefined, true);\n          continue;\n        }\n\n      return false;\n    }\n\n    try {\n      transform.regexp = new RegExp(regexValue, regexOptions);\n    } catch (e) {\n      // invalid regexp\n      return false;\n    }\n\n    parent.transform = transform;\n    return true;\n  };\n\n  SnippetParser.prototype._parseFormatString = function (parent) {\n    var token = this._token;\n\n    if (!this._accept(0\n    /* Dollar */\n    )) {\n      return false;\n    }\n\n    var complex = false;\n\n    if (this._accept(3\n    /* CurlyOpen */\n    )) {\n      complex = true;\n    }\n\n    var index = this._accept(8\n    /* Int */\n    , true);\n\n    if (!index) {\n      this._backTo(token);\n\n      return false;\n    } else if (!complex) {\n      // $1\n      parent.appendChild(new FormatString(Number(index)));\n      return true;\n    } else if (this._accept(4\n    /* CurlyClose */\n    )) {\n      // ${1}\n      parent.appendChild(new FormatString(Number(index)));\n      return true;\n    } else if (!this._accept(1\n    /* Colon */\n    )) {\n      this._backTo(token);\n\n      return false;\n    }\n\n    if (this._accept(6\n    /* Forwardslash */\n    )) {\n      // ${1:/upcase}\n      var shorthand = this._accept(9\n      /* VariableName */\n      , true);\n\n      if (!shorthand || !this._accept(4\n      /* CurlyClose */\n      )) {\n        this._backTo(token);\n\n        return false;\n      } else {\n        parent.appendChild(new FormatString(Number(index), shorthand));\n        return true;\n      }\n    } else if (this._accept(11\n    /* Plus */\n    )) {\n      // ${1:+<if>}\n      var ifValue = this._until(4\n      /* CurlyClose */\n      );\n\n      if (ifValue) {\n        parent.appendChild(new FormatString(Number(index), undefined, ifValue, undefined));\n        return true;\n      }\n    } else if (this._accept(12\n    /* Dash */\n    )) {\n      // ${2:-<else>}\n      var elseValue = this._until(4\n      /* CurlyClose */\n      );\n\n      if (elseValue) {\n        parent.appendChild(new FormatString(Number(index), undefined, undefined, elseValue));\n        return true;\n      }\n    } else if (this._accept(13\n    /* QuestionMark */\n    )) {\n      // ${2:?<if>:<else>}\n      var ifValue = this._until(1\n      /* Colon */\n      );\n\n      if (ifValue) {\n        var elseValue = this._until(4\n        /* CurlyClose */\n        );\n\n        if (elseValue) {\n          parent.appendChild(new FormatString(Number(index), undefined, ifValue, elseValue));\n          return true;\n        }\n      }\n    } else {\n      // ${1:<else>}\n      var elseValue = this._until(4\n      /* CurlyClose */\n      );\n\n      if (elseValue) {\n        parent.appendChild(new FormatString(Number(index), undefined, undefined, elseValue));\n        return true;\n      }\n    }\n\n    this._backTo(token);\n\n    return false;\n  };\n\n  SnippetParser.prototype._parseAnything = function (marker) {\n    if (this._token.type !== 14\n    /* EOF */\n    ) {\n        marker.appendChild(new Text(this._scanner.tokenText(this._token)));\n\n        this._accept(undefined);\n\n        return true;\n      }\n\n    return false;\n  };\n\n  return SnippetParser;\n}();\n\nexport { SnippetParser };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as nls from '../../../nls.js';\nimport { basename, dirname } from '../../../base/common/path.js';\nimport { Text } from './snippetParser.js';\nimport { LanguageConfigurationRegistry } from '../../common/modes/languageConfigurationRegistry.js';\nimport { getLeadingWhitespace, commonPrefixLength, isFalsyOrWhitespace, pad, endsWith } from '../../../base/common/strings.js';\nimport { isSingleFolderWorkspaceIdentifier, toWorkspaceIdentifier, WORKSPACE_EXTENSION } from '../../../platform/workspaces/common/workspaces.js';\n\nvar CompositeSnippetVariableResolver =\n/** @class */\nfunction () {\n  function CompositeSnippetVariableResolver(_delegates) {\n    this._delegates = _delegates; //\n  }\n\n  CompositeSnippetVariableResolver.prototype.resolve = function (variable) {\n    for (var _i = 0, _a = this._delegates; _i < _a.length; _i++) {\n      var delegate = _a[_i];\n      var value = delegate.resolve(variable);\n\n      if (value !== undefined) {\n        return value;\n      }\n    }\n\n    return undefined;\n  };\n\n  return CompositeSnippetVariableResolver;\n}();\n\nexport { CompositeSnippetVariableResolver };\n\nvar SelectionBasedVariableResolver =\n/** @class */\nfunction () {\n  function SelectionBasedVariableResolver(_model, _selection) {\n    this._model = _model;\n    this._selection = _selection; //\n  }\n\n  SelectionBasedVariableResolver.prototype.resolve = function (variable) {\n    var name = variable.name;\n\n    if (name === 'SELECTION' || name === 'TM_SELECTED_TEXT') {\n      var value = this._model.getValueInRange(this._selection) || undefined;\n\n      if (value && this._selection.startLineNumber !== this._selection.endLineNumber && variable.snippet) {\n        // Selection is a multiline string which we indentation we now\n        // need to adjust. We compare the indentation of this variable\n        // with the indentation at the editor position and add potential\n        // extra indentation to the value\n        var line = this._model.getLineContent(this._selection.startLineNumber);\n\n        var lineLeadingWhitespace = getLeadingWhitespace(line, 0, this._selection.startColumn - 1);\n        var varLeadingWhitespace_1 = lineLeadingWhitespace;\n        variable.snippet.walk(function (marker) {\n          if (marker === variable) {\n            return false;\n          }\n\n          if (marker instanceof Text) {\n            varLeadingWhitespace_1 = getLeadingWhitespace(marker.value.split(/\\r\\n|\\r|\\n/).pop());\n          }\n\n          return true;\n        });\n        var whitespaceCommonLength_1 = commonPrefixLength(varLeadingWhitespace_1, lineLeadingWhitespace);\n        value = value.replace(/(\\r\\n|\\r|\\n)(.*)/g, function (m, newline, rest) {\n          return \"\" + newline + varLeadingWhitespace_1.substr(whitespaceCommonLength_1) + rest;\n        });\n      }\n\n      return value;\n    } else if (name === 'TM_CURRENT_LINE') {\n      return this._model.getLineContent(this._selection.positionLineNumber);\n    } else if (name === 'TM_CURRENT_WORD') {\n      var info = this._model.getWordAtPosition({\n        lineNumber: this._selection.positionLineNumber,\n        column: this._selection.positionColumn\n      });\n\n      return info && info.word || undefined;\n    } else if (name === 'TM_LINE_INDEX') {\n      return String(this._selection.positionLineNumber - 1);\n    } else if (name === 'TM_LINE_NUMBER') {\n      return String(this._selection.positionLineNumber);\n    }\n\n    return undefined;\n  };\n\n  return SelectionBasedVariableResolver;\n}();\n\nexport { SelectionBasedVariableResolver };\n\nvar ModelBasedVariableResolver =\n/** @class */\nfunction () {\n  function ModelBasedVariableResolver(_model) {\n    this._model = _model; //\n  }\n\n  ModelBasedVariableResolver.prototype.resolve = function (variable) {\n    var name = variable.name;\n\n    if (name === 'TM_FILENAME') {\n      return basename(this._model.uri.fsPath);\n    } else if (name === 'TM_FILENAME_BASE') {\n      var name_1 = basename(this._model.uri.fsPath);\n      var idx = name_1.lastIndexOf('.');\n\n      if (idx <= 0) {\n        return name_1;\n      } else {\n        return name_1.slice(0, idx);\n      }\n    } else if (name === 'TM_DIRECTORY') {\n      var dir = dirname(this._model.uri.fsPath);\n      return dir !== '.' ? dir : '';\n    } else if (name === 'TM_FILEPATH') {\n      return this._model.uri.fsPath;\n    }\n\n    return undefined;\n  };\n\n  return ModelBasedVariableResolver;\n}();\n\nexport { ModelBasedVariableResolver };\n\nvar ClipboardBasedVariableResolver =\n/** @class */\nfunction () {\n  function ClipboardBasedVariableResolver(_clipboardService, _selectionIdx, _selectionCount) {\n    this._clipboardService = _clipboardService;\n    this._selectionIdx = _selectionIdx;\n    this._selectionCount = _selectionCount; //\n  }\n\n  ClipboardBasedVariableResolver.prototype.resolve = function (variable) {\n    if (variable.name !== 'CLIPBOARD' || !this._clipboardService) {\n      return undefined;\n    }\n\n    var text = this._clipboardService.readText();\n\n    if (!text) {\n      return undefined;\n    }\n\n    var lines = text.split(/\\r\\n|\\n|\\r/).filter(function (s) {\n      return !isFalsyOrWhitespace(s);\n    });\n\n    if (lines.length === this._selectionCount) {\n      return lines[this._selectionIdx];\n    } else {\n      return text;\n    }\n  };\n\n  return ClipboardBasedVariableResolver;\n}();\n\nexport { ClipboardBasedVariableResolver };\n\nvar CommentBasedVariableResolver =\n/** @class */\nfunction () {\n  function CommentBasedVariableResolver(_model) {\n    this._model = _model; //\n  }\n\n  CommentBasedVariableResolver.prototype.resolve = function (variable) {\n    var name = variable.name;\n\n    var language = this._model.getLanguageIdentifier();\n\n    var config = LanguageConfigurationRegistry.getComments(language.id);\n\n    if (!config) {\n      return undefined;\n    }\n\n    if (name === 'LINE_COMMENT') {\n      return config.lineCommentToken || undefined;\n    } else if (name === 'BLOCK_COMMENT_START') {\n      return config.blockCommentStartToken || undefined;\n    } else if (name === 'BLOCK_COMMENT_END') {\n      return config.blockCommentEndToken || undefined;\n    }\n\n    return undefined;\n  };\n\n  return CommentBasedVariableResolver;\n}();\n\nexport { CommentBasedVariableResolver };\n\nvar TimeBasedVariableResolver =\n/** @class */\nfunction () {\n  function TimeBasedVariableResolver() {}\n\n  TimeBasedVariableResolver.prototype.resolve = function (variable) {\n    var name = variable.name;\n\n    if (name === 'CURRENT_YEAR') {\n      return String(new Date().getFullYear());\n    } else if (name === 'CURRENT_YEAR_SHORT') {\n      return String(new Date().getFullYear()).slice(-2);\n    } else if (name === 'CURRENT_MONTH') {\n      return pad(new Date().getMonth().valueOf() + 1, 2);\n    } else if (name === 'CURRENT_DATE') {\n      return pad(new Date().getDate().valueOf(), 2);\n    } else if (name === 'CURRENT_HOUR') {\n      return pad(new Date().getHours().valueOf(), 2);\n    } else if (name === 'CURRENT_MINUTE') {\n      return pad(new Date().getMinutes().valueOf(), 2);\n    } else if (name === 'CURRENT_SECOND') {\n      return pad(new Date().getSeconds().valueOf(), 2);\n    } else if (name === 'CURRENT_DAY_NAME') {\n      return TimeBasedVariableResolver.dayNames[new Date().getDay()];\n    } else if (name === 'CURRENT_DAY_NAME_SHORT') {\n      return TimeBasedVariableResolver.dayNamesShort[new Date().getDay()];\n    } else if (name === 'CURRENT_MONTH_NAME') {\n      return TimeBasedVariableResolver.monthNames[new Date().getMonth()];\n    } else if (name === 'CURRENT_MONTH_NAME_SHORT') {\n      return TimeBasedVariableResolver.monthNamesShort[new Date().getMonth()];\n    }\n\n    return undefined;\n  };\n\n  TimeBasedVariableResolver.dayNames = [nls.localize('Sunday', \"Sunday\"), nls.localize('Monday', \"Monday\"), nls.localize('Tuesday', \"Tuesday\"), nls.localize('Wednesday', \"Wednesday\"), nls.localize('Thursday', \"Thursday\"), nls.localize('Friday', \"Friday\"), nls.localize('Saturday', \"Saturday\")];\n  TimeBasedVariableResolver.dayNamesShort = [nls.localize('SundayShort', \"Sun\"), nls.localize('MondayShort', \"Mon\"), nls.localize('TuesdayShort', \"Tue\"), nls.localize('WednesdayShort', \"Wed\"), nls.localize('ThursdayShort', \"Thu\"), nls.localize('FridayShort', \"Fri\"), nls.localize('SaturdayShort', \"Sat\")];\n  TimeBasedVariableResolver.monthNames = [nls.localize('January', \"January\"), nls.localize('February', \"February\"), nls.localize('March', \"March\"), nls.localize('April', \"April\"), nls.localize('May', \"May\"), nls.localize('June', \"June\"), nls.localize('July', \"July\"), nls.localize('August', \"August\"), nls.localize('September', \"September\"), nls.localize('October', \"October\"), nls.localize('November', \"November\"), nls.localize('December', \"December\")];\n  TimeBasedVariableResolver.monthNamesShort = [nls.localize('JanuaryShort', \"Jan\"), nls.localize('FebruaryShort', \"Feb\"), nls.localize('MarchShort', \"Mar\"), nls.localize('AprilShort', \"Apr\"), nls.localize('MayShort', \"May\"), nls.localize('JuneShort', \"Jun\"), nls.localize('JulyShort', \"Jul\"), nls.localize('AugustShort', \"Aug\"), nls.localize('SeptemberShort', \"Sep\"), nls.localize('OctoberShort', \"Oct\"), nls.localize('NovemberShort', \"Nov\"), nls.localize('DecemberShort', \"Dec\")];\n  return TimeBasedVariableResolver;\n}();\n\nexport { TimeBasedVariableResolver };\n\nvar WorkspaceBasedVariableResolver =\n/** @class */\nfunction () {\n  function WorkspaceBasedVariableResolver(_workspaceService) {\n    this._workspaceService = _workspaceService; //\n  }\n\n  WorkspaceBasedVariableResolver.prototype.resolve = function (variable) {\n    if (variable.name !== 'WORKSPACE_NAME' || !this._workspaceService) {\n      return undefined;\n    }\n\n    var workspaceIdentifier = toWorkspaceIdentifier(this._workspaceService.getWorkspace());\n\n    if (!workspaceIdentifier) {\n      return undefined;\n    }\n\n    if (isSingleFolderWorkspaceIdentifier(workspaceIdentifier)) {\n      return basename(workspaceIdentifier.path);\n    }\n\n    var filename = basename(workspaceIdentifier.configPath.path);\n\n    if (endsWith(filename, WORKSPACE_EXTENSION)) {\n      filename = filename.substr(0, filename.length - WORKSPACE_EXTENSION.length - 1);\n    }\n\n    return filename;\n  };\n\n  return WorkspaceBasedVariableResolver;\n}();\n\nexport { WorkspaceBasedVariableResolver };","import { URI } from '../../../base/common/uri.js';\nexport var WORKSPACE_EXTENSION = 'code-workspace';\nexport function isSingleFolderWorkspaceIdentifier(obj) {\n  return obj instanceof URI;\n}\nexport function toWorkspaceIdentifier(workspace) {\n  if (workspace.configuration) {\n    return {\n      configPath: workspace.configuration,\n      id: workspace.id\n    };\n  }\n\n  if (workspace.folders.length === 1) {\n    return workspace.folders[0].uri;\n  } // Empty workspace\n\n\n  return undefined;\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { groupBy } from '../../../base/common/arrays.js';\nimport { dispose } from '../../../base/common/lifecycle.js';\nimport { getLeadingWhitespace } from '../../../base/common/strings.js';\nimport './snippetSession.css';\nimport { EditOperation } from '../../common/core/editOperation.js';\nimport { Range } from '../../common/core/range.js';\nimport { Selection } from '../../common/core/selection.js';\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\nimport { IClipboardService } from '../../../platform/clipboard/common/clipboardService.js';\nimport { IWorkspaceContextService } from '../../../platform/workspace/common/workspace.js';\nimport { optional } from '../../../platform/instantiation/common/instantiation.js';\nimport { Choice, Placeholder, SnippetParser, Text } from './snippetParser.js';\nimport { ClipboardBasedVariableResolver, CompositeSnippetVariableResolver, ModelBasedVariableResolver, SelectionBasedVariableResolver, TimeBasedVariableResolver, CommentBasedVariableResolver, WorkspaceBasedVariableResolver } from './snippetVariables.js';\nimport { registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\nimport * as colors from '../../../platform/theme/common/colorRegistry.js';\nregisterThemingParticipant(function (theme, collector) {\n  function getColorGraceful(name) {\n    var color = theme.getColor(name);\n    return color ? color.toString() : 'transparent';\n  }\n\n  collector.addRule(\".monaco-editor .snippet-placeholder { background-color: \" + getColorGraceful(colors.snippetTabstopHighlightBackground) + \"; outline-color: \" + getColorGraceful(colors.snippetTabstopHighlightBorder) + \"; }\");\n  collector.addRule(\".monaco-editor .finish-snippet-placeholder { background-color: \" + getColorGraceful(colors.snippetFinalTabstopHighlightBackground) + \"; outline-color: \" + getColorGraceful(colors.snippetFinalTabstopHighlightBorder) + \"; }\");\n});\n\nvar OneSnippet =\n/** @class */\nfunction () {\n  function OneSnippet(editor, snippet, offset) {\n    this._nestingLevel = 1;\n    this._editor = editor;\n    this._snippet = snippet;\n    this._offset = offset;\n    this._placeholderGroups = groupBy(snippet.placeholders, Placeholder.compareByIndex);\n    this._placeholderGroupsIdx = -1;\n  }\n\n  OneSnippet.prototype.dispose = function () {\n    if (this._placeholderDecorations) {\n      var toRemove_1 = [];\n\n      this._placeholderDecorations.forEach(function (handle) {\n        return toRemove_1.push(handle);\n      });\n\n      this._editor.deltaDecorations(toRemove_1, []);\n    }\n\n    this._placeholderGroups.length = 0;\n  };\n\n  OneSnippet.prototype._initDecorations = function () {\n    var _this = this;\n\n    if (this._placeholderDecorations) {\n      // already initialized\n      return;\n    }\n\n    this._placeholderDecorations = new Map();\n\n    var model = this._editor.getModel();\n\n    this._editor.changeDecorations(function (accessor) {\n      // create a decoration for each placeholder\n      for (var _i = 0, _a = _this._snippet.placeholders; _i < _a.length; _i++) {\n        var placeholder = _a[_i];\n\n        var placeholderOffset = _this._snippet.offset(placeholder);\n\n        var placeholderLen = _this._snippet.fullLen(placeholder);\n\n        var range = Range.fromPositions(model.getPositionAt(_this._offset + placeholderOffset), model.getPositionAt(_this._offset + placeholderOffset + placeholderLen));\n        var options = placeholder.isFinalTabstop ? OneSnippet._decor.inactiveFinal : OneSnippet._decor.inactive;\n        var handle = accessor.addDecoration(range, options);\n\n        _this._placeholderDecorations.set(placeholder, handle);\n      }\n    });\n  };\n\n  OneSnippet.prototype.move = function (fwd) {\n    var _this = this;\n\n    if (!this._editor.hasModel()) {\n      return [];\n    }\n\n    this._initDecorations(); // Transform placeholder text if necessary\n\n\n    if (this._placeholderGroupsIdx >= 0) {\n      var operations = [];\n\n      for (var _i = 0, _a = this._placeholderGroups[this._placeholderGroupsIdx]; _i < _a.length; _i++) {\n        var placeholder = _a[_i]; // Check if the placeholder has a transformation\n\n        if (placeholder.transform) {\n          var id = this._placeholderDecorations.get(placeholder);\n\n          var range = this._editor.getModel().getDecorationRange(id);\n\n          var currentValue = this._editor.getModel().getValueInRange(range);\n\n          operations.push(EditOperation.replaceMove(range, placeholder.transform.resolve(currentValue)));\n        }\n      }\n\n      if (operations.length > 0) {\n        this._editor.executeEdits('snippet.placeholderTransform', operations);\n      }\n    }\n\n    var skipThisPlaceholder = false;\n\n    if (fwd === true && this._placeholderGroupsIdx < this._placeholderGroups.length - 1) {\n      this._placeholderGroupsIdx += 1;\n      skipThisPlaceholder = true;\n    } else if (fwd === false && this._placeholderGroupsIdx > 0) {\n      this._placeholderGroupsIdx -= 1;\n      skipThisPlaceholder = true;\n    } else {// the selection of the current placeholder might\n      // not acurate any more -> simply restore it\n    }\n\n    var newSelections = this._editor.getModel().changeDecorations(function (accessor) {\n      var activePlaceholders = new Set(); // change stickiness to always grow when typing at its edges\n      // because these decorations represent the currently active\n      // tabstop.\n      // Special case #1: reaching the final tabstop\n      // Special case #2: placeholders enclosing active placeholders\n\n      var selections = [];\n\n      for (var _i = 0, _a = _this._placeholderGroups[_this._placeholderGroupsIdx]; _i < _a.length; _i++) {\n        var placeholder = _a[_i];\n\n        var id = _this._placeholderDecorations.get(placeholder);\n\n        var range = _this._editor.getModel().getDecorationRange(id);\n\n        selections.push(new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn)); // consider to skip this placeholder index when the decoration\n        // range is empty but when the placeholder wasn't. that's a strong\n        // hint that the placeholder has been deleted. (all placeholder must match this)\n\n        skipThisPlaceholder = skipThisPlaceholder && range.isEmpty() && placeholder.toString().length > 0;\n        accessor.changeDecorationOptions(id, placeholder.isFinalTabstop ? OneSnippet._decor.activeFinal : OneSnippet._decor.active);\n        activePlaceholders.add(placeholder);\n\n        for (var _b = 0, _c = _this._snippet.enclosingPlaceholders(placeholder); _b < _c.length; _b++) {\n          var enclosingPlaceholder = _c[_b];\n\n          var id_1 = _this._placeholderDecorations.get(enclosingPlaceholder);\n\n          accessor.changeDecorationOptions(id_1, enclosingPlaceholder.isFinalTabstop ? OneSnippet._decor.activeFinal : OneSnippet._decor.active);\n          activePlaceholders.add(enclosingPlaceholder);\n        }\n      } // change stickness to never grow when typing at its edges\n      // so that in-active tabstops never grow\n\n\n      _this._placeholderDecorations.forEach(function (id, placeholder) {\n        if (!activePlaceholders.has(placeholder)) {\n          accessor.changeDecorationOptions(id, placeholder.isFinalTabstop ? OneSnippet._decor.inactiveFinal : OneSnippet._decor.inactive);\n        }\n      });\n\n      return selections;\n    });\n\n    return !skipThisPlaceholder ? newSelections : this.move(fwd);\n  };\n\n  Object.defineProperty(OneSnippet.prototype, \"isAtFirstPlaceholder\", {\n    get: function get() {\n      return this._placeholderGroupsIdx <= 0 || this._placeholderGroups.length === 0;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(OneSnippet.prototype, \"isAtLastPlaceholder\", {\n    get: function get() {\n      return this._placeholderGroupsIdx === this._placeholderGroups.length - 1;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(OneSnippet.prototype, \"hasPlaceholder\", {\n    get: function get() {\n      return this._snippet.placeholders.length > 0;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  OneSnippet.prototype.computePossibleSelections = function () {\n    var result = new Map();\n\n    for (var _i = 0, _a = this._placeholderGroups; _i < _a.length; _i++) {\n      var placeholdersWithEqualIndex = _a[_i];\n      var ranges = void 0;\n\n      for (var _b = 0, placeholdersWithEqualIndex_1 = placeholdersWithEqualIndex; _b < placeholdersWithEqualIndex_1.length; _b++) {\n        var placeholder = placeholdersWithEqualIndex_1[_b];\n\n        if (placeholder.isFinalTabstop) {\n          // ignore those\n          break;\n        }\n\n        if (!ranges) {\n          ranges = [];\n          result.set(placeholder.index, ranges);\n        }\n\n        var id = this._placeholderDecorations.get(placeholder);\n\n        var range = this._editor.getModel().getDecorationRange(id);\n\n        if (!range) {\n          // one of the placeholder lost its decoration and\n          // therefore we bail out and pretend the placeholder\n          // (with its mirrors) doesn't exist anymore.\n          result.delete(placeholder.index);\n          break;\n        }\n\n        ranges.push(range);\n      }\n    }\n\n    return result;\n  };\n\n  Object.defineProperty(OneSnippet.prototype, \"choice\", {\n    get: function get() {\n      return this._placeholderGroups[this._placeholderGroupsIdx][0].choice;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  OneSnippet.prototype.merge = function (others) {\n    var _this = this;\n\n    var model = this._editor.getModel();\n\n    this._nestingLevel *= 10;\n\n    this._editor.changeDecorations(function (accessor) {\n      // For each active placeholder take one snippet and merge it\n      // in that the placeholder (can be many for `$1foo$1foo`). Because\n      // everything is sorted by editor selection we can simply remove\n      // elements from the beginning of the array\n      for (var _i = 0, _a = _this._placeholderGroups[_this._placeholderGroupsIdx]; _i < _a.length; _i++) {\n        var placeholder = _a[_i];\n        var nested = others.shift();\n        console.assert(!nested._placeholderDecorations); // Massage placeholder-indicies of the nested snippet to be\n        // sorted right after the insertion point. This ensures we move\n        // through the placeholders in the correct order\n\n        var indexLastPlaceholder = nested._snippet.placeholderInfo.last.index;\n\n        for (var _b = 0, _c = nested._snippet.placeholderInfo.all; _b < _c.length; _b++) {\n          var nestedPlaceholder = _c[_b];\n\n          if (nestedPlaceholder.isFinalTabstop) {\n            nestedPlaceholder.index = placeholder.index + (indexLastPlaceholder + 1) / _this._nestingLevel;\n          } else {\n            nestedPlaceholder.index = placeholder.index + nestedPlaceholder.index / _this._nestingLevel;\n          }\n        }\n\n        _this._snippet.replace(placeholder, nested._snippet.children); // Remove the placeholder at which position are inserting\n        // the snippet and also remove its decoration.\n\n\n        var id = _this._placeholderDecorations.get(placeholder);\n\n        accessor.removeDecoration(id);\n\n        _this._placeholderDecorations.delete(placeholder); // For each *new* placeholder we create decoration to monitor\n        // how and if it grows/shrinks.\n\n\n        for (var _d = 0, _e = nested._snippet.placeholders; _d < _e.length; _d++) {\n          var placeholder_1 = _e[_d];\n\n          var placeholderOffset = nested._snippet.offset(placeholder_1);\n\n          var placeholderLen = nested._snippet.fullLen(placeholder_1);\n\n          var range = Range.fromPositions(model.getPositionAt(nested._offset + placeholderOffset), model.getPositionAt(nested._offset + placeholderOffset + placeholderLen));\n          var handle = accessor.addDecoration(range, OneSnippet._decor.inactive);\n\n          _this._placeholderDecorations.set(placeholder_1, handle);\n        }\n      } // Last, re-create the placeholder groups by sorting placeholders by their index.\n\n\n      _this._placeholderGroups = groupBy(_this._snippet.placeholders, Placeholder.compareByIndex);\n    });\n  };\n\n  OneSnippet._decor = {\n    active: ModelDecorationOptions.register({\n      stickiness: 0\n      /* AlwaysGrowsWhenTypingAtEdges */\n      ,\n      className: 'snippet-placeholder'\n    }),\n    inactive: ModelDecorationOptions.register({\n      stickiness: 1\n      /* NeverGrowsWhenTypingAtEdges */\n      ,\n      className: 'snippet-placeholder'\n    }),\n    activeFinal: ModelDecorationOptions.register({\n      stickiness: 1\n      /* NeverGrowsWhenTypingAtEdges */\n      ,\n      className: 'finish-snippet-placeholder'\n    }),\n    inactiveFinal: ModelDecorationOptions.register({\n      stickiness: 1\n      /* NeverGrowsWhenTypingAtEdges */\n      ,\n      className: 'finish-snippet-placeholder'\n    })\n  };\n  return OneSnippet;\n}();\n\nexport { OneSnippet };\n\nvar SnippetSession =\n/** @class */\nfunction () {\n  function SnippetSession(editor, template, overwriteBefore, overwriteAfter, adjustWhitespace) {\n    if (overwriteBefore === void 0) {\n      overwriteBefore = 0;\n    }\n\n    if (overwriteAfter === void 0) {\n      overwriteAfter = 0;\n    }\n\n    if (adjustWhitespace === void 0) {\n      adjustWhitespace = true;\n    }\n\n    this._templateMerges = [];\n    this._snippets = [];\n    this._editor = editor;\n    this._template = template;\n    this._overwriteBefore = overwriteBefore;\n    this._overwriteAfter = overwriteAfter;\n    this._adjustWhitespace = adjustWhitespace;\n  }\n\n  SnippetSession.adjustWhitespace = function (model, position, snippet) {\n    var line = model.getLineContent(position.lineNumber);\n    var lineLeadingWhitespace = getLeadingWhitespace(line, 0, position.column - 1);\n    snippet.walk(function (marker) {\n      if (marker instanceof Text && !(marker.parent instanceof Choice)) {\n        // adjust indentation of text markers, except for choise elements\n        // which get adjusted when being selected\n        var lines = marker.value.split(/\\r\\n|\\r|\\n/);\n\n        for (var i = 1; i < lines.length; i++) {\n          var templateLeadingWhitespace = getLeadingWhitespace(lines[i]);\n          lines[i] = model.normalizeIndentation(lineLeadingWhitespace + templateLeadingWhitespace) + lines[i].substr(templateLeadingWhitespace.length);\n        }\n\n        var newValue = lines.join(model.getEOL());\n\n        if (newValue !== marker.value) {\n          marker.parent.replace(marker, [new Text(newValue)]);\n        }\n      }\n\n      return true;\n    });\n  };\n\n  SnippetSession.adjustSelection = function (model, selection, overwriteBefore, overwriteAfter) {\n    if (overwriteBefore !== 0 || overwriteAfter !== 0) {\n      // overwrite[Before|After] is compute using the position, not the whole\n      // selection. therefore we adjust the selection around that position\n      var positionLineNumber = selection.positionLineNumber,\n          positionColumn = selection.positionColumn;\n      var positionColumnBefore = positionColumn - overwriteBefore;\n      var positionColumnAfter = positionColumn + overwriteAfter;\n      var range = model.validateRange({\n        startLineNumber: positionLineNumber,\n        startColumn: positionColumnBefore,\n        endLineNumber: positionLineNumber,\n        endColumn: positionColumnAfter\n      });\n      selection = Selection.createWithDirection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn, selection.getDirection());\n    }\n\n    return selection;\n  };\n\n  SnippetSession.createEditsAndSnippets = function (editor, template, overwriteBefore, overwriteAfter, enforceFinalTabstop, adjustWhitespace) {\n    var edits = [];\n    var snippets = [];\n\n    if (!editor.hasModel()) {\n      return {\n        edits: edits,\n        snippets: snippets\n      };\n    }\n\n    var model = editor.getModel();\n    var modelBasedVariableResolver = new ModelBasedVariableResolver(model);\n    var clipboardService = editor.invokeWithinContext(function (accessor) {\n      return accessor.get(IClipboardService, optional);\n    });\n    var workspaceService = editor.invokeWithinContext(function (accessor) {\n      return accessor.get(IWorkspaceContextService, optional);\n    });\n    var delta = 0; // know what text the overwrite[Before|After] extensions\n    // of the primary curser have selected because only when\n    // secondary selections extend to the same text we can grow them\n\n    var firstBeforeText = model.getValueInRange(SnippetSession.adjustSelection(model, editor.getSelection(), overwriteBefore, 0));\n    var firstAfterText = model.getValueInRange(SnippetSession.adjustSelection(model, editor.getSelection(), 0, overwriteAfter)); // remember the first non-whitespace column to decide if\n    // `keepWhitespace` should be overruled for secondary selections\n\n    var firstLineFirstNonWhitespace = model.getLineFirstNonWhitespaceColumn(editor.getSelection().positionLineNumber); // sort selections by their start position but remeber\n    // the original index. that allows you to create correct\n    // offset-based selection logic without changing the\n    // primary selection\n\n    var indexedSelections = editor.getSelections().map(function (selection, idx) {\n      return {\n        selection: selection,\n        idx: idx\n      };\n    }).sort(function (a, b) {\n      return Range.compareRangesUsingStarts(a.selection, b.selection);\n    });\n\n    for (var _i = 0, indexedSelections_1 = indexedSelections; _i < indexedSelections_1.length; _i++) {\n      var _a = indexedSelections_1[_i],\n          selection = _a.selection,\n          idx = _a.idx; // extend selection with the `overwriteBefore` and `overwriteAfter` and then\n      // compare if this matches the extensions of the primary selection\n\n      var extensionBefore = SnippetSession.adjustSelection(model, selection, overwriteBefore, 0);\n      var extensionAfter = SnippetSession.adjustSelection(model, selection, 0, overwriteAfter);\n\n      if (firstBeforeText !== model.getValueInRange(extensionBefore)) {\n        extensionBefore = selection;\n      }\n\n      if (firstAfterText !== model.getValueInRange(extensionAfter)) {\n        extensionAfter = selection;\n      } // merge the before and after selection into one\n\n\n      var snippetSelection = selection.setStartPosition(extensionBefore.startLineNumber, extensionBefore.startColumn).setEndPosition(extensionAfter.endLineNumber, extensionAfter.endColumn);\n      var snippet = new SnippetParser().parse(template, true, enforceFinalTabstop); // adjust the template string to match the indentation and\n      // whitespace rules of this insert location (can be different for each cursor)\n      // happens when being asked for (default) or when this is a secondary\n      // cursor and the leading whitespace is different\n\n      var start = snippetSelection.getStartPosition();\n\n      if (adjustWhitespace || idx > 0 && firstLineFirstNonWhitespace !== model.getLineFirstNonWhitespaceColumn(selection.positionLineNumber)) {\n        SnippetSession.adjustWhitespace(model, start, snippet);\n      }\n\n      snippet.resolveVariables(new CompositeSnippetVariableResolver([modelBasedVariableResolver, new ClipboardBasedVariableResolver(clipboardService, idx, indexedSelections.length), new SelectionBasedVariableResolver(model, selection), new CommentBasedVariableResolver(model), new TimeBasedVariableResolver(), new WorkspaceBasedVariableResolver(workspaceService)]));\n      var offset = model.getOffsetAt(start) + delta;\n      delta += snippet.toString().length - model.getValueLengthInRange(snippetSelection); // store snippets with the index of their originating selection.\n      // that ensures the primiary cursor stays primary despite not being\n      // the one with lowest start position\n\n      edits[idx] = EditOperation.replace(snippetSelection, snippet.toString());\n      snippets[idx] = new OneSnippet(editor, snippet, offset);\n    }\n\n    return {\n      edits: edits,\n      snippets: snippets\n    };\n  };\n\n  SnippetSession.prototype.dispose = function () {\n    dispose(this._snippets);\n  };\n\n  SnippetSession.prototype._logInfo = function () {\n    return \"template=\\\"\" + this._template + \"\\\", merged_templates=\\\"\" + this._templateMerges.join(' -> ') + \"\\\"\";\n  };\n\n  SnippetSession.prototype.insert = function () {\n    var _this = this;\n\n    if (!this._editor.hasModel()) {\n      return;\n    }\n\n    var model = this._editor.getModel(); // make insert edit and start with first selections\n\n\n    var _a = SnippetSession.createEditsAndSnippets(this._editor, this._template, this._overwriteBefore, this._overwriteAfter, false, this._adjustWhitespace),\n        edits = _a.edits,\n        snippets = _a.snippets;\n\n    this._snippets = snippets;\n    var selections = model.pushEditOperations(this._editor.getSelections(), edits, function (undoEdits) {\n      if (_this._snippets[0].hasPlaceholder) {\n        return _this._move(true);\n      } else {\n        return undoEdits.map(function (edit) {\n          return Selection.fromPositions(edit.range.getEndPosition());\n        });\n      }\n    });\n\n    this._editor.setSelections(selections);\n\n    this._editor.revealRange(selections[0]);\n  };\n\n  SnippetSession.prototype.merge = function (template, overwriteBefore, overwriteAfter, adjustWhitespace) {\n    var _this = this;\n\n    if (overwriteBefore === void 0) {\n      overwriteBefore = 0;\n    }\n\n    if (overwriteAfter === void 0) {\n      overwriteAfter = 0;\n    }\n\n    if (adjustWhitespace === void 0) {\n      adjustWhitespace = true;\n    }\n\n    if (!this._editor.hasModel()) {\n      return;\n    }\n\n    this._templateMerges.push([this._snippets[0]._nestingLevel, this._snippets[0]._placeholderGroupsIdx, template]);\n\n    var _a = SnippetSession.createEditsAndSnippets(this._editor, template, overwriteBefore, overwriteAfter, true, adjustWhitespace),\n        edits = _a.edits,\n        snippets = _a.snippets;\n\n    this._editor.setSelections(this._editor.getModel().pushEditOperations(this._editor.getSelections(), edits, function (undoEdits) {\n      for (var _i = 0, _a = _this._snippets; _i < _a.length; _i++) {\n        var snippet = _a[_i];\n        snippet.merge(snippets);\n      }\n\n      console.assert(snippets.length === 0);\n\n      if (_this._snippets[0].hasPlaceholder) {\n        return _this._move(undefined);\n      } else {\n        return undoEdits.map(function (edit) {\n          return Selection.fromPositions(edit.range.getEndPosition());\n        });\n      }\n    }));\n  };\n\n  SnippetSession.prototype.next = function () {\n    var newSelections = this._move(true);\n\n    this._editor.setSelections(newSelections);\n\n    this._editor.revealPositionInCenterIfOutsideViewport(newSelections[0].getPosition());\n  };\n\n  SnippetSession.prototype.prev = function () {\n    var newSelections = this._move(false);\n\n    this._editor.setSelections(newSelections);\n\n    this._editor.revealPositionInCenterIfOutsideViewport(newSelections[0].getPosition());\n  };\n\n  SnippetSession.prototype._move = function (fwd) {\n    var selections = [];\n\n    for (var _i = 0, _a = this._snippets; _i < _a.length; _i++) {\n      var snippet = _a[_i];\n      var oneSelection = snippet.move(fwd);\n      selections.push.apply(selections, oneSelection);\n    }\n\n    return selections;\n  };\n\n  Object.defineProperty(SnippetSession.prototype, \"isAtFirstPlaceholder\", {\n    get: function get() {\n      return this._snippets[0].isAtFirstPlaceholder;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(SnippetSession.prototype, \"isAtLastPlaceholder\", {\n    get: function get() {\n      return this._snippets[0].isAtLastPlaceholder;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(SnippetSession.prototype, \"hasPlaceholder\", {\n    get: function get() {\n      return this._snippets[0].hasPlaceholder;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(SnippetSession.prototype, \"choice\", {\n    get: function get() {\n      return this._snippets[0].choice;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  SnippetSession.prototype.isSelectionWithinPlaceholders = function () {\n    if (!this.hasPlaceholder) {\n      return false;\n    }\n\n    var selections = this._editor.getSelections();\n\n    if (selections.length < this._snippets.length) {\n      // this means we started snippet mode with N\n      // selections and have M (N > M) selections.\n      // So one snippet is without selection -> cancel\n      return false;\n    }\n\n    var allPossibleSelections = new Map();\n\n    var _loop_1 = function _loop_1(snippet) {\n      var possibleSelections = snippet.computePossibleSelections(); // for the first snippet find the placeholder (and its ranges)\n      // that contain at least one selection. for all remaining snippets\n      // the same placeholder (and their ranges) must be used.\n\n      if (allPossibleSelections.size === 0) {\n        possibleSelections.forEach(function (ranges, index) {\n          ranges.sort(Range.compareRangesUsingStarts);\n\n          for (var _i = 0, selections_1 = selections; _i < selections_1.length; _i++) {\n            var selection = selections_1[_i];\n\n            if (ranges[0].containsRange(selection)) {\n              allPossibleSelections.set(index, []);\n              break;\n            }\n          }\n        });\n      }\n\n      if (allPossibleSelections.size === 0) {\n        return {\n          value: false\n        };\n      } // add selections from 'this' snippet so that we know all\n      // selections for this placeholder\n\n\n      allPossibleSelections.forEach(function (array, index) {\n        array.push.apply(array, possibleSelections.get(index));\n      });\n    };\n\n    for (var _i = 0, _a = this._snippets; _i < _a.length; _i++) {\n      var snippet = _a[_i];\n\n      var state_1 = _loop_1(snippet);\n\n      if (typeof state_1 === \"object\") return state_1.value;\n    } // sort selections (and later placeholder-ranges). then walk both\n    // arrays and make sure the placeholder-ranges contain the corresponding\n    // selection\n\n\n    selections.sort(Range.compareRangesUsingStarts);\n    allPossibleSelections.forEach(function (ranges, index) {\n      if (ranges.length !== selections.length) {\n        allPossibleSelections.delete(index);\n        return;\n      }\n\n      ranges.sort(Range.compareRangesUsingStarts);\n\n      for (var i = 0; i < ranges.length; i++) {\n        if (!ranges[i].containsRange(selections[i])) {\n          allPossibleSelections.delete(index);\n          return;\n        }\n      }\n    }); // from all possible selections we have deleted those\n    // that don't match with the current selection. if we don't\n    // have any left, we don't have a selection anymore\n\n    return allPossibleSelections.size > 0;\n  };\n\n  return SnippetSession;\n}();\n\nexport { SnippetSession };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport { dispose } from '../../../base/common/lifecycle.js';\nimport { repeat } from '../../../base/common/strings.js';\nimport { EditorCommand, registerEditorCommand, registerEditorContribution } from '../../browser/editorExtensions.js';\nimport { Range } from '../../common/core/range.js';\nimport { Selection } from '../../common/core/selection.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport { showSimpleSuggestions } from '../suggest/suggest.js';\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../../platform/contextkey/common/contextkey.js';\nimport { ILogService } from '../../../platform/log/common/log.js';\nimport { SnippetSession } from './snippetSession.js';\n\nvar SnippetController2 =\n/** @class */\nfunction () {\n  function SnippetController2(_editor, _logService, contextKeyService) {\n    this._editor = _editor;\n    this._logService = _logService;\n    this._snippetListener = [];\n    this._inSnippet = SnippetController2.InSnippetMode.bindTo(contextKeyService);\n    this._hasNextTabstop = SnippetController2.HasNextTabstop.bindTo(contextKeyService);\n    this._hasPrevTabstop = SnippetController2.HasPrevTabstop.bindTo(contextKeyService);\n  }\n\n  SnippetController2.get = function (editor) {\n    return editor.getContribution('snippetController2');\n  };\n\n  SnippetController2.prototype.dispose = function () {\n    this._inSnippet.reset();\n\n    this._hasPrevTabstop.reset();\n\n    this._hasNextTabstop.reset();\n\n    dispose(this._session);\n  };\n\n  SnippetController2.prototype.getId = function () {\n    return 'snippetController2';\n  };\n\n  SnippetController2.prototype.insert = function (template, overwriteBefore, overwriteAfter, undoStopBefore, undoStopAfter, adjustWhitespace) {\n    if (overwriteBefore === void 0) {\n      overwriteBefore = 0;\n    }\n\n    if (overwriteAfter === void 0) {\n      overwriteAfter = 0;\n    }\n\n    if (undoStopBefore === void 0) {\n      undoStopBefore = true;\n    }\n\n    if (undoStopAfter === void 0) {\n      undoStopAfter = true;\n    }\n\n    if (adjustWhitespace === void 0) {\n      adjustWhitespace = true;\n    } // this is here to find out more about the yet-not-understood\n    // error that sometimes happens when we fail to inserted a nested\n    // snippet\n\n\n    try {\n      this._doInsert(template, overwriteBefore, overwriteAfter, undoStopBefore, undoStopAfter, adjustWhitespace);\n    } catch (e) {\n      this.cancel();\n\n      this._logService.error(e);\n\n      this._logService.error('snippet_error');\n\n      this._logService.error('insert_template=', template);\n\n      this._logService.error('existing_template=', this._session ? this._session._logInfo() : '<no_session>');\n    }\n  };\n\n  SnippetController2.prototype._doInsert = function (template, overwriteBefore, overwriteAfter, undoStopBefore, undoStopAfter, adjustWhitespace) {\n    var _this = this;\n\n    if (overwriteBefore === void 0) {\n      overwriteBefore = 0;\n    }\n\n    if (overwriteAfter === void 0) {\n      overwriteAfter = 0;\n    }\n\n    if (undoStopBefore === void 0) {\n      undoStopBefore = true;\n    }\n\n    if (undoStopAfter === void 0) {\n      undoStopAfter = true;\n    }\n\n    if (adjustWhitespace === void 0) {\n      adjustWhitespace = true;\n    }\n\n    if (!this._editor.hasModel()) {\n      return;\n    } // don't listen while inserting the snippet\n    // as that is the inflight state causing cancelation\n\n\n    this._snippetListener = dispose(this._snippetListener);\n\n    if (undoStopBefore) {\n      this._editor.getModel().pushStackElement();\n    }\n\n    if (!this._session) {\n      this._modelVersionId = this._editor.getModel().getAlternativeVersionId();\n      this._session = new SnippetSession(this._editor, template, overwriteBefore, overwriteAfter, adjustWhitespace);\n\n      this._session.insert();\n    } else {\n      this._session.merge(template, overwriteBefore, overwriteAfter, adjustWhitespace);\n    }\n\n    if (undoStopAfter) {\n      this._editor.getModel().pushStackElement();\n    }\n\n    this._updateState();\n\n    this._snippetListener = [this._editor.onDidChangeModelContent(function (e) {\n      return e.isFlush && _this.cancel();\n    }), this._editor.onDidChangeModel(function () {\n      return _this.cancel();\n    }), this._editor.onDidChangeCursorSelection(function () {\n      return _this._updateState();\n    })];\n  };\n\n  SnippetController2.prototype._updateState = function () {\n    if (!this._session || !this._editor.hasModel()) {\n      // canceled in the meanwhile\n      return;\n    }\n\n    if (this._modelVersionId === this._editor.getModel().getAlternativeVersionId()) {\n      // undo until the 'before' state happened\n      // and makes use cancel snippet mode\n      return this.cancel();\n    }\n\n    if (!this._session.hasPlaceholder) {\n      // don't listen for selection changes and don't\n      // update context keys when the snippet is plain text\n      return this.cancel();\n    }\n\n    if (this._session.isAtLastPlaceholder || !this._session.isSelectionWithinPlaceholders()) {\n      return this.cancel();\n    }\n\n    this._inSnippet.set(true);\n\n    this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder);\n\n    this._hasNextTabstop.set(!this._session.isAtLastPlaceholder);\n\n    this._handleChoice();\n  };\n\n  SnippetController2.prototype._handleChoice = function () {\n    var _this = this;\n\n    if (!this._session || !this._editor.hasModel()) {\n      this._currentChoice = undefined;\n      return;\n    }\n\n    var choice = this._session.choice;\n\n    if (!choice) {\n      this._currentChoice = undefined;\n      return;\n    }\n\n    if (this._currentChoice !== choice) {\n      this._currentChoice = choice;\n\n      this._editor.setSelections(this._editor.getSelections().map(function (s) {\n        return Selection.fromPositions(s.getStartPosition());\n      }));\n\n      var first_1 = choice.options[0];\n      showSimpleSuggestions(this._editor, choice.options.map(function (option, i) {\n        // let before = choice.options.slice(0, i);\n        // let after = choice.options.slice(i);\n        return {\n          kind: 13\n          /* Value */\n          ,\n          label: option.value,\n          insertText: option.value,\n          // insertText: `\\${1|${after.concat(before).join(',')}|}$0`,\n          // snippetType: 'textmate',\n          sortText: repeat('a', i + 1),\n          range: Range.fromPositions(_this._editor.getPosition(), _this._editor.getPosition().delta(0, first_1.value.length))\n        };\n      }));\n    }\n  };\n\n  SnippetController2.prototype.finish = function () {\n    while (this._inSnippet.get()) {\n      this.next();\n    }\n  };\n\n  SnippetController2.prototype.cancel = function (resetSelection) {\n    if (resetSelection === void 0) {\n      resetSelection = false;\n    }\n\n    this._inSnippet.reset();\n\n    this._hasPrevTabstop.reset();\n\n    this._hasNextTabstop.reset();\n\n    dispose(this._snippetListener);\n    dispose(this._session);\n    this._session = undefined;\n    this._modelVersionId = -1;\n\n    if (resetSelection) {\n      // reset selection to the primary cursor when being asked\n      // for. this happens when explicitly cancelling snippet mode,\n      // e.g. when pressing ESC\n      this._editor.setSelections([this._editor.getSelection()]);\n    }\n  };\n\n  SnippetController2.prototype.prev = function () {\n    if (this._session) {\n      this._session.prev();\n    }\n\n    this._updateState();\n  };\n\n  SnippetController2.prototype.next = function () {\n    if (this._session) {\n      this._session.next();\n    }\n\n    this._updateState();\n  };\n\n  SnippetController2.prototype.isInSnippet = function () {\n    return Boolean(this._inSnippet.get());\n  };\n\n  SnippetController2.InSnippetMode = new RawContextKey('inSnippetMode', false);\n  SnippetController2.HasNextTabstop = new RawContextKey('hasNextTabstop', false);\n  SnippetController2.HasPrevTabstop = new RawContextKey('hasPrevTabstop', false);\n  SnippetController2 = __decorate([__param(1, ILogService), __param(2, IContextKeyService)], SnippetController2);\n  return SnippetController2;\n}();\n\nexport { SnippetController2 };\nregisterEditorContribution(SnippetController2);\nvar CommandCtor = EditorCommand.bindToContribution(SnippetController2.get);\nregisterEditorCommand(new CommandCtor({\n  id: 'jumpToNextSnippetPlaceholder',\n  precondition: ContextKeyExpr.and(SnippetController2.InSnippetMode, SnippetController2.HasNextTabstop),\n  handler: function handler(ctrl) {\n    return ctrl.next();\n  },\n  kbOpts: {\n    weight: 100\n    /* EditorContrib */\n    + 30,\n    kbExpr: EditorContextKeys.editorTextFocus,\n    primary: 2\n    /* Tab */\n\n  }\n}));\nregisterEditorCommand(new CommandCtor({\n  id: 'jumpToPrevSnippetPlaceholder',\n  precondition: ContextKeyExpr.and(SnippetController2.InSnippetMode, SnippetController2.HasPrevTabstop),\n  handler: function handler(ctrl) {\n    return ctrl.prev();\n  },\n  kbOpts: {\n    weight: 100\n    /* EditorContrib */\n    + 30,\n    kbExpr: EditorContextKeys.editorTextFocus,\n    primary: 1024\n    /* Shift */\n    | 2\n    /* Tab */\n\n  }\n}));\nregisterEditorCommand(new CommandCtor({\n  id: 'leaveSnippet',\n  precondition: SnippetController2.InSnippetMode,\n  handler: function handler(ctrl) {\n    return ctrl.cancel(true);\n  },\n  kbOpts: {\n    weight: 100\n    /* EditorContrib */\n    + 30,\n    kbExpr: EditorContextKeys.editorTextFocus,\n    primary: 9\n    /* Escape */\n    ,\n    secondary: [1024\n    /* Shift */\n    | 9\n    /* Escape */\n    ]\n  }\n}));\nregisterEditorCommand(new CommandCtor({\n  id: 'acceptSnippet',\n  precondition: SnippetController2.InSnippetMode,\n  handler: function handler(ctrl) {\n    return ctrl.finish();\n  }\n}));","export var FileKind;\n\n(function (FileKind) {\n  FileKind[FileKind[\"FILE\"] = 0] = \"FILE\";\n  FileKind[FileKind[\"FOLDER\"] = 1] = \"FOLDER\";\n  FileKind[FileKind[\"ROOT_FOLDER\"] = 2] = \"ROOT_FOLDER\";\n})(FileKind || (FileKind = {}));","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport { dispose } from '../../../base/common/lifecycle.js';\nimport { IContextKeyService, RawContextKey } from '../../../platform/contextkey/common/contextkey.js';\n\nvar SuggestAlternatives =\n/** @class */\nfunction () {\n  function SuggestAlternatives(_editor, contextKeyService) {\n    this._editor = _editor;\n    this._ckOtherSuggestions = SuggestAlternatives.OtherSuggestions.bindTo(contextKeyService);\n  }\n\n  SuggestAlternatives.prototype.dispose = function () {\n    this.reset();\n  };\n\n  SuggestAlternatives.prototype.reset = function () {\n    this._ckOtherSuggestions.reset();\n\n    dispose(this._listener);\n    this._model = undefined;\n    this._acceptNext = undefined;\n    this._ignore = false;\n  };\n\n  SuggestAlternatives.prototype.set = function (_a, acceptNext) {\n    var _this = this;\n\n    var model = _a.model,\n        index = _a.index; // no suggestions -> nothing to do\n\n    if (model.items.length === 0) {\n      this.reset();\n      return;\n    } // no alternative suggestions -> nothing to do\n\n\n    var nextIndex = SuggestAlternatives._moveIndex(true, model, index);\n\n    if (nextIndex === index) {\n      this.reset();\n      return;\n    }\n\n    this._acceptNext = acceptNext;\n    this._model = model;\n    this._index = index;\n    this._listener = this._editor.onDidChangeCursorPosition(function () {\n      if (!_this._ignore) {\n        _this.reset();\n      }\n    });\n\n    this._ckOtherSuggestions.set(true);\n  };\n\n  SuggestAlternatives._moveIndex = function (fwd, model, index) {\n    var newIndex = index;\n\n    while (true) {\n      newIndex = (newIndex + model.items.length + (fwd ? +1 : -1)) % model.items.length;\n\n      if (newIndex === index) {\n        break;\n      }\n\n      if (!model.items[newIndex].completion.additionalTextEdits) {\n        break;\n      }\n    }\n\n    return newIndex;\n  };\n\n  SuggestAlternatives.prototype.next = function () {\n    this._move(true);\n  };\n\n  SuggestAlternatives.prototype.prev = function () {\n    this._move(false);\n  };\n\n  SuggestAlternatives.prototype._move = function (fwd) {\n    if (!this._model) {\n      // nothing to reason about\n      return;\n    }\n\n    try {\n      this._ignore = true;\n      this._index = SuggestAlternatives._moveIndex(fwd, this._model, this._index);\n\n      this._acceptNext({\n        index: this._index,\n        item: this._model.items[this._index],\n        model: this._model\n      });\n    } finally {\n      this._ignore = false;\n    }\n  };\n\n  SuggestAlternatives.OtherSuggestions = new RawContextKey('hasOtherSuggestions', false);\n  SuggestAlternatives = __decorate([__param(1, IContextKeyService)], SuggestAlternatives);\n  return SuggestAlternatives;\n}();\n\nexport { SuggestAlternatives };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { fuzzyScore, fuzzyScoreGracefulAggressive, anyScore, FuzzyScore } from '../../../base/common/filters.js';\nimport { isDisposable } from '../../../base/common/lifecycle.js';\nimport { EDITOR_DEFAULTS } from '../../common/config/editorOptions.js';\n\nvar LineContext =\n/** @class */\nfunction () {\n  function LineContext() {}\n\n  return LineContext;\n}();\n\nexport { LineContext };\n\nvar CompletionModel =\n/** @class */\nfunction () {\n  function CompletionModel(items, column, lineContext, wordDistance, options) {\n    if (options === void 0) {\n      options = EDITOR_DEFAULTS.contribInfo.suggest;\n    }\n\n    this._snippetCompareFn = CompletionModel._compareCompletionItems;\n    this._items = items;\n    this._column = column;\n    this._wordDistance = wordDistance;\n    this._options = options;\n    this._refilterKind = 1\n    /* All */\n    ;\n    this._lineContext = lineContext;\n\n    if (options.snippets === 'top') {\n      this._snippetCompareFn = CompletionModel._compareCompletionItemsSnippetsUp;\n    } else if (options.snippets === 'bottom') {\n      this._snippetCompareFn = CompletionModel._compareCompletionItemsSnippetsDown;\n    }\n  }\n\n  CompletionModel.prototype.dispose = function () {\n    var seen = new Set();\n\n    for (var _i = 0, _a = this._items; _i < _a.length; _i++) {\n      var container = _a[_i].container;\n\n      if (!seen.has(container)) {\n        seen.add(container);\n\n        if (isDisposable(container)) {\n          container.dispose();\n        }\n      }\n    }\n  };\n\n  Object.defineProperty(CompletionModel.prototype, \"lineContext\", {\n    get: function get() {\n      return this._lineContext;\n    },\n    set: function set(value) {\n      if (this._lineContext.leadingLineContent !== value.leadingLineContent || this._lineContext.characterCountDelta !== value.characterCountDelta) {\n        this._refilterKind = this._lineContext.characterCountDelta < value.characterCountDelta && this._filteredItems ? 2\n        /* Incr */\n        : 1\n        /* All */\n        ;\n        this._lineContext = value;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(CompletionModel.prototype, \"items\", {\n    get: function get() {\n      this._ensureCachedState();\n\n      return this._filteredItems;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(CompletionModel.prototype, \"incomplete\", {\n    get: function get() {\n      this._ensureCachedState();\n\n      return this._isIncomplete;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  CompletionModel.prototype.adopt = function (except) {\n    var res = new Array();\n\n    for (var i = 0; i < this._items.length;) {\n      if (!except.has(this._items[i].provider)) {\n        res.push(this._items[i]); // unordered removed\n\n        this._items[i] = this._items[this._items.length - 1];\n\n        this._items.pop();\n      } else {\n        // continue with next item\n        i++;\n      }\n    }\n\n    this._refilterKind = 1\n    /* All */\n    ;\n    return res;\n  };\n\n  Object.defineProperty(CompletionModel.prototype, \"stats\", {\n    get: function get() {\n      this._ensureCachedState();\n\n      return this._stats;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  CompletionModel.prototype._ensureCachedState = function () {\n    if (this._refilterKind !== 0\n    /* Nothing */\n    ) {\n        this._createCachedState();\n      }\n  };\n\n  CompletionModel.prototype._createCachedState = function () {\n    this._isIncomplete = new Set();\n    this._stats = {\n      suggestionCount: 0,\n      snippetCount: 0,\n      textCount: 0\n    };\n    var _a = this._lineContext,\n        leadingLineContent = _a.leadingLineContent,\n        characterCountDelta = _a.characterCountDelta;\n    var word = '';\n    var wordLow = ''; // incrementally filter less\n\n    var source = this._refilterKind === 1\n    /* All */\n    ? this._items : this._filteredItems;\n    var target = []; // picks a score function based on the number of\n    // items that we have to score/filter and based on the\n    // user-configuration\n\n    var scoreFn = !this._options.filterGraceful || source.length > 2000 ? fuzzyScore : fuzzyScoreGracefulAggressive;\n\n    for (var i = 0; i < source.length; i++) {\n      var item = source[i]; // collect those supports that signaled having\n      // an incomplete result\n\n      if (item.container.incomplete) {\n        this._isIncomplete.add(item.provider);\n      } // 'word' is that remainder of the current line that we\n      // filter and score against. In theory each suggestion uses a\n      // different word, but in practice not - that's why we cache\n\n\n      var overwriteBefore = item.position.column - item.completion.range.startColumn;\n      var wordLen = overwriteBefore + characterCountDelta - (item.position.column - this._column);\n\n      if (word.length !== wordLen) {\n        word = wordLen === 0 ? '' : leadingLineContent.slice(-wordLen);\n        wordLow = word.toLowerCase();\n      } // remember the word against which this item was\n      // scored\n\n\n      item.word = word;\n\n      if (wordLen === 0) {\n        // when there is nothing to score against, don't\n        // event try to do. Use a const rank and rely on\n        // the fallback-sort using the initial sort order.\n        // use a score of `-100` because that is out of the\n        // bound of values `fuzzyScore` will return\n        item.score = FuzzyScore.Default;\n      } else {\n        // skip word characters that are whitespace until\n        // we have hit the replace range (overwriteBefore)\n        var wordPos = 0;\n\n        while (wordPos < overwriteBefore) {\n          var ch = word.charCodeAt(wordPos);\n\n          if (ch === 32\n          /* Space */\n          || ch === 9\n          /* Tab */\n          ) {\n              wordPos += 1;\n            } else {\n            break;\n          }\n        }\n\n        if (wordPos >= wordLen) {\n          // the wordPos at which scoring starts is the whole word\n          // and therefore the same rules as not having a word apply\n          item.score = FuzzyScore.Default;\n        } else if (typeof item.completion.filterText === 'string') {\n          // when there is a `filterText` it must match the `word`.\n          // if it matches we check with the label to compute highlights\n          // and if that doesn't yield a result we have no highlights,\n          // despite having the match\n          var match = scoreFn(word, wordLow, wordPos, item.completion.filterText, item.filterTextLow, 0, false);\n\n          if (!match) {\n            continue; // NO match\n          }\n\n          item.score = anyScore(word, wordLow, 0, item.completion.label, item.labelLow, 0);\n          item.score[0] = match[0]; // use score from filterText\n        } else {\n          // by default match `word` against the `label`\n          var match = scoreFn(word, wordLow, wordPos, item.completion.label, item.labelLow, 0, false);\n\n          if (!match) {\n            continue; // NO match\n          }\n\n          item.score = match;\n        }\n      }\n\n      item.idx = i;\n      item.distance = this._wordDistance.distance(item.position, item.completion);\n      target.push(item); // update stats\n\n      this._stats.suggestionCount++;\n\n      switch (item.completion.kind) {\n        case 25\n        /* Snippet */\n        :\n          this._stats.snippetCount++;\n          break;\n\n        case 18\n        /* Text */\n        :\n          this._stats.textCount++;\n          break;\n      }\n    }\n\n    this._filteredItems = target.sort(this._snippetCompareFn);\n    this._refilterKind = 0\n    /* Nothing */\n    ;\n  };\n\n  CompletionModel._compareCompletionItems = function (a, b) {\n    if (a.score[0] > b.score[0]) {\n      return -1;\n    } else if (a.score[0] < b.score[0]) {\n      return 1;\n    } else if (a.distance < b.distance) {\n      return -1;\n    } else if (a.distance > b.distance) {\n      return 1;\n    } else if (a.idx < b.idx) {\n      return -1;\n    } else if (a.idx > b.idx) {\n      return 1;\n    } else {\n      return 0;\n    }\n  };\n\n  CompletionModel._compareCompletionItemsSnippetsDown = function (a, b) {\n    if (a.completion.kind !== b.completion.kind) {\n      if (a.completion.kind === 25\n      /* Snippet */\n      ) {\n          return 1;\n        } else if (b.completion.kind === 25\n      /* Snippet */\n      ) {\n          return -1;\n        }\n    }\n\n    return CompletionModel._compareCompletionItems(a, b);\n  };\n\n  CompletionModel._compareCompletionItemsSnippetsUp = function (a, b) {\n    if (a.completion.kind !== b.completion.kind) {\n      if (a.completion.kind === 25\n      /* Snippet */\n      ) {\n          return -1;\n        } else if (b.completion.kind === 25\n      /* Snippet */\n      ) {\n          return 1;\n        }\n    }\n\n    return CompletionModel._compareCompletionItems(a, b);\n  };\n\n  return CompletionModel;\n}();\n\nexport { CompletionModel };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { binarySearch, isFalsyOrEmpty } from '../../../base/common/arrays.js';\nimport { Range } from '../../common/core/range.js';\nimport { BracketSelectionRangeProvider } from '../smartSelect/bracketSelections.js';\n\nvar WordDistance =\n/** @class */\nfunction () {\n  function WordDistance() {}\n\n  WordDistance.create = function (service, editor) {\n    if (!editor.getConfiguration().contribInfo.suggest.localityBonus) {\n      return Promise.resolve(WordDistance.None);\n    }\n\n    if (!editor.hasModel()) {\n      return Promise.resolve(WordDistance.None);\n    }\n\n    var model = editor.getModel();\n    var position = editor.getPosition();\n\n    if (!service.canComputeWordRanges(model.uri)) {\n      return Promise.resolve(WordDistance.None);\n    }\n\n    return new BracketSelectionRangeProvider().provideSelectionRanges(model, [position]).then(function (ranges) {\n      if (!ranges || ranges.length === 0 || ranges[0].length === 0) {\n        return WordDistance.None;\n      }\n\n      return service.computeWordRanges(model.uri, ranges[0][0].range).then(function (wordRanges) {\n        return new (\n        /** @class */\n        function (_super) {\n          __extends(class_1, _super);\n\n          function class_1() {\n            return _super !== null && _super.apply(this, arguments) || this;\n          }\n\n          class_1.prototype.distance = function (anchor, suggestion) {\n            if (!wordRanges || !position.equals(editor.getPosition())) {\n              return 0;\n            }\n\n            if (suggestion.kind === 17\n            /* Keyword */\n            ) {\n                return 2 << 20;\n              }\n\n            var word = suggestion.label;\n            var wordLines = wordRanges[word];\n\n            if (isFalsyOrEmpty(wordLines)) {\n              return 2 << 20;\n            }\n\n            var idx = binarySearch(wordLines, Range.fromPositions(anchor), Range.compareRangesUsingStarts);\n            var bestWordRange = idx >= 0 ? wordLines[idx] : wordLines[Math.max(0, ~idx - 1)];\n            var blockDistance = ranges.length;\n\n            for (var _i = 0, _a = ranges[0]; _i < _a.length; _i++) {\n              var range = _a[_i];\n\n              if (!Range.containsRange(range.range, bestWordRange)) {\n                break;\n              }\n\n              blockDistance -= 1;\n            }\n\n            return blockDistance;\n          };\n\n          return class_1;\n        }(WordDistance))();\n      });\n    });\n  };\n\n  WordDistance.None = new (\n  /** @class */\n  function (_super) {\n    __extends(class_2, _super);\n\n    function class_2() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    class_2.prototype.distance = function () {\n      return 0;\n    };\n\n    return class_2;\n  }(WordDistance))();\n  return WordDistance;\n}();\n\nexport { WordDistance };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { isNonEmptyArray } from '../../../base/common/arrays.js';\nimport { TimeoutTimer } from '../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { dispose } from '../../../base/common/lifecycle.js';\nimport { Selection } from '../../common/core/selection.js';\nimport { CompletionProviderRegistry, completionKindFromString } from '../../common/modes.js';\nimport { CompletionModel } from './completionModel.js';\nimport { getSuggestionComparator, provideSuggestionItems, getSnippetSuggestSupport, CompletionOptions } from './suggest.js';\nimport { SnippetController2 } from '../snippet/snippetController2.js';\nimport { CancellationTokenSource } from '../../../base/common/cancellation.js';\nimport { WordDistance } from './wordDistance.js';\n\nvar LineContext =\n/** @class */\nfunction () {\n  function LineContext(model, position, auto, shy) {\n    this.leadingLineContent = model.getLineContent(position.lineNumber).substr(0, position.column - 1);\n    this.leadingWord = model.getWordUntilPosition(position);\n    this.lineNumber = position.lineNumber;\n    this.column = position.column;\n    this.auto = auto;\n    this.shy = shy;\n  }\n\n  LineContext.shouldAutoTrigger = function (editor) {\n    if (!editor.hasModel()) {\n      return false;\n    }\n\n    var model = editor.getModel();\n    var pos = editor.getPosition();\n    model.tokenizeIfCheap(pos.lineNumber);\n    var word = model.getWordAtPosition(pos);\n\n    if (!word) {\n      return false;\n    }\n\n    if (word.endColumn !== pos.column) {\n      return false;\n    }\n\n    if (!isNaN(Number(word.word))) {\n      return false;\n    }\n\n    return true;\n  };\n\n  return LineContext;\n}();\n\nexport { LineContext };\n\nvar SuggestModel =\n/** @class */\nfunction () {\n  function SuggestModel(_editor, _editorWorker) {\n    var _this = this;\n\n    this._editor = _editor;\n    this._editorWorker = _editorWorker;\n    this._toDispose = [];\n    this._triggerQuickSuggest = new TimeoutTimer();\n    this._triggerRefilter = new TimeoutTimer();\n    this._state = 0\n    /* Idle */\n    ;\n    this._onDidCancel = new Emitter();\n    this._onDidTrigger = new Emitter();\n    this._onDidSuggest = new Emitter();\n    this.onDidCancel = this._onDidCancel.event;\n    this.onDidTrigger = this._onDidTrigger.event;\n    this.onDidSuggest = this._onDidSuggest.event;\n    this._currentSelection = this._editor.getSelection() || new Selection(1, 1, 1, 1); // wire up various listeners\n\n    this._toDispose.push(this._editor.onDidChangeModel(function () {\n      _this._updateTriggerCharacters();\n\n      _this.cancel();\n    }));\n\n    this._toDispose.push(this._editor.onDidChangeModelLanguage(function () {\n      _this._updateTriggerCharacters();\n\n      _this.cancel();\n    }));\n\n    this._toDispose.push(this._editor.onDidChangeConfiguration(function () {\n      _this._updateTriggerCharacters();\n\n      _this._updateQuickSuggest();\n    }));\n\n    this._toDispose.push(CompletionProviderRegistry.onDidChange(function () {\n      _this._updateTriggerCharacters();\n\n      _this._updateActiveSuggestSession();\n    }));\n\n    this._toDispose.push(this._editor.onDidChangeCursorSelection(function (e) {\n      _this._onCursorChange(e);\n    }));\n\n    var editorIsComposing = false;\n\n    this._toDispose.push(this._editor.onCompositionStart(function () {\n      editorIsComposing = true;\n    }));\n\n    this._toDispose.push(this._editor.onCompositionEnd(function () {\n      // refilter when composition ends\n      editorIsComposing = false;\n\n      _this._refilterCompletionItems();\n    }));\n\n    this._toDispose.push(this._editor.onDidChangeModelContent(function () {\n      // only filter completions when the editor isn't\n      // composing a character, e.g. ¨ + u makes ü but just\n      // ¨ cannot be used for filtering\n      if (!editorIsComposing) {\n        _this._refilterCompletionItems();\n      }\n    }));\n\n    this._updateTriggerCharacters();\n\n    this._updateQuickSuggest();\n  }\n\n  SuggestModel.prototype.dispose = function () {\n    dispose([this._onDidCancel, this._onDidSuggest, this._onDidTrigger, this._triggerCharacterListener, this._triggerQuickSuggest, this._triggerRefilter]);\n    this._toDispose = dispose(this._toDispose);\n    dispose(this._completionModel);\n    this.cancel();\n  }; // --- handle configuration & precondition changes\n\n\n  SuggestModel.prototype._updateQuickSuggest = function () {\n    this._quickSuggestDelay = this._editor.getConfiguration().contribInfo.quickSuggestionsDelay;\n\n    if (isNaN(this._quickSuggestDelay) || !this._quickSuggestDelay && this._quickSuggestDelay !== 0 || this._quickSuggestDelay < 0) {\n      this._quickSuggestDelay = 10;\n    }\n  };\n\n  SuggestModel.prototype._updateTriggerCharacters = function () {\n    var _this = this;\n\n    dispose(this._triggerCharacterListener);\n\n    if (this._editor.getConfiguration().readOnly || !this._editor.hasModel() || !this._editor.getConfiguration().contribInfo.suggestOnTriggerCharacters) {\n      return;\n    }\n\n    var supportsByTriggerCharacter = Object.create(null);\n\n    for (var _i = 0, _a = CompletionProviderRegistry.all(this._editor.getModel()); _i < _a.length; _i++) {\n      var support = _a[_i];\n\n      for (var _b = 0, _c = support.triggerCharacters || []; _b < _c.length; _b++) {\n        var ch = _c[_b];\n        var set = supportsByTriggerCharacter[ch];\n\n        if (!set) {\n          set = supportsByTriggerCharacter[ch] = new Set();\n          set.add(getSnippetSuggestSupport());\n        }\n\n        set.add(support);\n      }\n    }\n\n    this._triggerCharacterListener = this._editor.onDidType(function (text) {\n      var lastChar = text.charAt(text.length - 1);\n      var supports = supportsByTriggerCharacter[lastChar];\n\n      if (supports) {\n        // keep existing items that where not computed by the\n        // supports/providers that want to trigger now\n        var items = _this._completionModel ? _this._completionModel.adopt(supports) : undefined;\n\n        _this.trigger({\n          auto: true,\n          shy: false,\n          triggerCharacter: lastChar\n        }, Boolean(_this._completionModel), supports, items);\n      }\n    });\n  };\n\n  Object.defineProperty(SuggestModel.prototype, \"state\", {\n    // --- trigger/retrigger/cancel suggest\n    get: function get() {\n      return this._state;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  SuggestModel.prototype.cancel = function (retrigger) {\n    if (retrigger === void 0) {\n      retrigger = false;\n    }\n\n    if (this._state !== 0\n    /* Idle */\n    ) {\n        this._triggerRefilter.cancel();\n\n        this._triggerQuickSuggest.cancel();\n\n        if (this._requestToken) {\n          this._requestToken.cancel();\n\n          this._requestToken = undefined;\n        }\n\n        this._state = 0\n        /* Idle */\n        ;\n        dispose(this._completionModel);\n        this._completionModel = undefined;\n        this._context = undefined;\n\n        this._onDidCancel.fire({\n          retrigger: retrigger\n        });\n      }\n  };\n\n  SuggestModel.prototype._updateActiveSuggestSession = function () {\n    if (this._state !== 0\n    /* Idle */\n    ) {\n        if (!this._editor.hasModel() || !CompletionProviderRegistry.has(this._editor.getModel())) {\n          this.cancel();\n        } else {\n          this.trigger({\n            auto: this._state === 2\n            /* Auto */\n            ,\n            shy: false\n          }, true);\n        }\n      }\n  };\n\n  SuggestModel.prototype._onCursorChange = function (e) {\n    var _this = this;\n\n    if (!this._editor.hasModel()) {\n      return;\n    }\n\n    var model = this._editor.getModel();\n\n    var prevSelection = this._currentSelection;\n    this._currentSelection = this._editor.getSelection();\n\n    if (!e.selection.isEmpty() || e.reason !== 0\n    /* NotSet */\n    || e.source !== 'keyboard' && e.source !== 'deleteLeft') {\n      // Early exit if nothing needs to be done!\n      // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n      if (this._state !== 0\n      /* Idle */\n      ) {\n          this.cancel();\n        }\n\n      return;\n    }\n\n    if (!CompletionProviderRegistry.has(model)) {\n      return;\n    }\n\n    if (this._state === 0\n    /* Idle */\n    ) {\n        if (this._editor.getConfiguration().contribInfo.quickSuggestions === false) {\n          // not enabled\n          return;\n        }\n\n        if (!prevSelection.containsRange(this._currentSelection) && !prevSelection.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition())) {\n          // cursor didn't move RIGHT\n          return;\n        }\n\n        if (this._editor.getConfiguration().contribInfo.suggest.snippetsPreventQuickSuggestions && SnippetController2.get(this._editor).isInSnippet()) {\n          // no quick suggestion when in snippet mode\n          return;\n        }\n\n        this.cancel();\n\n        this._triggerQuickSuggest.cancelAndSet(function () {\n          if (!LineContext.shouldAutoTrigger(_this._editor)) {\n            return;\n          }\n\n          if (!_this._editor.hasModel()) {\n            return;\n          }\n\n          var model = _this._editor.getModel();\n\n          var pos = _this._editor.getPosition(); // validate enabled now\n\n\n          var quickSuggestions = _this._editor.getConfiguration().contribInfo.quickSuggestions;\n\n          if (quickSuggestions === false) {\n            return;\n          } else if (quickSuggestions === true) {// all good\n          } else {\n            // Check the type of the token that triggered this\n            model.tokenizeIfCheap(pos.lineNumber);\n            var lineTokens = model.getLineTokens(pos.lineNumber);\n            var tokenType = lineTokens.getStandardTokenType(lineTokens.findTokenIndexAtOffset(Math.max(pos.column - 1 - 1, 0)));\n            var inValidScope = quickSuggestions.other && tokenType === 0\n            /* Other */\n            || quickSuggestions.comments && tokenType === 1\n            /* Comment */\n            || quickSuggestions.strings && tokenType === 2\n            /* String */\n            ;\n\n            if (!inValidScope) {\n              return;\n            }\n          } // we made it till here -> trigger now\n\n\n          _this.trigger({\n            auto: true,\n            shy: false\n          });\n        }, this._quickSuggestDelay);\n      }\n  };\n\n  SuggestModel.prototype._refilterCompletionItems = function () {\n    var _this = this;\n\n    if (this._state === 0\n    /* Idle */\n    ) {\n        return;\n      }\n\n    if (!this._editor.hasModel()) {\n      return;\n    } // refine active suggestion\n\n\n    this._triggerRefilter.cancelAndSet(function () {\n      if (!_this._editor.hasModel()) {\n        return;\n      }\n\n      var model = _this._editor.getModel();\n\n      var position = _this._editor.getPosition();\n\n      var ctx = new LineContext(model, position, _this._state === 2\n      /* Auto */\n      , false);\n\n      _this._onNewContext(ctx);\n    }, 0);\n  };\n\n  SuggestModel.prototype.trigger = function (context, retrigger, onlyFrom, existingItems) {\n    var _this = this;\n\n    if (retrigger === void 0) {\n      retrigger = false;\n    }\n\n    if (!this._editor.hasModel()) {\n      return;\n    }\n\n    var model = this._editor.getModel();\n\n    var auto = context.auto;\n    var ctx = new LineContext(model, this._editor.getPosition(), auto, context.shy); // Cancel previous requests, change state & update UI\n\n    this.cancel(retrigger);\n    this._state = auto ? 2\n    /* Auto */\n    : 1\n    /* Manual */\n    ;\n\n    this._onDidTrigger.fire({\n      auto: auto,\n      shy: context.shy\n    }); // Capture context when request was sent\n\n\n    this._context = ctx; // Build context for request\n\n    var suggestCtx;\n\n    if (context.triggerCharacter) {\n      suggestCtx = {\n        triggerKind: 1\n        /* TriggerCharacter */\n        ,\n        triggerCharacter: context.triggerCharacter\n      };\n    } else if (onlyFrom && onlyFrom.size > 0) {\n      suggestCtx = {\n        triggerKind: 2\n        /* TriggerForIncompleteCompletions */\n\n      };\n    } else {\n      suggestCtx = {\n        triggerKind: 0\n        /* Invoke */\n\n      };\n    }\n\n    this._requestToken = new CancellationTokenSource(); // kind filter and snippet sort rules\n\n    var contribInfo = this._editor.getConfiguration().contribInfo;\n\n    var itemKindFilter = new Set();\n    var snippetSortOrder = 1\n    /* Inline */\n    ;\n\n    switch (contribInfo.suggest.snippets) {\n      case 'top':\n        snippetSortOrder = 0\n        /* Top */\n        ;\n        break;\n      // \t↓ that's the default anyways...\n      // case 'inline':\n      // \tsnippetSortOrder = SnippetSortOrder.Inline;\n      // \tbreak;\n\n      case 'bottom':\n        snippetSortOrder = 2\n        /* Bottom */\n        ;\n        break;\n\n      case 'none':\n        itemKindFilter.add(25\n        /* Snippet */\n        );\n        break;\n    } // kind filter\n\n\n    for (var key in contribInfo.suggest.filteredTypes) {\n      var kind = completionKindFromString(key, true);\n\n      if (typeof kind !== 'undefined' && contribInfo.suggest.filteredTypes[key] === false) {\n        itemKindFilter.add(kind);\n      }\n    }\n\n    var wordDistance = WordDistance.create(this._editorWorker, this._editor);\n    var items = provideSuggestionItems(model, this._editor.getPosition(), new CompletionOptions(snippetSortOrder, itemKindFilter, onlyFrom), suggestCtx, this._requestToken.token);\n    Promise.all([items, wordDistance]).then(function (_a) {\n      var items = _a[0],\n          wordDistance = _a[1];\n      dispose(_this._requestToken);\n\n      if (_this._state === 0\n      /* Idle */\n      ) {\n          return;\n        }\n\n      if (!_this._editor.hasModel()) {\n        return;\n      }\n\n      var model = _this._editor.getModel();\n\n      if (isNonEmptyArray(existingItems)) {\n        var cmpFn = getSuggestionComparator(snippetSortOrder);\n        items = items.concat(existingItems).sort(cmpFn);\n      }\n\n      var ctx = new LineContext(model, _this._editor.getPosition(), auto, context.shy);\n      dispose(_this._completionModel);\n      _this._completionModel = new CompletionModel(items, _this._context.column, {\n        leadingLineContent: ctx.leadingLineContent,\n        characterCountDelta: ctx.column - _this._context.column\n      }, wordDistance, _this._editor.getConfiguration().contribInfo.suggest);\n\n      _this._onNewContext(ctx);\n    }).catch(onUnexpectedError);\n  };\n\n  SuggestModel.prototype._onNewContext = function (ctx) {\n    if (!this._context) {\n      // happens when 24x7 IntelliSense is enabled and still in its delay\n      return;\n    }\n\n    if (ctx.lineNumber !== this._context.lineNumber) {\n      // e.g. happens when pressing Enter while IntelliSense is computed\n      this.cancel();\n      return;\n    }\n\n    if (ctx.leadingWord.startColumn < this._context.leadingWord.startColumn) {\n      // happens when the current word gets outdented\n      this.cancel();\n      return;\n    }\n\n    if (ctx.column < this._context.column) {\n      // typed -> moved cursor LEFT -> retrigger if still on a word\n      if (ctx.leadingWord.word) {\n        this.trigger({\n          auto: this._context.auto,\n          shy: false\n        }, true);\n      } else {\n        this.cancel();\n      }\n\n      return;\n    }\n\n    if (!this._completionModel) {\n      // happens when IntelliSense is not yet computed\n      return;\n    }\n\n    if (ctx.column > this._context.column && this._completionModel.incomplete.size > 0 && ctx.leadingWord.word.length !== 0) {\n      // typed -> moved cursor RIGHT & incomple model & still on a word -> retrigger\n      var incomplete = this._completionModel.incomplete;\n\n      var adopted = this._completionModel.adopt(incomplete);\n\n      this.trigger({\n        auto: this._state === 2\n        /* Auto */\n        ,\n        shy: false\n      }, true, incomplete, adopted);\n    } else {\n      // typed -> moved cursor RIGHT -> update UI\n      var oldLineContext = this._completionModel.lineContext;\n      var isFrozen = false;\n      this._completionModel.lineContext = {\n        leadingLineContent: ctx.leadingLineContent,\n        characterCountDelta: ctx.column - this._context.column\n      };\n\n      if (this._completionModel.items.length === 0) {\n        if (LineContext.shouldAutoTrigger(this._editor) && this._context.leadingWord.endColumn < ctx.leadingWord.startColumn) {\n          // retrigger when heading into a new word\n          this.trigger({\n            auto: this._context.auto,\n            shy: false\n          }, true);\n          return;\n        }\n\n        if (!this._context.auto) {\n          // freeze when IntelliSense was manually requested\n          this._completionModel.lineContext = oldLineContext;\n          isFrozen = this._completionModel.items.length > 0;\n\n          if (isFrozen && ctx.leadingWord.word.length === 0) {\n            // there were results before but now there aren't\n            // and also we are not on a word anymore -> cancel\n            this.cancel();\n            return;\n          }\n        } else {\n          // nothing left\n          this.cancel();\n          return;\n        }\n      }\n\n      this._onDidSuggest.fire({\n        completionModel: this._completionModel,\n        auto: this._context.auto,\n        shy: this._context.shy,\n        isFrozen: isFrozen\n      });\n    }\n  };\n\n  return SuggestModel;\n}();\n\nexport { SuggestModel };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Schemas } from '../../../base/common/network.js';\nimport { DataUri, basenameOrAuthority } from '../../../base/common/resources.js';\nimport { PLAINTEXT_MODE_ID } from '../modes/modesRegistry.js';\nimport { FileKind } from '../../../platform/files/common/files.js';\nexport function getIconClasses(modelService, modeService, resource, fileKind) {\n  // we always set these base classes even if we do not have a path\n  var classes = fileKind === FileKind.ROOT_FOLDER ? ['rootfolder-icon'] : fileKind === FileKind.FOLDER ? ['folder-icon'] : ['file-icon'];\n\n  if (resource) {\n    // Get the path and name of the resource. For data-URIs, we need to parse specially\n    var name_1;\n    var path = void 0;\n\n    if (resource.scheme === Schemas.data) {\n      var metadata = DataUri.parseMetaData(resource);\n      name_1 = metadata.get(DataUri.META_DATA_LABEL);\n      path = name_1;\n    } else {\n      name_1 = cssEscape(basenameOrAuthority(resource).toLowerCase());\n      path = resource.path.toLowerCase();\n    } // Folders\n\n\n    if (fileKind === FileKind.FOLDER) {\n      classes.push(name_1 + \"-name-folder-icon\");\n    } // Files\n    else {\n        // Name & Extension(s)\n        if (name_1) {\n          classes.push(name_1 + \"-name-file-icon\");\n          var dotSegments = name_1.split('.');\n\n          for (var i = 1; i < dotSegments.length; i++) {\n            classes.push(dotSegments.slice(i).join('.') + \"-ext-file-icon\"); // add each combination of all found extensions if more than one\n          }\n\n          classes.push(\"ext-file-icon\"); // extra segment to increase file-ext score\n        } // Configured Language\n\n\n        var configuredLangId = getConfiguredLangId(modelService, modeService, resource);\n        configuredLangId = configuredLangId || (path ? modeService.getModeIdByFilepathOrFirstLine(path) : null);\n\n        if (configuredLangId) {\n          classes.push(cssEscape(configuredLangId) + \"-lang-file-icon\");\n        }\n      }\n  }\n\n  return classes;\n}\nexport function getConfiguredLangId(modelService, modeService, resource) {\n  var configuredLangId = null;\n\n  if (resource) {\n    var modeId = null; // Data URI: check for encoded metadata\n\n    if (resource.scheme === Schemas.data) {\n      var metadata = DataUri.parseMetaData(resource);\n      var mime = metadata.get(DataUri.META_DATA_MIME);\n\n      if (mime) {\n        modeId = modeService.getModeId(mime);\n      }\n    } // Any other URI: check for model if existing\n    else {\n        var model = modelService.getModel(resource);\n\n        if (model) {\n          modeId = model.getLanguageIdentifier().language;\n        }\n      }\n\n    if (modeId && modeId !== PLAINTEXT_MODE_ID) {\n      configuredLangId = modeId; // only take if the mode is specific (aka no just plain text)\n    }\n  }\n\n  return configuredLangId;\n}\nexport function cssEscape(val) {\n  return val.replace(/\\s/g, '\\\\$&'); // make sure to not introduce CSS classes from files that contain whitespace\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport './media/suggest.css';\nimport * as nls from '../../../nls.js';\nimport { createMatches } from '../../../base/common/filters.js';\nimport * as strings from '../../../base/common/strings.js';\nimport { Event, Emitter } from '../../../base/common/event.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { dispose, toDisposable } from '../../../base/common/lifecycle.js';\nimport { addClass, append, $, hide, removeClass, show, toggleClass, getDomNodePagePosition, hasClass } from '../../../base/browser/dom.js';\nimport { List } from '../../../base/browser/ui/list/listWidget.js';\nimport { DomScrollableElement } from '../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { Context as SuggestContext } from './suggest.js';\nimport { alert } from '../../../base/browser/ui/aria/aria.js';\nimport { ITelemetryService } from '../../../platform/telemetry/common/telemetry.js';\nimport { attachListStyler } from '../../../platform/theme/common/styler.js';\nimport { IThemeService, registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\nimport { registerColor, editorWidgetBackground, listFocusBackground, activeContrastBorder, listHighlightForeground, editorForeground, editorWidgetBorder, focusBorder, textLinkForeground, textCodeBlockBackground } from '../../../platform/theme/common/colorRegistry.js';\nimport { IStorageService } from '../../../platform/storage/common/storage.js';\nimport { MarkdownRenderer } from '../markdown/markdownRenderer.js';\nimport { IModeService } from '../../common/services/modeService.js';\nimport { IOpenerService } from '../../../platform/opener/common/opener.js';\nimport { TimeoutTimer, createCancelablePromise } from '../../../base/common/async.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { completionKindToCssClass } from '../../common/modes.js';\nimport { IconLabel } from '../../../base/browser/ui/iconLabel/iconLabel.js';\nimport { getIconClasses } from '../../common/services/getIconClasses.js';\nimport { IModelService } from '../../common/services/modelService.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { FileKind } from '../../../platform/files/common/files.js';\nvar expandSuggestionDocsByDefault = false;\n/**\n * Suggest widget colors\n */\n\nexport var editorSuggestWidgetBackground = registerColor('editorSuggestWidget.background', {\n  dark: editorWidgetBackground,\n  light: editorWidgetBackground,\n  hc: editorWidgetBackground\n}, nls.localize('editorSuggestWidgetBackground', 'Background color of the suggest widget.'));\nexport var editorSuggestWidgetBorder = registerColor('editorSuggestWidget.border', {\n  dark: editorWidgetBorder,\n  light: editorWidgetBorder,\n  hc: editorWidgetBorder\n}, nls.localize('editorSuggestWidgetBorder', 'Border color of the suggest widget.'));\nexport var editorSuggestWidgetForeground = registerColor('editorSuggestWidget.foreground', {\n  dark: editorForeground,\n  light: editorForeground,\n  hc: editorForeground\n}, nls.localize('editorSuggestWidgetForeground', 'Foreground color of the suggest widget.'));\nexport var editorSuggestWidgetSelectedBackground = registerColor('editorSuggestWidget.selectedBackground', {\n  dark: listFocusBackground,\n  light: listFocusBackground,\n  hc: listFocusBackground\n}, nls.localize('editorSuggestWidgetSelectedBackground', 'Background color of the selected entry in the suggest widget.'));\nexport var editorSuggestWidgetHighlightForeground = registerColor('editorSuggestWidget.highlightForeground', {\n  dark: listHighlightForeground,\n  light: listHighlightForeground,\n  hc: listHighlightForeground\n}, nls.localize('editorSuggestWidgetHighlightForeground', 'Color of the match highlights in the suggest widget.'));\nvar colorRegExp = /^(#([\\da-f]{3}){1,2}|(rgb|hsl)a\\(\\s*(\\d{1,3}%?\\s*,\\s*){3}(1|0?\\.\\d+)\\)|(rgb|hsl)\\(\\s*\\d{1,3}%?(\\s*,\\s*\\d{1,3}%?){2}\\s*\\))$/i;\n\nfunction extractColor(item, out) {\n  if (item.completion.label.match(colorRegExp)) {\n    out[0] = item.completion.label;\n    return true;\n  }\n\n  if (typeof item.completion.documentation === 'string' && item.completion.documentation.match(colorRegExp)) {\n    out[0] = item.completion.documentation;\n    return true;\n  }\n\n  return false;\n}\n\nfunction canExpandCompletionItem(item) {\n  if (!item) {\n    return false;\n  }\n\n  var suggestion = item.completion;\n\n  if (suggestion.documentation) {\n    return true;\n  }\n\n  return suggestion.detail && suggestion.detail !== suggestion.label;\n}\n\nvar Renderer =\n/** @class */\nfunction () {\n  function Renderer(widget, editor, triggerKeybindingLabel, _modelService, _modeService, _themeService) {\n    this.widget = widget;\n    this.editor = editor;\n    this.triggerKeybindingLabel = triggerKeybindingLabel;\n    this._modelService = _modelService;\n    this._modeService = _modeService;\n    this._themeService = _themeService;\n  }\n\n  Object.defineProperty(Renderer.prototype, \"templateId\", {\n    get: function get() {\n      return 'suggestion';\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Renderer.prototype.renderTemplate = function (container) {\n    var _this = this;\n\n    var data = Object.create(null);\n    data.disposables = [];\n    data.root = container;\n    addClass(data.root, 'show-file-icons');\n    data.icon = append(container, $('.icon'));\n    data.colorspan = append(data.icon, $('span.colorspan'));\n    var text = append(container, $('.contents'));\n    var main = append(text, $('.main'));\n    data.iconLabel = new IconLabel(main, {\n      supportHighlights: true\n    });\n    data.disposables.push(data.iconLabel);\n    data.typeLabel = append(main, $('span.type-label'));\n    data.readMore = append(main, $('span.readMore'));\n    data.readMore.title = nls.localize('readMore', \"Read More...{0}\", this.triggerKeybindingLabel);\n\n    var configureFont = function configureFont() {\n      var configuration = _this.editor.getConfiguration();\n\n      var fontFamily = configuration.fontInfo.fontFamily;\n      var fontSize = configuration.contribInfo.suggestFontSize || configuration.fontInfo.fontSize;\n      var lineHeight = configuration.contribInfo.suggestLineHeight || configuration.fontInfo.lineHeight;\n      var fontWeight = configuration.fontInfo.fontWeight;\n      var fontSizePx = fontSize + \"px\";\n      var lineHeightPx = lineHeight + \"px\";\n      data.root.style.fontSize = fontSizePx;\n      data.root.style.fontWeight = fontWeight;\n      main.style.fontFamily = fontFamily;\n      main.style.lineHeight = lineHeightPx;\n      data.icon.style.height = lineHeightPx;\n      data.icon.style.width = lineHeightPx;\n      data.readMore.style.height = lineHeightPx;\n      data.readMore.style.width = lineHeightPx;\n    };\n\n    configureFont();\n    Event.chain(this.editor.onDidChangeConfiguration.bind(this.editor)).filter(function (e) {\n      return e.fontInfo || e.contribInfo;\n    }).on(configureFont, null, data.disposables);\n    return data;\n  };\n\n  Renderer.prototype.renderElement = function (element, _index, templateData) {\n    var _this = this;\n\n    var data = templateData;\n    var suggestion = element.completion;\n    data.icon.className = 'icon ' + completionKindToCssClass(suggestion.kind);\n    data.colorspan.style.backgroundColor = '';\n    var labelOptions = {\n      labelEscapeNewLines: true,\n      matches: createMatches(element.score)\n    };\n    var color = [];\n\n    if (suggestion.kind === 19\n    /* Color */\n    && extractColor(element, color)) {\n      // special logic for 'color' completion items\n      data.icon.className = 'icon customcolor';\n      data.colorspan.style.backgroundColor = color[0];\n    } else if (suggestion.kind === 20\n    /* File */\n    && this._themeService.getIconTheme().hasFileIcons) {\n      // special logic for 'file' completion items\n      data.icon.className = 'icon hide';\n      labelOptions.extraClasses = [].concat(getIconClasses(this._modelService, this._modeService, URI.from({\n        scheme: 'fake',\n        path: suggestion.label\n      }), FileKind.FILE), getIconClasses(this._modelService, this._modeService, URI.from({\n        scheme: 'fake',\n        path: suggestion.detail\n      }), FileKind.FILE));\n    } else if (suggestion.kind === 23\n    /* Folder */\n    && this._themeService.getIconTheme().hasFolderIcons) {\n      // special logic for 'folder' completion items\n      data.icon.className = 'icon hide';\n      labelOptions.extraClasses = [].concat(getIconClasses(this._modelService, this._modeService, URI.from({\n        scheme: 'fake',\n        path: suggestion.label\n      }), FileKind.FOLDER), getIconClasses(this._modelService, this._modeService, URI.from({\n        scheme: 'fake',\n        path: suggestion.detail\n      }), FileKind.FOLDER));\n    } else {\n      // normal icon\n      data.icon.className = 'icon hide';\n      labelOptions.extraClasses = [\"suggest-icon \" + completionKindToCssClass(suggestion.kind)];\n    }\n\n    data.iconLabel.setLabel(suggestion.label, undefined, labelOptions);\n    data.typeLabel.textContent = (suggestion.detail || '').replace(/\\n.*$/m, '');\n\n    if (canExpandCompletionItem(element)) {\n      show(data.readMore);\n\n      data.readMore.onmousedown = function (e) {\n        e.stopPropagation();\n        e.preventDefault();\n      };\n\n      data.readMore.onclick = function (e) {\n        e.stopPropagation();\n        e.preventDefault();\n\n        _this.widget.toggleDetails();\n      };\n    } else {\n      hide(data.readMore);\n      data.readMore.onmousedown = null;\n      data.readMore.onclick = null;\n    }\n  };\n\n  Renderer.prototype.disposeTemplate = function (templateData) {\n    templateData.disposables = dispose(templateData.disposables);\n  };\n\n  Renderer = __decorate([__param(3, IModelService), __param(4, IModeService), __param(5, IThemeService)], Renderer);\n  return Renderer;\n}();\n\nvar SuggestionDetails =\n/** @class */\nfunction () {\n  function SuggestionDetails(container, widget, editor, markdownRenderer, triggerKeybindingLabel) {\n    var _this = this;\n\n    this.widget = widget;\n    this.editor = editor;\n    this.markdownRenderer = markdownRenderer;\n    this.triggerKeybindingLabel = triggerKeybindingLabel;\n    this.borderWidth = 1;\n    this.disposables = [];\n    this.el = append(container, $('.details'));\n    this.disposables.push(toDisposable(function () {\n      return container.removeChild(_this.el);\n    }));\n    this.body = $('.body');\n    this.scrollbar = new DomScrollableElement(this.body, {});\n    append(this.el, this.scrollbar.getDomNode());\n    this.disposables.push(this.scrollbar);\n    this.header = append(this.body, $('.header'));\n    this.close = append(this.header, $('span.close'));\n    this.close.title = nls.localize('readLess', \"Read less...{0}\", this.triggerKeybindingLabel);\n    this.type = append(this.header, $('p.type'));\n    this.docs = append(this.body, $('p.docs'));\n    this.ariaLabel = null;\n    this.configureFont();\n    Event.chain(this.editor.onDidChangeConfiguration.bind(this.editor)).filter(function (e) {\n      return e.fontInfo;\n    }).on(this.configureFont, this, this.disposables);\n    markdownRenderer.onDidRenderCodeBlock(function () {\n      return _this.scrollbar.scanDomNode();\n    }, this, this.disposables);\n  }\n\n  Object.defineProperty(SuggestionDetails.prototype, \"element\", {\n    get: function get() {\n      return this.el;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  SuggestionDetails.prototype.render = function (item) {\n    var _this = this;\n\n    this.renderDisposeable = dispose(this.renderDisposeable);\n\n    if (!item || !canExpandCompletionItem(item)) {\n      this.type.textContent = '';\n      this.docs.textContent = '';\n      addClass(this.el, 'no-docs');\n      this.ariaLabel = null;\n      return;\n    }\n\n    removeClass(this.el, 'no-docs');\n\n    if (typeof item.completion.documentation === 'string') {\n      removeClass(this.docs, 'markdown-docs');\n      this.docs.textContent = item.completion.documentation;\n    } else {\n      addClass(this.docs, 'markdown-docs');\n      this.docs.innerHTML = '';\n      var renderedContents = this.markdownRenderer.render(item.completion.documentation);\n      this.renderDisposeable = renderedContents;\n      this.docs.appendChild(renderedContents.element);\n    }\n\n    if (item.completion.detail) {\n      this.type.innerText = item.completion.detail;\n      show(this.type);\n    } else {\n      this.type.innerText = '';\n      hide(this.type);\n    }\n\n    this.el.style.height = this.header.offsetHeight + this.docs.offsetHeight + this.borderWidth * 2 + 'px';\n\n    this.close.onmousedown = function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n    };\n\n    this.close.onclick = function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      _this.widget.toggleDetails();\n    };\n\n    this.body.scrollTop = 0;\n    this.scrollbar.scanDomNode();\n    this.ariaLabel = strings.format('{0}{1}', item.completion.detail || '', item.completion.documentation ? typeof item.completion.documentation === 'string' ? item.completion.documentation : item.completion.documentation.value : '');\n  };\n\n  SuggestionDetails.prototype.getAriaLabel = function () {\n    return this.ariaLabel;\n  };\n\n  SuggestionDetails.prototype.scrollDown = function (much) {\n    if (much === void 0) {\n      much = 8;\n    }\n\n    this.body.scrollTop += much;\n  };\n\n  SuggestionDetails.prototype.scrollUp = function (much) {\n    if (much === void 0) {\n      much = 8;\n    }\n\n    this.body.scrollTop -= much;\n  };\n\n  SuggestionDetails.prototype.scrollTop = function () {\n    this.body.scrollTop = 0;\n  };\n\n  SuggestionDetails.prototype.scrollBottom = function () {\n    this.body.scrollTop = this.body.scrollHeight;\n  };\n\n  SuggestionDetails.prototype.pageDown = function () {\n    this.scrollDown(80);\n  };\n\n  SuggestionDetails.prototype.pageUp = function () {\n    this.scrollUp(80);\n  };\n\n  SuggestionDetails.prototype.setBorderWidth = function (width) {\n    this.borderWidth = width;\n  };\n\n  SuggestionDetails.prototype.configureFont = function () {\n    var configuration = this.editor.getConfiguration();\n    var fontFamily = configuration.fontInfo.fontFamily;\n    var fontSize = configuration.contribInfo.suggestFontSize || configuration.fontInfo.fontSize;\n    var lineHeight = configuration.contribInfo.suggestLineHeight || configuration.fontInfo.lineHeight;\n    var fontWeight = configuration.fontInfo.fontWeight;\n    var fontSizePx = fontSize + \"px\";\n    var lineHeightPx = lineHeight + \"px\";\n    this.el.style.fontSize = fontSizePx;\n    this.el.style.fontWeight = fontWeight;\n    this.type.style.fontFamily = fontFamily;\n    this.close.style.height = lineHeightPx;\n    this.close.style.width = lineHeightPx;\n  };\n\n  SuggestionDetails.prototype.dispose = function () {\n    this.disposables = dispose(this.disposables);\n    this.renderDisposeable = dispose(this.renderDisposeable);\n  };\n\n  return SuggestionDetails;\n}();\n\nvar SuggestWidget =\n/** @class */\nfunction () {\n  function SuggestWidget(editor, telemetryService, contextKeyService, themeService, storageService, keybindingService, modeService, openerService, instantiationService) {\n    var _this = this;\n\n    this.editor = editor;\n    this.telemetryService = telemetryService; // Editor.IContentWidget.allowEditorOverflow\n\n    this.allowEditorOverflow = true;\n    this.ignoreFocusEvents = false;\n    this.editorBlurTimeout = new TimeoutTimer();\n    this.showTimeout = new TimeoutTimer();\n    this.onDidSelectEmitter = new Emitter();\n    this.onDidFocusEmitter = new Emitter();\n    this.onDidHideEmitter = new Emitter();\n    this.onDidShowEmitter = new Emitter();\n    this.onDidSelect = this.onDidSelectEmitter.event;\n    this.onDidFocus = this.onDidFocusEmitter.event;\n    this.onDidHide = this.onDidHideEmitter.event;\n    this.onDidShow = this.onDidShowEmitter.event;\n    this.maxWidgetWidth = 660;\n    this.listWidth = 330;\n    this.firstFocusInCurrentList = false;\n    this.preferDocPositionTop = false;\n    var kb = keybindingService.lookupKeybinding('editor.action.triggerSuggest');\n    var triggerKeybindingLabel = !kb ? '' : \" (\" + kb.getLabel() + \")\";\n    var markdownRenderer = new MarkdownRenderer(editor, modeService, openerService);\n    this.isAuto = false;\n    this.focusedItem = null;\n    this.storageService = storageService;\n    this.element = $('.editor-widget.suggest-widget');\n    this.messageElement = append(this.element, $('.message'));\n    this.listElement = append(this.element, $('.tree'));\n    this.details = new SuggestionDetails(this.element, this, this.editor, markdownRenderer, triggerKeybindingLabel);\n\n    var applyIconStyle = function applyIconStyle() {\n      return toggleClass(_this.element, 'no-icons', !_this.editor.getConfiguration().contribInfo.suggest.showIcons);\n    };\n\n    applyIconStyle();\n    var renderer = instantiationService.createInstance(Renderer, this, this.editor, triggerKeybindingLabel);\n    this.list = new List(this.listElement, this, [renderer], {\n      useShadows: false,\n      openController: {\n        shouldOpen: function shouldOpen() {\n          return false;\n        }\n      },\n      mouseSupport: false\n    });\n    this.toDispose = [attachListStyler(this.list, themeService, {\n      listInactiveFocusBackground: editorSuggestWidgetSelectedBackground,\n      listInactiveFocusOutline: activeContrastBorder\n    }), themeService.onThemeChange(function (t) {\n      return _this.onThemeChange(t);\n    }), editor.onDidLayoutChange(function () {\n      return _this.onEditorLayoutChange();\n    }), this.list.onMouseDown(function (e) {\n      return _this.onListMouseDown(e);\n    }), this.list.onSelectionChange(function (e) {\n      return _this.onListSelection(e);\n    }), this.list.onFocusChange(function (e) {\n      return _this.onListFocus(e);\n    }), this.editor.onDidChangeCursorSelection(function () {\n      return _this.onCursorSelectionChanged();\n    }), this.editor.onDidChangeConfiguration(function (e) {\n      return e.contribInfo && applyIconStyle();\n    })];\n    this.suggestWidgetVisible = SuggestContext.Visible.bindTo(contextKeyService);\n    this.suggestWidgetMultipleSuggestions = SuggestContext.MultipleSuggestions.bindTo(contextKeyService);\n    this.editor.addContentWidget(this);\n    this.setState(0\n    /* Hidden */\n    );\n    this.onThemeChange(themeService.getTheme());\n  }\n\n  SuggestWidget.prototype.onCursorSelectionChanged = function () {\n    if (this.state === 0\n    /* Hidden */\n    ) {\n        return;\n      }\n\n    this.editor.layoutContentWidget(this);\n  };\n\n  SuggestWidget.prototype.onEditorLayoutChange = function () {\n    if ((this.state === 3\n    /* Open */\n    || this.state === 5\n    /* Details */\n    ) && this.expandDocsSettingFromStorage()) {\n      this.expandSideOrBelow();\n    }\n  };\n\n  SuggestWidget.prototype.onListMouseDown = function (e) {\n    if (typeof e.element === 'undefined' || typeof e.index === 'undefined') {\n      return;\n    } // prevent stealing browser focus from the editor\n\n\n    e.browserEvent.preventDefault();\n    e.browserEvent.stopPropagation();\n    this.select(e.element, e.index);\n  };\n\n  SuggestWidget.prototype.onListSelection = function (e) {\n    if (!e.elements.length) {\n      return;\n    }\n\n    this.select(e.elements[0], e.indexes[0]);\n  };\n\n  SuggestWidget.prototype.select = function (item, index) {\n    var _this = this;\n\n    var completionModel = this.completionModel;\n\n    if (!completionModel) {\n      return;\n    }\n\n    item.resolve(CancellationToken.None).then(function () {\n      _this.onDidSelectEmitter.fire({\n        item: item,\n        index: index,\n        model: completionModel\n      });\n\n      _this.editor.focus();\n    });\n  };\n\n  SuggestWidget.prototype._getSuggestionAriaAlertLabel = function (item) {\n    if (this.expandDocsSettingFromStorage()) {\n      return nls.localize('ariaCurrenttSuggestionReadDetails', \"Item {0}, docs: {1}\", item.completion.label, this.details.getAriaLabel());\n    } else {\n      return item.completion.label;\n    }\n  };\n\n  SuggestWidget.prototype._ariaAlert = function (newAriaAlertLabel) {\n    if (this._lastAriaAlertLabel === newAriaAlertLabel) {\n      return;\n    }\n\n    this._lastAriaAlertLabel = newAriaAlertLabel;\n\n    if (this._lastAriaAlertLabel) {\n      alert(this._lastAriaAlertLabel, true);\n    }\n  };\n\n  SuggestWidget.prototype.onThemeChange = function (theme) {\n    var backgroundColor = theme.getColor(editorSuggestWidgetBackground);\n\n    if (backgroundColor) {\n      this.listElement.style.backgroundColor = backgroundColor.toString();\n      this.details.element.style.backgroundColor = backgroundColor.toString();\n      this.messageElement.style.backgroundColor = backgroundColor.toString();\n    }\n\n    var borderColor = theme.getColor(editorSuggestWidgetBorder);\n\n    if (borderColor) {\n      this.listElement.style.borderColor = borderColor.toString();\n      this.details.element.style.borderColor = borderColor.toString();\n      this.messageElement.style.borderColor = borderColor.toString();\n      this.detailsBorderColor = borderColor.toString();\n    }\n\n    var focusBorderColor = theme.getColor(focusBorder);\n\n    if (focusBorderColor) {\n      this.detailsFocusBorderColor = focusBorderColor.toString();\n    }\n\n    this.details.setBorderWidth(theme.type === 'hc' ? 2 : 1);\n  };\n\n  SuggestWidget.prototype.onListFocus = function (e) {\n    var _this = this;\n\n    if (this.ignoreFocusEvents) {\n      return;\n    }\n\n    if (!e.elements.length) {\n      if (this.currentSuggestionDetails) {\n        this.currentSuggestionDetails.cancel();\n        this.currentSuggestionDetails = null;\n        this.focusedItem = null;\n      }\n\n      this._ariaAlert(null);\n\n      return;\n    }\n\n    if (!this.completionModel) {\n      return;\n    }\n\n    var item = e.elements[0];\n    var index = e.indexes[0];\n    this.firstFocusInCurrentList = !this.focusedItem;\n\n    if (item !== this.focusedItem) {\n      if (this.currentSuggestionDetails) {\n        this.currentSuggestionDetails.cancel();\n        this.currentSuggestionDetails = null;\n      }\n\n      this.focusedItem = item;\n      this.list.reveal(index);\n      this.currentSuggestionDetails = createCancelablePromise(function (token) {\n        return item.resolve(token);\n      });\n      this.currentSuggestionDetails.then(function () {\n        if (_this.list.length < index) {\n          return;\n        } // item can have extra information, so re-render\n\n\n        _this.ignoreFocusEvents = true;\n\n        _this.list.splice(index, 1, [item]);\n\n        _this.list.setFocus([index]);\n\n        _this.ignoreFocusEvents = false;\n\n        if (_this.expandDocsSettingFromStorage()) {\n          _this.showDetails();\n        } else {\n          removeClass(_this.element, 'docs-side');\n        }\n\n        _this._ariaAlert(_this._getSuggestionAriaAlertLabel(item));\n      }).catch(onUnexpectedError).then(function () {\n        if (_this.focusedItem === item) {\n          _this.currentSuggestionDetails = null;\n        }\n      });\n    } // emit an event\n\n\n    this.onDidFocusEmitter.fire({\n      item: item,\n      index: index,\n      model: this.completionModel\n    });\n  };\n\n  SuggestWidget.prototype.setState = function (state) {\n    if (!this.element) {\n      return;\n    }\n\n    var stateChanged = this.state !== state;\n    this.state = state;\n    toggleClass(this.element, 'frozen', state === 4\n    /* Frozen */\n    );\n\n    switch (state) {\n      case 0\n      /* Hidden */\n      :\n        hide(this.messageElement, this.details.element, this.listElement);\n        this.hide();\n        this.listHeight = 0;\n\n        if (stateChanged) {\n          this.list.splice(0, this.list.length);\n        }\n\n        this.focusedItem = null;\n        break;\n\n      case 1\n      /* Loading */\n      :\n        this.messageElement.textContent = SuggestWidget.LOADING_MESSAGE;\n        hide(this.listElement, this.details.element);\n        show(this.messageElement);\n        removeClass(this.element, 'docs-side');\n        this.show();\n        this.focusedItem = null;\n        break;\n\n      case 2\n      /* Empty */\n      :\n        this.messageElement.textContent = SuggestWidget.NO_SUGGESTIONS_MESSAGE;\n        hide(this.listElement, this.details.element);\n        show(this.messageElement);\n        removeClass(this.element, 'docs-side');\n        this.show();\n        this.focusedItem = null;\n        break;\n\n      case 3\n      /* Open */\n      :\n        hide(this.messageElement);\n        show(this.listElement);\n        this.show();\n        break;\n\n      case 4\n      /* Frozen */\n      :\n        hide(this.messageElement);\n        show(this.listElement);\n        this.show();\n        break;\n\n      case 5\n      /* Details */\n      :\n        hide(this.messageElement);\n        show(this.details.element, this.listElement);\n        this.show();\n\n        this._ariaAlert(this.details.getAriaLabel());\n\n        break;\n    }\n  };\n\n  SuggestWidget.prototype.showTriggered = function (auto, delay) {\n    var _this = this;\n\n    if (this.state !== 0\n    /* Hidden */\n    ) {\n        return;\n      }\n\n    this.isAuto = !!auto;\n\n    if (!this.isAuto) {\n      this.loadingTimeout = setTimeout(function () {\n        _this.loadingTimeout = null;\n\n        _this.setState(1\n        /* Loading */\n        );\n      }, delay);\n    }\n  };\n\n  SuggestWidget.prototype.showSuggestions = function (completionModel, selectionIndex, isFrozen, isAuto) {\n    this.preferDocPositionTop = false;\n    this.docsPositionPreviousWidgetY = null;\n\n    if (this.loadingTimeout) {\n      clearTimeout(this.loadingTimeout);\n      this.loadingTimeout = null;\n    }\n\n    if (this.currentSuggestionDetails) {\n      this.currentSuggestionDetails.cancel();\n      this.currentSuggestionDetails = null;\n    }\n\n    if (this.completionModel !== completionModel) {\n      this.completionModel = completionModel;\n    }\n\n    if (isFrozen && this.state !== 2\n    /* Empty */\n    && this.state !== 0\n    /* Hidden */\n    ) {\n        this.setState(4\n        /* Frozen */\n        );\n        return;\n      }\n\n    var visibleCount = this.completionModel.items.length;\n    var isEmpty = visibleCount === 0;\n    this.suggestWidgetMultipleSuggestions.set(visibleCount > 1);\n\n    if (isEmpty) {\n      if (isAuto) {\n        this.setState(0\n        /* Hidden */\n        );\n      } else {\n        this.setState(2\n        /* Empty */\n        );\n      }\n\n      this.completionModel = null;\n    } else {\n      if (this.state !== 3\n      /* Open */\n      ) {\n          var stats = this.completionModel.stats;\n          stats['wasAutomaticallyTriggered'] = !!isAuto;\n          /* __GDPR__\n              \"suggestWidget\" : {\n                  \"wasAutomaticallyTriggered\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\", \"isMeasurement\": true },\n                  \"${include}\": [\n                      \"${ICompletionStats}\",\n                      \"${EditorTelemetryData}\"\n                  ]\n              }\n          */\n\n          this.telemetryService.publicLog('suggestWidget', __assign({}, stats, this.editor.getTelemetryData()));\n        }\n\n      this.focusedItem = null;\n      this.list.splice(0, this.list.length, this.completionModel.items);\n\n      if (isFrozen) {\n        this.setState(4\n        /* Frozen */\n        );\n      } else {\n        this.setState(3\n        /* Open */\n        );\n      }\n\n      this.list.reveal(selectionIndex, 0);\n      this.list.setFocus([selectionIndex]); // Reset focus border\n\n      if (this.detailsBorderColor) {\n        this.details.element.style.borderColor = this.detailsBorderColor;\n      }\n    }\n  };\n\n  SuggestWidget.prototype.selectNextPage = function () {\n    switch (this.state) {\n      case 0\n      /* Hidden */\n      :\n        return false;\n\n      case 5\n      /* Details */\n      :\n        this.details.pageDown();\n        return true;\n\n      case 1\n      /* Loading */\n      :\n        return !this.isAuto;\n\n      default:\n        this.list.focusNextPage();\n        return true;\n    }\n  };\n\n  SuggestWidget.prototype.selectNext = function () {\n    switch (this.state) {\n      case 0\n      /* Hidden */\n      :\n        return false;\n\n      case 1\n      /* Loading */\n      :\n        return !this.isAuto;\n\n      default:\n        this.list.focusNext(1, true);\n        return true;\n    }\n  };\n\n  SuggestWidget.prototype.selectLast = function () {\n    switch (this.state) {\n      case 0\n      /* Hidden */\n      :\n        return false;\n\n      case 5\n      /* Details */\n      :\n        this.details.scrollBottom();\n        return true;\n\n      case 1\n      /* Loading */\n      :\n        return !this.isAuto;\n\n      default:\n        this.list.focusLast();\n        return true;\n    }\n  };\n\n  SuggestWidget.prototype.selectPreviousPage = function () {\n    switch (this.state) {\n      case 0\n      /* Hidden */\n      :\n        return false;\n\n      case 5\n      /* Details */\n      :\n        this.details.pageUp();\n        return true;\n\n      case 1\n      /* Loading */\n      :\n        return !this.isAuto;\n\n      default:\n        this.list.focusPreviousPage();\n        return true;\n    }\n  };\n\n  SuggestWidget.prototype.selectPrevious = function () {\n    switch (this.state) {\n      case 0\n      /* Hidden */\n      :\n        return false;\n\n      case 1\n      /* Loading */\n      :\n        return !this.isAuto;\n\n      default:\n        this.list.focusPrevious(1, true);\n        return false;\n    }\n  };\n\n  SuggestWidget.prototype.selectFirst = function () {\n    switch (this.state) {\n      case 0\n      /* Hidden */\n      :\n        return false;\n\n      case 5\n      /* Details */\n      :\n        this.details.scrollTop();\n        return true;\n\n      case 1\n      /* Loading */\n      :\n        return !this.isAuto;\n\n      default:\n        this.list.focusFirst();\n        return true;\n    }\n  };\n\n  SuggestWidget.prototype.getFocusedItem = function () {\n    if (this.state !== 0\n    /* Hidden */\n    && this.state !== 2\n    /* Empty */\n    && this.state !== 1\n    /* Loading */\n    && this.completionModel) {\n      return {\n        item: this.list.getFocusedElements()[0],\n        index: this.list.getFocus()[0],\n        model: this.completionModel\n      };\n    }\n\n    return undefined;\n  };\n\n  SuggestWidget.prototype.toggleDetailsFocus = function () {\n    if (this.state === 5\n    /* Details */\n    ) {\n        this.setState(3\n        /* Open */\n        );\n\n        if (this.detailsBorderColor) {\n          this.details.element.style.borderColor = this.detailsBorderColor;\n        }\n      } else if (this.state === 3\n    /* Open */\n    && this.expandDocsSettingFromStorage()) {\n      this.setState(5\n      /* Details */\n      );\n\n      if (this.detailsFocusBorderColor) {\n        this.details.element.style.borderColor = this.detailsFocusBorderColor;\n      }\n    }\n    /* __GDPR__\n        \"suggestWidget:toggleDetailsFocus\" : {\n            \"${include}\": [\n                \"${EditorTelemetryData}\"\n            ]\n        }\n    */\n\n\n    this.telemetryService.publicLog('suggestWidget:toggleDetailsFocus', this.editor.getTelemetryData());\n  };\n\n  SuggestWidget.prototype.toggleDetails = function () {\n    if (!canExpandCompletionItem(this.list.getFocusedElements()[0])) {\n      return;\n    }\n\n    if (this.expandDocsSettingFromStorage()) {\n      this.updateExpandDocsSetting(false);\n      hide(this.details.element);\n      removeClass(this.element, 'docs-side');\n      removeClass(this.element, 'docs-below');\n      this.editor.layoutContentWidget(this);\n      /* __GDPR__\n          \"suggestWidget:collapseDetails\" : {\n              \"${include}\": [\n                  \"${EditorTelemetryData}\"\n              ]\n          }\n      */\n\n      this.telemetryService.publicLog('suggestWidget:collapseDetails', this.editor.getTelemetryData());\n    } else {\n      if (this.state !== 3\n      /* Open */\n      && this.state !== 5\n      /* Details */\n      && this.state !== 4\n      /* Frozen */\n      ) {\n          return;\n        }\n\n      this.updateExpandDocsSetting(true);\n      this.showDetails();\n\n      this._ariaAlert(this.details.getAriaLabel());\n      /* __GDPR__\n          \"suggestWidget:expandDetails\" : {\n              \"${include}\": [\n                  \"${EditorTelemetryData}\"\n              ]\n          }\n      */\n\n\n      this.telemetryService.publicLog('suggestWidget:expandDetails', this.editor.getTelemetryData());\n    }\n  };\n\n  SuggestWidget.prototype.showDetails = function () {\n    this.expandSideOrBelow();\n    show(this.details.element);\n    this.details.render(this.list.getFocusedElements()[0]);\n    this.details.element.style.maxHeight = this.maxWidgetHeight + 'px'; // Reset margin-top that was set as Fix for #26416\n\n    this.listElement.style.marginTop = '0px'; // with docs showing up widget width/height may change, so reposition the widget\n\n    this.editor.layoutContentWidget(this);\n    this.adjustDocsPosition();\n    this.editor.focus();\n  };\n\n  SuggestWidget.prototype.show = function () {\n    var _this = this;\n\n    var newHeight = this.updateListHeight();\n\n    if (newHeight !== this.listHeight) {\n      this.editor.layoutContentWidget(this);\n      this.listHeight = newHeight;\n    }\n\n    this.suggestWidgetVisible.set(true);\n    this.showTimeout.cancelAndSet(function () {\n      addClass(_this.element, 'visible');\n\n      _this.onDidShowEmitter.fire(_this);\n    }, 100);\n  };\n\n  SuggestWidget.prototype.hide = function () {\n    this.suggestWidgetVisible.reset();\n    this.suggestWidgetMultipleSuggestions.reset();\n    removeClass(this.element, 'visible');\n  };\n\n  SuggestWidget.prototype.hideWidget = function () {\n    clearTimeout(this.loadingTimeout);\n    this.setState(0\n    /* Hidden */\n    );\n    this.onDidHideEmitter.fire(this);\n  };\n\n  SuggestWidget.prototype.getPosition = function () {\n    if (this.state === 0\n    /* Hidden */\n    ) {\n        return null;\n      }\n\n    var preference = [2\n    /* BELOW */\n    , 1\n    /* ABOVE */\n    ];\n\n    if (this.preferDocPositionTop) {\n      preference = [1\n      /* ABOVE */\n      ];\n    }\n\n    return {\n      position: this.editor.getPosition(),\n      preference: preference\n    };\n  };\n\n  SuggestWidget.prototype.getDomNode = function () {\n    return this.element;\n  };\n\n  SuggestWidget.prototype.getId = function () {\n    return SuggestWidget.ID;\n  };\n\n  SuggestWidget.prototype.updateListHeight = function () {\n    var height = 0;\n\n    if (this.state === 2\n    /* Empty */\n    || this.state === 1\n    /* Loading */\n    ) {\n        height = this.unfocusedHeight;\n      } else {\n      var suggestionCount = this.list.contentHeight / this.unfocusedHeight;\n      var maxVisibleSuggestions = this.editor.getConfiguration().contribInfo.suggest.maxVisibleSuggestions;\n      height = Math.min(suggestionCount, maxVisibleSuggestions) * this.unfocusedHeight;\n    }\n\n    this.element.style.lineHeight = this.unfocusedHeight + \"px\";\n    this.listElement.style.height = height + \"px\";\n    this.list.layout(height);\n    return height;\n  };\n  /**\n   * Adds the propert classes, margins when positioning the docs to the side\n   */\n\n\n  SuggestWidget.prototype.adjustDocsPosition = function () {\n    if (!this.editor.hasModel()) {\n      return;\n    }\n\n    var lineHeight = this.editor.getConfiguration().fontInfo.lineHeight;\n    var cursorCoords = this.editor.getScrolledVisiblePosition(this.editor.getPosition());\n    var editorCoords = getDomNodePagePosition(this.editor.getDomNode());\n    var cursorX = editorCoords.left + cursorCoords.left;\n    var cursorY = editorCoords.top + cursorCoords.top + cursorCoords.height;\n    var widgetCoords = getDomNodePagePosition(this.element);\n    var widgetX = widgetCoords.left;\n    var widgetY = widgetCoords.top; // Fixes #27649\n    // Check if the Y changed to the top of the cursor and keep the widget flagged to prefer top\n\n    if (this.docsPositionPreviousWidgetY && this.docsPositionPreviousWidgetY < widgetY && !this.preferDocPositionTop) {\n      this.preferDocPositionTop = true;\n      this.adjustDocsPosition();\n      return;\n    }\n\n    this.docsPositionPreviousWidgetY = widgetY;\n\n    if (widgetX < cursorX - this.listWidth) {\n      // Widget is too far to the left of cursor, swap list and docs\n      addClass(this.element, 'list-right');\n    } else {\n      removeClass(this.element, 'list-right');\n    } // Compare top of the cursor (cursorY - lineheight) with widgetTop to determine if\n    // margin-top needs to be applied on list to make it appear right above the cursor\n    // Cannot compare cursorY directly as it may be a few decimals off due to zoooming\n\n\n    if (hasClass(this.element, 'docs-side') && cursorY - lineHeight > widgetY && this.details.element.offsetHeight > this.listElement.offsetHeight) {\n      // Fix for #26416\n      // Docs is bigger than list and widget is above cursor, apply margin-top so that list appears right above cursor\n      this.listElement.style.marginTop = this.details.element.offsetHeight - this.listElement.offsetHeight + \"px\";\n    }\n  };\n  /**\n   * Adds the proper classes for positioning the docs to the side or below\n   */\n\n\n  SuggestWidget.prototype.expandSideOrBelow = function () {\n    if (!canExpandCompletionItem(this.focusedItem) && this.firstFocusInCurrentList) {\n      removeClass(this.element, 'docs-side');\n      removeClass(this.element, 'docs-below');\n      return;\n    }\n\n    var matches = this.element.style.maxWidth.match(/(\\d+)px/);\n\n    if (!matches || Number(matches[1]) < this.maxWidgetWidth) {\n      addClass(this.element, 'docs-below');\n      removeClass(this.element, 'docs-side');\n    } else if (canExpandCompletionItem(this.focusedItem)) {\n      addClass(this.element, 'docs-side');\n      removeClass(this.element, 'docs-below');\n    }\n  };\n\n  Object.defineProperty(SuggestWidget.prototype, \"maxWidgetHeight\", {\n    // Heights\n    get: function get() {\n      return this.unfocusedHeight * this.editor.getConfiguration().contribInfo.suggest.maxVisibleSuggestions;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(SuggestWidget.prototype, \"unfocusedHeight\", {\n    get: function get() {\n      var configuration = this.editor.getConfiguration();\n      return configuration.contribInfo.suggestLineHeight || configuration.fontInfo.lineHeight;\n    },\n    enumerable: true,\n    configurable: true\n  }); // IDelegate\n\n  SuggestWidget.prototype.getHeight = function (element) {\n    return this.unfocusedHeight;\n  };\n\n  SuggestWidget.prototype.getTemplateId = function (element) {\n    return 'suggestion';\n  };\n\n  SuggestWidget.prototype.expandDocsSettingFromStorage = function () {\n    return this.storageService.getBoolean('expandSuggestionDocs', 0\n    /* GLOBAL */\n    , expandSuggestionDocsByDefault);\n  };\n\n  SuggestWidget.prototype.updateExpandDocsSetting = function (value) {\n    this.storageService.store('expandSuggestionDocs', value, 0\n    /* GLOBAL */\n    );\n  };\n\n  SuggestWidget.prototype.dispose = function () {\n    this.state = null;\n    this.currentSuggestionDetails = null;\n    this.focusedItem = null;\n    this.element = null; // StrictNullOverride: nulling out ok in dispose\n\n    this.messageElement = null; // StrictNullOverride: nulling out ok in dispose\n\n    this.listElement = null; // StrictNullOverride: nulling out ok in dispose\n\n    this.details.dispose();\n    this.details = null; // StrictNullOverride: nulling out ok in dispose\n\n    this.list.dispose();\n    this.list = null; // StrictNullOverride: nulling out ok in dispose\n\n    this.toDispose = dispose(this.toDispose);\n\n    if (this.loadingTimeout) {\n      clearTimeout(this.loadingTimeout);\n      this.loadingTimeout = null;\n    }\n\n    this.editorBlurTimeout.dispose();\n    this.showTimeout.dispose();\n  };\n\n  SuggestWidget.ID = 'editor.widget.suggestWidget';\n  SuggestWidget.LOADING_MESSAGE = nls.localize('suggestWidget.loading', \"Loading...\");\n  SuggestWidget.NO_SUGGESTIONS_MESSAGE = nls.localize('suggestWidget.noSuggestions', \"No suggestions.\");\n  SuggestWidget = __decorate([__param(1, ITelemetryService), __param(2, IContextKeyService), __param(3, IThemeService), __param(4, IStorageService), __param(5, IKeybindingService), __param(6, IModeService), __param(7, IOpenerService), __param(8, IInstantiationService)], SuggestWidget);\n  return SuggestWidget;\n}();\n\nexport { SuggestWidget };\nregisterThemingParticipant(function (theme, collector) {\n  var matchHighlight = theme.getColor(editorSuggestWidgetHighlightForeground);\n\n  if (matchHighlight) {\n    collector.addRule(\".monaco-editor .suggest-widget .monaco-list .monaco-list-row .monaco-highlighted-label .highlight { color: \" + matchHighlight + \"; }\");\n  }\n\n  var foreground = theme.getColor(editorSuggestWidgetForeground);\n\n  if (foreground) {\n    collector.addRule(\".monaco-editor .suggest-widget { color: \" + foreground + \"; }\");\n  }\n\n  var link = theme.getColor(textLinkForeground);\n\n  if (link) {\n    collector.addRule(\".monaco-editor .suggest-widget a { color: \" + link + \"; }\");\n  }\n\n  var codeBackground = theme.getColor(textCodeBlockBackground);\n\n  if (codeBackground) {\n    collector.addRule(\".monaco-editor .suggest-widget code { background-color: \" + codeBackground + \"; }\");\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport { RawContextKey, IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { dispose } from '../../../base/common/lifecycle.js';\n\nvar WordContextKey =\n/** @class */\nfunction () {\n  function WordContextKey(_editor, contextKeyService) {\n    var _this = this;\n\n    this._editor = _editor;\n    this._ckAtEnd = WordContextKey.AtEnd.bindTo(contextKeyService);\n    this._confListener = this._editor.onDidChangeConfiguration(function (e) {\n      return e.contribInfo && _this._update();\n    });\n\n    this._update();\n  }\n\n  WordContextKey.prototype.dispose = function () {\n    dispose(this._confListener, this._selectionListener);\n\n    this._ckAtEnd.reset();\n  };\n\n  WordContextKey.prototype._update = function () {\n    var _this = this; // only update this when tab completions are enabled\n\n\n    var enabled = this._editor.getConfiguration().contribInfo.tabCompletion === 'on';\n\n    if (this._enabled === enabled) {\n      return;\n    }\n\n    this._enabled = enabled;\n\n    if (this._enabled) {\n      var checkForWordEnd = function checkForWordEnd() {\n        if (!_this._editor.hasModel()) {\n          _this._ckAtEnd.set(false);\n\n          return;\n        }\n\n        var model = _this._editor.getModel();\n\n        var selection = _this._editor.getSelection();\n\n        var word = model.getWordAtPosition(selection.getStartPosition());\n\n        if (!word) {\n          _this._ckAtEnd.set(false);\n\n          return;\n        }\n\n        _this._ckAtEnd.set(word.endColumn === selection.getStartPosition().column);\n      };\n\n      this._selectionListener = this._editor.onDidChangeCursorSelection(checkForWordEnd);\n      checkForWordEnd();\n    } else if (this._selectionListener) {\n      this._ckAtEnd.reset();\n\n      this._selectionListener.dispose();\n\n      this._selectionListener = undefined;\n    }\n  };\n\n  WordContextKey.AtEnd = new RawContextKey('atEndOfWord', false);\n  WordContextKey = __decorate([__param(1, IContextKeyService)], WordContextKey);\n  return WordContextKey;\n}();\n\nexport { WordContextKey };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport { alert } from '../../../base/browser/ui/aria/aria.js';\nimport { isNonEmptyArray } from '../../../base/common/arrays.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { dispose } from '../../../base/common/lifecycle.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../browser/editorExtensions.js';\nimport { EditOperation } from '../../common/core/editOperation.js';\nimport { Range } from '../../common/core/range.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport { SnippetController2 } from '../snippet/snippetController2.js';\nimport { SnippetParser } from '../snippet/snippetParser.js';\nimport { ISuggestMemoryService } from './suggestMemory.js';\nimport * as nls from '../../../nls.js';\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { Context as SuggestContext } from './suggest.js';\nimport { SuggestAlternatives } from './suggestAlternatives.js';\nimport { SuggestModel } from './suggestModel.js';\nimport { SuggestWidget } from './suggestWidget.js';\nimport { WordContextKey } from './wordContextKey.js';\nimport { Event } from '../../../base/common/event.js';\nimport { IEditorWorkerService } from '../../common/services/editorWorkerService.js';\nimport { IdleValue } from '../../../base/common/async.js';\nimport { CharacterSet } from '../../common/core/characterClassifier.js';\nimport { isObject } from '../../../base/common/types.js';\n\nvar AcceptOnCharacterOracle =\n/** @class */\nfunction () {\n  function AcceptOnCharacterOracle(editor, widget, accept) {\n    var _this = this;\n\n    this._disposables = [];\n\n    this._disposables.push(widget.onDidShow(function () {\n      return _this._onItem(widget.getFocusedItem());\n    }));\n\n    this._disposables.push(widget.onDidFocus(this._onItem, this));\n\n    this._disposables.push(widget.onDidHide(this.reset, this));\n\n    this._disposables.push(editor.onWillType(function (text) {\n      if (_this._active) {\n        var ch = text.charCodeAt(text.length - 1);\n\n        if (_this._active.acceptCharacters.has(ch) && editor.getConfiguration().contribInfo.acceptSuggestionOnCommitCharacter) {\n          accept(_this._active.item);\n        }\n      }\n    }));\n  }\n\n  AcceptOnCharacterOracle.prototype._onItem = function (selected) {\n    if (!selected || !isNonEmptyArray(selected.item.completion.commitCharacters)) {\n      this.reset();\n      return;\n    }\n\n    var acceptCharacters = new CharacterSet();\n\n    for (var _i = 0, _a = selected.item.completion.commitCharacters; _i < _a.length; _i++) {\n      var ch = _a[_i];\n\n      if (ch.length > 0) {\n        acceptCharacters.add(ch.charCodeAt(0));\n      }\n    }\n\n    this._active = {\n      acceptCharacters: acceptCharacters,\n      item: selected\n    };\n  };\n\n  AcceptOnCharacterOracle.prototype.reset = function () {\n    this._active = undefined;\n  };\n\n  AcceptOnCharacterOracle.prototype.dispose = function () {\n    dispose(this._disposables);\n  };\n\n  return AcceptOnCharacterOracle;\n}();\n\nvar SuggestController =\n/** @class */\nfunction () {\n  function SuggestController(_editor, editorWorker, _memoryService, _commandService, _contextKeyService, _instantiationService) {\n    var _this = this;\n\n    this._editor = _editor;\n    this._memoryService = _memoryService;\n    this._commandService = _commandService;\n    this._contextKeyService = _contextKeyService;\n    this._instantiationService = _instantiationService;\n    this._toDispose = [];\n    this._sticky = false; // for development purposes only\n\n    this._model = new SuggestModel(this._editor, editorWorker);\n    this._widget = new IdleValue(function () {\n      var widget = _this._instantiationService.createInstance(SuggestWidget, _this._editor);\n\n      _this._toDispose.push(widget);\n\n      _this._toDispose.push(widget.onDidSelect(function (item) {\n        return _this._onDidSelectItem(item, false, true);\n      }, _this)); // Wire up logic to accept a suggestion on certain characters\n\n\n      var autoAcceptOracle = new AcceptOnCharacterOracle(_this._editor, widget, function (item) {\n        return _this._onDidSelectItem(item, false, true);\n      });\n\n      _this._toDispose.push(autoAcceptOracle, _this._model.onDidSuggest(function (e) {\n        if (e.completionModel.items.length === 0) {\n          autoAcceptOracle.reset();\n        }\n      })); // Wire up makes text edit context key\n\n\n      var makesTextEdit = SuggestContext.MakesTextEdit.bindTo(_this._contextKeyService);\n\n      _this._toDispose.push(widget.onDidFocus(function (_a) {\n        var item = _a.item;\n\n        var position = _this._editor.getPosition();\n\n        var startColumn = item.completion.range.startColumn;\n        var endColumn = position.column;\n        var value = true;\n\n        if (_this._editor.getConfiguration().contribInfo.acceptSuggestionOnEnter === 'smart' && _this._model.state === 2\n        /* Auto */\n        && !item.completion.command && !item.completion.additionalTextEdits && !(item.completion.insertTextRules & 4\n        /* InsertAsSnippet */\n        ) && endColumn - startColumn === item.completion.insertText.length) {\n          var oldText = _this._editor.getModel().getValueInRange({\n            startLineNumber: position.lineNumber,\n            startColumn: startColumn,\n            endLineNumber: position.lineNumber,\n            endColumn: endColumn\n          });\n\n          value = oldText !== item.completion.insertText;\n        }\n\n        makesTextEdit.set(value);\n      }));\n\n      _this._toDispose.push({\n        dispose: function dispose() {\n          makesTextEdit.reset();\n        }\n      });\n\n      return widget;\n    });\n    this._alternatives = new IdleValue(function () {\n      var res = new SuggestAlternatives(_this._editor, _this._contextKeyService);\n\n      _this._toDispose.push(res);\n\n      return res;\n    });\n\n    this._toDispose.push(_instantiationService.createInstance(WordContextKey, _editor));\n\n    this._toDispose.push(this._model.onDidTrigger(function (e) {\n      _this._widget.getValue().showTriggered(e.auto, e.shy ? 250 : 50);\n    }));\n\n    this._toDispose.push(this._model.onDidSuggest(function (e) {\n      if (!e.shy) {\n        var index = _this._memoryService.select(_this._editor.getModel(), _this._editor.getPosition(), e.completionModel.items);\n\n        _this._widget.getValue().showSuggestions(e.completionModel, index, e.isFrozen, e.auto);\n      }\n    }));\n\n    this._toDispose.push(this._model.onDidCancel(function (e) {\n      if (_this._widget && !e.retrigger) {\n        _this._widget.getValue().hideWidget();\n      }\n    }));\n\n    this._toDispose.push(this._editor.onDidBlurEditorWidget(function () {\n      if (!_this._sticky) {\n        _this._model.cancel();\n      }\n    })); // Manage the acceptSuggestionsOnEnter context key\n\n\n    var acceptSuggestionsOnEnter = SuggestContext.AcceptSuggestionsOnEnter.bindTo(_contextKeyService);\n\n    var updateFromConfig = function updateFromConfig() {\n      var acceptSuggestionOnEnter = _this._editor.getConfiguration().contribInfo.acceptSuggestionOnEnter;\n\n      acceptSuggestionsOnEnter.set(acceptSuggestionOnEnter === 'on' || acceptSuggestionOnEnter === 'smart');\n    };\n\n    this._toDispose.push(this._editor.onDidChangeConfiguration(function (e) {\n      return updateFromConfig();\n    }));\n\n    updateFromConfig();\n  }\n\n  SuggestController.get = function (editor) {\n    return editor.getContribution(SuggestController.ID);\n  };\n\n  SuggestController.prototype.getId = function () {\n    return SuggestController.ID;\n  };\n\n  SuggestController.prototype.dispose = function () {\n    this._toDispose = dispose(this._toDispose);\n\n    this._widget.dispose();\n\n    if (this._model) {\n      this._model.dispose();\n    }\n  };\n\n  SuggestController.prototype._onDidSelectItem = function (event, keepAlternativeSuggestions, undoStops) {\n    var _this = this;\n\n    var _a;\n\n    if (!event || !event.item) {\n      this._alternatives.getValue().reset();\n\n      this._model.cancel();\n\n      return;\n    }\n\n    if (!this._editor.hasModel()) {\n      return;\n    }\n\n    var model = this._editor.getModel();\n\n    var modelVersionNow = model.getAlternativeVersionId();\n    var _b = event.item,\n        suggestion = _b.completion,\n        position = _b.position;\n\n    var editorColumn = this._editor.getPosition().column;\n\n    var columnDelta = editorColumn - position.column; // pushing undo stops *before* additional text edits and\n    // *after* the main edit\n\n    if (undoStops) {\n      this._editor.pushUndoStop();\n    }\n\n    if (Array.isArray(suggestion.additionalTextEdits)) {\n      this._editor.executeEdits('suggestController.additionalTextEdits', suggestion.additionalTextEdits.map(function (edit) {\n        return EditOperation.replace(Range.lift(edit.range), edit.text);\n      }));\n    } // keep item in memory\n\n\n    this._memoryService.memorize(model, this._editor.getPosition(), event.item);\n\n    var insertText = suggestion.insertText;\n\n    if (!(suggestion.insertTextRules & 4\n    /* InsertAsSnippet */\n    )) {\n      insertText = SnippetParser.escape(insertText);\n    }\n\n    var overwriteBefore = position.column - suggestion.range.startColumn;\n    var overwriteAfter = suggestion.range.endColumn - position.column;\n    SnippetController2.get(this._editor).insert(insertText, overwriteBefore + columnDelta, overwriteAfter, false, false, !(suggestion.insertTextRules & 1\n    /* KeepWhitespace */\n    ));\n\n    if (undoStops) {\n      this._editor.pushUndoStop();\n    }\n\n    if (!suggestion.command) {\n      // done\n      this._model.cancel();\n    } else if (suggestion.command.id === TriggerSuggestAction.id) {\n      // retigger\n      this._model.trigger({\n        auto: true,\n        shy: false\n      }, true);\n    } else {\n      // exec command, done\n      (_a = this._commandService).executeCommand.apply(_a, [suggestion.command.id].concat(suggestion.command.arguments ? suggestion.command.arguments.slice() : [])).catch(onUnexpectedError);\n\n      this._model.cancel();\n    }\n\n    if (keepAlternativeSuggestions) {\n      this._alternatives.getValue().set(event, function (next) {\n        // this is not so pretty. when inserting the 'next'\n        // suggestion we undo until we are at the state at\n        // which we were before inserting the previous suggestion...\n        while (model.canUndo()) {\n          if (modelVersionNow !== model.getAlternativeVersionId()) {\n            model.undo();\n          }\n\n          _this._onDidSelectItem(next, false, false);\n\n          break;\n        }\n      });\n    }\n\n    this._alertCompletionItem(event.item);\n  };\n\n  SuggestController.prototype._alertCompletionItem = function (_a) {\n    var suggestion = _a.completion;\n\n    if (isNonEmptyArray(suggestion.additionalTextEdits)) {\n      var msg = nls.localize('arai.alert.snippet', \"Accepting '{0}' made {1} additional edits\", suggestion.label, suggestion.additionalTextEdits.length);\n      alert(msg);\n    }\n  };\n\n  SuggestController.prototype.triggerSuggest = function (onlyFrom) {\n    if (this._editor.hasModel()) {\n      this._model.trigger({\n        auto: false,\n        shy: false\n      }, false, onlyFrom);\n\n      this._editor.revealLine(this._editor.getPosition().lineNumber, 0\n      /* Smooth */\n      );\n\n      this._editor.focus();\n    }\n  };\n\n  SuggestController.prototype.triggerSuggestAndAcceptBest = function (arg) {\n    var _this = this;\n\n    if (!this._editor.hasModel()) {\n      return;\n    }\n\n    var positionNow = this._editor.getPosition();\n\n    var fallback = function fallback() {\n      if (positionNow.equals(_this._editor.getPosition())) {\n        _this._commandService.executeCommand(arg.fallback);\n      }\n    };\n\n    var makesTextEdit = function makesTextEdit(item) {\n      if (item.completion.insertTextRules & 4\n      /* InsertAsSnippet */\n      || item.completion.additionalTextEdits) {\n        // snippet, other editor -> makes edit\n        return true;\n      }\n\n      var position = _this._editor.getPosition();\n\n      var startColumn = item.completion.range.startColumn;\n      var endColumn = position.column;\n\n      if (endColumn - startColumn !== item.completion.insertText.length) {\n        // unequal lengths -> makes edit\n        return true;\n      }\n\n      var textNow = _this._editor.getModel().getValueInRange({\n        startLineNumber: position.lineNumber,\n        startColumn: startColumn,\n        endLineNumber: position.lineNumber,\n        endColumn: endColumn\n      }); // unequal text -> makes edit\n\n\n      return textNow !== item.completion.insertText;\n    };\n\n    Event.once(this._model.onDidTrigger)(function (_) {\n      // wait for trigger because only then the cancel-event is trustworthy\n      var listener = [];\n      Event.any(_this._model.onDidTrigger, _this._model.onDidCancel)(function () {\n        // retrigger or cancel -> try to type default text\n        dispose(listener);\n        fallback();\n      }, undefined, listener);\n\n      _this._model.onDidSuggest(function (_a) {\n        var completionModel = _a.completionModel;\n        dispose(listener);\n\n        if (completionModel.items.length === 0) {\n          fallback();\n          return;\n        }\n\n        var index = _this._memoryService.select(_this._editor.getModel(), _this._editor.getPosition(), completionModel.items);\n\n        var item = completionModel.items[index];\n\n        if (!makesTextEdit(item)) {\n          fallback();\n          return;\n        }\n\n        _this._editor.pushUndoStop();\n\n        _this._onDidSelectItem({\n          index: index,\n          item: item,\n          model: completionModel\n        }, true, false);\n      }, undefined, listener);\n    });\n\n    this._model.trigger({\n      auto: false,\n      shy: true\n    });\n\n    this._editor.revealLine(positionNow.lineNumber, 0\n    /* Smooth */\n    );\n\n    this._editor.focus();\n  };\n\n  SuggestController.prototype.acceptSelectedSuggestion = function (keepAlternativeSuggestions) {\n    if (this._widget) {\n      var item = this._widget.getValue().getFocusedItem();\n\n      this._onDidSelectItem(item, !!keepAlternativeSuggestions, true);\n    }\n  };\n\n  SuggestController.prototype.acceptNextSuggestion = function () {\n    this._alternatives.getValue().next();\n  };\n\n  SuggestController.prototype.acceptPrevSuggestion = function () {\n    this._alternatives.getValue().prev();\n  };\n\n  SuggestController.prototype.cancelSuggestWidget = function () {\n    if (this._widget) {\n      this._model.cancel();\n\n      this._widget.getValue().hideWidget();\n    }\n  };\n\n  SuggestController.prototype.selectNextSuggestion = function () {\n    if (this._widget) {\n      this._widget.getValue().selectNext();\n    }\n  };\n\n  SuggestController.prototype.selectNextPageSuggestion = function () {\n    if (this._widget) {\n      this._widget.getValue().selectNextPage();\n    }\n  };\n\n  SuggestController.prototype.selectLastSuggestion = function () {\n    if (this._widget) {\n      this._widget.getValue().selectLast();\n    }\n  };\n\n  SuggestController.prototype.selectPrevSuggestion = function () {\n    if (this._widget) {\n      this._widget.getValue().selectPrevious();\n    }\n  };\n\n  SuggestController.prototype.selectPrevPageSuggestion = function () {\n    if (this._widget) {\n      this._widget.getValue().selectPreviousPage();\n    }\n  };\n\n  SuggestController.prototype.selectFirstSuggestion = function () {\n    if (this._widget) {\n      this._widget.getValue().selectFirst();\n    }\n  };\n\n  SuggestController.prototype.toggleSuggestionDetails = function () {\n    if (this._widget) {\n      this._widget.getValue().toggleDetails();\n    }\n  };\n\n  SuggestController.prototype.toggleSuggestionFocus = function () {\n    if (this._widget) {\n      this._widget.getValue().toggleDetailsFocus();\n    }\n  };\n\n  SuggestController.ID = 'editor.contrib.suggestController';\n  SuggestController = __decorate([__param(1, IEditorWorkerService), __param(2, ISuggestMemoryService), __param(3, ICommandService), __param(4, IContextKeyService), __param(5, IInstantiationService)], SuggestController);\n  return SuggestController;\n}();\n\nexport { SuggestController };\n\nvar TriggerSuggestAction =\n/** @class */\nfunction (_super) {\n  __extends(TriggerSuggestAction, _super);\n\n  function TriggerSuggestAction() {\n    return _super.call(this, {\n      id: TriggerSuggestAction.id,\n      label: nls.localize('suggest.trigger.label', \"Trigger Suggest\"),\n      alias: 'Trigger Suggest',\n      precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCompletionItemProvider),\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048\n        /* CtrlCmd */\n        | 10\n        /* Space */\n        ,\n        mac: {\n          primary: 256\n          /* WinCtrl */\n          | 10\n          /* Space */\n\n        },\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  TriggerSuggestAction.prototype.run = function (accessor, editor) {\n    var controller = SuggestController.get(editor);\n\n    if (!controller) {\n      return;\n    }\n\n    controller.triggerSuggest();\n  };\n\n  TriggerSuggestAction.id = 'editor.action.triggerSuggest';\n  return TriggerSuggestAction;\n}(EditorAction);\n\nexport { TriggerSuggestAction };\nregisterEditorContribution(SuggestController);\nregisterEditorAction(TriggerSuggestAction);\nvar weight = 100\n/* EditorContrib */\n+ 90;\nvar SuggestCommand = EditorCommand.bindToContribution(SuggestController.get);\nregisterEditorCommand(new SuggestCommand({\n  id: 'acceptSelectedSuggestion',\n  precondition: SuggestContext.Visible,\n  handler: function handler(x) {\n    return x.acceptSelectedSuggestion(true);\n  },\n  kbOpts: {\n    weight: weight,\n    kbExpr: EditorContextKeys.textInputFocus,\n    primary: 2\n    /* Tab */\n\n  }\n}));\nregisterEditorCommand(new SuggestCommand({\n  id: 'acceptSelectedSuggestionOnEnter',\n  precondition: SuggestContext.Visible,\n  handler: function handler(x) {\n    return x.acceptSelectedSuggestion(false);\n  },\n  kbOpts: {\n    weight: weight,\n    kbExpr: ContextKeyExpr.and(EditorContextKeys.textInputFocus, SuggestContext.AcceptSuggestionsOnEnter, SuggestContext.MakesTextEdit),\n    primary: 3\n    /* Enter */\n\n  }\n}));\nregisterEditorCommand(new SuggestCommand({\n  id: 'hideSuggestWidget',\n  precondition: SuggestContext.Visible,\n  handler: function handler(x) {\n    return x.cancelSuggestWidget();\n  },\n  kbOpts: {\n    weight: weight,\n    kbExpr: EditorContextKeys.textInputFocus,\n    primary: 9\n    /* Escape */\n    ,\n    secondary: [1024\n    /* Shift */\n    | 9\n    /* Escape */\n    ]\n  }\n}));\nregisterEditorCommand(new SuggestCommand({\n  id: 'selectNextSuggestion',\n  precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n  handler: function handler(c) {\n    return c.selectNextSuggestion();\n  },\n  kbOpts: {\n    weight: weight,\n    kbExpr: EditorContextKeys.textInputFocus,\n    primary: 18\n    /* DownArrow */\n    ,\n    secondary: [2048\n    /* CtrlCmd */\n    | 18\n    /* DownArrow */\n    ],\n    mac: {\n      primary: 18\n      /* DownArrow */\n      ,\n      secondary: [2048\n      /* CtrlCmd */\n      | 18\n      /* DownArrow */\n      , 256\n      /* WinCtrl */\n      | 44\n      /* KEY_N */\n      ]\n    }\n  }\n}));\nregisterEditorCommand(new SuggestCommand({\n  id: 'selectNextPageSuggestion',\n  precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n  handler: function handler(c) {\n    return c.selectNextPageSuggestion();\n  },\n  kbOpts: {\n    weight: weight,\n    kbExpr: EditorContextKeys.textInputFocus,\n    primary: 12\n    /* PageDown */\n    ,\n    secondary: [2048\n    /* CtrlCmd */\n    | 12\n    /* PageDown */\n    ]\n  }\n}));\nregisterEditorCommand(new SuggestCommand({\n  id: 'selectLastSuggestion',\n  precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n  handler: function handler(c) {\n    return c.selectLastSuggestion();\n  }\n}));\nregisterEditorCommand(new SuggestCommand({\n  id: 'selectPrevSuggestion',\n  precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n  handler: function handler(c) {\n    return c.selectPrevSuggestion();\n  },\n  kbOpts: {\n    weight: weight,\n    kbExpr: EditorContextKeys.textInputFocus,\n    primary: 16\n    /* UpArrow */\n    ,\n    secondary: [2048\n    /* CtrlCmd */\n    | 16\n    /* UpArrow */\n    ],\n    mac: {\n      primary: 16\n      /* UpArrow */\n      ,\n      secondary: [2048\n      /* CtrlCmd */\n      | 16\n      /* UpArrow */\n      , 256\n      /* WinCtrl */\n      | 46\n      /* KEY_P */\n      ]\n    }\n  }\n}));\nregisterEditorCommand(new SuggestCommand({\n  id: 'selectPrevPageSuggestion',\n  precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n  handler: function handler(c) {\n    return c.selectPrevPageSuggestion();\n  },\n  kbOpts: {\n    weight: weight,\n    kbExpr: EditorContextKeys.textInputFocus,\n    primary: 11\n    /* PageUp */\n    ,\n    secondary: [2048\n    /* CtrlCmd */\n    | 11\n    /* PageUp */\n    ]\n  }\n}));\nregisterEditorCommand(new SuggestCommand({\n  id: 'selectFirstSuggestion',\n  precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n  handler: function handler(c) {\n    return c.selectFirstSuggestion();\n  }\n}));\nregisterEditorCommand(new SuggestCommand({\n  id: 'toggleSuggestionDetails',\n  precondition: SuggestContext.Visible,\n  handler: function handler(x) {\n    return x.toggleSuggestionDetails();\n  },\n  kbOpts: {\n    weight: weight,\n    kbExpr: EditorContextKeys.textInputFocus,\n    primary: 2048\n    /* CtrlCmd */\n    | 10\n    /* Space */\n    ,\n    mac: {\n      primary: 256\n      /* WinCtrl */\n      | 10\n      /* Space */\n\n    }\n  }\n}));\nregisterEditorCommand(new SuggestCommand({\n  id: 'toggleSuggestionFocus',\n  precondition: SuggestContext.Visible,\n  handler: function handler(x) {\n    return x.toggleSuggestionFocus();\n  },\n  kbOpts: {\n    weight: weight,\n    kbExpr: EditorContextKeys.textInputFocus,\n    primary: 2048\n    /* CtrlCmd */\n    | 512\n    /* Alt */\n    | 10\n    /* Space */\n    ,\n    mac: {\n      primary: 256\n      /* WinCtrl */\n      | 512\n      /* Alt */\n      | 10\n      /* Space */\n\n    }\n  }\n})); //#region tab completions\n\nregisterEditorCommand(new SuggestCommand({\n  id: 'insertBestCompletion',\n  precondition: ContextKeyExpr.and(ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), WordContextKey.AtEnd, SuggestContext.Visible.toNegated(), SuggestAlternatives.OtherSuggestions.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n  handler: function handler(x, arg) {\n    x.triggerSuggestAndAcceptBest(isObject(arg) ? __assign({\n      fallback: 'tab'\n    }, arg) : {\n      fallback: 'tab'\n    });\n  },\n  kbOpts: {\n    weight: weight,\n    primary: 2\n    /* Tab */\n\n  }\n}));\nregisterEditorCommand(new SuggestCommand({\n  id: 'insertNextSuggestion',\n  precondition: ContextKeyExpr.and(ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), SuggestAlternatives.OtherSuggestions, SuggestContext.Visible.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n  handler: function handler(x) {\n    return x.acceptNextSuggestion();\n  },\n  kbOpts: {\n    weight: weight,\n    kbExpr: EditorContextKeys.textInputFocus,\n    primary: 2\n    /* Tab */\n\n  }\n}));\nregisterEditorCommand(new SuggestCommand({\n  id: 'insertPrevSuggestion',\n  precondition: ContextKeyExpr.and(ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), SuggestAlternatives.OtherSuggestions, SuggestContext.Visible.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n  handler: function handler(x) {\n    return x.acceptPrevSuggestion();\n  },\n  kbOpts: {\n    weight: weight,\n    kbExpr: EditorContextKeys.textInputFocus,\n    primary: 1024\n    /* Shift */\n    | 2\n    /* Tab */\n\n  }\n}));","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport * as nls from '../../../nls.js';\nimport { EditorAction, registerEditorAction } from '../../browser/editorExtensions.js';\nimport { StopWatch } from '../../../base/common/stopwatch.js';\n\nvar ForceRetokenizeAction =\n/** @class */\nfunction (_super) {\n  __extends(ForceRetokenizeAction, _super);\n\n  function ForceRetokenizeAction() {\n    return _super.call(this, {\n      id: 'editor.action.forceRetokenize',\n      label: nls.localize('forceRetokenize', \"Developer: Force Retokenize\"),\n      alias: 'Developer: Force Retokenize',\n      precondition: null\n    }) || this;\n  }\n\n  ForceRetokenizeAction.prototype.run = function (accessor, editor) {\n    if (!editor.hasModel()) {\n      return;\n    }\n\n    var model = editor.getModel();\n    model.flushTokens();\n    var sw = new StopWatch(true);\n    model.forceTokenization(model.getLineCount());\n    sw.stop();\n    console.log(\"tokenization took \" + sw.elapsed());\n  };\n\n  return ForceRetokenizeAction;\n}(EditorAction);\n\nregisterEditorAction(ForceRetokenizeAction);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport * as nls from '../../../nls.js';\nimport { alert } from '../../../base/browser/ui/aria/aria.js';\nimport { EditorAction, registerEditorAction } from '../../browser/editorExtensions.js';\nimport { TabFocus } from '../../common/config/commonEditorConfig.js';\n\nvar ToggleTabFocusModeAction =\n/** @class */\nfunction (_super) {\n  __extends(ToggleTabFocusModeAction, _super);\n\n  function ToggleTabFocusModeAction() {\n    return _super.call(this, {\n      id: ToggleTabFocusModeAction.ID,\n      label: nls.localize({\n        key: 'toggle.tabMovesFocus',\n        comment: ['Turn on/off use of tab key for moving focus around VS Code']\n      }, \"Toggle Tab Key Moves Focus\"),\n      alias: 'Toggle Tab Key Moves Focus',\n      precondition: null,\n      kbOpts: {\n        kbExpr: null,\n        primary: 2048\n        /* CtrlCmd */\n        | 43\n        /* KEY_M */\n        ,\n        mac: {\n          primary: 256\n          /* WinCtrl */\n          | 1024\n          /* Shift */\n          | 43\n          /* KEY_M */\n\n        },\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  ToggleTabFocusModeAction.prototype.run = function (accessor, editor) {\n    var oldValue = TabFocus.getTabFocusMode();\n    var newValue = !oldValue;\n    TabFocus.setTabFocusMode(newValue);\n\n    if (newValue) {\n      alert(nls.localize('toggle.tabMovesFocus.on', \"Pressing Tab will now move focus to the next focusable element\"));\n    } else {\n      alert(nls.localize('toggle.tabMovesFocus.off', \"Pressing Tab will now insert the tab character\"));\n    }\n  };\n\n  ToggleTabFocusModeAction.ID = 'editor.action.toggleTabFocusMode';\n  return ToggleTabFocusModeAction;\n}(EditorAction);\n\nexport { ToggleTabFocusModeAction };\nregisterEditorAction(ToggleTabFocusModeAction);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport * as nls from '../../../nls.js';\nimport * as arrays from '../../../base/common/arrays.js';\nimport { createCancelablePromise, first, timeout } from '../../../base/common/async.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { onUnexpectedError, onUnexpectedExternalError } from '../../../base/common/errors.js';\nimport { Disposable, dispose } from '../../../base/common/lifecycle.js';\nimport { EditorAction, registerDefaultLanguageCommand, registerEditorAction, registerEditorContribution } from '../../browser/editorExtensions.js';\nimport { Range } from '../../common/core/range.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport { OverviewRulerLane } from '../../common/model.js';\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\nimport { DocumentHighlightKind, DocumentHighlightProviderRegistry } from '../../common/modes.js';\nimport { IContextKeyService, RawContextKey } from '../../../platform/contextkey/common/contextkey.js';\nimport { activeContrastBorder, editorSelectionHighlight, editorSelectionHighlightBorder, overviewRulerSelectionHighlightForeground, registerColor } from '../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant, themeColorFromId } from '../../../platform/theme/common/themeService.js';\nexport var editorWordHighlight = registerColor('editor.wordHighlightBackground', {\n  dark: '#575757B8',\n  light: '#57575740',\n  hc: null\n}, nls.localize('wordHighlight', 'Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations.'), true);\nexport var editorWordHighlightStrong = registerColor('editor.wordHighlightStrongBackground', {\n  dark: '#004972B8',\n  light: '#0e639c40',\n  hc: null\n}, nls.localize('wordHighlightStrong', 'Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations.'), true);\nexport var editorWordHighlightBorder = registerColor('editor.wordHighlightBorder', {\n  light: null,\n  dark: null,\n  hc: activeContrastBorder\n}, nls.localize('wordHighlightBorder', 'Border color of a symbol during read-access, like reading a variable.'));\nexport var editorWordHighlightStrongBorder = registerColor('editor.wordHighlightStrongBorder', {\n  light: null,\n  dark: null,\n  hc: activeContrastBorder\n}, nls.localize('wordHighlightStrongBorder', 'Border color of a symbol during write-access, like writing to a variable.'));\nexport var overviewRulerWordHighlightForeground = registerColor('editorOverviewRuler.wordHighlightForeground', {\n  dark: '#A0A0A0CC',\n  light: '#A0A0A0CC',\n  hc: '#A0A0A0CC'\n}, nls.localize('overviewRulerWordHighlightForeground', 'Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations.'), true);\nexport var overviewRulerWordHighlightStrongForeground = registerColor('editorOverviewRuler.wordHighlightStrongForeground', {\n  dark: '#C0A0C0CC',\n  light: '#C0A0C0CC',\n  hc: '#C0A0C0CC'\n}, nls.localize('overviewRulerWordHighlightStrongForeground', 'Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations.'), true);\nexport var ctxHasWordHighlights = new RawContextKey('hasWordHighlights', false);\nexport function getOccurrencesAtPosition(model, position, token) {\n  var orderedByScore = DocumentHighlightProviderRegistry.ordered(model); // in order of score ask the occurrences provider\n  // until someone response with a good result\n  // (good = none empty array)\n\n  return first(orderedByScore.map(function (provider) {\n    return function () {\n      return Promise.resolve(provider.provideDocumentHighlights(model, position, token)).then(undefined, onUnexpectedExternalError);\n    };\n  }), arrays.isNonEmptyArray);\n}\n\nvar OccurenceAtPositionRequest =\n/** @class */\nfunction () {\n  function OccurenceAtPositionRequest(model, selection, wordSeparators) {\n    var _this = this;\n\n    this._wordRange = this._getCurrentWordRange(model, selection);\n    this.result = createCancelablePromise(function (token) {\n      return _this._compute(model, selection, wordSeparators, token);\n    });\n  }\n\n  OccurenceAtPositionRequest.prototype._getCurrentWordRange = function (model, selection) {\n    var word = model.getWordAtPosition(selection.getPosition());\n\n    if (word) {\n      return new Range(selection.startLineNumber, word.startColumn, selection.startLineNumber, word.endColumn);\n    }\n\n    return null;\n  };\n\n  OccurenceAtPositionRequest.prototype.isValid = function (model, selection, decorationIds) {\n    var lineNumber = selection.startLineNumber;\n    var startColumn = selection.startColumn;\n    var endColumn = selection.endColumn;\n\n    var currentWordRange = this._getCurrentWordRange(model, selection);\n\n    var requestIsValid = Boolean(this._wordRange && this._wordRange.equalsRange(currentWordRange)); // Even if we are on a different word, if that word is in the decorations ranges, the request is still valid\n    // (Same symbol)\n\n    for (var i = 0, len = decorationIds.length; !requestIsValid && i < len; i++) {\n      var range = model.getDecorationRange(decorationIds[i]);\n\n      if (range && range.startLineNumber === lineNumber) {\n        if (range.startColumn <= startColumn && range.endColumn >= endColumn) {\n          requestIsValid = true;\n        }\n      }\n    }\n\n    return requestIsValid;\n  };\n\n  OccurenceAtPositionRequest.prototype.cancel = function () {\n    this.result.cancel();\n  };\n\n  return OccurenceAtPositionRequest;\n}();\n\nvar SemanticOccurenceAtPositionRequest =\n/** @class */\nfunction (_super) {\n  __extends(SemanticOccurenceAtPositionRequest, _super);\n\n  function SemanticOccurenceAtPositionRequest() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  SemanticOccurenceAtPositionRequest.prototype._compute = function (model, selection, wordSeparators, token) {\n    return getOccurrencesAtPosition(model, selection.getPosition(), token).then(function (value) {\n      return value || [];\n    });\n  };\n\n  return SemanticOccurenceAtPositionRequest;\n}(OccurenceAtPositionRequest);\n\nvar TextualOccurenceAtPositionRequest =\n/** @class */\nfunction (_super) {\n  __extends(TextualOccurenceAtPositionRequest, _super);\n\n  function TextualOccurenceAtPositionRequest(model, selection, wordSeparators) {\n    var _this = _super.call(this, model, selection, wordSeparators) || this;\n\n    _this._selectionIsEmpty = selection.isEmpty();\n    return _this;\n  }\n\n  TextualOccurenceAtPositionRequest.prototype._compute = function (model, selection, wordSeparators, token) {\n    return timeout(250, token).then(function () {\n      if (!selection.isEmpty()) {\n        return [];\n      }\n\n      var word = model.getWordAtPosition(selection.getPosition());\n\n      if (!word) {\n        return [];\n      }\n\n      var matches = model.findMatches(word.word, true, false, true, wordSeparators, false);\n      return matches.map(function (m) {\n        return {\n          range: m.range,\n          kind: DocumentHighlightKind.Text\n        };\n      });\n    });\n  };\n\n  TextualOccurenceAtPositionRequest.prototype.isValid = function (model, selection, decorationIds) {\n    var currentSelectionIsEmpty = selection.isEmpty();\n\n    if (this._selectionIsEmpty !== currentSelectionIsEmpty) {\n      return false;\n    }\n\n    return _super.prototype.isValid.call(this, model, selection, decorationIds);\n  };\n\n  return TextualOccurenceAtPositionRequest;\n}(OccurenceAtPositionRequest);\n\nfunction computeOccurencesAtPosition(model, selection, wordSeparators) {\n  if (DocumentHighlightProviderRegistry.has(model)) {\n    return new SemanticOccurenceAtPositionRequest(model, selection, wordSeparators);\n  }\n\n  return new TextualOccurenceAtPositionRequest(model, selection, wordSeparators);\n}\n\nregisterDefaultLanguageCommand('_executeDocumentHighlights', function (model, position) {\n  return getOccurrencesAtPosition(model, position, CancellationToken.None);\n});\n\nvar WordHighlighter =\n/** @class */\nfunction () {\n  function WordHighlighter(editor, contextKeyService) {\n    var _this = this;\n\n    this.workerRequestTokenId = 0;\n    this.workerRequestCompleted = false;\n    this.workerRequestValue = [];\n    this.lastCursorPositionChangeTime = 0;\n    this.renderDecorationsTimer = -1;\n    this.editor = editor;\n    this._hasWordHighlights = ctxHasWordHighlights.bindTo(contextKeyService);\n    this._ignorePositionChangeEvent = false;\n    this.occurrencesHighlight = this.editor.getConfiguration().contribInfo.occurrencesHighlight;\n    this.model = this.editor.getModel();\n    this.toUnhook = [];\n    this.toUnhook.push(editor.onDidChangeCursorPosition(function (e) {\n      if (_this._ignorePositionChangeEvent) {\n        // We are changing the position => ignore this event\n        return;\n      }\n\n      if (!_this.occurrencesHighlight) {\n        // Early exit if nothing needs to be done!\n        // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n        return;\n      }\n\n      _this._onPositionChanged(e);\n    }));\n    this.toUnhook.push(editor.onDidChangeModelContent(function (e) {\n      _this._stopAll();\n    }));\n    this.toUnhook.push(editor.onDidChangeConfiguration(function (e) {\n      var newValue = _this.editor.getConfiguration().contribInfo.occurrencesHighlight;\n\n      if (_this.occurrencesHighlight !== newValue) {\n        _this.occurrencesHighlight = newValue;\n\n        _this._stopAll();\n      }\n    }));\n    this._decorationIds = [];\n    this.workerRequestTokenId = 0;\n    this.workerRequest = null;\n    this.workerRequestCompleted = false;\n    this.lastCursorPositionChangeTime = 0;\n    this.renderDecorationsTimer = -1;\n  }\n\n  WordHighlighter.prototype.hasDecorations = function () {\n    return this._decorationIds.length > 0;\n  };\n\n  WordHighlighter.prototype.restore = function () {\n    if (!this.occurrencesHighlight) {\n      return;\n    }\n\n    this._run();\n  };\n\n  WordHighlighter.prototype._getSortedHighlights = function () {\n    var _this = this;\n\n    return arrays.coalesce(this._decorationIds.map(function (id) {\n      return _this.model.getDecorationRange(id);\n    }).sort(Range.compareRangesUsingStarts));\n  };\n\n  WordHighlighter.prototype.moveNext = function () {\n    var _this = this;\n\n    var highlights = this._getSortedHighlights();\n\n    var index = arrays.firstIndex(highlights, function (range) {\n      return range.containsPosition(_this.editor.getPosition());\n    });\n    var newIndex = (index + 1) % highlights.length;\n    var dest = highlights[newIndex];\n\n    try {\n      this._ignorePositionChangeEvent = true;\n      this.editor.setPosition(dest.getStartPosition());\n      this.editor.revealRangeInCenterIfOutsideViewport(dest);\n    } finally {\n      this._ignorePositionChangeEvent = false;\n    }\n  };\n\n  WordHighlighter.prototype.moveBack = function () {\n    var _this = this;\n\n    var highlights = this._getSortedHighlights();\n\n    var index = arrays.firstIndex(highlights, function (range) {\n      return range.containsPosition(_this.editor.getPosition());\n    });\n    var newIndex = (index - 1 + highlights.length) % highlights.length;\n    var dest = highlights[newIndex];\n\n    try {\n      this._ignorePositionChangeEvent = true;\n      this.editor.setPosition(dest.getStartPosition());\n      this.editor.revealRangeInCenterIfOutsideViewport(dest);\n    } finally {\n      this._ignorePositionChangeEvent = false;\n    }\n  };\n\n  WordHighlighter.prototype._removeDecorations = function () {\n    if (this._decorationIds.length > 0) {\n      // remove decorations\n      this._decorationIds = this.editor.deltaDecorations(this._decorationIds, []);\n\n      this._hasWordHighlights.set(false);\n    }\n  };\n\n  WordHighlighter.prototype._stopAll = function () {\n    // Remove any existing decorations\n    this._removeDecorations(); // Cancel any renderDecorationsTimer\n\n\n    if (this.renderDecorationsTimer !== -1) {\n      clearTimeout(this.renderDecorationsTimer);\n      this.renderDecorationsTimer = -1;\n    } // Cancel any worker request\n\n\n    if (this.workerRequest !== null) {\n      this.workerRequest.cancel();\n      this.workerRequest = null;\n    } // Invalidate any worker request callback\n\n\n    if (!this.workerRequestCompleted) {\n      this.workerRequestTokenId++;\n      this.workerRequestCompleted = true;\n    }\n  };\n\n  WordHighlighter.prototype._onPositionChanged = function (e) {\n    // disabled\n    if (!this.occurrencesHighlight) {\n      this._stopAll();\n\n      return;\n    } // ignore typing & other\n\n\n    if (e.reason !== 3\n    /* Explicit */\n    ) {\n        this._stopAll();\n\n        return;\n      }\n\n    this._run();\n  };\n\n  WordHighlighter.prototype._run = function () {\n    var _this = this;\n\n    var editorSelection = this.editor.getSelection(); // ignore multiline selection\n\n    if (editorSelection.startLineNumber !== editorSelection.endLineNumber) {\n      this._stopAll();\n\n      return;\n    }\n\n    var lineNumber = editorSelection.startLineNumber;\n    var startColumn = editorSelection.startColumn;\n    var endColumn = editorSelection.endColumn;\n    var word = this.model.getWordAtPosition({\n      lineNumber: lineNumber,\n      column: startColumn\n    }); // The selection must be inside a word or surround one word at most\n\n    if (!word || word.startColumn > startColumn || word.endColumn < endColumn) {\n      this._stopAll();\n\n      return;\n    } // All the effort below is trying to achieve this:\n    // - when cursor is moved to a word, trigger immediately a findOccurrences request\n    // - 250ms later after the last cursor move event, render the occurrences\n    // - no flickering!\n\n\n    var workerRequestIsValid = this.workerRequest && this.workerRequest.isValid(this.model, editorSelection, this._decorationIds); // There are 4 cases:\n    // a) old workerRequest is valid & completed, renderDecorationsTimer fired\n    // b) old workerRequest is valid & completed, renderDecorationsTimer not fired\n    // c) old workerRequest is valid, but not completed\n    // d) old workerRequest is not valid\n    // For a) no action is needed\n    // For c), member 'lastCursorPositionChangeTime' will be used when installing the timer so no action is needed\n\n    this.lastCursorPositionChangeTime = new Date().getTime();\n\n    if (workerRequestIsValid) {\n      if (this.workerRequestCompleted && this.renderDecorationsTimer !== -1) {\n        // case b)\n        // Delay the firing of renderDecorationsTimer by an extra 250 ms\n        clearTimeout(this.renderDecorationsTimer);\n        this.renderDecorationsTimer = -1;\n\n        this._beginRenderDecorations();\n      }\n    } else {\n      // case d)\n      // Stop all previous actions and start fresh\n      this._stopAll();\n\n      var myRequestId_1 = ++this.workerRequestTokenId;\n      this.workerRequestCompleted = false;\n      this.workerRequest = computeOccurencesAtPosition(this.model, this.editor.getSelection(), this.editor.getConfiguration().wordSeparators);\n      this.workerRequest.result.then(function (data) {\n        if (myRequestId_1 === _this.workerRequestTokenId) {\n          _this.workerRequestCompleted = true;\n          _this.workerRequestValue = data || [];\n\n          _this._beginRenderDecorations();\n        }\n      }, onUnexpectedError);\n    }\n  };\n\n  WordHighlighter.prototype._beginRenderDecorations = function () {\n    var _this = this;\n\n    var currentTime = new Date().getTime();\n    var minimumRenderTime = this.lastCursorPositionChangeTime + 250;\n\n    if (currentTime >= minimumRenderTime) {\n      // Synchronous\n      this.renderDecorationsTimer = -1;\n      this.renderDecorations();\n    } else {\n      // Asynchronous\n      this.renderDecorationsTimer = setTimeout(function () {\n        _this.renderDecorations();\n      }, minimumRenderTime - currentTime);\n    }\n  };\n\n  WordHighlighter.prototype.renderDecorations = function () {\n    this.renderDecorationsTimer = -1;\n    var decorations = [];\n\n    for (var i = 0, len = this.workerRequestValue.length; i < len; i++) {\n      var info = this.workerRequestValue[i];\n      decorations.push({\n        range: info.range,\n        options: WordHighlighter._getDecorationOptions(info.kind)\n      });\n    }\n\n    this._decorationIds = this.editor.deltaDecorations(this._decorationIds, decorations);\n\n    this._hasWordHighlights.set(this.hasDecorations());\n  };\n\n  WordHighlighter._getDecorationOptions = function (kind) {\n    if (kind === DocumentHighlightKind.Write) {\n      return this._WRITE_OPTIONS;\n    } else if (kind === DocumentHighlightKind.Text) {\n      return this._TEXT_OPTIONS;\n    } else {\n      return this._REGULAR_OPTIONS;\n    }\n  };\n\n  WordHighlighter.prototype.dispose = function () {\n    this._stopAll();\n\n    this.toUnhook = dispose(this.toUnhook);\n  };\n\n  WordHighlighter._WRITE_OPTIONS = ModelDecorationOptions.register({\n    stickiness: 1\n    /* NeverGrowsWhenTypingAtEdges */\n    ,\n    className: 'wordHighlightStrong',\n    overviewRuler: {\n      color: themeColorFromId(overviewRulerWordHighlightStrongForeground),\n      position: OverviewRulerLane.Center\n    }\n  });\n  WordHighlighter._TEXT_OPTIONS = ModelDecorationOptions.register({\n    stickiness: 1\n    /* NeverGrowsWhenTypingAtEdges */\n    ,\n    className: 'selectionHighlight',\n    overviewRuler: {\n      color: themeColorFromId(overviewRulerSelectionHighlightForeground),\n      position: OverviewRulerLane.Center\n    }\n  });\n  WordHighlighter._REGULAR_OPTIONS = ModelDecorationOptions.register({\n    stickiness: 1\n    /* NeverGrowsWhenTypingAtEdges */\n    ,\n    className: 'wordHighlight',\n    overviewRuler: {\n      color: themeColorFromId(overviewRulerWordHighlightForeground),\n      position: OverviewRulerLane.Center\n    }\n  });\n  return WordHighlighter;\n}();\n\nvar WordHighlighterContribution =\n/** @class */\nfunction (_super) {\n  __extends(WordHighlighterContribution, _super);\n\n  function WordHighlighterContribution(editor, contextKeyService) {\n    var _this = _super.call(this) || this;\n\n    var createWordHighlighterIfPossible = function createWordHighlighterIfPossible() {\n      if (editor.hasModel()) {\n        _this.wordHighligher = new WordHighlighter(editor, contextKeyService);\n      }\n    };\n\n    _this._register(editor.onDidChangeModel(function (e) {\n      if (_this.wordHighligher) {\n        _this.wordHighligher.dispose();\n\n        _this.wordHighligher = null;\n      }\n\n      createWordHighlighterIfPossible();\n    }));\n\n    createWordHighlighterIfPossible();\n    return _this;\n  }\n\n  WordHighlighterContribution.get = function (editor) {\n    return editor.getContribution(WordHighlighterContribution.ID);\n  };\n\n  WordHighlighterContribution.prototype.getId = function () {\n    return WordHighlighterContribution.ID;\n  };\n\n  WordHighlighterContribution.prototype.saveViewState = function () {\n    if (this.wordHighligher && this.wordHighligher.hasDecorations()) {\n      return true;\n    }\n\n    return false;\n  };\n\n  WordHighlighterContribution.prototype.moveNext = function () {\n    if (this.wordHighligher) {\n      this.wordHighligher.moveNext();\n    }\n  };\n\n  WordHighlighterContribution.prototype.moveBack = function () {\n    if (this.wordHighligher) {\n      this.wordHighligher.moveBack();\n    }\n  };\n\n  WordHighlighterContribution.prototype.restoreViewState = function (state) {\n    if (this.wordHighligher && state) {\n      this.wordHighligher.restore();\n    }\n  };\n\n  WordHighlighterContribution.prototype.dispose = function () {\n    if (this.wordHighligher) {\n      this.wordHighligher.dispose();\n      this.wordHighligher = null;\n    }\n\n    _super.prototype.dispose.call(this);\n  };\n\n  WordHighlighterContribution.ID = 'editor.contrib.wordHighlighter';\n  WordHighlighterContribution = __decorate([__param(1, IContextKeyService)], WordHighlighterContribution);\n  return WordHighlighterContribution;\n}(Disposable);\n\nvar WordHighlightNavigationAction =\n/** @class */\nfunction (_super) {\n  __extends(WordHighlightNavigationAction, _super);\n\n  function WordHighlightNavigationAction(next, opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this._isNext = next;\n    return _this;\n  }\n\n  WordHighlightNavigationAction.prototype.run = function (accessor, editor) {\n    var controller = WordHighlighterContribution.get(editor);\n\n    if (!controller) {\n      return;\n    }\n\n    if (this._isNext) {\n      controller.moveNext();\n    } else {\n      controller.moveBack();\n    }\n  };\n\n  return WordHighlightNavigationAction;\n}(EditorAction);\n\nvar NextWordHighlightAction =\n/** @class */\nfunction (_super) {\n  __extends(NextWordHighlightAction, _super);\n\n  function NextWordHighlightAction() {\n    return _super.call(this, true, {\n      id: 'editor.action.wordHighlight.next',\n      label: nls.localize('wordHighlight.next.label', \"Go to Next Symbol Highlight\"),\n      alias: 'Go to Next Symbol Highlight',\n      precondition: ctxHasWordHighlights,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 65\n        /* F7 */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  return NextWordHighlightAction;\n}(WordHighlightNavigationAction);\n\nvar PrevWordHighlightAction =\n/** @class */\nfunction (_super) {\n  __extends(PrevWordHighlightAction, _super);\n\n  function PrevWordHighlightAction() {\n    return _super.call(this, false, {\n      id: 'editor.action.wordHighlight.prev',\n      label: nls.localize('wordHighlight.previous.label', \"Go to Previous Symbol Highlight\"),\n      alias: 'Go to Previous Symbol Highlight',\n      precondition: ctxHasWordHighlights,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 1024\n        /* Shift */\n        | 65\n        /* F7 */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  return PrevWordHighlightAction;\n}(WordHighlightNavigationAction);\n\nvar TriggerWordHighlightAction =\n/** @class */\nfunction (_super) {\n  __extends(TriggerWordHighlightAction, _super);\n\n  function TriggerWordHighlightAction() {\n    return _super.call(this, {\n      id: 'editor.action.wordHighlight.trigger',\n      label: nls.localize('wordHighlight.trigger.label', \"Trigger Symbol Highlight\"),\n      alias: 'Trigger Symbol Highlight',\n      precondition: ctxHasWordHighlights.toNegated(),\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 0,\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  TriggerWordHighlightAction.prototype.run = function (accessor, editor, args) {\n    var controller = WordHighlighterContribution.get(editor);\n\n    if (!controller) {\n      return;\n    }\n\n    controller.restoreViewState(true);\n  };\n\n  return TriggerWordHighlightAction;\n}(EditorAction);\n\nregisterEditorContribution(WordHighlighterContribution);\nregisterEditorAction(NextWordHighlightAction);\nregisterEditorAction(PrevWordHighlightAction);\nregisterEditorAction(TriggerWordHighlightAction);\nregisterThemingParticipant(function (theme, collector) {\n  var selectionHighlight = theme.getColor(editorSelectionHighlight);\n\n  if (selectionHighlight) {\n    collector.addRule(\".monaco-editor .focused .selectionHighlight { background-color: \" + selectionHighlight + \"; }\");\n    collector.addRule(\".monaco-editor .selectionHighlight { background-color: \" + selectionHighlight.transparent(0.5) + \"; }\");\n  }\n\n  var wordHighlight = theme.getColor(editorWordHighlight);\n\n  if (wordHighlight) {\n    collector.addRule(\".monaco-editor .wordHighlight { background-color: \" + wordHighlight + \"; }\");\n  }\n\n  var wordHighlightStrong = theme.getColor(editorWordHighlightStrong);\n\n  if (wordHighlightStrong) {\n    collector.addRule(\".monaco-editor .wordHighlightStrong { background-color: \" + wordHighlightStrong + \"; }\");\n  }\n\n  var selectionHighlightBorder = theme.getColor(editorSelectionHighlightBorder);\n\n  if (selectionHighlightBorder) {\n    collector.addRule(\".monaco-editor .selectionHighlight { border: 1px \" + (theme.type === 'hc' ? 'dotted' : 'solid') + \" \" + selectionHighlightBorder + \"; box-sizing: border-box; }\");\n  }\n\n  var wordHighlightBorder = theme.getColor(editorWordHighlightBorder);\n\n  if (wordHighlightBorder) {\n    collector.addRule(\".monaco-editor .wordHighlight { border: 1px \" + (theme.type === 'hc' ? 'dashed' : 'solid') + \" \" + wordHighlightBorder + \"; box-sizing: border-box; }\");\n  }\n\n  var wordHighlightStrongBorder = theme.getColor(editorWordHighlightStrongBorder);\n\n  if (wordHighlightStrongBorder) {\n    collector.addRule(\".monaco-editor .wordHighlightStrong { border: 1px \" + (theme.type === 'hc' ? 'dashed' : 'solid') + \" \" + wordHighlightStrongBorder + \"; box-sizing: border-box; }\");\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { EditorCommand, registerEditorCommand } from '../../browser/editorExtensions.js';\nimport { ReplaceCommand } from '../../common/commands/replaceCommand.js';\nimport { CursorState } from '../../common/controller/cursorCommon.js';\nimport { WordOperations } from '../../common/controller/cursorWordOperations.js';\nimport { getMapForWordSeparators } from '../../common/controller/wordCharacterClassifier.js';\nimport { Position } from '../../common/core/position.js';\nimport { Range } from '../../common/core/range.js';\nimport { Selection } from '../../common/core/selection.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\n\nvar MoveWordCommand =\n/** @class */\nfunction (_super) {\n  __extends(MoveWordCommand, _super);\n\n  function MoveWordCommand(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this._inSelectionMode = opts.inSelectionMode;\n    _this._wordNavigationType = opts.wordNavigationType;\n    return _this;\n  }\n\n  MoveWordCommand.prototype.runEditorCommand = function (accessor, editor, args) {\n    var _this = this;\n\n    if (!editor.hasModel()) {\n      return;\n    }\n\n    var config = editor.getConfiguration();\n    var wordSeparators = getMapForWordSeparators(config.wordSeparators);\n    var model = editor.getModel();\n    var selections = editor.getSelections();\n    var result = selections.map(function (sel) {\n      var inPosition = new Position(sel.positionLineNumber, sel.positionColumn);\n\n      var outPosition = _this._move(wordSeparators, model, inPosition, _this._wordNavigationType);\n\n      return _this._moveTo(sel, outPosition, _this._inSelectionMode);\n    });\n\n    editor._getCursors().setStates('moveWordCommand', 0\n    /* NotSet */\n    , result.map(function (r) {\n      return CursorState.fromModelSelection(r);\n    }));\n\n    if (result.length === 1) {\n      var pos = new Position(result[0].positionLineNumber, result[0].positionColumn);\n      editor.revealPosition(pos, 0\n      /* Smooth */\n      );\n    }\n  };\n\n  MoveWordCommand.prototype._moveTo = function (from, to, inSelectionMode) {\n    if (inSelectionMode) {\n      // move just position\n      return new Selection(from.selectionStartLineNumber, from.selectionStartColumn, to.lineNumber, to.column);\n    } else {\n      // move everything\n      return new Selection(to.lineNumber, to.column, to.lineNumber, to.column);\n    }\n  };\n\n  return MoveWordCommand;\n}(EditorCommand);\n\nexport { MoveWordCommand };\n\nvar WordLeftCommand =\n/** @class */\nfunction (_super) {\n  __extends(WordLeftCommand, _super);\n\n  function WordLeftCommand() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  WordLeftCommand.prototype._move = function (wordSeparators, model, position, wordNavigationType) {\n    return WordOperations.moveWordLeft(wordSeparators, model, position, wordNavigationType);\n  };\n\n  return WordLeftCommand;\n}(MoveWordCommand);\n\nexport { WordLeftCommand };\n\nvar WordRightCommand =\n/** @class */\nfunction (_super) {\n  __extends(WordRightCommand, _super);\n\n  function WordRightCommand() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  WordRightCommand.prototype._move = function (wordSeparators, model, position, wordNavigationType) {\n    return WordOperations.moveWordRight(wordSeparators, model, position, wordNavigationType);\n  };\n\n  return WordRightCommand;\n}(MoveWordCommand);\n\nexport { WordRightCommand };\n\nvar CursorWordStartLeft =\n/** @class */\nfunction (_super) {\n  __extends(CursorWordStartLeft, _super);\n\n  function CursorWordStartLeft() {\n    return _super.call(this, {\n      inSelectionMode: false,\n      wordNavigationType: 0\n      /* WordStart */\n      ,\n      id: 'cursorWordStartLeft',\n      precondition: null,\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048\n        /* CtrlCmd */\n        | 15\n        /* LeftArrow */\n        ,\n        mac: {\n          primary: 512\n          /* Alt */\n          | 15\n          /* LeftArrow */\n\n        },\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  return CursorWordStartLeft;\n}(WordLeftCommand);\n\nexport { CursorWordStartLeft };\n\nvar CursorWordEndLeft =\n/** @class */\nfunction (_super) {\n  __extends(CursorWordEndLeft, _super);\n\n  function CursorWordEndLeft() {\n    return _super.call(this, {\n      inSelectionMode: false,\n      wordNavigationType: 2\n      /* WordEnd */\n      ,\n      id: 'cursorWordEndLeft',\n      precondition: null\n    }) || this;\n  }\n\n  return CursorWordEndLeft;\n}(WordLeftCommand);\n\nexport { CursorWordEndLeft };\n\nvar CursorWordLeft =\n/** @class */\nfunction (_super) {\n  __extends(CursorWordLeft, _super);\n\n  function CursorWordLeft() {\n    return _super.call(this, {\n      inSelectionMode: false,\n      wordNavigationType: 1\n      /* WordStartFast */\n      ,\n      id: 'cursorWordLeft',\n      precondition: null\n    }) || this;\n  }\n\n  return CursorWordLeft;\n}(WordLeftCommand);\n\nexport { CursorWordLeft };\n\nvar CursorWordStartLeftSelect =\n/** @class */\nfunction (_super) {\n  __extends(CursorWordStartLeftSelect, _super);\n\n  function CursorWordStartLeftSelect() {\n    return _super.call(this, {\n      inSelectionMode: true,\n      wordNavigationType: 0\n      /* WordStart */\n      ,\n      id: 'cursorWordStartLeftSelect',\n      precondition: null,\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048\n        /* CtrlCmd */\n        | 1024\n        /* Shift */\n        | 15\n        /* LeftArrow */\n        ,\n        mac: {\n          primary: 512\n          /* Alt */\n          | 1024\n          /* Shift */\n          | 15\n          /* LeftArrow */\n\n        },\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  return CursorWordStartLeftSelect;\n}(WordLeftCommand);\n\nexport { CursorWordStartLeftSelect };\n\nvar CursorWordEndLeftSelect =\n/** @class */\nfunction (_super) {\n  __extends(CursorWordEndLeftSelect, _super);\n\n  function CursorWordEndLeftSelect() {\n    return _super.call(this, {\n      inSelectionMode: true,\n      wordNavigationType: 2\n      /* WordEnd */\n      ,\n      id: 'cursorWordEndLeftSelect',\n      precondition: null\n    }) || this;\n  }\n\n  return CursorWordEndLeftSelect;\n}(WordLeftCommand);\n\nexport { CursorWordEndLeftSelect };\n\nvar CursorWordLeftSelect =\n/** @class */\nfunction (_super) {\n  __extends(CursorWordLeftSelect, _super);\n\n  function CursorWordLeftSelect() {\n    return _super.call(this, {\n      inSelectionMode: true,\n      wordNavigationType: 0\n      /* WordStart */\n      ,\n      id: 'cursorWordLeftSelect',\n      precondition: null\n    }) || this;\n  }\n\n  return CursorWordLeftSelect;\n}(WordLeftCommand);\n\nexport { CursorWordLeftSelect };\n\nvar CursorWordStartRight =\n/** @class */\nfunction (_super) {\n  __extends(CursorWordStartRight, _super);\n\n  function CursorWordStartRight() {\n    return _super.call(this, {\n      inSelectionMode: false,\n      wordNavigationType: 0\n      /* WordStart */\n      ,\n      id: 'cursorWordStartRight',\n      precondition: null\n    }) || this;\n  }\n\n  return CursorWordStartRight;\n}(WordRightCommand);\n\nexport { CursorWordStartRight };\n\nvar CursorWordEndRight =\n/** @class */\nfunction (_super) {\n  __extends(CursorWordEndRight, _super);\n\n  function CursorWordEndRight() {\n    return _super.call(this, {\n      inSelectionMode: false,\n      wordNavigationType: 2\n      /* WordEnd */\n      ,\n      id: 'cursorWordEndRight',\n      precondition: null,\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048\n        /* CtrlCmd */\n        | 17\n        /* RightArrow */\n        ,\n        mac: {\n          primary: 512\n          /* Alt */\n          | 17\n          /* RightArrow */\n\n        },\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  return CursorWordEndRight;\n}(WordRightCommand);\n\nexport { CursorWordEndRight };\n\nvar CursorWordRight =\n/** @class */\nfunction (_super) {\n  __extends(CursorWordRight, _super);\n\n  function CursorWordRight() {\n    return _super.call(this, {\n      inSelectionMode: false,\n      wordNavigationType: 2\n      /* WordEnd */\n      ,\n      id: 'cursorWordRight',\n      precondition: null\n    }) || this;\n  }\n\n  return CursorWordRight;\n}(WordRightCommand);\n\nexport { CursorWordRight };\n\nvar CursorWordStartRightSelect =\n/** @class */\nfunction (_super) {\n  __extends(CursorWordStartRightSelect, _super);\n\n  function CursorWordStartRightSelect() {\n    return _super.call(this, {\n      inSelectionMode: true,\n      wordNavigationType: 0\n      /* WordStart */\n      ,\n      id: 'cursorWordStartRightSelect',\n      precondition: null\n    }) || this;\n  }\n\n  return CursorWordStartRightSelect;\n}(WordRightCommand);\n\nexport { CursorWordStartRightSelect };\n\nvar CursorWordEndRightSelect =\n/** @class */\nfunction (_super) {\n  __extends(CursorWordEndRightSelect, _super);\n\n  function CursorWordEndRightSelect() {\n    return _super.call(this, {\n      inSelectionMode: true,\n      wordNavigationType: 2\n      /* WordEnd */\n      ,\n      id: 'cursorWordEndRightSelect',\n      precondition: null,\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048\n        /* CtrlCmd */\n        | 1024\n        /* Shift */\n        | 17\n        /* RightArrow */\n        ,\n        mac: {\n          primary: 512\n          /* Alt */\n          | 1024\n          /* Shift */\n          | 17\n          /* RightArrow */\n\n        },\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  return CursorWordEndRightSelect;\n}(WordRightCommand);\n\nexport { CursorWordEndRightSelect };\n\nvar CursorWordRightSelect =\n/** @class */\nfunction (_super) {\n  __extends(CursorWordRightSelect, _super);\n\n  function CursorWordRightSelect() {\n    return _super.call(this, {\n      inSelectionMode: true,\n      wordNavigationType: 2\n      /* WordEnd */\n      ,\n      id: 'cursorWordRightSelect',\n      precondition: null\n    }) || this;\n  }\n\n  return CursorWordRightSelect;\n}(WordRightCommand);\n\nexport { CursorWordRightSelect };\n\nvar DeleteWordCommand =\n/** @class */\nfunction (_super) {\n  __extends(DeleteWordCommand, _super);\n\n  function DeleteWordCommand(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this._whitespaceHeuristics = opts.whitespaceHeuristics;\n    _this._wordNavigationType = opts.wordNavigationType;\n    return _this;\n  }\n\n  DeleteWordCommand.prototype.runEditorCommand = function (accessor, editor, args) {\n    var _this = this;\n\n    if (!editor.hasModel()) {\n      return;\n    }\n\n    var config = editor.getConfiguration();\n    var wordSeparators = getMapForWordSeparators(config.wordSeparators);\n    var model = editor.getModel();\n    var selections = editor.getSelections();\n    var commands = selections.map(function (sel) {\n      var deleteRange = _this._delete(wordSeparators, model, sel, _this._whitespaceHeuristics, _this._wordNavigationType);\n\n      return new ReplaceCommand(deleteRange, '');\n    });\n    editor.pushUndoStop();\n    editor.executeCommands(this.id, commands);\n    editor.pushUndoStop();\n  };\n\n  return DeleteWordCommand;\n}(EditorCommand);\n\nexport { DeleteWordCommand };\n\nvar DeleteWordLeftCommand =\n/** @class */\nfunction (_super) {\n  __extends(DeleteWordLeftCommand, _super);\n\n  function DeleteWordLeftCommand() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  DeleteWordLeftCommand.prototype._delete = function (wordSeparators, model, selection, whitespaceHeuristics, wordNavigationType) {\n    var r = WordOperations.deleteWordLeft(wordSeparators, model, selection, whitespaceHeuristics, wordNavigationType);\n\n    if (r) {\n      return r;\n    }\n\n    return new Range(1, 1, 1, 1);\n  };\n\n  return DeleteWordLeftCommand;\n}(DeleteWordCommand);\n\nexport { DeleteWordLeftCommand };\n\nvar DeleteWordRightCommand =\n/** @class */\nfunction (_super) {\n  __extends(DeleteWordRightCommand, _super);\n\n  function DeleteWordRightCommand() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  DeleteWordRightCommand.prototype._delete = function (wordSeparators, model, selection, whitespaceHeuristics, wordNavigationType) {\n    var r = WordOperations.deleteWordRight(wordSeparators, model, selection, whitespaceHeuristics, wordNavigationType);\n\n    if (r) {\n      return r;\n    }\n\n    var lineCount = model.getLineCount();\n    var maxColumn = model.getLineMaxColumn(lineCount);\n    return new Range(lineCount, maxColumn, lineCount, maxColumn);\n  };\n\n  return DeleteWordRightCommand;\n}(DeleteWordCommand);\n\nexport { DeleteWordRightCommand };\n\nvar DeleteWordStartLeft =\n/** @class */\nfunction (_super) {\n  __extends(DeleteWordStartLeft, _super);\n\n  function DeleteWordStartLeft() {\n    return _super.call(this, {\n      whitespaceHeuristics: false,\n      wordNavigationType: 0\n      /* WordStart */\n      ,\n      id: 'deleteWordStartLeft',\n      precondition: EditorContextKeys.writable\n    }) || this;\n  }\n\n  return DeleteWordStartLeft;\n}(DeleteWordLeftCommand);\n\nexport { DeleteWordStartLeft };\n\nvar DeleteWordEndLeft =\n/** @class */\nfunction (_super) {\n  __extends(DeleteWordEndLeft, _super);\n\n  function DeleteWordEndLeft() {\n    return _super.call(this, {\n      whitespaceHeuristics: false,\n      wordNavigationType: 2\n      /* WordEnd */\n      ,\n      id: 'deleteWordEndLeft',\n      precondition: EditorContextKeys.writable\n    }) || this;\n  }\n\n  return DeleteWordEndLeft;\n}(DeleteWordLeftCommand);\n\nexport { DeleteWordEndLeft };\n\nvar DeleteWordLeft =\n/** @class */\nfunction (_super) {\n  __extends(DeleteWordLeft, _super);\n\n  function DeleteWordLeft() {\n    return _super.call(this, {\n      whitespaceHeuristics: true,\n      wordNavigationType: 0\n      /* WordStart */\n      ,\n      id: 'deleteWordLeft',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048\n        /* CtrlCmd */\n        | 1\n        /* Backspace */\n        ,\n        mac: {\n          primary: 512\n          /* Alt */\n          | 1\n          /* Backspace */\n\n        },\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  return DeleteWordLeft;\n}(DeleteWordLeftCommand);\n\nexport { DeleteWordLeft };\n\nvar DeleteWordStartRight =\n/** @class */\nfunction (_super) {\n  __extends(DeleteWordStartRight, _super);\n\n  function DeleteWordStartRight() {\n    return _super.call(this, {\n      whitespaceHeuristics: false,\n      wordNavigationType: 0\n      /* WordStart */\n      ,\n      id: 'deleteWordStartRight',\n      precondition: EditorContextKeys.writable\n    }) || this;\n  }\n\n  return DeleteWordStartRight;\n}(DeleteWordRightCommand);\n\nexport { DeleteWordStartRight };\n\nvar DeleteWordEndRight =\n/** @class */\nfunction (_super) {\n  __extends(DeleteWordEndRight, _super);\n\n  function DeleteWordEndRight() {\n    return _super.call(this, {\n      whitespaceHeuristics: false,\n      wordNavigationType: 2\n      /* WordEnd */\n      ,\n      id: 'deleteWordEndRight',\n      precondition: EditorContextKeys.writable\n    }) || this;\n  }\n\n  return DeleteWordEndRight;\n}(DeleteWordRightCommand);\n\nexport { DeleteWordEndRight };\n\nvar DeleteWordRight =\n/** @class */\nfunction (_super) {\n  __extends(DeleteWordRight, _super);\n\n  function DeleteWordRight() {\n    return _super.call(this, {\n      whitespaceHeuristics: true,\n      wordNavigationType: 2\n      /* WordEnd */\n      ,\n      id: 'deleteWordRight',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048\n        /* CtrlCmd */\n        | 20\n        /* Delete */\n        ,\n        mac: {\n          primary: 512\n          /* Alt */\n          | 20\n          /* Delete */\n\n        },\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  return DeleteWordRight;\n}(DeleteWordRightCommand);\n\nexport { DeleteWordRight };\nregisterEditorCommand(new CursorWordStartLeft());\nregisterEditorCommand(new CursorWordEndLeft());\nregisterEditorCommand(new CursorWordLeft());\nregisterEditorCommand(new CursorWordStartLeftSelect());\nregisterEditorCommand(new CursorWordEndLeftSelect());\nregisterEditorCommand(new CursorWordLeftSelect());\nregisterEditorCommand(new CursorWordStartRight());\nregisterEditorCommand(new CursorWordEndRight());\nregisterEditorCommand(new CursorWordRight());\nregisterEditorCommand(new CursorWordStartRightSelect());\nregisterEditorCommand(new CursorWordEndRightSelect());\nregisterEditorCommand(new CursorWordRightSelect());\nregisterEditorCommand(new DeleteWordStartLeft());\nregisterEditorCommand(new DeleteWordEndLeft());\nregisterEditorCommand(new DeleteWordLeft());\nregisterEditorCommand(new DeleteWordStartRight());\nregisterEditorCommand(new DeleteWordEndRight());\nregisterEditorCommand(new DeleteWordRight());","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { registerEditorCommand } from '../../browser/editorExtensions.js';\nimport { WordPartOperations } from '../../common/controller/cursorWordOperations.js';\nimport { Range } from '../../common/core/range.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport { DeleteWordCommand, MoveWordCommand } from '../wordOperations/wordOperations.js';\nimport { CommandsRegistry } from '../../../platform/commands/common/commands.js';\n\nvar DeleteWordPartLeft =\n/** @class */\nfunction (_super) {\n  __extends(DeleteWordPartLeft, _super);\n\n  function DeleteWordPartLeft() {\n    return _super.call(this, {\n      whitespaceHeuristics: true,\n      wordNavigationType: 0\n      /* WordStart */\n      ,\n      id: 'deleteWordPartLeft',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 0,\n        mac: {\n          primary: 256\n          /* WinCtrl */\n          | 512\n          /* Alt */\n          | 1\n          /* Backspace */\n\n        },\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  DeleteWordPartLeft.prototype._delete = function (wordSeparators, model, selection, whitespaceHeuristics, wordNavigationType) {\n    var r = WordPartOperations.deleteWordPartLeft(wordSeparators, model, selection, whitespaceHeuristics);\n\n    if (r) {\n      return r;\n    }\n\n    return new Range(1, 1, 1, 1);\n  };\n\n  return DeleteWordPartLeft;\n}(DeleteWordCommand);\n\nexport { DeleteWordPartLeft };\n\nvar DeleteWordPartRight =\n/** @class */\nfunction (_super) {\n  __extends(DeleteWordPartRight, _super);\n\n  function DeleteWordPartRight() {\n    return _super.call(this, {\n      whitespaceHeuristics: true,\n      wordNavigationType: 2\n      /* WordEnd */\n      ,\n      id: 'deleteWordPartRight',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 0,\n        mac: {\n          primary: 256\n          /* WinCtrl */\n          | 512\n          /* Alt */\n          | 20\n          /* Delete */\n\n        },\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  DeleteWordPartRight.prototype._delete = function (wordSeparators, model, selection, whitespaceHeuristics, wordNavigationType) {\n    var r = WordPartOperations.deleteWordPartRight(wordSeparators, model, selection, whitespaceHeuristics);\n\n    if (r) {\n      return r;\n    }\n\n    var lineCount = model.getLineCount();\n    var maxColumn = model.getLineMaxColumn(lineCount);\n    return new Range(lineCount, maxColumn, lineCount, maxColumn);\n  };\n\n  return DeleteWordPartRight;\n}(DeleteWordCommand);\n\nexport { DeleteWordPartRight };\n\nvar WordPartLeftCommand =\n/** @class */\nfunction (_super) {\n  __extends(WordPartLeftCommand, _super);\n\n  function WordPartLeftCommand() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  WordPartLeftCommand.prototype._move = function (wordSeparators, model, position, wordNavigationType) {\n    return WordPartOperations.moveWordPartLeft(wordSeparators, model, position);\n  };\n\n  return WordPartLeftCommand;\n}(MoveWordCommand);\n\nexport { WordPartLeftCommand };\n\nvar CursorWordPartLeft =\n/** @class */\nfunction (_super) {\n  __extends(CursorWordPartLeft, _super);\n\n  function CursorWordPartLeft() {\n    return _super.call(this, {\n      inSelectionMode: false,\n      wordNavigationType: 0\n      /* WordStart */\n      ,\n      id: 'cursorWordPartLeft',\n      precondition: null,\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 0,\n        mac: {\n          primary: 256\n          /* WinCtrl */\n          | 512\n          /* Alt */\n          | 15\n          /* LeftArrow */\n\n        },\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  return CursorWordPartLeft;\n}(WordPartLeftCommand);\n\nexport { CursorWordPartLeft }; // Register previous id for compatibility purposes\n\nCommandsRegistry.registerCommandAlias('cursorWordPartStartLeft', 'cursorWordPartLeft');\n\nvar CursorWordPartLeftSelect =\n/** @class */\nfunction (_super) {\n  __extends(CursorWordPartLeftSelect, _super);\n\n  function CursorWordPartLeftSelect() {\n    return _super.call(this, {\n      inSelectionMode: true,\n      wordNavigationType: 0\n      /* WordStart */\n      ,\n      id: 'cursorWordPartLeftSelect',\n      precondition: null,\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 0,\n        mac: {\n          primary: 256\n          /* WinCtrl */\n          | 512\n          /* Alt */\n          | 1024\n          /* Shift */\n          | 15\n          /* LeftArrow */\n\n        },\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  return CursorWordPartLeftSelect;\n}(WordPartLeftCommand);\n\nexport { CursorWordPartLeftSelect }; // Register previous id for compatibility purposes\n\nCommandsRegistry.registerCommandAlias('cursorWordPartStartLeftSelect', 'cursorWordPartLeftSelect');\n\nvar WordPartRightCommand =\n/** @class */\nfunction (_super) {\n  __extends(WordPartRightCommand, _super);\n\n  function WordPartRightCommand() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  WordPartRightCommand.prototype._move = function (wordSeparators, model, position, wordNavigationType) {\n    return WordPartOperations.moveWordPartRight(wordSeparators, model, position);\n  };\n\n  return WordPartRightCommand;\n}(MoveWordCommand);\n\nexport { WordPartRightCommand };\n\nvar CursorWordPartRight =\n/** @class */\nfunction (_super) {\n  __extends(CursorWordPartRight, _super);\n\n  function CursorWordPartRight() {\n    return _super.call(this, {\n      inSelectionMode: false,\n      wordNavigationType: 2\n      /* WordEnd */\n      ,\n      id: 'cursorWordPartRight',\n      precondition: null,\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 0,\n        mac: {\n          primary: 256\n          /* WinCtrl */\n          | 512\n          /* Alt */\n          | 17\n          /* RightArrow */\n\n        },\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  return CursorWordPartRight;\n}(WordPartRightCommand);\n\nexport { CursorWordPartRight };\n\nvar CursorWordPartRightSelect =\n/** @class */\nfunction (_super) {\n  __extends(CursorWordPartRightSelect, _super);\n\n  function CursorWordPartRightSelect() {\n    return _super.call(this, {\n      inSelectionMode: true,\n      wordNavigationType: 2\n      /* WordEnd */\n      ,\n      id: 'cursorWordPartRightSelect',\n      precondition: null,\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 0,\n        mac: {\n          primary: 256\n          /* WinCtrl */\n          | 512\n          /* Alt */\n          | 1024\n          /* Shift */\n          | 17\n          /* RightArrow */\n\n        },\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  return CursorWordPartRightSelect;\n}(WordPartRightCommand);\n\nexport { CursorWordPartRightSelect };\nregisterEditorCommand(new DeleteWordPartLeft());\nregisterEditorCommand(new DeleteWordPartRight());\nregisterEditorCommand(new CursorWordPartLeft());\nregisterEditorCommand(new CursorWordPartLeftSelect());\nregisterEditorCommand(new CursorWordPartRight());\nregisterEditorCommand(new CursorWordPartRightSelect());","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport './accessibilityHelp.css';\nimport * as browser from '../../../../base/browser/browser.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { createFastDomNode } from '../../../../base/browser/fastDomNode.js';\nimport { renderFormattedText } from '../../../../base/browser/htmlContentRenderer.js';\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { Widget } from '../../../../base/browser/ui/widget.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ToggleTabFocusModeAction } from '../../../contrib/toggleTabFocusMode/toggleTabFocusMode.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { contrastBorder, editorWidgetBackground, widgetShadow } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { AccessibilityHelpNLS } from '../../../common/standaloneStrings.js';\nvar CONTEXT_ACCESSIBILITY_WIDGET_VISIBLE = new RawContextKey('accessibilityHelpWidgetVisible', false);\n\nvar AccessibilityHelpController =\n/** @class */\nfunction (_super) {\n  __extends(AccessibilityHelpController, _super);\n\n  function AccessibilityHelpController(editor, instantiationService) {\n    var _this = _super.call(this) || this;\n\n    _this._editor = editor;\n    _this._widget = _this._register(instantiationService.createInstance(AccessibilityHelpWidget, _this._editor));\n    return _this;\n  }\n\n  AccessibilityHelpController.get = function (editor) {\n    return editor.getContribution(AccessibilityHelpController.ID);\n  };\n\n  AccessibilityHelpController.prototype.getId = function () {\n    return AccessibilityHelpController.ID;\n  };\n\n  AccessibilityHelpController.prototype.show = function () {\n    this._widget.show();\n  };\n\n  AccessibilityHelpController.prototype.hide = function () {\n    this._widget.hide();\n  };\n\n  AccessibilityHelpController.ID = 'editor.contrib.accessibilityHelpController';\n  AccessibilityHelpController = __decorate([__param(1, IInstantiationService)], AccessibilityHelpController);\n  return AccessibilityHelpController;\n}(Disposable);\n\nfunction getSelectionLabel(selections, charactersSelected) {\n  if (!selections || selections.length === 0) {\n    return AccessibilityHelpNLS.noSelection;\n  }\n\n  if (selections.length === 1) {\n    if (charactersSelected) {\n      return strings.format(AccessibilityHelpNLS.singleSelectionRange, selections[0].positionLineNumber, selections[0].positionColumn, charactersSelected);\n    }\n\n    return strings.format(AccessibilityHelpNLS.singleSelection, selections[0].positionLineNumber, selections[0].positionColumn);\n  }\n\n  if (charactersSelected) {\n    return strings.format(AccessibilityHelpNLS.multiSelectionRange, selections.length, charactersSelected);\n  }\n\n  if (selections.length > 0) {\n    return strings.format(AccessibilityHelpNLS.multiSelection, selections.length);\n  }\n\n  return '';\n}\n\nvar AccessibilityHelpWidget =\n/** @class */\nfunction (_super) {\n  __extends(AccessibilityHelpWidget, _super);\n\n  function AccessibilityHelpWidget(editor, _contextKeyService, _keybindingService, _openerService) {\n    var _this = _super.call(this) || this;\n\n    _this._contextKeyService = _contextKeyService;\n    _this._keybindingService = _keybindingService;\n    _this._openerService = _openerService;\n    _this._editor = editor;\n    _this._isVisibleKey = CONTEXT_ACCESSIBILITY_WIDGET_VISIBLE.bindTo(_this._contextKeyService);\n    _this._domNode = createFastDomNode(document.createElement('div'));\n\n    _this._domNode.setClassName('accessibilityHelpWidget');\n\n    _this._domNode.setDisplay('none');\n\n    _this._domNode.setAttribute('role', 'dialog');\n\n    _this._domNode.setAttribute('aria-hidden', 'true');\n\n    _this._contentDomNode = createFastDomNode(document.createElement('div'));\n\n    _this._contentDomNode.setAttribute('role', 'document');\n\n    _this._domNode.appendChild(_this._contentDomNode);\n\n    _this._isVisible = false;\n\n    _this._register(_this._editor.onDidLayoutChange(function () {\n      if (_this._isVisible) {\n        _this._layout();\n      }\n    })); // Intentionally not configurable!\n\n\n    _this._register(dom.addStandardDisposableListener(_this._contentDomNode.domNode, 'keydown', function (e) {\n      if (!_this._isVisible) {\n        return;\n      }\n\n      if (e.equals(2048\n      /* CtrlCmd */\n      | 35\n      /* KEY_E */\n      )) {\n        alert(AccessibilityHelpNLS.emergencyConfOn);\n\n        _this._editor.updateOptions({\n          accessibilitySupport: 'on'\n        });\n\n        dom.clearNode(_this._contentDomNode.domNode);\n\n        _this._buildContent();\n\n        _this._contentDomNode.domNode.focus();\n\n        e.preventDefault();\n        e.stopPropagation();\n      }\n\n      if (e.equals(2048\n      /* CtrlCmd */\n      | 38\n      /* KEY_H */\n      )) {\n        alert(AccessibilityHelpNLS.openingDocs);\n\n        var url = _this._editor.getRawConfiguration().accessibilityHelpUrl;\n\n        if (typeof url === 'undefined') {\n          url = 'https://go.microsoft.com/fwlink/?linkid=852450';\n        }\n\n        _this._openerService.open(URI.parse(url));\n\n        e.preventDefault();\n        e.stopPropagation();\n      }\n    }));\n\n    _this.onblur(_this._contentDomNode.domNode, function () {\n      _this.hide();\n    });\n\n    _this._editor.addOverlayWidget(_this);\n\n    return _this;\n  }\n\n  AccessibilityHelpWidget.prototype.dispose = function () {\n    this._editor.removeOverlayWidget(this);\n\n    _super.prototype.dispose.call(this);\n  };\n\n  AccessibilityHelpWidget.prototype.getId = function () {\n    return AccessibilityHelpWidget.ID;\n  };\n\n  AccessibilityHelpWidget.prototype.getDomNode = function () {\n    return this._domNode.domNode;\n  };\n\n  AccessibilityHelpWidget.prototype.getPosition = function () {\n    return {\n      preference: null\n    };\n  };\n\n  AccessibilityHelpWidget.prototype.show = function () {\n    if (this._isVisible) {\n      return;\n    }\n\n    this._isVisible = true;\n\n    this._isVisibleKey.set(true);\n\n    this._layout();\n\n    this._domNode.setDisplay('block');\n\n    this._domNode.setAttribute('aria-hidden', 'false');\n\n    this._contentDomNode.domNode.tabIndex = 0;\n\n    this._buildContent();\n\n    this._contentDomNode.domNode.focus();\n  };\n\n  AccessibilityHelpWidget.prototype._descriptionForCommand = function (commandId, msg, noKbMsg) {\n    var kb = this._keybindingService.lookupKeybinding(commandId);\n\n    if (kb) {\n      return strings.format(msg, kb.getAriaLabel());\n    }\n\n    return strings.format(noKbMsg, commandId);\n  };\n\n  AccessibilityHelpWidget.prototype._buildContent = function () {\n    var opts = this._editor.getConfiguration();\n\n    var selections = this._editor.getSelections();\n\n    var charactersSelected = 0;\n\n    if (selections) {\n      var model_1 = this._editor.getModel();\n\n      if (model_1) {\n        selections.forEach(function (selection) {\n          charactersSelected += model_1.getValueLengthInRange(selection);\n        });\n      }\n    }\n\n    var text = getSelectionLabel(selections, charactersSelected);\n\n    if (opts.wrappingInfo.inDiffEditor) {\n      if (opts.readOnly) {\n        text += AccessibilityHelpNLS.readonlyDiffEditor;\n      } else {\n        text += AccessibilityHelpNLS.editableDiffEditor;\n      }\n    } else {\n      if (opts.readOnly) {\n        text += AccessibilityHelpNLS.readonlyEditor;\n      } else {\n        text += AccessibilityHelpNLS.editableEditor;\n      }\n    }\n\n    var turnOnMessage = platform.isMacintosh ? AccessibilityHelpNLS.changeConfigToOnMac : AccessibilityHelpNLS.changeConfigToOnWinLinux;\n\n    switch (opts.accessibilitySupport) {\n      case 0\n      /* Unknown */\n      :\n        text += '\\n\\n - ' + turnOnMessage;\n        break;\n\n      case 2\n      /* Enabled */\n      :\n        text += '\\n\\n - ' + AccessibilityHelpNLS.auto_on;\n        break;\n\n      case 1\n      /* Disabled */\n      :\n        text += '\\n\\n - ' + AccessibilityHelpNLS.auto_off;\n        text += ' ' + turnOnMessage;\n        break;\n    }\n\n    if (opts.tabFocusMode) {\n      text += '\\n\\n - ' + this._descriptionForCommand(ToggleTabFocusModeAction.ID, AccessibilityHelpNLS.tabFocusModeOnMsg, AccessibilityHelpNLS.tabFocusModeOnMsgNoKb);\n    } else {\n      text += '\\n\\n - ' + this._descriptionForCommand(ToggleTabFocusModeAction.ID, AccessibilityHelpNLS.tabFocusModeOffMsg, AccessibilityHelpNLS.tabFocusModeOffMsgNoKb);\n    }\n\n    var openDocMessage = platform.isMacintosh ? AccessibilityHelpNLS.openDocMac : AccessibilityHelpNLS.openDocWinLinux;\n    text += '\\n\\n - ' + openDocMessage;\n    text += '\\n\\n' + AccessibilityHelpNLS.outroMsg;\n\n    this._contentDomNode.domNode.appendChild(renderFormattedText(text)); // Per https://www.w3.org/TR/wai-aria/roles#document, Authors SHOULD provide a title or label for documents\n\n\n    this._contentDomNode.domNode.setAttribute('aria-label', text);\n  };\n\n  AccessibilityHelpWidget.prototype.hide = function () {\n    if (!this._isVisible) {\n      return;\n    }\n\n    this._isVisible = false;\n\n    this._isVisibleKey.reset();\n\n    this._domNode.setDisplay('none');\n\n    this._domNode.setAttribute('aria-hidden', 'true');\n\n    this._contentDomNode.domNode.tabIndex = -1;\n    dom.clearNode(this._contentDomNode.domNode);\n\n    this._editor.focus();\n  };\n\n  AccessibilityHelpWidget.prototype._layout = function () {\n    var editorLayout = this._editor.getLayoutInfo();\n\n    var w = Math.max(5, Math.min(AccessibilityHelpWidget.WIDTH, editorLayout.width - 40));\n    var h = Math.max(5, Math.min(AccessibilityHelpWidget.HEIGHT, editorLayout.height - 40));\n\n    this._domNode.setWidth(w);\n\n    this._domNode.setHeight(h);\n\n    var top = Math.round((editorLayout.height - h) / 2);\n\n    this._domNode.setTop(top);\n\n    var left = Math.round((editorLayout.width - w) / 2);\n\n    this._domNode.setLeft(left);\n  };\n\n  AccessibilityHelpWidget.ID = 'editor.contrib.accessibilityHelpWidget';\n  AccessibilityHelpWidget.WIDTH = 500;\n  AccessibilityHelpWidget.HEIGHT = 300;\n  AccessibilityHelpWidget = __decorate([__param(1, IContextKeyService), __param(2, IKeybindingService), __param(3, IOpenerService)], AccessibilityHelpWidget);\n  return AccessibilityHelpWidget;\n}(Widget);\n\nvar ShowAccessibilityHelpAction =\n/** @class */\nfunction (_super) {\n  __extends(ShowAccessibilityHelpAction, _super);\n\n  function ShowAccessibilityHelpAction() {\n    return _super.call(this, {\n      id: 'editor.action.showAccessibilityHelp',\n      label: AccessibilityHelpNLS.showAccessibilityHelpAction,\n      alias: 'Show Accessibility Help',\n      precondition: null,\n      kbOpts: {\n        kbExpr: EditorContextKeys.focus,\n        primary: browser.isIE ? 2048\n        /* CtrlCmd */\n        | 59\n        /* F1 */\n        : 512\n        /* Alt */\n        | 59\n        /* F1 */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  ShowAccessibilityHelpAction.prototype.run = function (accessor, editor) {\n    var controller = AccessibilityHelpController.get(editor);\n\n    if (controller) {\n      controller.show();\n    }\n  };\n\n  return ShowAccessibilityHelpAction;\n}(EditorAction);\n\nregisterEditorContribution(AccessibilityHelpController);\nregisterEditorAction(ShowAccessibilityHelpAction);\nvar AccessibilityHelpCommand = EditorCommand.bindToContribution(AccessibilityHelpController.get);\nregisterEditorCommand(new AccessibilityHelpCommand({\n  id: 'closeAccessibilityHelp',\n  precondition: CONTEXT_ACCESSIBILITY_WIDGET_VISIBLE,\n  handler: function handler(x) {\n    return x.hide();\n  },\n  kbOpts: {\n    weight: 100\n    /* EditorContrib */\n    + 100,\n    kbExpr: EditorContextKeys.focus,\n    primary: 9\n    /* Escape */\n    ,\n    secondary: [1024\n    /* Shift */\n    | 9\n    /* Escape */\n    ]\n  }\n}));\nregisterThemingParticipant(function (theme, collector) {\n  var widgetBackground = theme.getColor(editorWidgetBackground);\n\n  if (widgetBackground) {\n    collector.addRule(\".monaco-editor .accessibilityHelpWidget { background-color: \" + widgetBackground + \"; }\");\n  }\n\n  var widgetShadowColor = theme.getColor(widgetShadow);\n\n  if (widgetShadowColor) {\n    collector.addRule(\".monaco-editor .accessibilityHelpWidget { box-shadow: 0 2px 8px \" + widgetShadowColor + \"; }\");\n  }\n\n  var hcBorder = theme.getColor(contrastBorder);\n\n  if (hcBorder) {\n    collector.addRule(\".monaco-editor .accessibilityHelpWidget { border: 2px solid \" + hcBorder + \"; }\");\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './iPadShowKeyboard.css';\nimport * as browser from '../../../../base/browser/browser.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { dispose } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\n\nvar IPadShowKeyboard =\n/** @class */\nfunction () {\n  function IPadShowKeyboard(editor) {\n    var _this = this;\n\n    this.editor = editor;\n    this.toDispose = [];\n\n    if (browser.isIPad) {\n      this.toDispose.push(editor.onDidChangeConfiguration(function () {\n        return _this.update();\n      }));\n      this.update();\n    }\n  }\n\n  IPadShowKeyboard.prototype.update = function () {\n    var shouldHaveWidget = !this.editor.getConfiguration().readOnly;\n\n    if (!this.widget && shouldHaveWidget) {\n      this.widget = new ShowKeyboardWidget(this.editor);\n    } else if (this.widget && !shouldHaveWidget) {\n      this.widget.dispose();\n      this.widget = null;\n    }\n  };\n\n  IPadShowKeyboard.prototype.getId = function () {\n    return IPadShowKeyboard.ID;\n  };\n\n  IPadShowKeyboard.prototype.dispose = function () {\n    this.toDispose = dispose(this.toDispose);\n\n    if (this.widget) {\n      this.widget.dispose();\n      this.widget = null;\n    }\n  };\n\n  IPadShowKeyboard.ID = 'editor.contrib.iPadShowKeyboard';\n  return IPadShowKeyboard;\n}();\n\nexport { IPadShowKeyboard };\n\nvar ShowKeyboardWidget =\n/** @class */\nfunction () {\n  function ShowKeyboardWidget(editor) {\n    var _this = this;\n\n    this.editor = editor;\n    this._domNode = document.createElement('textarea');\n    this._domNode.className = 'iPadShowKeyboard';\n    this._toDispose = [];\n\n    this._toDispose.push(dom.addDisposableListener(this._domNode, 'touchstart', function (e) {\n      _this.editor.focus();\n    }));\n\n    this._toDispose.push(dom.addDisposableListener(this._domNode, 'focus', function (e) {\n      _this.editor.focus();\n    }));\n\n    this.editor.addOverlayWidget(this);\n  }\n\n  ShowKeyboardWidget.prototype.dispose = function () {\n    this.editor.removeOverlayWidget(this);\n    this._toDispose = dispose(this._toDispose);\n  }; // ----- IOverlayWidget API\n\n\n  ShowKeyboardWidget.prototype.getId = function () {\n    return ShowKeyboardWidget.ID;\n  };\n\n  ShowKeyboardWidget.prototype.getDomNode = function () {\n    return this._domNode;\n  };\n\n  ShowKeyboardWidget.prototype.getPosition = function () {\n    return {\n      preference: 1\n      /* BOTTOM_RIGHT_CORNER */\n\n    };\n  };\n\n  ShowKeyboardWidget.ID = 'editor.contrib.ShowKeyboardWidget';\n  return ShowKeyboardWidget;\n}();\n\nregisterEditorContribution(IPadShowKeyboard);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport './inspectTokens.css';\nimport { Color } from '../../../../base/common/color.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { escape } from '../../../../base/common/strings.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { TokenMetadata, TokenizationRegistry } from '../../../common/modes.js';\nimport { NULL_STATE, nullTokenize, nullTokenize2 } from '../../../common/modes/nullMode.js';\nimport { IModeService } from '../../../common/services/modeService.js';\nimport { IStandaloneThemeService } from '../../common/standaloneThemeService.js';\nimport { editorHoverBackground, editorHoverBorder } from '../../../../platform/theme/common/colorRegistry.js';\nimport { HIGH_CONTRAST, registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { InspectTokensNLS } from '../../../common/standaloneStrings.js';\n\nvar InspectTokensController =\n/** @class */\nfunction (_super) {\n  __extends(InspectTokensController, _super);\n\n  function InspectTokensController(editor, standaloneColorService, modeService) {\n    var _this = _super.call(this) || this;\n\n    _this._editor = editor;\n    _this._modeService = modeService;\n    _this._widget = null;\n\n    _this._register(_this._editor.onDidChangeModel(function (e) {\n      return _this.stop();\n    }));\n\n    _this._register(_this._editor.onDidChangeModelLanguage(function (e) {\n      return _this.stop();\n    }));\n\n    _this._register(TokenizationRegistry.onDidChange(function (e) {\n      return _this.stop();\n    }));\n\n    return _this;\n  }\n\n  InspectTokensController.get = function (editor) {\n    return editor.getContribution(InspectTokensController.ID);\n  };\n\n  InspectTokensController.prototype.getId = function () {\n    return InspectTokensController.ID;\n  };\n\n  InspectTokensController.prototype.dispose = function () {\n    this.stop();\n\n    _super.prototype.dispose.call(this);\n  };\n\n  InspectTokensController.prototype.launch = function () {\n    if (this._widget) {\n      return;\n    }\n\n    if (!this._editor.hasModel()) {\n      return;\n    }\n\n    this._widget = new InspectTokensWidget(this._editor, this._modeService);\n  };\n\n  InspectTokensController.prototype.stop = function () {\n    if (this._widget) {\n      this._widget.dispose();\n\n      this._widget = null;\n    }\n  };\n\n  InspectTokensController.ID = 'editor.contrib.inspectTokens';\n  InspectTokensController = __decorate([__param(1, IStandaloneThemeService), __param(2, IModeService)], InspectTokensController);\n  return InspectTokensController;\n}(Disposable);\n\nvar InspectTokens =\n/** @class */\nfunction (_super) {\n  __extends(InspectTokens, _super);\n\n  function InspectTokens() {\n    return _super.call(this, {\n      id: 'editor.action.inspectTokens',\n      label: InspectTokensNLS.inspectTokensAction,\n      alias: 'Developer: Inspect Tokens',\n      precondition: null\n    }) || this;\n  }\n\n  InspectTokens.prototype.run = function (accessor, editor) {\n    var controller = InspectTokensController.get(editor);\n\n    if (controller) {\n      controller.launch();\n    }\n  };\n\n  return InspectTokens;\n}(EditorAction);\n\nfunction renderTokenText(tokenText) {\n  var result = '';\n\n  for (var charIndex = 0, len = tokenText.length; charIndex < len; charIndex++) {\n    var charCode = tokenText.charCodeAt(charIndex);\n\n    switch (charCode) {\n      case 9\n      /* Tab */\n      :\n        result += '&rarr;';\n        break;\n\n      case 32\n      /* Space */\n      :\n        result += '&middot;';\n        break;\n\n      case 60\n      /* LessThan */\n      :\n        result += '&lt;';\n        break;\n\n      case 62\n      /* GreaterThan */\n      :\n        result += '&gt;';\n        break;\n\n      case 38\n      /* Ampersand */\n      :\n        result += '&amp;';\n        break;\n\n      default:\n        result += String.fromCharCode(charCode);\n    }\n  }\n\n  return result;\n}\n\nfunction getSafeTokenizationSupport(languageIdentifier) {\n  var tokenizationSupport = TokenizationRegistry.get(languageIdentifier.language);\n\n  if (tokenizationSupport) {\n    return tokenizationSupport;\n  }\n\n  return {\n    getInitialState: function getInitialState() {\n      return NULL_STATE;\n    },\n    tokenize: function tokenize(line, state, deltaOffset) {\n      return nullTokenize(languageIdentifier.language, line, state, deltaOffset);\n    },\n    tokenize2: function tokenize2(line, state, deltaOffset) {\n      return nullTokenize2(languageIdentifier.id, line, state, deltaOffset);\n    }\n  };\n}\n\nvar InspectTokensWidget =\n/** @class */\nfunction (_super) {\n  __extends(InspectTokensWidget, _super);\n\n  function InspectTokensWidget(editor, modeService) {\n    var _this = _super.call(this) || this; // Editor.IContentWidget.allowEditorOverflow\n\n\n    _this.allowEditorOverflow = true;\n    _this._editor = editor;\n    _this._modeService = modeService;\n    _this._model = _this._editor.getModel();\n    _this._domNode = document.createElement('div');\n    _this._domNode.className = 'tokens-inspect-widget';\n    _this._tokenizationSupport = getSafeTokenizationSupport(_this._model.getLanguageIdentifier());\n\n    _this._compute(_this._editor.getPosition());\n\n    _this._register(_this._editor.onDidChangeCursorPosition(function (e) {\n      return _this._compute(_this._editor.getPosition());\n    }));\n\n    _this._editor.addContentWidget(_this);\n\n    return _this;\n  }\n\n  InspectTokensWidget.prototype.dispose = function () {\n    this._editor.removeContentWidget(this);\n\n    _super.prototype.dispose.call(this);\n  };\n\n  InspectTokensWidget.prototype.getId = function () {\n    return InspectTokensWidget._ID;\n  };\n\n  InspectTokensWidget.prototype._compute = function (position) {\n    var data = this._getTokensAtLine(position.lineNumber);\n\n    var token1Index = 0;\n\n    for (var i = data.tokens1.length - 1; i >= 0; i--) {\n      var t = data.tokens1[i];\n\n      if (position.column - 1 >= t.offset) {\n        token1Index = i;\n        break;\n      }\n    }\n\n    var token2Index = 0;\n\n    for (var i = data.tokens2.length >>> 1; i >= 0; i--) {\n      if (position.column - 1 >= data.tokens2[i << 1]) {\n        token2Index = i;\n        break;\n      }\n    }\n\n    var result = '';\n\n    var lineContent = this._model.getLineContent(position.lineNumber);\n\n    var tokenText = '';\n\n    if (token1Index < data.tokens1.length) {\n      var tokenStartIndex = data.tokens1[token1Index].offset;\n      var tokenEndIndex = token1Index + 1 < data.tokens1.length ? data.tokens1[token1Index + 1].offset : lineContent.length;\n      tokenText = lineContent.substring(tokenStartIndex, tokenEndIndex);\n    }\n\n    result += \"<h2 class=\\\"tm-token\\\">\" + renderTokenText(tokenText) + \"<span class=\\\"tm-token-length\\\">(\" + tokenText.length + \" \" + (tokenText.length === 1 ? 'char' : 'chars') + \")</span></h2>\";\n    result += \"<hr class=\\\"tokens-inspect-separator\\\" style=\\\"clear:both\\\"/>\";\n\n    var metadata = this._decodeMetadata(data.tokens2[(token2Index << 1) + 1]);\n\n    result += \"<table class=\\\"tm-metadata-table\\\"><tbody>\";\n    result += \"<tr><td class=\\\"tm-metadata-key\\\">language</td><td class=\\\"tm-metadata-value\\\">\" + escape(metadata.languageIdentifier.language) + \"</td>\";\n    result += \"<tr><td class=\\\"tm-metadata-key\\\">token type</td><td class=\\\"tm-metadata-value\\\">\" + this._tokenTypeToString(metadata.tokenType) + \"</td>\";\n    result += \"<tr><td class=\\\"tm-metadata-key\\\">font style</td><td class=\\\"tm-metadata-value\\\">\" + this._fontStyleToString(metadata.fontStyle) + \"</td>\";\n    result += \"<tr><td class=\\\"tm-metadata-key\\\">foreground</td><td class=\\\"tm-metadata-value\\\">\" + Color.Format.CSS.formatHex(metadata.foreground) + \"</td>\";\n    result += \"<tr><td class=\\\"tm-metadata-key\\\">background</td><td class=\\\"tm-metadata-value\\\">\" + Color.Format.CSS.formatHex(metadata.background) + \"</td>\";\n    result += \"</tbody></table>\";\n    result += \"<hr class=\\\"tokens-inspect-separator\\\"/>\";\n\n    if (token1Index < data.tokens1.length) {\n      result += \"<span class=\\\"tm-token-type\\\">\" + escape(data.tokens1[token1Index].type) + \"</span>\";\n    }\n\n    this._domNode.innerHTML = result;\n\n    this._editor.layoutContentWidget(this);\n  };\n\n  InspectTokensWidget.prototype._decodeMetadata = function (metadata) {\n    var colorMap = TokenizationRegistry.getColorMap();\n    var languageId = TokenMetadata.getLanguageId(metadata);\n    var tokenType = TokenMetadata.getTokenType(metadata);\n    var fontStyle = TokenMetadata.getFontStyle(metadata);\n    var foreground = TokenMetadata.getForeground(metadata);\n    var background = TokenMetadata.getBackground(metadata);\n    return {\n      languageIdentifier: this._modeService.getLanguageIdentifier(languageId),\n      tokenType: tokenType,\n      fontStyle: fontStyle,\n      foreground: colorMap[foreground],\n      background: colorMap[background]\n    };\n  };\n\n  InspectTokensWidget.prototype._tokenTypeToString = function (tokenType) {\n    switch (tokenType) {\n      case 0\n      /* Other */\n      :\n        return 'Other';\n\n      case 1\n      /* Comment */\n      :\n        return 'Comment';\n\n      case 2\n      /* String */\n      :\n        return 'String';\n\n      case 4\n      /* RegEx */\n      :\n        return 'RegEx';\n    }\n\n    return '??';\n  };\n\n  InspectTokensWidget.prototype._fontStyleToString = function (fontStyle) {\n    var r = '';\n\n    if (fontStyle & 1\n    /* Italic */\n    ) {\n        r += 'italic ';\n      }\n\n    if (fontStyle & 2\n    /* Bold */\n    ) {\n        r += 'bold ';\n      }\n\n    if (fontStyle & 4\n    /* Underline */\n    ) {\n        r += 'underline ';\n      }\n\n    if (r.length === 0) {\n      r = '---';\n    }\n\n    return r;\n  };\n\n  InspectTokensWidget.prototype._getTokensAtLine = function (lineNumber) {\n    var stateBeforeLine = this._getStateBeforeLine(lineNumber);\n\n    var tokenizationResult1 = this._tokenizationSupport.tokenize(this._model.getLineContent(lineNumber), stateBeforeLine, 0);\n\n    var tokenizationResult2 = this._tokenizationSupport.tokenize2(this._model.getLineContent(lineNumber), stateBeforeLine, 0);\n\n    return {\n      startState: stateBeforeLine,\n      tokens1: tokenizationResult1.tokens,\n      tokens2: tokenizationResult2.tokens,\n      endState: tokenizationResult1.endState\n    };\n  };\n\n  InspectTokensWidget.prototype._getStateBeforeLine = function (lineNumber) {\n    var state = this._tokenizationSupport.getInitialState();\n\n    for (var i = 1; i < lineNumber; i++) {\n      var tokenizationResult = this._tokenizationSupport.tokenize(this._model.getLineContent(i), state, 0);\n\n      state = tokenizationResult.endState;\n    }\n\n    return state;\n  };\n\n  InspectTokensWidget.prototype.getDomNode = function () {\n    return this._domNode;\n  };\n\n  InspectTokensWidget.prototype.getPosition = function () {\n    return {\n      position: this._editor.getPosition(),\n      preference: [2\n      /* BELOW */\n      , 1\n      /* ABOVE */\n      ]\n    };\n  };\n\n  InspectTokensWidget._ID = 'editor.contrib.inspectTokensWidget';\n  return InspectTokensWidget;\n}(Disposable);\n\nregisterEditorContribution(InspectTokensController);\nregisterEditorAction(InspectTokens);\nregisterThemingParticipant(function (theme, collector) {\n  var border = theme.getColor(editorHoverBorder);\n\n  if (border) {\n    var borderWidth = theme.type === HIGH_CONTRAST ? 2 : 1;\n    collector.addRule(\".monaco-editor .tokens-inspect-widget { border: \" + borderWidth + \"px solid \" + border + \"; }\");\n    collector.addRule(\".monaco-editor .tokens-inspect-widget .tokens-inspect-separator { background-color: \" + border + \"; }\");\n  }\n\n  var background = theme.getColor(editorHoverBackground);\n\n  if (background) {\n    collector.addRule(\".monaco-editor .tokens-inspect-widget { background-color: \" + background + \"; }\");\n  }\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './keybindingLabel.css';\nimport { equals } from '../../../common/objects.js';\nimport { UILabelProvider } from '../../../common/keybindingLabels.js';\nimport * as dom from '../../dom.js';\nimport { localize } from '../../../../nls.js';\nvar $ = dom.$;\n\nvar KeybindingLabel =\n/** @class */\nfunction () {\n  function KeybindingLabel(container, os, options) {\n    this.os = os;\n    this.options = options;\n    this.domNode = dom.append(container, $('.monaco-keybinding'));\n    this.didEverRender = false;\n    container.appendChild(this.domNode);\n  }\n\n  KeybindingLabel.prototype.set = function (keybinding, matches) {\n    if (this.didEverRender && this.keybinding === keybinding && KeybindingLabel.areSame(this.matches, matches)) {\n      return;\n    }\n\n    this.keybinding = keybinding;\n    this.matches = matches;\n    this.render();\n  };\n\n  KeybindingLabel.prototype.render = function () {\n    dom.clearNode(this.domNode);\n\n    if (this.keybinding) {\n      var _a = this.keybinding.getParts(),\n          firstPart = _a[0],\n          chordPart = _a[1];\n\n      if (firstPart) {\n        this.renderPart(this.domNode, firstPart, this.matches ? this.matches.firstPart : null);\n      }\n\n      if (chordPart) {\n        dom.append(this.domNode, $('span.monaco-keybinding-key-chord-separator', undefined, ' '));\n        this.renderPart(this.domNode, chordPart, this.matches ? this.matches.chordPart : null);\n      }\n\n      this.domNode.title = this.keybinding.getAriaLabel() || '';\n    } else if (this.options && this.options.renderUnboundKeybindings) {\n      this.renderUnbound(this.domNode);\n    }\n\n    this.didEverRender = true;\n  };\n\n  KeybindingLabel.prototype.renderPart = function (parent, part, match) {\n    var modifierLabels = UILabelProvider.modifierLabels[this.os];\n\n    if (part.ctrlKey) {\n      this.renderKey(parent, modifierLabels.ctrlKey, Boolean(match && match.ctrlKey), modifierLabels.separator);\n    }\n\n    if (part.shiftKey) {\n      this.renderKey(parent, modifierLabels.shiftKey, Boolean(match && match.shiftKey), modifierLabels.separator);\n    }\n\n    if (part.altKey) {\n      this.renderKey(parent, modifierLabels.altKey, Boolean(match && match.altKey), modifierLabels.separator);\n    }\n\n    if (part.metaKey) {\n      this.renderKey(parent, modifierLabels.metaKey, Boolean(match && match.metaKey), modifierLabels.separator);\n    }\n\n    var keyLabel = part.keyLabel;\n\n    if (keyLabel) {\n      this.renderKey(parent, keyLabel, Boolean(match && match.keyCode), '');\n    }\n  };\n\n  KeybindingLabel.prototype.renderKey = function (parent, label, highlight, separator) {\n    dom.append(parent, $('span.monaco-keybinding-key' + (highlight ? '.highlight' : ''), undefined, label));\n\n    if (separator) {\n      dom.append(parent, $('span.monaco-keybinding-key-separator', undefined, separator));\n    }\n  };\n\n  KeybindingLabel.prototype.renderUnbound = function (parent) {\n    dom.append(parent, $('span.monaco-keybinding-key', undefined, localize('unbound', \"Unbound\")));\n  };\n\n  KeybindingLabel.areSame = function (a, b) {\n    if (a === b || !a && !b) {\n      return true;\n    }\n\n    return !!a && !!b && equals(a.firstPart, b.firstPart) && equals(a.chordPart, b.chordPart);\n  };\n\n  return KeybindingLabel;\n}();\n\nexport { KeybindingLabel };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport * as nls from '../../../../nls.js';\nimport * as types from '../../../common/types.js';\nimport { IconLabel } from '../../../browser/ui/iconLabel/iconLabel.js';\nimport { ActionBar } from '../../../browser/ui/actionbar/actionbar.js';\nimport { HighlightedLabel } from '../../../browser/ui/highlightedlabel/highlightedLabel.js';\nimport * as DOM from '../../../browser/dom.js';\nimport { KeybindingLabel } from '../../../browser/ui/keybindingLabel/keybindingLabel.js';\nimport { OS } from '../../../common/platform.js';\nimport { coalesce } from '../../../common/arrays.js';\nvar IDS = 0;\n\nvar QuickOpenEntry =\n/** @class */\nfunction () {\n  function QuickOpenEntry(highlights) {\n    if (highlights === void 0) {\n      highlights = [];\n    }\n\n    this.id = (IDS++).toString();\n    this.labelHighlights = highlights;\n    this.descriptionHighlights = [];\n  }\n  /**\n   * A unique identifier for the entry\n   */\n\n\n  QuickOpenEntry.prototype.getId = function () {\n    return this.id;\n  };\n  /**\n   * The label of the entry to identify it from others in the list\n   */\n\n\n  QuickOpenEntry.prototype.getLabel = function () {\n    return null;\n  };\n  /**\n   * The options for the label to use for this entry\n   */\n\n\n  QuickOpenEntry.prototype.getLabelOptions = function () {\n    return null;\n  };\n  /**\n   * The label of the entry to use when a screen reader wants to read about the entry\n   */\n\n\n  QuickOpenEntry.prototype.getAriaLabel = function () {\n    return coalesce([this.getLabel(), this.getDescription(), this.getDetail()]).join(', ');\n  };\n  /**\n   * Detail information about the entry that is optional and can be shown below the label\n   */\n\n\n  QuickOpenEntry.prototype.getDetail = function () {\n    return null;\n  };\n  /**\n   * The icon of the entry to identify it from others in the list\n   */\n\n\n  QuickOpenEntry.prototype.getIcon = function () {\n    return null;\n  };\n  /**\n   * A secondary description that is optional and can be shown right to the label\n   */\n\n\n  QuickOpenEntry.prototype.getDescription = function () {\n    return null;\n  };\n  /**\n   * A tooltip to show when hovering over the entry.\n   */\n\n\n  QuickOpenEntry.prototype.getTooltip = function () {\n    return null;\n  };\n  /**\n   * A tooltip to show when hovering over the description portion of the entry.\n   */\n\n\n  QuickOpenEntry.prototype.getDescriptionTooltip = function () {\n    return null;\n  };\n  /**\n   * An optional keybinding to show for an entry.\n   */\n\n\n  QuickOpenEntry.prototype.getKeybinding = function () {\n    return null;\n  };\n  /**\n   * Allows to reuse the same model while filtering. Hidden entries will not show up in the viewer.\n   */\n\n\n  QuickOpenEntry.prototype.isHidden = function () {\n    return this.hidden;\n  };\n  /**\n   * Allows to set highlight ranges that should show up for the entry label and optionally description if set.\n   */\n\n\n  QuickOpenEntry.prototype.setHighlights = function (labelHighlights, descriptionHighlights, detailHighlights) {\n    this.labelHighlights = labelHighlights;\n    this.descriptionHighlights = descriptionHighlights;\n    this.detailHighlights = detailHighlights;\n  };\n  /**\n   * Allows to return highlight ranges that should show up for the entry label and description.\n   */\n\n\n  QuickOpenEntry.prototype.getHighlights = function () {\n    return [this.labelHighlights, this.descriptionHighlights, this.detailHighlights];\n  };\n  /**\n   * Called when the entry is selected for opening. Returns a boolean value indicating if an action was performed or not.\n   * The mode parameter gives an indication if the element is previewed (using arrow keys) or opened.\n   *\n   * The context parameter provides additional context information how the run was triggered.\n   */\n\n\n  QuickOpenEntry.prototype.run = function (mode, context) {\n    return false;\n  };\n\n  return QuickOpenEntry;\n}();\n\nexport { QuickOpenEntry };\n\nvar QuickOpenEntryGroup =\n/** @class */\nfunction (_super) {\n  __extends(QuickOpenEntryGroup, _super);\n\n  function QuickOpenEntryGroup(entry, groupLabel, withBorder) {\n    var _this = _super.call(this) || this;\n\n    _this.entry = entry;\n    _this.groupLabel = groupLabel;\n    _this.withBorder = withBorder;\n    return _this;\n  }\n  /**\n   * The label of the group or null if none.\n   */\n\n\n  QuickOpenEntryGroup.prototype.getGroupLabel = function () {\n    return this.groupLabel;\n  };\n\n  QuickOpenEntryGroup.prototype.setGroupLabel = function (groupLabel) {\n    this.groupLabel = groupLabel;\n  };\n  /**\n   * Whether to show a border on top of the group entry or not.\n   */\n\n\n  QuickOpenEntryGroup.prototype.showBorder = function () {\n    return !!this.withBorder;\n  };\n\n  QuickOpenEntryGroup.prototype.setShowBorder = function (showBorder) {\n    this.withBorder = showBorder;\n  };\n\n  QuickOpenEntryGroup.prototype.getLabel = function () {\n    return this.entry ? this.entry.getLabel() : _super.prototype.getLabel.call(this);\n  };\n\n  QuickOpenEntryGroup.prototype.getLabelOptions = function () {\n    return this.entry ? this.entry.getLabelOptions() : _super.prototype.getLabelOptions.call(this);\n  };\n\n  QuickOpenEntryGroup.prototype.getAriaLabel = function () {\n    return this.entry ? this.entry.getAriaLabel() : _super.prototype.getAriaLabel.call(this);\n  };\n\n  QuickOpenEntryGroup.prototype.getDetail = function () {\n    return this.entry ? this.entry.getDetail() : _super.prototype.getDetail.call(this);\n  };\n\n  QuickOpenEntryGroup.prototype.getIcon = function () {\n    return this.entry ? this.entry.getIcon() : _super.prototype.getIcon.call(this);\n  };\n\n  QuickOpenEntryGroup.prototype.getDescription = function () {\n    return this.entry ? this.entry.getDescription() : _super.prototype.getDescription.call(this);\n  };\n\n  QuickOpenEntryGroup.prototype.getHighlights = function () {\n    return this.entry ? this.entry.getHighlights() : _super.prototype.getHighlights.call(this);\n  };\n\n  QuickOpenEntryGroup.prototype.isHidden = function () {\n    return this.entry ? this.entry.isHidden() : _super.prototype.isHidden.call(this);\n  };\n\n  QuickOpenEntryGroup.prototype.setHighlights = function (labelHighlights, descriptionHighlights, detailHighlights) {\n    this.entry ? this.entry.setHighlights(labelHighlights, descriptionHighlights, detailHighlights) : _super.prototype.setHighlights.call(this, labelHighlights, descriptionHighlights, detailHighlights);\n  };\n\n  QuickOpenEntryGroup.prototype.run = function (mode, context) {\n    return this.entry ? this.entry.run(mode, context) : _super.prototype.run.call(this, mode, context);\n  };\n\n  return QuickOpenEntryGroup;\n}(QuickOpenEntry);\n\nexport { QuickOpenEntryGroup };\n\nvar NoActionProvider =\n/** @class */\nfunction () {\n  function NoActionProvider() {}\n\n  NoActionProvider.prototype.hasActions = function (tree, element) {\n    return false;\n  };\n\n  NoActionProvider.prototype.getActions = function (tree, element) {\n    return null;\n  };\n\n  return NoActionProvider;\n}();\n\nvar templateEntry = 'quickOpenEntry';\nvar templateEntryGroup = 'quickOpenEntryGroup';\n\nvar Renderer =\n/** @class */\nfunction () {\n  function Renderer(actionProvider, actionRunner) {\n    if (actionProvider === void 0) {\n      actionProvider = new NoActionProvider();\n    }\n\n    this.actionProvider = actionProvider;\n    this.actionRunner = actionRunner;\n  }\n\n  Renderer.prototype.getHeight = function (entry) {\n    if (entry.getDetail()) {\n      return 44;\n    }\n\n    return 22;\n  };\n\n  Renderer.prototype.getTemplateId = function (entry) {\n    if (entry instanceof QuickOpenEntryGroup) {\n      return templateEntryGroup;\n    }\n\n    return templateEntry;\n  };\n\n  Renderer.prototype.renderTemplate = function (templateId, container, styles) {\n    var entryContainer = document.createElement('div');\n    DOM.addClass(entryContainer, 'sub-content');\n    container.appendChild(entryContainer); // Entry\n\n    var row1 = DOM.$('.quick-open-row');\n    var row2 = DOM.$('.quick-open-row');\n    var entry = DOM.$('.quick-open-entry', undefined, row1, row2);\n    entryContainer.appendChild(entry); // Icon\n\n    var icon = document.createElement('span');\n    row1.appendChild(icon); // Label\n\n    var label = new IconLabel(row1, {\n      supportHighlights: true,\n      supportDescriptionHighlights: true\n    }); // Keybinding\n\n    var keybindingContainer = document.createElement('span');\n    row1.appendChild(keybindingContainer);\n    DOM.addClass(keybindingContainer, 'quick-open-entry-keybinding');\n    var keybinding = new KeybindingLabel(keybindingContainer, OS); // Detail\n\n    var detailContainer = document.createElement('div');\n    row2.appendChild(detailContainer);\n    DOM.addClass(detailContainer, 'quick-open-entry-meta');\n    var detail = new HighlightedLabel(detailContainer, true); // Entry Group\n\n    var group;\n\n    if (templateId === templateEntryGroup) {\n      group = document.createElement('div');\n      DOM.addClass(group, 'results-group');\n      container.appendChild(group);\n    } // Actions\n\n\n    DOM.addClass(container, 'actions');\n    var actionBarContainer = document.createElement('div');\n    DOM.addClass(actionBarContainer, 'primary-action-bar');\n    container.appendChild(actionBarContainer);\n    var actionBar = new ActionBar(actionBarContainer, {\n      actionRunner: this.actionRunner\n    });\n    return {\n      container: container,\n      entry: entry,\n      icon: icon,\n      label: label,\n      detail: detail,\n      keybinding: keybinding,\n      group: group,\n      actionBar: actionBar\n    };\n  };\n\n  Renderer.prototype.renderElement = function (entry, templateId, data, styles) {\n    // Action Bar\n    if (this.actionProvider.hasActions(null, entry)) {\n      DOM.addClass(data.container, 'has-actions');\n    } else {\n      DOM.removeClass(data.container, 'has-actions');\n    }\n\n    data.actionBar.context = entry; // make sure the context is the current element\n\n    var actions = this.actionProvider.getActions(null, entry);\n\n    if (data.actionBar.isEmpty() && actions && actions.length > 0) {\n      data.actionBar.push(actions, {\n        icon: true,\n        label: false\n      });\n    } else if (!data.actionBar.isEmpty() && (!actions || actions.length === 0)) {\n      data.actionBar.clear();\n    } // Entry group class\n\n\n    if (entry instanceof QuickOpenEntryGroup && entry.getGroupLabel()) {\n      DOM.addClass(data.container, 'has-group-label');\n    } else {\n      DOM.removeClass(data.container, 'has-group-label');\n    } // Entry group\n\n\n    if (entry instanceof QuickOpenEntryGroup) {\n      var group = entry;\n      var groupData = data; // Border\n\n      if (group.showBorder()) {\n        DOM.addClass(groupData.container, 'results-group-separator');\n\n        if (styles.pickerGroupBorder) {\n          groupData.container.style.borderTopColor = styles.pickerGroupBorder.toString();\n        }\n      } else {\n        DOM.removeClass(groupData.container, 'results-group-separator');\n        groupData.container.style.borderTopColor = null;\n      } // Group Label\n\n\n      var groupLabel = group.getGroupLabel() || '';\n\n      if (groupData.group) {\n        groupData.group.textContent = groupLabel;\n\n        if (styles.pickerGroupForeground) {\n          groupData.group.style.color = styles.pickerGroupForeground.toString();\n        }\n      }\n    } // Normal Entry\n\n\n    if (entry instanceof QuickOpenEntry) {\n      var _a = entry.getHighlights(),\n          labelHighlights = _a[0],\n          descriptionHighlights = _a[1],\n          detailHighlights = _a[2]; // Icon\n\n\n      var iconClass = entry.getIcon() ? 'quick-open-entry-icon ' + entry.getIcon() : '';\n      data.icon.className = iconClass; // Label\n\n      var options = entry.getLabelOptions() || Object.create(null);\n      options.matches = labelHighlights || [];\n      options.title = types.withNullAsUndefined(entry.getTooltip());\n      options.descriptionTitle = entry.getDescriptionTooltip() || types.withNullAsUndefined(entry.getDescription()); // tooltip over description because it could overflow\n\n      options.descriptionMatches = descriptionHighlights || [];\n      data.label.setLabel(types.withNullAsUndefined(entry.getLabel()), types.withNullAsUndefined(entry.getDescription()), options); // Meta\n\n      data.detail.set(types.withNullAsUndefined(entry.getDetail()), detailHighlights); // Keybinding\n\n      data.keybinding.set(entry.getKeybinding());\n    }\n  };\n\n  Renderer.prototype.disposeTemplate = function (templateId, templateData) {\n    templateData.actionBar.dispose();\n    templateData.actionBar = null;\n    templateData.container = null;\n    templateData.entry = null;\n    templateData.keybinding = null;\n    templateData.detail = null;\n    templateData.group = null;\n    templateData.icon = null;\n    templateData.label.dispose();\n    templateData.label = null;\n  };\n\n  return Renderer;\n}();\n\nvar QuickOpenModel =\n/** @class */\nfunction () {\n  function QuickOpenModel(entries, actionProvider) {\n    if (entries === void 0) {\n      entries = [];\n    }\n\n    if (actionProvider === void 0) {\n      actionProvider = new NoActionProvider();\n    }\n\n    this._entries = entries;\n    this._dataSource = this;\n    this._renderer = new Renderer(actionProvider);\n    this._filter = this;\n    this._runner = this;\n    this._accessibilityProvider = this;\n  }\n\n  Object.defineProperty(QuickOpenModel.prototype, \"entries\", {\n    get: function get() {\n      return this._entries;\n    },\n    set: function set(entries) {\n      this._entries = entries;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(QuickOpenModel.prototype, \"dataSource\", {\n    get: function get() {\n      return this._dataSource;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(QuickOpenModel.prototype, \"renderer\", {\n    get: function get() {\n      return this._renderer;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(QuickOpenModel.prototype, \"filter\", {\n    get: function get() {\n      return this._filter;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(QuickOpenModel.prototype, \"runner\", {\n    get: function get() {\n      return this._runner;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(QuickOpenModel.prototype, \"accessibilityProvider\", {\n    get: function get() {\n      return this._accessibilityProvider;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  QuickOpenModel.prototype.getId = function (entry) {\n    return entry.getId();\n  };\n\n  QuickOpenModel.prototype.getLabel = function (entry) {\n    return entry.getLabel();\n  };\n\n  QuickOpenModel.prototype.getAriaLabel = function (entry) {\n    var ariaLabel = entry.getAriaLabel();\n\n    if (ariaLabel) {\n      return nls.localize('quickOpenAriaLabelEntry', \"{0}, picker\", entry.getAriaLabel());\n    }\n\n    return nls.localize('quickOpenAriaLabel', \"picker\");\n  };\n\n  QuickOpenModel.prototype.isVisible = function (entry) {\n    return !entry.isHidden();\n  };\n\n  QuickOpenModel.prototype.run = function (entry, mode, context) {\n    return entry.run(mode, context);\n  };\n\n  return QuickOpenModel;\n}();\n\nexport { QuickOpenModel };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { isFunction } from '../../../common/types.js';\n\nvar DataSource =\n/** @class */\nfunction () {\n  function DataSource(arg) {\n    this.modelProvider = isFunction(arg.getModel) ? arg : {\n      getModel: function getModel() {\n        return arg;\n      }\n    };\n  }\n\n  DataSource.prototype.getId = function (tree, element) {\n    if (!element) {\n      return null;\n    }\n\n    var model = this.modelProvider.getModel();\n    return model === element ? '__root__' : model.dataSource.getId(element);\n  };\n\n  DataSource.prototype.hasChildren = function (tree, element) {\n    var model = this.modelProvider.getModel();\n    return !!(model && model === element && model.entries.length > 0);\n  };\n\n  DataSource.prototype.getChildren = function (tree, element) {\n    var model = this.modelProvider.getModel();\n    return Promise.resolve(model === element ? model.entries : []);\n  };\n\n  DataSource.prototype.getParent = function (tree, element) {\n    return Promise.resolve(null);\n  };\n\n  return DataSource;\n}();\n\nexport { DataSource };\n\nvar AccessibilityProvider =\n/** @class */\nfunction () {\n  function AccessibilityProvider(modelProvider) {\n    this.modelProvider = modelProvider;\n  }\n\n  AccessibilityProvider.prototype.getAriaLabel = function (tree, element) {\n    var model = this.modelProvider.getModel();\n    return model.accessibilityProvider ? model.accessibilityProvider.getAriaLabel(element) : null;\n  };\n\n  AccessibilityProvider.prototype.getPosInSet = function (tree, element) {\n    var model = this.modelProvider.getModel();\n    var i = 0;\n\n    if (model.filter) {\n      for (var _i = 0, _a = model.entries; _i < _a.length; _i++) {\n        var entry = _a[_i];\n\n        if (model.filter.isVisible(entry)) {\n          i++;\n        }\n\n        if (entry === element) {\n          break;\n        }\n      }\n    } else {\n      i = model.entries.indexOf(element) + 1;\n    }\n\n    return String(i);\n  };\n\n  AccessibilityProvider.prototype.getSetSize = function () {\n    var model = this.modelProvider.getModel();\n    var n = 0;\n\n    if (model.filter) {\n      for (var _i = 0, _a = model.entries; _i < _a.length; _i++) {\n        var entry = _a[_i];\n\n        if (model.filter.isVisible(entry)) {\n          n++;\n        }\n      }\n    } else {\n      n = model.entries.length;\n    }\n\n    return String(n);\n  };\n\n  return AccessibilityProvider;\n}();\n\nexport { AccessibilityProvider };\n\nvar Filter =\n/** @class */\nfunction () {\n  function Filter(modelProvider) {\n    this.modelProvider = modelProvider;\n  }\n\n  Filter.prototype.isVisible = function (tree, element) {\n    var model = this.modelProvider.getModel();\n\n    if (!model.filter) {\n      return true;\n    }\n\n    return model.filter.isVisible(element);\n  };\n\n  return Filter;\n}();\n\nexport { Filter };\n\nvar Renderer =\n/** @class */\nfunction () {\n  function Renderer(modelProvider, styles) {\n    this.modelProvider = modelProvider;\n    this.styles = styles;\n  }\n\n  Renderer.prototype.updateStyles = function (styles) {\n    this.styles = styles;\n  };\n\n  Renderer.prototype.getHeight = function (tree, element) {\n    var model = this.modelProvider.getModel();\n    return model.renderer.getHeight(element);\n  };\n\n  Renderer.prototype.getTemplateId = function (tree, element) {\n    var model = this.modelProvider.getModel();\n    return model.renderer.getTemplateId(element);\n  };\n\n  Renderer.prototype.renderTemplate = function (tree, templateId, container) {\n    var model = this.modelProvider.getModel();\n    return model.renderer.renderTemplate(templateId, container, this.styles);\n  };\n\n  Renderer.prototype.renderElement = function (tree, element, templateId, templateData) {\n    var model = this.modelProvider.getModel();\n    model.renderer.renderElement(element, templateId, templateData, this.styles);\n  };\n\n  Renderer.prototype.disposeTemplate = function (tree, templateId, templateData) {\n    var model = this.modelProvider.getModel();\n    model.renderer.disposeTemplate(templateId, templateData);\n  };\n\n  return Renderer;\n}();\n\nexport { Renderer };","import * as platform from '../../../common/platform.js';\nimport * as errors from '../../../common/errors.js';\nimport * as dom from '../../../browser/dom.js';\nimport { createKeybinding } from '../../../common/keyCodes.js';\n\nvar KeybindingDispatcher =\n/** @class */\nfunction () {\n  function KeybindingDispatcher() {\n    this._arr = [];\n  }\n\n  KeybindingDispatcher.prototype.set = function (keybinding, callback) {\n    this._arr.push({\n      keybinding: createKeybinding(keybinding, platform.OS),\n      callback: callback\n    });\n  };\n\n  KeybindingDispatcher.prototype.dispatch = function (keybinding) {\n    // Loop from the last to the first to handle overwrites\n    for (var i = this._arr.length - 1; i >= 0; i--) {\n      var item = this._arr[i];\n\n      if (keybinding.toChord().equals(item.keybinding)) {\n        return item.callback;\n      }\n    }\n\n    return null;\n  };\n\n  return KeybindingDispatcher;\n}();\n\nexport { KeybindingDispatcher };\n\nvar DefaultController =\n/** @class */\nfunction () {\n  function DefaultController(options) {\n    var _this = this;\n\n    if (options === void 0) {\n      options = {\n        clickBehavior: 0\n        /* ON_MOUSE_DOWN */\n        ,\n        keyboardSupport: true,\n        openMode: 0\n        /* SINGLE_CLICK */\n\n      };\n    }\n\n    this.options = options;\n    this.downKeyBindingDispatcher = new KeybindingDispatcher();\n    this.upKeyBindingDispatcher = new KeybindingDispatcher();\n\n    if (typeof options.keyboardSupport !== 'boolean' || options.keyboardSupport) {\n      this.downKeyBindingDispatcher.set(16\n      /* UpArrow */\n      , function (t, e) {\n        return _this.onUp(t, e);\n      });\n      this.downKeyBindingDispatcher.set(18\n      /* DownArrow */\n      , function (t, e) {\n        return _this.onDown(t, e);\n      });\n      this.downKeyBindingDispatcher.set(15\n      /* LeftArrow */\n      , function (t, e) {\n        return _this.onLeft(t, e);\n      });\n      this.downKeyBindingDispatcher.set(17\n      /* RightArrow */\n      , function (t, e) {\n        return _this.onRight(t, e);\n      });\n\n      if (platform.isMacintosh) {\n        this.downKeyBindingDispatcher.set(2048\n        /* CtrlCmd */\n        | 16\n        /* UpArrow */\n        , function (t, e) {\n          return _this.onLeft(t, e);\n        });\n        this.downKeyBindingDispatcher.set(256\n        /* WinCtrl */\n        | 44\n        /* KEY_N */\n        , function (t, e) {\n          return _this.onDown(t, e);\n        });\n        this.downKeyBindingDispatcher.set(256\n        /* WinCtrl */\n        | 46\n        /* KEY_P */\n        , function (t, e) {\n          return _this.onUp(t, e);\n        });\n      }\n\n      this.downKeyBindingDispatcher.set(11\n      /* PageUp */\n      , function (t, e) {\n        return _this.onPageUp(t, e);\n      });\n      this.downKeyBindingDispatcher.set(12\n      /* PageDown */\n      , function (t, e) {\n        return _this.onPageDown(t, e);\n      });\n      this.downKeyBindingDispatcher.set(14\n      /* Home */\n      , function (t, e) {\n        return _this.onHome(t, e);\n      });\n      this.downKeyBindingDispatcher.set(13\n      /* End */\n      , function (t, e) {\n        return _this.onEnd(t, e);\n      });\n      this.downKeyBindingDispatcher.set(10\n      /* Space */\n      , function (t, e) {\n        return _this.onSpace(t, e);\n      });\n      this.downKeyBindingDispatcher.set(9\n      /* Escape */\n      , function (t, e) {\n        return _this.onEscape(t, e);\n      });\n      this.upKeyBindingDispatcher.set(3\n      /* Enter */\n      , this.onEnter.bind(this));\n      this.upKeyBindingDispatcher.set(2048\n      /* CtrlCmd */\n      | 3\n      /* Enter */\n      , this.onEnter.bind(this));\n    }\n  }\n\n  DefaultController.prototype.onMouseDown = function (tree, element, event, origin) {\n    if (origin === void 0) {\n      origin = 'mouse';\n    }\n\n    if (this.options.clickBehavior === 0\n    /* ON_MOUSE_DOWN */\n    && (event.leftButton || event.middleButton)) {\n      if (event.target) {\n        if (event.target.tagName && event.target.tagName.toLowerCase() === 'input') {\n          return false; // Ignore event if target is a form input field (avoids browser specific issues)\n        }\n\n        if (dom.findParentWithClass(event.target, 'scrollbar', 'monaco-tree')) {\n          return false;\n        }\n\n        if (dom.findParentWithClass(event.target, 'monaco-action-bar', 'row')) {\n          // TODO@Joao not very nice way of checking for the action bar (implicit knowledge)\n          return false; // Ignore event if target is over an action bar of the row\n        }\n      } // Propagate to onLeftClick now\n\n\n      return this.onLeftClick(tree, element, event, origin);\n    }\n\n    return false;\n  };\n\n  DefaultController.prototype.onClick = function (tree, element, event) {\n    var isMac = platform.isMacintosh; // A Ctrl click on the Mac is a context menu event\n\n    if (isMac && event.ctrlKey) {\n      event.preventDefault();\n      event.stopPropagation();\n      return false;\n    }\n\n    if (event.target && event.target.tagName && event.target.tagName.toLowerCase() === 'input') {\n      return false; // Ignore event if target is a form input field (avoids browser specific issues)\n    }\n\n    if (this.options.clickBehavior === 0\n    /* ON_MOUSE_DOWN */\n    && (event.leftButton || event.middleButton)) {\n      return false; // Already handled by onMouseDown\n    }\n\n    return this.onLeftClick(tree, element, event);\n  };\n\n  DefaultController.prototype.onLeftClick = function (tree, element, eventish, origin) {\n    if (origin === void 0) {\n      origin = 'mouse';\n    }\n\n    var event = eventish;\n    var payload = {\n      origin: origin,\n      originalEvent: eventish,\n      didClickOnTwistie: this.isClickOnTwistie(event)\n    };\n\n    if (tree.getInput() === element) {\n      tree.clearFocus(payload);\n      tree.clearSelection(payload);\n    } else {\n      var isSingleMouseDown = eventish && event.browserEvent && event.browserEvent.type === 'mousedown' && event.browserEvent.detail === 1;\n\n      if (!isSingleMouseDown) {\n        eventish.preventDefault(); // we cannot preventDefault onMouseDown with single click because this would break DND otherwise\n      }\n\n      eventish.stopPropagation();\n      tree.domFocus();\n      tree.setSelection([element], payload);\n      tree.setFocus(element, payload);\n\n      if (this.shouldToggleExpansion(element, event, origin)) {\n        if (tree.isExpanded(element)) {\n          tree.collapse(element).then(undefined, errors.onUnexpectedError);\n        } else {\n          tree.expand(element).then(undefined, errors.onUnexpectedError);\n        }\n      }\n    }\n\n    return true;\n  };\n\n  DefaultController.prototype.shouldToggleExpansion = function (element, event, origin) {\n    var isDoubleClick = origin === 'mouse' && event.detail === 2;\n    return this.openOnSingleClick || isDoubleClick || this.isClickOnTwistie(event);\n  };\n\n  Object.defineProperty(DefaultController.prototype, \"openOnSingleClick\", {\n    get: function get() {\n      return this.options.openMode === 0\n      /* SINGLE_CLICK */\n      ;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  DefaultController.prototype.isClickOnTwistie = function (event) {\n    var element = event.target;\n\n    if (!dom.hasClass(element, 'content')) {\n      return false;\n    }\n\n    var twistieStyle = window.getComputedStyle(element, ':before');\n\n    if (twistieStyle.backgroundImage === 'none' || twistieStyle.display === 'none') {\n      return false;\n    }\n\n    var twistieWidth = parseInt(twistieStyle.width) + parseInt(twistieStyle.paddingRight);\n    return event.browserEvent.offsetX <= twistieWidth;\n  };\n\n  DefaultController.prototype.onContextMenu = function (tree, element, event) {\n    if (event.target && event.target.tagName && event.target.tagName.toLowerCase() === 'input') {\n      return false; // allow context menu on input fields\n    } // Prevent native context menu from showing up\n\n\n    if (event) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n\n    return false;\n  };\n\n  DefaultController.prototype.onTap = function (tree, element, event) {\n    var target = event.initialTarget;\n\n    if (target && target.tagName && target.tagName.toLowerCase() === 'input') {\n      return false; // Ignore event if target is a form input field (avoids browser specific issues)\n    }\n\n    return this.onLeftClick(tree, element, event, 'touch');\n  };\n\n  DefaultController.prototype.onKeyDown = function (tree, event) {\n    return this.onKey(this.downKeyBindingDispatcher, tree, event);\n  };\n\n  DefaultController.prototype.onKeyUp = function (tree, event) {\n    return this.onKey(this.upKeyBindingDispatcher, tree, event);\n  };\n\n  DefaultController.prototype.onKey = function (bindings, tree, event) {\n    var handler = bindings.dispatch(event.toKeybinding());\n\n    if (handler) {\n      // TODO: TS 3.1 upgrade. Why are we checking against void?\n      if (handler(tree, event)) {\n        event.preventDefault();\n        event.stopPropagation();\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  DefaultController.prototype.onUp = function (tree, event) {\n    var payload = {\n      origin: 'keyboard',\n      originalEvent: event\n    };\n\n    if (tree.getHighlight()) {\n      tree.clearHighlight(payload);\n    } else {\n      tree.focusPrevious(1, payload);\n      tree.reveal(tree.getFocus()).then(undefined, errors.onUnexpectedError);\n    }\n\n    return true;\n  };\n\n  DefaultController.prototype.onPageUp = function (tree, event) {\n    var payload = {\n      origin: 'keyboard',\n      originalEvent: event\n    };\n\n    if (tree.getHighlight()) {\n      tree.clearHighlight(payload);\n    } else {\n      tree.focusPreviousPage(payload);\n      tree.reveal(tree.getFocus()).then(undefined, errors.onUnexpectedError);\n    }\n\n    return true;\n  };\n\n  DefaultController.prototype.onDown = function (tree, event) {\n    var payload = {\n      origin: 'keyboard',\n      originalEvent: event\n    };\n\n    if (tree.getHighlight()) {\n      tree.clearHighlight(payload);\n    } else {\n      tree.focusNext(1, payload);\n      tree.reveal(tree.getFocus()).then(undefined, errors.onUnexpectedError);\n    }\n\n    return true;\n  };\n\n  DefaultController.prototype.onPageDown = function (tree, event) {\n    var payload = {\n      origin: 'keyboard',\n      originalEvent: event\n    };\n\n    if (tree.getHighlight()) {\n      tree.clearHighlight(payload);\n    } else {\n      tree.focusNextPage(payload);\n      tree.reveal(tree.getFocus()).then(undefined, errors.onUnexpectedError);\n    }\n\n    return true;\n  };\n\n  DefaultController.prototype.onHome = function (tree, event) {\n    var payload = {\n      origin: 'keyboard',\n      originalEvent: event\n    };\n\n    if (tree.getHighlight()) {\n      tree.clearHighlight(payload);\n    } else {\n      tree.focusFirst(payload);\n      tree.reveal(tree.getFocus()).then(undefined, errors.onUnexpectedError);\n    }\n\n    return true;\n  };\n\n  DefaultController.prototype.onEnd = function (tree, event) {\n    var payload = {\n      origin: 'keyboard',\n      originalEvent: event\n    };\n\n    if (tree.getHighlight()) {\n      tree.clearHighlight(payload);\n    } else {\n      tree.focusLast(payload);\n      tree.reveal(tree.getFocus()).then(undefined, errors.onUnexpectedError);\n    }\n\n    return true;\n  };\n\n  DefaultController.prototype.onLeft = function (tree, event) {\n    var payload = {\n      origin: 'keyboard',\n      originalEvent: event\n    };\n\n    if (tree.getHighlight()) {\n      tree.clearHighlight(payload);\n    } else {\n      var focus_1 = tree.getFocus();\n      tree.collapse(focus_1).then(function (didCollapse) {\n        if (focus_1 && !didCollapse) {\n          tree.focusParent(payload);\n          return tree.reveal(tree.getFocus());\n        }\n\n        return undefined;\n      }).then(undefined, errors.onUnexpectedError);\n    }\n\n    return true;\n  };\n\n  DefaultController.prototype.onRight = function (tree, event) {\n    var payload = {\n      origin: 'keyboard',\n      originalEvent: event\n    };\n\n    if (tree.getHighlight()) {\n      tree.clearHighlight(payload);\n    } else {\n      var focus_2 = tree.getFocus();\n      tree.expand(focus_2).then(function (didExpand) {\n        if (focus_2 && !didExpand) {\n          tree.focusFirstChild(payload);\n          return tree.reveal(tree.getFocus());\n        }\n\n        return undefined;\n      }).then(undefined, errors.onUnexpectedError);\n    }\n\n    return true;\n  };\n\n  DefaultController.prototype.onEnter = function (tree, event) {\n    var payload = {\n      origin: 'keyboard',\n      originalEvent: event\n    };\n\n    if (tree.getHighlight()) {\n      return false;\n    }\n\n    var focus = tree.getFocus();\n\n    if (focus) {\n      tree.setSelection([focus], payload);\n    }\n\n    return true;\n  };\n\n  DefaultController.prototype.onSpace = function (tree, event) {\n    if (tree.getHighlight()) {\n      return false;\n    }\n\n    var focus = tree.getFocus();\n\n    if (focus) {\n      tree.toggleExpansion(focus);\n    }\n\n    return true;\n  };\n\n  DefaultController.prototype.onEscape = function (tree, event) {\n    var payload = {\n      origin: 'keyboard',\n      originalEvent: event\n    };\n\n    if (tree.getHighlight()) {\n      tree.clearHighlight(payload);\n      return true;\n    }\n\n    if (tree.getSelection().length) {\n      tree.clearSelection(payload);\n      return true;\n    }\n\n    if (tree.getFocus()) {\n      tree.clearFocus(payload);\n      return true;\n    }\n\n    return false;\n  };\n\n  return DefaultController;\n}();\n\nexport { DefaultController };\n\nvar DefaultDragAndDrop =\n/** @class */\nfunction () {\n  function DefaultDragAndDrop() {}\n\n  DefaultDragAndDrop.prototype.getDragURI = function (tree, element) {\n    return null;\n  };\n\n  DefaultDragAndDrop.prototype.onDragStart = function (tree, data, originalEvent) {\n    return;\n  };\n\n  DefaultDragAndDrop.prototype.onDragOver = function (tree, data, targetElement, originalEvent) {\n    return null;\n  };\n\n  DefaultDragAndDrop.prototype.drop = function (tree, data, targetElement, originalEvent) {\n    return;\n  };\n\n  return DefaultDragAndDrop;\n}();\n\nexport { DefaultDragAndDrop };\n\nvar DefaultFilter =\n/** @class */\nfunction () {\n  function DefaultFilter() {}\n\n  DefaultFilter.prototype.isVisible = function (tree, element) {\n    return true;\n  };\n\n  return DefaultFilter;\n}();\n\nexport { DefaultFilter };\n\nvar DefaultAccessibilityProvider =\n/** @class */\nfunction () {\n  function DefaultAccessibilityProvider() {}\n\n  DefaultAccessibilityProvider.prototype.getAriaLabel = function (tree, element) {\n    return null;\n  };\n\n  return DefaultAccessibilityProvider;\n}();\n\nexport { DefaultAccessibilityProvider };\n\nvar DefaultTreestyler =\n/** @class */\nfunction () {\n  function DefaultTreestyler(styleElement, selectorSuffix) {\n    this.styleElement = styleElement;\n    this.selectorSuffix = selectorSuffix;\n  }\n\n  DefaultTreestyler.prototype.style = function (styles) {\n    var suffix = this.selectorSuffix ? \".\" + this.selectorSuffix : '';\n    var content = [];\n\n    if (styles.listFocusBackground) {\n      content.push(\".monaco-tree\" + suffix + \".focused .monaco-tree-rows > .monaco-tree-row.focused:not(.highlighted) { background-color: \" + styles.listFocusBackground + \"; }\");\n    }\n\n    if (styles.listFocusForeground) {\n      content.push(\".monaco-tree\" + suffix + \".focused .monaco-tree-rows > .monaco-tree-row.focused:not(.highlighted) { color: \" + styles.listFocusForeground + \"; }\");\n    }\n\n    if (styles.listActiveSelectionBackground) {\n      content.push(\".monaco-tree\" + suffix + \".focused .monaco-tree-rows > .monaco-tree-row.selected:not(.highlighted) { background-color: \" + styles.listActiveSelectionBackground + \"; }\");\n    }\n\n    if (styles.listActiveSelectionForeground) {\n      content.push(\".monaco-tree\" + suffix + \".focused .monaco-tree-rows > .monaco-tree-row.selected:not(.highlighted) { color: \" + styles.listActiveSelectionForeground + \"; }\");\n    }\n\n    if (styles.listFocusAndSelectionBackground) {\n      content.push(\"\\n\\t\\t\\t\\t.monaco-tree-drag-image,\\n\\t\\t\\t\\t.monaco-tree\" + suffix + \".focused .monaco-tree-rows > .monaco-tree-row.focused.selected:not(.highlighted) { background-color: \" + styles.listFocusAndSelectionBackground + \"; }\\n\\t\\t\\t\");\n    }\n\n    if (styles.listFocusAndSelectionForeground) {\n      content.push(\"\\n\\t\\t\\t\\t.monaco-tree-drag-image,\\n\\t\\t\\t\\t.monaco-tree\" + suffix + \".focused .monaco-tree-rows > .monaco-tree-row.focused.selected:not(.highlighted) { color: \" + styles.listFocusAndSelectionForeground + \"; }\\n\\t\\t\\t\");\n    }\n\n    if (styles.listInactiveSelectionBackground) {\n      content.push(\".monaco-tree\" + suffix + \" .monaco-tree-rows > .monaco-tree-row.selected:not(.highlighted) { background-color: \" + styles.listInactiveSelectionBackground + \"; }\");\n    }\n\n    if (styles.listInactiveSelectionForeground) {\n      content.push(\".monaco-tree\" + suffix + \" .monaco-tree-rows > .monaco-tree-row.selected:not(.highlighted) { color: \" + styles.listInactiveSelectionForeground + \"; }\");\n    }\n\n    if (styles.listHoverBackground) {\n      content.push(\".monaco-tree\" + suffix + \" .monaco-tree-rows > .monaco-tree-row:hover:not(.highlighted):not(.selected):not(.focused) { background-color: \" + styles.listHoverBackground + \"; }\");\n    }\n\n    if (styles.listHoverForeground) {\n      content.push(\".monaco-tree\" + suffix + \" .monaco-tree-rows > .monaco-tree-row:hover:not(.highlighted):not(.selected):not(.focused) { color: \" + styles.listHoverForeground + \"; }\");\n    }\n\n    if (styles.listDropBackground) {\n      content.push(\"\\n\\t\\t\\t\\t.monaco-tree\" + suffix + \" .monaco-tree-wrapper.drop-target,\\n\\t\\t\\t\\t.monaco-tree\" + suffix + \" .monaco-tree-rows > .monaco-tree-row.drop-target { background-color: \" + styles.listDropBackground + \" !important; color: inherit !important; }\\n\\t\\t\\t\");\n    }\n\n    if (styles.listFocusOutline) {\n      content.push(\"\\n\\t\\t\\t\\t.monaco-tree-drag-image\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{ border: 1px solid \" + styles.listFocusOutline + \"; background: #000; }\\n\\t\\t\\t\\t.monaco-tree\" + suffix + \" .monaco-tree-rows > .monaco-tree-row \\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{ border: 1px solid transparent; }\\n\\t\\t\\t\\t.monaco-tree\" + suffix + \".focused .monaco-tree-rows > .monaco-tree-row.focused:not(.highlighted) \\t\\t\\t\\t\\t\\t{ border: 1px dotted \" + styles.listFocusOutline + \"; }\\n\\t\\t\\t\\t.monaco-tree\" + suffix + \".focused .monaco-tree-rows > .monaco-tree-row.selected:not(.highlighted) \\t\\t\\t\\t\\t\\t{ border: 1px solid \" + styles.listFocusOutline + \"; }\\n\\t\\t\\t\\t.monaco-tree\" + suffix + \" .monaco-tree-rows > .monaco-tree-row.selected:not(.highlighted)  \\t\\t\\t\\t\\t\\t\\t{ border: 1px solid \" + styles.listFocusOutline + \"; }\\n\\t\\t\\t\\t.monaco-tree\" + suffix + \" .monaco-tree-rows > .monaco-tree-row:hover:not(.highlighted):not(.selected):not(.focused)  \\t{ border: 1px dashed \" + styles.listFocusOutline + \"; }\\n\\t\\t\\t\\t.monaco-tree\" + suffix + \" .monaco-tree-wrapper.drop-target,\\n\\t\\t\\t\\t.monaco-tree\" + suffix + \" .monaco-tree-rows > .monaco-tree-row.drop-target\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{ border: 1px dashed \" + styles.listFocusOutline + \"; }\\n\\t\\t\\t\");\n    }\n\n    var newStyles = content.join('\\n');\n\n    if (newStyles !== this.styleElement.innerHTML) {\n      this.styleElement.innerHTML = newStyles;\n    }\n  };\n\n  return DefaultTreestyler;\n}();\n\nexport { DefaultTreestyler };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport * as Assert from '../../../common/assert.js';\nimport { onUnexpectedError } from '../../../common/errors.js';\nimport { combinedDisposable } from '../../../common/lifecycle.js';\nimport { Event, Emitter, EventMultiplexer, Relay } from '../../../common/event.js';\n\nvar LockData =\n/** @class */\nfunction () {\n  function LockData(item) {\n    this._onDispose = new Emitter();\n    this.onDispose = this._onDispose.event;\n    this._item = item;\n  }\n\n  Object.defineProperty(LockData.prototype, \"item\", {\n    get: function get() {\n      return this._item;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  LockData.prototype.dispose = function () {\n    if (this._onDispose) {\n      this._onDispose.fire();\n\n      this._onDispose.dispose();\n\n      this._onDispose = undefined;\n    }\n  };\n\n  return LockData;\n}();\n\nexport { LockData };\n\nvar Lock =\n/** @class */\nfunction () {\n  function Lock() {\n    this.locks = Object.create({});\n  }\n\n  Lock.prototype.isLocked = function (item) {\n    return !!this.locks[item.id];\n  };\n\n  Lock.prototype.run = function (item, fn) {\n    var _this = this;\n\n    var lock = this.getLock(item);\n\n    if (lock) {\n      return new Promise(function (c, e) {\n        Event.once(lock.onDispose)(function () {\n          return _this.run(item, fn).then(c, e);\n        });\n      });\n    }\n\n    var result;\n    return new Promise(function (c, e) {\n      if (item.isDisposed()) {\n        return e(new Error('Item is disposed.'));\n      }\n\n      var lock = _this.locks[item.id] = new LockData(item);\n      result = fn().then(function (r) {\n        delete _this.locks[item.id];\n        lock.dispose();\n        return r;\n      }).then(c, e);\n      return result;\n    });\n  };\n\n  Lock.prototype.getLock = function (item) {\n    var key;\n\n    for (key in this.locks) {\n      var lock = this.locks[key];\n\n      if (item.intersects(lock.item)) {\n        return lock;\n      }\n    }\n\n    return null;\n  };\n\n  return Lock;\n}();\n\nexport { Lock };\n\nvar ItemRegistry =\n/** @class */\nfunction () {\n  function ItemRegistry() {\n    this._isDisposed = false;\n    this._onDidRevealItem = new EventMultiplexer();\n    this.onDidRevealItem = this._onDidRevealItem.event;\n    this._onExpandItem = new EventMultiplexer();\n    this.onExpandItem = this._onExpandItem.event;\n    this._onDidExpandItem = new EventMultiplexer();\n    this.onDidExpandItem = this._onDidExpandItem.event;\n    this._onCollapseItem = new EventMultiplexer();\n    this.onCollapseItem = this._onCollapseItem.event;\n    this._onDidCollapseItem = new EventMultiplexer();\n    this.onDidCollapseItem = this._onDidCollapseItem.event;\n    this._onDidAddTraitItem = new EventMultiplexer();\n    this.onDidAddTraitItem = this._onDidAddTraitItem.event;\n    this._onDidRemoveTraitItem = new EventMultiplexer();\n    this.onDidRemoveTraitItem = this._onDidRemoveTraitItem.event;\n    this._onDidRefreshItem = new EventMultiplexer();\n    this.onDidRefreshItem = this._onDidRefreshItem.event;\n    this._onRefreshItemChildren = new EventMultiplexer();\n    this.onRefreshItemChildren = this._onRefreshItemChildren.event;\n    this._onDidRefreshItemChildren = new EventMultiplexer();\n    this.onDidRefreshItemChildren = this._onDidRefreshItemChildren.event;\n    this._onDidDisposeItem = new EventMultiplexer();\n    this.onDidDisposeItem = this._onDidDisposeItem.event;\n    this.items = {};\n  }\n\n  ItemRegistry.prototype.register = function (item) {\n    Assert.ok(!this.isRegistered(item.id), 'item already registered: ' + item.id);\n    var disposable = combinedDisposable([this._onDidRevealItem.add(item.onDidReveal), this._onExpandItem.add(item.onExpand), this._onDidExpandItem.add(item.onDidExpand), this._onCollapseItem.add(item.onCollapse), this._onDidCollapseItem.add(item.onDidCollapse), this._onDidAddTraitItem.add(item.onDidAddTrait), this._onDidRemoveTraitItem.add(item.onDidRemoveTrait), this._onDidRefreshItem.add(item.onDidRefresh), this._onRefreshItemChildren.add(item.onRefreshChildren), this._onDidRefreshItemChildren.add(item.onDidRefreshChildren), this._onDidDisposeItem.add(item.onDidDispose)]);\n    this.items[item.id] = {\n      item: item,\n      disposable: disposable\n    };\n  };\n\n  ItemRegistry.prototype.deregister = function (item) {\n    Assert.ok(this.isRegistered(item.id), 'item not registered: ' + item.id);\n    this.items[item.id].disposable.dispose();\n    delete this.items[item.id];\n  };\n\n  ItemRegistry.prototype.isRegistered = function (id) {\n    return this.items.hasOwnProperty(id);\n  };\n\n  ItemRegistry.prototype.getItem = function (id) {\n    var result = this.items[id];\n    return result ? result.item : null;\n  };\n\n  ItemRegistry.prototype.dispose = function () {\n    this.items = null; // StrictNullOverride: nulling out ok in dispose\n\n    this._onDidRevealItem.dispose();\n\n    this._onExpandItem.dispose();\n\n    this._onDidExpandItem.dispose();\n\n    this._onCollapseItem.dispose();\n\n    this._onDidCollapseItem.dispose();\n\n    this._onDidAddTraitItem.dispose();\n\n    this._onDidRemoveTraitItem.dispose();\n\n    this._onDidRefreshItem.dispose();\n\n    this._onRefreshItemChildren.dispose();\n\n    this._onDidRefreshItemChildren.dispose();\n\n    this._isDisposed = true;\n  };\n\n  ItemRegistry.prototype.isDisposed = function () {\n    return this._isDisposed;\n  };\n\n  return ItemRegistry;\n}();\n\nexport { ItemRegistry };\n\nvar Item =\n/** @class */\nfunction () {\n  function Item(id, registry, context, lock, element) {\n    this._onDidCreate = new Emitter();\n    this._onDidReveal = new Emitter();\n    this.onDidReveal = this._onDidReveal.event;\n    this._onExpand = new Emitter();\n    this.onExpand = this._onExpand.event;\n    this._onDidExpand = new Emitter();\n    this.onDidExpand = this._onDidExpand.event;\n    this._onCollapse = new Emitter();\n    this.onCollapse = this._onCollapse.event;\n    this._onDidCollapse = new Emitter();\n    this.onDidCollapse = this._onDidCollapse.event;\n    this._onDidAddTrait = new Emitter();\n    this.onDidAddTrait = this._onDidAddTrait.event;\n    this._onDidRemoveTrait = new Emitter();\n    this.onDidRemoveTrait = this._onDidRemoveTrait.event;\n    this._onDidRefresh = new Emitter();\n    this.onDidRefresh = this._onDidRefresh.event;\n    this._onRefreshChildren = new Emitter();\n    this.onRefreshChildren = this._onRefreshChildren.event;\n    this._onDidRefreshChildren = new Emitter();\n    this.onDidRefreshChildren = this._onDidRefreshChildren.event;\n    this._onDidDispose = new Emitter();\n    this.onDidDispose = this._onDidDispose.event;\n    this.registry = registry;\n    this.context = context;\n    this.lock = lock;\n    this.element = element;\n    this.id = id;\n    this.registry.register(this);\n    this.doesHaveChildren = this.context.dataSource.hasChildren(this.context.tree, this.element);\n    this.needsChildrenRefresh = true;\n    this.parent = null;\n    this.previous = null;\n    this.next = null;\n    this.firstChild = null;\n    this.lastChild = null;\n    this.traits = {};\n    this.depth = 0;\n    this.expanded = !!(this.context.dataSource.shouldAutoexpand && this.context.dataSource.shouldAutoexpand(this.context.tree, element));\n\n    this._onDidCreate.fire(this);\n\n    this.visible = this._isVisible();\n    this.height = this._getHeight();\n    this._isDisposed = false;\n  }\n\n  Item.prototype.getElement = function () {\n    return this.element;\n  };\n\n  Item.prototype.hasChildren = function () {\n    return this.doesHaveChildren;\n  };\n\n  Item.prototype.getDepth = function () {\n    return this.depth;\n  };\n\n  Item.prototype.isVisible = function () {\n    return this.visible;\n  };\n\n  Item.prototype.setVisible = function (value) {\n    this.visible = value;\n  };\n\n  Item.prototype.isExpanded = function () {\n    return this.expanded;\n  };\n  /* protected */\n\n\n  Item.prototype._setExpanded = function (value) {\n    this.expanded = value;\n  };\n\n  Item.prototype.reveal = function (relativeTop) {\n    if (relativeTop === void 0) {\n      relativeTop = null;\n    }\n\n    var eventData = {\n      item: this,\n      relativeTop: relativeTop\n    };\n\n    this._onDidReveal.fire(eventData);\n  };\n\n  Item.prototype.expand = function () {\n    var _this = this;\n\n    if (this.isExpanded() || !this.doesHaveChildren || this.lock.isLocked(this)) {\n      return Promise.resolve(false);\n    }\n\n    var result = this.lock.run(this, function () {\n      if (_this.isExpanded() || !_this.doesHaveChildren) {\n        return Promise.resolve(false);\n      }\n\n      var eventData = {\n        item: _this\n      };\n      var result;\n\n      _this._onExpand.fire(eventData);\n\n      if (_this.needsChildrenRefresh) {\n        result = _this.refreshChildren(false, true, true);\n      } else {\n        result = Promise.resolve(null);\n      }\n\n      return result.then(function () {\n        _this._setExpanded(true);\n\n        _this._onDidExpand.fire(eventData);\n\n        return true;\n      });\n    });\n    return result.then(function (r) {\n      if (_this.isDisposed()) {\n        return false;\n      } // Auto expand single child folders\n\n\n      if (_this.context.options.autoExpandSingleChildren && r && _this.firstChild !== null && _this.firstChild === _this.lastChild && _this.firstChild.isVisible()) {\n        return _this.firstChild.expand().then(function () {\n          return true;\n        });\n      }\n\n      return r;\n    });\n  };\n\n  Item.prototype.collapse = function (recursive) {\n    var _this = this;\n\n    if (recursive === void 0) {\n      recursive = false;\n    }\n\n    if (recursive) {\n      var collapseChildrenPromise_1 = Promise.resolve(null);\n      this.forEachChild(function (child) {\n        collapseChildrenPromise_1 = collapseChildrenPromise_1.then(function () {\n          return child.collapse(true);\n        });\n      });\n      return collapseChildrenPromise_1.then(function () {\n        return _this.collapse(false);\n      });\n    } else {\n      if (!this.isExpanded() || this.lock.isLocked(this)) {\n        return Promise.resolve(false);\n      }\n\n      return this.lock.run(this, function () {\n        var eventData = {\n          item: _this\n        };\n\n        _this._onCollapse.fire(eventData);\n\n        _this._setExpanded(false);\n\n        _this._onDidCollapse.fire(eventData);\n\n        return Promise.resolve(true);\n      });\n    }\n  };\n\n  Item.prototype.addTrait = function (trait) {\n    var eventData = {\n      item: this,\n      trait: trait\n    };\n    this.traits[trait] = true;\n\n    this._onDidAddTrait.fire(eventData);\n  };\n\n  Item.prototype.removeTrait = function (trait) {\n    var eventData = {\n      item: this,\n      trait: trait\n    };\n    delete this.traits[trait];\n\n    this._onDidRemoveTrait.fire(eventData);\n  };\n\n  Item.prototype.hasTrait = function (trait) {\n    return this.traits[trait] || false;\n  };\n\n  Item.prototype.getAllTraits = function () {\n    var result = [];\n    var trait;\n\n    for (trait in this.traits) {\n      if (this.traits.hasOwnProperty(trait) && this.traits[trait]) {\n        result.push(trait);\n      }\n    }\n\n    return result;\n  };\n\n  Item.prototype.getHeight = function () {\n    return this.height;\n  };\n\n  Item.prototype.refreshChildren = function (recursive, safe, force) {\n    var _this = this;\n\n    if (safe === void 0) {\n      safe = false;\n    }\n\n    if (force === void 0) {\n      force = false;\n    }\n\n    if (!force && !this.isExpanded()) {\n      var setNeedsChildrenRefresh_1 = function setNeedsChildrenRefresh_1(item) {\n        item.needsChildrenRefresh = true;\n        item.forEachChild(setNeedsChildrenRefresh_1);\n      };\n\n      setNeedsChildrenRefresh_1(this);\n      return Promise.resolve(this);\n    }\n\n    this.needsChildrenRefresh = false;\n\n    var doRefresh = function doRefresh() {\n      var eventData = {\n        item: _this,\n        isNested: safe\n      };\n\n      _this._onRefreshChildren.fire(eventData);\n\n      var childrenPromise;\n\n      if (_this.doesHaveChildren) {\n        childrenPromise = _this.context.dataSource.getChildren(_this.context.tree, _this.element);\n      } else {\n        childrenPromise = Promise.resolve([]);\n      }\n\n      var result = childrenPromise.then(function (elements) {\n        if (_this.isDisposed() || _this.registry.isDisposed()) {\n          return Promise.resolve(null);\n        }\n\n        if (!Array.isArray(elements)) {\n          return Promise.reject(new Error('Please return an array of children.'));\n        }\n\n        elements = !elements ? [] : elements.slice(0);\n        elements = _this.sort(elements);\n        var staleItems = {};\n\n        while (_this.firstChild !== null) {\n          staleItems[_this.firstChild.id] = _this.firstChild;\n\n          _this.removeChild(_this.firstChild);\n        }\n\n        for (var i = 0, len = elements.length; i < len; i++) {\n          var element = elements[i];\n\n          var id = _this.context.dataSource.getId(_this.context.tree, element);\n\n          var item = staleItems[id] || new Item(id, _this.registry, _this.context, _this.lock, element);\n          item.element = element;\n\n          if (recursive) {\n            item.needsChildrenRefresh = recursive;\n          }\n\n          delete staleItems[id];\n\n          _this.addChild(item);\n        }\n\n        for (var staleItemId in staleItems) {\n          if (staleItems.hasOwnProperty(staleItemId)) {\n            staleItems[staleItemId].dispose();\n          }\n        }\n\n        if (recursive) {\n          return Promise.all(_this.mapEachChild(function (child) {\n            return child.doRefresh(recursive, true);\n          }));\n        } else {\n          return Promise.all(_this.mapEachChild(function (child) {\n            if (child.isExpanded() && child.needsChildrenRefresh) {\n              return child.doRefresh(recursive, true);\n            } else {\n              child.updateVisibility();\n              return Promise.resolve(null);\n            }\n          }));\n        }\n      });\n      return result.then(undefined, onUnexpectedError).then(function () {\n        return _this._onDidRefreshChildren.fire(eventData);\n      });\n    };\n\n    return safe ? doRefresh() : this.lock.run(this, doRefresh);\n  };\n\n  Item.prototype.doRefresh = function (recursive, safe) {\n    if (safe === void 0) {\n      safe = false;\n    }\n\n    this.doesHaveChildren = this.context.dataSource.hasChildren(this.context.tree, this.element);\n    this.height = this._getHeight();\n    this.updateVisibility();\n\n    this._onDidRefresh.fire(this);\n\n    return this.refreshChildren(recursive, safe);\n  };\n\n  Item.prototype.updateVisibility = function () {\n    this.setVisible(this._isVisible());\n  };\n\n  Item.prototype.refresh = function (recursive) {\n    return this.doRefresh(recursive);\n  };\n\n  Item.prototype.getNavigator = function () {\n    return new TreeNavigator(this);\n  };\n\n  Item.prototype.intersects = function (other) {\n    return this.isAncestorOf(other) || other.isAncestorOf(this);\n  };\n\n  Item.prototype.isAncestorOf = function (startItem) {\n    var item = startItem;\n\n    while (item) {\n      if (item.id === this.id) {\n        return true;\n      }\n\n      item = item.parent;\n    }\n\n    return false;\n  };\n\n  Item.prototype.addChild = function (item, afterItem) {\n    if (afterItem === void 0) {\n      afterItem = this.lastChild;\n    }\n\n    var isEmpty = this.firstChild === null;\n    var atHead = afterItem === null;\n    var atTail = afterItem === this.lastChild;\n\n    if (isEmpty) {\n      this.firstChild = this.lastChild = item;\n      item.next = item.previous = null;\n    } else if (atHead) {\n      if (!this.firstChild) {\n        throw new Error('Invalid tree state');\n      }\n\n      this.firstChild.previous = item;\n      item.next = this.firstChild;\n      item.previous = null;\n      this.firstChild = item;\n    } else if (atTail) {\n      if (!this.lastChild) {\n        throw new Error('Invalid tree state');\n      }\n\n      this.lastChild.next = item;\n      item.next = null;\n      item.previous = this.lastChild;\n      this.lastChild = item;\n    } else {\n      item.previous = afterItem;\n\n      if (!afterItem) {\n        throw new Error('Invalid tree state');\n      }\n\n      item.next = afterItem.next;\n\n      if (!afterItem.next) {\n        throw new Error('Invalid tree state');\n      }\n\n      afterItem.next.previous = item;\n      afterItem.next = item;\n    }\n\n    item.parent = this;\n    item.depth = this.depth + 1;\n  };\n\n  Item.prototype.removeChild = function (item) {\n    var isFirstChild = this.firstChild === item;\n    var isLastChild = this.lastChild === item;\n\n    if (isFirstChild && isLastChild) {\n      this.firstChild = this.lastChild = null;\n    } else if (isFirstChild) {\n      if (!item.next) {\n        throw new Error('Invalid tree state');\n      }\n\n      item.next.previous = null;\n      this.firstChild = item.next;\n    } else if (isLastChild) {\n      if (!item.previous) {\n        throw new Error('Invalid tree state');\n      }\n\n      item.previous.next = null;\n      this.lastChild = item.previous;\n    } else {\n      if (!item.next) {\n        throw new Error('Invalid tree state');\n      }\n\n      item.next.previous = item.previous;\n\n      if (!item.previous) {\n        throw new Error('Invalid tree state');\n      }\n\n      item.previous.next = item.next;\n    }\n\n    item.parent = null;\n    item.depth = NaN;\n  };\n\n  Item.prototype.forEachChild = function (fn) {\n    var child = this.firstChild;\n    var next;\n\n    while (child) {\n      next = child.next;\n      fn(child);\n      child = next;\n    }\n  };\n\n  Item.prototype.mapEachChild = function (fn) {\n    var result = [];\n    this.forEachChild(function (child) {\n      result.push(fn(child));\n    });\n    return result;\n  };\n\n  Item.prototype.sort = function (elements) {\n    var _this = this;\n\n    var sorter = this.context.sorter;\n\n    if (sorter) {\n      return elements.sort(function (element, otherElement) {\n        return sorter.compare(_this.context.tree, element, otherElement);\n      });\n    }\n\n    return elements;\n  };\n  /* protected */\n\n\n  Item.prototype._getHeight = function () {\n    if (!this.context.renderer) {\n      return 0;\n    }\n\n    return this.context.renderer.getHeight(this.context.tree, this.element);\n  };\n  /* protected */\n\n\n  Item.prototype._isVisible = function () {\n    if (!this.context.filter) {\n      return false;\n    }\n\n    return this.context.filter.isVisible(this.context.tree, this.element);\n  };\n\n  Item.prototype.isDisposed = function () {\n    return this._isDisposed;\n  };\n\n  Item.prototype.dispose = function () {\n    this.forEachChild(function (child) {\n      return child.dispose();\n    });\n    this.parent = null;\n    this.previous = null;\n    this.next = null;\n    this.firstChild = null;\n    this.lastChild = null;\n\n    this._onDidDispose.fire(this);\n\n    this.registry.deregister(this);\n\n    this._onDidCreate.dispose();\n\n    this._onDidReveal.dispose();\n\n    this._onExpand.dispose();\n\n    this._onDidExpand.dispose();\n\n    this._onCollapse.dispose();\n\n    this._onDidCollapse.dispose();\n\n    this._onDidAddTrait.dispose();\n\n    this._onDidRemoveTrait.dispose();\n\n    this._onDidRefresh.dispose();\n\n    this._onRefreshChildren.dispose();\n\n    this._onDidRefreshChildren.dispose();\n\n    this._onDidDispose.dispose();\n\n    this._isDisposed = true;\n  };\n\n  return Item;\n}();\n\nexport { Item };\n\nvar RootItem =\n/** @class */\nfunction (_super) {\n  __extends(RootItem, _super);\n\n  function RootItem(id, registry, context, lock, element) {\n    return _super.call(this, id, registry, context, lock, element) || this;\n  }\n\n  RootItem.prototype.isVisible = function () {\n    return false;\n  };\n\n  RootItem.prototype.setVisible = function (value) {// no-op\n  };\n\n  RootItem.prototype.isExpanded = function () {\n    return true;\n  };\n  /* protected */\n\n\n  RootItem.prototype._setExpanded = function (value) {// no-op\n  };\n  /* protected */\n\n\n  RootItem.prototype._getHeight = function () {\n    return 0;\n  };\n  /* protected */\n\n\n  RootItem.prototype._isVisible = function () {\n    return false;\n  };\n\n  return RootItem;\n}(Item);\n\nvar TreeNavigator =\n/** @class */\nfunction () {\n  function TreeNavigator(item, subTreeOnly) {\n    if (subTreeOnly === void 0) {\n      subTreeOnly = true;\n    }\n\n    this.item = item;\n    this.start = subTreeOnly ? item : null;\n  }\n\n  TreeNavigator.lastDescendantOf = function (item) {\n    if (!item) {\n      return null;\n    }\n\n    if (item instanceof RootItem) {\n      return TreeNavigator.lastDescendantOf(item.lastChild);\n    }\n\n    if (!item.isVisible()) {\n      return TreeNavigator.lastDescendantOf(item.previous);\n    }\n\n    if (!item.isExpanded() || item.lastChild === null) {\n      return item;\n    }\n\n    return TreeNavigator.lastDescendantOf(item.lastChild);\n  };\n\n  TreeNavigator.prototype.current = function () {\n    return this.item || null;\n  };\n\n  TreeNavigator.prototype.next = function () {\n    if (this.item) {\n      do {\n        if ((this.item instanceof RootItem || this.item.isVisible() && this.item.isExpanded()) && this.item.firstChild) {\n          this.item = this.item.firstChild;\n        } else if (this.item === this.start) {\n          this.item = null;\n        } else {\n          // select next brother, next uncle, next great-uncle, etc...\n          while (this.item && this.item !== this.start && !this.item.next) {\n            this.item = this.item.parent;\n          }\n\n          if (this.item === this.start) {\n            this.item = null;\n          }\n\n          this.item = !this.item ? null : this.item.next;\n        }\n      } while (this.item && !this.item.isVisible());\n    }\n\n    return this.item || null;\n  };\n\n  TreeNavigator.prototype.previous = function () {\n    if (this.item) {\n      do {\n        var previous = TreeNavigator.lastDescendantOf(this.item.previous);\n\n        if (previous) {\n          this.item = previous;\n        } else if (this.item.parent && this.item.parent !== this.start && this.item.parent.isVisible()) {\n          this.item = this.item.parent;\n        } else {\n          this.item = null;\n        }\n      } while (this.item && !this.item.isVisible());\n    }\n\n    return this.item || null;\n  };\n\n  TreeNavigator.prototype.parent = function () {\n    if (this.item) {\n      var parent_1 = this.item.parent;\n\n      if (parent_1 && parent_1 !== this.start && parent_1.isVisible()) {\n        this.item = parent_1;\n      } else {\n        this.item = null;\n      }\n    }\n\n    return this.item || null;\n  };\n\n  TreeNavigator.prototype.first = function () {\n    this.item = this.start;\n    this.next();\n    return this.item || null;\n  };\n\n  TreeNavigator.prototype.last = function () {\n    return TreeNavigator.lastDescendantOf(this.start);\n  };\n\n  return TreeNavigator;\n}();\n\nexport { TreeNavigator };\n\nvar TreeModel =\n/** @class */\nfunction () {\n  function TreeModel(context) {\n    this._onSetInput = new Emitter();\n    this.onSetInput = this._onSetInput.event;\n    this._onDidSetInput = new Emitter();\n    this.onDidSetInput = this._onDidSetInput.event;\n    this._onRefresh = new Emitter();\n    this.onRefresh = this._onRefresh.event;\n    this._onDidRefresh = new Emitter();\n    this.onDidRefresh = this._onDidRefresh.event;\n    this._onDidHighlight = new Emitter();\n    this.onDidHighlight = this._onDidHighlight.event;\n    this._onDidSelect = new Emitter();\n    this.onDidSelect = this._onDidSelect.event;\n    this._onDidFocus = new Emitter();\n    this.onDidFocus = this._onDidFocus.event;\n    this._onDidRevealItem = new Relay();\n    this.onDidRevealItem = this._onDidRevealItem.event;\n    this._onExpandItem = new Relay();\n    this.onExpandItem = this._onExpandItem.event;\n    this._onDidExpandItem = new Relay();\n    this.onDidExpandItem = this._onDidExpandItem.event;\n    this._onCollapseItem = new Relay();\n    this.onCollapseItem = this._onCollapseItem.event;\n    this._onDidCollapseItem = new Relay();\n    this.onDidCollapseItem = this._onDidCollapseItem.event;\n    this._onDidAddTraitItem = new Relay();\n    this.onDidAddTraitItem = this._onDidAddTraitItem.event;\n    this._onDidRemoveTraitItem = new Relay();\n    this.onDidRemoveTraitItem = this._onDidRemoveTraitItem.event;\n    this._onDidRefreshItem = new Relay();\n    this.onDidRefreshItem = this._onDidRefreshItem.event;\n    this._onRefreshItemChildren = new Relay();\n    this.onRefreshItemChildren = this._onRefreshItemChildren.event;\n    this._onDidRefreshItemChildren = new Relay();\n    this.onDidRefreshItemChildren = this._onDidRefreshItemChildren.event;\n    this._onDidDisposeItem = new Relay();\n    this.context = context;\n    this.input = null;\n    this.traitsToItems = {};\n  }\n\n  TreeModel.prototype.setInput = function (element) {\n    var _this = this;\n\n    var eventData = {\n      item: this.input\n    };\n\n    this._onSetInput.fire(eventData);\n\n    this.setSelection([]);\n    this.setFocus();\n    this.setHighlight();\n    this.lock = new Lock();\n\n    if (this.input) {\n      this.input.dispose();\n    }\n\n    if (this.registry) {\n      this.registry.dispose();\n      this.registryDisposable.dispose();\n    }\n\n    this.registry = new ItemRegistry();\n    this._onDidRevealItem.input = this.registry.onDidRevealItem;\n    this._onExpandItem.input = this.registry.onExpandItem;\n    this._onDidExpandItem.input = this.registry.onDidExpandItem;\n    this._onCollapseItem.input = this.registry.onCollapseItem;\n    this._onDidCollapseItem.input = this.registry.onDidCollapseItem;\n    this._onDidAddTraitItem.input = this.registry.onDidAddTraitItem;\n    this._onDidRemoveTraitItem.input = this.registry.onDidRemoveTraitItem;\n    this._onDidRefreshItem.input = this.registry.onDidRefreshItem;\n    this._onRefreshItemChildren.input = this.registry.onRefreshItemChildren;\n    this._onDidRefreshItemChildren.input = this.registry.onDidRefreshItemChildren;\n    this._onDidDisposeItem.input = this.registry.onDidDisposeItem;\n    this.registryDisposable = this.registry.onDidDisposeItem(function (item) {\n      return item.getAllTraits().forEach(function (trait) {\n        return delete _this.traitsToItems[trait][item.id];\n      });\n    });\n    var id = this.context.dataSource.getId(this.context.tree, element);\n    this.input = new RootItem(id, this.registry, this.context, this.lock, element);\n    eventData = {\n      item: this.input\n    };\n\n    this._onDidSetInput.fire(eventData);\n\n    return this.refresh(this.input);\n  };\n\n  TreeModel.prototype.getInput = function () {\n    return this.input ? this.input.getElement() : null;\n  };\n\n  TreeModel.prototype.refresh = function (element, recursive) {\n    var _this = this;\n\n    if (element === void 0) {\n      element = null;\n    }\n\n    if (recursive === void 0) {\n      recursive = true;\n    }\n\n    var item = this.getItem(element);\n\n    if (!item) {\n      return Promise.resolve(null);\n    }\n\n    var eventData = {\n      item: item,\n      recursive: recursive\n    };\n\n    this._onRefresh.fire(eventData);\n\n    return item.refresh(recursive).then(function () {\n      _this._onDidRefresh.fire(eventData);\n    });\n  };\n\n  TreeModel.prototype.expand = function (element) {\n    var item = this.getItem(element);\n\n    if (!item) {\n      return Promise.resolve(false);\n    }\n\n    return item.expand();\n  };\n\n  TreeModel.prototype.collapse = function (element, recursive) {\n    if (recursive === void 0) {\n      recursive = false;\n    }\n\n    var item = this.getItem(element);\n\n    if (!item) {\n      return Promise.resolve(false);\n    }\n\n    return item.collapse(recursive);\n  };\n\n  TreeModel.prototype.toggleExpansion = function (element, recursive) {\n    if (recursive === void 0) {\n      recursive = false;\n    }\n\n    return this.isExpanded(element) ? this.collapse(element, recursive) : this.expand(element);\n  };\n\n  TreeModel.prototype.isExpanded = function (element) {\n    var item = this.getItem(element);\n\n    if (!item) {\n      return false;\n    }\n\n    return item.isExpanded();\n  };\n\n  TreeModel.prototype.reveal = function (element, relativeTop) {\n    var _this = this;\n\n    if (relativeTop === void 0) {\n      relativeTop = null;\n    }\n\n    return this.resolveUnknownParentChain(element).then(function (chain) {\n      var result = Promise.resolve(null);\n      chain.forEach(function (e) {\n        result = result.then(function () {\n          return _this.expand(e);\n        });\n      });\n      return result;\n    }).then(function () {\n      var item = _this.getItem(element);\n\n      if (item) {\n        return item.reveal(relativeTop);\n      }\n    });\n  };\n\n  TreeModel.prototype.resolveUnknownParentChain = function (element) {\n    var _this = this;\n\n    return this.context.dataSource.getParent(this.context.tree, element).then(function (parent) {\n      if (!parent) {\n        return Promise.resolve([]);\n      }\n\n      return _this.resolveUnknownParentChain(parent).then(function (result) {\n        result.push(parent);\n        return result;\n      });\n    });\n  };\n\n  TreeModel.prototype.setHighlight = function (element, eventPayload) {\n    this.setTraits('highlighted', element ? [element] : []);\n    var eventData = {\n      highlight: this.getHighlight(),\n      payload: eventPayload\n    };\n\n    this._onDidHighlight.fire(eventData);\n  };\n\n  TreeModel.prototype.getHighlight = function (includeHidden) {\n    if (includeHidden === void 0) {\n      includeHidden = false;\n    }\n\n    var result = this.getElementsWithTrait('highlighted', includeHidden);\n    return result.length === 0 ? null : result[0];\n  };\n\n  TreeModel.prototype.setSelection = function (elements, eventPayload) {\n    this.setTraits('selected', elements);\n    var eventData = {\n      selection: this.getSelection(),\n      payload: eventPayload\n    };\n\n    this._onDidSelect.fire(eventData);\n  };\n\n  TreeModel.prototype.getSelection = function (includeHidden) {\n    if (includeHidden === void 0) {\n      includeHidden = false;\n    }\n\n    return this.getElementsWithTrait('selected', includeHidden);\n  };\n\n  TreeModel.prototype.setFocus = function (element, eventPayload) {\n    this.setTraits('focused', element ? [element] : []);\n    var eventData = {\n      focus: this.getFocus(),\n      payload: eventPayload\n    };\n\n    this._onDidFocus.fire(eventData);\n  };\n\n  TreeModel.prototype.getFocus = function (includeHidden) {\n    if (includeHidden === void 0) {\n      includeHidden = false;\n    }\n\n    var result = this.getElementsWithTrait('focused', includeHidden);\n    return result.length === 0 ? null : result[0];\n  };\n\n  TreeModel.prototype.focusNext = function (count, eventPayload) {\n    if (count === void 0) {\n      count = 1;\n    }\n\n    var item = this.getFocus() || this.input;\n    var nextItem;\n    var nav = this.getNavigator(item, false);\n\n    for (var i = 0; i < count; i++) {\n      nextItem = nav.next();\n\n      if (!nextItem) {\n        break;\n      }\n\n      item = nextItem;\n    }\n\n    this.setFocus(item, eventPayload);\n  };\n\n  TreeModel.prototype.focusPrevious = function (count, eventPayload) {\n    if (count === void 0) {\n      count = 1;\n    }\n\n    var item = this.getFocus() || this.input;\n    var previousItem;\n    var nav = this.getNavigator(item, false);\n\n    for (var i = 0; i < count; i++) {\n      previousItem = nav.previous();\n\n      if (!previousItem) {\n        break;\n      }\n\n      item = previousItem;\n    }\n\n    this.setFocus(item, eventPayload);\n  };\n\n  TreeModel.prototype.focusParent = function (eventPayload) {\n    var item = this.getFocus() || this.input;\n    var nav = this.getNavigator(item, false);\n    var parent = nav.parent();\n\n    if (parent) {\n      this.setFocus(parent, eventPayload);\n    }\n  };\n\n  TreeModel.prototype.focusFirstChild = function (eventPayload) {\n    var item = this.getItem(this.getFocus() || this.input);\n    var nav = this.getNavigator(item, false);\n    var next = nav.next();\n    var parent = nav.parent();\n\n    if (parent === item) {\n      this.setFocus(next, eventPayload);\n    }\n  };\n\n  TreeModel.prototype.focusFirst = function (eventPayload, from) {\n    this.focusNth(0, eventPayload, from);\n  };\n\n  TreeModel.prototype.focusNth = function (index, eventPayload, from) {\n    var navItem = this.getParent(from);\n    var nav = this.getNavigator(navItem);\n    var item = nav.first();\n\n    for (var i = 0; i < index; i++) {\n      item = nav.next();\n    }\n\n    if (item) {\n      this.setFocus(item, eventPayload);\n    }\n  };\n\n  TreeModel.prototype.focusLast = function (eventPayload, from) {\n    var navItem = this.getParent(from);\n    var item;\n\n    if (from && navItem) {\n      item = navItem.lastChild;\n    } else {\n      var nav = this.getNavigator(navItem);\n      item = nav.last();\n    }\n\n    if (item) {\n      this.setFocus(item, eventPayload);\n    }\n  };\n\n  TreeModel.prototype.getParent = function (from) {\n    if (from) {\n      var fromItem = this.getItem(from);\n\n      if (fromItem && fromItem.parent) {\n        return fromItem.parent;\n      }\n    }\n\n    return this.getItem(this.input);\n  };\n\n  TreeModel.prototype.getNavigator = function (element, subTreeOnly) {\n    if (element === void 0) {\n      element = null;\n    }\n\n    if (subTreeOnly === void 0) {\n      subTreeOnly = true;\n    }\n\n    return new TreeNavigator(this.getItem(element), subTreeOnly);\n  };\n\n  TreeModel.prototype.getItem = function (element) {\n    if (element === void 0) {\n      element = null;\n    }\n\n    if (element === null) {\n      return this.input;\n    } else if (element instanceof Item) {\n      return element;\n    } else if (typeof element === 'string') {\n      return this.registry.getItem(element);\n    } else {\n      return this.registry.getItem(this.context.dataSource.getId(this.context.tree, element));\n    }\n  };\n\n  TreeModel.prototype.removeTraits = function (trait, elements) {\n    var items = this.traitsToItems[trait] || {};\n    var item;\n    var id;\n\n    if (elements.length === 0) {\n      for (id in items) {\n        if (items.hasOwnProperty(id)) {\n          item = items[id];\n          item.removeTrait(trait);\n        }\n      }\n\n      delete this.traitsToItems[trait];\n    } else {\n      for (var i = 0, len = elements.length; i < len; i++) {\n        item = this.getItem(elements[i]);\n\n        if (item) {\n          item.removeTrait(trait);\n          delete items[item.id];\n        }\n      }\n    }\n  };\n\n  TreeModel.prototype.setTraits = function (trait, elements) {\n    if (elements.length === 0) {\n      this.removeTraits(trait, elements);\n    } else {\n      var items = {};\n      var item = void 0;\n\n      for (var i = 0, len = elements.length; i < len; i++) {\n        item = this.getItem(elements[i]);\n\n        if (item) {\n          items[item.id] = item;\n        }\n      }\n\n      var traitItems = this.traitsToItems[trait] || {};\n      var itemsToRemoveTrait = [];\n      var id = void 0;\n\n      for (id in traitItems) {\n        if (traitItems.hasOwnProperty(id)) {\n          if (items.hasOwnProperty(id)) {\n            delete items[id];\n          } else {\n            itemsToRemoveTrait.push(traitItems[id]);\n          }\n        }\n      }\n\n      for (var i = 0, len = itemsToRemoveTrait.length; i < len; i++) {\n        item = itemsToRemoveTrait[i];\n        item.removeTrait(trait);\n        delete traitItems[item.id];\n      }\n\n      for (id in items) {\n        if (items.hasOwnProperty(id)) {\n          item = items[id];\n          item.addTrait(trait);\n          traitItems[id] = item;\n        }\n      }\n\n      this.traitsToItems[trait] = traitItems;\n    }\n  };\n\n  TreeModel.prototype.getElementsWithTrait = function (trait, includeHidden) {\n    var elements = [];\n    var items = this.traitsToItems[trait] || {};\n    var id;\n\n    for (id in items) {\n      if (items.hasOwnProperty(id) && (items[id].isVisible() || includeHidden)) {\n        elements.push(items[id].getElement());\n      }\n    }\n\n    return elements;\n  };\n\n  TreeModel.prototype.dispose = function () {\n    if (this.registry) {\n      this.registry.dispose();\n      this.registry = null; // StrictNullOverride: nulling out ok in dispose\n    }\n\n    this._onSetInput.dispose();\n\n    this._onDidSetInput.dispose();\n\n    this._onRefresh.dispose();\n\n    this._onDidRefresh.dispose();\n\n    this._onDidHighlight.dispose();\n\n    this._onDidSelect.dispose();\n\n    this._onDidFocus.dispose();\n\n    this._onDidRevealItem.dispose();\n\n    this._onExpandItem.dispose();\n\n    this._onDidExpandItem.dispose();\n\n    this._onCollapseItem.dispose();\n\n    this._onDidCollapseItem.dispose();\n\n    this._onDidAddTraitItem.dispose();\n\n    this._onDidRemoveTraitItem.dispose();\n\n    this._onDidRefreshItem.dispose();\n\n    this._onRefreshItemChildren.dispose();\n\n    this._onDidRefreshItemChildren.dispose();\n\n    this._onDidDisposeItem.dispose();\n  };\n\n  return TreeModel;\n}();\n\nexport { TreeModel };","var ElementsDragAndDropData =\n/** @class */\nfunction () {\n  function ElementsDragAndDropData(elements) {\n    this.elements = elements;\n  }\n\n  ElementsDragAndDropData.prototype.update = function (dataTransfer) {// no-op\n  };\n\n  ElementsDragAndDropData.prototype.getData = function () {\n    return this.elements;\n  };\n\n  return ElementsDragAndDropData;\n}();\n\nexport { ElementsDragAndDropData };\n\nvar ExternalElementsDragAndDropData =\n/** @class */\nfunction () {\n  function ExternalElementsDragAndDropData(elements) {\n    this.elements = elements;\n  }\n\n  ExternalElementsDragAndDropData.prototype.update = function (dataTransfer) {// no-op\n  };\n\n  ExternalElementsDragAndDropData.prototype.getData = function () {\n    return this.elements;\n  };\n\n  return ExternalElementsDragAndDropData;\n}();\n\nexport { ExternalElementsDragAndDropData };\n\nvar DesktopDragAndDropData =\n/** @class */\nfunction () {\n  function DesktopDragAndDropData() {\n    this.types = [];\n    this.files = [];\n  }\n\n  DesktopDragAndDropData.prototype.update = function (dataTransfer) {\n    if (dataTransfer.types) {\n      this.types = [];\n      Array.prototype.push.apply(this.types, dataTransfer.types);\n    }\n\n    if (dataTransfer.files) {\n      this.files = [];\n      Array.prototype.push.apply(this.files, dataTransfer.files);\n      this.files = this.files.filter(function (f) {\n        return f.size || f.type;\n      });\n    }\n  };\n\n  DesktopDragAndDropData.prototype.getData = function () {\n    return {\n      types: this.types,\n      files: this.files\n    };\n  };\n\n  return DesktopDragAndDropData;\n}();\n\nexport { DesktopDragAndDropData };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { ArrayIterator } from '../../../common/iterator.js';\n\nvar HeightMap =\n/** @class */\nfunction () {\n  function HeightMap() {\n    this.heightMap = [];\n    this.indexes = {};\n  }\n\n  HeightMap.prototype.getContentHeight = function () {\n    var last = this.heightMap[this.heightMap.length - 1];\n    return !last ? 0 : last.top + last.height;\n  };\n\n  HeightMap.prototype.onInsertItems = function (iterator, afterItemId) {\n    if (afterItemId === void 0) {\n      afterItemId = null;\n    }\n\n    var item = null;\n    var viewItem;\n    var i, j;\n    var totalSize;\n    var sizeDiff = 0;\n\n    if (afterItemId === null) {\n      i = 0;\n      totalSize = 0;\n    } else {\n      i = this.indexes[afterItemId] + 1;\n      viewItem = this.heightMap[i - 1];\n\n      if (!viewItem) {\n        console.error('view item doesnt exist');\n        return undefined;\n      }\n\n      totalSize = viewItem.top + viewItem.height;\n    }\n\n    var boundSplice = this.heightMap.splice.bind(this.heightMap, i, 0);\n    var itemsToInsert = [];\n\n    while (item = iterator.next()) {\n      viewItem = this.createViewItem(item);\n      viewItem.top = totalSize + sizeDiff;\n      this.indexes[item.id] = i++;\n      itemsToInsert.push(viewItem);\n      sizeDiff += viewItem.height;\n    }\n\n    boundSplice.apply(this.heightMap, itemsToInsert);\n\n    for (j = i; j < this.heightMap.length; j++) {\n      viewItem = this.heightMap[j];\n      viewItem.top += sizeDiff;\n      this.indexes[viewItem.model.id] = j;\n    }\n\n    for (j = itemsToInsert.length - 1; j >= 0; j--) {\n      this.onInsertItem(itemsToInsert[j]);\n    }\n\n    for (j = this.heightMap.length - 1; j >= i; j--) {\n      this.onRefreshItem(this.heightMap[j]);\n    }\n\n    return sizeDiff;\n  };\n\n  HeightMap.prototype.onInsertItem = function (item) {// noop\n  }; // Contiguous items\n\n\n  HeightMap.prototype.onRemoveItems = function (iterator) {\n    var itemId = null;\n    var viewItem;\n    var startIndex = null;\n    var i = 0;\n    var sizeDiff = 0;\n\n    while (itemId = iterator.next()) {\n      i = this.indexes[itemId];\n      viewItem = this.heightMap[i];\n\n      if (!viewItem) {\n        console.error('view item doesnt exist');\n        return;\n      }\n\n      sizeDiff -= viewItem.height;\n      delete this.indexes[itemId];\n      this.onRemoveItem(viewItem);\n\n      if (startIndex === null) {\n        startIndex = i;\n      }\n    }\n\n    if (sizeDiff === 0 || startIndex === null) {\n      return;\n    }\n\n    this.heightMap.splice(startIndex, i - startIndex + 1);\n\n    for (i = startIndex; i < this.heightMap.length; i++) {\n      viewItem = this.heightMap[i];\n      viewItem.top += sizeDiff;\n      this.indexes[viewItem.model.id] = i;\n      this.onRefreshItem(viewItem);\n    }\n  };\n\n  HeightMap.prototype.onRemoveItem = function (item) {// noop\n  };\n\n  HeightMap.prototype.onRefreshItemSet = function (items) {\n    var _this = this;\n\n    var sortedItems = items.sort(function (a, b) {\n      return _this.indexes[a.id] - _this.indexes[b.id];\n    });\n    this.onRefreshItems(new ArrayIterator(sortedItems));\n  }; // Ordered, but not necessarily contiguous items\n\n\n  HeightMap.prototype.onRefreshItems = function (iterator) {\n    var item = null;\n    var viewItem;\n    var newHeight;\n    var i,\n        j = null;\n    var cummDiff = 0;\n\n    while (item = iterator.next()) {\n      i = this.indexes[item.id];\n\n      for (; cummDiff !== 0 && j !== null && j < i; j++) {\n        viewItem = this.heightMap[j];\n        viewItem.top += cummDiff;\n        this.onRefreshItem(viewItem);\n      }\n\n      viewItem = this.heightMap[i];\n      newHeight = item.getHeight();\n      viewItem.top += cummDiff;\n      cummDiff += newHeight - viewItem.height;\n      viewItem.height = newHeight;\n      this.onRefreshItem(viewItem, true);\n      j = i + 1;\n    }\n\n    if (cummDiff !== 0 && j !== null) {\n      for (; j < this.heightMap.length; j++) {\n        viewItem = this.heightMap[j];\n        viewItem.top += cummDiff;\n        this.onRefreshItem(viewItem);\n      }\n    }\n  };\n\n  HeightMap.prototype.onRefreshItem = function (item, needsRender) {\n    if (needsRender === void 0) {\n      needsRender = false;\n    } // noop\n\n  };\n\n  HeightMap.prototype.indexAt = function (position) {\n    var left = 0;\n    var right = this.heightMap.length;\n    var center;\n    var item; // Binary search\n\n    while (left < right) {\n      center = Math.floor((left + right) / 2);\n      item = this.heightMap[center];\n\n      if (position < item.top) {\n        right = center;\n      } else if (position >= item.top + item.height) {\n        if (left === center) {\n          break;\n        }\n\n        left = center;\n      } else {\n        return center;\n      }\n    }\n\n    return this.heightMap.length;\n  };\n\n  HeightMap.prototype.indexAfter = function (position) {\n    return Math.min(this.indexAt(position) + 1, this.heightMap.length);\n  };\n\n  HeightMap.prototype.itemAtIndex = function (index) {\n    return this.heightMap[index];\n  };\n\n  HeightMap.prototype.itemAfter = function (item) {\n    return this.heightMap[this.indexes[item.model.id] + 1] || null;\n  };\n\n  HeightMap.prototype.createViewItem = function (item) {\n    throw new Error('not implemented');\n  };\n\n  HeightMap.prototype.dispose = function () {\n    this.heightMap = [];\n    this.indexes = {};\n  };\n\n  return HeightMap;\n}();\n\nexport { HeightMap };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar ContextMenuEvent =\n/** @class */\nfunction () {\n  function ContextMenuEvent(posx, posy, target) {\n    this._posx = posx;\n    this._posy = posy;\n    this._target = target;\n  }\n\n  ContextMenuEvent.prototype.preventDefault = function () {// no-op\n  };\n\n  ContextMenuEvent.prototype.stopPropagation = function () {// no-op\n  };\n\n  Object.defineProperty(ContextMenuEvent.prototype, \"target\", {\n    get: function get() {\n      return this._target;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return ContextMenuEvent;\n}();\n\nexport { ContextMenuEvent };\n\nvar MouseContextMenuEvent =\n/** @class */\nfunction (_super) {\n  __extends(MouseContextMenuEvent, _super);\n\n  function MouseContextMenuEvent(originalEvent) {\n    var _this = _super.call(this, originalEvent.posx, originalEvent.posy, originalEvent.target) || this;\n\n    _this.originalEvent = originalEvent;\n    return _this;\n  }\n\n  MouseContextMenuEvent.prototype.preventDefault = function () {\n    this.originalEvent.preventDefault();\n  };\n\n  MouseContextMenuEvent.prototype.stopPropagation = function () {\n    this.originalEvent.stopPropagation();\n  };\n\n  return MouseContextMenuEvent;\n}(ContextMenuEvent);\n\nexport { MouseContextMenuEvent };\n\nvar KeyboardContextMenuEvent =\n/** @class */\nfunction (_super) {\n  __extends(KeyboardContextMenuEvent, _super);\n\n  function KeyboardContextMenuEvent(posx, posy, originalEvent) {\n    var _this = _super.call(this, posx, posy, originalEvent.target) || this;\n\n    _this.originalEvent = originalEvent;\n    return _this;\n  }\n\n  KeyboardContextMenuEvent.prototype.preventDefault = function () {\n    this.originalEvent.preventDefault();\n  };\n\n  KeyboardContextMenuEvent.prototype.stopPropagation = function () {\n    this.originalEvent.stopPropagation();\n  };\n\n  return KeyboardContextMenuEvent;\n}(ContextMenuEvent);\n\nexport { KeyboardContextMenuEvent };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport * as Platform from '../../../common/platform.js';\nimport * as Browser from '../../../browser/browser.js';\nimport * as Lifecycle from '../../../common/lifecycle.js';\nimport * as DOM from '../../../browser/dom.js';\nimport * as Diff from '../../../common/diff/diff.js';\nimport * as Touch from '../../../browser/touch.js';\nimport * as strings from '../../../common/strings.js';\nimport * as Mouse from '../../../browser/mouseEvent.js';\nimport * as Keyboard from '../../../browser/keyboardEvent.js';\nimport * as dnd from './treeDnd.js';\nimport { ArrayIterator, MappedIterator } from '../../../common/iterator.js';\nimport { ScrollableElement } from '../../../browser/ui/scrollbar/scrollableElement.js';\nimport { HeightMap } from './treeViewModel.js';\nimport * as _ from './tree.js';\nimport { Emitter } from '../../../common/event.js';\nimport { DataTransfers, StaticDND } from '../../../browser/dnd.js';\nimport { DefaultTreestyler } from './treeDefaults.js';\nimport { Delayer, timeout } from '../../../common/async.js';\n\nfunction removeFromParent(element) {\n  try {\n    element.parentElement.removeChild(element);\n  } catch (e) {// this will throw if this happens due to a blur event, nasty business\n  }\n}\n\nvar RowCache =\n/** @class */\nfunction () {\n  function RowCache(context) {\n    this.context = context;\n    this._cache = {\n      '': []\n    };\n  }\n\n  RowCache.prototype.alloc = function (templateId) {\n    var result = this.cache(templateId).pop();\n\n    if (!result) {\n      var content = document.createElement('div');\n      content.className = 'content';\n      var row = document.createElement('div');\n      row.appendChild(content);\n      var templateData = null;\n\n      try {\n        templateData = this.context.renderer.renderTemplate(this.context.tree, templateId, content);\n      } catch (err) {\n        console.error('Tree usage error: exception while rendering template');\n        console.error(err);\n      }\n\n      result = {\n        element: row,\n        templateId: templateId,\n        templateData: templateData\n      };\n    }\n\n    return result;\n  };\n\n  RowCache.prototype.release = function (templateId, row) {\n    removeFromParent(row.element);\n    this.cache(templateId).push(row);\n  };\n\n  RowCache.prototype.cache = function (templateId) {\n    return this._cache[templateId] || (this._cache[templateId] = []);\n  };\n\n  RowCache.prototype.garbageCollect = function () {\n    var _this = this;\n\n    if (this._cache) {\n      Object.keys(this._cache).forEach(function (templateId) {\n        _this._cache[templateId].forEach(function (cachedRow) {\n          _this.context.renderer.disposeTemplate(_this.context.tree, templateId, cachedRow.templateData);\n\n          cachedRow.element = null;\n          cachedRow.templateData = null;\n        });\n\n        delete _this._cache[templateId];\n      });\n    }\n  };\n\n  RowCache.prototype.dispose = function () {\n    this.garbageCollect();\n    this._cache = null;\n  };\n\n  return RowCache;\n}();\n\nexport { RowCache };\n\nvar ViewItem =\n/** @class */\nfunction () {\n  function ViewItem(context, model) {\n    var _this = this;\n\n    this.width = 0;\n    this.unbindDragStart = Lifecycle.Disposable.None;\n    this.context = context;\n    this.model = model;\n    this.id = this.model.id;\n    this.row = null;\n    this.top = 0;\n    this.height = model.getHeight();\n    this._styles = {};\n    model.getAllTraits().forEach(function (t) {\n      return _this._styles[t] = true;\n    });\n\n    if (model.isExpanded()) {\n      this.addClass('expanded');\n    }\n  }\n\n  Object.defineProperty(ViewItem.prototype, \"expanded\", {\n    set: function set(value) {\n      value ? this.addClass('expanded') : this.removeClass('expanded');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ViewItem.prototype, \"loading\", {\n    set: function set(value) {\n      value ? this.addClass('loading') : this.removeClass('loading');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ViewItem.prototype, \"draggable\", {\n    get: function get() {\n      return this._draggable;\n    },\n    set: function set(value) {\n      this._draggable = value;\n      this.render(true);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ViewItem.prototype, \"dropTarget\", {\n    set: function set(value) {\n      value ? this.addClass('drop-target') : this.removeClass('drop-target');\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ViewItem.prototype, \"element\", {\n    get: function get() {\n      return this.row && this.row.element;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ViewItem.prototype, \"templateId\", {\n    get: function get() {\n      return this._templateId || (this._templateId = this.context.renderer.getTemplateId && this.context.renderer.getTemplateId(this.context.tree, this.model.getElement()));\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ViewItem.prototype.addClass = function (name) {\n    this._styles[name] = true;\n    this.render(true);\n  };\n\n  ViewItem.prototype.removeClass = function (name) {\n    delete this._styles[name]; // is this slow?\n\n    this.render(true);\n  };\n\n  ViewItem.prototype.render = function (skipUserRender) {\n    var _this = this;\n\n    if (skipUserRender === void 0) {\n      skipUserRender = false;\n    }\n\n    if (!this.model || !this.element) {\n      return;\n    }\n\n    var classes = ['monaco-tree-row'];\n    classes.push.apply(classes, Object.keys(this._styles));\n\n    if (this.model.hasChildren()) {\n      classes.push('has-children');\n    }\n\n    this.element.className = classes.join(' ');\n    this.element.draggable = this.draggable;\n    this.element.style.height = this.height + 'px'; // ARIA\n\n    this.element.setAttribute('role', 'treeitem');\n    var accessibility = this.context.accessibilityProvider;\n    var ariaLabel = accessibility.getAriaLabel(this.context.tree, this.model.getElement());\n\n    if (ariaLabel) {\n      this.element.setAttribute('aria-label', ariaLabel);\n    }\n\n    if (accessibility.getPosInSet && accessibility.getSetSize) {\n      this.element.setAttribute('aria-setsize', accessibility.getSetSize());\n      this.element.setAttribute('aria-posinset', accessibility.getPosInSet(this.context.tree, this.model.getElement()));\n    }\n\n    if (this.model.hasTrait('focused')) {\n      var base64Id = strings.safeBtoa(this.model.id);\n      this.element.setAttribute('aria-selected', 'true');\n      this.element.setAttribute('id', base64Id);\n    } else {\n      this.element.setAttribute('aria-selected', 'false');\n      this.element.removeAttribute('id');\n    }\n\n    if (this.model.hasChildren()) {\n      this.element.setAttribute('aria-expanded', String(!!this._styles['expanded']));\n    } else {\n      this.element.removeAttribute('aria-expanded');\n    }\n\n    this.element.setAttribute('aria-level', String(this.model.getDepth()));\n\n    if (this.context.options.paddingOnRow) {\n      this.element.style.paddingLeft = this.context.options.twistiePixels + (this.model.getDepth() - 1) * this.context.options.indentPixels + 'px';\n    } else {\n      this.element.style.paddingLeft = (this.model.getDepth() - 1) * this.context.options.indentPixels + 'px';\n      this.row.element.firstElementChild.style.paddingLeft = this.context.options.twistiePixels + 'px';\n    }\n\n    var uri = this.context.dnd.getDragURI(this.context.tree, this.model.getElement());\n\n    if (uri !== this.uri) {\n      if (this.unbindDragStart) {\n        this.unbindDragStart.dispose();\n      }\n\n      if (uri) {\n        this.uri = uri;\n        this.draggable = true;\n        this.unbindDragStart = DOM.addDisposableListener(this.element, 'dragstart', function (e) {\n          _this.onDragStart(e);\n        });\n      } else {\n        this.uri = null;\n      }\n    }\n\n    if (!skipUserRender && this.element) {\n      var paddingLeft = 0;\n\n      if (this.context.horizontalScrolling) {\n        var style = window.getComputedStyle(this.element);\n        paddingLeft = parseFloat(style.paddingLeft);\n      }\n\n      if (this.context.horizontalScrolling) {\n        this.element.style.width = 'fit-content';\n      }\n\n      try {\n        this.context.renderer.renderElement(this.context.tree, this.model.getElement(), this.templateId, this.row.templateData);\n      } catch (err) {\n        console.error('Tree usage error: exception while rendering element');\n        console.error(err);\n      }\n\n      if (this.context.horizontalScrolling) {\n        this.width = DOM.getContentWidth(this.element) + paddingLeft;\n        this.element.style.width = '';\n      }\n    }\n  };\n\n  ViewItem.prototype.insertInDOM = function (container, afterElement) {\n    if (!this.row) {\n      this.row = this.context.cache.alloc(this.templateId); // used in reverse lookup from HTMLElement to Item\n\n      this.element[TreeView.BINDING] = this;\n    }\n\n    if (this.element.parentElement) {\n      return;\n    }\n\n    if (afterElement === null) {\n      container.appendChild(this.element);\n    } else {\n      try {\n        container.insertBefore(this.element, afterElement);\n      } catch (e) {\n        console.warn('Failed to locate previous tree element');\n        container.appendChild(this.element);\n      }\n    }\n\n    this.render();\n  };\n\n  ViewItem.prototype.removeFromDOM = function () {\n    if (!this.row) {\n      return;\n    }\n\n    this.unbindDragStart.dispose();\n    this.uri = null;\n    this.element[TreeView.BINDING] = null;\n    this.context.cache.release(this.templateId, this.row);\n    this.row = null;\n  };\n\n  ViewItem.prototype.dispose = function () {\n    this.row = null;\n  };\n\n  return ViewItem;\n}();\n\nexport { ViewItem };\n\nvar RootViewItem =\n/** @class */\nfunction (_super) {\n  __extends(RootViewItem, _super);\n\n  function RootViewItem(context, model, wrapper) {\n    var _this = _super.call(this, context, model) || this;\n\n    _this.row = {\n      element: wrapper,\n      templateData: null,\n      templateId: null\n    };\n    return _this;\n  }\n\n  RootViewItem.prototype.render = function () {\n    if (!this.model || !this.element) {\n      return;\n    }\n\n    var classes = ['monaco-tree-wrapper'];\n    classes.push.apply(classes, Object.keys(this._styles));\n\n    if (this.model.hasChildren()) {\n      classes.push('has-children');\n    }\n\n    this.element.className = classes.join(' ');\n  };\n\n  RootViewItem.prototype.insertInDOM = function (container, afterElement) {// noop\n  };\n\n  RootViewItem.prototype.removeFromDOM = function () {// noop\n  };\n\n  return RootViewItem;\n}(ViewItem);\n\nfunction reactionEquals(one, other) {\n  if (!one && !other) {\n    return true;\n  } else if (!one || !other) {\n    return false;\n  } else if (one.accept !== other.accept) {\n    return false;\n  } else if (one.bubble !== other.bubble) {\n    return false;\n  } else if (one.effect !== other.effect) {\n    return false;\n  } else {\n    return true;\n  }\n}\n\nvar TreeView =\n/** @class */\nfunction (_super) {\n  __extends(TreeView, _super);\n\n  function TreeView(context, container) {\n    var _this = _super.call(this) || this;\n\n    _this.model = null;\n    _this.lastClickTimeStamp = 0;\n    _this.contentWidthUpdateDelayer = new Delayer(50);\n    _this.isRefreshing = false;\n    _this.refreshingPreviousChildrenIds = {};\n    _this.currentDragAndDropData = null;\n    _this.currentDropTarget = null;\n    _this.currentDropTargets = null;\n    _this.currentDropDisposable = Lifecycle.Disposable.None;\n    _this.dragAndDropScrollInterval = null;\n    _this.dragAndDropScrollTimeout = null;\n    _this.dragAndDropMouseY = null;\n    _this.onHiddenScrollTop = null;\n    _this._onDOMFocus = new Emitter();\n    _this._onDOMBlur = new Emitter();\n    _this._onDidScroll = new Emitter();\n    TreeView.counter++;\n    _this.instance = TreeView.counter;\n    var horizontalScrollMode = typeof context.options.horizontalScrollMode === 'undefined' ? 2\n    /* Hidden */\n    : context.options.horizontalScrollMode;\n    _this.horizontalScrolling = horizontalScrollMode !== 2\n    /* Hidden */\n    ;\n    _this.context = {\n      dataSource: context.dataSource,\n      renderer: context.renderer,\n      controller: context.controller,\n      dnd: context.dnd,\n      filter: context.filter,\n      sorter: context.sorter,\n      tree: context.tree,\n      accessibilityProvider: context.accessibilityProvider,\n      options: context.options,\n      cache: new RowCache(context),\n      horizontalScrolling: _this.horizontalScrolling\n    };\n    _this.modelListeners = [];\n    _this.viewListeners = [];\n    _this.items = {};\n    _this.domNode = document.createElement('div');\n    _this.domNode.className = \"monaco-tree no-focused-item monaco-tree-instance-\" + _this.instance; // to allow direct tabbing into the tree instead of first focusing the tree\n\n    _this.domNode.tabIndex = context.options.preventRootFocus ? -1 : 0;\n    _this.styleElement = DOM.createStyleSheet(_this.domNode);\n    _this.treeStyler = context.styler || new DefaultTreestyler(_this.styleElement, \"monaco-tree-instance-\" + _this.instance); // ARIA\n\n    _this.domNode.setAttribute('role', 'tree');\n\n    if (_this.context.options.ariaLabel) {\n      _this.domNode.setAttribute('aria-label', _this.context.options.ariaLabel);\n    }\n\n    if (_this.context.options.alwaysFocused) {\n      DOM.addClass(_this.domNode, 'focused');\n    }\n\n    if (!_this.context.options.paddingOnRow) {\n      DOM.addClass(_this.domNode, 'no-row-padding');\n    }\n\n    _this.wrapper = document.createElement('div');\n    _this.wrapper.className = 'monaco-tree-wrapper';\n    _this.scrollableElement = new ScrollableElement(_this.wrapper, {\n      alwaysConsumeMouseWheel: true,\n      horizontal: horizontalScrollMode,\n      vertical: typeof context.options.verticalScrollMode !== 'undefined' ? context.options.verticalScrollMode : 1\n      /* Auto */\n      ,\n      useShadows: context.options.useShadows\n    });\n\n    _this.scrollableElement.onScroll(function (e) {\n      _this.render(e.scrollTop, e.height, e.scrollLeft, e.width, e.scrollWidth);\n\n      _this._onDidScroll.fire();\n    });\n\n    if (Browser.isIE) {\n      _this.wrapper.style.msTouchAction = 'none';\n      _this.wrapper.style.msContentZooming = 'none';\n    } else {\n      Touch.Gesture.addTarget(_this.wrapper);\n    }\n\n    _this.rowsContainer = document.createElement('div');\n    _this.rowsContainer.className = 'monaco-tree-rows';\n\n    if (context.options.showTwistie) {\n      _this.rowsContainer.className += ' show-twisties';\n    }\n\n    var focusTracker = DOM.trackFocus(_this.domNode);\n\n    _this.viewListeners.push(focusTracker.onDidFocus(function () {\n      return _this.onFocus();\n    }));\n\n    _this.viewListeners.push(focusTracker.onDidBlur(function () {\n      return _this.onBlur();\n    }));\n\n    _this.viewListeners.push(focusTracker);\n\n    _this.viewListeners.push(DOM.addDisposableListener(_this.domNode, 'keydown', function (e) {\n      return _this.onKeyDown(e);\n    }));\n\n    _this.viewListeners.push(DOM.addDisposableListener(_this.domNode, 'keyup', function (e) {\n      return _this.onKeyUp(e);\n    }));\n\n    _this.viewListeners.push(DOM.addDisposableListener(_this.domNode, 'mousedown', function (e) {\n      return _this.onMouseDown(e);\n    }));\n\n    _this.viewListeners.push(DOM.addDisposableListener(_this.domNode, 'mouseup', function (e) {\n      return _this.onMouseUp(e);\n    }));\n\n    _this.viewListeners.push(DOM.addDisposableListener(_this.wrapper, 'auxclick', function (e) {\n      if (e && e.button === 1) {\n        _this.onMouseMiddleClick(e);\n      }\n    }));\n\n    _this.viewListeners.push(DOM.addDisposableListener(_this.wrapper, 'click', function (e) {\n      return _this.onClick(e);\n    }));\n\n    _this.viewListeners.push(DOM.addDisposableListener(_this.domNode, 'contextmenu', function (e) {\n      return _this.onContextMenu(e);\n    }));\n\n    _this.viewListeners.push(DOM.addDisposableListener(_this.wrapper, Touch.EventType.Tap, function (e) {\n      return _this.onTap(e);\n    }));\n\n    _this.viewListeners.push(DOM.addDisposableListener(_this.wrapper, Touch.EventType.Change, function (e) {\n      return _this.onTouchChange(e);\n    }));\n\n    if (Browser.isIE) {\n      _this.viewListeners.push(DOM.addDisposableListener(_this.wrapper, 'MSPointerDown', function (e) {\n        return _this.onMsPointerDown(e);\n      }));\n\n      _this.viewListeners.push(DOM.addDisposableListener(_this.wrapper, 'MSGestureTap', function (e) {\n        return _this.onMsGestureTap(e);\n      })); // these events come too fast, we throttle them\n\n\n      _this.viewListeners.push(DOM.addDisposableThrottledListener(_this.wrapper, 'MSGestureChange', function (e) {\n        return _this.onThrottledMsGestureChange(e);\n      }, function (lastEvent, event) {\n        event.stopPropagation();\n        event.preventDefault();\n        var result = {\n          translationY: event.translationY,\n          translationX: event.translationX\n        };\n\n        if (lastEvent) {\n          result.translationY += lastEvent.translationY;\n          result.translationX += lastEvent.translationX;\n        }\n\n        return result;\n      }));\n    }\n\n    _this.viewListeners.push(DOM.addDisposableListener(window, 'dragover', function (e) {\n      return _this.onDragOver(e);\n    }));\n\n    _this.viewListeners.push(DOM.addDisposableListener(_this.wrapper, 'drop', function (e) {\n      return _this.onDrop(e);\n    }));\n\n    _this.viewListeners.push(DOM.addDisposableListener(window, 'dragend', function (e) {\n      return _this.onDragEnd(e);\n    }));\n\n    _this.viewListeners.push(DOM.addDisposableListener(window, 'dragleave', function (e) {\n      return _this.onDragOver(e);\n    }));\n\n    _this.wrapper.appendChild(_this.rowsContainer);\n\n    _this.domNode.appendChild(_this.scrollableElement.getDomNode());\n\n    container.appendChild(_this.domNode);\n    _this.lastRenderTop = 0;\n    _this.lastRenderHeight = 0;\n    _this.didJustPressContextMenuKey = false;\n    _this.currentDropTarget = null;\n    _this.currentDropTargets = [];\n    _this.shouldInvalidateDropReaction = false;\n    _this.dragAndDropScrollInterval = null;\n    _this.dragAndDropScrollTimeout = null;\n\n    _this.onRowsChanged();\n\n    _this.layout();\n\n    _this.setupMSGesture();\n\n    _this.applyStyles(context.options);\n\n    return _this;\n  }\n\n  Object.defineProperty(TreeView.prototype, \"onDOMFocus\", {\n    get: function get() {\n      return this._onDOMFocus.event;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  TreeView.prototype.applyStyles = function (styles) {\n    this.treeStyler.style(styles);\n  };\n\n  TreeView.prototype.createViewItem = function (item) {\n    return new ViewItem(this.context, item);\n  };\n\n  TreeView.prototype.getHTMLElement = function () {\n    return this.domNode;\n  };\n\n  TreeView.prototype.focus = function () {\n    this.domNode.focus();\n  };\n\n  TreeView.prototype.isFocused = function () {\n    return document.activeElement === this.domNode;\n  };\n\n  TreeView.prototype.blur = function () {\n    this.domNode.blur();\n  };\n\n  TreeView.prototype.setupMSGesture = function () {\n    var _this = this;\n\n    if (window.MSGesture) {\n      this.msGesture = new MSGesture();\n      setTimeout(function () {\n        return _this.msGesture.target = _this.wrapper;\n      }, 100); // TODO@joh, TODO@IETeam\n    }\n  };\n\n  TreeView.prototype.isTreeVisible = function () {\n    return this.onHiddenScrollTop === null;\n  };\n\n  TreeView.prototype.layout = function (height, width) {\n    if (!this.isTreeVisible()) {\n      return;\n    }\n\n    this.viewHeight = height || DOM.getContentHeight(this.wrapper); // render\n\n    this.scrollHeight = this.getContentHeight();\n\n    if (this.horizontalScrolling) {\n      this.viewWidth = width || DOM.getContentWidth(this.wrapper);\n    }\n  };\n\n  TreeView.prototype.render = function (scrollTop, viewHeight, scrollLeft, viewWidth, scrollWidth) {\n    var i;\n    var stop;\n    var renderTop = scrollTop;\n    var renderBottom = scrollTop + viewHeight;\n    var thisRenderBottom = this.lastRenderTop + this.lastRenderHeight; // when view scrolls down, start rendering from the renderBottom\n\n    for (i = this.indexAfter(renderBottom) - 1, stop = this.indexAt(Math.max(thisRenderBottom, renderTop)); i >= stop; i--) {\n      this.insertItemInDOM(this.itemAtIndex(i));\n    } // when view scrolls up, start rendering from either this.renderTop or renderBottom\n\n\n    for (i = Math.min(this.indexAt(this.lastRenderTop), this.indexAfter(renderBottom)) - 1, stop = this.indexAt(renderTop); i >= stop; i--) {\n      this.insertItemInDOM(this.itemAtIndex(i));\n    } // when view scrolls down, start unrendering from renderTop\n\n\n    for (i = this.indexAt(this.lastRenderTop), stop = Math.min(this.indexAt(renderTop), this.indexAfter(thisRenderBottom)); i < stop; i++) {\n      this.removeItemFromDOM(this.itemAtIndex(i));\n    } // when view scrolls up, start unrendering from either renderBottom this.renderTop\n\n\n    for (i = Math.max(this.indexAfter(renderBottom), this.indexAt(this.lastRenderTop)), stop = this.indexAfter(thisRenderBottom); i < stop; i++) {\n      this.removeItemFromDOM(this.itemAtIndex(i));\n    }\n\n    var topItem = this.itemAtIndex(this.indexAt(renderTop));\n\n    if (topItem) {\n      this.rowsContainer.style.top = topItem.top - renderTop + 'px';\n    }\n\n    if (this.horizontalScrolling) {\n      this.rowsContainer.style.left = -scrollLeft + 'px';\n      this.rowsContainer.style.width = Math.max(scrollWidth, viewWidth) + \"px\";\n    }\n\n    this.lastRenderTop = renderTop;\n    this.lastRenderHeight = renderBottom - renderTop;\n  };\n\n  TreeView.prototype.setModel = function (newModel) {\n    this.releaseModel();\n    this.model = newModel;\n    this.model.onRefresh(this.onRefreshing, this, this.modelListeners);\n    this.model.onDidRefresh(this.onRefreshed, this, this.modelListeners);\n    this.model.onSetInput(this.onClearingInput, this, this.modelListeners);\n    this.model.onDidSetInput(this.onSetInput, this, this.modelListeners);\n    this.model.onDidFocus(this.onModelFocusChange, this, this.modelListeners);\n    this.model.onRefreshItemChildren(this.onItemChildrenRefreshing, this, this.modelListeners);\n    this.model.onDidRefreshItemChildren(this.onItemChildrenRefreshed, this, this.modelListeners);\n    this.model.onDidRefreshItem(this.onItemRefresh, this, this.modelListeners);\n    this.model.onExpandItem(this.onItemExpanding, this, this.modelListeners);\n    this.model.onDidExpandItem(this.onItemExpanded, this, this.modelListeners);\n    this.model.onCollapseItem(this.onItemCollapsing, this, this.modelListeners);\n    this.model.onDidRevealItem(this.onItemReveal, this, this.modelListeners);\n    this.model.onDidAddTraitItem(this.onItemAddTrait, this, this.modelListeners);\n    this.model.onDidRemoveTraitItem(this.onItemRemoveTrait, this, this.modelListeners);\n  };\n\n  TreeView.prototype.onRefreshing = function () {\n    this.isRefreshing = true;\n  };\n\n  TreeView.prototype.onRefreshed = function () {\n    this.isRefreshing = false;\n    this.onRowsChanged();\n  };\n\n  TreeView.prototype.onRowsChanged = function (scrollTop) {\n    if (scrollTop === void 0) {\n      scrollTop = this.scrollTop;\n    }\n\n    if (this.isRefreshing) {\n      return;\n    }\n\n    this.scrollTop = scrollTop;\n    this.updateScrollWidth();\n  };\n\n  TreeView.prototype.updateScrollWidth = function () {\n    var _this = this;\n\n    if (!this.horizontalScrolling) {\n      return;\n    }\n\n    this.contentWidthUpdateDelayer.trigger(function () {\n      var keys = Object.keys(_this.items);\n      var scrollWidth = 0;\n\n      for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n        var key = keys_1[_i];\n        scrollWidth = Math.max(scrollWidth, _this.items[key].width);\n      }\n\n      _this.scrollWidth = scrollWidth + 10\n      /* scrollbar */\n      ;\n    });\n  };\n\n  TreeView.prototype.focusNextPage = function (eventPayload) {\n    var _this = this;\n\n    var lastPageIndex = this.indexAt(this.scrollTop + this.viewHeight);\n    lastPageIndex = lastPageIndex === 0 ? 0 : lastPageIndex - 1;\n    var lastPageElement = this.itemAtIndex(lastPageIndex).model.getElement();\n    var currentlyFocusedElement = this.model.getFocus();\n\n    if (currentlyFocusedElement !== lastPageElement) {\n      this.model.setFocus(lastPageElement, eventPayload);\n    } else {\n      var previousScrollTop = this.scrollTop;\n      this.scrollTop += this.viewHeight;\n\n      if (this.scrollTop !== previousScrollTop) {\n        // Let the scroll event listener run\n        setTimeout(function () {\n          _this.focusNextPage(eventPayload);\n        }, 0);\n      }\n    }\n  };\n\n  TreeView.prototype.focusPreviousPage = function (eventPayload) {\n    var _this = this;\n\n    var firstPageIndex;\n\n    if (this.scrollTop === 0) {\n      firstPageIndex = this.indexAt(this.scrollTop);\n    } else {\n      firstPageIndex = this.indexAfter(this.scrollTop - 1);\n    }\n\n    var firstPageElement = this.itemAtIndex(firstPageIndex).model.getElement();\n    var currentlyFocusedElement = this.model.getFocus();\n\n    if (currentlyFocusedElement !== firstPageElement) {\n      this.model.setFocus(firstPageElement, eventPayload);\n    } else {\n      var previousScrollTop = this.scrollTop;\n      this.scrollTop -= this.viewHeight;\n\n      if (this.scrollTop !== previousScrollTop) {\n        // Let the scroll event listener run\n        setTimeout(function () {\n          _this.focusPreviousPage(eventPayload);\n        }, 0);\n      }\n    }\n  };\n\n  Object.defineProperty(TreeView.prototype, \"viewHeight\", {\n    get: function get() {\n      var scrollDimensions = this.scrollableElement.getScrollDimensions();\n      return scrollDimensions.height;\n    },\n    set: function set(height) {\n      this.scrollableElement.setScrollDimensions({\n        height: height\n      });\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(TreeView.prototype, \"scrollHeight\", {\n    set: function set(scrollHeight) {\n      scrollHeight = scrollHeight + (this.horizontalScrolling ? 10 : 0);\n      this.scrollableElement.setScrollDimensions({\n        scrollHeight: scrollHeight\n      });\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(TreeView.prototype, \"viewWidth\", {\n    get: function get() {\n      var scrollDimensions = this.scrollableElement.getScrollDimensions();\n      return scrollDimensions.width;\n    },\n    set: function set(viewWidth) {\n      this.scrollableElement.setScrollDimensions({\n        width: viewWidth\n      });\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(TreeView.prototype, \"scrollWidth\", {\n    set: function set(scrollWidth) {\n      this.scrollableElement.setScrollDimensions({\n        scrollWidth: scrollWidth\n      });\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(TreeView.prototype, \"scrollTop\", {\n    get: function get() {\n      var scrollPosition = this.scrollableElement.getScrollPosition();\n      return scrollPosition.scrollTop;\n    },\n    set: function set(scrollTop) {\n      var scrollHeight = this.getContentHeight() + (this.horizontalScrolling ? 10 : 0);\n      this.scrollableElement.setScrollDimensions({\n        scrollHeight: scrollHeight\n      });\n      this.scrollableElement.setScrollPosition({\n        scrollTop: scrollTop\n      });\n    },\n    enumerable: true,\n    configurable: true\n  }); // Events\n\n  TreeView.prototype.onClearingInput = function (e) {\n    var item = e.item;\n\n    if (item) {\n      this.onRemoveItems(new MappedIterator(item.getNavigator(), function (item) {\n        return item && item.id;\n      }));\n      this.onRowsChanged();\n    }\n  };\n\n  TreeView.prototype.onSetInput = function (e) {\n    this.context.cache.garbageCollect();\n    this.inputItem = new RootViewItem(this.context, e.item, this.wrapper);\n  };\n\n  TreeView.prototype.onItemChildrenRefreshing = function (e) {\n    var item = e.item;\n    var viewItem = this.items[item.id];\n\n    if (viewItem && this.context.options.showLoading) {\n      viewItem.loadingTimer = setTimeout(function () {\n        viewItem.loadingTimer = 0;\n        viewItem.loading = true;\n      }, TreeView.LOADING_DECORATION_DELAY);\n    }\n\n    if (!e.isNested) {\n      var childrenIds = [];\n      var navigator_1 = item.getNavigator();\n      var childItem = void 0;\n\n      while (childItem = navigator_1.next()) {\n        childrenIds.push(childItem.id);\n      }\n\n      this.refreshingPreviousChildrenIds[item.id] = childrenIds;\n    }\n  };\n\n  TreeView.prototype.onItemChildrenRefreshed = function (e) {\n    var _this = this;\n\n    var item = e.item;\n    var viewItem = this.items[item.id];\n\n    if (viewItem) {\n      if (viewItem.loadingTimer) {\n        clearTimeout(viewItem.loadingTimer);\n        viewItem.loadingTimer = 0;\n      }\n\n      viewItem.loading = false;\n    }\n\n    if (!e.isNested) {\n      var previousChildrenIds_1 = this.refreshingPreviousChildrenIds[item.id];\n      var afterModelItems_1 = [];\n      var navigator_2 = item.getNavigator();\n      var childItem = void 0;\n\n      while (childItem = navigator_2.next()) {\n        afterModelItems_1.push(childItem);\n      }\n\n      var skipDiff = Math.abs(previousChildrenIds_1.length - afterModelItems_1.length) > 1000;\n      var diff = [];\n      var doToInsertItemsAlreadyExist = false;\n\n      if (!skipDiff) {\n        var lcs = new Diff.LcsDiff({\n          getLength: function getLength() {\n            return previousChildrenIds_1.length;\n          },\n          getElementAtIndex: function getElementAtIndex(i) {\n            return previousChildrenIds_1[i];\n          }\n        }, {\n          getLength: function getLength() {\n            return afterModelItems_1.length;\n          },\n          getElementAtIndex: function getElementAtIndex(i) {\n            return afterModelItems_1[i].id;\n          }\n        }, null);\n        diff = lcs.ComputeDiff(false); // this means that the result of the diff algorithm would result\n        // in inserting items that were already registered. this can only\n        // happen if the data provider returns bad ids OR if the sorting\n        // of the elements has changed\n\n        doToInsertItemsAlreadyExist = diff.some(function (d) {\n          if (d.modifiedLength > 0) {\n            for (var i = d.modifiedStart, len = d.modifiedStart + d.modifiedLength; i < len; i++) {\n              if (_this.items.hasOwnProperty(afterModelItems_1[i].id)) {\n                return true;\n              }\n            }\n          }\n\n          return false;\n        });\n      } // 50 is an optimization number, at some point we're better off\n      // just replacing everything\n\n\n      if (!skipDiff && !doToInsertItemsAlreadyExist && diff.length < 50) {\n        for (var _i = 0, diff_1 = diff; _i < diff_1.length; _i++) {\n          var diffChange = diff_1[_i];\n\n          if (diffChange.originalLength > 0) {\n            this.onRemoveItems(new ArrayIterator(previousChildrenIds_1, diffChange.originalStart, diffChange.originalStart + diffChange.originalLength));\n          }\n\n          if (diffChange.modifiedLength > 0) {\n            var beforeItem = afterModelItems_1[diffChange.modifiedStart - 1] || item;\n            beforeItem = beforeItem.getDepth() > 0 ? beforeItem : null;\n            this.onInsertItems(new ArrayIterator(afterModelItems_1, diffChange.modifiedStart, diffChange.modifiedStart + diffChange.modifiedLength), beforeItem ? beforeItem.id : null);\n          }\n        }\n      } else if (skipDiff || diff.length) {\n        this.onRemoveItems(new ArrayIterator(previousChildrenIds_1));\n        this.onInsertItems(new ArrayIterator(afterModelItems_1), item.getDepth() > 0 ? item.id : null);\n      }\n\n      if (skipDiff || diff.length) {\n        this.onRowsChanged();\n      }\n    }\n  };\n\n  TreeView.prototype.onItemRefresh = function (item) {\n    this.onItemsRefresh([item]);\n  };\n\n  TreeView.prototype.onItemsRefresh = function (items) {\n    var _this = this;\n\n    this.onRefreshItemSet(items.filter(function (item) {\n      return _this.items.hasOwnProperty(item.id);\n    }));\n    this.onRowsChanged();\n  };\n\n  TreeView.prototype.onItemExpanding = function (e) {\n    var viewItem = this.items[e.item.id];\n\n    if (viewItem) {\n      viewItem.expanded = true;\n    }\n  };\n\n  TreeView.prototype.onItemExpanded = function (e) {\n    var item = e.item;\n    var viewItem = this.items[item.id];\n\n    if (viewItem) {\n      viewItem.expanded = true;\n      var height = this.onInsertItems(item.getNavigator(), item.id) || 0;\n      var scrollTop = this.scrollTop;\n\n      if (viewItem.top + viewItem.height <= this.scrollTop) {\n        scrollTop += height;\n      }\n\n      this.onRowsChanged(scrollTop);\n    }\n  };\n\n  TreeView.prototype.onItemCollapsing = function (e) {\n    var item = e.item;\n    var viewItem = this.items[item.id];\n\n    if (viewItem) {\n      viewItem.expanded = false;\n      this.onRemoveItems(new MappedIterator(item.getNavigator(), function (item) {\n        return item && item.id;\n      }));\n      this.onRowsChanged();\n    }\n  };\n\n  TreeView.prototype.onItemReveal = function (e) {\n    var item = e.item;\n    var relativeTop = e.relativeTop;\n    var viewItem = this.items[item.id];\n\n    if (viewItem) {\n      if (relativeTop !== null) {\n        relativeTop = relativeTop < 0 ? 0 : relativeTop;\n        relativeTop = relativeTop > 1 ? 1 : relativeTop; // y = mx + b\n\n        var m = viewItem.height - this.viewHeight;\n        this.scrollTop = m * relativeTop + viewItem.top;\n      } else {\n        var viewItemBottom = viewItem.top + viewItem.height;\n        var wrapperBottom = this.scrollTop + this.viewHeight;\n\n        if (viewItem.top < this.scrollTop) {\n          this.scrollTop = viewItem.top;\n        } else if (viewItemBottom >= wrapperBottom) {\n          this.scrollTop = viewItemBottom - this.viewHeight;\n        }\n      }\n    }\n  };\n\n  TreeView.prototype.onItemAddTrait = function (e) {\n    var item = e.item;\n    var trait = e.trait;\n    var viewItem = this.items[item.id];\n\n    if (viewItem) {\n      viewItem.addClass(trait);\n    }\n\n    if (trait === 'highlighted') {\n      DOM.addClass(this.domNode, trait); // Ugly Firefox fix: input fields can't be selected if parent nodes are draggable\n\n      if (viewItem) {\n        this.highlightedItemWasDraggable = !!viewItem.draggable;\n\n        if (viewItem.draggable) {\n          viewItem.draggable = false;\n        }\n      }\n    }\n  };\n\n  TreeView.prototype.onItemRemoveTrait = function (e) {\n    var item = e.item;\n    var trait = e.trait;\n    var viewItem = this.items[item.id];\n\n    if (viewItem) {\n      viewItem.removeClass(trait);\n    }\n\n    if (trait === 'highlighted') {\n      DOM.removeClass(this.domNode, trait); // Ugly Firefox fix: input fields can't be selected if parent nodes are draggable\n\n      if (this.highlightedItemWasDraggable) {\n        viewItem.draggable = true;\n      }\n\n      this.highlightedItemWasDraggable = false;\n    }\n  };\n\n  TreeView.prototype.onModelFocusChange = function () {\n    var focus = this.model && this.model.getFocus();\n    DOM.toggleClass(this.domNode, 'no-focused-item', !focus); // ARIA\n\n    if (focus) {\n      this.domNode.setAttribute('aria-activedescendant', strings.safeBtoa(this.context.dataSource.getId(this.context.tree, focus)));\n    } else {\n      this.domNode.removeAttribute('aria-activedescendant');\n    }\n  }; // HeightMap \"events\"\n\n\n  TreeView.prototype.onInsertItem = function (item) {\n    var _this = this;\n\n    item.onDragStart = function (e) {\n      _this.onDragStart(item, e);\n    };\n\n    item.needsRender = true;\n    this.refreshViewItem(item);\n    this.items[item.id] = item;\n  };\n\n  TreeView.prototype.onRefreshItem = function (item, needsRender) {\n    if (needsRender === void 0) {\n      needsRender = false;\n    }\n\n    item.needsRender = item.needsRender || needsRender;\n    this.refreshViewItem(item);\n  };\n\n  TreeView.prototype.onRemoveItem = function (item) {\n    this.removeItemFromDOM(item);\n    item.dispose();\n    delete this.items[item.id];\n  }; // ViewItem refresh\n\n\n  TreeView.prototype.refreshViewItem = function (item) {\n    item.render();\n\n    if (this.shouldBeRendered(item)) {\n      this.insertItemInDOM(item);\n    } else {\n      this.removeItemFromDOM(item);\n    }\n  }; // DOM Events\n\n\n  TreeView.prototype.onClick = function (e) {\n    if (this.lastPointerType && this.lastPointerType !== 'mouse') {\n      return;\n    }\n\n    var event = new Mouse.StandardMouseEvent(e);\n    var item = this.getItemAround(event.target);\n\n    if (!item) {\n      return;\n    }\n\n    if (Browser.isIE && Date.now() - this.lastClickTimeStamp < 300) {\n      // IE10+ doesn't set the detail property correctly. While IE10 simply\n      // counts the number of clicks, IE11 reports always 1. To align with\n      // other browser, we set the value to 2 if clicks events come in a 300ms\n      // sequence.\n      event.detail = 2;\n    }\n\n    this.lastClickTimeStamp = Date.now();\n    this.context.controller.onClick(this.context.tree, item.model.getElement(), event);\n  };\n\n  TreeView.prototype.onMouseMiddleClick = function (e) {\n    if (!this.context.controller.onMouseMiddleClick) {\n      return;\n    }\n\n    var event = new Mouse.StandardMouseEvent(e);\n    var item = this.getItemAround(event.target);\n\n    if (!item) {\n      return;\n    }\n\n    this.context.controller.onMouseMiddleClick(this.context.tree, item.model.getElement(), event);\n  };\n\n  TreeView.prototype.onMouseDown = function (e) {\n    this.didJustPressContextMenuKey = false;\n\n    if (!this.context.controller.onMouseDown) {\n      return;\n    }\n\n    if (this.lastPointerType && this.lastPointerType !== 'mouse') {\n      return;\n    }\n\n    var event = new Mouse.StandardMouseEvent(e);\n\n    if (event.ctrlKey && Platform.isNative && Platform.isMacintosh) {\n      return;\n    }\n\n    var item = this.getItemAround(event.target);\n\n    if (!item) {\n      return;\n    }\n\n    this.context.controller.onMouseDown(this.context.tree, item.model.getElement(), event);\n  };\n\n  TreeView.prototype.onMouseUp = function (e) {\n    if (!this.context.controller.onMouseUp) {\n      return;\n    }\n\n    if (this.lastPointerType && this.lastPointerType !== 'mouse') {\n      return;\n    }\n\n    var event = new Mouse.StandardMouseEvent(e);\n\n    if (event.ctrlKey && Platform.isNative && Platform.isMacintosh) {\n      return;\n    }\n\n    var item = this.getItemAround(event.target);\n\n    if (!item) {\n      return;\n    }\n\n    this.context.controller.onMouseUp(this.context.tree, item.model.getElement(), event);\n  };\n\n  TreeView.prototype.onTap = function (e) {\n    var item = this.getItemAround(e.initialTarget);\n\n    if (!item) {\n      return;\n    }\n\n    this.context.controller.onTap(this.context.tree, item.model.getElement(), e);\n  };\n\n  TreeView.prototype.onTouchChange = function (event) {\n    event.preventDefault();\n    event.stopPropagation();\n    this.scrollTop -= event.translationY;\n  };\n\n  TreeView.prototype.onContextMenu = function (event) {\n    var resultEvent;\n    var element;\n\n    if (event instanceof KeyboardEvent || this.didJustPressContextMenuKey) {\n      this.didJustPressContextMenuKey = false;\n      var keyboardEvent = new Keyboard.StandardKeyboardEvent(event);\n      element = this.model.getFocus();\n      var position = void 0;\n\n      if (!element) {\n        element = this.model.getInput();\n        position = DOM.getDomNodePagePosition(this.inputItem.element);\n      } else {\n        var id = this.context.dataSource.getId(this.context.tree, element);\n        var viewItem = this.items[id];\n        position = DOM.getDomNodePagePosition(viewItem.element);\n      }\n\n      resultEvent = new _.KeyboardContextMenuEvent(position.left + position.width, position.top, keyboardEvent);\n    } else {\n      var mouseEvent = new Mouse.StandardMouseEvent(event);\n      var item = this.getItemAround(mouseEvent.target);\n\n      if (!item) {\n        return;\n      }\n\n      element = item.model.getElement();\n      resultEvent = new _.MouseContextMenuEvent(mouseEvent);\n    }\n\n    this.context.controller.onContextMenu(this.context.tree, element, resultEvent);\n  };\n\n  TreeView.prototype.onKeyDown = function (e) {\n    var event = new Keyboard.StandardKeyboardEvent(e);\n    this.didJustPressContextMenuKey = event.keyCode === 58\n    /* ContextMenu */\n    || event.shiftKey && event.keyCode === 68\n    /* F10 */\n    ;\n\n    if (event.target && event.target.tagName && event.target.tagName.toLowerCase() === 'input') {\n      return; // Ignore event if target is a form input field (avoids browser specific issues)\n    }\n\n    if (this.didJustPressContextMenuKey) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n\n    this.context.controller.onKeyDown(this.context.tree, event);\n  };\n\n  TreeView.prototype.onKeyUp = function (e) {\n    if (this.didJustPressContextMenuKey) {\n      this.onContextMenu(e);\n    }\n\n    this.didJustPressContextMenuKey = false;\n    this.context.controller.onKeyUp(this.context.tree, new Keyboard.StandardKeyboardEvent(e));\n  };\n\n  TreeView.prototype.onDragStart = function (item, e) {\n    if (this.model.getHighlight()) {\n      return;\n    }\n\n    var element = item.model.getElement();\n    var selection = this.model.getSelection();\n    var elements;\n\n    if (selection.indexOf(element) > -1) {\n      elements = selection;\n    } else {\n      elements = [element];\n    }\n\n    e.dataTransfer.effectAllowed = 'copyMove';\n    e.dataTransfer.setData(DataTransfers.RESOURCES, JSON.stringify([item.uri]));\n\n    if (e.dataTransfer.setDragImage) {\n      var label = void 0;\n\n      if (this.context.dnd.getDragLabel) {\n        label = this.context.dnd.getDragLabel(this.context.tree, elements);\n      } else {\n        label = String(elements.length);\n      }\n\n      var dragImage_1 = document.createElement('div');\n      dragImage_1.className = 'monaco-tree-drag-image';\n      dragImage_1.textContent = label;\n      document.body.appendChild(dragImage_1);\n      e.dataTransfer.setDragImage(dragImage_1, -10, -10);\n      setTimeout(function () {\n        return document.body.removeChild(dragImage_1);\n      }, 0);\n    }\n\n    this.currentDragAndDropData = new dnd.ElementsDragAndDropData(elements);\n    StaticDND.CurrentDragAndDropData = new dnd.ExternalElementsDragAndDropData(elements);\n    this.context.dnd.onDragStart(this.context.tree, this.currentDragAndDropData, new Mouse.DragMouseEvent(e));\n  };\n\n  TreeView.prototype.setupDragAndDropScrollInterval = function () {\n    var _this = this;\n\n    var viewTop = DOM.getTopLeftOffset(this.wrapper).top;\n\n    if (!this.dragAndDropScrollInterval) {\n      this.dragAndDropScrollInterval = window.setInterval(function () {\n        if (_this.dragAndDropMouseY === null) {\n          return;\n        }\n\n        var diff = _this.dragAndDropMouseY - viewTop;\n        var scrollDiff = 0;\n        var upperLimit = _this.viewHeight - 35;\n\n        if (diff < 35) {\n          scrollDiff = Math.max(-14, 0.2 * (diff - 35));\n        } else if (diff > upperLimit) {\n          scrollDiff = Math.min(14, 0.2 * (diff - upperLimit));\n        }\n\n        _this.scrollTop += scrollDiff;\n      }, 10);\n      this.cancelDragAndDropScrollTimeout();\n      this.dragAndDropScrollTimeout = window.setTimeout(function () {\n        _this.cancelDragAndDropScrollInterval();\n\n        _this.dragAndDropScrollTimeout = null;\n      }, 1000);\n    }\n  };\n\n  TreeView.prototype.cancelDragAndDropScrollInterval = function () {\n    if (this.dragAndDropScrollInterval) {\n      window.clearInterval(this.dragAndDropScrollInterval);\n      this.dragAndDropScrollInterval = null;\n    }\n\n    this.cancelDragAndDropScrollTimeout();\n  };\n\n  TreeView.prototype.cancelDragAndDropScrollTimeout = function () {\n    if (this.dragAndDropScrollTimeout) {\n      window.clearTimeout(this.dragAndDropScrollTimeout);\n      this.dragAndDropScrollTimeout = null;\n    }\n  };\n\n  TreeView.prototype.onDragOver = function (e) {\n    var _this = this;\n\n    e.preventDefault(); // needed so that the drop event fires (https://stackoverflow.com/questions/21339924/drop-event-not-firing-in-chrome)\n\n    var event = new Mouse.DragMouseEvent(e);\n    var viewItem = this.getItemAround(event.target);\n\n    if (!viewItem || event.posx === 0 && event.posy === 0 && event.browserEvent.type === DOM.EventType.DRAG_LEAVE) {\n      // dragging outside of tree\n      if (this.currentDropTarget) {\n        // clear previously hovered element feedback\n        this.currentDropTargets.forEach(function (i) {\n          return i.dropTarget = false;\n        });\n        this.currentDropTargets = [];\n        this.currentDropDisposable.dispose();\n      }\n\n      this.cancelDragAndDropScrollInterval();\n      this.currentDropTarget = null;\n      this.currentDropElement = null;\n      this.dragAndDropMouseY = null;\n      return false;\n    } // dragging inside the tree\n\n\n    this.setupDragAndDropScrollInterval();\n    this.dragAndDropMouseY = event.posy;\n\n    if (!this.currentDragAndDropData) {\n      // just started dragging\n      if (StaticDND.CurrentDragAndDropData) {\n        this.currentDragAndDropData = StaticDND.CurrentDragAndDropData;\n      } else {\n        if (!event.dataTransfer.types) {\n          return false;\n        }\n\n        this.currentDragAndDropData = new dnd.DesktopDragAndDropData();\n      }\n    }\n\n    this.currentDragAndDropData.update(event.browserEvent.dataTransfer);\n    var element;\n    var item = viewItem.model;\n    var reaction; // check the bubble up behavior\n\n    do {\n      element = item ? item.getElement() : this.model.getInput();\n      reaction = this.context.dnd.onDragOver(this.context.tree, this.currentDragAndDropData, element, event);\n\n      if (!reaction || reaction.bubble !== 1\n      /* BUBBLE_UP */\n      ) {\n          break;\n        }\n\n      item = item && item.parent;\n    } while (item);\n\n    if (!item) {\n      this.currentDropElement = null;\n      return false;\n    }\n\n    var canDrop = reaction && reaction.accept;\n\n    if (canDrop) {\n      this.currentDropElement = item.getElement();\n      event.preventDefault();\n      event.dataTransfer.dropEffect = reaction.effect === 0\n      /* COPY */\n      ? 'copy' : 'move';\n    } else {\n      this.currentDropElement = null;\n    } // item is the model item where drop() should be called\n    // can be null\n\n\n    var currentDropTarget = item.id === this.inputItem.id ? this.inputItem : this.items[item.id];\n\n    if (this.shouldInvalidateDropReaction || this.currentDropTarget !== currentDropTarget || !reactionEquals(this.currentDropElementReaction, reaction)) {\n      this.shouldInvalidateDropReaction = false;\n\n      if (this.currentDropTarget) {\n        this.currentDropTargets.forEach(function (i) {\n          return i.dropTarget = false;\n        });\n        this.currentDropTargets = [];\n        this.currentDropDisposable.dispose();\n      }\n\n      this.currentDropTarget = currentDropTarget;\n      this.currentDropElementReaction = reaction;\n\n      if (canDrop) {\n        // setup hover feedback for drop target\n        if (this.currentDropTarget) {\n          this.currentDropTarget.dropTarget = true;\n          this.currentDropTargets.push(this.currentDropTarget);\n        }\n\n        if (reaction.bubble === 0\n        /* BUBBLE_DOWN */\n        ) {\n            var nav = item.getNavigator();\n            var child = void 0;\n\n            while (child = nav.next()) {\n              viewItem = this.items[child.id];\n\n              if (viewItem) {\n                viewItem.dropTarget = true;\n                this.currentDropTargets.push(viewItem);\n              }\n            }\n          }\n\n        if (reaction.autoExpand) {\n          var timeoutPromise_1 = timeout(500);\n          this.currentDropDisposable = Lifecycle.toDisposable(function () {\n            return timeoutPromise_1.cancel();\n          });\n          timeoutPromise_1.then(function () {\n            return _this.context.tree.expand(_this.currentDropElement);\n          }).then(function () {\n            return _this.shouldInvalidateDropReaction = true;\n          });\n        }\n      }\n    }\n\n    return true;\n  };\n\n  TreeView.prototype.onDrop = function (e) {\n    if (this.currentDropElement) {\n      var event_1 = new Mouse.DragMouseEvent(e);\n      event_1.preventDefault();\n      this.currentDragAndDropData.update(event_1.browserEvent.dataTransfer);\n      this.context.dnd.drop(this.context.tree, this.currentDragAndDropData, this.currentDropElement, event_1);\n      this.onDragEnd(e);\n    }\n\n    this.cancelDragAndDropScrollInterval();\n  };\n\n  TreeView.prototype.onDragEnd = function (e) {\n    if (this.currentDropTarget) {\n      this.currentDropTargets.forEach(function (i) {\n        return i.dropTarget = false;\n      });\n      this.currentDropTargets = [];\n    }\n\n    this.currentDropDisposable.dispose();\n    this.cancelDragAndDropScrollInterval();\n    this.currentDragAndDropData = null;\n    StaticDND.CurrentDragAndDropData = undefined;\n    this.currentDropElement = null;\n    this.currentDropTarget = null;\n    this.dragAndDropMouseY = null;\n  };\n\n  TreeView.prototype.onFocus = function () {\n    if (!this.context.options.alwaysFocused) {\n      DOM.addClass(this.domNode, 'focused');\n    }\n\n    this._onDOMFocus.fire();\n  };\n\n  TreeView.prototype.onBlur = function () {\n    if (!this.context.options.alwaysFocused) {\n      DOM.removeClass(this.domNode, 'focused');\n    }\n\n    this.domNode.removeAttribute('aria-activedescendant'); // ARIA\n\n    this._onDOMBlur.fire();\n  }; // MS specific DOM Events\n\n\n  TreeView.prototype.onMsPointerDown = function (event) {\n    if (!this.msGesture) {\n      return;\n    } // Circumvent IE11 breaking change in e.pointerType & TypeScript's stale definitions\n\n\n    var pointerType = event.pointerType;\n\n    if (pointerType === (event.MSPOINTER_TYPE_MOUSE || 'mouse')) {\n      this.lastPointerType = 'mouse';\n      return;\n    } else if (pointerType === (event.MSPOINTER_TYPE_TOUCH || 'touch')) {\n      this.lastPointerType = 'touch';\n    } else {\n      return;\n    }\n\n    event.stopPropagation();\n    event.preventDefault();\n    this.msGesture.addPointer(event.pointerId);\n  };\n\n  TreeView.prototype.onThrottledMsGestureChange = function (event) {\n    this.scrollTop -= event.translationY;\n  };\n\n  TreeView.prototype.onMsGestureTap = function (event) {\n    event.initialTarget = document.elementFromPoint(event.clientX, event.clientY);\n    this.onTap(event);\n  }; // DOM changes\n\n\n  TreeView.prototype.insertItemInDOM = function (item) {\n    var elementAfter = null;\n    var itemAfter = this.itemAfter(item);\n\n    if (itemAfter && itemAfter.element) {\n      elementAfter = itemAfter.element;\n    }\n\n    item.insertInDOM(this.rowsContainer, elementAfter);\n  };\n\n  TreeView.prototype.removeItemFromDOM = function (item) {\n    if (!item) {\n      return;\n    }\n\n    item.removeFromDOM();\n  }; // Helpers\n\n\n  TreeView.prototype.shouldBeRendered = function (item) {\n    return item.top < this.lastRenderTop + this.lastRenderHeight && item.top + item.height > this.lastRenderTop;\n  };\n\n  TreeView.prototype.getItemAround = function (element) {\n    var candidate = this.inputItem;\n    var el = element;\n\n    do {\n      if (el[TreeView.BINDING]) {\n        candidate = el[TreeView.BINDING];\n      }\n\n      if (el === this.wrapper || el === this.domNode) {\n        return candidate;\n      }\n\n      if (el === this.scrollableElement.getDomNode() || el === document.body) {\n        return undefined;\n      }\n    } while (el = el.parentElement);\n\n    return undefined;\n  }; // Cleanup\n\n\n  TreeView.prototype.releaseModel = function () {\n    if (this.model) {\n      this.modelListeners = Lifecycle.dispose(this.modelListeners);\n      this.model = null;\n    }\n  };\n\n  TreeView.prototype.dispose = function () {\n    var _this = this; // TODO@joao: improve\n\n\n    this.scrollableElement.dispose();\n    this.releaseModel();\n    this.viewListeners = Lifecycle.dispose(this.viewListeners);\n\n    this._onDOMFocus.dispose();\n\n    this._onDOMBlur.dispose();\n\n    if (this.domNode.parentNode) {\n      this.domNode.parentNode.removeChild(this.domNode);\n    }\n\n    if (this.items) {\n      Object.keys(this.items).forEach(function (key) {\n        return _this.items[key].removeFromDOM();\n      });\n    }\n\n    if (this.context.cache) {\n      this.context.cache.dispose();\n    }\n\n    _super.prototype.dispose.call(this);\n  };\n\n  TreeView.BINDING = 'monaco-tree-row';\n  TreeView.LOADING_DECORATION_DELAY = 800;\n  TreeView.counter = 0;\n  return TreeView;\n}(HeightMap);\n\nexport { TreeView };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './tree.css';\nimport * as TreeDefaults from './treeDefaults.js';\nimport * as Model from './treeModel.js';\nimport * as View from './treeView.js';\nimport { Emitter, Relay } from '../../../common/event.js';\nimport { Color } from '../../../common/color.js';\nimport { mixin } from '../../../common/objects.js';\n\nvar TreeContext =\n/** @class */\nfunction () {\n  function TreeContext(tree, configuration, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    this.tree = tree;\n    this.configuration = configuration;\n    this.options = options;\n\n    if (!configuration.dataSource) {\n      throw new Error('You must provide a Data Source to the tree.');\n    }\n\n    this.dataSource = configuration.dataSource;\n    this.renderer = configuration.renderer;\n    this.controller = configuration.controller || new TreeDefaults.DefaultController({\n      clickBehavior: 1\n      /* ON_MOUSE_UP */\n      ,\n      keyboardSupport: typeof options.keyboardSupport !== 'boolean' || options.keyboardSupport\n    });\n    this.dnd = configuration.dnd || new TreeDefaults.DefaultDragAndDrop();\n    this.filter = configuration.filter || new TreeDefaults.DefaultFilter();\n    this.sorter = configuration.sorter;\n    this.accessibilityProvider = configuration.accessibilityProvider || new TreeDefaults.DefaultAccessibilityProvider();\n    this.styler = configuration.styler;\n  }\n\n  return TreeContext;\n}();\n\nexport { TreeContext };\nvar defaultStyles = {\n  listFocusBackground: Color.fromHex('#073655'),\n  listActiveSelectionBackground: Color.fromHex('#0E639C'),\n  listActiveSelectionForeground: Color.fromHex('#FFFFFF'),\n  listFocusAndSelectionBackground: Color.fromHex('#094771'),\n  listFocusAndSelectionForeground: Color.fromHex('#FFFFFF'),\n  listInactiveSelectionBackground: Color.fromHex('#3F3F46'),\n  listHoverBackground: Color.fromHex('#2A2D2E'),\n  listDropBackground: Color.fromHex('#383B3D')\n};\n\nvar Tree =\n/** @class */\nfunction () {\n  function Tree(container, configuration, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    this._onDidChangeFocus = new Relay();\n    this.onDidChangeFocus = this._onDidChangeFocus.event;\n    this._onDidChangeSelection = new Relay();\n    this.onDidChangeSelection = this._onDidChangeSelection.event;\n    this._onHighlightChange = new Relay();\n    this._onDidExpandItem = new Relay();\n    this._onDidCollapseItem = new Relay();\n    this._onDispose = new Emitter();\n    this.onDidDispose = this._onDispose.event;\n    this.container = container;\n    mixin(options, defaultStyles, false);\n    options.twistiePixels = typeof options.twistiePixels === 'number' ? options.twistiePixels : 32;\n    options.showTwistie = options.showTwistie === false ? false : true;\n    options.indentPixels = typeof options.indentPixels === 'number' ? options.indentPixels : 12;\n    options.alwaysFocused = options.alwaysFocused === true ? true : false;\n    options.useShadows = options.useShadows === false ? false : true;\n    options.paddingOnRow = options.paddingOnRow === false ? false : true;\n    options.showLoading = options.showLoading === false ? false : true;\n    this.context = new TreeContext(this, configuration, options);\n    this.model = new Model.TreeModel(this.context);\n    this.view = new View.TreeView(this.context, this.container);\n    this.view.setModel(this.model);\n    this._onDidChangeFocus.input = this.model.onDidFocus;\n    this._onDidChangeSelection.input = this.model.onDidSelect;\n    this._onHighlightChange.input = this.model.onDidHighlight;\n    this._onDidExpandItem.input = this.model.onDidExpandItem;\n    this._onDidCollapseItem.input = this.model.onDidCollapseItem;\n  }\n\n  Tree.prototype.style = function (styles) {\n    this.view.applyStyles(styles);\n  };\n\n  Object.defineProperty(Tree.prototype, \"onDidFocus\", {\n    get: function get() {\n      return this.view && this.view.onDOMFocus;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Tree.prototype.getHTMLElement = function () {\n    return this.view.getHTMLElement();\n  };\n\n  Tree.prototype.layout = function (height, width) {\n    this.view.layout(height, width);\n  };\n\n  Tree.prototype.domFocus = function () {\n    this.view.focus();\n  };\n\n  Tree.prototype.isDOMFocused = function () {\n    return this.view.isFocused();\n  };\n\n  Tree.prototype.domBlur = function () {\n    this.view.blur();\n  };\n\n  Tree.prototype.setInput = function (element) {\n    return this.model.setInput(element);\n  };\n\n  Tree.prototype.getInput = function () {\n    return this.model.getInput();\n  };\n\n  Tree.prototype.expand = function (element) {\n    return this.model.expand(element);\n  };\n\n  Tree.prototype.collapse = function (element, recursive) {\n    if (recursive === void 0) {\n      recursive = false;\n    }\n\n    return this.model.collapse(element, recursive);\n  };\n\n  Tree.prototype.toggleExpansion = function (element, recursive) {\n    if (recursive === void 0) {\n      recursive = false;\n    }\n\n    return this.model.toggleExpansion(element, recursive);\n  };\n\n  Tree.prototype.isExpanded = function (element) {\n    return this.model.isExpanded(element);\n  };\n\n  Tree.prototype.reveal = function (element, relativeTop) {\n    if (relativeTop === void 0) {\n      relativeTop = null;\n    }\n\n    return this.model.reveal(element, relativeTop);\n  };\n\n  Tree.prototype.getHighlight = function () {\n    return this.model.getHighlight();\n  };\n\n  Tree.prototype.clearHighlight = function (eventPayload) {\n    this.model.setHighlight(null, eventPayload);\n  };\n\n  Tree.prototype.setSelection = function (elements, eventPayload) {\n    this.model.setSelection(elements, eventPayload);\n  };\n\n  Tree.prototype.getSelection = function () {\n    return this.model.getSelection();\n  };\n\n  Tree.prototype.clearSelection = function (eventPayload) {\n    this.model.setSelection([], eventPayload);\n  };\n\n  Tree.prototype.setFocus = function (element, eventPayload) {\n    this.model.setFocus(element, eventPayload);\n  };\n\n  Tree.prototype.getFocus = function () {\n    return this.model.getFocus();\n  };\n\n  Tree.prototype.focusNext = function (count, eventPayload) {\n    this.model.focusNext(count, eventPayload);\n  };\n\n  Tree.prototype.focusPrevious = function (count, eventPayload) {\n    this.model.focusPrevious(count, eventPayload);\n  };\n\n  Tree.prototype.focusParent = function (eventPayload) {\n    this.model.focusParent(eventPayload);\n  };\n\n  Tree.prototype.focusFirstChild = function (eventPayload) {\n    this.model.focusFirstChild(eventPayload);\n  };\n\n  Tree.prototype.focusFirst = function (eventPayload, from) {\n    this.model.focusFirst(eventPayload, from);\n  };\n\n  Tree.prototype.focusNth = function (index, eventPayload) {\n    this.model.focusNth(index, eventPayload);\n  };\n\n  Tree.prototype.focusLast = function (eventPayload, from) {\n    this.model.focusLast(eventPayload, from);\n  };\n\n  Tree.prototype.focusNextPage = function (eventPayload) {\n    this.view.focusNextPage(eventPayload);\n  };\n\n  Tree.prototype.focusPreviousPage = function (eventPayload) {\n    this.view.focusPreviousPage(eventPayload);\n  };\n\n  Tree.prototype.clearFocus = function (eventPayload) {\n    this.model.setFocus(null, eventPayload);\n  };\n\n  Tree.prototype.dispose = function () {\n    this._onDispose.fire();\n\n    if (this.model !== null) {\n      this.model.dispose();\n      this.model = null; // StrictNullOverride Nulling out ok in dispose\n    }\n\n    if (this.view !== null) {\n      this.view.dispose();\n      this.view = null; // StrictNullOverride Nulling out ok in dispose\n    }\n\n    this._onDidChangeFocus.dispose();\n\n    this._onDidChangeSelection.dispose();\n\n    this._onHighlightChange.dispose();\n\n    this._onDidExpandItem.dispose();\n\n    this._onDidCollapseItem.dispose();\n\n    this._onDispose.dispose();\n  };\n\n  return Tree;\n}();\n\nexport { Tree };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport './progressbar.css';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport { Color } from '../../../common/color.js';\nimport { mixin } from '../../../common/objects.js';\nimport { removeClasses, addClass, hasClass, hide, show } from '../../dom.js';\nimport { RunOnceScheduler } from '../../../common/async.js';\nvar css_done = 'done';\nvar css_active = 'active';\nvar css_infinite = 'infinite';\nvar css_discrete = 'discrete';\nvar css_progress_container = 'monaco-progress-container';\nvar css_progress_bit = 'progress-bit';\nvar defaultOpts = {\n  progressBarBackground: Color.fromHex('#0E70C0')\n};\n/**\n * A progress bar with support for infinite or discrete progress.\n */\n\nvar ProgressBar =\n/** @class */\nfunction (_super) {\n  __extends(ProgressBar, _super);\n\n  function ProgressBar(container, options) {\n    var _this = _super.call(this) || this;\n\n    _this.options = options || Object.create(null);\n    mixin(_this.options, defaultOpts, false);\n    _this.workedVal = 0;\n    _this.progressBarBackground = _this.options.progressBarBackground;\n\n    _this._register(_this.showDelayedScheduler = new RunOnceScheduler(function () {\n      return show(_this.element);\n    }, 0));\n\n    _this.create(container);\n\n    return _this;\n  }\n\n  ProgressBar.prototype.create = function (container) {\n    this.element = document.createElement('div');\n    addClass(this.element, css_progress_container);\n    container.appendChild(this.element);\n    this.bit = document.createElement('div');\n    addClass(this.bit, css_progress_bit);\n    this.element.appendChild(this.bit);\n    this.applyStyles();\n  };\n\n  ProgressBar.prototype.off = function () {\n    this.bit.style.width = 'inherit';\n    this.bit.style.opacity = '1';\n    removeClasses(this.element, css_active, css_infinite, css_discrete);\n    this.workedVal = 0;\n    this.totalWork = undefined;\n  };\n  /**\n   * Stops the progressbar from showing any progress instantly without fading out.\n   */\n\n\n  ProgressBar.prototype.stop = function () {\n    return this.doDone(false);\n  };\n\n  ProgressBar.prototype.doDone = function (delayed) {\n    var _this = this;\n\n    addClass(this.element, css_done); // let it grow to 100% width and hide afterwards\n\n    if (!hasClass(this.element, css_infinite)) {\n      this.bit.style.width = 'inherit';\n\n      if (delayed) {\n        setTimeout(function () {\n          return _this.off();\n        }, 200);\n      } else {\n        this.off();\n      }\n    } // let it fade out and hide afterwards\n    else {\n        this.bit.style.opacity = '0';\n\n        if (delayed) {\n          setTimeout(function () {\n            return _this.off();\n          }, 200);\n        } else {\n          this.off();\n        }\n      }\n\n    return this;\n  };\n\n  ProgressBar.prototype.hide = function () {\n    hide(this.element);\n    this.showDelayedScheduler.cancel();\n  };\n\n  ProgressBar.prototype.style = function (styles) {\n    this.progressBarBackground = styles.progressBarBackground;\n    this.applyStyles();\n  };\n\n  ProgressBar.prototype.applyStyles = function () {\n    if (this.bit) {\n      var background = this.progressBarBackground ? this.progressBarBackground.toString() : null;\n      this.bit.style.backgroundColor = background;\n    }\n  };\n\n  return ProgressBar;\n}(Disposable);\n\nexport { ProgressBar };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport './quickopen.css';\nimport * as nls from '../../../../nls.js';\nimport * as platform from '../../../common/platform.js';\nimport * as types from '../../../common/types.js';\nimport { Filter, Renderer, DataSource, AccessibilityProvider } from './quickOpenViewer.js';\nimport { InputBox } from '../../../browser/ui/inputbox/inputBox.js';\nimport { Tree } from '../../tree/browser/treeImpl.js';\nimport { ProgressBar } from '../../../browser/ui/progressbar/progressbar.js';\nimport { StandardKeyboardEvent } from '../../../browser/keyboardEvent.js';\nimport { DefaultController } from '../../tree/browser/treeDefaults.js';\nimport * as DOM from '../../../browser/dom.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport { Color } from '../../../common/color.js';\nimport { mixin } from '../../../common/objects.js';\nimport { StandardMouseEvent } from '../../../browser/mouseEvent.js';\n\nvar QuickOpenController =\n/** @class */\nfunction (_super) {\n  __extends(QuickOpenController, _super);\n\n  function QuickOpenController() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  QuickOpenController.prototype.onContextMenu = function (tree, element, event) {\n    if (platform.isMacintosh) {\n      return this.onLeftClick(tree, element, event); // https://github.com/Microsoft/vscode/issues/1011\n    }\n\n    return _super.prototype.onContextMenu.call(this, tree, element, event);\n  };\n\n  return QuickOpenController;\n}(DefaultController);\n\nexport { QuickOpenController };\nvar defaultStyles = {\n  background: Color.fromHex('#1E1E1E'),\n  foreground: Color.fromHex('#CCCCCC'),\n  pickerGroupForeground: Color.fromHex('#0097FB'),\n  pickerGroupBorder: Color.fromHex('#3F3F46'),\n  widgetShadow: Color.fromHex('#000000'),\n  progressBarBackground: Color.fromHex('#0E70C0')\n};\nvar DEFAULT_INPUT_ARIA_LABEL = nls.localize('quickOpenAriaLabel', \"Quick picker. Type to narrow down results.\");\n\nvar QuickOpenWidget =\n/** @class */\nfunction (_super) {\n  __extends(QuickOpenWidget, _super);\n\n  function QuickOpenWidget(container, callbacks, options) {\n    var _this = _super.call(this) || this;\n\n    _this.isDisposed = false;\n    _this.container = container;\n    _this.callbacks = callbacks;\n    _this.options = options;\n    _this.styles = options || Object.create(null);\n    mixin(_this.styles, defaultStyles, false);\n    _this.model = null;\n    return _this;\n  }\n\n  QuickOpenWidget.prototype.getModel = function () {\n    return this.model;\n  };\n\n  QuickOpenWidget.prototype.create = function () {\n    var _this = this; // Container\n\n\n    this.element = document.createElement('div');\n    DOM.addClass(this.element, 'monaco-quick-open-widget');\n    this.container.appendChild(this.element);\n\n    this._register(DOM.addDisposableListener(this.element, DOM.EventType.CONTEXT_MENU, function (e) {\n      return DOM.EventHelper.stop(e, true);\n    })); // Do this to fix an issue on Mac where the menu goes into the way\n\n\n    this._register(DOM.addDisposableListener(this.element, DOM.EventType.FOCUS, function (e) {\n      return _this.gainingFocus();\n    }, true));\n\n    this._register(DOM.addDisposableListener(this.element, DOM.EventType.BLUR, function (e) {\n      return _this.loosingFocus(e);\n    }, true));\n\n    this._register(DOM.addDisposableListener(this.element, DOM.EventType.KEY_DOWN, function (e) {\n      var keyboardEvent = new StandardKeyboardEvent(e);\n\n      if (keyboardEvent.keyCode === 9\n      /* Escape */\n      ) {\n          DOM.EventHelper.stop(e, true);\n\n          _this.hide(2\n          /* CANCELED */\n          );\n        } else if (keyboardEvent.keyCode === 2\n      /* Tab */\n      && !keyboardEvent.altKey && !keyboardEvent.ctrlKey && !keyboardEvent.metaKey) {\n        var stops = e.currentTarget.querySelectorAll('input, .monaco-tree, .monaco-tree-row.focused .action-label.icon');\n\n        if (keyboardEvent.shiftKey && keyboardEvent.target === stops[0]) {\n          DOM.EventHelper.stop(e, true);\n          stops[stops.length - 1].focus();\n        } else if (!keyboardEvent.shiftKey && keyboardEvent.target === stops[stops.length - 1]) {\n          DOM.EventHelper.stop(e, true);\n          stops[0].focus();\n        }\n      }\n    })); // Progress Bar\n\n\n    this.progressBar = this._register(new ProgressBar(this.element, {\n      progressBarBackground: this.styles.progressBarBackground\n    }));\n    this.progressBar.hide(); // Input Field\n\n    this.inputContainer = document.createElement('div');\n    DOM.addClass(this.inputContainer, 'quick-open-input');\n    this.element.appendChild(this.inputContainer);\n    this.inputBox = this._register(new InputBox(this.inputContainer, undefined, {\n      placeholder: this.options.inputPlaceHolder || '',\n      ariaLabel: DEFAULT_INPUT_ARIA_LABEL,\n      inputBackground: this.styles.inputBackground,\n      inputForeground: this.styles.inputForeground,\n      inputBorder: this.styles.inputBorder,\n      inputValidationInfoBackground: this.styles.inputValidationInfoBackground,\n      inputValidationInfoForeground: this.styles.inputValidationInfoForeground,\n      inputValidationInfoBorder: this.styles.inputValidationInfoBorder,\n      inputValidationWarningBackground: this.styles.inputValidationWarningBackground,\n      inputValidationWarningForeground: this.styles.inputValidationWarningForeground,\n      inputValidationWarningBorder: this.styles.inputValidationWarningBorder,\n      inputValidationErrorBackground: this.styles.inputValidationErrorBackground,\n      inputValidationErrorForeground: this.styles.inputValidationErrorForeground,\n      inputValidationErrorBorder: this.styles.inputValidationErrorBorder\n    }));\n    this.inputElement = this.inputBox.inputElement;\n    this.inputElement.setAttribute('role', 'combobox');\n    this.inputElement.setAttribute('aria-haspopup', 'false');\n    this.inputElement.setAttribute('aria-autocomplete', 'list');\n\n    this._register(DOM.addDisposableListener(this.inputBox.inputElement, DOM.EventType.INPUT, function (e) {\n      return _this.onType();\n    }));\n\n    this._register(DOM.addDisposableListener(this.inputBox.inputElement, DOM.EventType.KEY_DOWN, function (e) {\n      var keyboardEvent = new StandardKeyboardEvent(e);\n\n      var shouldOpenInBackground = _this.shouldOpenInBackground(keyboardEvent); // Do not handle Tab: It is used to navigate between elements without mouse\n\n\n      if (keyboardEvent.keyCode === 2\n      /* Tab */\n      ) {\n          return;\n        } // Pass tree navigation keys to the tree but leave focus in input field\n      else if (keyboardEvent.keyCode === 18\n        /* DownArrow */\n        || keyboardEvent.keyCode === 16\n        /* UpArrow */\n        || keyboardEvent.keyCode === 12\n        /* PageDown */\n        || keyboardEvent.keyCode === 11\n        /* PageUp */\n        ) {\n            DOM.EventHelper.stop(e, true);\n\n            _this.navigateInTree(keyboardEvent.keyCode, keyboardEvent.shiftKey); // Position cursor at the end of input to allow right arrow (open in background)\n            // to function immediately unless the user has made a selection\n\n\n            if (_this.inputBox.inputElement.selectionStart === _this.inputBox.inputElement.selectionEnd) {\n              _this.inputBox.inputElement.selectionStart = _this.inputBox.value.length;\n            }\n          } // Select element on Enter or on Arrow-Right if we are at the end of the input\n        else if (keyboardEvent.keyCode === 3\n          /* Enter */\n          || shouldOpenInBackground) {\n            DOM.EventHelper.stop(e, true);\n\n            var focus_1 = _this.tree.getFocus();\n\n            if (focus_1) {\n              _this.elementSelected(focus_1, e, shouldOpenInBackground ? 2\n              /* OPEN_IN_BACKGROUND */\n              : 1\n              /* OPEN */\n              );\n            }\n          }\n    })); // Result count for screen readers\n\n\n    this.resultCount = document.createElement('div');\n    DOM.addClass(this.resultCount, 'quick-open-result-count');\n    this.resultCount.setAttribute('aria-live', 'polite');\n    this.resultCount.setAttribute('aria-atomic', 'true');\n    this.element.appendChild(this.resultCount); // Tree\n\n    this.treeContainer = document.createElement('div');\n    DOM.addClass(this.treeContainer, 'quick-open-tree');\n    this.element.appendChild(this.treeContainer);\n\n    var createTree = this.options.treeCreator || function (container, config, opts) {\n      return new Tree(container, config, opts);\n    };\n\n    this.tree = this._register(createTree(this.treeContainer, {\n      dataSource: new DataSource(this),\n      controller: new QuickOpenController({\n        clickBehavior: 1\n        /* ON_MOUSE_UP */\n        ,\n        keyboardSupport: this.options.keyboardSupport\n      }),\n      renderer: this.renderer = new Renderer(this, this.styles),\n      filter: new Filter(this),\n      accessibilityProvider: new AccessibilityProvider(this)\n    }, {\n      twistiePixels: 11,\n      indentPixels: 0,\n      alwaysFocused: true,\n      verticalScrollMode: 3\n      /* Visible */\n      ,\n      horizontalScrollMode: 2\n      /* Hidden */\n      ,\n      ariaLabel: nls.localize('treeAriaLabel', \"Quick Picker\"),\n      keyboardSupport: this.options.keyboardSupport,\n      preventRootFocus: false\n    }));\n    this.treeElement = this.tree.getHTMLElement(); // Handle Focus and Selection event\n\n    this._register(this.tree.onDidChangeFocus(function (event) {\n      _this.elementFocused(event.focus, event);\n    }));\n\n    this._register(this.tree.onDidChangeSelection(function (event) {\n      if (event.selection && event.selection.length > 0) {\n        var mouseEvent = event.payload && event.payload.originalEvent instanceof StandardMouseEvent ? event.payload.originalEvent : undefined;\n        var shouldOpenInBackground = mouseEvent ? _this.shouldOpenInBackground(mouseEvent) : false;\n\n        _this.elementSelected(event.selection[0], event, shouldOpenInBackground ? 2\n        /* OPEN_IN_BACKGROUND */\n        : 1\n        /* OPEN */\n        );\n      }\n    }));\n\n    this._register(DOM.addDisposableListener(this.treeContainer, DOM.EventType.KEY_DOWN, function (e) {\n      var keyboardEvent = new StandardKeyboardEvent(e); // Only handle when in quick navigation mode\n\n      if (!_this.quickNavigateConfiguration) {\n        return;\n      } // Support keyboard navigation in quick navigation mode\n\n\n      if (keyboardEvent.keyCode === 18\n      /* DownArrow */\n      || keyboardEvent.keyCode === 16\n      /* UpArrow */\n      || keyboardEvent.keyCode === 12\n      /* PageDown */\n      || keyboardEvent.keyCode === 11\n      /* PageUp */\n      ) {\n          DOM.EventHelper.stop(e, true);\n\n          _this.navigateInTree(keyboardEvent.keyCode);\n        }\n    }));\n\n    this._register(DOM.addDisposableListener(this.treeContainer, DOM.EventType.KEY_UP, function (e) {\n      var keyboardEvent = new StandardKeyboardEvent(e);\n      var keyCode = keyboardEvent.keyCode; // Only handle when in quick navigation mode\n\n      if (!_this.quickNavigateConfiguration) {\n        return;\n      } // Select element when keys are pressed that signal it\n\n\n      var quickNavKeys = _this.quickNavigateConfiguration.keybindings;\n      var wasTriggerKeyPressed = keyCode === 3\n      /* Enter */\n      || quickNavKeys.some(function (k) {\n        var _a = k.getParts(),\n            firstPart = _a[0],\n            chordPart = _a[1];\n\n        if (chordPart) {\n          return false;\n        }\n\n        if (firstPart.shiftKey && keyCode === 4\n        /* Shift */\n        ) {\n            if (keyboardEvent.ctrlKey || keyboardEvent.altKey || keyboardEvent.metaKey) {\n              return false; // this is an optimistic check for the shift key being used to navigate back in quick open\n            }\n\n            return true;\n          }\n\n        if (firstPart.altKey && keyCode === 6\n        /* Alt */\n        ) {\n            return true;\n          }\n\n        if (firstPart.ctrlKey && keyCode === 5\n        /* Ctrl */\n        ) {\n            return true;\n          }\n\n        if (firstPart.metaKey && keyCode === 57\n        /* Meta */\n        ) {\n            return true;\n          }\n\n        return false;\n      });\n\n      if (wasTriggerKeyPressed) {\n        var focus_2 = _this.tree.getFocus();\n\n        if (focus_2) {\n          _this.elementSelected(focus_2, e);\n        }\n      }\n    })); // Support layout\n\n\n    if (this.layoutDimensions) {\n      this.layout(this.layoutDimensions);\n    }\n\n    this.applyStyles(); // Allows focus to switch to next/previous entry after tab into an actionbar item\n\n    this._register(DOM.addDisposableListener(this.treeContainer, DOM.EventType.KEY_DOWN, function (e) {\n      var keyboardEvent = new StandardKeyboardEvent(e); // Only handle when not in quick navigation mode\n\n      if (_this.quickNavigateConfiguration) {\n        return;\n      }\n\n      if (keyboardEvent.keyCode === 18\n      /* DownArrow */\n      || keyboardEvent.keyCode === 16\n      /* UpArrow */\n      || keyboardEvent.keyCode === 12\n      /* PageDown */\n      || keyboardEvent.keyCode === 11\n      /* PageUp */\n      ) {\n          DOM.EventHelper.stop(e, true);\n\n          _this.navigateInTree(keyboardEvent.keyCode, keyboardEvent.shiftKey);\n\n          _this.treeElement.focus();\n        }\n    }));\n\n    return this.element;\n  };\n\n  QuickOpenWidget.prototype.style = function (styles) {\n    this.styles = styles;\n    this.applyStyles();\n  };\n\n  QuickOpenWidget.prototype.applyStyles = function () {\n    if (this.element) {\n      var foreground = this.styles.foreground ? this.styles.foreground.toString() : null;\n      var background = this.styles.background ? this.styles.background.toString() : null;\n      var borderColor = this.styles.borderColor ? this.styles.borderColor.toString() : null;\n      var widgetShadow = this.styles.widgetShadow ? this.styles.widgetShadow.toString() : null;\n      this.element.style.color = foreground;\n      this.element.style.backgroundColor = background;\n      this.element.style.borderColor = borderColor;\n      this.element.style.borderWidth = borderColor ? '1px' : null;\n      this.element.style.borderStyle = borderColor ? 'solid' : null;\n      this.element.style.boxShadow = widgetShadow ? \"0 5px 8px \" + widgetShadow : null;\n    }\n\n    if (this.progressBar) {\n      this.progressBar.style({\n        progressBarBackground: this.styles.progressBarBackground\n      });\n    }\n\n    if (this.inputBox) {\n      this.inputBox.style({\n        inputBackground: this.styles.inputBackground,\n        inputForeground: this.styles.inputForeground,\n        inputBorder: this.styles.inputBorder,\n        inputValidationInfoBackground: this.styles.inputValidationInfoBackground,\n        inputValidationInfoForeground: this.styles.inputValidationInfoForeground,\n        inputValidationInfoBorder: this.styles.inputValidationInfoBorder,\n        inputValidationWarningBackground: this.styles.inputValidationWarningBackground,\n        inputValidationWarningForeground: this.styles.inputValidationWarningForeground,\n        inputValidationWarningBorder: this.styles.inputValidationWarningBorder,\n        inputValidationErrorBackground: this.styles.inputValidationErrorBackground,\n        inputValidationErrorForeground: this.styles.inputValidationErrorForeground,\n        inputValidationErrorBorder: this.styles.inputValidationErrorBorder\n      });\n    }\n\n    if (this.tree && !this.options.treeCreator) {\n      this.tree.style(this.styles);\n    }\n\n    if (this.renderer) {\n      this.renderer.updateStyles(this.styles);\n    }\n  };\n\n  QuickOpenWidget.prototype.shouldOpenInBackground = function (e) {\n    // Keyboard\n    if (e instanceof StandardKeyboardEvent) {\n      if (e.keyCode !== 17\n      /* RightArrow */\n      ) {\n          return false; // only for right arrow\n        }\n\n      if (e.metaKey || e.ctrlKey || e.shiftKey || e.altKey) {\n        return false; // no modifiers allowed\n      } // validate the cursor is at the end of the input and there is no selection,\n      // and if not prevent opening in the background such as the selection can be changed\n\n\n      var element = this.inputBox.inputElement;\n      return element.selectionEnd === this.inputBox.value.length && element.selectionStart === element.selectionEnd;\n    } // Mouse\n\n\n    return e.middleButton;\n  };\n\n  QuickOpenWidget.prototype.onType = function () {\n    var value = this.inputBox.value; // Adjust help text as needed if present\n\n    if (this.helpText) {\n      if (value) {\n        DOM.hide(this.helpText);\n      } else {\n        DOM.show(this.helpText);\n      }\n    } // Send to callbacks\n\n\n    this.callbacks.onType(value);\n  };\n\n  QuickOpenWidget.prototype.navigateInTree = function (keyCode, isShift) {\n    var model = this.tree.getInput();\n    var entries = model ? model.entries : [];\n    var oldFocus = this.tree.getFocus(); // Normal Navigation\n\n    switch (keyCode) {\n      case 18\n      /* DownArrow */\n      :\n        this.tree.focusNext();\n        break;\n\n      case 16\n      /* UpArrow */\n      :\n        this.tree.focusPrevious();\n        break;\n\n      case 12\n      /* PageDown */\n      :\n        this.tree.focusNextPage();\n        break;\n\n      case 11\n      /* PageUp */\n      :\n        this.tree.focusPreviousPage();\n        break;\n\n      case 2\n      /* Tab */\n      :\n        if (isShift) {\n          this.tree.focusPrevious();\n        } else {\n          this.tree.focusNext();\n        }\n\n        break;\n    }\n\n    var newFocus = this.tree.getFocus(); // Support cycle-through navigation if focus did not change\n\n    if (entries.length > 1 && oldFocus === newFocus) {\n      // Up from no entry or first entry goes down to last\n      if (keyCode === 16\n      /* UpArrow */\n      || keyCode === 2\n      /* Tab */\n      && isShift) {\n        this.tree.focusLast();\n      } // Down from last entry goes to up to first\n      else if (keyCode === 18\n        /* DownArrow */\n        || keyCode === 2\n        /* Tab */\n        && !isShift) {\n          this.tree.focusFirst();\n        }\n    } // Reveal\n\n\n    newFocus = this.tree.getFocus();\n\n    if (newFocus) {\n      this.tree.reveal(newFocus);\n    }\n  };\n\n  QuickOpenWidget.prototype.elementFocused = function (value, event) {\n    if (!value || !this.isVisible()) {\n      return;\n    } // ARIA\n\n\n    var arivaActiveDescendant = this.treeElement.getAttribute('aria-activedescendant');\n\n    if (arivaActiveDescendant) {\n      this.inputElement.setAttribute('aria-activedescendant', arivaActiveDescendant);\n    } else {\n      this.inputElement.removeAttribute('aria-activedescendant');\n    }\n\n    var context = {\n      event: event,\n      keymods: this.extractKeyMods(event),\n      quickNavigateConfiguration: this.quickNavigateConfiguration\n    };\n    this.model.runner.run(value, 0\n    /* PREVIEW */\n    , context);\n  };\n\n  QuickOpenWidget.prototype.elementSelected = function (value, event, preferredMode) {\n    var hide = true; // Trigger open of element on selection\n\n    if (this.isVisible()) {\n      var mode = preferredMode || 1\n      /* OPEN */\n      ;\n      var context = {\n        event: event,\n        keymods: this.extractKeyMods(event),\n        quickNavigateConfiguration: this.quickNavigateConfiguration\n      };\n      hide = this.model.runner.run(value, mode, context);\n    } // Hide if command was run successfully\n\n\n    if (hide) {\n      this.hide(0\n      /* ELEMENT_SELECTED */\n      );\n    }\n  };\n\n  QuickOpenWidget.prototype.extractKeyMods = function (event) {\n    return {\n      ctrlCmd: event && (event.ctrlKey || event.metaKey || event.payload && event.payload.originalEvent && (event.payload.originalEvent.ctrlKey || event.payload.originalEvent.metaKey)),\n      alt: event && (event.altKey || event.payload && event.payload.originalEvent && event.payload.originalEvent.altKey)\n    };\n  };\n\n  QuickOpenWidget.prototype.show = function (param, options) {\n    this.visible = true;\n    this.isLoosingFocus = false;\n    this.quickNavigateConfiguration = options ? options.quickNavigateConfiguration : undefined; // Adjust UI for quick navigate mode\n\n    if (this.quickNavigateConfiguration) {\n      DOM.hide(this.inputContainer);\n      DOM.show(this.element);\n      this.tree.domFocus();\n    } // Otherwise use normal UI\n    else {\n        DOM.show(this.inputContainer);\n        DOM.show(this.element);\n        this.inputBox.focus();\n      } // Adjust Help text for IE\n\n\n    if (this.helpText) {\n      if (this.quickNavigateConfiguration || types.isString(param)) {\n        DOM.hide(this.helpText);\n      } else {\n        DOM.show(this.helpText);\n      }\n    } // Show based on param\n\n\n    if (types.isString(param)) {\n      this.doShowWithPrefix(param);\n    } else {\n      if (options && options.value) {\n        this.restoreLastInput(options.value);\n      }\n\n      this.doShowWithInput(param, options && options.autoFocus ? options.autoFocus : {});\n    } // Respect selectAll option\n\n\n    if (options && options.inputSelection && !this.quickNavigateConfiguration) {\n      this.inputBox.select(options.inputSelection);\n    }\n\n    if (this.callbacks.onShow) {\n      this.callbacks.onShow();\n    }\n  };\n\n  QuickOpenWidget.prototype.restoreLastInput = function (lastInput) {\n    this.inputBox.value = lastInput;\n    this.inputBox.select();\n    this.callbacks.onType(lastInput);\n  };\n\n  QuickOpenWidget.prototype.doShowWithPrefix = function (prefix) {\n    this.inputBox.value = prefix;\n    this.callbacks.onType(prefix);\n  };\n\n  QuickOpenWidget.prototype.doShowWithInput = function (input, autoFocus) {\n    this.setInput(input, autoFocus);\n  };\n\n  QuickOpenWidget.prototype.setInputAndLayout = function (input, autoFocus) {\n    var _this = this;\n\n    this.treeContainer.style.height = this.getHeight(input) + \"px\";\n    this.tree.setInput(null).then(function () {\n      _this.model = input; // ARIA\n\n      _this.inputElement.setAttribute('aria-haspopup', String(input && input.entries && input.entries.length > 0));\n\n      return _this.tree.setInput(input);\n    }).then(function () {\n      // Indicate entries to tree\n      _this.tree.layout();\n\n      var entries = input ? input.entries.filter(function (e) {\n        return _this.isElementVisible(input, e);\n      }) : [];\n\n      _this.updateResultCount(entries.length); // Handle auto focus\n\n\n      if (entries.length) {\n        _this.autoFocus(input, entries, autoFocus);\n      }\n    });\n  };\n\n  QuickOpenWidget.prototype.isElementVisible = function (input, e) {\n    if (!input.filter) {\n      return true;\n    }\n\n    return input.filter.isVisible(e);\n  };\n\n  QuickOpenWidget.prototype.autoFocus = function (input, entries, autoFocus) {\n    if (autoFocus === void 0) {\n      autoFocus = {};\n    } // First check for auto focus of prefix matches\n\n\n    if (autoFocus.autoFocusPrefixMatch) {\n      var caseSensitiveMatch = void 0;\n      var caseInsensitiveMatch = void 0;\n      var prefix = autoFocus.autoFocusPrefixMatch;\n      var lowerCasePrefix = prefix.toLowerCase();\n\n      for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\n        var entry = entries_1[_i];\n        var label = input.dataSource.getLabel(entry) || '';\n\n        if (!caseSensitiveMatch && label.indexOf(prefix) === 0) {\n          caseSensitiveMatch = entry;\n        } else if (!caseInsensitiveMatch && label.toLowerCase().indexOf(lowerCasePrefix) === 0) {\n          caseInsensitiveMatch = entry;\n        }\n\n        if (caseSensitiveMatch && caseInsensitiveMatch) {\n          break;\n        }\n      }\n\n      var entryToFocus = caseSensitiveMatch || caseInsensitiveMatch;\n\n      if (entryToFocus) {\n        this.tree.setFocus(entryToFocus);\n        this.tree.reveal(entryToFocus, 0.5);\n        return;\n      }\n    } // Second check for auto focus of first entry\n\n\n    if (autoFocus.autoFocusFirstEntry) {\n      this.tree.focusFirst();\n      this.tree.reveal(this.tree.getFocus());\n    } // Third check for specific index option\n    else if (typeof autoFocus.autoFocusIndex === 'number') {\n        if (entries.length > autoFocus.autoFocusIndex) {\n          this.tree.focusNth(autoFocus.autoFocusIndex);\n          this.tree.reveal(this.tree.getFocus());\n        }\n      } // Check for auto focus of second entry\n      else if (autoFocus.autoFocusSecondEntry) {\n          if (entries.length > 1) {\n            this.tree.focusNth(1);\n          }\n        } // Finally check for auto focus of last entry\n        else if (autoFocus.autoFocusLastEntry) {\n            if (entries.length > 1) {\n              this.tree.focusLast();\n            }\n          }\n  };\n\n  QuickOpenWidget.prototype.getHeight = function (input) {\n    var _this = this;\n\n    var renderer = input.renderer;\n\n    if (!input) {\n      var itemHeight = renderer.getHeight(null);\n      return this.options.minItemsToShow ? this.options.minItemsToShow * itemHeight : 0;\n    }\n\n    var height = 0;\n    var preferredItemsHeight;\n\n    if (this.layoutDimensions && this.layoutDimensions.height) {\n      preferredItemsHeight = (this.layoutDimensions.height - 50\n      /* subtract height of input field (30px) and some spacing (drop shadow) to fit */\n      ) * 0.4\n      /* max 40% of screen */\n      ;\n    }\n\n    if (!preferredItemsHeight || preferredItemsHeight > QuickOpenWidget.MAX_ITEMS_HEIGHT) {\n      preferredItemsHeight = QuickOpenWidget.MAX_ITEMS_HEIGHT;\n    }\n\n    var entries = input.entries.filter(function (e) {\n      return _this.isElementVisible(input, e);\n    });\n    var maxEntries = this.options.maxItemsToShow || entries.length;\n\n    for (var i = 0; i < maxEntries && i < entries.length; i++) {\n      var entryHeight = renderer.getHeight(entries[i]);\n\n      if (height + entryHeight <= preferredItemsHeight) {\n        height += entryHeight;\n      } else {\n        break;\n      }\n    }\n\n    return height;\n  };\n\n  QuickOpenWidget.prototype.updateResultCount = function (count) {\n    this.resultCount.textContent = nls.localize({\n      key: 'quickInput.visibleCount',\n      comment: ['This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers.']\n    }, \"{0} Results\", count);\n  };\n\n  QuickOpenWidget.prototype.hide = function (reason) {\n    if (!this.isVisible()) {\n      return;\n    }\n\n    this.visible = false;\n    DOM.hide(this.element);\n    this.element.blur(); // Clear input field and clear tree\n\n    this.inputBox.value = '';\n    this.tree.setInput(null); // ARIA\n\n    this.inputElement.setAttribute('aria-haspopup', 'false'); // Reset Tree Height\n\n    this.treeContainer.style.height = (this.options.minItemsToShow ? this.options.minItemsToShow * 22 : 0) + \"px\"; // Clear any running Progress\n\n    this.progressBar.stop().hide(); // Clear Focus\n\n    if (this.tree.isDOMFocused()) {\n      this.tree.domBlur();\n    } else if (this.inputBox.hasFocus()) {\n      this.inputBox.blur();\n    } // Callbacks\n\n\n    if (reason === 0\n    /* ELEMENT_SELECTED */\n    ) {\n        this.callbacks.onOk();\n      } else {\n      this.callbacks.onCancel();\n    }\n\n    if (this.callbacks.onHide) {\n      this.callbacks.onHide(reason);\n    }\n  };\n\n  QuickOpenWidget.prototype.setInput = function (input, autoFocus, ariaLabel) {\n    if (!this.isVisible()) {\n      return;\n    } // If the input changes, indicate this to the tree\n\n\n    if (!!this.getInput()) {\n      this.onInputChanging();\n    } // Adapt tree height to entries and apply input\n\n\n    this.setInputAndLayout(input, autoFocus); // Apply ARIA\n\n    if (this.inputBox) {\n      this.inputBox.setAriaLabel(ariaLabel || DEFAULT_INPUT_ARIA_LABEL);\n    }\n  };\n\n  QuickOpenWidget.prototype.onInputChanging = function () {\n    var _this = this;\n\n    if (this.inputChangingTimeoutHandle) {\n      clearTimeout(this.inputChangingTimeoutHandle);\n      this.inputChangingTimeoutHandle = null;\n    } // when the input is changing in quick open, we indicate this as CSS class to the widget\n    // for a certain timeout. this helps reducing some hectic UI updates when input changes quickly\n\n\n    DOM.addClass(this.element, 'content-changing');\n    this.inputChangingTimeoutHandle = setTimeout(function () {\n      DOM.removeClass(_this.element, 'content-changing');\n    }, 500);\n  };\n\n  QuickOpenWidget.prototype.getInput = function () {\n    return this.tree.getInput();\n  };\n\n  QuickOpenWidget.prototype.isVisible = function () {\n    return this.visible;\n  };\n\n  QuickOpenWidget.prototype.layout = function (dimension) {\n    this.layoutDimensions = dimension; // Apply to quick open width (height is dynamic by number of items to show)\n\n    var quickOpenWidth = Math.min(this.layoutDimensions.width * 0.62\n    /* golden cut */\n    , QuickOpenWidget.MAX_WIDTH);\n\n    if (this.element) {\n      // quick open\n      this.element.style.width = quickOpenWidth + \"px\";\n      this.element.style.marginLeft = \"-\" + quickOpenWidth / 2 + \"px\"; // input field\n\n      this.inputContainer.style.width = quickOpenWidth - 12 + \"px\";\n    }\n  };\n\n  QuickOpenWidget.prototype.gainingFocus = function () {\n    this.isLoosingFocus = false;\n  };\n\n  QuickOpenWidget.prototype.loosingFocus = function (e) {\n    var _this = this;\n\n    if (!this.isVisible()) {\n      return;\n    }\n\n    var relatedTarget = e.relatedTarget;\n\n    if (!this.quickNavigateConfiguration && DOM.isAncestor(relatedTarget, this.element)) {\n      return; // user clicked somewhere into quick open widget, do not close thereby\n    }\n\n    this.isLoosingFocus = true;\n    setTimeout(function () {\n      if (!_this.isLoosingFocus || _this.isDisposed) {\n        return;\n      }\n\n      var veto = _this.callbacks.onFocusLost && _this.callbacks.onFocusLost();\n\n      if (!veto) {\n        _this.hide(1\n        /* FOCUS_LOST */\n        );\n      }\n    }, 0);\n  };\n\n  QuickOpenWidget.prototype.dispose = function () {\n    _super.prototype.dispose.call(this);\n\n    this.isDisposed = true;\n  };\n\n  QuickOpenWidget.MAX_WIDTH = 600; // Max total width of quick open widget\n\n  QuickOpenWidget.MAX_ITEMS_HEIGHT = 20 * 22; // Max height of item list below input field\n\n  return QuickOpenWidget;\n}(Disposable);\n\nexport { QuickOpenWidget };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Dimension } from '../../../../base/browser/dom.js';\nimport { QuickOpenWidget } from '../../../../base/parts/quickopen/browser/quickOpenWidget.js';\nimport { foreground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { attachQuickOpenStyler } from '../../../../platform/theme/common/styler.js';\n\nvar QuickOpenEditorWidget =\n/** @class */\nfunction () {\n  function QuickOpenEditorWidget(codeEditor, onOk, onCancel, onType, configuration, themeService) {\n    this.codeEditor = codeEditor;\n    this.themeService = themeService;\n    this.create(onOk, onCancel, onType, configuration);\n  }\n\n  QuickOpenEditorWidget.prototype.create = function (onOk, onCancel, onType, configuration) {\n    this.domNode = document.createElement('div');\n    this.quickOpenWidget = new QuickOpenWidget(this.domNode, {\n      onOk: onOk,\n      onCancel: onCancel,\n      onType: onType\n    }, {\n      inputPlaceHolder: undefined,\n      inputAriaLabel: configuration.inputAriaLabel,\n      keyboardSupport: true\n    });\n    this.styler = attachQuickOpenStyler(this.quickOpenWidget, this.themeService, {\n      pickerGroupForeground: foreground\n    });\n    this.quickOpenWidget.create();\n    this.codeEditor.addOverlayWidget(this);\n  };\n\n  QuickOpenEditorWidget.prototype.setInput = function (model, focus) {\n    this.quickOpenWidget.setInput(model, focus);\n  };\n\n  QuickOpenEditorWidget.prototype.getId = function () {\n    return QuickOpenEditorWidget.ID;\n  };\n\n  QuickOpenEditorWidget.prototype.getDomNode = function () {\n    return this.domNode;\n  };\n\n  QuickOpenEditorWidget.prototype.destroy = function () {\n    this.codeEditor.removeOverlayWidget(this);\n    this.quickOpenWidget.dispose();\n    this.styler.dispose();\n  };\n\n  QuickOpenEditorWidget.prototype.show = function (value) {\n    this.visible = true;\n    var editorLayout = this.codeEditor.getLayoutInfo();\n\n    if (editorLayout) {\n      this.quickOpenWidget.layout(new Dimension(editorLayout.width, editorLayout.height));\n    }\n\n    this.quickOpenWidget.show(value);\n    this.codeEditor.layoutOverlayWidget(this);\n  };\n\n  QuickOpenEditorWidget.prototype.getPosition = function () {\n    if (this.visible) {\n      return {\n        preference: 2\n        /* TOP_CENTER */\n\n      };\n    }\n\n    return null;\n  };\n\n  QuickOpenEditorWidget.ID = 'editor.contrib.quickOpenEditorWidget';\n  return QuickOpenEditorWidget;\n}();\n\nexport { QuickOpenEditorWidget };","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport './editorQuickOpen.css';\nimport { EditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { QuickOpenEditorWidget } from './quickOpenEditorWidget.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\n\nvar QuickOpenController =\n/** @class */\nfunction () {\n  function QuickOpenController(editor, themeService) {\n    this.themeService = themeService;\n    this.editor = editor;\n  }\n\n  QuickOpenController.get = function (editor) {\n    return editor.getContribution(QuickOpenController.ID);\n  };\n\n  QuickOpenController.prototype.getId = function () {\n    return QuickOpenController.ID;\n  };\n\n  QuickOpenController.prototype.dispose = function () {\n    // Dispose widget\n    if (this.widget) {\n      this.widget.destroy();\n      this.widget = null;\n    }\n  };\n\n  QuickOpenController.prototype.run = function (opts) {\n    var _this = this;\n\n    if (this.widget) {\n      this.widget.destroy();\n      this.widget = null;\n    } // Create goto line widget\n\n\n    var onClose = function onClose(canceled) {\n      // Clear Highlight Decorations if present\n      _this.clearDecorations(); // Restore selection if canceled\n\n\n      if (canceled && _this.lastKnownEditorSelection) {\n        _this.editor.setSelection(_this.lastKnownEditorSelection);\n\n        _this.editor.revealRangeInCenterIfOutsideViewport(_this.lastKnownEditorSelection, 0\n        /* Smooth */\n        );\n      }\n\n      _this.lastKnownEditorSelection = null; // Return focus to the editor if\n      // - focus is back on the <body> element because no other focusable element was clicked\n      // - a command was picked from the picker which indicates the editor should get focused\n\n      if (document.activeElement === document.body || !canceled) {\n        _this.editor.focus();\n      }\n    };\n\n    this.widget = new QuickOpenEditorWidget(this.editor, function () {\n      return onClose(false);\n    }, function () {\n      return onClose(true);\n    }, function (value) {\n      _this.widget.setInput(opts.getModel(value), opts.getAutoFocus(value));\n    }, {\n      inputAriaLabel: opts.inputAriaLabel\n    }, this.themeService); // Remember selection to be able to restore on cancel\n\n    if (!this.lastKnownEditorSelection) {\n      this.lastKnownEditorSelection = this.editor.getSelection();\n    } // Show\n\n\n    this.widget.show('');\n  };\n\n  QuickOpenController.prototype.decorateLine = function (range, editor) {\n    var oldDecorations = [];\n\n    if (this.rangeHighlightDecorationId) {\n      oldDecorations.push(this.rangeHighlightDecorationId);\n      this.rangeHighlightDecorationId = null;\n    }\n\n    var newDecorations = [{\n      range: range,\n      options: QuickOpenController._RANGE_HIGHLIGHT_DECORATION\n    }];\n    var decorations = editor.deltaDecorations(oldDecorations, newDecorations);\n    this.rangeHighlightDecorationId = decorations[0];\n  };\n\n  QuickOpenController.prototype.clearDecorations = function () {\n    if (this.rangeHighlightDecorationId) {\n      this.editor.deltaDecorations([this.rangeHighlightDecorationId], []);\n      this.rangeHighlightDecorationId = null;\n    }\n  };\n\n  QuickOpenController.ID = 'editor.controller.quickOpenController';\n  QuickOpenController._RANGE_HIGHLIGHT_DECORATION = ModelDecorationOptions.register({\n    className: 'rangeHighlight',\n    isWholeLine: true\n  });\n  QuickOpenController = __decorate([__param(1, IThemeService)], QuickOpenController);\n  return QuickOpenController;\n}();\n\nexport { QuickOpenController };\n/**\n * Base class for providing quick open in the editor.\n */\n\nvar BaseEditorQuickOpenAction =\n/** @class */\nfunction (_super) {\n  __extends(BaseEditorQuickOpenAction, _super);\n\n  function BaseEditorQuickOpenAction(inputAriaLabel, opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this._inputAriaLabel = inputAriaLabel;\n    return _this;\n  }\n\n  BaseEditorQuickOpenAction.prototype.getController = function (editor) {\n    return QuickOpenController.get(editor);\n  };\n\n  BaseEditorQuickOpenAction.prototype._show = function (controller, opts) {\n    controller.run({\n      inputAriaLabel: this._inputAriaLabel,\n      getModel: function getModel(value) {\n        return opts.getModel(value);\n      },\n      getAutoFocus: function getAutoFocus(searchValue) {\n        return opts.getAutoFocus(searchValue);\n      }\n    });\n  };\n\n  return BaseEditorQuickOpenAction;\n}(EditorAction);\n\nexport { BaseEditorQuickOpenAction };\nregisterEditorContribution(QuickOpenController);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport './gotoLine.css';\nimport * as strings from '../../../../base/common/strings.js';\nimport { QuickOpenEntry, QuickOpenModel } from '../../../../base/parts/quickopen/browser/quickOpenModel.js';\nimport { isCodeEditor } from '../../../browser/editorBrowser.js';\nimport { registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { BaseEditorQuickOpenAction } from './editorQuickOpen.js';\nimport { GoToLineNLS } from '../../../common/standaloneStrings.js';\n\nvar GotoLineEntry =\n/** @class */\nfunction (_super) {\n  __extends(GotoLineEntry, _super);\n\n  function GotoLineEntry(line, editor, decorator) {\n    var _this = _super.call(this) || this;\n\n    _this.editor = editor;\n    _this.decorator = decorator;\n    _this.parseResult = _this.parseInput(line);\n    return _this;\n  }\n\n  GotoLineEntry.prototype.parseInput = function (line) {\n    var numbers = line.split(',').map(function (part) {\n      return parseInt(part, 10);\n    }).filter(function (part) {\n      return !isNaN(part);\n    });\n    var position;\n\n    if (numbers.length === 0) {\n      position = new Position(-1, -1);\n    } else if (numbers.length === 1) {\n      position = new Position(numbers[0], 1);\n    } else {\n      position = new Position(numbers[0], numbers[1]);\n    }\n\n    var model;\n\n    if (isCodeEditor(this.editor)) {\n      model = this.editor.getModel();\n    } else {\n      var diffModel = this.editor.getModel();\n      model = diffModel ? diffModel.modified : null;\n    }\n\n    var isValid = model ? model.validatePosition(position).equals(position) : false;\n    var label;\n\n    if (isValid) {\n      if (position.column && position.column > 1) {\n        label = strings.format(GoToLineNLS.gotoLineLabelValidLineAndColumn, position.lineNumber, position.column);\n      } else {\n        label = strings.format(GoToLineNLS.gotoLineLabelValidLine, position.lineNumber);\n      }\n    } else if (position.lineNumber < 1 || position.lineNumber > (model ? model.getLineCount() : 0)) {\n      label = strings.format(GoToLineNLS.gotoLineLabelEmptyWithLineLimit, model ? model.getLineCount() : 0);\n    } else {\n      label = strings.format(GoToLineNLS.gotoLineLabelEmptyWithLineAndColumnLimit, model ? model.getLineMaxColumn(position.lineNumber) : 0);\n    }\n\n    return {\n      position: position,\n      isValid: isValid,\n      label: label\n    };\n  };\n\n  GotoLineEntry.prototype.getLabel = function () {\n    return this.parseResult.label;\n  };\n\n  GotoLineEntry.prototype.getAriaLabel = function () {\n    var position = this.editor.getPosition();\n    var currentLine = position ? position.lineNumber : 0;\n    return strings.format(GoToLineNLS.gotoLineAriaLabel, currentLine, this.parseResult.label);\n  };\n\n  GotoLineEntry.prototype.run = function (mode, _context) {\n    if (mode === 1\n    /* OPEN */\n    ) {\n        return this.runOpen();\n      }\n\n    return this.runPreview();\n  };\n\n  GotoLineEntry.prototype.runOpen = function () {\n    // No-op if range is not valid\n    if (!this.parseResult.isValid) {\n      return false;\n    } // Apply selection and focus\n\n\n    var range = this.toSelection();\n    this.editor.setSelection(range);\n    this.editor.revealRangeInCenter(range, 0\n    /* Smooth */\n    );\n    this.editor.focus();\n    return true;\n  };\n\n  GotoLineEntry.prototype.runPreview = function () {\n    // No-op if range is not valid\n    if (!this.parseResult.isValid) {\n      this.decorator.clearDecorations();\n      return false;\n    } // Select Line Position\n\n\n    var range = this.toSelection();\n    this.editor.revealRangeInCenter(range, 0\n    /* Smooth */\n    ); // Decorate if possible\n\n    this.decorator.decorateLine(range, this.editor);\n    return false;\n  };\n\n  GotoLineEntry.prototype.toSelection = function () {\n    return new Range(this.parseResult.position.lineNumber, this.parseResult.position.column, this.parseResult.position.lineNumber, this.parseResult.position.column);\n  };\n\n  return GotoLineEntry;\n}(QuickOpenEntry);\n\nexport { GotoLineEntry };\n\nvar GotoLineAction =\n/** @class */\nfunction (_super) {\n  __extends(GotoLineAction, _super);\n\n  function GotoLineAction() {\n    return _super.call(this, GoToLineNLS.gotoLineActionInput, {\n      id: 'editor.action.gotoLine',\n      label: GoToLineNLS.gotoLineActionLabel,\n      alias: 'Go to Line...',\n      precondition: null,\n      kbOpts: {\n        kbExpr: EditorContextKeys.focus,\n        primary: 2048\n        /* CtrlCmd */\n        | 37\n        /* KEY_G */\n        ,\n        mac: {\n          primary: 256\n          /* WinCtrl */\n          | 37\n          /* KEY_G */\n\n        },\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  GotoLineAction.prototype.run = function (accessor, editor) {\n    var _this = this;\n\n    this._show(this.getController(editor), {\n      getModel: function getModel(value) {\n        return new QuickOpenModel([new GotoLineEntry(value, editor, _this.getController(editor))]);\n      },\n      getAutoFocus: function getAutoFocus(searchValue) {\n        return {\n          autoFocusFirstEntry: searchValue.length > 0\n        };\n      }\n    });\n  };\n\n  return GotoLineAction;\n}(BaseEditorQuickOpenAction);\n\nexport { GotoLineAction };\nregisterEditorAction(GotoLineAction);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport * as strings from '../../../../base/common/strings.js';\nimport * as browser from '../../../../base/browser/browser.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { matchesFuzzy } from '../../../../base/common/filters.js';\nimport { QuickOpenEntryGroup, QuickOpenModel } from '../../../../base/parts/quickopen/browser/quickOpenModel.js';\nimport { registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { BaseEditorQuickOpenAction } from './editorQuickOpen.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { QuickCommandNLS } from '../../../common/standaloneStrings.js';\n\nvar EditorActionCommandEntry =\n/** @class */\nfunction (_super) {\n  __extends(EditorActionCommandEntry, _super);\n\n  function EditorActionCommandEntry(key, keyAriaLabel, highlights, action, editor) {\n    var _this = _super.call(this) || this;\n\n    _this.key = key;\n    _this.keyAriaLabel = keyAriaLabel;\n\n    _this.setHighlights(highlights);\n\n    _this.action = action;\n    _this.editor = editor;\n    return _this;\n  }\n\n  EditorActionCommandEntry.prototype.getLabel = function () {\n    return this.action.label;\n  };\n\n  EditorActionCommandEntry.prototype.getAriaLabel = function () {\n    if (this.keyAriaLabel) {\n      return strings.format(QuickCommandNLS.ariaLabelEntryWithKey, this.getLabel(), this.keyAriaLabel);\n    }\n\n    return strings.format(QuickCommandNLS.ariaLabelEntry, this.getLabel());\n  };\n\n  EditorActionCommandEntry.prototype.getGroupLabel = function () {\n    return this.key;\n  };\n\n  EditorActionCommandEntry.prototype.run = function (mode, context) {\n    var _this = this;\n\n    if (mode === 1\n    /* OPEN */\n    ) {\n        // Use a timeout to give the quick open widget a chance to close itself first\n        setTimeout(function () {\n          // Some actions are enabled only when editor has focus\n          _this.editor.focus();\n\n          try {\n            var promise = _this.action.run() || Promise.resolve();\n            promise.then(undefined, onUnexpectedError);\n          } catch (error) {\n            onUnexpectedError(error);\n          }\n        }, 50);\n        return true;\n      }\n\n    return false;\n  };\n\n  return EditorActionCommandEntry;\n}(QuickOpenEntryGroup);\n\nexport { EditorActionCommandEntry };\n\nvar QuickCommandAction =\n/** @class */\nfunction (_super) {\n  __extends(QuickCommandAction, _super);\n\n  function QuickCommandAction() {\n    return _super.call(this, QuickCommandNLS.quickCommandActionInput, {\n      id: 'editor.action.quickCommand',\n      label: QuickCommandNLS.quickCommandActionLabel,\n      alias: 'Command Palette',\n      precondition: null,\n      kbOpts: {\n        kbExpr: EditorContextKeys.focus,\n        primary: browser.isIE ? 512\n        /* Alt */\n        | 59\n        /* F1 */\n        : 59\n        /* F1 */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      },\n      menuOpts: {\n        group: 'z_commands',\n        order: 1\n      }\n    }) || this;\n  }\n\n  QuickCommandAction.prototype.run = function (accessor, editor) {\n    var _this = this;\n\n    var keybindingService = accessor.get(IKeybindingService);\n\n    this._show(this.getController(editor), {\n      getModel: function getModel(value) {\n        return new QuickOpenModel(_this._editorActionsToEntries(keybindingService, editor, value));\n      },\n      getAutoFocus: function getAutoFocus(searchValue) {\n        return {\n          autoFocusFirstEntry: true,\n          autoFocusPrefixMatch: searchValue\n        };\n      }\n    });\n  };\n\n  QuickCommandAction.prototype._sort = function (elementA, elementB) {\n    var elementAName = (elementA.getLabel() || '').toLowerCase();\n    var elementBName = (elementB.getLabel() || '').toLowerCase();\n    return elementAName.localeCompare(elementBName);\n  };\n\n  QuickCommandAction.prototype._editorActionsToEntries = function (keybindingService, editor, searchValue) {\n    var actions = editor.getSupportedActions();\n    var entries = [];\n\n    for (var _i = 0, actions_1 = actions; _i < actions_1.length; _i++) {\n      var action = actions_1[_i];\n      var keybinding = keybindingService.lookupKeybinding(action.id);\n\n      if (action.label) {\n        var highlights = matchesFuzzy(searchValue, action.label);\n\n        if (highlights) {\n          entries.push(new EditorActionCommandEntry(keybinding ? keybinding.getLabel() || '' : '', keybinding ? keybinding.getAriaLabel() || '' : '', highlights, action, editor));\n        }\n      }\n    } // Sort by name\n\n\n    entries = entries.sort(this._sort);\n    return entries;\n  };\n\n  return QuickCommandAction;\n}(BaseEditorQuickOpenAction);\n\nexport { QuickCommandAction };\nregisterEditorAction(QuickCommandAction);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { illegalArgument, onUnexpectedExternalError } from '../../../base/common/errors.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { Range } from '../../common/core/range.js';\nimport { registerLanguageCommand } from '../../browser/editorExtensions.js';\nimport { DocumentSymbolProviderRegistry } from '../../common/modes.js';\nimport { IModelService } from '../../common/services/modelService.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { ITextModelService } from '../../common/services/resolverService.js';\nexport function getDocumentSymbols(model, flat, token) {\n  var roots = [];\n  var promises = DocumentSymbolProviderRegistry.all(model).map(function (support) {\n    return Promise.resolve(support.provideDocumentSymbols(model, token)).then(function (result) {\n      if (Array.isArray(result)) {\n        roots.push.apply(roots, result);\n      }\n    }, function (err) {\n      onUnexpectedExternalError(err);\n    });\n  });\n  return Promise.all(promises).then(function () {\n    var flatEntries = [];\n\n    if (token.isCancellationRequested) {\n      return flatEntries;\n    }\n\n    if (flat) {\n      flatten(flatEntries, roots, '');\n    } else {\n      flatEntries = roots;\n    }\n\n    flatEntries.sort(compareEntriesUsingStart);\n    return flatEntries;\n  });\n}\n\nfunction compareEntriesUsingStart(a, b) {\n  return Range.compareRangesUsingStarts(a.range, b.range);\n}\n\nfunction flatten(bucket, entries, overrideContainerLabel) {\n  for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\n    var entry = entries_1[_i];\n    bucket.push({\n      kind: entry.kind,\n      name: entry.name,\n      detail: entry.detail,\n      containerName: entry.containerName || overrideContainerLabel,\n      range: entry.range,\n      selectionRange: entry.selectionRange,\n      children: undefined\n    });\n\n    if (entry.children) {\n      flatten(bucket, entry.children, entry.name);\n    }\n  }\n}\n\nregisterLanguageCommand('_executeDocumentSymbolProvider', function (accessor, args) {\n  var resource = args.resource;\n\n  if (!(resource instanceof URI)) {\n    throw illegalArgument('resource');\n  }\n\n  var model = accessor.get(IModelService).getModel(resource);\n\n  if (model) {\n    return getDocumentSymbols(model, false, CancellationToken.None);\n  }\n\n  return accessor.get(ITextModelService).createModelReference(resource).then(function (reference) {\n    return new Promise(function (resolve, reject) {\n      try {\n        var result = getDocumentSymbols(reference.object.textEditorModel, false, CancellationToken.None);\n        resolve(result);\n      } catch (err) {\n        reject(err);\n      }\n    }).finally(function () {\n      reference.dispose();\n    });\n  });\n});","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport './quickOutline.css';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { matchesFuzzy } from '../../../../base/common/filters.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { QuickOpenEntryGroup, QuickOpenModel } from '../../../../base/parts/quickopen/browser/quickOpenModel.js';\nimport { registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { DocumentSymbolProviderRegistry, symbolKindToCssClass } from '../../../common/modes.js';\nimport { getDocumentSymbols } from '../../../contrib/quickOpen/quickOpen.js';\nimport { BaseEditorQuickOpenAction } from './editorQuickOpen.js';\nimport { QuickOutlineNLS } from '../../../common/standaloneStrings.js';\nvar SCOPE_PREFIX = ':';\n\nvar SymbolEntry =\n/** @class */\nfunction (_super) {\n  __extends(SymbolEntry, _super);\n\n  function SymbolEntry(name, type, description, range, highlights, editor, decorator) {\n    var _this = _super.call(this) || this;\n\n    _this.name = name;\n    _this.type = type;\n    _this.description = description;\n    _this.range = range;\n\n    _this.setHighlights(highlights);\n\n    _this.editor = editor;\n    _this.decorator = decorator;\n    return _this;\n  }\n\n  SymbolEntry.prototype.getLabel = function () {\n    return this.name;\n  };\n\n  SymbolEntry.prototype.getAriaLabel = function () {\n    return strings.format(QuickOutlineNLS.entryAriaLabel, this.name);\n  };\n\n  SymbolEntry.prototype.getIcon = function () {\n    return this.type;\n  };\n\n  SymbolEntry.prototype.getDescription = function () {\n    return this.description;\n  };\n\n  SymbolEntry.prototype.getType = function () {\n    return this.type;\n  };\n\n  SymbolEntry.prototype.getRange = function () {\n    return this.range;\n  };\n\n  SymbolEntry.prototype.run = function (mode, context) {\n    if (mode === 1\n    /* OPEN */\n    ) {\n        return this.runOpen(context);\n      }\n\n    return this.runPreview();\n  };\n\n  SymbolEntry.prototype.runOpen = function (_context) {\n    // Apply selection and focus\n    var range = this.toSelection();\n    this.editor.setSelection(range);\n    this.editor.revealRangeInCenter(range, 0\n    /* Smooth */\n    );\n    this.editor.focus();\n    return true;\n  };\n\n  SymbolEntry.prototype.runPreview = function () {\n    // Select Outline Position\n    var range = this.toSelection();\n    this.editor.revealRangeInCenter(range, 0\n    /* Smooth */\n    ); // Decorate if possible\n\n    this.decorator.decorateLine(this.range, this.editor);\n    return false;\n  };\n\n  SymbolEntry.prototype.toSelection = function () {\n    return new Range(this.range.startLineNumber, this.range.startColumn || 1, this.range.startLineNumber, this.range.startColumn || 1);\n  };\n\n  return SymbolEntry;\n}(QuickOpenEntryGroup);\n\nexport { SymbolEntry };\n\nvar QuickOutlineAction =\n/** @class */\nfunction (_super) {\n  __extends(QuickOutlineAction, _super);\n\n  function QuickOutlineAction() {\n    return _super.call(this, QuickOutlineNLS.quickOutlineActionInput, {\n      id: 'editor.action.quickOutline',\n      label: QuickOutlineNLS.quickOutlineActionLabel,\n      alias: 'Go to Symbol...',\n      precondition: EditorContextKeys.hasDocumentSymbolProvider,\n      kbOpts: {\n        kbExpr: EditorContextKeys.focus,\n        primary: 2048\n        /* CtrlCmd */\n        | 1024\n        /* Shift */\n        | 45\n        /* KEY_O */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      },\n      menuOpts: {\n        group: 'navigation',\n        order: 3\n      }\n    }) || this;\n  }\n\n  QuickOutlineAction.prototype.run = function (accessor, editor) {\n    var _this = this;\n\n    if (!editor.hasModel()) {\n      return undefined;\n    }\n\n    var model = editor.getModel();\n\n    if (!DocumentSymbolProviderRegistry.has(model)) {\n      return undefined;\n    } // Resolve outline\n\n\n    return getDocumentSymbols(model, true, CancellationToken.None).then(function (result) {\n      if (result.length === 0) {\n        return;\n      }\n\n      _this._run(editor, result);\n    });\n  };\n\n  QuickOutlineAction.prototype._run = function (editor, result) {\n    var _this = this;\n\n    this._show(this.getController(editor), {\n      getModel: function getModel(value) {\n        return new QuickOpenModel(_this.toQuickOpenEntries(editor, result, value));\n      },\n      getAutoFocus: function getAutoFocus(searchValue) {\n        // Remove any type pattern (:) from search value as needed\n        if (searchValue.indexOf(SCOPE_PREFIX) === 0) {\n          searchValue = searchValue.substr(SCOPE_PREFIX.length);\n        }\n\n        return {\n          autoFocusPrefixMatch: searchValue,\n          autoFocusFirstEntry: !!searchValue\n        };\n      }\n    });\n  };\n\n  QuickOutlineAction.prototype.symbolEntry = function (name, type, description, range, highlights, editor, decorator) {\n    return new SymbolEntry(name, type, description, Range.lift(range), highlights, editor, decorator);\n  };\n\n  QuickOutlineAction.prototype.toQuickOpenEntries = function (editor, flattened, searchValue) {\n    var controller = this.getController(editor);\n    var results = []; // Convert to Entries\n\n    var normalizedSearchValue = searchValue;\n\n    if (searchValue.indexOf(SCOPE_PREFIX) === 0) {\n      normalizedSearchValue = normalizedSearchValue.substr(SCOPE_PREFIX.length);\n    }\n\n    for (var _i = 0, flattened_1 = flattened; _i < flattened_1.length; _i++) {\n      var element = flattened_1[_i];\n      var label = strings.trim(element.name); // Check for meatch\n\n      var highlights = matchesFuzzy(normalizedSearchValue, label);\n\n      if (highlights) {\n        // Show parent scope as description\n        var description = null;\n\n        if (element.containerName) {\n          description = element.containerName;\n        } // Add\n\n\n        results.push(this.symbolEntry(label, symbolKindToCssClass(element.kind), description, element.range, highlights, editor, controller));\n      }\n    } // Sort properly if actually searching\n\n\n    if (searchValue) {\n      if (searchValue.indexOf(SCOPE_PREFIX) === 0) {\n        results = results.sort(this.sortScoped.bind(this, searchValue.toLowerCase()));\n      } else {\n        results = results.sort(this.sortNormal.bind(this, searchValue.toLowerCase()));\n      }\n    } // Mark all type groups\n\n\n    if (results.length > 0 && searchValue.indexOf(SCOPE_PREFIX) === 0) {\n      var currentType = null;\n      var currentResult = null;\n      var typeCounter = 0;\n\n      for (var i = 0; i < results.length; i++) {\n        var result = results[i]; // Found new type\n\n        if (currentType !== result.getType()) {\n          // Update previous result with count\n          if (currentResult) {\n            currentResult.setGroupLabel(this.typeToLabel(currentType || '', typeCounter));\n          }\n\n          currentType = result.getType();\n          currentResult = result;\n          typeCounter = 1;\n          result.setShowBorder(i > 0);\n        } // Existing type, keep counting\n        else {\n            typeCounter++;\n          }\n      } // Update previous result with count\n\n\n      if (currentResult) {\n        currentResult.setGroupLabel(this.typeToLabel(currentType || '', typeCounter));\n      }\n    } // Mark first entry as outline\n    else if (results.length > 0) {\n        results[0].setGroupLabel(strings.format(QuickOutlineNLS._symbols_, results.length));\n      }\n\n    return results;\n  };\n\n  QuickOutlineAction.prototype.typeToLabel = function (type, count) {\n    switch (type) {\n      case 'module':\n        return strings.format(QuickOutlineNLS._modules_, count);\n\n      case 'class':\n        return strings.format(QuickOutlineNLS._class_, count);\n\n      case 'interface':\n        return strings.format(QuickOutlineNLS._interface_, count);\n\n      case 'method':\n        return strings.format(QuickOutlineNLS._method_, count);\n\n      case 'function':\n        return strings.format(QuickOutlineNLS._function_, count);\n\n      case 'property':\n        return strings.format(QuickOutlineNLS._property_, count);\n\n      case 'variable':\n        return strings.format(QuickOutlineNLS._variable_, count);\n\n      case 'var':\n        return strings.format(QuickOutlineNLS._variable2_, count);\n\n      case 'constructor':\n        return strings.format(QuickOutlineNLS._constructor_, count);\n\n      case 'call':\n        return strings.format(QuickOutlineNLS._call_, count);\n    }\n\n    return type;\n  };\n\n  QuickOutlineAction.prototype.sortNormal = function (searchValue, elementA, elementB) {\n    var elementAName = elementA.getLabel().toLowerCase();\n    var elementBName = elementB.getLabel().toLowerCase(); // Compare by name\n\n    var r = elementAName.localeCompare(elementBName);\n\n    if (r !== 0) {\n      return r;\n    } // If name identical sort by range instead\n\n\n    var elementARange = elementA.getRange();\n    var elementBRange = elementB.getRange();\n    return elementARange.startLineNumber - elementBRange.startLineNumber;\n  };\n\n  QuickOutlineAction.prototype.sortScoped = function (searchValue, elementA, elementB) {\n    // Remove scope char\n    searchValue = searchValue.substr(SCOPE_PREFIX.length); // Sort by type first if scoped search\n\n    var elementAType = elementA.getType();\n    var elementBType = elementB.getType();\n    var r = elementAType.localeCompare(elementBType);\n\n    if (r !== 0) {\n      return r;\n    } // Special sort when searching in scoped mode\n\n\n    if (searchValue) {\n      var elementAName = elementA.getLabel().toLowerCase();\n      var elementBName = elementB.getLabel().toLowerCase(); // Compare by name\n\n      var r_1 = elementAName.localeCompare(elementBName);\n\n      if (r_1 !== 0) {\n        return r_1;\n      }\n    } // Default to sort by range\n\n\n    var elementARange = elementA.getRange();\n    var elementBRange = elementB.getRange();\n    return elementARange.startLineNumber - elementBRange.startLineNumber;\n  };\n\n  return QuickOutlineAction;\n}(BaseEditorQuickOpenAction);\n\nexport { QuickOutlineAction };\nregisterEditorAction(QuickOutlineAction);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { ReferencesController } from '../../../contrib/referenceSearch/referencesController.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\n\nvar StandaloneReferencesController =\n/** @class */\nfunction (_super) {\n  __extends(StandaloneReferencesController, _super);\n\n  function StandaloneReferencesController(editor, contextKeyService, editorService, notificationService, instantiationService, storageService, configurationService) {\n    return _super.call(this, true, editor, contextKeyService, editorService, notificationService, instantiationService, storageService, configurationService) || this;\n  }\n\n  StandaloneReferencesController = __decorate([__param(1, IContextKeyService), __param(2, ICodeEditorService), __param(3, INotificationService), __param(4, IInstantiationService), __param(5, IStorageService), __param(6, IConfigurationService)], StandaloneReferencesController);\n  return StandaloneReferencesController;\n}(ReferencesController);\n\nexport { StandaloneReferencesController };\nregisterEditorContribution(StandaloneReferencesController);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { IStandaloneThemeService } from '../../common/standaloneThemeService.js';\nimport { ToggleHighContrastNLS } from '../../../common/standaloneStrings.js';\n\nvar ToggleHighContrast =\n/** @class */\nfunction (_super) {\n  __extends(ToggleHighContrast, _super);\n\n  function ToggleHighContrast() {\n    var _this = _super.call(this, {\n      id: 'editor.action.toggleHighContrast',\n      label: ToggleHighContrastNLS.toggleHighContrast,\n      alias: 'Toggle High Contrast Theme',\n      precondition: null\n    }) || this;\n\n    _this._originalThemeName = null;\n    return _this;\n  }\n\n  ToggleHighContrast.prototype.run = function (accessor, editor) {\n    var standaloneThemeService = accessor.get(IStandaloneThemeService);\n\n    if (this._originalThemeName) {\n      // We must toggle back to the integrator's theme\n      standaloneThemeService.setTheme(this._originalThemeName);\n      this._originalThemeName = null;\n    } else {\n      this._originalThemeName = standaloneThemeService.getTheme().themeName;\n      standaloneThemeService.setTheme('hc-black');\n    }\n  };\n\n  return ToggleHighContrast;\n}(EditorAction);\n\nregisterEditorAction(ToggleHighContrast);","import '../language/typescript/monaco.contribution';\nimport '../language/css/monaco.contribution';\nimport '../language/json/monaco.contribution';\nimport '../language/html/monaco.contribution';\nimport '../basic-languages/monaco.contribution';\nexport * from './edcore.main';"],"sourceRoot":""}