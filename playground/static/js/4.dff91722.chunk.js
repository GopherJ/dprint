(window.webpackJsonpplayground=window.webpackJsonpplayground||[]).push([[4],{223:function(e,t,n){},262:function(e,t,n){},263:function(e,t,n){},264:function(e,t,n){},265:function(e,t,n){},266:function(e,t,n){},267:function(e,t,n){},268:function(e,t,n){},269:function(e,t,n){},270:function(e,t,n){},271:function(e,t,n){},272:function(e,t,n){},273:function(e,t,n){},274:function(e,t,n){},275:function(e,t,n){},276:function(e,t,n){},277:function(e,t,n){},278:function(e,t,n){},279:function(e,t,n){},280:function(e,t,n){},281:function(e,t,n){},282:function(e,t,n){},283:function(e,t,n){},284:function(e,t,n){},285:function(e,t,n){},286:function(e,t,n){},287:function(e,t,n){},288:function(e,t,n){},289:function(e,t,n){},290:function(e,t,n){},291:function(e,t,n){},292:function(e,t,n){},293:function(e,t,n){},294:function(e,t,n){},295:function(e,t,n){},296:function(e,t,n){},297:function(e,t,n){},351:function(e,t,n){"use strict";n.r(t);var i,o,r,s,a,c=n(128),l=monaco.Emitter,u=function(){function e(e,t){this._onDidChange=new l,this._onDidExtraLibsChange=new l,this._extraLibs=Object.create(null),this._workerMaxIdleTime=12e4,this.setCompilerOptions(e),this.setDiagnosticsOptions(t),this._onDidExtraLibsChangeTimeout=-1}return Object.defineProperty(e.prototype,"onDidChange",{get:function(){return this._onDidChange.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onDidExtraLibsChange",{get:function(){return this._onDidExtraLibsChange.event},enumerable:!0,configurable:!0}),e.prototype.getExtraLibs=function(){return this._extraLibs},e.prototype.addExtraLib=function(e,t){var n=this;if("undefined"===typeof t&&(t="ts:extralib-"+Math.random().toString(36).substring(2,15)),this._extraLibs[t]&&this._extraLibs[t].content===e)return{dispose:function(){}};var i=1;return this._extraLibs[t]&&(i=this._extraLibs[t].version+1),this._extraLibs[t]={content:e,version:i},this._fireOnDidExtraLibsChangeSoon(),{dispose:function(){var e=n._extraLibs[t];e&&e.version===i&&(delete n._extraLibs[t],n._fireOnDidExtraLibsChangeSoon())}}},e.prototype._fireOnDidExtraLibsChangeSoon=function(){var e=this;-1===this._onDidExtraLibsChangeTimeout&&(this._onDidExtraLibsChangeTimeout=setTimeout(function(){e._onDidExtraLibsChangeTimeout=-1,e._onDidExtraLibsChange.fire(void 0)},0))},e.prototype.getCompilerOptions=function(){return this._compilerOptions},e.prototype.setCompilerOptions=function(e){this._compilerOptions=e||Object.create(null),this._onDidChange.fire(void 0)},e.prototype.getDiagnosticsOptions=function(){return this._diagnosticsOptions},e.prototype.setDiagnosticsOptions=function(e){this._diagnosticsOptions=e||Object.create(null),this._onDidChange.fire(void 0)},e.prototype.setMaximumWorkerIdleTime=function(e){this._workerMaxIdleTime=e},e.prototype.getWorkerMaxIdleTime=function(){return this._workerMaxIdleTime},e.prototype.setEagerModelSync=function(e){this._eagerModelSync=e},e.prototype.getEagerModelSync=function(){return this._eagerModelSync},e}();!function(e){e[e.None=0]="None",e[e.CommonJS=1]="CommonJS",e[e.AMD=2]="AMD",e[e.UMD=3]="UMD",e[e.System=4]="System",e[e.ES2015=5]="ES2015",e[e.ESNext=6]="ESNext"}(i||(i={})),function(e){e[e.None=0]="None",e[e.Preserve=1]="Preserve",e[e.React=2]="React",e[e.ReactNative=3]="ReactNative"}(o||(o={})),function(e){e[e.CarriageReturnLineFeed=0]="CarriageReturnLineFeed",e[e.LineFeed=1]="LineFeed"}(r||(r={})),function(e){e[e.ES3=0]="ES3",e[e.ES5=1]="ES5",e[e.ES2015=2]="ES2015",e[e.ES2016=3]="ES2016",e[e.ES2017=4]="ES2017",e[e.ES2018=5]="ES2018",e[e.ESNext=6]="ESNext",e[e.JSON=100]="JSON",e[e.Latest=6]="Latest"}(s||(s={})),function(e){e[e.Classic=1]="Classic",e[e.NodeJs=2]="NodeJs"}(a||(a={}));var d=new u({allowNonTsExtensions:!0,target:s.Latest},{noSemanticValidation:!1,noSyntaxValidation:!1}),h=new u({allowNonTsExtensions:!0,allowJs:!0,target:s.Latest},{noSemanticValidation:!0,noSyntaxValidation:!1});function p(){return f().then(function(e){return e.getTypeScriptWorker()})}function g(){return f().then(function(e){return e.getJavaScriptWorker()})}function f(){return n.e(62).then(n.bind(null,355))}monaco.languages.typescript={ModuleKind:i,JsxEmit:o,NewLineKind:r,ScriptTarget:s,ModuleResolutionKind:a,typescriptDefaults:d,javascriptDefaults:h,getTypeScriptWorker:p,getJavaScriptWorker:g},monaco.languages.onLanguage("typescript",function(){return f().then(function(e){return e.setupTypeScript(d)})}),monaco.languages.onLanguage("javascript",function(){return f().then(function(e){return e.setupJavaScript(h)})});var m=monaco.Emitter,_=function(){function e(e,t){this._onDidChange=new m,this._languageId=e,this.setDiagnosticsOptions(t)}return Object.defineProperty(e.prototype,"onDidChange",{get:function(){return this._onDidChange.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"diagnosticsOptions",{get:function(){return this._diagnosticsOptions},enumerable:!0,configurable:!0}),e.prototype.setDiagnosticsOptions=function(e){this._diagnosticsOptions=e||Object.create(null),this._onDidChange.fire(this)},e}(),v={validate:!0,lint:{compatibleVendorPrefixes:"ignore",vendorPrefix:"warning",duplicateProperties:"warning",emptyRules:"warning",importStatement:"ignore",boxModel:"ignore",universalSelector:"ignore",zeroUnits:"ignore",fontFaceProperties:"warning",hexColorLength:"error",argumentsInColorFunction:"error",unknownProperties:"warning",ieHack:"ignore",unknownVendorSpecificProperties:"ignore",propertyIgnoredDueToDisplay:"warning",important:"ignore",float:"ignore",idSelector:"ignore"}},b=new _("css",v),y=new _("scss",v),w=new _("less",v);function C(){return n.e(59).then(n.bind(null,353))}monaco.languages.css={cssDefaults:b,lessDefaults:w,scssDefaults:y},monaco.languages.onLanguage("less",function(){C().then(function(e){return e.setupMode(w)})}),monaco.languages.onLanguage("scss",function(){C().then(function(e){return e.setupMode(y)})}),monaco.languages.onLanguage("css",function(){C().then(function(e){return e.setupMode(b)})});var S=monaco.Emitter,x=new(function(){function e(e,t){this._onDidChange=new S,this._languageId=e,this.setDiagnosticsOptions(t)}return Object.defineProperty(e.prototype,"onDidChange",{get:function(){return this._onDidChange.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"diagnosticsOptions",{get:function(){return this._diagnosticsOptions},enumerable:!0,configurable:!0}),e.prototype.setDiagnosticsOptions=function(e){this._diagnosticsOptions=e||Object.create(null),this._onDidChange.fire(this)},e}())("json",{validate:!0,allowComments:!0,schemas:[],enableSchemaRequest:!1});monaco.languages.json={jsonDefaults:x},monaco.languages.register({id:"json",extensions:[".json",".bowerrc",".jshintrc",".jscsrc",".eslintrc",".babelrc"],aliases:["JSON","json"],mimetypes:["application/json"]}),monaco.languages.onLanguage("json",function(){n.e(61).then(n.bind(null,352)).then(function(e){return e.setupMode(x)})});var O=monaco.Emitter,k=function(){function e(e,t){this._onDidChange=new O,this._languageId=e,this.setOptions(t)}return Object.defineProperty(e.prototype,"onDidChange",{get:function(){return this._onDidChange.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),e.prototype.setOptions=function(e){this._options=e||Object.create(null),this._onDidChange.fire(this)},e}(),D={tabSize:4,insertSpaces:!1,wrapLineLength:120,unformatted:'default": "a, abbr, acronym, b, bdo, big, br, button, cite, code, dfn, em, i, img, input, kbd, label, map, object, q, samp, select, small, span, strong, sub, sup, textarea, tt, var',contentUnformatted:"pre",indentInnerHtml:!1,preserveNewLines:!0,maxPreserveNewLines:null,indentHandlebars:!1,endWithNewline:!1,extraLiners:"head, body, /html",wrapAttributes:"auto"},I={format:D,suggest:{html5:!0}},N={format:D,suggest:{html5:!0,razor:!0}},L=new k("html",{format:D,suggest:{html5:!0,angular1:!0,ionic:!0}}),M=new k("handlebars",I),E=new k("razor",N);function P(){return n.e(60).then(n.bind(null,354))}monaco.languages.html={htmlDefaults:L,razorDefaults:E,handlebarDefaults:M},monaco.languages.onLanguage("html",function(){P().then(function(e){return e.setupMode(L)})}),monaco.languages.onLanguage("handlebars",function(){P().then(function(e){return e.setupMode(M)})}),monaco.languages.onLanguage("razor",function(){P().then(function(e){return e.setupMode(E)})});var R="undefined"===typeof monaco?self.monaco:monaco,T={};var A={};function j(e){return A[e]||(A[e]=function(e){return(0,T[e].loader)().then(function(t){R.languages.setMonarchTokensProvider(e,t.language),R.languages.setLanguageConfiguration(e,t.conf)})}(e)),A[e]}function F(e){var t=e.id;T[t]=e,R.languages.register(e),R.languages.onLanguage(t,function(){j(t)})}F({id:"bat",extensions:[".bat",".cmd"],aliases:["Batch","bat"],loader:function(){return n.e(10).then(n.bind(null,299))}}),F({id:"coffeescript",extensions:[".coffee"],aliases:["CoffeeScript","coffeescript","coffee"],mimetypes:["text/x-coffeescript","text/coffeescript"],loader:function(){return n.e(12).then(n.bind(null,300))}}),F({id:"c",extensions:[".c",".h"],aliases:["C","c"],loader:function(){return n.e(1).then(n.bind(null,301))}}),F({id:"cpp",extensions:[".cpp",".cc",".cxx",".hpp",".hh",".hxx"],aliases:["C++","Cpp","cpp"],loader:function(){return n.e(1).then(n.bind(null,301))}}),F({id:"csharp",extensions:[".cs",".csx",".cake"],aliases:["C#","csharp"],loader:function(){return n.e(13).then(n.bind(null,302))}}),F({id:"csp",extensions:[],aliases:["CSP","csp"],loader:function(){return n.e(14).then(n.bind(null,303))}}),F({id:"css",extensions:[".css"],aliases:["CSS","css"],mimetypes:["text/css"],loader:function(){return n.e(15).then(n.bind(null,304))}}),F({id:"dockerfile",extensions:[".dockerfile"],filenames:["Dockerfile"],aliases:["Dockerfile"],loader:function(){return n.e(16).then(n.bind(null,305))}}),F({id:"fsharp",extensions:[".fs",".fsi",".ml",".mli",".fsx",".fsscript"],aliases:["F#","FSharp","fsharp"],loader:function(){return n.e(17).then(n.bind(null,306))}}),F({id:"go",extensions:[".go"],aliases:["Go"],loader:function(){return n.e(18).then(n.bind(null,307))}}),F({id:"handlebars",extensions:[".handlebars",".hbs"],aliases:["Handlebars","handlebars"],mimetypes:["text/x-handlebars-template"],loader:function(){return n.e(20).then(n.bind(null,308))}}),F({id:"html",extensions:[".html",".htm",".shtml",".xhtml",".mdoc",".jsp",".asp",".aspx",".jshtm"],aliases:["HTML","htm","html","xhtml"],mimetypes:["text/html","text/x-jshtm","text/template","text/ng-template"],loader:function(){return n.e(21).then(n.bind(null,309))}}),F({id:"ini",extensions:[".ini",".properties",".gitconfig"],filenames:["config",".gitattributes",".gitconfig",".editorconfig"],aliases:["Ini","ini"],loader:function(){return n.e(22).then(n.bind(null,310))}}),F({id:"java",extensions:[".java",".jav"],aliases:["Java","java"],mimetypes:["text/x-java-source","text/x-java"],loader:function(){return n.e(23).then(n.bind(null,311))}}),F({id:"javascript",extensions:[".js",".es6",".jsx"],firstLine:"^#!.*\\bnode",filenames:["jakefile"],aliases:["JavaScript","javascript","js"],mimetypes:["text/javascript"],loader:function(){return n.e(7).then(n.bind(null,312))}}),F({id:"kotlin",extensions:[".kt"],aliases:["Kotlin","kotlin"],mimetypes:["text/x-kotlin-source","text/x-kotlin"],loader:function(){return n.e(24).then(n.bind(null,313))}}),F({id:"less",extensions:[".less"],aliases:["Less","less"],mimetypes:["text/x-less","text/less"],loader:function(){return n.e(25).then(n.bind(null,314))}}),F({id:"lua",extensions:[".lua"],aliases:["Lua","lua"],loader:function(){return n.e(26).then(n.bind(null,315))}}),F({id:"markdown",extensions:[".md",".markdown",".mdown",".mkdn",".mkd",".mdwn",".mdtxt",".mdtext"],aliases:["Markdown","markdown"],loader:function(){return n.e(27).then(n.bind(null,316))}}),F({id:"msdax",extensions:[".dax",".msdax"],aliases:["DAX","MSDAX"],loader:function(){return n.e(28).then(n.bind(null,317))}}),F({id:"mysql",extensions:[],aliases:["MySQL","mysql"],loader:function(){return n.e(29).then(n.bind(null,318))}}),F({id:"objective-c",extensions:[".m"],aliases:["Objective-C"],loader:function(){return n.e(30).then(n.bind(null,319))}}),F({id:"pascal",extensions:[".pas",".p",".pp"],aliases:["Pascal","pas"],mimetypes:["text/x-pascal-source","text/x-pascal"],loader:function(){return n.e(31).then(n.bind(null,320))}}),F({id:"pgsql",extensions:[],aliases:["PostgreSQL","postgres","pg","postgre"],loader:function(){return n.e(33).then(n.bind(null,321))}}),F({id:"php",extensions:[".php",".php4",".php5",".phtml",".ctp"],aliases:["PHP","php"],mimetypes:["application/x-php"],loader:function(){return n.e(34).then(n.bind(null,322))}}),F({id:"postiats",extensions:[".dats",".sats",".hats"],aliases:["ATS","ATS/Postiats"],loader:function(){return n.e(35).then(n.bind(null,323))}}),F({id:"powerquery",extensions:[".pq",".pqm"],aliases:["PQ","M","Power Query","Power Query M"],loader:function(){return n.e(36).then(n.bind(null,324))}}),F({id:"powershell",extensions:[".ps1",".psm1",".psd1"],aliases:["PowerShell","powershell","ps","ps1"],loader:function(){return n.e(37).then(n.bind(null,325))}}),F({id:"pug",extensions:[".jade",".pug"],aliases:["Pug","Jade","jade"],loader:function(){return n.e(38).then(n.bind(null,326))}}),F({id:"python",extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi"],aliases:["Python","py"],firstLine:"^#!/.*\\bpython[0-9.-]*\\b",loader:function(){return n.e(39).then(n.bind(null,327))}}),F({id:"r",extensions:[".r",".rhistory",".rprofile",".rt"],aliases:["R","r"],loader:function(){return n.e(40).then(n.bind(null,328))}}),F({id:"razor",extensions:[".cshtml"],aliases:["Razor","razor"],mimetypes:["text/x-cshtml"],loader:function(){return n.e(41).then(n.bind(null,329))}}),F({id:"redis",extensions:[".redis"],aliases:["redis"],loader:function(){return n.e(42).then(n.bind(null,330))}}),F({id:"redshift",extensions:[],aliases:["Redshift","redshift"],loader:function(){return n.e(43).then(n.bind(null,331))}}),F({id:"ruby",extensions:[".rb",".rbx",".rjs",".gemspec",".pp"],filenames:["rakefile"],aliases:["Ruby","rb"],loader:function(){return n.e(44).then(n.bind(null,332))}}),F({id:"rust",extensions:[".rs",".rlib"],aliases:["Rust","rust"],loader:function(){return n.e(45).then(n.bind(null,333))}}),F({id:"sb",extensions:[".sb"],aliases:["Small Basic","sb"],loader:function(){return n.e(46).then(n.bind(null,334))}}),F({id:"scss",extensions:[".scss"],aliases:["Sass","sass","scss"],mimetypes:["text/x-scss","text/scss"],loader:function(){return n.e(48).then(n.bind(null,335))}}),F({id:"sol",extensions:[".sol"],aliases:["sol","solidity","Solidity"],loader:function(){return n.e(50).then(n.bind(null,336))}}),F({id:"sql",extensions:[".sql"],aliases:["SQL"],loader:function(){return n.e(51).then(n.bind(null,337))}}),F({id:"st",extensions:[".st",".iecst",".iecplc",".lc3lib"],aliases:["StructuredText","scl","stl"],loader:function(){return n.e(52).then(n.bind(null,338))}}),F({id:"swift",aliases:["Swift","swift"],extensions:[".swift"],mimetypes:["text/swift"],loader:function(){return n.e(53).then(n.bind(null,339))}}),F({id:"tcl",extensions:[".tcl"],aliases:["tcl","Tcl","tcltk","TclTk","tcl/tk","Tcl/Tk"],loader:function(){return n.e(54).then(n.bind(null,340))}}),F({id:"typescript",extensions:[".ts",".tsx"],aliases:["TypeScript","ts","typescript"],mimetypes:["text/typescript"],loader:function(){return n.e(55).then(n.bind(null,224))}}),F({id:"vb",extensions:[".vb"],aliases:["Visual Basic","vb"],loader:function(){return n.e(56).then(n.bind(null,341))}}),F({id:"xml",extensions:[".xml",".dtd",".ascx",".csproj",".config",".wxi",".wxl",".wxs",".xaml",".svg",".svgz"],firstLine:"(\\<\\?xml.*)|(\\<svg)|(\\<\\!doctype\\s+svg)",aliases:["XML","xml"],mimetypes:["text/xml","application/xml","application/xaml+xml","application/xml-dtd"],loader:function(){return n.e(57).then(n.bind(null,342))}}),F({id:"yaml",extensions:[".yaml",".yml"],aliases:["YAML","yaml","YML","yml"],mimetypes:["application/x-yaml"],loader:function(){return n.e(58).then(n.bind(null,343))}}),F({id:"scheme",extensions:[".scm",".ss",".sch",".rkt"],aliases:["scheme","Scheme"],loader:function(){return n.e(47).then(n.bind(null,344))}}),F({id:"clojure",extensions:[".clj",".cljs",".cljc",".edn"],aliases:["clojure","Clojure"],loader:function(){return n.e(11).then(n.bind(null,345))}}),F({id:"shell",extensions:[".sh",".bash"],aliases:["Shell","sh"],loader:function(){return n.e(49).then(n.bind(null,346))}}),F({id:"perl",extensions:[".pl"],aliases:["Perl","pl"],loader:function(){return n.e(32).then(n.bind(null,347))}}),F({id:"azcli",extensions:[".azcli"],aliases:["Azure CLI","azcli"],loader:function(){return n.e(9).then(n.bind(null,348))}}),F({id:"apex",extensions:[".cls"],aliases:["Apex","apex"],mimetypes:["text/x-apex-source","text/x-apex"],loader:function(){return n.e(8).then(n.bind(null,349))}}),F({id:"graphql",extensions:[".graphql",".gql"],aliases:["GraphQL","graphql","gql"],mimetypes:["application/graphql"],loader:function(){return n.e(19).then(n.bind(null,350))}});var B=n(200),W=n(173),V=(n(225),n(204),n(262),n(81)),H=n(87),z=n(77),U=n(84),K=n(85),q=n(95),G=n(94),Z=n(116),$=n(104),Y=n(106),J=n(96),X=n(88),Q=n(134),ee=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),te=Object(J.zb)("editorOverviewRuler.bracketMatchForeground",{dark:"#A0A0A0",light:"#A0A0A0",hc:"#A0A0A0"},V.a("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets.")),ne=function(e){function t(){return e.call(this,{id:"editor.action.jumpToBracket",label:V.a("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:null,kbOpts:{kbExpr:G.a.editorTextFocus,primary:3160,weight:100}})||this}return ee(t,e),t.prototype.run=function(e,t){var n=re.get(t);n&&n.jumpToBracket()},t}(U.b),ie=function(e){function t(){return e.call(this,{id:"editor.action.selectToBracket",label:V.a("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:null})||this}return ee(t,e),t.prototype.run=function(e,t){var n=re.get(t);n&&n.selectToBracket()},t}(U.b),oe=function(){return function(e,t){this.position=e,this.brackets=t}}(),re=function(e){function t(t){var n=e.call(this)||this;return n._editor=t,n._lastBracketsData=[],n._lastVersionId=0,n._decorations=[],n._updateBracketsSoon=n._register(new H.d(function(){return n._updateBrackets()},50)),n._matchBrackets=n._editor.getConfiguration().contribInfo.matchBrackets,n._updateBracketsSoon.schedule(),n._register(t.onDidChangeCursorPosition(function(e){n._matchBrackets&&n._updateBracketsSoon.schedule()})),n._register(t.onDidChangeModelContent(function(e){n._updateBracketsSoon.schedule()})),n._register(t.onDidChangeModel(function(e){n._lastBracketsData=[],n._decorations=[],n._updateBracketsSoon.schedule()})),n._register(t.onDidChangeModelLanguageConfiguration(function(e){n._lastBracketsData=[],n._updateBracketsSoon.schedule()})),n._register(t.onDidChangeConfiguration(function(e){n._matchBrackets=n._editor.getConfiguration().contribInfo.matchBrackets,!n._matchBrackets&&n._decorations.length>0&&(n._decorations=n._editor.deltaDecorations(n._decorations,[])),n._updateBracketsSoon.schedule()})),n}return ee(t,e),t.get=function(e){return e.getContribution(t.ID)},t.prototype.getId=function(){return t.ID},t.prototype.jumpToBracket=function(){if(this._editor.hasModel()){var e=this._editor.getModel(),t=this._editor.getSelections().map(function(t){var n=t.getStartPosition(),i=e.matchBracket(n),o=null;if(i)i[0].containsPosition(n)?o=i[1].getStartPosition():i[1].containsPosition(n)&&(o=i[0].getStartPosition());else{var r=e.findNextBracket(n);r&&r.range&&(o=r.range.getStartPosition())}return o?new q.a(o.lineNumber,o.column,o.lineNumber,o.column):new q.a(n.lineNumber,n.column,n.lineNumber,n.column)});this._editor.setSelections(t),this._editor.revealRange(t[0])}},t.prototype.selectToBracket=function(){if(this._editor.hasModel()){var e=this._editor.getModel(),t=[];this._editor.getSelections().forEach(function(n){var i=n.getStartPosition(),o=e.matchBracket(i),r=null,s=null;if(!o){var a=e.findNextBracket(i);a&&a.range&&(o=e.matchBracket(a.range.getStartPosition()))}o&&(o[0].startLineNumber===o[1].startLineNumber?(r=o[1].startColumn<o[0].startColumn?o[1].getStartPosition():o[0].getStartPosition(),s=o[1].startColumn<o[0].startColumn?o[0].getEndPosition():o[1].getEndPosition()):(r=o[1].startLineNumber<o[0].startLineNumber?o[1].getStartPosition():o[0].getStartPosition(),s=o[1].startLineNumber<o[0].startLineNumber?o[0].getEndPosition():o[1].getEndPosition())),r&&s&&t.push(new q.a(r.lineNumber,r.column,s.lineNumber,s.column))}),t.length>0&&(this._editor.setSelections(t),this._editor.revealRange(t[0]))}},t.prototype._updateBrackets=function(){if(this._matchBrackets){this._recomputeBrackets();for(var e=[],n=0,i=0,o=this._lastBracketsData.length;i<o;i++){var r=this._lastBracketsData[i].brackets;r&&(e[n++]={range:r[0],options:t._DECORATION_OPTIONS},e[n++]={range:r[1],options:t._DECORATION_OPTIONS})}this._decorations=this._editor.deltaDecorations(this._decorations,e)}},t.prototype._recomputeBrackets=function(){if(!this._editor.hasModel())return this._lastBracketsData=[],void(this._lastVersionId=0);var e=this._editor.getModel(),t=e.getVersionId(),n=[];this._lastVersionId===t&&(n=this._lastBracketsData);for(var i=this._editor.getSelections(),o=[],r=0,s=0,a=i.length;s<a;s++){var c=i[s];c.isEmpty()&&(o[r++]=c.getStartPosition())}o.length>1&&o.sort(K.a.compare);var l=[],u=0,d=0,h=n.length;for(s=0,a=o.length;s<a;s++){for(var p=o[s];d<h&&n[d].position.isBefore(p);)d++;if(d<h&&n[d].position.equals(p))l[u++]=n[d];else{var g=e.matchBracket(p);l[u++]=new oe(p,g)}}this._lastBracketsData=l,this._lastVersionId=t},t.ID="editor.contrib.bracketMatchingController",t._DECORATION_OPTIONS=$.a.register({stickiness:1,className:"bracket-match",overviewRuler:{color:Object(X.f)(te),position:Z.c.Center}}),t}(z.a);Object(U.h)(re),Object(U.f)(ie),Object(U.f)(ne),Object(X.e)(function(e,t){var n=e.getColor(Y.c);n&&t.addRule(".monaco-editor .bracket-match { background-color: "+n+"; }");var i=e.getColor(Y.d);i&&t.addRule(".monaco-editor .bracket-match { border: 1px solid "+i+"; }")}),Q.c.appendMenuItem(16,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:V.a({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2});var se=n(78),ae=function(){function e(e,t){this._selection=e,this._isMovingLeft=t}return e.prototype.getEditOperations=function(e,t){var n=this._selection;if(this._selectionId=t.trackSelection(n),n.startLineNumber===n.endLineNumber&&(!this._isMovingLeft||0!==n.startColumn)&&(this._isMovingLeft||n.endColumn!==e.getLineMaxColumn(n.startLineNumber))){var i,o,r,s=n.selectionStartLineNumber,a=e.getLineContent(s);this._isMovingLeft?(i=a.substring(0,n.startColumn-2),o=a.substring(n.startColumn-1,n.endColumn-1),r=a.substring(n.startColumn-2,n.startColumn-1)+a.substring(n.endColumn-1)):(i=a.substring(0,n.startColumn-1)+a.substring(n.endColumn-1,n.endColumn),o=a.substring(n.startColumn-1,n.endColumn-1),r=a.substring(n.endColumn));var c=i+o+r;t.addEditOperation(new se.a(s,1,s,e.getLineMaxColumn(s)),null),t.addEditOperation(new se.a(s,1,s,1),c),this._cutStartIndex=n.startColumn+(this._isMovingLeft?-1:1),this._cutEndIndex=this._cutStartIndex+n.endColumn-n.startColumn,this._moved=!0}},e.prototype.computeCursorState=function(e,t){var n=t.getTrackedSelection(this._selectionId);return this._moved&&(n=(n=n.setStartPosition(n.startLineNumber,this._cutStartIndex)).setEndPosition(n.startLineNumber,this._cutEndIndex)),n},e}(),ce=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),le=function(e){function t(t,n){var i=e.call(this,n)||this;return i.left=t,i}return ce(t,e),t.prototype.run=function(e,t){if(t.hasModel()){for(var n=[],i=0,o=t.getSelections();i<o.length;i++){var r=o[i];n.push(new ae(r,this.left))}t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}},t}(U.b),ue=function(e){function t(){return e.call(this,!0,{id:"editor.action.moveCarretLeftAction",label:V.a("caret.moveLeft","Move Caret Left"),alias:"Move Caret Left",precondition:G.a.writable})||this}return ce(t,e),t}(le),de=function(e){function t(){return e.call(this,!1,{id:"editor.action.moveCarretRightAction",label:V.a("caret.moveRight","Move Caret Right"),alias:"Move Caret Right",precondition:G.a.writable})||this}return ce(t,e),t}(le);Object(U.f)(ue),Object(U.f)(de);var he=n(80),pe=n(150),ge=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),fe=function(e){function t(){return e.call(this,{id:"editor.action.transposeLetters",label:V.a("transposeLetters.label","Transpose Letters"),alias:"Transpose Letters",precondition:G.a.writable,kbOpts:{kbExpr:G.a.textInputFocus,primary:0,mac:{primary:306},weight:100}})||this}return ge(t,e),t.prototype.positionLeftOf=function(e,t){var n=e.column,i=e.lineNumber;return n>t.getLineMinColumn(i)?Object(he.v)(t.getLineContent(i).charCodeAt(n-2))?n-=2:n-=1:i>1&&(i-=1,n=t.getLineMaxColumn(i)),new K.a(i,n)},t.prototype.positionRightOf=function(e,t){var n=e.column,i=e.lineNumber;return n<t.getLineMaxColumn(i)?Object(he.u)(t.getLineContent(i).charCodeAt(n-1))?n+=2:n+=1:i<t.getLineCount()&&(i+=1,n=0),new K.a(i,n)},t.prototype.run=function(e,t){if(t.hasModel()){for(var n=t.getModel(),i=[],o=0,r=t.getSelections();o<r.length;o++){var s=r[o];if(s.isEmpty()){var a=s.startLineNumber,c=s.startColumn,l=n.getLineMaxColumn(a);if(1!==a||1!==c&&(2!==c||2!==l)){var u=c===l?s.getPosition():this.positionRightOf(s.getPosition(),n),d=this.positionLeftOf(u,n),h=this.positionLeftOf(d,n),p=n.getValueInRange(se.a.fromPositions(h,d)),g=n.getValueInRange(se.a.fromPositions(d,u)),f=se.a.fromPositions(h,u);i.push(new pe.a(f,g+p))}}}i.length>0&&(t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop())}},t}(U.b);Object(U.f)(fe);n(263);var me=n(103),_e=n(90),ve=n(208),be=n(105),ye=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),we="9_cutcopypaste",Ce=_e.e||document.queryCommandSupported("cut"),Se=_e.e||document.queryCommandSupported("copy"),xe=Se&&!me.g,Oe=_e.e||!me.e&&document.queryCommandSupported("paste"),ke=function(e){function t(t,n){var i=e.call(this,n)||this;return i.browserCommand=t,i}return ye(t,e),t.prototype.runCommand=function(e,t){var n=e.get(be.a).getFocusedCodeEditor();n&&n.hasTextFocus()?n.trigger("keyboard",this.id,t):document.execCommand(this.browserCommand)},t.prototype.run=function(e,t){t.focus(),document.execCommand(this.browserCommand)},t}(U.b),De=function(e){function t(){var t={kbExpr:G.a.textInputFocus,primary:2102,win:{primary:2102,secondary:[1044]},weight:100};return _e.e||(t=null),e.call(this,"cut",{id:"editor.action.clipboardCutAction",label:V.a("actions.clipboard.cutLabel","Cut"),alias:"Cut",precondition:G.a.writable,kbOpts:t,menuOpts:{group:we,order:1},menubarOpts:{menuId:14,group:"2_ccp",title:V.a({key:"miCut",comment:["&& denotes a mnemonic"]},"Cu&&t"),order:1}})||this}return ye(t,e),t.prototype.run=function(t,n){n.hasModel()&&(!n.getConfiguration().emptySelectionClipboard&&n.getSelection().isEmpty()||e.prototype.run.call(this,t,n))},t}(ke),Ie=function(e){function t(){var t={kbExpr:G.a.textInputFocus,primary:2081,win:{primary:2081,secondary:[2067]},weight:100};return _e.e||(t=null),e.call(this,"copy",{id:"editor.action.clipboardCopyAction",label:V.a("actions.clipboard.copyLabel","Copy"),alias:"Copy",precondition:null,kbOpts:t,menuOpts:{group:we,order:2},menubarOpts:{menuId:14,group:"2_ccp",title:V.a({key:"miCopy",comment:["&& denotes a mnemonic"]},"&&Copy"),order:2}})||this}return ye(t,e),t.prototype.run=function(t,n){n.hasModel()&&(!n.getConfiguration().emptySelectionClipboard&&n.getSelection().isEmpty()||1===n.getSelections().length&&n.getSelection().isEmpty()&&0===n.getModel().getLineFirstNonWhitespaceColumn(n.getSelection().positionLineNumber)||e.prototype.run.call(this,t,n))},t}(ke),Ne=function(e){function t(){var t={kbExpr:G.a.textInputFocus,primary:2100,win:{primary:2100,secondary:[1043]},weight:100};return _e.e||(t=null),e.call(this,"paste",{id:"editor.action.clipboardPasteAction",label:V.a("actions.clipboard.pasteLabel","Paste"),alias:"Paste",precondition:G.a.writable,kbOpts:t,menuOpts:{group:we,order:3},menubarOpts:{menuId:14,group:"2_ccp",title:V.a({key:"miPaste",comment:["&& denotes a mnemonic"]},"&&Paste"),order:3}})||this}return ye(t,e),t}(ke),Le=function(e){function t(){return e.call(this,"copy",{id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:V.a("actions.clipboard.copyWithSyntaxHighlightingLabel","Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:null,kbOpts:{kbExpr:G.a.textInputFocus,primary:0,weight:100}})||this}return ye(t,e),t.prototype.run=function(t,n){n.hasModel()&&(!n.getConfiguration().emptySelectionClipboard&&n.getSelection().isEmpty()||(ve.a.forceCopyWithSyntaxHighlighting=!0,e.prototype.run.call(this,t,n),ve.a.forceCopyWithSyntaxHighlighting=!1))},t}(ke);Ce&&Object(U.f)(De),Se&&Object(U.f)(Ie),Oe&&Object(U.f)(Ne),xe&&Object(U.f)(Le);var Me=n(170),Ee=(n(264),n(118)),Pe=n(91),Re=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Te=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},Ae=function(e,t){return function(n,i){t(n,i,e)}},je=function(e){function t(n,i){var o=e.call(this)||this;return o._messageListeners=[],o._editor=n,o._visible=t.MESSAGE_VISIBLE.bindTo(i),o._register(o._editor.onDidAttemptReadOnlyEdit(function(){return o._onDidAttemptReadOnlyEdit()})),o}return Re(t,e),t.get=function(e){return e.getContribution(t._id)},t.prototype.getId=function(){return t._id},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._visible.reset()},t.prototype.showMessage=function(e,t){var n,i=this;Object(Ee.a)(e),this._visible.set(!0),Object(z.d)(this._messageWidget),this._messageListeners=Object(z.d)(this._messageListeners),this._messageWidget=new Be(this._editor,t,e),this._messageListeners.push(this._editor.onDidBlurEditorText(function(){return i.closeMessage()})),this._messageListeners.push(this._editor.onDidChangeCursorPosition(function(){return i.closeMessage()})),this._messageListeners.push(this._editor.onDidDispose(function(){return i.closeMessage()})),this._messageListeners.push(this._editor.onDidChangeModel(function(){return i.closeMessage()})),this._messageListeners.push(new H.e(function(){return i.closeMessage()},3e3)),this._messageListeners.push(this._editor.onMouseMove(function(e){e.target.position&&(n?n.containsPosition(e.target.position)||i.closeMessage():n=new se.a(t.lineNumber-3,1,e.target.position.lineNumber+3,1))}))},t.prototype.closeMessage=function(){this._visible.reset(),this._messageListeners=Object(z.d)(this._messageListeners),this._messageListeners.push(Be.fadeOut(this._messageWidget))},t.prototype._onDidAttemptReadOnlyEdit=function(){this._editor.hasModel()&&this.showMessage(V.a("editor.readonly","Cannot edit in read-only editor"),this._editor.getPosition())},t._id="editor.contrib.messageController",t.MESSAGE_VISIBLE=new Pe.f("messageVisible",!1),t=Te([Ae(1,Pe.e)],t)}(z.a),Fe=U.c.bindToContribution(je.get);Object(U.g)(new Fe({id:"leaveEditorMessage",precondition:je.MESSAGE_VISIBLE,handler:function(e){return e.closeMessage()},kbOpts:{weight:130,primary:9}}));var Be=function(){function e(e,t,n){var i=t.lineNumber,o=t.column;this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=e,this._editor.revealLinesInCenterIfOutsideViewport(i,i,0),this._position={lineNumber:i,column:o-1},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage");var r=document.createElement("div");r.classList.add("message"),r.textContent=n,this._domNode.appendChild(r);var s=document.createElement("div");s.classList.add("anchor"),this._domNode.appendChild(s),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}return e.fadeOut=function(e){var t,n=function n(){e.dispose(),clearTimeout(t),e.getDomNode().removeEventListener("animationend",n)};return t=setTimeout(n,110),e.getDomNode().addEventListener("animationend",n),e.getDomNode().classList.add("fadeOut"),{dispose:n}},e.prototype.dispose=function(){this._editor.removeContentWidget(this)},e.prototype.getId=function(){return"messageoverlay"},e.prototype.getDomNode=function(){return this._domNode},e.prototype.getPosition=function(){return{position:this._position,preference:[1]}},e}();Object(U.h)(je),Object(X.e)(function(e,t){var n=e.getColor(J.T);if(n){var i=e.type===X.b?2:1;t.addRule(".monaco-editor .monaco-editor-overlaymessage .anchor { border-top-color: "+n+"; }"),t.addRule(".monaco-editor .monaco-editor-overlaymessage .message { border: "+i+"px solid "+n+"; }")}var o=e.getColor(J.S);o&&t.addRule(".monaco-editor .monaco-editor-overlaymessage .message { background-color: "+o+"; }");var r=e.getColor(J.U);r&&t.addRule(".monaco-editor .monaco-editor-overlaymessage .message { color: "+r+"; }")});var We=n(100),Ve=n(136),He=n(109),ze=n(142),Ue=n(172),Ke=n(79),qe=n(89),Ge=n(92),Ze=n(97),$e=n(83),Ye=n(98),Je=n(113),Xe=function(){function e(e){this.value=e}return e.prototype.contains=function(t){return this.value===t.value||Object(he.G)(t.value,this.value+e.sep)},e.prototype.intersects=function(e){return this.contains(e)||e.contains(this)},e.sep=".",e.Empty=new e(""),e.QuickFix=new e("quickfix"),e.Refactor=new e("refactor"),e.Source=new e("source"),e.SourceOrganizeImports=new e("source.organizeImports"),e.SourceFixAll=new e("source.fixAll"),e}();var Qe=n(135),et=function(){function e(t){this.actions=Object(Ge.o)(t,e.codeActionsComparator)}return e.codeActionsComparator=function(e,t){return Object(Ge.n)(e.diagnostics)?Object(Ge.n)(t.diagnostics)?e.diagnostics[0].message.localeCompare(t.diagnostics[0].message):-1:Object(Ge.n)(t.diagnostics)?1:0},Object.defineProperty(e.prototype,"hasAutoFix",{get:function(){return this.actions.some(function(e){return!!e.kind&&Xe.QuickFix.contains(new Xe(e.kind))&&!!e.isPreferred})},enumerable:!0,configurable:!0}),e}();function tt(e,t,n,i){var o=n.filter||{},r={only:o.kind?o.kind.value:void 0,trigger:"manual"===n.type?2:1},s=new Qe.d(e,i),a=function(e,t){return qe.a.all(e).filter(function(e){return!e.providedCodeActionKinds||e.providedCodeActionKinds.some(function(e){return function(e,t){return!(e.kind&&!e.kind.intersects(t))&&!(Xe.Source.contains(t)&&!e.includeSourceActions)}(t,new Xe(e))})})}(e,o),c=a.map(function(n){return Promise.resolve(n.provideCodeActions(e,t,r,s.token)).then(function(e){return s.token.isCancellationRequested||!Array.isArray(e)?[]:e.filter(function(e){return e&&function(e,t){var n=t.kind?new Xe(t.kind):void 0;return!!(!e.kind||n&&e.kind.contains(n))&&(!(!e.includeSourceActions&&n&&Xe.Source.contains(n))&&!(e.onlyIncludePreferredActions&&!t.isPreferred))}(o,e)})},function(e){if(Object($e.d)(e))throw e;return Object($e.f)(e),[]})}),l=qe.a.onDidChange(function(){var t=qe.a.all(e);Object(Ge.g)(t,a)||s.cancel()});return Promise.all(c).then(Ge.k).then(function(e){return new et(e)}).finally(function(){l.dispose(),s.dispose()})}Object(U.j)("_executeCodeActionProvider",function(e,t){var n=t.resource,i=t.range,o=t.kind;if(!(n instanceof Ye.a)||!se.a.isIRange(i))throw Object($e.b)();var r=e.get(Je.a).getModel(n);if(!r)throw Object($e.b)();return tt(r,r.validateRange(i),{type:"manual",filter:{includeSourceActions:!0,kind:o&&o.value?new Xe(o.value):void 0}},Ze.a.None).then(function(e){return e.actions})});var nt,it=new Pe.f("supportedCodeAction",""),ot=function(){function e(e,t,n,i,o){var r=this;void 0===i&&(i=250),this._editor=e,this._markerService=t,this._signalChange=n,this._delay=i,this._progressService=o,this._disposables=[],this._autoTriggerTimer=new H.e,this._disposables.push(this._markerService.onMarkerChanged(function(e){return r._onMarkerChanges(e)}),this._editor.onDidChangeCursorPosition(function(){return r._onCursorChange()}))}return e.prototype.dispose=function(){this._disposables=Object(z.d)(this._disposables),this._autoTriggerTimer.cancel()},e.prototype.trigger=function(e){var t=this._getRangeOfSelectionUnlessWhitespaceEnclosed(e);return this._createEventAndSignalChange(e,t)},e.prototype._onMarkerChanges=function(e){var t=this,n=this._editor.getModel();n&&e.some(function(e){return e.toString()===n.uri.toString()})&&this._autoTriggerTimer.cancelAndSet(function(){t.trigger({type:"auto"})},this._delay)},e.prototype._onCursorChange=function(){var e=this;this._autoTriggerTimer.cancelAndSet(function(){e.trigger({type:"auto"})},this._delay)},e.prototype._getRangeOfMarker=function(e){var t=this._editor.getModel();if(t)for(var n=0,i=this._markerService.read({resource:t.uri});n<i.length;n++){var o=i[n];if(se.a.intersectRanges(o,e))return se.a.lift(o)}},e.prototype._getRangeOfSelectionUnlessWhitespaceEnclosed=function(e){if(this._editor.hasModel()){var t=this._editor.getModel(),n=this._editor.getSelection();if(n.isEmpty()&&"auto"===e.type){var i=n.getPosition(),o=i.lineNumber,r=i.column,s=t.getLineContent(o);if(0===s.length)return;if(1===r){if(/\s/.test(s[0]))return}else if(r===t.getLineMaxColumn(o)){if(/\s/.test(s[s.length-1]))return}else if(/\s/.test(s[r-2])&&/\s/.test(s[r-1]))return}return n||void 0}},e.prototype._createEventAndSignalChange=function(e,t){if(t){var n=this._editor.getModel();if(!n)return this._signalChange(nt.Empty),Promise.resolve(void 0);var i=this._getRangeOfMarker(t),o=i?i.getStartPosition():t.getStartPosition(),r=Object(H.f)(function(i){return tt(n,t,e,i)});return this._progressService&&"manual"===e.type&&this._progressService.showWhile(r,250),this._signalChange(new nt.Triggered(e,t,o,r)),r}return this._signalChange(nt.Empty),Promise.resolve(void 0)},e}();!function(e){e.Empty=new(function(){return function(){this.type=0}}());var t=function(){return function(e,t,n,i){this.trigger=e,this.rangeOrSelection=t,this.position=n,this.actions=i,this.type=1}}();e.Triggered=t}(nt||(nt={}));var rt=function(){function e(e,t,n,i){var o=this;this._editor=e,this._markerService=t,this._progressService=i,this._state=nt.Empty,this._onDidChangeState=new Ke.a,this._disposables=[],this._supportedCodeActions=it.bindTo(n),this._disposables.push(this._editor.onDidChangeModel(function(){return o._update()})),this._disposables.push(this._editor.onDidChangeModelLanguage(function(){return o._update()})),this._disposables.push(qe.a.onDidChange(function(){return o._update()})),this._update()}return e.prototype.dispose=function(){this._disposables=Object(z.d)(this._disposables),Object(z.d)(this._codeActionOracle)},Object.defineProperty(e.prototype,"onDidChangeState",{get:function(){return this._onDidChangeState.event},enumerable:!0,configurable:!0}),e.prototype._update=function(){var e=this;this._codeActionOracle&&(this._codeActionOracle.dispose(),this._codeActionOracle=void 0),1===this._state.type&&this._state.actions.cancel(),this.setState(nt.Empty);var t=this._editor.getModel();if(t&&qe.a.has(t)&&!this._editor.getConfiguration().readOnly){for(var n=[],i=0,o=qe.a.all(t);i<o.length;i++){var r=o[i];Array.isArray(r.providedCodeActionKinds)&&n.push.apply(n,r.providedCodeActionKinds)}this._supportedCodeActions.set(n.join(" ")),this._codeActionOracle=new ot(this._editor,this._markerService,function(t){return e.setState(t)},void 0,this._progressService),this._codeActionOracle.trigger({type:"auto"})}else this._supportedCodeActions.reset()},e.prototype.trigger=function(e){return this._codeActionOracle?this._codeActionOracle.trigger(e):Promise.resolve(void 0)},e.prototype.setState=function(e){e!==this._state&&(this._state=e,this._onDidChangeState.fire(e))},e}(),st=n(82),at=n(126),ct=function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function s(e){try{c(i.next(e))}catch(t){r(t)}}function a(e){try{c(i.throw(e))}catch(t){r(t)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((i=i.apply(e,t||[])).next())})},lt=function(e,t){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(a){r=[6,a],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},ut=function(){function e(e,t,n){this._editor=e,this._contextMenuService=t,this._onApplyCodeAction=n,this._onDidExecuteCodeAction=new Ke.a,this.onDidExecuteCodeAction=this._onDidExecuteCodeAction.event}return e.prototype.show=function(e,t){return ct(this,void 0,void 0,function(){var n,i,o=this;return lt(this,function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),this._editor.getDomNode()?(this._visible=!0,i=n.actions.map(function(e){return o.codeActionToAction(e)}),this._contextMenuService.showContextMenu({getAnchor:function(){return K.a.isIPosition(t)&&(t=o._toCoords(t)),t||{x:0,y:0}},getActions:function(){return i},onHide:function(){o._visible=!1,o._editor.focus()},autoSelectFirstItem:!0}),[2]):[2,Promise.reject(Object($e.a)())]}})})},e.prototype.codeActionToAction=function(e){var t=this,n=e.command?e.command.id:e.title,i=e.title;return new at.a(n,i,void 0,!0,function(){return t._onApplyCodeAction(e).finally(function(){return t._onDidExecuteCodeAction.fire(void 0)})})},Object.defineProperty(e.prototype,"isVisible",{get:function(){return this._visible},enumerable:!0,configurable:!0}),e.prototype._toCoords=function(e){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(e,1),this._editor.render();var t=this._editor.getScrolledVisiblePosition(e),n=Object(st.v)(this._editor.getDomNode());return{x:n.left+t.left,y:n.top+t.top+t.height}},e}(),dt=n(149),ht=(n(265),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}()),pt=function(e){function t(t){var n=e.call(this)||this;return n._onClick=n._register(new Ke.a),n.onClick=n._onClick.event,n._state=nt.Empty,n._futureFixes=new Ze.b,n._domNode=document.createElement("div"),n._domNode.className="lightbulb-glyph",n._editor=t,n._editor.addContentWidget(n),n._register(n._editor.onDidChangeModel(function(e){return n._futureFixes.cancel()})),n._register(n._editor.onDidChangeModelLanguage(function(e){return n._futureFixes.cancel()})),n._register(n._editor.onDidChangeModelContent(function(e){var t=n._editor.getModel();(1!==n._state.type||!t||n._state.position.lineNumber>=t.getLineCount())&&n._futureFixes.cancel()})),n._register(st.k(n._domNode,"click",function(e){if(1===n._state.type){n._editor.focus();var t=st.v(n._domNode),i=t.top,o=t.height,r=n._editor.getConfiguration().lineHeight,s=Math.floor(r/3);n._position&&null!==n._position.position&&n._position.position.lineNumber<n._state.position.lineNumber&&(s+=r),n._onClick.fire({x:e.posx,y:i+o+s,state:n._state})}})),n._register(st.h(n._domNode,"mouseenter",function(e){if(1===(1&e.buttons)){n.hide();var t=new dt.a;t.startMonitoring(dt.b,function(){},function(){t.dispose()})}})),n._register(n._editor.onDidChangeConfiguration(function(e){e.contribInfo&&!n._editor.getConfiguration().contribInfo.lightbulbEnabled&&n.hide()})),n}return ht(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this),this._editor.removeContentWidget(this)},t.prototype.getId=function(){return"LightBulbWidget"},t.prototype.getDomNode=function(){return this._domNode},t.prototype.getPosition=function(){return this._position},t.prototype.tryShow=function(e){var t=this;1!==e.type||this._position&&(!e.position||this._position.position&&this._position.position.lineNumber!==e.position.lineNumber)?this.hide():this._futureFixes&&this._futureFixes.cancel(),this._futureFixes=new Ze.b;var n=this._futureFixes.token;if(this._state=e,this._state.type!==nt.Empty.type){var i=this._state.rangeOrSelection;this._state.actions.then(function(e){!n.isCancellationRequested&&e.actions.length>0&&i?t._show(e):t.hide()}).catch(function(){t.hide()})}},Object.defineProperty(t.prototype,"title",{get:function(){return this._domNode.title},set:function(e){this._domNode.title=e},enumerable:!0,configurable:!0}),t.prototype._show=function(e){var n=this,i=this._editor.getConfiguration();if(i.contribInfo.lightbulbEnabled&&1===this._state.type){var o=this._state.position,r=o.lineNumber,s=o.column,a=this._editor.getModel();if(a){var c=a.getOptions().tabSize,l=a.getLineContent(r),u=$.b.computeIndentLevel(l,c),d=function(e){return e>2&&n._editor.getTopForLineNumber(e)===n._editor.getTopForLineNumber(e-1)},h=r;if(!(i.fontInfo.spaceWidth*u>22))if(r>1&&!d(r-1))h-=1;else if(d(r+1)){if(s*i.fontInfo.spaceWidth<22)return void this.hide()}else h+=1;this._position={position:{lineNumber:h,column:1},preference:t._posPref},st.P(this._domNode,"autofixable",e.hasAutoFix),this._editor.layoutContentWidget(this)}}},t.prototype.hide=function(){this._position=null,this._state=nt.Empty,this._futureFixes.cancel(),this._editor.layoutContentWidget(this)},t._posPref=[0],t}(z.a),gt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ft=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},mt=function(e,t){return function(n,i){t(n,i,e)}},_t=function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function s(e){try{c(i.next(e))}catch(t){r(t)}}function a(e){try{c(i.throw(e))}catch(t){r(t)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((i=i.apply(e,t||[])).next())})},vt=function(e,t){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(a){r=[6,a],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};function bt(e){return Pe.d.regex(it.keys()[0],new RegExp("(\\s|^)"+Object(he.n)(e.value)+"\\b"))}var yt=function(e){function t(t,n,i,o,r,s,a,c){var l=e.call(this)||this;return l._commandService=s,l._keybindingService=a,l._bulkEditService=c,l._editor=t,l._model=new rt(l._editor,n,i,o),l._codeActionContextMenu=new ut(t,r,function(e){return l._onApplyCodeAction(e)}),l._lightBulbWidget=l._register(new pt(t)),l._updateLightBulbTitle(),l._register(l._codeActionContextMenu.onDidExecuteCodeAction(function(e){return l._model.trigger({type:"auto",filter:{}})})),l._register(l._lightBulbWidget.onClick(l._handleLightBulbSelect,l)),l._register(l._model.onDidChangeState(function(e){return l._onDidChangeCodeActionsState(e)})),l._register(l._keybindingService.onDidUpdateKeybindings(l._updateLightBulbTitle,l)),l}return gt(t,e),t.get=function(e){return e.getContribution(t.ID)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._model.dispose()},t.prototype._onDidChangeCodeActionsState=function(e){var t=this;this._activeRequest&&(this._activeRequest.cancel(),this._activeRequest=void 0),1===e.type?(this._activeRequest=e.actions,e.trigger.filter&&e.trigger.filter.kind?e.actions.then(function(n){n.actions.length>0&&(1===e.trigger.autoApply||0===e.trigger.autoApply&&1===n.actions.length)?t._onApplyCodeAction(n.actions[0]):t._codeActionContextMenu.show(e.actions,e.position)}).catch($e.e):"manual"===e.trigger.type?this._codeActionContextMenu.show(e.actions,e.position):this._codeActionContextMenu.isVisible?this._codeActionContextMenu.show(e.actions,e.position):this._lightBulbWidget.tryShow(e)):this._lightBulbWidget.hide()},t.prototype.getId=function(){return t.ID},t.prototype._handleLightBulbSelect=function(e){this._codeActionContextMenu.show(e.state.actions,e)},t.prototype.triggerFromEditorSelection=function(e,t){return this._model.trigger({type:"manual",filter:e,autoApply:t})},t.prototype._updateLightBulbTitle=function(){var e,t=this._keybindingService.lookupKeybinding(St.Id);e=t?V.a("quickFixWithKb","Show Fixes ({0})",t.getLabel()):V.a("quickFix","Show Fixes"),this._lightBulbWidget.title=e},t.prototype._onApplyCodeAction=function(e){return wt(e,this._bulkEditService,this._commandService,this._editor)},t.ID="editor.contrib.quickFixController",t=ft([mt(1,ze.b),mt(2,Pe.e),mt(3,Ue.a),mt(4,Ve.a),mt(5,We.b),mt(6,He.a),mt(7,Me.a)],t)}(z.a);function wt(e,t,n,i){return _t(this,void 0,void 0,function(){return vt(this,function(o){switch(o.label){case 0:return e.edit?[4,t.apply(e.edit,{editor:i})]:[3,2];case 1:o.sent(),o.label=2;case 2:return e.command?[4,n.executeCommand.apply(n,[e.command.id].concat(e.command.arguments||[]))]:[3,4];case 3:o.sent(),o.label=4;case 4:return[2]}})})}function Ct(e,t,n,i){if(e.hasModel()){var o=yt.get(e);if(o){var r=e.getPosition();o.triggerFromEditorSelection(n,i).then(function(n){n&&n.actions.length||je.get(e).showMessage(t,r)})}}}var St=function(e){function t(){return e.call(this,{id:t.Id,label:V.a("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix",precondition:Pe.d.and(G.a.writable,G.a.hasCodeActionsProvider),kbOpts:{kbExpr:G.a.editorTextFocus,primary:2132,weight:100}})||this}return gt(t,e),t.prototype.run=function(e,t){return Ct(t,V.a("editor.action.quickFix.noneMessage","No code actions available"))},t.Id="editor.action.quickFix",t}(U.b),xt=function(){function e(e,t,n){this.kind=e,this.apply=t,this.preferred=n}return e.fromUser=function(t,n){return t&&"object"===typeof t?new e(e.getKindFromUser(t,n.kind),e.getApplyFromUser(t,n.apply),e.getPreferredUser(t)):new e(n.kind,n.apply,!1)},e.getApplyFromUser=function(e,t){switch("string"===typeof e.apply?e.apply.toLowerCase():""){case"first":return 1;case"never":return 2;case"ifsingle":return 0;default:return t}},e.getKindFromUser=function(e,t){return"string"===typeof e.kind?new Xe(e.kind):t},e.getPreferredUser=function(e){return"boolean"===typeof e.preferred&&e.preferred},e}(),Ot=function(e){function t(){return e.call(this,{id:t.Id,precondition:Pe.d.and(G.a.writable,G.a.hasCodeActionsProvider),description:{description:"Trigger a code action",args:[{name:"args",schema:{type:"object",required:["kind"],properties:{kind:{type:"string"},apply:{type:"string",default:"ifSingle",enum:["first","ifSingle","never"]}}}}]}})||this}return gt(t,e),t.prototype.runEditorCommand=function(e,t,n){var i=xt.fromUser(n,{kind:Xe.Empty,apply:0});return Ct(t,V.a("editor.action.quickFix.noneMessage","No code actions available"),{kind:i.kind,includeSourceActions:!0,onlyIncludePreferredActions:i.preferred},i.apply)},t.Id="editor.action.codeAction",t}(U.c),kt=function(e){function t(){return e.call(this,{id:t.Id,label:V.a("refactor.label","Refactor..."),alias:"Refactor",precondition:Pe.d.and(G.a.writable,G.a.hasCodeActionsProvider),kbOpts:{kbExpr:G.a.editorTextFocus,primary:3120,mac:{primary:1328},weight:100},menuOpts:{group:"1_modification",order:2,when:Pe.d.and(G.a.writable,bt(Xe.Refactor))},description:{description:"Refactor...",args:[{name:"args",schema:{type:"object",properties:{kind:{type:"string"},apply:{type:"string",default:"never",enum:["first","ifSingle","never"]}}}}]}})||this}return gt(t,e),t.prototype.run=function(e,t,n){var i=xt.fromUser(n,{kind:Xe.Refactor,apply:2});return Ct(t,V.a("editor.action.refactor.noneMessage","No refactorings available"),{kind:Xe.Refactor.contains(i.kind)?i.kind:Xe.Empty,onlyIncludePreferredActions:i.preferred},i.apply)},t.Id="editor.action.refactor",t}(U.b),Dt=function(e){function t(){return e.call(this,{id:t.Id,label:V.a("source.label","Source Action..."),alias:"Source Action",precondition:Pe.d.and(G.a.writable,G.a.hasCodeActionsProvider),menuOpts:{group:"1_modification",order:2.1,when:Pe.d.and(G.a.writable,bt(Xe.Source))},description:{description:"Source Action...",args:[{name:"args",schema:{type:"object",properties:{kind:{type:"string"},apply:{type:"string",default:"never",enum:["first","ifSingle","never"]}}}}]}})||this}return gt(t,e),t.prototype.run=function(e,t,n){var i=xt.fromUser(n,{kind:Xe.Source,apply:2});return Ct(t,V.a("editor.action.source.noneMessage","No source actions available"),{kind:Xe.Source.contains(i.kind)?i.kind:Xe.Empty,includeSourceActions:!0,onlyIncludePreferredActions:i.preferred},i.apply)},t.Id="editor.action.sourceAction",t}(U.b),It=function(e){function t(){return e.call(this,{id:t.Id,label:V.a("organizeImports.label","Organize Imports"),alias:"Organize Imports",precondition:Pe.d.and(G.a.writable,bt(Xe.SourceOrganizeImports)),kbOpts:{kbExpr:G.a.editorTextFocus,primary:1581,weight:100}})||this}return gt(t,e),t.prototype.run=function(e,t){return Ct(t,V.a("editor.action.organize.noneMessage","No organize imports action available"),{kind:Xe.SourceOrganizeImports,includeSourceActions:!0},0)},t.Id="editor.action.organizeImports",t}(U.b),Nt=function(e){function t(){return e.call(this,{id:t.Id,label:V.a("fixAll.label","Fix All"),alias:"Fix All",precondition:Pe.d.and(G.a.writable,bt(Xe.SourceFixAll))})||this}return gt(t,e),t.prototype.run=function(e,t){return Ct(t,V.a("fixAll.noneMessage","No fix all action available"),{kind:Xe.SourceFixAll,includeSourceActions:!0},0)},t.Id="editor.action.fixAll",t}(U.b),Lt=function(e){function t(){return e.call(this,{id:t.Id,label:V.a("autoFix.label","Auto Fix..."),alias:"Auto Fix",precondition:Pe.d.and(G.a.writable,bt(Xe.QuickFix)),kbOpts:{kbExpr:G.a.editorTextFocus,primary:1620,mac:{primary:2644},weight:100}})||this}return gt(t,e),t.prototype.run=function(e,t){return Ct(t,V.a("editor.action.autoFix.noneMessage","No auto fixes available"),{kind:Xe.QuickFix,onlyIncludePreferredActions:!0},0)},t.Id="editor.action.autoFix",t}(U.b);function Mt(e,t){var n=[],i=qe.b.ordered(e),o=i.map(function(i){return Promise.resolve(i.provideCodeLenses(e,t)).then(function(e){if(Array.isArray(e))for(var t=0,o=e;t<o.length;t++){var r=o[t];n.push({symbol:r,provider:i})}}).catch($e.f)});return Promise.all(o).then(function(){return Object(Ge.o)(n,function(e,t){return e.symbol.range.startLineNumber<t.symbol.range.startLineNumber?-1:e.symbol.range.startLineNumber>t.symbol.range.startLineNumber?1:i.indexOf(e.provider)<i.indexOf(t.provider)?-1:i.indexOf(e.provider)>i.indexOf(t.provider)?1:e.symbol.range.startColumn<t.symbol.range.startColumn?-1:e.symbol.range.startColumn>t.symbol.range.startColumn?1:0})})}Object(U.h)(yt),Object(U.f)(St),Object(U.f)(kt),Object(U.f)(Dt),Object(U.f)(It),Object(U.f)(Lt),Object(U.f)(Nt),Object(U.g)(new Ot),Object(U.j)("_executeCodeLensProvider",function(e,t){var n=t.resource,i=t.itemResolveCount;if(!(n instanceof Ye.a))throw Object($e.b)();var o=e.get(Je.a).getModel(n);if(!o)throw Object($e.b)();var r=[];return Mt(o,Ze.a.None).then(function(e){for(var t=[],n=function(e){"undefined"===typeof i||Boolean(e.symbol.command)?r.push(e.symbol):i-- >0&&e.provider.resolveCodeLens&&t.push(Promise.resolve(e.provider.resolveCodeLens(o,e.symbol,Ze.a.None)).then(function(t){return r.push(t||e.symbol)}))},s=0,a=e;s<a.length;s++){n(a[s])}return Promise.all(t)}).then(function(){return r})});n(266);var Et=function(){function e(e,t){this.afterLineNumber=e,this._onHeight=t,this.heightInLines=1,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}return e.prototype.onComputedHeight=function(e){void 0===this._lastHeight?this._lastHeight=e:this._lastHeight!==e&&(this._lastHeight=e,this._onHeight())},e}(),Pt=function(){function e(t,n,i){this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._id="codeLensWidget"+ ++e._idPool,this._editor=t,this.setSymbolRange(n),this._domNode=document.createElement("span"),this._domNode.innerHTML="&nbsp;",st.f(this._domNode,"codelens-decoration"),this.updateHeight(),this.withCommands(i.map(function(e){return e.symbol}),!1)}return e.prototype.updateHeight=function(){var e=this._editor.getConfiguration(),t=e.fontInfo,n=e.lineHeight;this._domNode.style.height=Math.round(1.1*n)+"px",this._domNode.style.lineHeight=n+"px",this._domNode.style.fontSize=Math.round(.9*t.fontSize)+"px",this._domNode.style.paddingRight=Math.round(.45*t.fontSize)+"px",this._domNode.innerHTML="&nbsp;"},e.prototype.withCommands=function(e,t){this._commands.clear();var n=Object(Ge.d)(e);if(Object(Ge.m)(n))this._domNode.innerHTML="<span>no commands</span>";else{for(var i=[],o=0;o<n.length;o++){var r=n[o].command;if(r){var s=Object(he.m)(r.title),a=void 0;r.id?(a="<a id="+o+">"+s+"</a>",this._commands.set(String(o),r)):a="<span>"+s+"</span>",i.push(a)}}var c=""===this._domNode.innerHTML||"&nbsp;"===this._domNode.innerHTML;this._domNode.innerHTML=i.join("<span>&nbsp;|&nbsp;</span>"),this._editor.layoutContentWidget(this),c&&t&&st.f(this._domNode,"fadein")}},e.prototype.getCommand=function(e){return e.parentElement===this._domNode?this._commands.get(e.id):void 0},e.prototype.getId=function(){return this._id},e.prototype.getDomNode=function(){return this._domNode},e.prototype.setSymbolRange=function(e){if(this._editor.hasModel()){var t=e.startLineNumber,n=this._editor.getModel().getLineFirstNonWhitespaceColumn(t);this._widgetPosition={position:{lineNumber:t,column:n},preference:[1]}}},e.prototype.getPosition=function(){return this._widgetPosition},e.prototype.isVisible=function(){return this._domNode.hasAttribute("monaco-visible-content-widget")},e._idPool=0,e}(),Rt=function(){function e(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}return e.prototype.addDecoration=function(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)},e.prototype.removeDecoration=function(e){this._removeDecorations.push(e)},e.prototype.commit=function(e){for(var t=e.deltaDecorations(this._removeDecorations,this._addDecorations),n=0,i=t.length;n<i;n++)this._addDecorationsCallbacks[n](t[n])},e}(),Tt=function(){function e(e,t,n,i,o){var r,s=this;this._editor=t,this._data=e,this._decorationIds=new Array(this._data.length),this._data.forEach(function(e,t){n.addDecoration({range:e.symbol.range,options:$.a.EMPTY},function(e){return s._decorationIds[t]=e}),r=r?se.a.plusRange(r,e.symbol.range):se.a.lift(e.symbol.range)}),r&&(this._contentWidget=new Pt(t,r,this._data),this._viewZone=new Et(r.startLineNumber-1,o),this._viewZoneId=i.addZone(this._viewZone),this._editor.addContentWidget(this._contentWidget))}return e.prototype.dispose=function(e,t){for(;this._decorationIds.length;)e.removeDecoration(this._decorationIds.pop());t&&t.removeZone(this._viewZoneId),this._editor.removeContentWidget(this._contentWidget)},e.prototype.isValid=function(){var e=this;if(!this._editor.hasModel())return!1;var t=this._editor.getModel();return this._decorationIds.some(function(n,i){var o=t.getDecorationRange(n),r=e._data[i].symbol;return!(!o||se.a.isEmpty(r.range)!==o.isEmpty())})},e.prototype.updateCodeLensSymbols=function(e,t){for(var n=this;this._decorationIds.length;)t.removeDecoration(this._decorationIds.pop());this._data=e,this._decorationIds=new Array(this._data.length),this._data.forEach(function(e,i){t.addDecoration({range:e.symbol.range,options:$.a.EMPTY},function(e){return n._decorationIds[i]=e})})},e.prototype.computeIfNecessary=function(e){if(!this._contentWidget.isVisible())return null;for(var t=0;t<this._decorationIds.length;t++){var n=e.getDecorationRange(this._decorationIds[t]);n&&(this._data[t].symbol.range=n)}return this._data},e.prototype.updateCommands=function(e){this._contentWidget.withCommands(e,!0);for(var t=0;t<this._data.length;t++){var n=e[t];if(n){var i=this._data[t].symbol;i.command=n.command||i.command}}},e.prototype.updateHeight=function(){this._contentWidget.updateHeight()},e.prototype.getCommand=function(e){return this._contentWidget.getCommand(e)},e.prototype.getLineNumber=function(){if(this._editor.hasModel()){var e=this._editor.getModel().getDecorationRange(this._decorationIds[0]);if(e)return e.startLineNumber}return-1},e.prototype.update=function(e){if(this.isValid()&&this._editor.hasModel()){var t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);t&&(this._viewZone.afterLineNumber=t.startLineNumber-1,e.layoutZone(this._viewZoneId),this._contentWidget.setSymbolRange(t),this._editor.layoutContentWidget(this._contentWidget))}},e}();Object(X.e)(function(e,t){var n=e.getColor(Y.e);n&&t.addRule(".monaco-editor .codelens-decoration { color: "+n+"; }");var i=e.getColor(J.n);i&&t.addRule(".monaco-editor .codelens-decoration > a:hover { color: "+i+" !important; }")});var At=n(108),jt=n(221),Ft=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},Bt=function(e,t){return function(n,i){t(n,i,e)}},Wt=function(){function e(e,t,n,i){var o=this;this._editor=e,this._commandService=t,this._notificationService=n,this._codeLensCache=i,this._isEnabled=this._editor.getConfiguration().contribInfo.codeLens,this._globalToDispose=[],this._localToDispose=[],this._lenses=[],this._currentFindCodeLensSymbolsPromise=null,this._modelChangeCounter=0,this._globalToDispose.push(this._editor.onDidChangeModel(function(){return o._onModelChange()})),this._globalToDispose.push(this._editor.onDidChangeModelLanguage(function(){return o._onModelChange()})),this._globalToDispose.push(this._editor.onDidChangeConfiguration(function(e){var t=o._isEnabled;o._isEnabled=o._editor.getConfiguration().contribInfo.codeLens,t!==o._isEnabled&&o._onModelChange()})),this._globalToDispose.push(qe.b.onDidChange(this._onModelChange,this)),this._onModelChange()}return e.prototype.dispose=function(){this._localDispose(),this._globalToDispose=Object(z.d)(this._globalToDispose)},e.prototype._localDispose=function(){this._currentFindCodeLensSymbolsPromise&&(this._currentFindCodeLensSymbolsPromise.cancel(),this._currentFindCodeLensSymbolsPromise=null,this._modelChangeCounter++),this._currentResolveCodeLensSymbolsPromise&&(this._currentResolveCodeLensSymbolsPromise.cancel(),this._currentResolveCodeLensSymbolsPromise=null),this._localToDispose=Object(z.d)(this._localToDispose)},e.prototype.getId=function(){return e.ID},e.prototype._onModelChange=function(){var e=this;this._localDispose();var t=this._editor.getModel();if(t&&this._isEnabled){var n=this._codeLensCache.get(t);if(n&&this._renderCodeLensSymbols(n),qe.b.has(t)){for(var i=0,o=qe.b.all(t);i<o.length;i++){var r=o[i];if("function"===typeof r.onDidChange){var s=r.onDidChange(function(){return a.schedule()});this._localToDispose.push(s)}}this._detectVisibleLenses=new H.d(function(){e._onViewportChanged()},250);var a=new H.d(function(){var n=++e._modelChangeCounter;e._currentFindCodeLensSymbolsPromise&&e._currentFindCodeLensSymbolsPromise.cancel(),e._currentFindCodeLensSymbolsPromise=Object(H.f)(function(e){return Mt(t,e)}),e._currentFindCodeLensSymbolsPromise.then(function(i){n===e._modelChangeCounter&&(e._codeLensCache.put(t,i),e._renderCodeLensSymbols(i),e._detectVisibleLenses.schedule())},$e.e)},250);this._localToDispose.push(a),this._localToDispose.push(this._detectVisibleLenses),this._localToDispose.push(this._editor.onDidChangeModelContent(function(t){e._editor.changeDecorations(function(t){e._editor.changeViewZones(function(n){var i=[],o=-1;e._lenses.forEach(function(e){e.isValid()&&o!==e.getLineNumber()?(e.update(n),o=e.getLineNumber()):i.push(e)});var r=new Rt;i.forEach(function(t){t.dispose(r,n),e._lenses.splice(e._lenses.indexOf(t),1)}),r.commit(t)})}),e._detectVisibleLenses.schedule(),a.schedule()})),this._localToDispose.push(this._editor.onDidScrollChange(function(t){t.scrollTopChanged&&e._lenses.length>0&&e._detectVisibleLenses.schedule()})),this._localToDispose.push(this._editor.onDidLayoutChange(function(t){e._detectVisibleLenses.schedule()})),this._localToDispose.push(Object(z.f)(function(){if(e._editor.getModel()){var t=Qe.c.capture(e._editor);e._editor.changeDecorations(function(t){e._editor.changeViewZones(function(n){e._disposeAllLenses(t,n)})}),t.restore(e._editor)}else e._disposeAllLenses(void 0,void 0)})),this._localToDispose.push(this._editor.onDidChangeConfiguration(function(t){if(t.fontInfo)for(var n=0,i=e._lenses;n<i.length;n++){i[n].updateHeight()}})),this._localToDispose.push(this._editor.onMouseUp(function(t){var n;if(9===t.target.type&&t.target.element&&"A"===t.target.element.tagName)for(var i=0,o=e._lenses;i<o.length;i++){var r=o[i].getCommand(t.target.element);if(r){(n=e._commandService).executeCommand.apply(n,[r.id].concat(r.arguments||[])).catch(function(t){return e._notificationService.error(t)});break}}})),a.schedule()}else n&&this._localToDispose.push(Object(H.g)(function(){var i=e._codeLensCache.get(t);n===i&&(e._codeLensCache.delete(t),e._onModelChange())},3e4))}},e.prototype._disposeAllLenses=function(e,t){var n=new Rt;this._lenses.forEach(function(e){return e.dispose(n,t)}),e&&n.commit(e),this._lenses=[]},e.prototype._renderCodeLensSymbols=function(e){var t=this;if(this._editor.hasModel()){for(var n,i=this._editor.getModel().getLineCount(),o=[],r=0,s=e;r<s.length;r++){var a=s[r],c=a.symbol.range.startLineNumber;c<1||c>i||(n&&n[n.length-1].symbol.range.startLineNumber===c?n.push(a):(n=[a],o.push(n)))}var l=Qe.c.capture(this._editor);this._editor.changeDecorations(function(e){t._editor.changeViewZones(function(n){for(var i=0,r=0,s=new Rt;r<o.length&&i<t._lenses.length;){var a=o[r][0].symbol.range.startLineNumber,c=t._lenses[i].getLineNumber();c<a?(t._lenses[i].dispose(s,n),t._lenses.splice(i,1)):c===a?(t._lenses[i].updateCodeLensSymbols(o[r],s),r++,i++):(t._lenses.splice(i,0,new Tt(o[r],t._editor,s,n,function(){return t._detectVisibleLenses.schedule()})),i++,r++)}for(;i<t._lenses.length;)t._lenses[i].dispose(s,n),t._lenses.splice(i,1);for(;r<o.length;)t._lenses.push(new Tt(o[r],t._editor,s,n,function(){return t._detectVisibleLenses.schedule()})),r++;s.commit(e)})}),l.restore(this._editor)}},e.prototype._onViewportChanged=function(){var e=this;this._currentResolveCodeLensSymbolsPromise&&(this._currentResolveCodeLensSymbolsPromise.cancel(),this._currentResolveCodeLensSymbolsPromise=null);var t=this._editor.getModel();if(t){var n=[],i=[];this._lenses.forEach(function(e){var o=e.computeIfNecessary(t);o&&(n.push(o),i.push(e))}),0!==n.length&&(this._currentResolveCodeLensSymbolsPromise=Object(H.f)(function(e){var o=n.map(function(n,o){var r=new Array(n.length),s=n.map(function(n,i){return n.symbol.command||"function"!==typeof n.provider.resolveCodeLens?(r[i]=n.symbol,Promise.resolve(void 0)):Promise.resolve(n.provider.resolveCodeLens(t,n.symbol,e)).then(function(e){r[i]=e},$e.f)});return Promise.all(s).then(function(){i[o].updateCommands(r)})});return Promise.all(o)}),this._currentResolveCodeLensSymbolsPromise.then(function(){e._currentResolveCodeLensSymbolsPromise=null}).catch(function(t){e._currentResolveCodeLensSymbolsPromise=null,Object($e.e)(t)}))}},e.ID="css.editor.codeLens",e=Ft([Bt(1,We.b),Bt(2,At.a),Bt(3,jt.b)],e)}();Object(U.h)(Wt);var Vt=n(101);function Ht(e,t){switch(void 0===t&&(t=0),typeof e){case"object":return null===e?zt(349,t):Array.isArray(e)?(n=e,i=zt(104579,i=t),n.reduce(function(e,t){return Ht(t,e)},i)):function(e,t){return t=zt(181387,t),Object.keys(e).sort().reduce(function(t,n){return t=Ut(n,t),Ht(e[n],t)},t)}(e,t);case"string":return Ut(e,t);case"boolean":return function(e,t){return zt(e?433:863,t)}(e,t);case"number":return zt(e,t);case"undefined":return zt(0,937);default:return zt(0,617)}var n,i}function zt(e,t){return(t<<5)-t+e|0}function Ut(e,t){t=zt(149417,t);for(var n=0,i=e.length;n<i;n++)t=zt(e.charCodeAt(n),t);return t}function Kt(e,t,n,i){return Promise.resolve(n.provideColorPresentations(e,t,i))}Object(U.j)("_executeDocumentColorProvider",function(e,t){var n=t.resource;if(!(n instanceof Ye.a))throw Object($e.b)();var i=e.get(Je.a).getModel(n);if(!i)throw Object($e.b)();var o=[],r=qe.c.ordered(i).reverse().map(function(e){return Promise.resolve(e.provideDocumentColors(i,Ze.a.None)).then(function(e){if(Array.isArray(e))for(var t=0,n=e;t<n.length;t++){var i=n[t];o.push({range:i.range,color:[i.color.red,i.color.green,i.color.blue,i.color.alpha]})}})});return Promise.all(r).then(function(){return o})}),Object(U.j)("_executeColorPresentationProvider",function(e,t){var n=t.resource,i=t.color,o=t.range;if(!(n instanceof Ye.a)||!Array.isArray(i)||4!==i.length||!se.a.isIRange(o))throw Object($e.b)();var r=i[0],s=i[1],a=i[2],c=i[3],l=e.get(Je.a).getModel(n);if(!l)throw Object($e.b)();var u={range:o,color:{red:r,green:s,blue:a,alpha:c}},d=[],h=qe.c.ordered(l).reverse().map(function(e){return Promise.resolve(e.provideColorPresentations(l,u,Ze.a.None)).then(function(e){Array.isArray(e)&&d.push.apply(d,e)})});return Promise.all(h).then(function(){return d})});var qt=n(115),Gt=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},Zt=function(e,t){return function(n,i){t(n,i,e)}},$t=function(){function e(e,t,n){var i=this;this._editor=e,this._codeEditorService=t,this._configurationService=n,this._globalToDispose=[],this._localToDispose=[],this._decorationsIds=[],this._colorDatas=new Map,this._colorDecoratorIds=[],this._decorationsTypes={},this._globalToDispose.push(e.onDidChangeModel(function(e){i._isEnabled=i.isEnabled(),i.onModelChanged()})),this._globalToDispose.push(e.onDidChangeModelLanguage(function(e){return i.onModelChanged()})),this._globalToDispose.push(qe.c.onDidChange(function(e){return i.onModelChanged()})),this._globalToDispose.push(e.onDidChangeConfiguration(function(e){var t=i._isEnabled;i._isEnabled=i.isEnabled(),t!==i._isEnabled&&(i._isEnabled?i.onModelChanged():i.removeAllDecorations())})),this._timeoutTimer=null,this._computePromise=null,this._isEnabled=this.isEnabled(),this.onModelChanged()}return e.prototype.isEnabled=function(){var e=this._editor.getModel();if(!e)return!1;var t=e.getLanguageIdentifier(),n=this._configurationService.getValue(t.language);if(n){var i=n.colorDecorators;if(i&&void 0!==i.enable&&!i.enable)return i.enable}return this._editor.getConfiguration().contribInfo.colorDecorators},e.prototype.getId=function(){return e.ID},e.get=function(e){return e.getContribution(this.ID)},e.prototype.dispose=function(){this.stop(),this.removeAllDecorations(),this._globalToDispose=Object(z.d)(this._globalToDispose)},e.prototype.onModelChanged=function(){var t=this;if(this.stop(),this._isEnabled){var n=this._editor.getModel();n&&qe.c.has(n)&&(this._localToDispose.push(this._editor.onDidChangeModelContent(function(n){t._timeoutTimer||(t._timeoutTimer=new H.e,t._timeoutTimer.cancelAndSet(function(){t._timeoutTimer=null,t.beginCompute()},e.RECOMPUTE_TIME))})),this.beginCompute())}},e.prototype.beginCompute=function(){var e=this;this._computePromise=Object(H.f)(function(t){var n=e._editor.getModel();return n?function(e,t){var n=[],i=qe.c.ordered(e).reverse().map(function(i){return Promise.resolve(i.provideDocumentColors(e,t)).then(function(e){if(Array.isArray(e))for(var t=0,o=e;t<o.length;t++){var r=o[t];n.push({colorInfo:r,provider:i})}})});return Promise.all(i).then(function(){return n})}(n,t):Promise.resolve([])}),this._computePromise.then(function(t){e.updateDecorations(t),e.updateColorDecorators(t),e._computePromise=null},$e.e)},e.prototype.stop=function(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose=Object(z.d)(this._localToDispose)},e.prototype.updateDecorations=function(e){var t=this,n=e.map(function(e){return{range:{startLineNumber:e.colorInfo.range.startLineNumber,startColumn:e.colorInfo.range.startColumn,endLineNumber:e.colorInfo.range.endLineNumber,endColumn:e.colorInfo.range.endColumn},options:$.a.EMPTY}});this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,n),this._colorDatas=new Map,this._decorationsIds.forEach(function(n,i){return t._colorDatas.set(n,e[i])})},e.prototype.updateColorDecorators=function(e){for(var t=[],n={},i=0;i<e.length&&t.length<500;i++){var o=e[i].colorInfo.color,r=o.red,s=o.green,a=o.blue,c=o.alpha,l=new Vt.c(Math.round(255*r),Math.round(255*s),Math.round(255*a),c),u=Ht(l).toString(16),d="rgba("+l.r+", "+l.g+", "+l.b+", "+l.a+")",h="colorBox-"+u;this._decorationsTypes[h]||n[h]||this._codeEditorService.registerDecorationType(h,{before:{contentText:" ",border:"solid 0.1em #000",margin:"0.1em 0.2em 0 0.2em",width:"0.8em",height:"0.8em",backgroundColor:d},dark:{before:{border:"solid 0.1em #eee"}}}),n[h]=!0,t.push({range:{startLineNumber:e[i].colorInfo.range.startLineNumber,startColumn:e[i].colorInfo.range.startColumn,endLineNumber:e[i].colorInfo.range.endLineNumber,endColumn:e[i].colorInfo.range.endColumn},options:this._codeEditorService.resolveDecorationOptions(h,!0)})}for(var p in this._decorationsTypes)n[p]||this._codeEditorService.removeDecorationType(p);this._colorDecoratorIds=this._editor.deltaDecorations(this._colorDecoratorIds,t)},e.prototype.removeAllDecorations=function(){for(var e in this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,[]),this._colorDecoratorIds=this._editor.deltaDecorations(this._colorDecoratorIds,[]),this._decorationsTypes)this._codeEditorService.removeDecorationType(e)},e.prototype.getColorData=function(e){var t=this,n=this._editor.getModel();if(!n)return null;var i=n.getDecorationsInRange(se.a.fromPositions(e,e)).filter(function(e){return t._colorDatas.has(e.id)});return 0===i.length?null:this._colorDatas.get(i[0].id)},e.ID="editor.contrib.colorDetector",e.RECOMPUTE_TIME=1e3,e=Gt([Zt(1,be.a),Zt(2,qt.a)],e)}();Object(U.h)($t);var Yt=n(107),Jt=n(124),Xt=n(111),Qt=function(){function e(e){this._selection=e,this._usedEndToken=null}return e._haystackHasNeedleAtOffset=function(e,t,n){if(n<0)return!1;var i=t.length;if(n+i>e.length)return!1;for(var o=0;o<i;o++){var r=e.charCodeAt(n+o),s=t.charCodeAt(o);if(r!==s&&(!(r>=65&&r<=90&&r+32===s)&&!(s>=65&&s<=90&&s+32===r)))return!1}return!0},e.prototype._createOperationsForBlockComment=function(t,n,i,o,r){var s,a=t.startLineNumber,c=t.startColumn,l=t.endLineNumber,u=t.endColumn,d=o.getLineContent(a),h=o.getLineContent(l),p=d.lastIndexOf(n,c-1+n.length),g=h.indexOf(i,u-1-i.length);if(-1!==p&&-1!==g)if(a===l){d.substring(p+n.length,g).indexOf(i)>=0&&(p=-1,g=-1)}else{var f=d.substring(p+n.length),m=h.substring(0,g);(f.indexOf(i)>=0||m.indexOf(i)>=0)&&(p=-1,g=-1)}-1!==p&&-1!==g?(p+n.length<d.length&&32===d.charCodeAt(p+n.length)&&(n+=" "),g>0&&32===h.charCodeAt(g-1)&&(i=" "+i,g-=1),s=e._createRemoveBlockCommentOperations(new se.a(a,p+n.length+1,l,g+1),n,i)):(s=e._createAddBlockCommentOperations(t,n,i),this._usedEndToken=1===s.length?i:null);for(var _=0,v=s;_<v.length;_++){var b=v[_];r.addTrackedEditOperation(b.range,b.text)}},e._createRemoveBlockCommentOperations=function(e,t,n){var i=[];return se.a.isEmpty(e)?i.push(Jt.a.delete(new se.a(e.startLineNumber,e.startColumn-t.length,e.endLineNumber,e.endColumn+n.length))):(i.push(Jt.a.delete(new se.a(e.startLineNumber,e.startColumn-t.length,e.startLineNumber,e.startColumn))),i.push(Jt.a.delete(new se.a(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn+n.length)))),i},e._createAddBlockCommentOperations=function(e,t,n){var i=[];return se.a.isEmpty(e)?i.push(Jt.a.replace(new se.a(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),t+"  "+n)):(i.push(Jt.a.insert(new K.a(e.startLineNumber,e.startColumn),t+" ")),i.push(Jt.a.insert(new K.a(e.endLineNumber,e.endColumn)," "+n))),i},e.prototype.getEditOperations=function(e,t){var n=this._selection.startLineNumber,i=this._selection.startColumn;e.tokenizeIfCheap(n);var o=e.getLanguageIdAtPosition(n,i),r=Xt.a.getComments(o);r&&r.blockCommentStartToken&&r.blockCommentEndToken&&this._createOperationsForBlockComment(this._selection,r.blockCommentStartToken,r.blockCommentEndToken,e,t)},e.prototype.computeCursorState=function(e,t){var n=t.getInverseEditOperations();if(2===n.length){var i=n[0],o=n[1];return new q.a(i.range.endLineNumber,i.range.endColumn,o.range.startLineNumber,o.range.startColumn)}var r=n[0].range,s=this._usedEndToken?-this._usedEndToken.length-1:0;return new q.a(r.endLineNumber,r.endColumn+s,r.endLineNumber,r.endColumn+s)},e}(),en=function(){function e(e,t,n){this._selection=e,this._tabSize=t,this._type=n,this._deltaColumn=0}return e._gatherPreflightCommentStrings=function(e,t,n){e.tokenizeIfCheap(t);var i=e.getLanguageIdAtPosition(t,1),o=Xt.a.getComments(i),r=o?o.lineCommentToken:null;if(!r)return null;for(var s=[],a=0,c=n-t+1;a<c;a++)s[a]={ignore:!1,commentStr:r,commentStrOffset:0,commentStrLength:r.length};return s},e._analyzeLines=function(e,t,n,i){var o,r=!0;o=0===e||1!==e;for(var s=0,a=n.length;s<a;s++){var c=n[s],l=i+s,u=t.getLineContent(l),d=he.o(u);if(-1!==d){if(r=!1,c.ignore=!1,c.commentStrOffset=d,o&&!Qt._haystackHasNeedleAtOffset(u,c.commentStr,d)&&(0===e?o=!1:1===e||(c.ignore=!0)),o){var h=d+c.commentStrLength;h<u.length&&32===u.charCodeAt(h)&&(c.commentStrLength+=1)}}else c.ignore=!0,c.commentStrOffset=u.length}if(0===e&&r){o=!1;for(s=0,a=n.length;s<a;s++)n[s].ignore=!1}return{supported:!0,shouldRemoveComments:o,lines:n}},e._gatherPreflightData=function(t,n,i,o){var r=e._gatherPreflightCommentStrings(n,i,o);return null===r?{supported:!1}:e._analyzeLines(t,n,r,i)},e.prototype._executeLineComments=function(t,n,i,o){var r;i.shouldRemoveComments?r=e._createRemoveLineCommentsOperations(i.lines,o.startLineNumber):(e._normalizeInsertionPoint(t,i.lines,o.startLineNumber,this._tabSize),r=e._createAddLineCommentsOperations(i.lines,o.startLineNumber));for(var s=new K.a(o.positionLineNumber,o.positionColumn),a=0,c=r.length;a<c;a++){if(n.addEditOperation(r[a].range,r[a].text),r[a].range.isEmpty()&&r[a].range.getStartPosition().equals(s))t.getLineContent(s.lineNumber).length+1===s.column&&(this._deltaColumn=(r[a].text||"").length)}this._selectionId=n.trackSelection(o)},e.prototype._attemptRemoveBlockComment=function(e,t,n,i){var o=t.startLineNumber,r=t.endLineNumber,s=i.length+Math.max(e.getLineFirstNonWhitespaceColumn(t.startLineNumber),t.startColumn),a=e.getLineContent(o).lastIndexOf(n,s-1),c=e.getLineContent(r).indexOf(i,t.endColumn-1-n.length);return-1!==a&&-1===c&&(c=e.getLineContent(o).indexOf(i,a+n.length),r=o),-1===a&&-1!==c&&(a=e.getLineContent(r).lastIndexOf(n,c),o=r),!t.isEmpty()||-1!==a&&-1!==c||-1!==(a=e.getLineContent(o).indexOf(n))&&(c=e.getLineContent(o).indexOf(i,a+n.length)),-1!==a&&32===e.getLineContent(o).charCodeAt(a+n.length)&&(n+=" "),-1!==c&&32===e.getLineContent(r).charCodeAt(c-1)&&(i=" "+i,c-=1),-1!==a&&-1!==c?Qt._createRemoveBlockCommentOperations(new se.a(o,a+n.length+1,r,c+1),n,i):null},e.prototype._executeBlockComment=function(e,t,n){e.tokenizeIfCheap(n.startLineNumber);var i=e.getLanguageIdAtPosition(n.startLineNumber,1),o=Xt.a.getComments(i);if(o&&o.blockCommentStartToken&&o.blockCommentEndToken){var r=o.blockCommentStartToken,s=o.blockCommentEndToken,a=this._attemptRemoveBlockComment(e,n,r,s);if(!a){if(n.isEmpty()){var c=e.getLineContent(n.startLineNumber),l=he.o(c);-1===l&&(l=c.length),a=Qt._createAddBlockCommentOperations(new se.a(n.startLineNumber,l+1,n.startLineNumber,c.length+1),r,s)}else a=Qt._createAddBlockCommentOperations(new se.a(n.startLineNumber,e.getLineFirstNonWhitespaceColumn(n.startLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),r,s);1===a.length&&(this._deltaColumn=r.length+1)}this._selectionId=t.trackSelection(n);for(var u=0,d=a;u<d.length;u++){var h=d[u];t.addEditOperation(h.range,h.text)}}},e.prototype.getEditOperations=function(t,n){var i=this._selection;this._moveEndPositionDown=!1,i.startLineNumber<i.endLineNumber&&1===i.endColumn&&(this._moveEndPositionDown=!0,i=i.setEndPosition(i.endLineNumber-1,t.getLineMaxColumn(i.endLineNumber-1)));var o=e._gatherPreflightData(this._type,t,i.startLineNumber,i.endLineNumber);return o.supported?this._executeLineComments(t,n,o,i):this._executeBlockComment(t,n,i)},e.prototype.computeCursorState=function(e,t){var n=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(n=n.setEndPosition(n.endLineNumber+1,1)),new q.a(n.selectionStartLineNumber,n.selectionStartColumn+this._deltaColumn,n.positionLineNumber,n.positionColumn+this._deltaColumn)},e._createRemoveLineCommentsOperations=function(e,t){for(var n=[],i=0,o=e.length;i<o;i++){var r=e[i];r.ignore||n.push(Jt.a.delete(new se.a(t+i,r.commentStrOffset+1,t+i,r.commentStrOffset+r.commentStrLength+1)))}return n},e._createAddLineCommentsOperations=function(e,t){for(var n=[],i=0,o=e.length;i<o;i++){var r=e[i];r.ignore||n.push(Jt.a.insert(new K.a(t+i,r.commentStrOffset+1),r.commentStr+" "))}return n},e.nextVisibleColumn=function(e,t,n,i){return n?e+(t-e%t):e+i},e._normalizeInsertionPoint=function(t,n,i,o){for(var r,s,a=Number.MAX_VALUE,c=0,l=n.length;c<l;c++)if(!n[c].ignore){for(var u=t.getLineContent(i+c),d=0,h=0,p=n[c].commentStrOffset;d<a&&h<p;h++)d=e.nextVisibleColumn(d,o,9===u.charCodeAt(h),1);d<a&&(a=d)}a=Math.floor(a/o)*o;for(c=0,l=n.length;c<l;c++)if(!n[c].ignore){u=t.getLineContent(i+c),d=0;for(r=0,s=n[c].commentStrOffset;d<a&&r<s;r++)d=e.nextVisibleColumn(d,o,9===u.charCodeAt(r),1);n[c].commentStrOffset=d>a?r-1:r}},e}(),tn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),nn=function(e){function t(t,n){var i=e.call(this,n)||this;return i._type=t,i}return tn(t,e),t.prototype.run=function(e,t){if(t.hasModel()){for(var n=t.getModel(),i=[],o=t.getSelections(),r=n.getOptions(),s=0,a=o;s<a.length;s++){var c=a[s];i.push(new en(c,r.tabSize,this._type))}t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}},t}(U.b),on=function(e){function t(){return e.call(this,0,{id:"editor.action.commentLine",label:V.a("comment.line","Toggle Line Comment"),alias:"Toggle Line Comment",precondition:G.a.writable,kbOpts:{kbExpr:G.a.editorTextFocus,primary:2133,weight:100},menubarOpts:{menuId:14,group:"5_insert",title:V.a({key:"miToggleLineComment",comment:["&& denotes a mnemonic"]},"&&Toggle Line Comment"),order:1}})||this}return tn(t,e),t}(nn),rn=function(e){function t(){return e.call(this,1,{id:"editor.action.addCommentLine",label:V.a("comment.line.add","Add Line Comment"),alias:"Add Line Comment",precondition:G.a.writable,kbOpts:{kbExpr:G.a.editorTextFocus,primary:Object(Yt.a)(2089,2081),weight:100}})||this}return tn(t,e),t}(nn),sn=function(e){function t(){return e.call(this,2,{id:"editor.action.removeCommentLine",label:V.a("comment.line.remove","Remove Line Comment"),alias:"Remove Line Comment",precondition:G.a.writable,kbOpts:{kbExpr:G.a.editorTextFocus,primary:Object(Yt.a)(2089,2099),weight:100}})||this}return tn(t,e),t}(nn),an=function(e){function t(){return e.call(this,{id:"editor.action.blockComment",label:V.a("comment.block","Toggle Block Comment"),alias:"Toggle Block Comment",precondition:G.a.writable,kbOpts:{kbExpr:G.a.editorTextFocus,primary:1567,linux:{primary:3103},weight:100},menubarOpts:{menuId:14,group:"5_insert",title:V.a({key:"miToggleBlockComment",comment:["&& denotes a mnemonic"]},"Toggle &&Block Comment"),order:2}})||this}return tn(t,e),t.prototype.run=function(e,t){if(t.hasModel()){for(var n=[],i=0,o=t.getSelections();i<o.length;i++){var r=o[i];n.push(new Qt(r))}t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}},t}(U.b);Object(U.f)(on),Object(U.f)(rn),Object(U.f)(sn),Object(U.f)(an);var cn=n(152),ln=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),un=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},dn=function(e,t){return function(n,i){t(n,i,e)}},hn=function(){function e(e,t,n,i,o,r){var s=this;this._contextMenuService=t,this._contextViewService=n,this._contextKeyService=i,this._keybindingService=o,this._menuService=r,this._toDispose=[],this._contextMenuIsBeingShownCount=0,this._editor=e,this._toDispose.push(this._editor.onContextMenu(function(e){return s._onContextMenu(e)})),this._toDispose.push(this._editor.onMouseWheel(function(e){s._contextMenuIsBeingShownCount>0&&s._contextViewService.hideContextView()})),this._toDispose.push(this._editor.onKeyDown(function(e){58===e.keyCode&&(e.preventDefault(),e.stopPropagation(),s.showContextMenu())}))}return e.get=function(t){return t.getContribution(e.ID)},e.prototype._onContextMenu=function(e){if(this._editor.hasModel()){if(!this._editor.getConfiguration().contribInfo.contextmenu)return this._editor.focus(),void(e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position));if(12!==e.target.type&&(e.event.preventDefault(),6===e.target.type||7===e.target.type||1===e.target.type)){this._editor.focus(),e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position);var t=null;1!==e.target.type&&(t={x:e.event.posx-1,width:2,y:e.event.posy-1,height:2}),this.showContextMenu(t)}}},e.prototype.showContextMenu=function(e){if(this._editor.getConfiguration().contribInfo.contextmenu&&this._editor.hasModel())if(this._contextMenuService){var t=this._getMenuActions(this._editor.getModel());t.length>0&&this._doShowContextMenu(t,e)}else this._editor.focus()},e.prototype._getMenuActions=function(e){var t=[],n=this._menuService.createMenu(7,this._contextKeyService),i=n.getActions({arg:e.uri});n.dispose();for(var o=0,r=i;o<r.length;o++){var s=r[o][1];t.push.apply(t,s),t.push(new cn.d)}return t.pop(),t},e.prototype._doShowContextMenu=function(e,t){var n=this;if(void 0===t&&(t=null),this._editor.hasModel()){var i=this._editor.getConfiguration().contribInfo.hover;if(this._editor.updateOptions({hover:{enabled:!1}}),!t){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();var o=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),r=st.v(this._editor.getDomNode()),s=r.left+o.left,a=r.top+o.top+o.height;t={x:s,y:a}}this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({getAnchor:function(){return t},getActions:function(){return e},getActionItem:function(e){var t=n._keybindingFor(e);if(t)return new cn.b(e,e,{label:!0,keybinding:t.getLabel(),isMenu:!0});var i=e;return"function"===typeof i.getActionItem?i.getActionItem():new cn.b(e,e,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:function(e){return n._keybindingFor(e)},onHide:function(e){n._contextMenuIsBeingShownCount--,n._editor.focus(),n._editor.updateOptions({hover:i})}})}},e.prototype._keybindingFor=function(e){return this._keybindingService.lookupKeybinding(e.id)},e.prototype.getId=function(){return e.ID},e.prototype.dispose=function(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose=Object(z.d)(this._toDispose)},e.ID="editor.contrib.contextmenu",e=un([dn(1,Ve.a),dn(2,Ve.b),dn(3,Pe.e),dn(4,He.a),dn(5,Q.a)],e)}(),pn=function(e){function t(){return e.call(this,{id:"editor.action.showContextMenu",label:V.a("action.showContextMenu.label","Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:null,kbOpts:{kbExpr:G.a.textInputFocus,primary:1092,weight:100}})||this}return ln(t,e),t.prototype.run=function(e,t){hn.get(t).showContextMenu()},t}(U.b);Object(U.h)(hn),Object(U.f)(pn);var gn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),fn=function(){function e(e){this.selections=e}return e.prototype.equals=function(e){var t=this.selections.length;if(t!==e.selections.length)return!1;for(var n=0;n<t;n++)if(!this.selections[n].equalsSelection(e.selections[n]))return!1;return!0},e}(),mn=function(e){function t(t){var n=e.call(this)||this;return n._editor=t,n._isCursorUndo=!1,n._undoStack=[],n._prevState=n._readState(),n._register(t.onDidChangeModel(function(e){n._undoStack=[],n._prevState=null})),n._register(t.onDidChangeModelContent(function(e){n._undoStack=[],n._prevState=null})),n._register(t.onDidChangeCursorSelection(function(e){!n._isCursorUndo&&n._prevState&&(n._undoStack.push(n._prevState),n._undoStack.length>50&&n._undoStack.shift()),n._prevState=n._readState()})),n}return gn(t,e),t.get=function(e){return e.getContribution(t.ID)},t.prototype._readState=function(){return this._editor.hasModel()?new fn(this._editor.getSelections()):null},t.prototype.getId=function(){return t.ID},t.prototype.cursorUndo=function(){if(this._editor.hasModel())for(var e=new fn(this._editor.getSelections());this._undoStack.length>0;){var t=this._undoStack.pop();if(!t.equals(e))return this._isCursorUndo=!0,this._editor.setSelections(t.selections),this._editor.revealRangeInCenterIfOutsideViewport(t.selections[0],0),void(this._isCursorUndo=!1)}},t.ID="editor.contrib.cursorUndoController",t}(z.a),_n=function(e){function t(){return e.call(this,{id:"cursorUndo",label:V.a("cursor.undo","Soft Undo"),alias:"Soft Undo",precondition:null,kbOpts:{kbExpr:G.a.textInputFocus,primary:2099,weight:100}})||this}return gn(t,e),t.prototype.run=function(e,t,n){mn.get(t).cursorUndo()},t}(U.b);Object(U.h)(mn),Object(U.f)(_n);n(267);var vn=function(){function e(e,t,n){this.selection=e,this.targetPosition=t,this.copy=n}return e.prototype.getEditOperations=function(e,t){var n=e.getValueInRange(this.selection);this.copy||t.addEditOperation(this.selection,null),t.addEditOperation(new se.a(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),n),!this.selection.containsPosition(this.targetPosition)||this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition))?this.copy?this.targetSelection=new q.a(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.targetPosition.lineNumber>this.selection.endLineNumber?this.targetSelection=new q.a(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.targetPosition.lineNumber<this.selection.endLineNumber?this.targetSelection=new q.a(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new q.a(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,(this.selection.startLineNumber,this.selection.endLineNumber,this.targetPosition.column-this.selection.endColumn+this.selection.startColumn),this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new q.a(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn):this.targetSelection=this.selection},e.prototype.computeCursorState=function(e,t){return this.targetSelection},e}();function bn(e){return _e.d?e.altKey:e.ctrlKey}var yn=function(){function e(e){var t=this;this._editor=e,this._toUnhook=[],this._toUnhook.push(this._editor.onMouseDown(function(e){return t._onEditorMouseDown(e)})),this._toUnhook.push(this._editor.onMouseUp(function(e){return t._onEditorMouseUp(e)})),this._toUnhook.push(this._editor.onMouseDrag(function(e){return t._onEditorMouseDrag(e)})),this._toUnhook.push(this._editor.onMouseDrop(function(e){return t._onEditorMouseDrop(e)})),this._toUnhook.push(this._editor.onKeyDown(function(e){return t.onEditorKeyDown(e)})),this._toUnhook.push(this._editor.onKeyUp(function(e){return t.onEditorKeyUp(e)})),this._toUnhook.push(this._editor.onDidBlurEditorWidget(function(){return t.onEditorBlur()})),this._dndDecorationIds=[],this._mouseDown=!1,this._modifierPressed=!1,this._dragSelection=null}return e.prototype.onEditorBlur=function(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1},e.prototype.onEditorKeyDown=function(e){this._editor.getConfiguration().dragAndDrop&&(bn(e)&&(this._modifierPressed=!0),this._mouseDown&&bn(e)&&this._editor.updateOptions({mouseStyle:"copy"}))},e.prototype.onEditorKeyUp=function(t){this._editor.getConfiguration().dragAndDrop&&(bn(t)&&(this._modifierPressed=!1),this._mouseDown&&t.keyCode===e.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))},e.prototype._onEditorMouseDown=function(e){this._mouseDown=!0},e.prototype._onEditorMouseUp=function(e){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})},e.prototype._onEditorMouseDrag=function(e){var t=e.target;if(null===this._dragSelection){var n=(this._editor.getSelections()||[]).filter(function(e){return t.position&&e.containsPosition(t.position)});if(1!==n.length)return;this._dragSelection=n[0]}bn(e.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),t.position&&(this._dragSelection.containsPosition(t.position)?this._removeDecoration():this.showAt(t.position))},e.prototype._onEditorMouseDrop=function(t){if(t.target&&(this._hitContent(t.target)||this._hitMargin(t.target))&&t.target.position){var n=new K.a(t.target.position.lineNumber,t.target.position.column);if(null===this._dragSelection){var i=null;if(t.event.shiftKey){var o=this._editor.getSelection();if(o){var r=o.selectionStartLineNumber,s=o.selectionStartColumn;i=[new q.a(r,s,n.lineNumber,n.column)]}}else i=(this._editor.getSelections()||[]).map(function(e){return e.containsPosition(n)?new q.a(n.lineNumber,n.column,n.lineNumber,n.column):e});this._editor.setSelections(i||[],"mouse")}else(!this._dragSelection.containsPosition(n)||(bn(t.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(n)||this._dragSelection.getStartPosition().equals(n)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(e.ID,new vn(this._dragSelection,n,bn(t.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1},e.prototype.showAt=function(t){var n=[{range:new se.a(t.lineNumber,t.column,t.lineNumber,t.column),options:e._DECORATION_OPTIONS}];this._dndDecorationIds=this._editor.deltaDecorations(this._dndDecorationIds,n),this._editor.revealPosition(t,1)},e.prototype._removeDecoration=function(){this._dndDecorationIds=this._editor.deltaDecorations(this._dndDecorationIds,[])},e.prototype._hitContent=function(e){return 6===e.type||7===e.type},e.prototype._hitMargin=function(e){return 2===e.type||3===e.type||4===e.type},e.prototype.getId=function(){return e.ID},e.prototype.dispose=function(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,this._toUnhook=Object(z.d)(this._toUnhook)},e.ID="editor.contrib.dragAndDrop",e.TRIGGER_KEY_VALUE=_e.d?6:5,e._DECORATION_OPTIONS=$.a.register({className:"dnd-target"}),e}();Object(U.h)(yn);var wn=n(188),Cn=function(){function e(e){this._editor=e,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationId=null,this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}return e.prototype.dispose=function(){this._editor.deltaDecorations(this._allDecorations(),[]),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationId=null,this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null},e.prototype.reset=function(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationId=null,this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null},e.prototype.getCount=function(){return this._decorations.length},e.prototype.getFindScope=function(){return this._findScopeDecorationId?this._editor.getModel().getDecorationRange(this._findScopeDecorationId):null},e.prototype.getStartPosition=function(){return this._startPosition},e.prototype.setStartPosition=function(e){this._startPosition=e,this.setCurrentFindMatch(null)},e.prototype._getDecorationIndex=function(e){var t=this._decorations.indexOf(e);return t>=0?t+1:1},e.prototype.getCurrentMatchesPosition=function(t){for(var n=0,i=this._editor.getModel().getDecorationsInRange(t);n<i.length;n++){var o=i[n],r=o.options;if(r===e._FIND_MATCH_DECORATION||r===e._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(o.id)}return 1},e.prototype.setCurrentFindMatch=function(t){var n=this,i=null,o=0;if(t)for(var r=0,s=this._decorations.length;r<s;r++){var a=this._editor.getModel().getDecorationRange(this._decorations[r]);if(t.equalsRange(a)){i=this._decorations[r],o=r+1;break}}return null===this._highlightedDecorationId&&null===i||this._editor.changeDecorations(function(t){if(null!==n._highlightedDecorationId&&(t.changeDecorationOptions(n._highlightedDecorationId,e._FIND_MATCH_DECORATION),n._highlightedDecorationId=null),null!==i&&(n._highlightedDecorationId=i,t.changeDecorationOptions(n._highlightedDecorationId,e._CURRENT_FIND_MATCH_DECORATION)),null!==n._rangeHighlightDecorationId&&(t.removeDecoration(n._rangeHighlightDecorationId),n._rangeHighlightDecorationId=null),null!==i){var o=n._editor.getModel().getDecorationRange(i);if(o.startLineNumber!==o.endLineNumber&&1===o.endColumn){var r=o.endLineNumber-1,s=n._editor.getModel().getLineMaxColumn(r);o=new se.a(o.startLineNumber,o.startColumn,r,s)}n._rangeHighlightDecorationId=t.addDecoration(o,e._RANGE_HIGHLIGHT_DECORATION)}}),o},e.prototype.set=function(t,n){var i=this;this._editor.changeDecorations(function(o){var r=e._FIND_MATCH_DECORATION,s=[];if(t.length>1e3){r=e._FIND_MATCH_NO_OVERVIEW_DECORATION;for(var a=i._editor.getModel().getLineCount(),c=i._editor.getLayoutInfo().height/a,l=Math.max(2,Math.ceil(3/c)),u=t[0].range.startLineNumber,d=t[0].range.endLineNumber,h=1,p=t.length;h<p;h++){var g=t[h].range;d+l>=g.startLineNumber?g.endLineNumber>d&&(d=g.endLineNumber):(s.push({range:new se.a(u,1,d,1),options:e._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),u=g.startLineNumber,d=g.endLineNumber)}s.push({range:new se.a(u,1,d,1),options:e._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}var f=new Array(t.length);for(h=0,p=t.length;h<p;h++)f[h]={range:t[h].range,options:r};i._decorations=o.deltaDecorations(i._decorations,f),i._overviewRulerApproximateDecorations=o.deltaDecorations(i._overviewRulerApproximateDecorations,s),i._rangeHighlightDecorationId&&(o.removeDecoration(i._rangeHighlightDecorationId),i._rangeHighlightDecorationId=null),i._findScopeDecorationId&&(o.removeDecoration(i._findScopeDecorationId),i._findScopeDecorationId=null),n&&(i._findScopeDecorationId=o.addDecoration(n,e._FIND_SCOPE_DECORATION))})},e.prototype.matchBeforePosition=function(e){if(0===this._decorations.length)return null;for(var t=this._decorations.length-1;t>=0;t--){var n=this._decorations[t],i=this._editor.getModel().getDecorationRange(n);if(i&&!(i.endLineNumber>e.lineNumber)){if(i.endLineNumber<e.lineNumber)return i;if(!(i.endColumn>e.column))return i}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])},e.prototype.matchAfterPosition=function(e){if(0===this._decorations.length)return null;for(var t=0,n=this._decorations.length;t<n;t++){var i=this._decorations[t],o=this._editor.getModel().getDecorationRange(i);if(o&&!(o.startLineNumber<e.lineNumber)){if(o.startLineNumber>e.lineNumber)return o;if(!(o.startColumn<e.column))return o}}return this._editor.getModel().getDecorationRange(this._decorations[0])},e.prototype._allDecorations=function(){var e=[];return e=(e=e.concat(this._decorations)).concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationId&&e.push(this._findScopeDecorationId),this._rangeHighlightDecorationId&&e.push(this._rangeHighlightDecorationId),e},e._CURRENT_FIND_MATCH_DECORATION=$.a.register({stickiness:1,zIndex:13,className:"currentFindMatch",showIfCollapsed:!0,overviewRuler:{color:Object(X.f)(J.ub),position:Z.c.Center}}),e._FIND_MATCH_DECORATION=$.a.register({stickiness:1,className:"findMatch",showIfCollapsed:!0,overviewRuler:{color:Object(X.f)(J.ub),position:Z.c.Center}}),e._FIND_MATCH_NO_OVERVIEW_DECORATION=$.a.register({stickiness:1,className:"findMatch",showIfCollapsed:!0}),e._FIND_MATCH_ONLY_OVERVIEW_DECORATION=$.a.register({stickiness:1,overviewRuler:{color:Object(X.f)(J.ub),position:Z.c.Center}}),e._RANGE_HIGHLIGHT_DECORATION=$.a.register({stickiness:1,className:"rangeHighlight",isWholeLine:!0}),e._FIND_SCOPE_DECORATION=$.a.register({className:"findScope",isWholeLine:!0}),e}(),Sn=function(){function e(e,t,n){this._editorSelection=e,this._ranges=t,this._replaceStrings=n}return e.prototype.getEditOperations=function(e,t){if(this._ranges.length>0){for(var n=[],i=0;i<this._ranges.length;i++)n.push({range:this._ranges[i],text:this._replaceStrings[i]});n.sort(function(e,t){return se.a.compareRangesUsingStarts(e.range,t.range)});var o=[],r=n[0];for(i=1;i<n.length;i++)r.range.endLineNumber===n[i].range.startLineNumber&&r.range.endColumn===n[i].range.startColumn?(r.range=r.range.plusRange(n[i].range),r.text=r.text+n[i].text):(o.push(r),r=n[i]);o.push(r);for(var s=0,a=o;s<a.length;s++){var c=a[s];t.addEditOperation(c.range,c.text)}}this._trackedEditorSelectionId=t.trackSelection(this._editorSelection)},e.prototype.computeCursorState=function(e,t){return t.getTrackedSelection(this._trackedEditorSelectionId)},e}(),xn=function(){return function(e){this.staticValue=e,this.kind=0}}(),On=function(){return function(e){this.pieces=e,this.kind=1}}(),kn=function(){function e(e){e&&0!==e.length?1===e.length&&null!==e[0].staticValue?this._state=new xn(e[0].staticValue):this._state=new On(e):this._state=new xn("")}return e.fromStaticValue=function(t){return new e([Dn.staticValue(t)])},Object.defineProperty(e.prototype,"hasReplacementPatterns",{get:function(){return 1===this._state.kind},enumerable:!0,configurable:!0}),e.prototype.buildReplaceString=function(t){if(0===this._state.kind)return this._state.staticValue;for(var n="",i=0,o=this._state.pieces.length;i<o;i++){var r=this._state.pieces[i];null===r.staticValue?n+=e._substitute(r.matchIndex,t):n+=r.staticValue}return n},e._substitute=function(e,t){if(null===t)return"";if(0===e)return t[0];for(var n="";e>0;){if(e<t.length)return(t[e]||"")+n;n=String(e%10)+n,e=Math.floor(e/10)}return"$"+n},e}(),Dn=function(){function e(e,t){this.staticValue=e,this.matchIndex=t}return e.staticValue=function(t){return new e(t,-1)},e.matchIndex=function(t){return new e(null,t)},e}(),In=function(){function e(e){this._source=e,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}return e.prototype.emitUnchanged=function(e){this._emitStatic(this._source.substring(this._lastCharIndex,e)),this._lastCharIndex=e},e.prototype.emitStatic=function(e,t){this._emitStatic(e),this._lastCharIndex=t},e.prototype._emitStatic=function(e){0!==e.length&&(this._currentStaticPiece+=e)},e.prototype.emitMatchIndex=function(e,t){0!==this._currentStaticPiece.length&&(this._result[this._resultLen++]=Dn.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=Dn.matchIndex(e),this._lastCharIndex=t},e.prototype.finalize=function(){return this.emitUnchanged(this._source.length),0!==this._currentStaticPiece.length&&(this._result[this._resultLen++]=Dn.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new kn(this._result)},e}();var Nn=new Pe.f("findWidgetVisible",!1),Ln=new Pe.f("findInputFocussed",!1),Mn=new Pe.f("replaceInputFocussed",!1),En={primary:545,mac:{primary:2593}},Pn={primary:565,mac:{primary:2613}},Rn={primary:560,mac:{primary:2608}},Tn={primary:554,mac:{primary:2602}},An={StartFindAction:"actions.find",StartFindWithSelection:"actions.findWithSelection",NextMatchFindAction:"editor.action.nextMatchFindAction",PreviousMatchFindAction:"editor.action.previousMatchFindAction",NextSelectionMatchFindAction:"editor.action.nextSelectionMatchFindAction",PreviousSelectionMatchFindAction:"editor.action.previousSelectionMatchFindAction",StartFindReplaceAction:"editor.action.startFindReplaceAction",CloseFindWidgetCommand:"closeFindWidget",ToggleCaseSensitiveCommand:"toggleFindCaseSensitive",ToggleWholeWordCommand:"toggleFindWholeWord",ToggleRegexCommand:"toggleFindRegex",ToggleSearchScopeCommand:"toggleFindInSelection",ReplaceOneAction:"editor.action.replaceOne",ReplaceAllAction:"editor.action.replaceAll",SelectAllMatchesAction:"editor.action.selectAllMatches"},jn=function(){function e(e,t){var n=this;this._editor=e,this._state=t,this._toDispose=[],this._isDisposed=!1,this._startSearchingTimer=new H.e,this._decorations=new Cn(e),this._toDispose.push(this._decorations),this._updateDecorationsScheduler=new H.d(function(){return n.research(!1)},100),this._toDispose.push(this._updateDecorationsScheduler),this._toDispose.push(this._editor.onDidChangeCursorPosition(function(e){3!==e.reason&&5!==e.reason&&6!==e.reason||n._decorations.setStartPosition(n._editor.getPosition())})),this._ignoreModelContentChanged=!1,this._toDispose.push(this._editor.onDidChangeModelContent(function(e){n._ignoreModelContentChanged||(e.isFlush&&n._decorations.reset(),n._decorations.setStartPosition(n._editor.getPosition()),n._updateDecorationsScheduler.schedule())})),this._toDispose.push(this._state.onFindReplaceStateChange(function(e){return n._onStateChanged(e)})),this.research(!1,this._state.searchScope)}return e.prototype.dispose=function(){this._isDisposed=!0,Object(z.d)(this._startSearchingTimer),this._toDispose=Object(z.d)(this._toDispose)},e.prototype._onStateChanged=function(e){var t=this;this._isDisposed||this._editor.hasModel()&&(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)&&(this._editor.getModel().isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet(function(){e.searchScope?t.research(e.moveCursor,t._state.searchScope):t.research(e.moveCursor)},240)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor))},e._getSearchRange=function(e,t){return t||e.getFullModelRange()},e.prototype.research=function(e,t){var n=null;null!==(n="undefined"!==typeof t?t:this._decorations.getFindScope())&&n.startLineNumber!==n.endLineNumber&&(n=1===n.endColumn?new se.a(n.startLineNumber,1,n.endLineNumber-1,this._editor.getModel().getLineMaxColumn(n.endLineNumber-1)):new se.a(n.startLineNumber,1,n.endLineNumber,this._editor.getModel().getLineMaxColumn(n.endLineNumber)));var i=this._findMatches(n,!1,19999);this._decorations.set(i,n),this._state.changeMatchInfo(this._decorations.getCurrentMatchesPosition(this._editor.getSelection()),this._decorations.getCount(),void 0),e&&this._moveToNextMatch(this._decorations.getStartPosition())},e.prototype._hasMatches=function(){return this._state.matchesCount>0},e.prototype._cannotFind=function(){if(!this._hasMatches()){var e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e,0),!0}return!1},e.prototype._setCurrentFindMatch=function(e){var t=this._decorations.setCurrentFindMatch(e);this._state.changeMatchInfo(t,this._decorations.getCount(),e),this._editor.setSelection(e),this._editor.revealRangeInCenterIfOutsideViewport(e,0)},e.prototype._prevSearchPosition=function(e){var t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),n=e.lineNumber,i=e.column,o=this._editor.getModel();return t||1===i?(1===n?n=o.getLineCount():n--,i=o.getLineMaxColumn(n)):i--,new K.a(n,i)},e.prototype._moveToPrevMatch=function(t,n){if(void 0===n&&(n=!1),this._decorations.getCount()<19999){var i=this._decorations.matchBeforePosition(t);return i&&i.isEmpty()&&i.getStartPosition().equals(t)&&(t=this._prevSearchPosition(t),i=this._decorations.matchBeforePosition(t)),void(i&&this._setCurrentFindMatch(i))}if(!this._cannotFind()){var o=this._decorations.getFindScope(),r=e._getSearchRange(this._editor.getModel(),o);r.getEndPosition().isBefore(t)&&(t=r.getEndPosition()),t.isBefore(r.getStartPosition())&&(t=r.getEndPosition());var s=t.lineNumber,a=t.column,c=this._editor.getModel(),l=new K.a(s,a),u=c.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getConfiguration().wordSeparators:null,!1);if(u&&u.range.isEmpty()&&u.range.getStartPosition().equals(l)&&(l=this._prevSearchPosition(l),u=c.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getConfiguration().wordSeparators:null,!1)),u)return n||r.containsRange(u.range)?void this._setCurrentFindMatch(u.range):this._moveToPrevMatch(u.range.getStartPosition(),!0)}},e.prototype.moveToPrevMatch=function(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())},e.prototype._nextSearchPosition=function(e){var t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),n=e.lineNumber,i=e.column,o=this._editor.getModel();return t||i===o.getLineMaxColumn(n)?(n===o.getLineCount()?n=1:n++,i=1):i++,new K.a(n,i)},e.prototype._moveToNextMatch=function(e){if(this._decorations.getCount()<19999){var t=this._decorations.matchAfterPosition(e);return t&&t.isEmpty()&&t.getStartPosition().equals(e)&&(e=this._nextSearchPosition(e),t=this._decorations.matchAfterPosition(e)),void(t&&this._setCurrentFindMatch(t))}var n=this._getNextMatch(e,!1,!0);n&&this._setCurrentFindMatch(n.range)},e.prototype._getNextMatch=function(t,n,i,o){if(void 0===o&&(o=!1),this._cannotFind())return null;var r=this._decorations.getFindScope(),s=e._getSearchRange(this._editor.getModel(),r);s.getEndPosition().isBefore(t)&&(t=s.getStartPosition()),t.isBefore(s.getStartPosition())&&(t=s.getStartPosition());var a=t.lineNumber,c=t.column,l=this._editor.getModel(),u=new K.a(a,c),d=l.findNextMatch(this._state.searchString,u,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getConfiguration().wordSeparators:null,n);return i&&d&&d.range.isEmpty()&&d.range.getStartPosition().equals(u)&&(u=this._nextSearchPosition(u),d=l.findNextMatch(this._state.searchString,u,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getConfiguration().wordSeparators:null,n)),d?o||s.containsRange(d.range)?d:this._getNextMatch(d.range.getEndPosition(),n,i,!0):null},e.prototype.moveToNextMatch=function(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())},e.prototype._getReplacePattern=function(){return this._state.isRegex?function(e){if(!e||0===e.length)return new kn(null);for(var t=new In(e),n=0,i=e.length;n<i;n++){var o=e.charCodeAt(n);if(92!==o){if(36===o){if(++n>=i)break;if(36===(a=e.charCodeAt(n))){t.emitUnchanged(n-1),t.emitStatic("$",n+1);continue}if(48===a||38===a){t.emitUnchanged(n-1),t.emitMatchIndex(0,n+1);continue}if(49<=a&&a<=57){var r=a-48;if(n+1<i){var s=e.charCodeAt(n+1);if(48<=s&&s<=57){n++,r=10*r+(s-48),t.emitUnchanged(n-2),t.emitMatchIndex(r,n+1);continue}}t.emitUnchanged(n-1),t.emitMatchIndex(r,n+1);continue}}}else{if(++n>=i)break;var a;switch(a=e.charCodeAt(n)){case 92:t.emitUnchanged(n-1),t.emitStatic("\\",n+1);break;case 110:t.emitUnchanged(n-1),t.emitStatic("\n",n+1);break;case 116:t.emitUnchanged(n-1),t.emitStatic("\t",n+1)}}}return t.finalize()}(this._state.replaceString):kn.fromStaticValue(this._state.replaceString)},e.prototype.replace=function(){if(this._hasMatches()){var e=this._getReplacePattern(),t=this._editor.getSelection(),n=this._getNextMatch(t.getStartPosition(),e.hasReplacementPatterns,!1);if(n)if(t.equalsRange(n.range)){var i=e.buildReplaceString(n.matches),o=new pe.a(t,i);this._executeEditorCommand("replace",o),this._decorations.setStartPosition(new K.a(t.startLineNumber,t.startColumn+i.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(n.range)}},e.prototype._findMatches=function(t,n,i){var o=e._getSearchRange(this._editor.getModel(),t);return this._editor.getModel().findMatches(this._state.searchString,o,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getConfiguration().wordSeparators:null,n,i)},e.prototype.replaceAll=function(){if(this._hasMatches()){var e=this._decorations.getFindScope();null===e&&this._state.matchesCount>=19999?this._largeReplaceAll():this._regularReplaceAll(e),this.research(!1)}},e.prototype._largeReplaceAll=function(){var e=new wn.a(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getConfiguration().wordSeparators:null).parseSearchRequest();if(e){var t=e.regex;if(!t.multiline){var n="m";t.ignoreCase&&(n+="i"),t.global&&(n+="g"),t=new RegExp(t.source,n)}var i,o=this._editor.getModel(),r=o.getValue(1),s=o.getFullModelRange(),a=this._getReplacePattern();i=a.hasReplacementPatterns?r.replace(t,function(){return a.buildReplaceString(arguments)}):r.replace(t,a.buildReplaceString(null));var c=new pe.b(s,i,this._editor.getSelection());this._executeEditorCommand("replaceAll",c)}},e.prototype._regularReplaceAll=function(e){for(var t=this._getReplacePattern(),n=this._findMatches(e,t.hasReplacementPatterns,1073741824),i=[],o=0,r=n.length;o<r;o++)i[o]=t.buildReplaceString(n[o].matches);var s=new Sn(this._editor.getSelection(),n.map(function(e){return e.range}),i);this._executeEditorCommand("replaceAll",s)},e.prototype.selectAllMatches=function(){if(this._hasMatches()){for(var e=this._decorations.getFindScope(),t=this._findMatches(e,!1,1073741824).map(function(e){return new q.a(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn)}),n=this._editor.getSelection(),i=0,o=t.length;i<o;i++){if(t[i].equalsRange(n)){t=[n].concat(t.slice(0,i)).concat(t.slice(i+1));break}}this._editor.setSelections(t)}},e.prototype._executeEditorCommand=function(e,t){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(e,t),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}},e}(),Fn=(n(268),n(119)),Bn=n(102),Wn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Vn={inputActiveOptionBorder:Vt.a.fromHex("#007ACC")},Hn=function(e){function t(t){var n=e.call(this)||this;return n._onChange=n._register(new Ke.a),n._onKeyDown=n._register(new Ke.a),n._opts=Bn.c(t),Bn.g(n._opts,Vn,!1),n._checked=n._opts.isChecked,n.domNode=document.createElement("div"),n.domNode.title=n._opts.title,n.domNode.className="monaco-custom-checkbox "+(n._opts.actionClassName||"")+" "+(n._checked?"checked":"unchecked"),n.domNode.tabIndex=0,n.domNode.setAttribute("role","checkbox"),n.domNode.setAttribute("aria-checked",String(n._checked)),n.domNode.setAttribute("aria-label",n._opts.title),n.applyStyles(),n.onclick(n.domNode,function(e){n.checked=!n._checked,n._onChange.fire(!1),e.preventDefault()}),n.onkeydown(n.domNode,function(e){if(10===e.keyCode||3===e.keyCode)return n.checked=!n._checked,n._onChange.fire(!0),void e.preventDefault();n._onKeyDown.fire(e)}),n}return Wn(t,e),Object.defineProperty(t.prototype,"onChange",{get:function(){return this._onChange.event},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onKeyDown",{get:function(){return this._onKeyDown.event},enumerable:!0,configurable:!0}),t.prototype.focus=function(){this.domNode.focus()},Object.defineProperty(t.prototype,"checked",{get:function(){return this._checked},set:function(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this._checked?this.domNode.classList.add("checked"):this.domNode.classList.remove("checked"),this.applyStyles()},enumerable:!0,configurable:!0}),t.prototype.width=function(){return 22},t.prototype.style=function(e){e.inputActiveOptionBorder&&(this._opts.inputActiveOptionBorder=e.inputActiveOptionBorder),this.applyStyles()},t.prototype.applyStyles=function(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder?this._opts.inputActiveOptionBorder.toString():"transparent")},t.prototype.enable=function(){this.domNode.tabIndex=0,this.domNode.setAttribute("aria-disabled",String(!1))},t.prototype.disable=function(){st.J(this.domNode),this.domNode.setAttribute("aria-disabled",String(!0))},t}(Fn.a),zn=(n(269),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}()),Un=V.a("caseDescription","Match Case"),Kn=V.a("wordsDescription","Match Whole Word"),qn=V.a("regexDescription","Use Regular Expression"),Gn=function(e){function t(t){return e.call(this,{actionClassName:"monaco-case-sensitive",title:Un+t.appendTitle,isChecked:t.isChecked,inputActiveOptionBorder:t.inputActiveOptionBorder})||this}return zn(t,e),t}(Hn),Zn=function(e){function t(t){return e.call(this,{actionClassName:"monaco-whole-word",title:Kn+t.appendTitle,isChecked:t.isChecked,inputActiveOptionBorder:t.inputActiveOptionBorder})||this}return zn(t,e),t}(Hn),$n=function(e){function t(t){return e.call(this,{actionClassName:"monaco-regex",title:qn+t.appendTitle,isChecked:t.isChecked,inputActiveOptionBorder:t.inputActiveOptionBorder})||this}return zn(t,e),t}(Hn),Yn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Jn=function(e){function t(t,n,i,o){var r=e.call(this)||this;r._hideSoon=r._register(new H.d(function(){return r._hide()},2e3)),r._isVisible=!1,r._editor=t,r._state=n,r._keybindingService=i,r._domNode=document.createElement("div"),r._domNode.className="findOptionsWidget",r._domNode.style.display="none",r._domNode.style.top="10px",r._domNode.setAttribute("role","presentation"),r._domNode.setAttribute("aria-hidden","true");var s=o.getTheme().getColor(J.L);return r.caseSensitive=r._register(new Gn({appendTitle:r._keybindingLabelFor(An.ToggleCaseSensitiveCommand),isChecked:r._state.matchCase,inputActiveOptionBorder:s})),r._domNode.appendChild(r.caseSensitive.domNode),r._register(r.caseSensitive.onChange(function(){r._state.change({matchCase:r.caseSensitive.checked},!1)})),r.wholeWords=r._register(new Zn({appendTitle:r._keybindingLabelFor(An.ToggleWholeWordCommand),isChecked:r._state.wholeWord,inputActiveOptionBorder:s})),r._domNode.appendChild(r.wholeWords.domNode),r._register(r.wholeWords.onChange(function(){r._state.change({wholeWord:r.wholeWords.checked},!1)})),r.regex=r._register(new $n({appendTitle:r._keybindingLabelFor(An.ToggleRegexCommand),isChecked:r._state.isRegex,inputActiveOptionBorder:s})),r._domNode.appendChild(r.regex.domNode),r._register(r.regex.onChange(function(){r._state.change({isRegex:r.regex.checked},!1)})),r._editor.addOverlayWidget(r),r._register(r._state.onFindReplaceStateChange(function(e){var t=!1;e.isRegex&&(r.regex.checked=r._state.isRegex,t=!0),e.wholeWord&&(r.wholeWords.checked=r._state.wholeWord,t=!0),e.matchCase&&(r.caseSensitive.checked=r._state.matchCase,t=!0),!r._state.isRevealed&&t&&r._revealTemporarily()})),r._register(st.i(r._domNode,function(e){return r._onMouseOut()})),r._register(st.h(r._domNode,"mouseover",function(e){return r._onMouseOver()})),r._applyTheme(o.getTheme()),r._register(o.onThemeChange(r._applyTheme.bind(r))),r}return Yn(t,e),t.prototype._keybindingLabelFor=function(e){var t=this._keybindingService.lookupKeybinding(e);return t?" ("+t.getLabel()+")":""},t.prototype.dispose=function(){this._editor.removeOverlayWidget(this),e.prototype.dispose.call(this)},t.prototype.getId=function(){return t.ID},t.prototype.getDomNode=function(){return this._domNode},t.prototype.getPosition=function(){return{preference:0}},t.prototype.highlightFindOptions=function(){this._revealTemporarily()},t.prototype._revealTemporarily=function(){this._show(),this._hideSoon.schedule()},t.prototype._onMouseOut=function(){this._hideSoon.schedule()},t.prototype._onMouseOver=function(){this._hideSoon.cancel()},t.prototype._show=function(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")},t.prototype._hide=function(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")},t.prototype._applyTheme=function(e){var t={inputActiveOptionBorder:e.getColor(J.L)};this.caseSensitive.style(t),this.wholeWords.style(t),this.regex.style(t)},t.ID="editor.contrib.findOptionsWidget",t}(Fn.a);function Xn(e,t){return 1===e||2!==e&&t}Object(X.e)(function(e,t){var n=e.getColor(J.F);n&&t.addRule(".monaco-editor .findOptionsWidget { background-color: "+n+"; }");var i=e.getColor(J.Kb);i&&t.addRule(".monaco-editor .findOptionsWidget { box-shadow: 0 2px 8px "+i+"; }");var o=e.getColor(J.e);o&&t.addRule(".monaco-editor .findOptionsWidget { border: 2px solid "+o+"; }")});var Qn,ei=function(){function e(){this._searchString="",this._replaceString="",this._isRevealed=!1,this._isReplaceRevealed=!1,this._isRegex=!1,this._isRegexOverride=0,this._wholeWord=!1,this._wholeWordOverride=0,this._matchCase=!1,this._matchCaseOverride=0,this._searchScope=null,this._matchesPosition=0,this._matchesCount=0,this._currentMatch=null,this._onFindReplaceStateChange=new Ke.a}return Object.defineProperty(e.prototype,"searchString",{get:function(){return this._searchString},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"replaceString",{get:function(){return this._replaceString},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRevealed",{get:function(){return this._isRevealed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isReplaceRevealed",{get:function(){return this._isReplaceRevealed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRegex",{get:function(){return Xn(this._isRegexOverride,this._isRegex)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wholeWord",{get:function(){return Xn(this._wholeWordOverride,this._wholeWord)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"matchCase",{get:function(){return Xn(this._matchCaseOverride,this._matchCase)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actualIsRegex",{get:function(){return this._isRegex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actualWholeWord",{get:function(){return this._wholeWord},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actualMatchCase",{get:function(){return this._matchCase},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchScope",{get:function(){return this._searchScope},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"matchesPosition",{get:function(){return this._matchesPosition},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"matchesCount",{get:function(){return this._matchesCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentMatch",{get:function(){return this._currentMatch},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onFindReplaceStateChange",{get:function(){return this._onFindReplaceStateChange.event},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){},e.prototype.changeMatchInfo=function(e,t,n){var i={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1},o=!1;0===t&&(e=0),e>t&&(e=t),this._matchesPosition!==e&&(this._matchesPosition=e,i.matchesPosition=!0,o=!0),this._matchesCount!==t&&(this._matchesCount=t,i.matchesCount=!0,o=!0),"undefined"!==typeof n&&(se.a.equalsRange(this._currentMatch,n)||(this._currentMatch=n,i.currentMatch=!0,o=!0)),o&&this._onFindReplaceStateChange.fire(i)},e.prototype.change=function(e,t,n){void 0===n&&(n=!0);var i={moveCursor:t,updateHistory:n,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1},o=!1,r=this.isRegex,s=this.wholeWord,a=this.matchCase;"undefined"!==typeof e.searchString&&this._searchString!==e.searchString&&(this._searchString=e.searchString,i.searchString=!0,o=!0),"undefined"!==typeof e.replaceString&&this._replaceString!==e.replaceString&&(this._replaceString=e.replaceString,i.replaceString=!0,o=!0),"undefined"!==typeof e.isRevealed&&this._isRevealed!==e.isRevealed&&(this._isRevealed=e.isRevealed,i.isRevealed=!0,o=!0),"undefined"!==typeof e.isReplaceRevealed&&this._isReplaceRevealed!==e.isReplaceRevealed&&(this._isReplaceRevealed=e.isReplaceRevealed,i.isReplaceRevealed=!0,o=!0),"undefined"!==typeof e.isRegex&&(this._isRegex=e.isRegex),"undefined"!==typeof e.wholeWord&&(this._wholeWord=e.wholeWord),"undefined"!==typeof e.matchCase&&(this._matchCase=e.matchCase),"undefined"!==typeof e.searchScope&&(se.a.equalsRange(this._searchScope,e.searchScope)||(this._searchScope=e.searchScope,i.searchScope=!0,o=!0)),this._isRegexOverride="undefined"!==typeof e.isRegexOverride?e.isRegexOverride:0,this._wholeWordOverride="undefined"!==typeof e.wholeWordOverride?e.wholeWordOverride:0,this._matchCaseOverride="undefined"!==typeof e.matchCaseOverride?e.matchCaseOverride:0,r!==this.isRegex&&(o=!0,i.isRegex=!0),s!==this.wholeWord&&(o=!0,i.wholeWord=!0),a!==this.matchCase&&(o=!0,i.matchCase=!0),o&&this._onFindReplaceStateChange.fire(i)},e}(),ti=(n(270),n(169)),ni=(n(271),function(){function e(e){this._prefix=e,this._lastId=0}return e.prototype.nextId=function(){return this._prefix+ ++this._lastId},e}()),ii=new ni("id#"),oi=function(){function e(e){void 0===e&&(e=""),this.value=e}return e.prototype.appendText=function(e){return this.value+=e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&"),this},e.prototype.appendCodeblock=function(e,t){return this.value+="\n```",this.value+=e,this.value+="\n",this.value+=t,this.value+="\n```\n",this},e}();function ri(e){return si(e)?!e.value:!Array.isArray(e)||e.every(ri)}function si(e){return e instanceof oi||!(!e||"object"!==typeof e)&&("string"===typeof e.value&&("boolean"===typeof e.isTrusted||void 0===e.isTrusted))}function ai(e,t){return e===t||!(!e||!t)&&(e.value===t.value&&e.isTrusted===t.isTrusted)}function ci(e){return e?e.replace(/\\([\\`*_{}[\]()#+\-.!])/g,"$1"):e}(function(e){var t={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:f,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,nptable:f,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:f,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading| {0,3}>|<\/?(?:tag)(?: +|\n|\/?>)|<(?:script|pre|style|!--))[^\n]+)*)/,text:/^[^\n]+/};function n(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||y.defaults,this.rules=t.normal,this.options.pedantic?this.rules=t.pedantic:this.options.gfm&&(this.options.tables?this.rules=t.tables:this.rules=t.gfm)}t._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,t._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,t.def=d(t.def).replace("label",t._label).replace("title",t._title).getRegex(),t.bullet=/(?:[*+-]|\d{1,9}\.)/,t.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,t.item=d(t.item,"gm").replace(/bull/g,t.bullet).getRegex(),t.list=d(t.list).replace(/bull/g,t.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+t.def.source+")").getRegex(),t._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",t._comment=/<!--(?!-?>)[\s\S]*?-->/,t.html=d(t.html,"i").replace("comment",t._comment).replace("tag",t._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),t.paragraph=d(t.paragraph).replace("hr",t.hr).replace("heading",t.heading).replace("lheading",t.lheading).replace("tag",t._tag).getRegex(),t.blockquote=d(t.blockquote).replace("paragraph",t.paragraph).getRegex(),t.normal=m({},t),t.gfm=m({},t.normal,{fences:/^ {0,3}(`{3,}|~{3,})([^`\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),t.gfm.paragraph=d(t.paragraph).replace("(?!","(?!"+t.gfm.fences.source.replace("\\1","\\2")+"|"+t.list.source.replace("\\1","\\3")+"|").getRegex(),t.tables=m({},t.gfm,{nptable:/^ *([^|\n ].*\|.*)\n *([-:]+ *\|[-| :]*)(?:\n((?:.*[^>\n ].*(?:\n|$))*)\n*|$)/,table:/^ *\|(.+)\n *\|?( *[-:]+[-| :]*)(?:\n((?: *[^>\n ].*(?:\n|$))*)\n*|$)/}),t.pedantic=m({},t.normal,{html:d("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",t._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/}),n.rules=t,n.lex=function(e,t){return new n(t).lex(e)},n.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},n.prototype.token=function(e,n){var i,o,r,s,a,c,l,u,d,h,p,g,f,m,b,y;for(e=e.replace(/^ +$/gm,"");e;)if((r=this.rules.newline.exec(e))&&(e=e.substring(r[0].length),r[0].length>1&&this.tokens.push({type:"space"})),r=this.rules.code.exec(e))e=e.substring(r[0].length),r=r[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?r:v(r,"\n")});else if(r=this.rules.fences.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"code",lang:r[2]?r[2].trim():r[2],text:r[3]||""});else if(r=this.rules.heading.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"heading",depth:r[1].length,text:r[2]});else if((r=this.rules.nptable.exec(e))&&(c={type:"table",header:_(r[1].replace(/^ *| *\| *$/g,"")),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3]?r[3].replace(/\n$/,"").split("\n"):[]}).header.length===c.align.length){for(e=e.substring(r[0].length),p=0;p<c.align.length;p++)/^ *-+: *$/.test(c.align[p])?c.align[p]="right":/^ *:-+: *$/.test(c.align[p])?c.align[p]="center":/^ *:-+ *$/.test(c.align[p])?c.align[p]="left":c.align[p]=null;for(p=0;p<c.cells.length;p++)c.cells[p]=_(c.cells[p],c.header.length);this.tokens.push(c)}else if(r=this.rules.hr.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"hr"});else if(r=this.rules.blockquote.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"blockquote_start"}),r=r[0].replace(/^ *> ?/gm,""),this.token(r,n),this.tokens.push({type:"blockquote_end"});else if(r=this.rules.list.exec(e)){for(e=e.substring(r[0].length),l={type:"list_start",ordered:m=(s=r[2]).length>1,start:m?+s:"",loose:!1},this.tokens.push(l),u=[],i=!1,f=(r=r[0].match(this.rules.item)).length,p=0;p<f;p++)h=(c=r[p]).length,~(c=c.replace(/^ *([*+-]|\d+\.) */,"")).indexOf("\n ")&&(h-=c.length,c=this.options.pedantic?c.replace(/^ {1,4}/gm,""):c.replace(new RegExp("^ {1,"+h+"}","gm"),"")),p!==f-1&&(a=t.bullet.exec(r[p+1])[0],(s.length>1?1===a.length:a.length>1||this.options.smartLists&&a!==s)&&(e=r.slice(p+1).join("\n")+e,p=f-1)),o=i||/\n\n(?!\s*$)/.test(c),p!==f-1&&(i="\n"===c.charAt(c.length-1),o||(o=i)),o&&(l.loose=!0),y=void 0,(b=/^\[[ xX]\] /.test(c))&&(y=" "!==c[1],c=c.replace(/^\[[ xX]\] +/,"")),d={type:"list_item_start",task:b,checked:y,loose:o},u.push(d),this.tokens.push(d),this.token(c,!1),this.tokens.push({type:"list_item_end"});if(l.loose)for(f=u.length,p=0;p<f;p++)u[p].loose=!0;this.tokens.push({type:"list_end"})}else if(r=this.rules.html.exec(e))e=e.substring(r[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===r[1]||"script"===r[1]||"style"===r[1]),text:r[0]});else if(n&&(r=this.rules.def.exec(e)))e=e.substring(r[0].length),r[3]&&(r[3]=r[3].substring(1,r[3].length-1)),g=r[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[g]||(this.tokens.links[g]={href:r[2],title:r[3]});else if((r=this.rules.table.exec(e))&&(c={type:"table",header:_(r[1].replace(/^ *| *\| *$/g,"")),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3]?r[3].replace(/\n$/,"").split("\n"):[]}).header.length===c.align.length){for(e=e.substring(r[0].length),p=0;p<c.align.length;p++)/^ *-+: *$/.test(c.align[p])?c.align[p]="right":/^ *:-+: *$/.test(c.align[p])?c.align[p]="center":/^ *:-+ *$/.test(c.align[p])?c.align[p]="left":c.align[p]=null;for(p=0;p<c.cells.length;p++)c.cells[p]=_(c.cells[p].replace(/^ *\| *| *\| *$/g,""),c.header.length);this.tokens.push(c)}else if(r=this.rules.lheading.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"heading",depth:"="===r[2]?1:2,text:r[1]});else if(n&&(r=this.rules.paragraph.exec(e)))e=e.substring(r[0].length),this.tokens.push({type:"paragraph",text:"\n"===r[1].charAt(r[1].length-1)?r[1].slice(0,-1):r[1]});else if(r=this.rules.text.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"text",text:r[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var i={escape:/^\\([!"#$%&'()*+,\-.\/:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:f,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(href(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*"<\[])\*(?!\*)|^_([^\s][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s"<\[][\s\S]*?[^\s*])\*(?!\*)|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:f,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/};function o(e,t){if(this.options=t||y.defaults,this.links=e,this.rules=i.normal,this.renderer=this.options.renderer||new r,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=i.pedantic:this.options.gfm&&(this.options.breaks?this.rules=i.breaks:this.rules=i.gfm)}function r(e){this.options=e||y.defaults}function s(){}function a(e){this.tokens=[],this.token=null,this.options=e||y.defaults,this.options.renderer=this.options.renderer||new r,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new c}function c(){this.seen={}}function l(e,t){if(t){if(l.escapeTest.test(e))return e.replace(l.escapeReplace,function(e){return l.replacements[e]})}else if(l.escapeTestNoEncode.test(e))return e.replace(l.escapeReplaceNoEncode,function(e){return l.replacements[e]});return e}function u(e){return e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}function d(e,t){return e=e.source||e,t=t||"",{replace:function(t,n){return n=(n=n.source||n).replace(/(^|[^\[])\^/g,"$1"),e=e.replace(t,n),this},getRegex:function(){return new RegExp(e,t)}}}function h(e,t,n){if(e){try{var i=decodeURIComponent(u(n)).replace(/[^\w:]/g,"").toLowerCase()}catch(o){return null}if(0===i.indexOf("javascript:")||0===i.indexOf("vbscript:")||0===i.indexOf("data:"))return null}t&&!g.test(n)&&(n=function(e,t){p[" "+e]||(/^[^:]+:\/*[^\/]*$/.test(e)?p[" "+e]=e+"/":p[" "+e]=v(e,"/",!0));return e=p[" "+e],"//"===t.slice(0,2)?e.replace(/:[\s\S]*/,":")+t:"/"===t.charAt(0)?e.replace(/(:\/*[^\/]*)[\s\S]*/,"$1")+t:e+t}(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(o){return null}return n}i._punctuation="!\"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~",i.em=d(i.em).replace(/punctuation/g,i._punctuation).getRegex(),i._escapes=/\\([!"#$%&'()*+,\-.\/:;<=>?@\[\]\\^_`{|}~])/g,i._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,i._email=/[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,i.autolink=d(i.autolink).replace("scheme",i._scheme).replace("email",i._email).getRegex(),i._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,i.tag=d(i.tag).replace("comment",t._comment).replace("attribute",i._attribute).getRegex(),i._label=/(?:\[[^\[\]]*\]|\\[\[\]]?|`[^`]*`|`(?!`)|[^\[\]\\`])*?/,i._href=/\s*(<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*)/,i._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,i.link=d(i.link).replace("label",i._label).replace("href",i._href).replace("title",i._title).getRegex(),i.reflink=d(i.reflink).replace("label",i._label).getRegex(),i.normal=m({},i),i.pedantic=m({},i.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:d(/^!?\[(label)\]\((.*?)\)/).replace("label",i._label).getRegex(),reflink:d(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",i._label).getRegex()}),i.gfm=m({},i.normal,{escape:d(i.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),i.gfm.url=d(i.gfm.url,"i").replace("email",i.gfm._extended_email).getRegex(),i.breaks=m({},i.gfm,{br:d(i.br).replace("{2,}","*").getRegex(),text:d(i.gfm.text).replace(/\{2,\}/g,"*").getRegex()}),o.rules=i,o.output=function(e,t,n){return new o(t,n).output(e)},o.prototype.output=function(e){for(var t,n,i,r,s,a,c="";e;)if(s=this.rules.escape.exec(e))e=e.substring(s[0].length),c+=l(s[1]);else if(s=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(s[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(s[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(s[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(s[0])&&(this.inRawBlock=!1),e=e.substring(s[0].length),c+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):l(s[0]):s[0];else if(s=this.rules.link.exec(e)){var u=b(s[2],"()");if(u>-1){var d=s[0].length-(s[2].length-u)-(s[3]||"").length;s[2]=s[2].substring(0,u),s[0]=s[0].substring(0,d).trim(),s[3]=""}e=e.substring(s[0].length),this.inLink=!0,i=s[2],this.options.pedantic?(t=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i))?(i=t[1],r=t[3]):r="":r=s[3]?s[3].slice(1,-1):"",i=i.trim().replace(/^<([\s\S]*)>$/,"$1"),c+=this.outputLink(s,{href:o.escapes(i),title:o.escapes(r)}),this.inLink=!1}else if((s=this.rules.reflink.exec(e))||(s=this.rules.nolink.exec(e))){if(e=e.substring(s[0].length),t=(s[2]||s[1]).replace(/\s+/g," "),!(t=this.links[t.toLowerCase()])||!t.href){c+=s[0].charAt(0),e=s[0].substring(1)+e;continue}this.inLink=!0,c+=this.outputLink(s,t),this.inLink=!1}else if(s=this.rules.strong.exec(e))e=e.substring(s[0].length),c+=this.renderer.strong(this.output(s[4]||s[3]||s[2]||s[1]));else if(s=this.rules.em.exec(e))e=e.substring(s[0].length),c+=this.renderer.em(this.output(s[6]||s[5]||s[4]||s[3]||s[2]||s[1]));else if(s=this.rules.code.exec(e))e=e.substring(s[0].length),c+=this.renderer.codespan(l(s[2].trim(),!0));else if(s=this.rules.br.exec(e))e=e.substring(s[0].length),c+=this.renderer.br();else if(s=this.rules.del.exec(e))e=e.substring(s[0].length),c+=this.renderer.del(this.output(s[1]));else if(s=this.rules.autolink.exec(e))e=e.substring(s[0].length),i="@"===s[2]?"mailto:"+(n=l(this.mangle(s[1]))):n=l(s[1]),c+=this.renderer.link(i,null,n);else if(this.inLink||!(s=this.rules.url.exec(e))){if(s=this.rules.text.exec(e))e=e.substring(s[0].length),this.inRawBlock?c+=this.renderer.text(s[0]):c+=this.renderer.text(l(this.smartypants(s[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else{if("@"===s[2])i="mailto:"+(n=l(s[0]));else{do{a=s[0],s[0]=this.rules._backpedal.exec(s[0])[0]}while(a!==s[0]);n=l(s[0]),i="www."===s[1]?"http://"+n:n}e=e.substring(s[0].length),c+=this.renderer.link(i,null,n)}return c},o.escapes=function(e){return e?e.replace(o.rules._escapes,"$1"):e},o.prototype.outputLink=function(e,t){var n=t.href,i=t.title?l(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(n,i,this.output(e[1])):this.renderer.image(n,i,l(e[1]))},o.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026"):e},o.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var t,n="",i=e.length,o=0;o<i;o++)t=e.charCodeAt(o),Math.random()>.5&&(t="x"+t.toString(16)),n+="&#"+t+";";return n},r.prototype.code=function(e,t,n){var i=(t||"").match(/\S*/)[0];if(this.options.highlight){var o=this.options.highlight(e,i);null!=o&&o!==e&&(n=!0,e=o)}return i?'<pre><code class="'+this.options.langPrefix+l(i,!0)+'">'+(n?e:l(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:l(e,!0))+"</code></pre>"},r.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},r.prototype.html=function(e){return e},r.prototype.heading=function(e,t,n,i){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+i.slug(n)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},r.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},r.prototype.list=function(e,t,n){var i=t?"ol":"ul";return"<"+i+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+i+">\n"},r.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},r.prototype.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},r.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},r.prototype.table=function(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"},r.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},r.prototype.tablecell=function(e,t){var n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"},r.prototype.strong=function(e){return"<strong>"+e+"</strong>"},r.prototype.em=function(e){return"<em>"+e+"</em>"},r.prototype.codespan=function(e){return"<code>"+e+"</code>"},r.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},r.prototype.del=function(e){return"<del>"+e+"</del>"},r.prototype.link=function(e,t,n){if(null===(e=h(this.options.sanitize,this.options.baseUrl,e)))return n;var i='<a href="'+l(e)+'"';return t&&(i+=' title="'+t+'"'),i+=">"+n+"</a>"},r.prototype.image=function(e,t,n){if(null===(e=h(this.options.sanitize,this.options.baseUrl,e)))return n;var i='<img src="'+e+'" alt="'+n+'"';return t&&(i+=' title="'+t+'"'),i+=this.options.xhtml?"/>":">"},r.prototype.text=function(e){return e},s.prototype.strong=s.prototype.em=s.prototype.codespan=s.prototype.del=s.prototype.text=function(e){return e},s.prototype.link=s.prototype.image=function(e,t,n){return""+n},s.prototype.br=function(){return""},a.parse=function(e,t){return new a(t).parse(e)},a.prototype.parse=function(e){this.inline=new o(e.links,this.options),this.inlineText=new o(e.links,m({},this.options,{renderer:new s})),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},a.prototype.next=function(){return this.token=this.tokens.pop()},a.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},a.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},a.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,u(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,n,i,o="",r="";for(n="",e=0;e<this.token.header.length;e++)n+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(o+=this.renderer.tablerow(n),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],n="",i=0;i<t.length;i++)n+=this.renderer.tablecell(this.inline.output(t[i]),{header:!1,align:this.token.align[i]});r+=this.renderer.tablerow(n)}return this.renderer.table(o,r);case"blockquote_start":for(r="";"blockquote_end"!==this.next().type;)r+=this.tok();return this.renderer.blockquote(r);case"list_start":r="";for(var s=this.token.ordered,a=this.token.start;"list_end"!==this.next().type;)r+=this.tok();return this.renderer.list(r,s,a);case"list_item_start":r="";var c=this.token.loose,l=this.token.checked,d=this.token.task;for(this.token.task&&(r+=this.renderer.checkbox(l));"list_item_end"!==this.next().type;)r+=c||"text"!==this.token.type?this.tok():this.parseText();return this.renderer.listitem(r,d,l);case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:var h='Token with "'+this.token.type+'" type was not found.';if(!this.options.silent)throw new Error(h);console.log(h)}},c.prototype.slug=function(e){var t=e.toLowerCase().trim().replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,.\/:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(t)){var n=t;do{this.seen[n]++,t=n+"-"+this.seen[n]}while(this.seen.hasOwnProperty(t))}return this.seen[t]=0,t},l.escapeTest=/[&<>"']/,l.escapeReplace=/[&<>"']/g,l.replacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},l.escapeTestNoEncode=/[<>"']|&(?!#?\w+;)/,l.escapeReplaceNoEncode=/[<>"']|&(?!#?\w+;)/g;var p={},g=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function f(){}function m(e){for(var t,n,i=1;i<arguments.length;i++)for(n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function _(e,t){var n=e.replace(/\|/g,function(e,t,n){for(var i=!1,o=t;--o>=0&&"\\"===n[o];)i=!i;return i?"|":" |"}).split(/ \|/),i=0;if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;i<n.length;i++)n[i]=n[i].trim().replace(/\\\|/g,"|");return n}function v(e,t,n){if(0===e.length)return"";for(var i=0;i<e.length;){var o=e.charAt(e.length-i-1);if(o!==t||n){if(o===t||!n)break;i++}else i++}return e.substr(0,e.length-i)}function b(e,t){if(-1===e.indexOf(t[1]))return-1;for(var n=0,i=0;i<e.length;i++)if("\\"===e[i])i++;else if(e[i]===t[0])n++;else if(e[i]===t[1]&&--n<0)return i;return-1}function y(e,t,i){if("undefined"===typeof e||null===e)throw new Error("marked(): input parameter is undefined or null");if("string"!==typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(i||"function"===typeof t){i||(i=t,t=null);var o,r,s=(t=m({},y.defaults,t||{})).highlight,c=0;try{o=n.lex(e,t)}catch(d){return i(d)}r=o.length;var u=function(e){if(e)return t.highlight=s,i(e);var n;try{n=a.parse(o,t)}catch(d){e=d}return t.highlight=s,e?i(e):i(null,n)};if(!s||s.length<3)return u();if(delete t.highlight,!r)return u();for(;c<o.length;c++)!function(e){"code"!==e.type?--r||u():s(e.text,e.lang,function(t,n){return t?u(t):null==n||n===e.text?--r||u():(e.text=n,e.escaped=!0,void(--r||u()))})}(o[c])}else try{return t&&(t=m({},y.defaults,t)),a.parse(n.lex(e,t),t)}catch(d){if(d.message+="\nPlease report this to https://github.com/markedjs/marked.",(t||y.defaults).silent)return"<p>An error occurred:</p><pre>"+l(d.message+"",!0)+"</pre>";throw d}}f.exec=f,y.options=y.setOptions=function(e){return m(y.defaults,e),y},y.getDefaults=function(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:new r,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tables:!0,xhtml:!1}},y.defaults=y.getDefaults(),y.Parser=a,y.parser=a.parse,y.Renderer=r,y.TextRenderer=s,y.Lexer=n,y.lexer=n.lex,y.InlineLexer=o,y.inlineLexer=o.output,y.Slugger=c,y.parse=y,Qn=y}).call(void 0);Qn.Parser,Qn.parser;var li=Qn.Renderer,ui=(Qn.TextRenderer,Qn.Lexer,Qn.lexer,Qn.InlineLexer,Qn.inlineLexer,Qn.parse),di=n(202);function hi(e){var t=e.inline?"span":"div",n=document.createElement(t);return e.className&&(n.className=e.className),n}function pi(e,t){void 0===t&&(t={});var n=hi(t);return function e(t,n,i){var o;if(2===n.type)o=document.createTextNode(n.content||"");else if(3===n.type)o=document.createElement("b");else if(4===n.type)o=document.createElement("i");else if(5===n.type&&i){var r=document.createElement("a");r.href="#",i.disposeables.push(st.k(r,"click",function(e){i.callback(String(n.index),e)})),o=r}else 7===n.type?o=document.createElement("br"):1===n.type&&(o=t);o&&t!==o&&t.appendChild(o);o&&Array.isArray(n.children)&&n.children.forEach(function(t){e(o,t,i)})}(n,function(e){var t={type:1,children:[]},n=0,i=t,o=[],r=new gi(e);for(;!r.eos();){var s=r.next(),a="\\"===s&&0!==fi(r.peek());if(a&&(s=r.next()),a||0===fi(s)||s!==r.peek())if("\n"===s)2===i.type&&(i=o.pop()),i.children.push({type:7});else if(2!==i.type){var c={type:2,content:s};i.children.push(c),o.push(i),i=c}else i.content+=s;else{r.advance(),2===i.type&&(i=o.pop());var l=fi(s);if(i.type===l||5===i.type&&6===l)i=o.pop();else{var u={type:l,children:[]};5===l&&(u.index=n,n++),i.children.push(u),o.push(i),i=u}}}2===i.type&&(i=o.pop());o.length;return t}(e),t.actionHandler),n}var gi=function(){function e(e){this.source=e,this.index=0}return e.prototype.eos=function(){return this.index>=this.source.length},e.prototype.next=function(){var e=this.peek();return this.advance(),e},e.prototype.peek=function(){return this.source[this.index]},e.prototype.advance=function(){this.index++},e}();function fi(e){switch(e){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;default:return 0}}var mi=n(130),_i=function(){function e(e,t){void 0===e&&(e=[]),void 0===t&&(t=10),this._initialize(e),this._limit=t,this._onChange()}return e.prototype.add=function(e){this._history.delete(e),this._history.add(e),this._onChange()},e.prototype.next=function(){return this._navigator.next()},e.prototype.previous=function(){return this._navigator.previous()},e.prototype.current=function(){return this._navigator.current()},e.prototype.parent=function(){return null},e.prototype.first=function(){return this._navigator.first()},e.prototype.last=function(){return this._navigator.last()},e.prototype.has=function(e){return this._history.has(e)},e.prototype._onChange=function(){this._reduceToLimit(),this._navigator=new mi.b(this._elements,0,this._elements.length,this._elements.length)},e.prototype._reduceToLimit=function(){var e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))},e.prototype._initialize=function(e){this._history=new Set;for(var t=0,n=e;t<n.length;t++){var i=n[t];this._history.add(i)}},Object.defineProperty(e.prototype,"_elements",{get:function(){var e=[];return this._history.forEach(function(t){return e.push(t)}),e},enumerable:!0,configurable:!0}),e}(),vi=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),bi=st.a,yi={inputBackground:Vt.a.fromHex("#3C3C3C"),inputForeground:Vt.a.fromHex("#CCCCCC"),inputValidationInfoBorder:Vt.a.fromHex("#55AAFF"),inputValidationInfoBackground:Vt.a.fromHex("#063B49"),inputValidationWarningBorder:Vt.a.fromHex("#B89500"),inputValidationWarningBackground:Vt.a.fromHex("#352A05"),inputValidationErrorBorder:Vt.a.fromHex("#BE1100"),inputValidationErrorBackground:Vt.a.fromHex("#5A1D1D")},wi=function(e){function t(t,n,i){var o=e.call(this)||this;o.state="idle",o._onDidChange=o._register(new Ke.a),o.onDidChange=o._onDidChange.event,o._onDidHeightChange=o._register(new Ke.a),o.contextViewProvider=n,o.options=i||Object.create(null),Object(Bn.g)(o.options,yi,!1),o.message=null,o.cachedHeight=null,o.placeholder=o.options.placeholder||"",o.ariaLabel=o.options.ariaLabel||"",o.inputBackground=o.options.inputBackground,o.inputForeground=o.options.inputForeground,o.inputBorder=o.options.inputBorder,o.inputValidationInfoBorder=o.options.inputValidationInfoBorder,o.inputValidationInfoBackground=o.options.inputValidationInfoBackground,o.inputValidationInfoForeground=o.options.inputValidationInfoForeground,o.inputValidationWarningBorder=o.options.inputValidationWarningBorder,o.inputValidationWarningBackground=o.options.inputValidationWarningBackground,o.inputValidationWarningForeground=o.options.inputValidationWarningForeground,o.inputValidationErrorBorder=o.options.inputValidationErrorBorder,o.inputValidationErrorBackground=o.options.inputValidationErrorBackground,o.inputValidationErrorForeground=o.options.inputValidationErrorForeground,o.options.validationOptions&&(o.validation=o.options.validationOptions.validation),o.element=st.m(t,bi(".monaco-inputbox.idle"));var r=o.options.flexibleHeight?"textarea":"input",s=st.m(o.element,bi(".wrapper"));return o.input=st.m(s,bi(r+".input")),o.input.setAttribute("autocorrect","off"),o.input.setAttribute("autocapitalize","off"),o.input.setAttribute("spellcheck","false"),o.onfocus(o.input,function(){return st.f(o.element,"synthetic-focus")}),o.onblur(o.input,function(){return st.G(o.element,"synthetic-focus")}),o.options.flexibleHeight?(o.mirror=st.m(s,bi("div.mirror")),o.mirror.innerHTML="&nbsp;"):(o.input.type=o.options.type||"text",o.input.setAttribute("wrap","off")),o.ariaLabel&&o.input.setAttribute("aria-label",o.ariaLabel),o.placeholder&&o.setPlaceHolder(o.placeholder),o.oninput(o.input,function(){return o.onValueChange()}),o.onblur(o.input,function(){return o.onBlur()}),o.onfocus(o.input,function(){return o.onFocus()}),o.placeholder&&me.j&&o.onclick(o.input,function(e){st.c.stop(e,!0),o.input.focus()}),setTimeout(function(){o.input&&o.updateMirror()},0),o.options.actions&&(o.actionbar=o._register(new cn.a(o.element)),o.actionbar.push(o.options.actions,{icon:!0,label:!1})),o.applyStyles(),o}return vi(t,e),t.prototype.onBlur=function(){this._hideMessage()},t.prototype.onFocus=function(){this._showMessage()},t.prototype.setPlaceHolder=function(e){this.input&&(this.input.setAttribute("placeholder",e),this.input.title=e)},t.prototype.setAriaLabel=function(e){this.ariaLabel=e,this.input&&(e?this.input.setAttribute("aria-label",this.ariaLabel):this.input.removeAttribute("aria-label"))},Object.defineProperty(t.prototype,"mirrorElement",{get:function(){return this.mirror},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputElement",{get:function(){return this.input},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.input.value},set:function(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())},enumerable:!0,configurable:!0}),t.prototype.focus=function(){this.input.focus()},t.prototype.blur=function(){this.input.blur()},t.prototype.hasFocus=function(){return document.activeElement===this.input},t.prototype.select=function(e){void 0===e&&(e=null),this.input.select(),e&&this.input.setSelectionRange(e.start,e.end)},t.prototype.enable=function(){this.input.removeAttribute("disabled")},t.prototype.disable=function(){this.input.disabled=!0,this._hideMessage()},t.prototype.setEnabled=function(e){e?this.enable():this.disable()},Object.defineProperty(t.prototype,"width",{get:function(){return st.z(this.input)},set:function(e){this.input.style.width=e+"px",this.mirror&&(this.mirror.style.width=e+"px")},enumerable:!0,configurable:!0}),t.prototype.showMessage=function(e,t){this.message=e,st.G(this.element,"idle"),st.G(this.element,"info"),st.G(this.element,"warning"),st.G(this.element,"error"),st.f(this.element,this.classForType(e.type));var n,i=this.stylesForType(this.message.type);this.element.style.border=i.border?"1px solid "+i.border:null,n=3===e.type?V.a("alertErrorMessage","Error: {0}",e.content):2===e.type?V.a("alertWarningMessage","Warning: {0}",e.content):V.a("alertInfoMessage","Info: {0}",e.content),Ee.a(n),(this.hasFocus()||t)&&this._showMessage()},t.prototype.hideMessage=function(){this.message=null,st.G(this.element,"info"),st.G(this.element,"warning"),st.G(this.element,"error"),st.f(this.element,"idle"),this._hideMessage(),this.applyStyles()},t.prototype.validate=function(){var e=null;return this.validation&&((e=this.validation(this.value))?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),!e},t.prototype.stylesForType=function(e){switch(e){case 1:return{border:this.inputValidationInfoBorder,background:this.inputValidationInfoBackground,foreground:this.inputValidationInfoForeground};case 2:return{border:this.inputValidationWarningBorder,background:this.inputValidationWarningBackground,foreground:this.inputValidationWarningForeground};default:return{border:this.inputValidationErrorBorder,background:this.inputValidationErrorBackground,foreground:this.inputValidationErrorForeground}}},t.prototype.classForType=function(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}},t.prototype._showMessage=function(){var e=this;if(this.contextViewProvider&&this.message){var t,n=function(){return t.style.width=st.z(e.element)+"px"};this.state="open",this.contextViewProvider.showContextView({getAnchor:function(){return e.element},anchorAlignment:1,render:function(i){if(!e.message)return null;t=st.m(i,bi(".monaco-inputbox-container")),n();var o={inline:!0,className:"monaco-inputbox-message"},r=e.message.formatContent?pi(e.message.content,o):function(e,t){void 0===t&&(t={});var n=hi(t);return n.textContent=e,n}(e.message.content,o);st.f(r,e.classForType(e.message.type));var s=e.stylesForType(e.message.type);return r.style.backgroundColor=s.background?s.background.toString():null,r.style.color=s.foreground?s.foreground.toString():null,r.style.border=s.border?"1px solid "+s.border:null,st.m(t,r),null},layout:n})}},t.prototype._hideMessage=function(){this.contextViewProvider&&"open"===this.state&&(this.state="idle",this.contextViewProvider.hideContextView())},t.prototype.onValueChange=function(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),"open"===this.state&&this.contextViewProvider&&this.contextViewProvider.layout()},t.prototype.updateMirror=function(){if(this.mirror){var e=this.value||this.placeholder,t=10===e.charCodeAt(e.length-1)?" ":"";e+t?this.mirror.textContent=e+t:this.mirror.innerHTML="&nbsp;",this.layout()}},t.prototype.style=function(e){this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()},t.prototype.applyStyles=function(){if(this.element){var e=this.inputBackground?this.inputBackground.toString():null,t=this.inputForeground?this.inputForeground.toString():null,n=this.inputBorder?this.inputBorder.toString():null;this.element.style.backgroundColor=e,this.element.style.color=t,this.input.style.backgroundColor=e,this.input.style.color=t,this.element.style.borderWidth=n?"1px":null,this.element.style.borderStyle=n?"solid":null,this.element.style.borderColor=n}},t.prototype.layout=function(){if(this.mirror){var e=this.cachedHeight;this.cachedHeight=st.y(this.mirror),e!==this.cachedHeight&&(this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedHeight))}},t.prototype.dispose=function(){this._hideMessage(),this.element=null,this.input=null,this.contextViewProvider=void 0,this.message=null,this.validation=void 0,this.state=null,this.actionbar=void 0,e.prototype.dispose.call(this)},t}(Fn.a),Ci=function(e){function t(t,n,i){var o=e.call(this,t,n,i)||this;return o.history=new _i(i.history,100),o}return vi(t,e),t.prototype.addToHistory=function(){this.value&&this.value!==this.getCurrentValue()&&this.history.add(this.value)},t.prototype.showNextValue=function(){this.history.has(this.value)||this.addToHistory();var e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),e&&(this.value=e,Ee.c(this.value))},t.prototype.showPreviousValue=function(){this.history.has(this.value)||this.addToHistory();var e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,Ee.c(this.value))},t.prototype.getCurrentValue=function(){var e=this.history.current();return e||(e=this.history.last(),this.history.next()),e},t.prototype.getPreviousValue=function(){return this.history.previous()||this.history.first()},t.prototype.getNextValue=function(){return this.history.next()||this.history.last()},t}(wi),Si=(n(272),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}()),xi=V.a("defaultLabel","input"),Oi=function(e){function t(t,n,i,o){var r=e.call(this)||this;return r._showOptionButtons=i,r.fixFocusOnOptionClickEnabled=!0,r._onDidOptionChange=r._register(new Ke.a),r.onDidOptionChange=r._onDidOptionChange.event,r._onKeyDown=r._register(new Ke.a),r.onKeyDown=r._onKeyDown.event,r._onMouseDown=r._register(new Ke.a),r.onMouseDown=r._onMouseDown.event,r._onInput=r._register(new Ke.a),r._onKeyUp=r._register(new Ke.a),r._onCaseSensitiveKeyDown=r._register(new Ke.a),r.onCaseSensitiveKeyDown=r._onCaseSensitiveKeyDown.event,r._onRegexKeyDown=r._register(new Ke.a),r._lastHighlightFindOptions=0,r.contextViewProvider=n,r.placeholder=o.placeholder||"",r.validation=o.validation,r.label=o.label||xi,r.inputActiveOptionBorder=o.inputActiveOptionBorder,r.inputBackground=o.inputBackground,r.inputForeground=o.inputForeground,r.inputBorder=o.inputBorder,r.inputValidationInfoBorder=o.inputValidationInfoBorder,r.inputValidationInfoBackground=o.inputValidationInfoBackground,r.inputValidationInfoForeground=o.inputValidationInfoForeground,r.inputValidationWarningBorder=o.inputValidationWarningBorder,r.inputValidationWarningBackground=o.inputValidationWarningBackground,r.inputValidationWarningForeground=o.inputValidationWarningForeground,r.inputValidationErrorBorder=o.inputValidationErrorBorder,r.inputValidationErrorBackground=o.inputValidationErrorBackground,r.inputValidationErrorForeground=o.inputValidationErrorForeground,r.buildDomNode(o.appendCaseSensitiveLabel||"",o.appendWholeWordsLabel||"",o.appendRegexLabel||"",o.history||[],!!o.flexibleHeight),t&&t.appendChild(r.domNode),r.onkeydown(r.inputBox.inputElement,function(e){return r._onKeyDown.fire(e)}),r.onkeyup(r.inputBox.inputElement,function(e){return r._onKeyUp.fire(e)}),r.oninput(r.inputBox.inputElement,function(e){return r._onInput.fire()}),r.onmousedown(r.inputBox.inputElement,function(e){return r._onMouseDown.fire(e)}),r}return Si(t,e),t.prototype.enable=function(){st.G(this.domNode,"disabled"),this.inputBox.enable(),this.regex.enable(),this.wholeWords.enable(),this.caseSensitive.enable()},t.prototype.disable=function(){st.f(this.domNode,"disabled"),this.inputBox.disable(),this.regex.disable(),this.wholeWords.disable(),this.caseSensitive.disable()},t.prototype.setFocusInputOnOptionClick=function(e){this.fixFocusOnOptionClickEnabled=e},t.prototype.setEnabled=function(e){e?this.enable():this.disable()},t.prototype.getValue=function(){return this.inputBox.value},t.prototype.setValue=function(e){this.inputBox.value!==e&&(this.inputBox.value=e)},t.prototype.style=function(e){this.inputActiveOptionBorder=e.inputActiveOptionBorder,this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()},t.prototype.applyStyles=function(){if(this.domNode){var e={inputActiveOptionBorder:this.inputActiveOptionBorder};this.regex.style(e),this.wholeWords.style(e),this.caseSensitive.style(e);var t={inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder};this.inputBox.style(t)}},t.prototype.select=function(){this.inputBox.select()},t.prototype.focus=function(){this.inputBox.focus()},t.prototype.getCaseSensitive=function(){return this.caseSensitive.checked},t.prototype.setCaseSensitive=function(e){this.caseSensitive.checked=e},t.prototype.getWholeWords=function(){return this.wholeWords.checked},t.prototype.setWholeWords=function(e){this.wholeWords.checked=e},t.prototype.getRegex=function(){return this.regex.checked},t.prototype.setRegex=function(e){this.regex.checked=e,this.validate()},t.prototype.focusOnCaseSensitive=function(){this.caseSensitive.focus()},t.prototype.highlightFindOptions=function(){st.G(this.domNode,"highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,st.f(this.domNode,"highlight-"+this._lastHighlightFindOptions)},t.prototype.buildDomNode=function(e,t,n,i,o){var r=this;if(this.domNode=document.createElement("div"),st.f(this.domNode,"monaco-findInput"),this.inputBox=this._register(new Ci(this.domNode,this.contextViewProvider,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder,history:i,flexibleHeight:o})),this.regex=this._register(new $n({appendTitle:n,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder})),this._register(this.regex.onChange(function(e){r._onDidOptionChange.fire(e),!e&&r.fixFocusOnOptionClickEnabled&&r.inputBox.focus(),r.validate()})),this._register(this.regex.onKeyDown(function(e){r._onRegexKeyDown.fire(e)})),this.wholeWords=this._register(new Zn({appendTitle:t,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder})),this._register(this.wholeWords.onChange(function(e){r._onDidOptionChange.fire(e),!e&&r.fixFocusOnOptionClickEnabled&&r.inputBox.focus(),r.validate()})),this.caseSensitive=this._register(new Gn({appendTitle:e,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder})),this._register(this.caseSensitive.onChange(function(e){r._onDidOptionChange.fire(e),!e&&r.fixFocusOnOptionClickEnabled&&r.inputBox.focus(),r.validate()})),this._register(this.caseSensitive.onKeyDown(function(e){r._onCaseSensitiveKeyDown.fire(e)})),this._showOptionButtons){var s=this.caseSensitive.width()+this.wholeWords.width()+this.regex.width()+"px";this.inputBox.inputElement.style.paddingRight=s,this.inputBox.mirrorElement&&(this.inputBox.mirrorElement.style.paddingRight=s)}var a=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,function(e){if(e.equals(15)||e.equals(17)||e.equals(9)){var t=a.indexOf(document.activeElement);if(t>=0){var n=-1;e.equals(17)?n=(t+1)%a.length:e.equals(15)&&(n=0===t?a.length-1:t-1),e.equals(9)?a[t].blur():n>=0&&a[n].focus(),st.c.stop(e,!0)}}});var c=document.createElement("div");c.className="controls",c.style.display=this._showOptionButtons?"block":"none",c.appendChild(this.caseSensitive.domNode),c.appendChild(this.wholeWords.domNode),c.appendChild(this.regex.domNode),this.domNode.appendChild(c)},t.prototype.validate=function(){this.inputBox&&this.inputBox.validate()},t.prototype.clearMessage=function(){this.inputBox&&this.inputBox.hideMessage()},t.prototype.dispose=function(){e.prototype.dispose.call(this)},t}(Fn.a),ki=n(166),Di=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ii=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},Ni=function(e,t){return function(n,i){t(n,i,e)}},Li="historyNavigationWidget",Mi="historyNavigationEnabled";function Ei(e,t){return e.getContext(document.activeElement).getValue(t)}function Pi(e,t){var n=function(e,t){return e.createScoped(t.target)}(e,t);return function(e,t,n){new Pe.f(n,t).bindTo(e)}(n,t,Li),{scopedContextKeyService:n,historyNavigationEnablement:new Pe.f(Mi,!0).bindTo(n)}}var Ri=function(e){function t(t,n,i,o){var r=e.call(this,t,n,i)||this;return r._register(Pi(o,{target:r.element,historyNavigator:r}).scopedContextKeyService),r}return Di(t,e),t=Ii([Ni(3,Pe.e)],t)}(Ci),Ti=function(e){function t(t,n,i,o,r){void 0===r&&(r=!1);var s=e.call(this,t,n,r,i)||this;return s._register(Pi(o,{target:s.inputBox.element,historyNavigator:s.inputBox}).scopedContextKeyService),s}return Di(t,e),t=Ii([Ni(3,Pe.e)],t)}(Oi);ki.a.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:200,when:Pe.d.and(new Pe.b(Li),new Pe.c(Mi,!0)),primary:16,secondary:[528],handler:function(e,t){var n=Ei(e.get(Pe.e),Li);n&&n.historyNavigator.showPreviousValue()}}),ki.a.registerCommandAndKeybindingRule({id:"history.showNext",weight:200,when:new Pe.a([new Pe.b(Li),new Pe.c(Mi,!0)]),primary:18,secondary:[530],handler:function(e,t){var n=Ei(e.get(Pe.e),Li);n&&n.historyNavigator.showNextValue()}});var Ai=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ji=V.a("label.find","Find"),Fi=V.a("placeholder.find","Find"),Bi=V.a("label.previousMatchButton","Previous match"),Wi=V.a("label.nextMatchButton","Next match"),Vi=V.a("label.toggleSelectionFind","Find in selection"),Hi=V.a("label.closeButton","Close"),zi=V.a("label.replace","Replace"),Ui=V.a("placeholder.replace","Replace"),Ki=V.a("label.replaceButton","Replace"),qi=V.a("label.replaceAllButton","Replace All"),Gi=V.a("label.toggleReplaceButton","Toggle Replace mode"),Zi=V.a("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",19999),$i=V.a("label.matchesLocation","{0} of {1}"),Yi=V.a("label.noResults","No Results"),Ji=69,Xi=17+(Ji+3+1)+92+2,Qi=34,eo=function(){return function(e){this.afterLineNumber=e,this.heightInPx=Qi,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}}(),to=function(e){function t(t,n,i,o,r,s,a){var c=e.call(this)||this;return c._codeEditor=t,c._controller=n,c._state=i,c._contextViewProvider=o,c._keybindingService=r,c._contextKeyService=s,c._isVisible=!1,c._isReplaceVisible=!1,c._ignoreChangeEvent=!1,c._updateHistoryDelayer=new H.a(500),c._register(Object(z.f)(function(){return c._updateHistoryDelayer.cancel()})),c._register(c._state.onFindReplaceStateChange(function(e){return c._onStateChanged(e)})),c._buildDomNode(),c._updateButtons(),c._tryUpdateWidgetWidth(),c._register(c._codeEditor.onDidChangeConfiguration(function(e){if(e.readOnly&&(c._codeEditor.getConfiguration().readOnly&&c._state.change({isReplaceRevealed:!1},!1),c._updateButtons()),e.layoutInfo&&c._tryUpdateWidgetWidth(),e.accessibilitySupport&&c.updateAccessibilitySupport(),e.contribInfo){var t=c._codeEditor.getConfiguration().contribInfo.find.addExtraSpaceOnTop;t&&!c._viewZone&&(c._viewZone=new eo(0),c._showViewZone()),!t&&c._viewZone&&c._removeViewZone()}})),c.updateAccessibilitySupport(),c._register(c._codeEditor.onDidChangeCursorSelection(function(){c._isVisible&&c._updateToggleSelectionFindButton()})),c._register(c._codeEditor.onDidFocusEditorWidget(function(){if(c._isVisible){var e=c._controller.getGlobalBufferTerm();e&&e!==c._state.searchString&&(c._state.change({searchString:e},!0),c._findInput.select())}})),c._findInputFocused=Ln.bindTo(s),c._findFocusTracker=c._register(st.Q(c._findInput.inputBox.inputElement)),c._register(c._findFocusTracker.onDidFocus(function(){c._findInputFocused.set(!0),c._updateSearchScope()})),c._register(c._findFocusTracker.onDidBlur(function(){c._findInputFocused.set(!1)})),c._replaceInputFocused=Mn.bindTo(s),c._replaceFocusTracker=c._register(st.Q(c._replaceInputBox.inputElement)),c._register(c._replaceFocusTracker.onDidFocus(function(){c._replaceInputFocused.set(!0),c._updateSearchScope()})),c._register(c._replaceFocusTracker.onDidBlur(function(){c._replaceInputFocused.set(!1)})),c._codeEditor.addOverlayWidget(c),c._codeEditor.getConfiguration().contribInfo.find.addExtraSpaceOnTop&&(c._viewZone=new eo(0)),c._applyTheme(a.getTheme()),c._register(a.onThemeChange(c._applyTheme.bind(c))),c._register(c._codeEditor.onDidChangeModel(function(){c._isVisible&&void 0!==c._viewZoneId&&c._codeEditor.changeViewZones(function(e){c._viewZoneId&&e.removeZone(c._viewZoneId),c._viewZoneId=void 0})})),c._register(c._codeEditor.onDidScrollChange(function(e){e.scrollTopChanged?c._layoutViewZone():setTimeout(function(){c._layoutViewZone()},0)})),c}return Ai(t,e),t.prototype.getId=function(){return t.ID},t.prototype.getDomNode=function(){return this._domNode},t.prototype.getPosition=function(){return this._isVisible?{preference:0}:null},t.prototype._onStateChanged=function(e){if(e.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(e.replaceString&&(this._replaceInputBox.value=this._state.replaceString),e.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),e.isReplaceRevealed&&(this._state.isReplaceRevealed?this._codeEditor.getConfiguration().readOnly||this._isReplaceVisible||(this._isReplaceVisible=!0,this._replaceInputBox.width=this._findInput.inputBox.width,this._updateButtons()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),e.isRegex&&this._findInput.setRegex(this._state.isRegex),e.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),e.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),e.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),e.searchString||e.matchesCount||e.matchesPosition){var t=this._state.searchString.length>0&&0===this._state.matchesCount;st.P(this._domNode,"no-results",t),this._updateMatchesCount(),this._updateButtons()}(e.searchString||e.currentMatch)&&this._layoutViewZone(),e.updateHistory&&this._delayedUpdateHistory()},t.prototype._delayedUpdateHistory=function(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this))},t.prototype._updateHistory=function(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInputBox.addToHistory()},t.prototype._updateMatchesCount=function(){var e;if(this._matchesCount.style.minWidth=Ji+"px",this._state.matchesCount>=19999?this._matchesCount.title=Zi:this._matchesCount.title="",this._matchesCount.firstChild&&this._matchesCount.removeChild(this._matchesCount.firstChild),this._state.matchesCount>0){var t=String(this._state.matchesCount);this._state.matchesCount>=19999&&(t+="+");var n=String(this._state.matchesPosition);"0"===n&&(n="?"),e=he.p($i,n,t)}else e=Yi;this._matchesCount.appendChild(document.createTextNode(e)),Ji=Math.max(Ji,this._matchesCount.clientWidth)},t.prototype._updateToggleSelectionFindButton=function(){var e=this._codeEditor.getSelection(),t=!!e&&(e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn),n=this._toggleSelectionFind.checked;this._toggleSelectionFind.setEnabled(this._isVisible&&(n||t))},t.prototype._updateButtons=function(){this._findInput.setEnabled(this._isVisible),this._replaceInputBox.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);var e=this._state.searchString.length>0,t=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&e&&t),this._nextBtn.setEnabled(this._isVisible&&e&&t),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),st.P(this._domNode,"replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.toggleClass("collapse",!this._isReplaceVisible),this._toggleReplaceBtn.toggleClass("expand",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);var n=!this._codeEditor.getConfiguration().readOnly;this._toggleReplaceBtn.setEnabled(this._isVisible&&n)},t.prototype._reveal=function(){var e=this;if(!this._isVisible){this._isVisible=!0;var t=this._codeEditor.getSelection();!!t&&(t.startLineNumber!==t.endLineNumber||t.startColumn!==t.endColumn)&&this._codeEditor.getConfiguration().contribInfo.find.autoFindInSelection?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._tryUpdateWidgetWidth(),this._updateButtons(),setTimeout(function(){st.f(e._domNode,"visible"),e._domNode.setAttribute("aria-hidden","false")},0),setTimeout(function(){e._findInput.validate()},200),this._codeEditor.layoutOverlayWidget(this);var n=!0;if(this._codeEditor.getConfiguration().contribInfo.find.seedSearchStringFromSelection&&t){var i=this._codeEditor.getDomNode();if(i){var o=st.v(i),r=this._codeEditor.getScrolledVisiblePosition(t.getStartPosition()),s=o.left+(r?r.left:0),a=r?r.top:0;if(this._viewZone&&a<this._viewZone.heightInPx){t.endLineNumber>t.startLineNumber&&(n=!1);var c=st.x(this._domNode).left;s>c&&(n=!1);var l=this._codeEditor.getScrolledVisiblePosition(t.getEndPosition());o.left+(l?l.left:0)>c&&(n=!1)}}}this._showViewZone(n)}},t.prototype._hide=function(e){this._isVisible&&(this._isVisible=!1,this._updateButtons(),st.G(this._domNode,"visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),e&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())},t.prototype._layoutViewZone=function(){var e=this;if(this._codeEditor.getConfiguration().contribInfo.find.addExtraSpaceOnTop){if(this._isVisible){var t=this._viewZone;void 0===this._viewZoneId&&t&&this._codeEditor.changeViewZones(function(n){e._state.isReplaceRevealed?t.heightInPx=64:t.heightInPx=Qi,e._viewZoneId=n.addZone(t),e._codeEditor.setScrollTop(e._codeEditor.getScrollTop()+t.heightInPx)})}}else this._removeViewZone()},t.prototype._showViewZone=function(e){var t=this;void 0===e&&(e=!0);var n=this._viewZone;this._isVisible&&n&&this._codeEditor.changeViewZones(function(i){var o=Qi;void 0!==t._viewZoneId?(t._state.isReplaceRevealed?(n.heightInPx=64,o=64-Qi):(n.heightInPx=Qi,o=Qi-64),i.removeZone(t._viewZoneId)):n.heightInPx=Qi,t._viewZoneId=i.addZone(n),e&&t._codeEditor.setScrollTop(t._codeEditor.getScrollTop()+o)})},t.prototype._removeViewZone=function(){var e=this;this._codeEditor.changeViewZones(function(t){void 0!==e._viewZoneId&&(t.removeZone(e._viewZoneId),e._viewZoneId=void 0,e._viewZone&&(e._codeEditor.setScrollTop(e._codeEditor.getScrollTop()-e._viewZone.heightInPx),e._viewZone=void 0))})},t.prototype._applyTheme=function(e){var t={inputActiveOptionBorder:e.getColor(J.L),inputBackground:e.getColor(J.M),inputForeground:e.getColor(J.O),inputBorder:e.getColor(J.N),inputValidationInfoBackground:e.getColor(J.S),inputValidationInfoForeground:e.getColor(J.U),inputValidationInfoBorder:e.getColor(J.T),inputValidationWarningBackground:e.getColor(J.V),inputValidationWarningForeground:e.getColor(J.X),inputValidationWarningBorder:e.getColor(J.W),inputValidationErrorBackground:e.getColor(J.P),inputValidationErrorForeground:e.getColor(J.R),inputValidationErrorBorder:e.getColor(J.Q)};this._findInput.style(t),this._replaceInputBox.style(t)},t.prototype._tryUpdateWidgetWidth=function(){if(this._isVisible){var e=this._codeEditor.getConfiguration().layoutInfo.width,t=this._codeEditor.getConfiguration().layoutInfo.minimapWidth,n=!1,i=!1,o=!1;if(this._resized)if(st.z(this._domNode)>411)return this._domNode.style.maxWidth=e-28-t-15+"px",void(this._replaceInputBox.inputElement.style.width=st.z(this._findInput.inputBox.inputElement)+"px");if(439+t>=e&&(i=!0),439+t-Ji>=e&&(o=!0),439+t-Ji>=e+50&&(n=!0),st.P(this._domNode,"collapsed-find-widget",n),st.P(this._domNode,"narrow-find-widget",o),st.P(this._domNode,"reduced-find-widget",i),o||n||(this._domNode.style.maxWidth=e-28-t-15+"px"),this._resized){var r=st.z(this._findInput.inputBox.inputElement);r>0&&(this._replaceInputBox.inputElement.style.width=r+"px")}}},t.prototype.focusFindInput=function(){this._findInput.select(),this._findInput.focus()},t.prototype.focusReplaceInput=function(){this._replaceInputBox.select(),this._replaceInputBox.focus()},t.prototype.highlightFindOptions=function(){this._findInput.highlightFindOptions()},t.prototype._updateSearchScope=function(){if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){var e=this._codeEditor.getSelection();1===e.endColumn&&e.endLineNumber>e.startLineNumber&&(e=e.setEndPosition(e.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(e.endLineNumber-1)));var t=this._state.currentMatch;e.startLineNumber!==e.endLineNumber&&(se.a.equalsRange(e,t)||this._state.change({searchScope:e},!0))}},t.prototype._onFindInputMouseDown=function(e){e.middleButton&&e.stopPropagation()},t.prototype._onFindInputKeyDown=function(e){return e.equals(3)?(this._codeEditor.getAction(An.NextMatchFindAction).run().then(void 0,$e.e),void e.preventDefault()):e.equals(1027)?(this._codeEditor.getAction(An.PreviousMatchFindAction).run().then(void 0,$e.e),void e.preventDefault()):e.equals(2)?(this._isReplaceVisible?this._replaceInputBox.focus():this._findInput.focusOnCaseSensitive(),void e.preventDefault()):e.equals(2066)?(this._codeEditor.focus(),void e.preventDefault()):void 0},t.prototype._onReplaceInputKeyDown=function(e){return e.equals(3)?(this._controller.replace(),void e.preventDefault()):e.equals(2051)?(this._controller.replaceAll(),void e.preventDefault()):e.equals(2)?(this._findInput.focusOnCaseSensitive(),void e.preventDefault()):e.equals(1026)?(this._findInput.focus(),void e.preventDefault()):e.equals(2066)?(this._codeEditor.focus(),void e.preventDefault()):void 0},t.prototype.getHorizontalSashTop=function(e){return 0},t.prototype.getHorizontalSashLeft=function(e){return 0},t.prototype.getHorizontalSashWidth=function(e){return 500},t.prototype._keybindingLabelFor=function(e){var t=this._keybindingService.lookupKeybinding(e);return t?" ("+t.getLabel()+")":""},t.prototype._buildFindPart=function(){var e=this;this._findInput=this._register(new Ti(null,this._contextViewProvider,{width:221,label:ji,placeholder:Fi,appendCaseSensitiveLabel:this._keybindingLabelFor(An.ToggleCaseSensitiveCommand),appendWholeWordsLabel:this._keybindingLabelFor(An.ToggleWholeWordCommand),appendRegexLabel:this._keybindingLabelFor(An.ToggleRegexCommand),validation:function(t){if(0===t.length||!e._findInput.getRegex())return null;try{return new RegExp(t),null}catch(n){return{content:n.message}}}},this._contextKeyService,!0)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown(function(t){return e._onFindInputKeyDown(t)})),this._register(this._findInput.inputBox.onDidChange(function(){e._ignoreChangeEvent||e._state.change({searchString:e._findInput.getValue()},!0)})),this._register(this._findInput.onDidOptionChange(function(){e._state.change({isRegex:e._findInput.getRegex(),wholeWord:e._findInput.getWholeWords(),matchCase:e._findInput.getCaseSensitive()},!0)})),this._register(this._findInput.onCaseSensitiveKeyDown(function(t){t.equals(1026)&&e._isReplaceVisible&&(e._replaceInputBox.focus(),t.preventDefault())})),_e.c&&this._register(this._findInput.onMouseDown(function(t){return e._onFindInputMouseDown(t)})),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount(),this._prevBtn=this._register(new io({label:Bi+this._keybindingLabelFor(An.PreviousMatchFindAction),className:"previous",onTrigger:function(){e._codeEditor.getAction(An.PreviousMatchFindAction).run().then(void 0,$e.e)}})),this._nextBtn=this._register(new io({label:Wi+this._keybindingLabelFor(An.NextMatchFindAction),className:"next",onTrigger:function(){e._codeEditor.getAction(An.NextMatchFindAction).run().then(void 0,$e.e)}}));var t=document.createElement("div");return t.className="find-part",t.appendChild(this._findInput.domNode),t.appendChild(this._matchesCount),t.appendChild(this._prevBtn.domNode),t.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new no({parent:t,title:Vi+this._keybindingLabelFor(An.ToggleSearchScopeCommand),onChange:function(){if(e._toggleSelectionFind.checked){if(e._codeEditor.hasModel()){var t=e._codeEditor.getSelection();1===t.endColumn&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,e._codeEditor.getModel().getLineMaxColumn(t.endLineNumber-1))),t.isEmpty()||e._state.change({searchScope:t},!0)}}else e._state.change({searchScope:null},!0)}})),this._closeBtn=this._register(new io({label:Hi+this._keybindingLabelFor(An.CloseFindWidgetCommand),className:"close-fw",onTrigger:function(){e._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:function(t){t.equals(2)&&e._isReplaceVisible&&(e._replaceBtn.isEnabled()?e._replaceBtn.focus():e._codeEditor.focus(),t.preventDefault())}})),t.appendChild(this._closeBtn.domNode),t},t.prototype._buildReplacePart=function(){var e=this,t=document.createElement("div");t.className="replace-input",t.style.width="221px",this._replaceInputBox=this._register(new Ri(t,void 0,{ariaLabel:zi,placeholder:Ui,history:[]},this._contextKeyService)),this._register(st.k(this._replaceInputBox.inputElement,"keydown",function(t){return e._onReplaceInputKeyDown(t)})),this._register(this._replaceInputBox.onDidChange(function(){e._state.change({replaceString:e._replaceInputBox.value},!1)})),this._replaceBtn=this._register(new io({label:Ki+this._keybindingLabelFor(An.ReplaceOneAction),className:"replace",onTrigger:function(){e._controller.replace()},onKeyDown:function(t){t.equals(1026)&&(e._closeBtn.focus(),t.preventDefault())}})),this._replaceAllBtn=this._register(new io({label:qi+this._keybindingLabelFor(An.ReplaceAllAction),className:"replace-all",onTrigger:function(){e._controller.replaceAll()}}));var n=document.createElement("div");return n.className="replace-part",n.appendChild(t),n.appendChild(this._replaceBtn.domNode),n.appendChild(this._replaceAllBtn.domNode),n},t.prototype._buildDomNode=function(){var e=this,t=this._buildFindPart(),n=this._buildReplacePart();this._toggleReplaceBtn=this._register(new io({label:Gi,className:"toggle left",onTrigger:function(){e._state.change({isReplaceRevealed:!e._isReplaceVisible},!1),e._isReplaceVisible&&(e._replaceInputBox.width=e._findInput.inputBox.width),e._showViewZone()}})),this._toggleReplaceBtn.toggleClass("expand",this._isReplaceVisible),this._toggleReplaceBtn.toggleClass("collapse",!this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.style.width="411px",this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(t),this._domNode.appendChild(n),this._buildSash()},t.prototype._buildSash=function(){var e=this;this._resizeSash=new ti.a(this._domNode,this,{orientation:0}),this._resized=!1;var t=411;this._register(this._resizeSash.onDidStart(function(){t=st.z(e._domNode)})),this._register(this._resizeSash.onDidChange(function(n){e._resized=!0;var i=t+n.startX-n.currentX;if(!(i<411)){var o=i-Xi;i>(parseFloat(st.s(e._domNode).maxWidth)||0)||(e._domNode.style.width=i+"px",e._isReplaceVisible&&(e._replaceInputBox.width=o))}}))},t.prototype.updateAccessibilitySupport=function(){var e=this._codeEditor.getConfiguration().accessibilitySupport;this._findInput.setFocusInputOnOptionClick(2!==e)},t.ID="editor.contrib.findWidget",t}(Fn.a),no=function(e){function t(n){var i=e.call(this)||this;return i._opts=n,i._domNode=document.createElement("div"),i._domNode.className="monaco-checkbox",i._domNode.title=i._opts.title,i._domNode.tabIndex=0,i._checkbox=document.createElement("input"),i._checkbox.type="checkbox",i._checkbox.className="checkbox",i._checkbox.id="checkbox-"+t._COUNTER++,i._checkbox.tabIndex=-1,i._label=document.createElement("label"),i._label.className="label",i._label.htmlFor=i._checkbox.id,i._label.tabIndex=-1,i._domNode.appendChild(i._checkbox),i._domNode.appendChild(i._label),i._opts.parent.appendChild(i._domNode),i.onchange(i._checkbox,function(){i._opts.onChange()}),i}return Ai(t,e),Object.defineProperty(t.prototype,"domNode",{get:function(){return this._domNode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checked",{get:function(){return this._checkbox.checked},set:function(e){this._checkbox.checked=e},enumerable:!0,configurable:!0}),t.prototype.enable=function(){this._checkbox.removeAttribute("disabled")},t.prototype.disable=function(){this._checkbox.disabled=!0},t.prototype.setEnabled=function(e){e?(this.enable(),this.domNode.tabIndex=0):(this.disable(),this.domNode.tabIndex=-1)},t._COUNTER=0,t}(Fn.a),io=function(e){function t(t){var n=e.call(this)||this;return n._opts=t,n._domNode=document.createElement("div"),n._domNode.title=n._opts.label,n._domNode.tabIndex=0,n._domNode.className="button "+n._opts.className,n._domNode.setAttribute("role","button"),n._domNode.setAttribute("aria-label",n._opts.label),n.onclick(n._domNode,function(e){n._opts.onTrigger(),e.preventDefault()}),n.onkeydown(n._domNode,function(e){if(e.equals(10)||e.equals(3))return n._opts.onTrigger(),void e.preventDefault();n._opts.onKeyDown&&n._opts.onKeyDown(e)}),n}return Ai(t,e),Object.defineProperty(t.prototype,"domNode",{get:function(){return this._domNode},enumerable:!0,configurable:!0}),t.prototype.isEnabled=function(){return this._domNode.tabIndex>=0},t.prototype.focus=function(){this._domNode.focus()},t.prototype.setEnabled=function(e){st.P(this._domNode,"disabled",!e),this._domNode.setAttribute("aria-disabled",String(!e)),this._domNode.tabIndex=e?0:-1},t.prototype.setExpanded=function(e){this._domNode.setAttribute("aria-expanded",String(!!e))},t.prototype.toggleClass=function(e,t){st.P(this._domNode,e,t)},t}(Fn.a);Object(X.e)(function(e,t){var n=function(e,n){n&&t.addRule(".monaco-editor "+e+" { background-color: "+n+"; }")};n(".findMatch",e.getColor(J.r)),n(".currentFindMatch",e.getColor(J.p)),n(".findScope",e.getColor(J.t)),n(".find-widget",e.getColor(J.F));var i=e.getColor(J.Kb);i&&t.addRule(".monaco-editor .find-widget { box-shadow: 0 2px 8px "+i+"; }");var o=e.getColor(J.s);o&&t.addRule(".monaco-editor .findMatch { border: 1px "+("hc"===e.type?"dotted":"solid")+" "+o+"; box-sizing: border-box; }");var r=e.getColor(J.q);r&&t.addRule(".monaco-editor .currentFindMatch { border: 2px solid "+r+"; padding: 1px; box-sizing: border-box; }");var s=e.getColor(J.u);s&&t.addRule(".monaco-editor .findScope { border: 1px "+("hc"===e.type?"dashed":"solid")+" "+s+"; }");var a=e.getColor(J.e);a&&t.addRule(".monaco-editor .find-widget { border: 2px solid "+a+"; }");var c=e.getColor(J.I);c&&t.addRule(".monaco-editor .find-widget.no-results .matchesCount { color: "+c+"; }");var l=e.getColor(J.H);if(l)t.addRule(".monaco-editor .find-widget .monaco-sash { background-color: "+l+"; width: 3px !important; margin-left: -4px;}");else{var u=e.getColor(J.G);u&&t.addRule(".monaco-editor .find-widget .monaco-sash { background-color: "+u+"; width: 3px !important; margin-left: -4px;}")}var d=e.getColor(J.L);d&&t.addRule(".monaco-editor .find-widget .monaco-checkbox .checkbox:checked + .label { border: 1px solid "+d.toString()+"; }")});var oo=n(86),ro=Object(oo.c)("clipboardService"),so=n(143),ao=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),co=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},lo=function(e,t){return function(n,i){t(n,i,e)}},uo=524288;function ho(e){if(!e.hasModel())return null;var t=e.getSelection();if(t.startLineNumber===t.endLineNumber)if(t.isEmpty()){var n=e.getModel().getWordAtPosition(t.getStartPosition());if(n)return n.word}else if(e.getModel().getValueLengthInRange(t)<uo)return e.getModel().getValueInRange(t);return null}var po=function(e){function t(t,n,i,o){var r=e.call(this)||this;return r._editor=t,r._findWidgetVisible=Nn.bindTo(n),r._contextKeyService=n,r._storageService=i,r._clipboardService=o,r._updateHistoryDelayer=new H.a(500),r._state=r._register(new ei),r.loadQueryState(),r._register(r._state.onFindReplaceStateChange(function(e){return r._onStateChanged(e)})),r._model=null,r._register(r._editor.onDidChangeModel(function(){var e=r._editor.getModel()&&r._state.isRevealed;r.disposeModel(),r._state.change({searchScope:null,matchCase:r._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:r._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:r._storageService.getBoolean("editor.isRegex",1,!1)},!1),e&&r._start({forceRevealReplace:!1,seedSearchStringFromSelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1})})),r}return ao(t,e),t.get=function(e){return e.getContribution(t.ID)},t.prototype.dispose=function(){this.disposeModel(),e.prototype.dispose.call(this)},t.prototype.disposeModel=function(){this._model&&(this._model.dispose(),this._model=null)},t.prototype.getId=function(){return t.ID},t.prototype._onStateChanged=function(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)},t.prototype.saveQueryState=function(e){e.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1),e.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1),e.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1)},t.prototype.loadQueryState=function(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex)},!1)},t.prototype.isFindInputFocused=function(){return!!Ln.getValue(this._contextKeyService)},t.prototype.getState=function(){return this._state},t.prototype.closeFindWidget=function(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()},t.prototype.toggleCaseSensitive=function(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()},t.prototype.toggleWholeWords=function(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()},t.prototype.toggleRegex=function(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()},t.prototype.toggleSearchScope=function(){if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){var e=this._editor.getSelection();1===e.endColumn&&e.endLineNumber>e.startLineNumber&&(e=e.setEndPosition(e.endLineNumber-1,this._editor.getModel().getLineMaxColumn(e.endLineNumber-1))),e.isEmpty()||this._state.change({searchScope:e},!0)}},t.prototype.setSearchString=function(e){this._state.isRegex&&(e=he.n(e)),this._state.change({searchString:e},!1)},t.prototype.highlightFindOptions=function(){},t.prototype._start=function(e){if(this.disposeModel(),this._editor.hasModel()){var t,n={isRevealed:!0};if(e.seedSearchStringFromSelection)(t=ho(this._editor))&&(this._state.isRegex?n.searchString=he.n(t):n.searchString=t);if(!n.searchString&&e.seedSearchStringFromGlobalClipboard)(t=this.getGlobalBufferTerm())&&(n.searchString=t);if(e.forceRevealReplace?n.isReplaceRevealed=!0:this._findWidgetVisible.get()||(n.isReplaceRevealed=!1),e.updateSearchScope){var i=this._editor.getSelection();i.isEmpty()||(n.searchScope=i)}this._state.change(n,!1),this._model||(this._model=new jn(this._editor,this._state))}},t.prototype.start=function(e){this._start(e)},t.prototype.moveToNextMatch=function(){return!!this._model&&(this._model.moveToNextMatch(),!0)},t.prototype.moveToPrevMatch=function(){return!!this._model&&(this._model.moveToPrevMatch(),!0)},t.prototype.replace=function(){return!!this._model&&(this._model.replace(),!0)},t.prototype.replaceAll=function(){return!!this._model&&(this._model.replaceAll(),!0)},t.prototype.selectAllMatches=function(){return!!this._model&&(this._model.selectAllMatches(),this._editor.focus(),!0)},t.prototype.getGlobalBufferTerm=function(){return this._editor.getConfiguration().contribInfo.find.globalFindClipboard&&this._clipboardService&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():""},t.prototype.setGlobalBufferTerm=function(e){this._editor.getConfiguration().contribInfo.find.globalFindClipboard&&this._clipboardService&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(e)},t.ID="editor.contrib.findController",t=co([lo(1,Pe.e),lo(2,so.a),lo(3,ro)],t)}(z.a),go=function(e){function t(t,n,i,o,r,s,a){var c=e.call(this,t,i,s,a)||this;return c._contextViewService=n,c._keybindingService=o,c._themeService=r,c}return ao(t,e),t.prototype._start=function(t){this._widget||this._createFindWidget(),!this._widget.getPosition()&&this._editor.getConfiguration().contribInfo.find.autoFindInSelection&&(t.updateSearchScope=!0),e.prototype._start.call(this,t),2===t.shouldFocus?this._widget.focusReplaceInput():1===t.shouldFocus&&this._widget.focusFindInput()},t.prototype.highlightFindOptions=function(){this._widget||this._createFindWidget(),this._state.isRevealed?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()},t.prototype._createFindWidget=function(){this._widget=this._register(new to(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService)),this._findOptionsWidget=this._register(new Jn(this._editor,this._state,this._keybindingService,this._themeService))},t=co([lo(1,Ve.b),lo(2,Pe.e),lo(3,He.a),lo(4,X.c),lo(5,so.a),lo(6,Object(oo.d)(ro))],t)}(po),fo=function(e){function t(){return e.call(this,{id:An.StartFindAction,label:V.a("startFindAction","Find"),alias:"Find",precondition:null,kbOpts:{kbExpr:null,primary:2084,weight:100},menubarOpts:{menuId:14,group:"3_find",title:V.a({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}})||this}return ao(t,e),t.prototype.run=function(e,t){var n=po.get(t);n&&n.start({forceRevealReplace:!1,seedSearchStringFromSelection:t.getConfiguration().contribInfo.find.seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:t.getConfiguration().contribInfo.find.globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1})},t}(U.b),mo=function(e){function t(){return e.call(this,{id:An.StartFindWithSelection,label:V.a("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:null,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})||this}return ao(t,e),t.prototype.run=function(e,t){var n=po.get(t);n&&(n.start({forceRevealReplace:!1,seedSearchStringFromSelection:!0,seedSearchStringFromGlobalClipboard:!1,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1}),n.setGlobalBufferTerm(n.getState().searchString))},t}(U.b),_o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ao(t,e),t.prototype.run=function(e,t){var n=po.get(t);n&&!this._run(n)&&(n.start({forceRevealReplace:!1,seedSearchStringFromSelection:0===n.getState().searchString.length&&t.getConfiguration().contribInfo.find.seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1}),this._run(n))},t}(U.b),vo=function(e){function t(){return e.call(this,{id:An.NextMatchFindAction,label:V.a("findNextMatchAction","Find Next"),alias:"Find Next",precondition:null,kbOpts:{kbExpr:G.a.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100}})||this}return ao(t,e),t.prototype._run=function(e){return e.moveToNextMatch()},t}(_o),bo=function(e){function t(){return e.call(this,{id:An.PreviousMatchFindAction,label:V.a("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:null,kbOpts:{kbExpr:G.a.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100}})||this}return ao(t,e),t.prototype._run=function(e){return e.moveToPrevMatch()},t}(_o),yo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ao(t,e),t.prototype.run=function(e,t){var n=po.get(t);if(n){var i=ho(t);i&&n.setSearchString(i),this._run(n)||(n.start({forceRevealReplace:!1,seedSearchStringFromSelection:t.getConfiguration().contribInfo.find.seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1}),this._run(n))}},t}(U.b),wo=function(e){function t(){return e.call(this,{id:An.NextSelectionMatchFindAction,label:V.a("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:null,kbOpts:{kbExpr:G.a.focus,primary:2109,weight:100}})||this}return ao(t,e),t.prototype._run=function(e){return e.moveToNextMatch()},t}(yo),Co=function(e){function t(){return e.call(this,{id:An.PreviousSelectionMatchFindAction,label:V.a("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:null,kbOpts:{kbExpr:G.a.focus,primary:3133,weight:100}})||this}return ao(t,e),t.prototype._run=function(e){return e.moveToPrevMatch()},t}(yo),So=function(e){function t(){return e.call(this,{id:An.StartFindReplaceAction,label:V.a("startReplace","Replace"),alias:"Replace",precondition:null,kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menubarOpts:{menuId:14,group:"3_find",title:V.a({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}})||this}return ao(t,e),t.prototype.run=function(e,t){if(t.hasModel()&&!t.getConfiguration().readOnly){var n=po.get(t),i=t.getSelection(),o=n.isFindInputFocused(),r=!i.isEmpty()&&i.startLineNumber===i.endLineNumber&&t.getConfiguration().contribInfo.find.seedSearchStringFromSelection&&!o,s=o||r?2:1;n&&n.start({forceRevealReplace:!0,seedSearchStringFromSelection:r,seedSearchStringFromGlobalClipboard:t.getConfiguration().contribInfo.find.seedSearchStringFromSelection,shouldFocus:s,shouldAnimate:!0,updateSearchScope:!1})}},t}(U.b);Object(U.h)(go),Object(U.f)(fo),Object(U.f)(mo),Object(U.f)(vo),Object(U.f)(bo),Object(U.f)(wo),Object(U.f)(Co),Object(U.f)(So);var xo=U.c.bindToContribution(po.get);Object(U.g)(new xo({id:An.CloseFindWidgetCommand,precondition:Nn,handler:function(e){return e.closeFindWidget()},kbOpts:{weight:105,kbExpr:G.a.focus,primary:9,secondary:[1033]}})),Object(U.g)(new xo({id:An.ToggleCaseSensitiveCommand,precondition:null,handler:function(e){return e.toggleCaseSensitive()},kbOpts:{weight:105,kbExpr:G.a.focus,primary:En.primary,mac:En.mac,win:En.win,linux:En.linux}})),Object(U.g)(new xo({id:An.ToggleWholeWordCommand,precondition:null,handler:function(e){return e.toggleWholeWords()},kbOpts:{weight:105,kbExpr:G.a.focus,primary:Pn.primary,mac:Pn.mac,win:Pn.win,linux:Pn.linux}})),Object(U.g)(new xo({id:An.ToggleRegexCommand,precondition:null,handler:function(e){return e.toggleRegex()},kbOpts:{weight:105,kbExpr:G.a.focus,primary:Rn.primary,mac:Rn.mac,win:Rn.win,linux:Rn.linux}})),Object(U.g)(new xo({id:An.ToggleSearchScopeCommand,precondition:null,handler:function(e){return e.toggleSearchScope()},kbOpts:{weight:105,kbExpr:G.a.focus,primary:Tn.primary,mac:Tn.mac,win:Tn.win,linux:Tn.linux}})),Object(U.g)(new xo({id:An.ReplaceOneAction,precondition:Nn,handler:function(e){return e.replace()},kbOpts:{weight:105,kbExpr:G.a.focus,primary:3094}})),Object(U.g)(new xo({id:An.ReplaceAllAction,precondition:Nn,handler:function(e){return e.replaceAll()},kbOpts:{weight:105,kbExpr:G.a.focus,primary:2563}})),Object(U.g)(new xo({id:An.SelectAllMatchesAction,precondition:Nn,handler:function(e){return e.selectAllMatches()},kbOpts:{weight:105,kbExpr:G.a.focus,primary:515}}));n(273);var Oo=n(93),ko=65535,Do=function(){function e(e,t,n){if(e.length!==t.length||e.length>ko)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=e,this._endIndexes=t,this._collapseStates=new Uint32Array(Math.ceil(e.length/32)),this._types=n}return e.prototype.ensureParentIndices=function(){var e=this;if(!this._parentsComputed){this._parentsComputed=!0;for(var t=[],n=function(n,i){var o=t[t.length-1];return e.getStartLineNumber(o)<=n&&e.getEndLineNumber(o)>=i},i=0,o=this._startIndexes.length;i<o;i++){var r=this._startIndexes[i],s=this._endIndexes[i];if(r>16777215||s>16777215)throw new Error("startLineNumber or endLineNumber must not exceed 16777215");for(;t.length>0&&!n(r,s);)t.pop();var a=t.length>0?t[t.length-1]:-1;t.push(i),this._startIndexes[i]=r+((255&a)<<24),this._endIndexes[i]=s+((65280&a)<<16)}}},Object.defineProperty(e.prototype,"length",{get:function(){return this._startIndexes.length},enumerable:!0,configurable:!0}),e.prototype.getStartLineNumber=function(e){return 16777215&this._startIndexes[e]},e.prototype.getEndLineNumber=function(e){return 16777215&this._endIndexes[e]},e.prototype.getType=function(e){return this._types?this._types[e]:void 0},e.prototype.hasTypes=function(){return!!this._types},e.prototype.isCollapsed=function(e){var t=e/32|0,n=e%32;return 0!==(this._collapseStates[t]&1<<n)},e.prototype.setCollapsed=function(e,t){var n=e/32|0,i=e%32,o=this._collapseStates[n];this._collapseStates[n]=t?o|1<<i:o&~(1<<i)},e.prototype.toRegion=function(e){return new Io(this,e)},e.prototype.getParentIndex=function(e){this.ensureParentIndices();var t=((4278190080&this._startIndexes[e])>>>24)+((4278190080&this._endIndexes[e])>>>16);return t===ko?-1:t},e.prototype.contains=function(e,t){return this.getStartLineNumber(e)<=t&&this.getEndLineNumber(e)>=t},e.prototype.findIndex=function(e){var t=0,n=this._startIndexes.length;if(0===n)return-1;for(;t<n;){var i=Math.floor((t+n)/2);e<this.getStartLineNumber(i)?n=i:t=i+1}return t-1},e.prototype.findRange=function(e){var t=this.findIndex(e);if(t>=0){if(this.getEndLineNumber(t)>=e)return t;for(t=this.getParentIndex(t);-1!==t;){if(this.contains(t,e))return t;t=this.getParentIndex(t)}}return-1},e.prototype.toString=function(){for(var e=[],t=0;t<this.length;t++)e[t]="["+(this.isCollapsed(t)?"+":"-")+"] "+this.getStartLineNumber(t)+"/"+this.getEndLineNumber(t);return e.join(", ")},e}(),Io=function(){function e(e,t){this.ranges=e,this.index=t}return Object.defineProperty(e.prototype,"startLineNumber",{get:function(){return this.ranges.getStartLineNumber(this.index)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endLineNumber",{get:function(){return this.ranges.getEndLineNumber(this.index)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"regionIndex",{get:function(){return this.index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parentIndex",{get:function(){return this.ranges.getParentIndex(this.index)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCollapsed",{get:function(){return this.ranges.isCollapsed(this.index)},enumerable:!0,configurable:!0}),e.prototype.containedBy=function(e){return e.startLineNumber<=this.startLineNumber&&e.endLineNumber>=this.endLineNumber},e.prototype.containsLine=function(e){return this.startLineNumber<=e&&e<=this.endLineNumber},e}(),No=function(){function e(e,t){this._updateEventEmitter=new Ke.a,this._textModel=e,this._decorationProvider=t,this._regions=new Do(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[],this._isInitialized=!1}return Object.defineProperty(e.prototype,"regions",{get:function(){return this._regions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onDidChange",{get:function(){return this._updateEventEmitter.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textModel",{get:function(){return this._textModel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInitialized",{get:function(){return this._isInitialized},enumerable:!0,configurable:!0}),e.prototype.toggleCollapseState=function(e){var t=this;if(e.length){var n={};this._decorationProvider.changeDecorations(function(i){for(var o=0,r=e;o<r.length;o++){var s=r[o].regionIndex,a=t._editorDecorationIds[s];if(a&&!n[a]){n[a]=!0;var c=!t._regions.isCollapsed(s);t._regions.setCollapsed(s,c),i.changeDecorationOptions(a,t._decorationProvider.getDecorationOption(c))}}}),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}},e.prototype.update=function(e,t){var n=this;void 0===t&&(t=[]);for(var i=[],o=function(o,r){var s=e.getStartLineNumber(o);r&&function(e,n){for(var i=0,o=t;i<o.length;i++){var r=o[i];if(e<r&&r<=n)return!0}return!1}(s,e.getEndLineNumber(o))&&(r=!1),e.setCollapsed(o,r);var a=n._textModel.getLineMaxColumn(s),c={startLineNumber:s,startColumn:a,endLineNumber:s,endColumn:a};i.push({range:c,options:n._decorationProvider.getDecorationOption(r)})},r=0,s=function(){for(;r<n._regions.length;){var e=n._regions.isCollapsed(r);if(r++,e)return r-1}return-1},a=0,c=s();-1!==c&&a<e.length;){var l=this._textModel.getDecorationRange(this._editorDecorationIds[c]);if(l){var u=l.startLineNumber;if(this._textModel.getLineMaxColumn(u)===l.startColumn)for(;a<e.length;){var d=e.getStartLineNumber(a);if(!(u>=d))break;o(a,u===d),a++}}c=s()}for(;a<e.length;)o(a,!1),a++;this._editorDecorationIds=this._decorationProvider.deltaDecorations(this._editorDecorationIds,i),this._regions=e,this._isInitialized=!0,this._updateEventEmitter.fire({model:this})},e.prototype.getMemento=function(){for(var e=[],t=0;t<this._regions.length;t++)if(this._regions.isCollapsed(t)){var n=this._textModel.getDecorationRange(this._editorDecorationIds[t]);if(n){var i=n.startLineNumber,o=n.endLineNumber+this._regions.getEndLineNumber(t)-this._regions.getStartLineNumber(t);e.push({startLineNumber:i,endLineNumber:o})}}if(e.length>0)return e},e.prototype.applyMemento=function(e){if(Array.isArray(e)){for(var t=[],n=0,i=e;n<i.length;n++){var o=i[n],r=this.getRegionAtLine(o.startLineNumber);r&&!r.isCollapsed&&t.push(r)}this.toggleCollapseState(t)}},e.prototype.dispose=function(){this._decorationProvider.deltaDecorations(this._editorDecorationIds,[])},e.prototype.getAllRegionsAtLine=function(e,t){var n=[];if(this._regions)for(var i=this._regions.findRange(e),o=1;i>=0;){var r=this._regions.toRegion(i);t&&!t(r,o)||n.push(r),o++,i=r.parentIndex}return n},e.prototype.getRegionAtLine=function(e){if(this._regions){var t=this._regions.findRange(e);if(t>=0)return this._regions.toRegion(t)}return null},e.prototype.getRegionsInside=function(e,t){var n=[],i=e?e.regionIndex+1:0,o=e?e.endLineNumber:Number.MAX_VALUE;if(t&&2===t.length)for(var r=[],s=i,a=this._regions.length;s<a;s++){var c=this._regions.toRegion(s);if(!(this._regions.getStartLineNumber(s)<o))break;for(;r.length>0&&!c.containedBy(r[r.length-1]);)r.pop();r.push(c),t(c,r.length)&&n.push(c)}else for(s=i,a=this._regions.length;s<a;s++){c=this._regions.toRegion(s);if(!(this._regions.getStartLineNumber(s)<o))break;t&&!t(c)||n.push(c)}return n},e}();function Lo(e,t,n,i){void 0===n&&(n=Number.MAX_VALUE);var o=[];if(i&&i.length>0)for(var r=0,s=i;r<s.length;r++){var a=s[r],c=e.getRegionAtLine(a);if(c&&(c.isCollapsed!==t&&o.push(c),n>1)){var l=e.getRegionsInside(c,function(e,i){return e.isCollapsed!==t&&i<n});o.push.apply(o,l)}}else{l=e.getRegionsInside(null,function(e,i){return e.isCollapsed!==t&&i<n});o.push.apply(o,l)}e.toggleCollapseState(o)}function Mo(e,t,n,i){for(var o=[],r=0,s=i;r<s.length;r++){var a=s[r],c=e.getAllRegionsAtLine(a,function(e,i){return e.isCollapsed!==t&&i<=n});o.push.apply(o,c)}e.toggleCollapseState(o)}function Eo(e,t,n){for(var i=e.textModel,o=e.regions,r=[],s=o.length-1;s>=0;s--)if(n!==o.isCollapsed(s)){var a=o.getStartLineNumber(s);t.test(i.getLineContent(a))&&r.push(o.toRegion(s))}e.toggleCollapseState(r)}function Po(e,t,n){for(var i=e.regions,o=[],r=i.length-1;r>=0;r--)n!==i.isCollapsed(r)&&t===i.getType(r)&&o.push(i.toRegion(r));e.toggleCollapseState(o)}var Ro=function(){function e(e){this.editor=e,this.autoHideFoldingControls=!0}return e.prototype.getDecorationOption=function(t){return t?e.COLLAPSED_VISUAL_DECORATION:this.autoHideFoldingControls?e.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:e.EXPANDED_VISUAL_DECORATION},e.prototype.deltaDecorations=function(e,t){return this.editor.deltaDecorations(e,t)},e.prototype.changeDecorations=function(e){return this.editor.changeDecorations(e)},e.COLLAPSED_VISUAL_DECORATION=$.a.register({stickiness:1,afterContentClassName:"inline-folded",linesDecorationsClassName:"folding collapsed"}),e.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=$.a.register({stickiness:1,linesDecorationsClassName:"folding"}),e.EXPANDED_VISUAL_DECORATION=$.a.register({stickiness:1,linesDecorationsClassName:"folding alwaysShowFoldIcons"}),e}(),To=function(){function e(e){var t=this;this._updateEventEmitter=new Ke.a,this._foldingModel=e,this._foldingModelListener=e.onDidChange(function(e){return t.updateHiddenRanges()}),this._hiddenRanges=[],e.regions.length&&this.updateHiddenRanges()}return Object.defineProperty(e.prototype,"onDidChange",{get:function(){return this._updateEventEmitter.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hiddenRanges",{get:function(){return this._hiddenRanges},enumerable:!0,configurable:!0}),e.prototype.updateHiddenRanges=function(){for(var e=!1,t=[],n=0,i=0,o=Number.MAX_VALUE,r=-1,s=this._foldingModel.regions;n<s.length;n++)if(s.isCollapsed(n)){var a=s.getStartLineNumber(n)+1,c=s.getEndLineNumber(n);o<=a&&c<=r||(!e&&i<this._hiddenRanges.length&&this._hiddenRanges[i].startLineNumber===a&&this._hiddenRanges[i].endLineNumber===c?(t.push(this._hiddenRanges[i]),i++):(e=!0,t.push(new se.a(a,1,c,1))),o=a,r=c)}(e||i<this._hiddenRanges.length)&&this.applyHiddenRanges(t)},e.prototype.applyMemento=function(e){if(!Array.isArray(e)||0===e.length)return!1;for(var t=[],n=0,i=e;n<i.length;n++){var o=i[n];if(!o.startLineNumber||!o.endLineNumber)return!1;t.push(new se.a(o.startLineNumber+1,1,o.endLineNumber,1))}return this.applyHiddenRanges(t),!0},e.prototype.getMemento=function(){return this._hiddenRanges.map(function(e){return{startLineNumber:e.startLineNumber-1,endLineNumber:e.endLineNumber}})},e.prototype.applyHiddenRanges=function(e){this._hiddenRanges=e,this._updateEventEmitter.fire(e)},e.prototype.hasRanges=function(){return this._hiddenRanges.length>0},e.prototype.isHidden=function(e){return null!==Ao(this._hiddenRanges,e)},e.prototype.adjustSelections=function(e){for(var t=this,n=!1,i=this._foldingModel.textModel,o=null,r=function(e){return o&&function(e,t){return e>=t.startLineNumber&&e<=t.endLineNumber}(e,o)||(o=Ao(t._hiddenRanges,e)),o?o.startLineNumber-1:null},s=0,a=e.length;s<a;s++){var c=e[s],l=r(c.startLineNumber);l&&(c=c.setStartPosition(l,i.getLineMaxColumn(l)),n=!0);var u=r(c.endLineNumber);u&&(c=c.setEndPosition(u,i.getLineMaxColumn(u)),n=!0),e[s]=c}return n},e.prototype.dispose=function(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)},e}();function Ao(e,t){var n=Object(Ge.h)(e,function(e){return t<e.startLineNumber})-1;return n>=0&&e[n].endLineNumber>=t?e[n]:null}var jo=5e3,Fo="indent",Bo=function(){function e(e){this.editorModel=e,this.id=Fo}return e.prototype.dispose=function(){},e.prototype.compute=function(e){var t=Xt.a.getFoldingRules(this.editorModel.getLanguageIdentifier().id),n=t&&!!t.offSide,i=t&&t.markers;return Promise.resolve(function(e,t,n,i){void 0===i&&(i=jo);var o=e.getOptions().tabSize,r=new Wo(i),s=void 0;n&&(s=new RegExp("("+n.start.source+")|(?:"+n.end.source+")"));var a=[];a.push({indent:-1,line:e.getLineCount()+1,marker:!1});for(var c=e.getLineCount();c>0;c--){var l=e.getLineContent(c),u=$.b.computeIndentLevel(l,o),d=a[a.length-1];if(-1!==u){var h=void 0;if(s&&(h=l.match(s))){if(!h[1]){a.push({indent:-2,line:c,marker:!0});continue}for(var p=a.length-1;p>0&&!a[p].marker;)p--;if(p>0){a.length=p+1,d=a[p],r.insertFirst(c,d.line,u),d.marker=!1,d.indent=u,d.line=c;continue}}if(d.indent>u){do{a.pop(),d=a[a.length-1]}while(d.indent>u);var g=d.line-1;g-c>=1&&r.insertFirst(c,g,u)}d.indent===u?d.line=c:a.push({indent:u,line:c,marker:!1})}else t&&!d.marker&&(d.line=c)}return r.toIndentRanges(e)}(this.editorModel,n,i))},e}(),Wo=function(){function e(e){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=e}return e.prototype.insertFirst=function(e,t,n){if(!(e>16777215||t>16777215)){var i=this._length;this._startIndexes[i]=e,this._endIndexes[i]=t,this._length++,n<1e3&&(this._indentOccurrences[n]=(this._indentOccurrences[n]||0)+1)}},e.prototype.toIndentRanges=function(e){if(this._length<=this._foldingRangesLimit){for(var t=new Uint32Array(this._length),n=new Uint32Array(this._length),i=this._length-1,o=0;i>=0;i--,o++)t[o]=this._startIndexes[i],n[o]=this._endIndexes[i];return new Do(t,n)}var r=0,s=this._indentOccurrences.length;for(i=0;i<this._indentOccurrences.length;i++){var a=this._indentOccurrences[i];if(a){if(a+r>this._foldingRangesLimit){s=i;break}r+=a}}var c=e.getOptions().tabSize;for(t=new Uint32Array(this._foldingRangesLimit),n=new Uint32Array(this._foldingRangesLimit),i=this._length-1,o=0;i>=0;i--){var l=this._startIndexes[i],u=e.getLineContent(l),d=$.b.computeIndentLevel(u,c);(d<s||d===s&&r++<this._foldingRangesLimit)&&(t[o]=l,n[o]=this._endIndexes[i],o++)}return new Do(t,n)},e}();var Vo=5e3,Ho={},zo="syntax",Uo=function(){function e(e,t,n){void 0===n&&(n=Vo),this.editorModel=e,this.providers=t,this.limit=n,this.id=zo}return e.prototype.compute=function(e){var t=this;return function(e,t,n){var i=null,o=e.map(function(e,o){return Promise.resolve(e.provideFoldingRanges(t,Ho,n)).then(function(e){if(!n.isCancellationRequested&&Array.isArray(e)){Array.isArray(i)||(i=[]);for(var r=t.getLineCount(),s=0,a=e;s<a.length;s++){var c=a[s];c.start>0&&c.end>c.start&&c.end<=r&&i.push({start:c.start,end:c.end,rank:o,kind:c.kind})}}},$e.f)});return Promise.all(o).then(function(e){return i})}(this.providers,this.editorModel,e).then(function(e){return e?qo(e,t.limit):null})},e.prototype.dispose=function(){},e}();var Ko=function(){function e(e){this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=e}return e.prototype.add=function(e,t,n,i){if(!(e>16777215||t>16777215)){var o=this._length;this._startIndexes[o]=e,this._endIndexes[o]=t,this._nestingLevels[o]=i,this._types[o]=n,this._length++,i<30&&(this._nestingLevelCounts[i]=(this._nestingLevelCounts[i]||0)+1)}},e.prototype.toIndentRanges=function(){if(this._length<=this._foldingRangesLimit){for(var e=new Uint32Array(this._length),t=new Uint32Array(this._length),n=0;n<this._length;n++)e[n]=this._startIndexes[n],t[n]=this._endIndexes[n];return new Do(e,t,this._types)}var i=0,o=this._nestingLevelCounts.length;for(n=0;n<this._nestingLevelCounts.length;n++){var r=this._nestingLevelCounts[n];if(r){if(r+i>this._foldingRangesLimit){o=n;break}i+=r}}e=new Uint32Array(this._foldingRangesLimit),t=new Uint32Array(this._foldingRangesLimit);for(var s=[],a=(n=0,0);n<this._length;n++){var c=this._nestingLevels[n];(c<o||c===o&&i++<this._foldingRangesLimit)&&(e[a]=this._startIndexes[n],t[a]=this._endIndexes[n],s[a]=this._types[n],a++)}return new Do(e,t,s)},e}();function qo(e,t){for(var n=e.sort(function(e,t){var n=e.start-t.start;return 0===n&&(n=e.rank-t.rank),n}),i=new Ko(t),o=void 0,r=[],s=0,a=n;s<a.length;s++){var c=a[s];if(o){if(c.start>o.start)if(c.end<=o.end)r.push(o),o=c,i.add(c.start,c.end,c.kind&&c.kind.value,r.length);else{if(c.start>o.end){do{o=r.pop()}while(o&&c.start>o.end);o&&r.push(o),o=c}i.add(c.start,c.end,c.kind&&c.kind.value,r.length)}}else o=c,i.add(c.start,c.end,c.kind&&c.kind.value,r.length)}return i.toIndentRanges()}var Go="init",Zo=function(){function e(e,t,n,i){if(this.editorModel=e,this.id=Go,t.length){this.decorationIds=e.deltaDecorations([],t.map(function(t){return{range:{startLineNumber:t.startLineNumber,startColumn:0,endLineNumber:t.endLineNumber,endColumn:e.getLineLength(t.endLineNumber)},options:{stickiness:1}}})),this.timeout=setTimeout(n,i)}}return e.prototype.dispose=function(){this.decorationIds&&(this.editorModel.deltaDecorations(this.decorationIds,[]),this.decorationIds=void 0),"number"===typeof this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0)},e.prototype.compute=function(e){var t=[];if(this.decorationIds)for(var n=0,i=this.decorationIds;n<i.length;n++){var o=i[n],r=this.editorModel.getDecorationRange(o);r&&t.push({start:r.startLineNumber,end:r.endLineNumber,rank:1})}return Promise.resolve(qo(t,Number.MAX_VALUE))},e}(),$o=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Yo="editor.contrib.folding",Jo=function(){function e(e){var t=this;this.editor=e,this._isEnabled=this.editor.getConfiguration().contribInfo.folding,this._autoHideFoldingControls="mouseover"===this.editor.getConfiguration().contribInfo.showFoldingControls,this._useFoldingProviders="indentation"!==this.editor.getConfiguration().contribInfo.foldingStrategy,this.globalToDispose=[],this.localToDispose=[],this.foldingDecorationProvider=new Ro(e),this.foldingDecorationProvider.autoHideFoldingControls=this._autoHideFoldingControls,this.globalToDispose.push(this.editor.onDidChangeModel(function(){return t.onModelChanged()})),this.globalToDispose.push(this.editor.onDidChangeConfiguration(function(e){if(e.contribInfo){var n=t._isEnabled;t._isEnabled=t.editor.getConfiguration().contribInfo.folding,n!==t._isEnabled&&t.onModelChanged();var i=t._autoHideFoldingControls;t._autoHideFoldingControls="mouseover"===t.editor.getConfiguration().contribInfo.showFoldingControls,i!==t._autoHideFoldingControls&&(t.foldingDecorationProvider.autoHideFoldingControls=t._autoHideFoldingControls,t.onModelContentChanged());var o=t._useFoldingProviders;t._useFoldingProviders="indentation"!==t.editor.getConfiguration().contribInfo.foldingStrategy,o!==t._useFoldingProviders&&t.onFoldingStrategyChanged()}})),this.globalToDispose.push({dispose:function(){return Object(z.d)(t.localToDispose)}}),this.onModelChanged()}return e.get=function(e){return e.getContribution(Yo)},e.prototype.getId=function(){return Yo},e.prototype.dispose=function(){this.globalToDispose=Object(z.d)(this.globalToDispose)},e.prototype.saveViewState=function(){var e=this.editor.getModel();if(!e||!this._isEnabled||e.isTooLargeForTokenization())return{};if(this.foldingModel){var t=this.foldingModel.isInitialized?this.foldingModel.getMemento():this.hiddenRangeModel.getMemento(),n=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:t,lineCount:e.getLineCount(),provider:n}}},e.prototype.restoreViewState=function(e){var t=this.editor.getModel();if(t&&this._isEnabled&&!t.isTooLargeForTokenization()&&this.hiddenRangeModel&&e&&e.collapsedRegions&&e.lineCount===t.getLineCount()){e.provider!==zo&&e.provider!==Go||(this.foldingStateMemento=e);var n=e.collapsedRegions;if(this.hiddenRangeModel.applyMemento(n)){var i=this.getFoldingModel();i&&i.then(function(e){e&&e.applyMemento(n)}).then(void 0,$e.e)}}},e.prototype.onModelChanged=function(){var e=this;this.localToDispose=Object(z.d)(this.localToDispose);var t=this.editor.getModel();this._isEnabled&&t&&!t.isTooLargeForTokenization()&&(this.foldingModel=new No(t,this.foldingDecorationProvider),this.localToDispose.push(this.foldingModel),this.hiddenRangeModel=new To(this.foldingModel),this.localToDispose.push(this.hiddenRangeModel),this.localToDispose.push(this.hiddenRangeModel.onDidChange(function(t){return e.onHiddenRangesChanges(t)})),this.updateScheduler=new H.a(200),this.cursorChangedScheduler=new H.d(function(){return e.revealCursor()},200),this.localToDispose.push(this.cursorChangedScheduler),this.localToDispose.push(qe.m.onDidChange(function(){return e.onFoldingStrategyChanged()})),this.localToDispose.push(this.editor.onDidChangeModelLanguageConfiguration(function(){return e.onFoldingStrategyChanged()})),this.localToDispose.push(this.editor.onDidChangeModelContent(function(){return e.onModelContentChanged()})),this.localToDispose.push(this.editor.onDidChangeCursorPosition(function(){return e.onCursorPositionChanged()})),this.localToDispose.push(this.editor.onMouseDown(function(t){return e.onEditorMouseDown(t)})),this.localToDispose.push(this.editor.onMouseUp(function(t){return e.onEditorMouseUp(t)})),this.localToDispose.push({dispose:function(){e.foldingRegionPromise&&(e.foldingRegionPromise.cancel(),e.foldingRegionPromise=null),e.updateScheduler&&e.updateScheduler.cancel(),e.updateScheduler=null,e.foldingModel=null,e.foldingModelPromise=null,e.hiddenRangeModel=null,e.cursorChangedScheduler=null,e.foldingStateMemento=null,e.rangeProvider&&e.rangeProvider.dispose(),e.rangeProvider=null}}),this.onModelContentChanged())},e.prototype.onFoldingStrategyChanged=function(){this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null,this.onModelContentChanged()},e.prototype.getRangeProvider=function(e){var t=this;if(this.rangeProvider)return this.rangeProvider;if(this.rangeProvider=new Bo(e),this._useFoldingProviders&&this.foldingModel){var n=qe.m.ordered(this.foldingModel.textModel);if(0===n.length&&this.foldingStateMemento&&this.foldingStateMemento.collapsedRegions)return this.rangeProvider=new Zo(e,this.foldingStateMemento.collapsedRegions,function(){t.foldingStateMemento=null,t.onFoldingStrategyChanged()},3e4);n.length>0&&(this.rangeProvider=new Uo(e,n))}return this.foldingStateMemento=null,this.rangeProvider},e.prototype.getFoldingModel=function(){return this.foldingModelPromise},e.prototype.onModelContentChanged=function(){var e=this;this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger(function(){var t=e.foldingModel;if(!t)return null;var n=e.foldingRegionPromise=Object(H.f)(function(n){return e.getRangeProvider(t.textModel).compute(n)});return n.then(function(i){if(i&&n===e.foldingRegionPromise){var o=e.editor.getSelections(),r=o?o.map(function(e){return e.startLineNumber}):[];t.update(i,r)}return t})}).then(void 0,function(e){return Object($e.e)(e),null}))},e.prototype.onHiddenRangesChanges=function(e){if(this.hiddenRangeModel&&e.length){var t=this.editor.getSelections();t&&this.hiddenRangeModel.adjustSelections(t)&&this.editor.setSelections(t)}this.editor.setHiddenAreas(e)},e.prototype.onCursorPositionChanged=function(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()},e.prototype.revealCursor=function(){var e=this,t=this.getFoldingModel();t&&t.then(function(t){if(t){var n=e.editor.getSelections();if(n&&n.length>0){for(var i=[],o=function(n){var o=n.selectionStartLineNumber;e.hiddenRangeModel&&e.hiddenRangeModel.isHidden(o)&&i.push.apply(i,t.getAllRegionsAtLine(o,function(e){return e.isCollapsed&&o>e.startLineNumber}))},r=0,s=n;r<s.length;r++){o(s[r])}i.length&&(t.toggleCollapseState(i),e.reveal(n[0].getPosition()))}}}).then(void 0,$e.e)},e.prototype.onEditorMouseDown=function(e){if(this.mouseDownInfo=null,this.hiddenRangeModel&&e.target&&e.target.range&&(e.event.leftButton||e.event.middleButton)){var t=e.target.range,n=!1;switch(e.target.type){case 4:var i=e.target.detail,o=e.target.element.offsetLeft;if(i.offsetX-o<5)return;n=!0;break;case 7:if(this.hiddenRangeModel.hasRanges())if(!e.target.detail.isAfterLines)break;return;case 6:if(this.hiddenRangeModel.hasRanges()){var r=this.editor.getModel();if(r&&t.startColumn===r.getLineMaxColumn(t.startLineNumber))break}return;default:return}this.mouseDownInfo={lineNumber:t.startLineNumber,iconClicked:n}}},e.prototype.onEditorMouseUp=function(e){var t=this,n=this.getFoldingModel();if(n&&this.mouseDownInfo&&e.target){var i=this.mouseDownInfo.lineNumber,o=this.mouseDownInfo.iconClicked,r=e.target.range;if(r&&r.startLineNumber===i){if(o){if(4!==e.target.type)return}else{var s=this.editor.getModel();if(!s||r.startColumn!==s.getLineMaxColumn(i))return}n.then(function(n){if(n){var r=n.getRegionAtLine(i);if(r&&r.startLineNumber===i){var s=r.isCollapsed;if(o||s){var a=[r];(e.event.middleButton||e.event.shiftKey)&&a.push.apply(a,n.getRegionsInside(r,function(e){return e.isCollapsed===s})),n.toggleCollapseState(a),t.reveal({lineNumber:i,column:1})}}}}).then(void 0,$e.e)}}},e.prototype.reveal=function(e){this.editor.revealPositionInCenterIfOutsideViewport(e,0)},e}(),Xo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $o(t,e),t.prototype.runEditorCommand=function(e,t,n){var i=this,o=Jo.get(t);if(o){var r=o.getFoldingModel();return r?(this.reportTelemetry(e,t),r.then(function(e){if(e){i.invoke(o,e,t,n);var r=t.getSelection();r&&o.reveal(r.getStartPosition())}})):void 0}},t.prototype.getSelectedLines=function(e){var t=e.getSelections();return t?t.map(function(e){return e.startLineNumber}):[]},t.prototype.getLineNumbers=function(e,t){return e&&e.selectionLines?e.selectionLines.map(function(e){return e+1}):this.getSelectedLines(t)},t.prototype.run=function(e,t){},t}(U.b);function Qo(e){if(!Oo.i(e)){if(!Oo.g(e))return!1;var t=e;if(!Oo.i(t.levels)&&!Oo.f(t.levels))return!1;if(!Oo.i(t.direction)&&!Oo.h(t.direction))return!1;if(!Oo.i(t.selectionLines)&&(!Oo.b(t.selectionLines)||!t.selectionLines.every(Oo.f)))return!1}return!0}var er=function(e){function t(){return e.call(this,{id:"editor.unfold",label:V.a("unfoldAction.label","Unfold"),alias:"Unfold",precondition:null,kbOpts:{kbExpr:G.a.editorTextFocus,primary:3161,mac:{primary:2649},weight:100},description:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t* 'levels': Number of levels to unfold. If not set, defaults to 1.\n\t\t\t\t\t\t* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.\n\t\t\t\t\t\t* 'selectionLines': The start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t",constraint:Qo,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})||this}return $o(t,e),t.prototype.invoke=function(e,t,n,i){var o=i&&i.levels||1,r=this.getLineNumbers(i,n);i&&"up"===i.direction?Mo(t,!1,o,r):Lo(t,!1,o,r)},t}(Xo),tr=function(e){function t(){return e.call(this,{id:"editor.unfoldRecursively",label:V.a("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:null,kbOpts:{kbExpr:G.a.editorTextFocus,primary:Object(Yt.a)(2089,2137),weight:100}})||this}return $o(t,e),t.prototype.invoke=function(e,t,n,i){Lo(t,!1,Number.MAX_VALUE,this.getSelectedLines(n))},t}(Xo),nr=function(e){function t(){return e.call(this,{id:"editor.fold",label:V.a("foldAction.label","Fold"),alias:"Fold",precondition:null,kbOpts:{kbExpr:G.a.editorTextFocus,primary:3159,mac:{primary:2647},weight:100},description:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t\t* 'levels': Number of levels to fold. Defaults to 1.\n\t\t\t\t\t\t\t* 'direction': If 'up', folds given number of levels up otherwise folds down.\n\t\t\t\t\t\t\t* 'selectionLines': The start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t",constraint:Qo,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})||this}return $o(t,e),t.prototype.invoke=function(e,t,n,i){var o=i&&i.levels||1,r=this.getLineNumbers(i,n);i&&"up"===i.direction?Mo(t,!0,o,r):Lo(t,!0,o,r)},t}(Xo),ir=function(e){function t(){return e.call(this,{id:"editor.foldRecursively",label:V.a("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:null,kbOpts:{kbExpr:G.a.editorTextFocus,primary:Object(Yt.a)(2089,2135),weight:100}})||this}return $o(t,e),t.prototype.invoke=function(e,t,n){var i=this.getSelectedLines(n);Lo(t,!0,Number.MAX_VALUE,i)},t}(Xo),or=function(e){function t(){return e.call(this,{id:"editor.foldAllBlockComments",label:V.a("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:null,kbOpts:{kbExpr:G.a.editorTextFocus,primary:Object(Yt.a)(2089,2133),weight:100}})||this}return $o(t,e),t.prototype.invoke=function(e,t,n){if(t.regions.hasTypes())Po(t,qe.l.Comment.value,!0);else{var i=n.getModel();if(!i)return;var o=Xt.a.getComments(i.getLanguageIdentifier().id);if(o&&o.blockCommentStartToken)Eo(t,new RegExp("^\\s*"+Object(he.n)(o.blockCommentStartToken)),!0)}},t}(Xo),rr=function(e){function t(){return e.call(this,{id:"editor.foldAllMarkerRegions",label:V.a("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:null,kbOpts:{kbExpr:G.a.editorTextFocus,primary:Object(Yt.a)(2089,2077),weight:100}})||this}return $o(t,e),t.prototype.invoke=function(e,t,n){if(t.regions.hasTypes())Po(t,qe.l.Region.value,!0);else{var i=n.getModel();if(!i)return;var o=Xt.a.getFoldingRules(i.getLanguageIdentifier().id);if(o&&o.markers&&o.markers.start)Eo(t,new RegExp(o.markers.start),!0)}},t}(Xo),sr=function(e){function t(){return e.call(this,{id:"editor.unfoldAllMarkerRegions",label:V.a("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:null,kbOpts:{kbExpr:G.a.editorTextFocus,primary:Object(Yt.a)(2089,2078),weight:100}})||this}return $o(t,e),t.prototype.invoke=function(e,t,n){if(t.regions.hasTypes())Po(t,qe.l.Region.value,!1);else{var i=n.getModel();if(!i)return;var o=Xt.a.getFoldingRules(i.getLanguageIdentifier().id);if(o&&o.markers&&o.markers.start)Eo(t,new RegExp(o.markers.start),!1)}},t}(Xo),ar=function(e){function t(){return e.call(this,{id:"editor.foldAll",label:V.a("foldAllAction.label","Fold All"),alias:"Fold All",precondition:null,kbOpts:{kbExpr:G.a.editorTextFocus,primary:Object(Yt.a)(2089,2069),weight:100}})||this}return $o(t,e),t.prototype.invoke=function(e,t,n){Lo(t,!0)},t}(Xo),cr=function(e){function t(){return e.call(this,{id:"editor.unfoldAll",label:V.a("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:null,kbOpts:{kbExpr:G.a.editorTextFocus,primary:Object(Yt.a)(2089,2088),weight:100}})||this}return $o(t,e),t.prototype.invoke=function(e,t,n){Lo(t,!1)},t}(Xo),lr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $o(t,e),t.prototype.getFoldingLevel=function(){return parseInt(this.id.substr(t.ID_PREFIX.length))},t.prototype.invoke=function(e,t,n){!function(e,t,n,i){var o=e.getRegionsInside(null,function(e,o){return o===t&&e.isCollapsed!==n&&!i.some(function(t){return e.containsLine(t)})});e.toggleCollapseState(o)}(t,this.getFoldingLevel(),!0,this.getSelectedLines(n))},t.ID_PREFIX="editor.foldLevel",t.ID=function(e){return t.ID_PREFIX+e},t}(Xo);Object(U.h)(Jo),Object(U.f)(er),Object(U.f)(tr),Object(U.f)(nr),Object(U.f)(ir),Object(U.f)(ar),Object(U.f)(cr),Object(U.f)(or),Object(U.f)(rr),Object(U.f)(sr);for(var ur=1;ur<=7;ur++)Object(U.i)(new lr({id:lr.ID(ur),label:V.a("foldLevelAction.label","Fold Level {0}",ur),alias:"Fold Level "+ur,precondition:null,kbOpts:{kbExpr:G.a.editorTextFocus,primary:Object(Yt.a)(2089,2048|21+ur),weight:100}}));var dr=n(161),hr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),pr=function(e){function t(){return e.call(this,{id:"editor.action.fontZoomIn",label:V.a("EditorFontZoomIn.label","Editor Font Zoom In"),alias:"Editor Font Zoom In",precondition:null})||this}return hr(t,e),t.prototype.run=function(e,t){dr.a.setZoomLevel(dr.a.getZoomLevel()+1)},t}(U.b),gr=function(e){function t(){return e.call(this,{id:"editor.action.fontZoomOut",label:V.a("EditorFontZoomOut.label","Editor Font Zoom Out"),alias:"Editor Font Zoom Out",precondition:null})||this}return hr(t,e),t.prototype.run=function(e,t){dr.a.setZoomLevel(dr.a.getZoomLevel()-1)},t}(U.b),fr=function(e){function t(){return e.call(this,{id:"editor.action.fontZoomReset",label:V.a("EditorFontZoomReset.label","Editor Font Zoom Reset"),alias:"Editor Font Zoom Reset",precondition:null})||this}return hr(t,e),t.prototype.run=function(e,t){dr.a.setZoomLevel(0)},t}(U.b);Object(U.f)(pr),Object(U.f)(gr),Object(U.f)(fr);var mr=n(147),_r=n(133),vr=n(165),br=function(){function e(){}return e._handleEolEdits=function(e,t){for(var n=void 0,i=[],o=0,r=t;o<r.length;o++){var s=r[o];"number"===typeof s.eol&&(n=s.eol),s.range&&"string"===typeof s.text&&i.push(s)}return"number"===typeof n&&e.hasModel()&&e.getModel().pushEOL(n),i},e._isFullModelReplaceEdit=function(e,t){if(!e.hasModel())return!1;var n=e.getModel(),i=n.validateRange(t.range);return n.getFullModelRange().equalsRange(i)},e.execute=function(t,n){t.pushUndoStop();var i=e._handleEolEdits(t,n);1===i.length&&e._isFullModelReplaceEdit(t,i[0])?t.executeEdits("formatEditsCommand",i.map(function(e){return Jt.a.replace(se.a.lift(e.range),e.text)})):t.executeEdits("formatEditsCommand",i.map(function(e){return Jt.a.replaceMove(se.a.lift(e.range),e.text)})),t.pushUndoStop()},e}(),yr=function(){function e(e){this.value=e,this._lower=e.toLowerCase()}return e.toKey=function(e){return"string"===typeof e?e.toLowerCase():e._lower},e}(),wr=n(153),Cr=function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function s(e){try{c(i.next(e))}catch(t){r(t)}}function a(e){try{c(i.throw(e))}catch(t){r(t)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((i=i.apply(e,t||[])).next())})},Sr=function(e,t){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(a){r=[6,a],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};function xr(e){if((e=e.filter(function(e){return e.range})).length){for(var t=e[0].range,n=1;n<e.length;n++)t=se.a.plusRange(t,e[n].range);var i=t.startLineNumber,o=t.endLineNumber;i===o?1===e.length?Object(Ee.a)(V.a("hint11","Made 1 formatting edit on line {0}",i)):Object(Ee.a)(V.a("hintn1","Made {0} formatting edits on line {1}",e.length,i)):1===e.length?Object(Ee.a)(V.a("hint1n","Made 1 formatting edit between lines {0} and {1}",i,o)):Object(Ee.a)(V.a("hintnn","Made {0} formatting edits between lines {1} and {2}",e.length,i,o))}}function Or(e){for(var t=[],n=new Set,i=0,o=qe.g.ordered(e);i<o.length;i++){var r=o[i];t.push(r),r.extensionId&&n.add(yr.toKey(r.extensionId))}for(var s=function(e){if(e.extensionId){if(n.has(yr.toKey(e.extensionId)))return"continue";n.add(yr.toKey(e.extensionId))}t.push({displayName:e.displayName,extensionId:e.extensionId,provideDocumentFormattingEdits:function(t,n,i){return e.provideDocumentRangeFormattingEdits(t,t.getFullModelRange(),n,i)}})},a=0,c=qe.j.ordered(e);a<c.length;a++){s(r=c[a])}return t}var kr=function(){function e(){}return e.select=function(t,n,i){return Cr(this,void 0,void 0,function(){var o;return Sr(this,function(r){switch(r.label){case 0:return 0===t.length?[2,void 0]:(o=e._selectors.iterator().next().value)?[4,o(t,n,i)]:[3,2];case 1:return[2,r.sent()];case 2:return[2,t[0]]}})})},e._selectors=new wr.a,e}();function Dr(e,t,n,i,o){return Cr(this,void 0,void 0,function(){var r,s,a,c;return Sr(this,function(l){switch(l.label){case 0:return r=e.get(oo.a),s=Object(vr.a)(t)?t.getModel():t,a=qe.j.ordered(s),[4,kr.select(a,s,i)];case 1:return(c=l.sent())?[4,r.invokeFunction(Ir,c,t,n,o)]:[3,3];case 2:l.sent(),l.label=3;case 3:return[2]}})})}function Ir(e,t,n,i,o){return Cr(this,void 0,void 0,function(){var r,s,a,c,l,u,d,h,p;return Sr(this,function(g){switch(g.label){case 0:return r=e.get(_r.a),Object(vr.a)(n)?(s=n.getModel(),c=new Qe.a(n,5),a=function(){return c.validate(n)}):(s=n,l=n.getVersionId(),a=function(){return l===n.getVersionId()}),[4,t.provideDocumentRangeFormattingEdits(s,i,s.getFormattingOptions(),o)];case 1:return u=g.sent(),[4,r.computeMoreMinimalEdits(s.uri,u)];case 2:return d=g.sent(),a()?d&&0!==d.length?(Object(vr.a)(n)?(br.execute(n,d),xr(d),n.pushUndoStop(),n.focus(),n.revealPositionInCenterIfOutsideViewport(n.getPosition(),1)):(h=d[0].range,p=new q.a(h.startLineNumber,h.startColumn,h.endLineNumber,h.endColumn),s.pushEditOperations([p],d.map(function(e){return{text:e.text,range:se.a.lift(e.range),forceMoveMarkers:!0}}),function(e){for(var t=0,n=e;t<n.length;t++){var i=n[t].range;if(se.a.areIntersectingOrTouching(i,p))return[new q.a(i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn)]}return null})),[2,!0]):[2,!1]:[2,!0]}})})}function Nr(e,t,n,i){return Cr(this,void 0,void 0,function(){var o,r,s,a;return Sr(this,function(c){switch(c.label){case 0:return o=e.get(oo.a),r=Object(vr.a)(t)?t.getModel():t,s=Or(r),[4,kr.select(s,r,n)];case 1:return(a=c.sent())?[4,o.invokeFunction(Lr,a,t,n,i)]:[3,3];case 2:c.sent(),c.label=3;case 3:return[2]}})})}function Lr(e,t,n,i,o){return Cr(this,void 0,void 0,function(){var r,s,a,c,l,u,d;return Sr(this,function(h){switch(h.label){case 0:return r=e.get(_r.a),Object(vr.a)(n)?(s=n.getModel(),a=new Qe.b(n,5,o)):(s=n,a=new Qe.d(n,o)),[4,t.provideDocumentFormattingEdits(s,s.getFormattingOptions(),a.token)];case 1:return c=h.sent(),[4,r.computeMoreMinimalEdits(s.uri,c)];case 2:return l=h.sent(),a.token.isCancellationRequested?[2,!0]:l&&0!==l.length?(Object(vr.a)(n)?(br.execute(n,l),2!==i&&(xr(l),n.pushUndoStop(),n.focus(),n.revealPositionInCenterIfOutsideViewport(n.getPosition(),1))):(u=l[0].range,d=new q.a(u.startLineNumber,u.startColumn,u.endLineNumber,u.endColumn),s.pushEditOperations([d],l.map(function(e){return{text:e.text,range:se.a.lift(e.range),forceMoveMarkers:!0}}),function(e){for(var t=0,n=e;t<n.length;t++){var i=n[t].range;if(se.a.areIntersectingOrTouching(i,d))return[new q.a(i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn)]}return null})),[2,!0]):[2,!1]}})})}function Mr(e,t,n,i,o){var r=qe.r.ordered(t);return 0===r.length?Promise.resolve(void 0):r[0].autoFormatTriggerCharacters.indexOf(i)<0?Promise.resolve(void 0):Promise.resolve(r[0].provideOnTypeFormattingEdits(t,n,i,o,Ze.a.None)).catch($e.f).then(function(n){return e.computeMoreMinimalEdits(t.uri,n)})}Object(U.j)("_executeFormatRangeProvider",function(e,t){var n=t.resource,i=t.range,o=t.options;if(!(n instanceof Ye.a)||!se.a.isIRange(i))throw Object($e.b)();var r=e.get(Je.a).getModel(n);if(!r)throw Object($e.b)("resource");return function(e,t,n,i,o){return Cr(this,void 0,void 0,function(){var r,s,a,c,l;return Sr(this,function(u){switch(u.label){case 0:r=qe.j.ordered(t),s=0,a=r,u.label=1;case 1:return s<a.length?(c=a[s],[4,Promise.resolve(c.provideDocumentRangeFormattingEdits(t,n,i,o)).catch($e.f)]):[3,5];case 2:return l=u.sent(),Object(Ge.n)(l)?[4,e.computeMoreMinimalEdits(t.uri,l)]:[3,4];case 3:return[2,u.sent()];case 4:return s++,[3,1];case 5:return[2,void 0]}})})}(e.get(_r.a),r,se.a.lift(i),o,Ze.a.None)}),Object(U.j)("_executeFormatDocumentProvider",function(e,t){var n=t.resource,i=t.options;if(!(n instanceof Ye.a))throw Object($e.b)("resource");var o=e.get(Je.a).getModel(n);if(!o)throw Object($e.b)("resource");return function(e,t,n,i){return Cr(this,void 0,void 0,function(){var o,r,s,a,c;return Sr(this,function(l){switch(l.label){case 0:o=Or(t),r=0,s=o,l.label=1;case 1:return r<s.length?(a=s[r],[4,Promise.resolve(a.provideDocumentFormattingEdits(t,n,i)).catch($e.f)]):[3,5];case 2:return c=l.sent(),Object(Ge.n)(c)?[4,e.computeMoreMinimalEdits(t.uri,c)]:[3,4];case 3:return[2,l.sent()];case 4:return r++,[3,1];case 5:return[2,void 0]}})})}(e.get(_r.a),o,i,Ze.a.None)}),Object(U.j)("_executeFormatOnTypeProvider",function(e,t){var n=t.resource,i=t.position,o=t.ch,r=t.options;if(!(n instanceof Ye.a)||!K.a.isIPosition(i)||"string"!==typeof o)throw Object($e.b)();var s=e.get(Je.a).getModel(n);if(!s)throw Object($e.b)("resource");return Mr(e.get(_r.a),s,K.a.lift(i),o,r)});var Er=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Pr=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},Rr=function(e,t){return function(n,i){t(n,i,e)}},Tr=function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function s(e){try{c(i.next(e))}catch(t){r(t)}}function a(e){try{c(i.throw(e))}catch(t){r(t)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((i=i.apply(e,t||[])).next())})},Ar=function(e,t){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(a){r=[6,a],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},jr=function(){function e(e,t){var n=this;this._workerService=t,this._callOnDispose=[],this._callOnModel=[],this._editor=e,this._callOnDispose.push(e.onDidChangeConfiguration(function(){return n._update()})),this._callOnDispose.push(e.onDidChangeModel(function(){return n._update()})),this._callOnDispose.push(e.onDidChangeModelLanguage(function(){return n._update()})),this._callOnDispose.push(qe.r.onDidChange(this._update,this))}return e.prototype.getId=function(){return e.ID},e.prototype.dispose=function(){this._callOnDispose=Object(z.d)(this._callOnDispose),this._callOnModel=Object(z.d)(this._callOnModel)},e.prototype._update=function(){var e=this;if(this._callOnModel=Object(z.d)(this._callOnModel),this._editor.getConfiguration().contribInfo.formatOnType&&this._editor.hasModel()){var t=this._editor.getModel(),n=qe.r.ordered(t)[0];if(n&&n.autoFormatTriggerCharacters){for(var i=new mr.b,o=0,r=n.autoFormatTriggerCharacters;o<r.length;o++){var s=r[o];i.add(s.charCodeAt(0))}this._callOnModel.push(this._editor.onDidType(function(t){var n=t.charCodeAt(t.length-1);i.has(n)&&e._trigger(String.fromCharCode(n))}))}}},e.prototype._trigger=function(e){var t=this;if(this._editor.hasModel()&&!(this._editor.getSelections().length>1)){var n=this._editor.getModel(),i=this._editor.getPosition(),o=!1,r=this._editor.onDidChangeModelContent(function(e){if(e.isFlush)return o=!0,void r.dispose();for(var t=0,n=e.changes.length;t<n;t++){if(e.changes[t].range.endLineNumber<=i.lineNumber)return o=!0,void r.dispose()}});Mr(this._workerService,n,i,e,n.getFormattingOptions()).then(function(e){r.dispose(),o||Object(Ge.n)(e)&&(br.execute(t._editor,e),xr(e))},function(e){throw r.dispose(),e})}},e.ID="editor.contrib.autoFormat",e=Pr([Rr(1,_r.a)],e)}(),Fr=function(){function e(e,t){var n=this;this.editor=e,this._instantiationService=t,this._callOnDispose=[],this._callOnModel=[],this._callOnDispose.push(e.onDidChangeConfiguration(function(){return n._update()})),this._callOnDispose.push(e.onDidChangeModel(function(){return n._update()})),this._callOnDispose.push(e.onDidChangeModelLanguage(function(){return n._update()})),this._callOnDispose.push(qe.j.onDidChange(this._update,this))}return e.prototype.getId=function(){return e.ID},e.prototype.dispose=function(){this._callOnDispose=Object(z.d)(this._callOnDispose),this._callOnModel=Object(z.d)(this._callOnModel)},e.prototype._update=function(){var e=this;this._callOnModel=Object(z.d)(this._callOnModel),this.editor.getConfiguration().contribInfo.formatOnPaste&&this.editor.hasModel()&&qe.j.has(this.editor.getModel())&&this._callOnModel.push(this.editor.onDidPaste(function(t){return e._trigger(t)}))},e.prototype._trigger=function(e){this.editor.hasModel()&&(this.editor.getSelections().length>1||this._instantiationService.invokeFunction(Dr,this.editor,e,2,Ze.a.None).catch($e.e))},e.ID="editor.contrib.formatOnPaste",e=Pr([Rr(1,oo.a)],e)}(),Br=function(e){function t(){return e.call(this,{id:"editor.action.formatDocument",label:V.a("formatDocument.label","Format Document"),alias:"Format Document",precondition:Pe.d.and(G.a.writable,G.a.hasDocumentFormattingProvider),kbOpts:{kbExpr:Pe.d.and(G.a.editorTextFocus,G.a.hasDocumentFormattingProvider),primary:1572,linux:{primary:3111},weight:100},menuOpts:{when:G.a.hasDocumentFormattingProvider,group:"1_modification",order:1.3}})||this}return Er(t,e),t.prototype.run=function(e,t){return Tr(this,void 0,void 0,function(){return Ar(this,function(n){switch(n.label){case 0:return t.hasModel()?[4,e.get(oo.a).invokeFunction(Nr,t,1,Ze.a.None)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},t}(U.b),Wr=function(e){function t(){return e.call(this,{id:"editor.action.formatSelection",label:V.a("formatSelection.label","Format Selection"),alias:"Format Code",precondition:Pe.d.and(G.a.writable,G.a.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:Pe.d.and(G.a.editorTextFocus,G.a.hasDocumentSelectionFormattingProvider),primary:Object(Yt.a)(2089,2084),weight:100},menuOpts:{when:Pe.d.and(G.a.hasDocumentSelectionFormattingProvider,G.a.hasNonEmptySelection),group:"1_modification",order:1.31}})||this}return Er(t,e),t.prototype.run=function(e,t){return Tr(this,void 0,void 0,function(){var n,i,o;return Ar(this,function(r){switch(r.label){case 0:return t.hasModel()?(n=e.get(oo.a),i=t.getModel(),(o=t.getSelection()).isEmpty()&&(o=new se.a(o.startLineNumber,1,o.startLineNumber,i.getLineMaxColumn(o.startLineNumber))),[4,n.invokeFunction(Dr,t,o,1,Ze.a.None)]):[2];case 1:return r.sent(),[2]}})})},t}(U.b);Object(U.h)(jr),Object(U.h)(Fr),Object(U.f)(Br),Object(U.f)(Wr),We.a.registerCommand("editor.action.format",function(e){return Tr(void 0,void 0,void 0,function(){var t,n;return Ar(this,function(i){switch(i.label){case 0:return(t=e.get(be.a).getFocusedCodeEditor())&&t.hasModel()?(n=e.get(We.b),t.getSelection().isEmpty()?[4,n.executeCommand("editor.action.formatDocument")]:[3,2]):[2];case 1:return i.sent(),[3,4];case 2:return[4,n.executeCommand("editor.action.formatSelection")];case 3:i.sent(),i.label=4;case 4:return[2]}})})});n(274);var Vr,Hr,zr=n(151),Ur=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Kr=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},qr=function(e,t){return function(n,i){t(n,i,e)}},Gr=function(e){function t(t,n,i,o,r,s,a,c,l,u){var d=e.call(this,t,i.getRawConfiguration(),{},o,r,s,a,c,l,u)||this;return d._parentEditor=i,d._overwriteOptions=n,e.prototype.updateOptions.call(d,d._overwriteOptions),d._register(i.onDidChangeConfiguration(function(e){return d._onParentConfigurationChanged(e)})),d}return Ur(t,e),t.prototype.getParentEditor=function(){return this._parentEditor},t.prototype._onParentConfigurationChanged=function(t){e.prototype.updateOptions.call(this,this._parentEditor.getRawConfiguration()),e.prototype.updateOptions.call(this,this._overwriteOptions)},t.prototype.updateOptions=function(t){Bn.g(this._overwriteOptions,t,!0),e.prototype.updateOptions.call(this,this._overwriteOptions)},t=Kr([qr(3,oo.a),qr(4,be.a),qr(5,We.b),qr(6,Pe.e),qr(7,X.c),qr(8,At.a),qr(9,zr.a)],t)}(W.a),Zr=(n(275),new Vt.a(new Vt.c(0,122,204))),$r={showArrow:!0,showFrame:!0,className:"",frameColor:Zr,arrowColor:Zr,keepEditorSelection:!1},Yr=function(){function e(e,t,n,i,o,r){this.domNode=e,this.afterLineNumber=t,this.afterColumn=n,this.heightInLines=i,this._onDomNodeTop=o,this._onComputedHeight=r}return e.prototype.onDomNodeTop=function(e){this._onDomNodeTop(e)},e.prototype.onComputedHeight=function(e){this._onComputedHeight(e)},e}(),Jr=function(){function e(e,t){this._id=e,this._domNode=t}return e.prototype.getId=function(){return this._id},e.prototype.getDomNode=function(){return this._domNode},e.prototype.getPosition=function(){return null},e}(),Xr=function(){function e(t){this._editor=t,this._ruleName=e._IdGenerator.nextId(),this._decorations=[]}return e.prototype.dispose=function(){this.hide(),st.F(this._ruleName)},Object.defineProperty(e.prototype,"color",{set:function(e){this._color!==e&&(this._color=e,this._updateStyle())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{set:function(e){this._height!==e&&(this._height=e,this._updateStyle())},enumerable:!0,configurable:!0}),e.prototype._updateStyle=function(){st.F(this._ruleName),st.p(".monaco-editor "+this._ruleName,"border-style: solid; border-color: transparent; border-bottom-color: "+this._color+"; border-width: "+this._height+"px; bottom: -"+this._height+"px; margin-left: -"+this._height+"px; ")},e.prototype.show=function(e){this._decorations=this._editor.deltaDecorations(this._decorations,[{range:se.a.fromPositions(e),options:{className:this._ruleName,stickiness:1}}])},e.prototype.hide=function(){this._editor.deltaDecorations(this._decorations,[])},e._IdGenerator=new ni(".arrow-decoration-"),e}(),Qr=function(){function e(e,t){var n=this;void 0===t&&(t={}),this._positionMarkerId=[],this._disposables=[],this._isShowing=!1,this.editor=e,this.options=Bn.c(t),Bn.g(this.options,$r,!1),this.domNode=document.createElement("div"),this.options.isAccessible||(this.domNode.setAttribute("aria-hidden","true"),this.domNode.setAttribute("role","presentation")),this._disposables.push(this.editor.onDidLayoutChange(function(e){var t=n._getWidth(e);n.domNode.style.width=t+"px",n.domNode.style.left=n._getLeft(e)+"px",n._onWidth(t)}))}return e.prototype.dispose=function(){var e=this;Object(z.d)(this._disposables),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._viewZone&&this.editor.changeViewZones(function(t){e._viewZone&&t.removeZone(e._viewZone.id),e._viewZone=null}),this.editor.deltaDecorations(this._positionMarkerId,[]),this._positionMarkerId=[]},e.prototype.create=function(){st.f(this.domNode,"zone-widget"),this.options.className&&st.f(this.domNode,this.options.className),this.container=document.createElement("div"),st.f(this.container,"zone-widget-container"),this.domNode.appendChild(this.container),this.options.showArrow&&(this._arrow=new Xr(this.editor),this._disposables.push(this._arrow)),this._fillContainer(this.container),this._initSash(),this._applyStyles()},e.prototype.style=function(e){e.frameColor&&(this.options.frameColor=e.frameColor),e.arrowColor&&(this.options.arrowColor=e.arrowColor),this._applyStyles()},e.prototype._applyStyles=function(){if(this.container&&this.options.frameColor){var e=this.options.frameColor.toString();this.container.style.borderTopColor=e,this.container.style.borderBottomColor=e}if(this._arrow&&this.options.arrowColor){var t=this.options.arrowColor.toString();this._arrow.color=t}},e.prototype._getWidth=function(e){return e.width-e.minimapWidth-e.verticalScrollbarWidth},e.prototype._getLeft=function(e){return e.minimapWidth>0&&0===e.minimapLeft?e.minimapWidth:0},e.prototype._onViewZoneTop=function(e){this.domNode.style.top=e+"px"},e.prototype._onViewZoneHeight=function(e){this.domNode.style.height=e+"px";var t=e-this._decoratingElementsHeight();this.container.style.height=t+"px";var n=this.editor.getLayoutInfo();this._doLayout(t,this._getWidth(n)),this._resizeSash.layout()},Object.defineProperty(e.prototype,"position",{get:function(){var e=this._positionMarkerId[0];if(e){var t=this.editor.getModel();if(t){var n=t.getDecorationRange(e);if(n)return n.getStartPosition()}}},enumerable:!0,configurable:!0}),e.prototype.show=function(e,t){var n=se.a.isIRange(e)?e:new se.a(e.lineNumber,e.column,e.lineNumber,e.column);this._isShowing=!0,this._showImpl(n,t),this._isShowing=!1,this._positionMarkerId=this.editor.deltaDecorations(this._positionMarkerId,[{range:n,options:$.a.EMPTY}])},e.prototype.hide=function(){var e=this;this._viewZone&&(this.editor.changeViewZones(function(t){e._viewZone&&t.removeZone(e._viewZone.id)}),this._viewZone=null),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._arrow&&this._arrow.hide()},e.prototype._decoratingElementsHeight=function(){var e=this.editor.getConfiguration().lineHeight,t=0;this.options.showArrow&&(t+=2*Math.round(e/3));this.options.showFrame&&(t+=2*Math.round(e/9));return t},e.prototype._showImpl=function(e,t){var n=this,i={lineNumber:e.startLineNumber,column:e.startColumn},o=this.editor.getLayoutInfo(),r=this._getWidth(o);this.domNode.style.width=r+"px",this.domNode.style.left=this._getLeft(o)+"px";var s=document.createElement("div");s.style.overflow="hidden";var a=this.editor.getConfiguration().lineHeight,c=this.editor.getLayoutInfo().height/a*.8;t>=c&&(t=c);var l=0,u=0;if(this.options.showArrow&&(l=Math.round(a/3),this._arrow.height=l,this._arrow.show(i)),this.options.showFrame&&(u=Math.round(a/9)),this.editor.changeViewZones(function(e){n._viewZone&&e.removeZone(n._viewZone.id),n._overlayWidget&&(n.editor.removeOverlayWidget(n._overlayWidget),n._overlayWidget=null),n.domNode.style.top="-1000px",n._viewZone=new Yr(s,i.lineNumber,i.column,t,function(e){return n._onViewZoneTop(e)},function(e){return n._onViewZoneHeight(e)}),n._viewZone.id=e.addZone(n._viewZone),n._overlayWidget=new Jr("vs.editor.contrib.zoneWidget"+n._viewZone.id,n.domNode),n.editor.addOverlayWidget(n._overlayWidget)}),this.options.showFrame){var d=this.options.frameWidth?this.options.frameWidth:u;this.container.style.borderTopWidth=d+"px",this.container.style.borderBottomWidth=d+"px"}var h=t*a-this._decoratingElementsHeight();this.container.style.top=l+"px",this.container.style.height=h+"px",this.container.style.overflow="hidden",this._doLayout(h,r),this.options.keepEditorSelection||this.editor.setSelection(e);var p=this.editor.getModel();if(p){var g=Math.min(p.getLineCount(),Math.max(1,e.endLineNumber+1));this.revealLine(g)}},e.prototype.revealLine=function(e){this.editor.revealLine(e,0)},e.prototype.setCssClass=function(e,t){t&&this.container.classList.remove(t),st.f(this.container,e)},e.prototype._onWidth=function(e){},e.prototype._doLayout=function(e,t){},e.prototype._relayout=function(e){var t=this;this._viewZone&&this._viewZone.heightInLines!==e&&this.editor.changeViewZones(function(n){t._viewZone&&(t._viewZone.heightInLines=e,n.layoutZone(t._viewZone.id))})},e.prototype._initSash=function(){var e,t=this;this._resizeSash=new ti.a(this.domNode,this,{orientation:1}),this.options.isResizeable||(this._resizeSash.hide(),this._resizeSash.state=0),this._disposables.push(this._resizeSash.onDidStart(function(n){t._viewZone&&(e={startY:n.startY,heightInLines:t._viewZone.heightInLines})})),this._disposables.push(this._resizeSash.onDidEnd(function(){e=void 0})),this._disposables.push(this._resizeSash.onDidChange(function(n){if(e){var i=(n.currentY-e.startY)/t.editor.getConfiguration().lineHeight,o=i<0?Math.ceil(i):Math.floor(i),r=e.heightInLines+o;r>5&&r<35&&t._relayout(r)}}))},e.prototype.getHorizontalSashLeft=function(){return 0},e.prototype.getHorizontalSashTop=function(){return(null===this.domNode.style.height?0:parseInt(this.domNode.style.height))-this._decoratingElementsHeight()/2},e.prototype.getHorizontalSashWidth=function(){var e=this.editor.getLayoutInfo();return e.width-e.minimapWidth},e}(),es=n(194),ts=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ns=Object(oo.c)("IPeekViewService");Object(es.a)(ns,function(){function e(){this._widgets=new Map}return e.prototype.addExclusiveWidget=function(e,t){var n=this,i=this._widgets.get(e);i&&(i.listener.dispose(),i.widget.dispose());this._widgets.set(e,{widget:t,listener:t.onDidClose(function(){var i=n._widgets.get(e);i&&i.widget===t&&(i.listener.dispose(),n._widgets.delete(e))})})},e}()),(Hr=Vr||(Vr={})).inPeekEditor=new Pe.f("inReferenceSearchEditor",!0),Hr.notInPeekEditor=Hr.inPeekEditor.toNegated();var is={headerBackgroundColor:Vt.a.white,primaryHeadingColor:Vt.a.fromHex("#333333"),secondaryHeadingColor:Vt.a.fromHex("#6c6c6cb3")},os=function(e){function t(t,n){void 0===n&&(n={});var i=e.call(this,t,n)||this;return i._onDidClose=new Ke.a,Bn.g(i.options,is,!1),i}return ts(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this),this._onDidClose.fire(this)},Object.defineProperty(t.prototype,"onDidClose",{get:function(){return this._onDidClose.event},enumerable:!0,configurable:!0}),t.prototype.style=function(t){var n=this.options;t.headerBackgroundColor&&(n.headerBackgroundColor=t.headerBackgroundColor),t.primaryHeadingColor&&(n.primaryHeadingColor=t.primaryHeadingColor),t.secondaryHeadingColor&&(n.secondaryHeadingColor=t.secondaryHeadingColor),e.prototype.style.call(this,t)},t.prototype._applyStyles=function(){e.prototype._applyStyles.call(this);var t=this.options;this._headElement&&t.headerBackgroundColor&&(this._headElement.style.backgroundColor=t.headerBackgroundColor.toString()),this._primaryHeading&&t.primaryHeadingColor&&(this._primaryHeading.style.color=t.primaryHeadingColor.toString()),this._secondaryHeading&&t.secondaryHeadingColor&&(this._secondaryHeading.style.color=t.secondaryHeadingColor.toString()),this._bodyElement&&t.frameColor&&(this._bodyElement.style.borderColor=t.frameColor.toString())},t.prototype._fillContainer=function(e){this.setCssClass("peekview-widget"),this._headElement=st.a(".head"),this._bodyElement=st.a(".body"),this._fillHead(this._headElement),this._fillBody(this._bodyElement),e.appendChild(this._headElement),e.appendChild(this._bodyElement)},t.prototype._fillHead=function(e){var t=this,n=st.a(".peekview-title");st.m(this._headElement,n),st.k(n,"click",function(e){return t._onTitleClick(e)}),this._headingIcon=st.a("span"),this._primaryHeading=st.a("span.filename"),this._secondaryHeading=st.a("span.dirname"),this._metaHeading=st.a("span.meta"),st.m(n,this._headingIcon,this._primaryHeading,this._secondaryHeading,this._metaHeading);var i=st.a(".peekview-actions");st.m(this._headElement,i);var o=this._getActionBarOptions();this._actionbarWidget=new cn.a(i,o),this._disposables.push(this._actionbarWidget),this._actionbarWidget.push(new at.a("peekview.close",V.a("label.close","Close"),"close-peekview-action",!0,function(){return t.dispose(),Promise.resolve()}),{label:!1,icon:!0})},t.prototype._getActionBarOptions=function(){return{}},t.prototype._onTitleClick=function(e){},t.prototype.setTitleIcon=function(e){this._headingIcon.className=e?"icon "+e:""},t.prototype.setTitle=function(e,t){this._primaryHeading.innerHTML=he.m(e),this._primaryHeading.setAttribute("aria-label",e),t?this._secondaryHeading.innerHTML=he.m(t):st.n(this._secondaryHeading)},t.prototype.setMetaTitle=function(e){e?this._metaHeading.innerHTML=he.m(e):st.n(this._metaHeading)},t.prototype._doLayout=function(e,t){if(!this._isShowing&&e<0)this.dispose();else{var n=Math.ceil(1.2*this.editor.getConfiguration().lineHeight),i=e-(n+2);this._doLayoutHead(n,t),this._doLayoutBody(i,t)}},t.prototype._doLayoutHead=function(e,t){this._headElement.style.height=e+"px",this._headElement.style.lineHeight=this._headElement.style.height},t.prototype._doLayoutBody=function(e,t){this._bodyElement.style.height=e+"px"},t}(Qr),rs=n(122),ss=n(123),as=(n(276),n(145)),cs=function(){function e(e,t,n){this.parent=e,this._range=t,this.isProviderFirst=n,this._onRefChanged=new Ke.a,this.onRefChanged=this._onRefChanged.event,this.id=ii.nextId()}return Object.defineProperty(e.prototype,"uri",{get:function(){return this.parent.uri},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"range",{get:function(){return this._range},set:function(e){this._range=e,this._onRefChanged.fire(this)},enumerable:!0,configurable:!0}),e.prototype.getAriaMessage=function(){return Object(V.a)("aria.oneReference","symbol in {0} on line {1} at column {2}",Object(ss.b)(this.uri),this.range.startLineNumber,this.range.startColumn)},e}(),ls=function(){function e(e){this._modelReference=e}return e.prototype.dispose=function(){Object(z.d)(this._modelReference)},e.prototype.preview=function(e,t){void 0===t&&(t=8);var n=this._modelReference.object.textEditorModel;if(n){var i=e.startLineNumber,o=e.startColumn,r=e.endLineNumber,s=e.endColumn,a=n.getWordUntilPosition({lineNumber:i,column:o-t}),c=new se.a(i,a.startColumn,i,o),l=new se.a(r,s,r,Number.MAX_VALUE);return{before:n.getValueInRange(c).replace(/^\s+/,he.j),inside:n.getValueInRange(e),after:n.getValueInRange(l).replace(/\s+$/,he.j)}}},e}(),us=function(){function e(e,t){this._parent=e,this._uri=t,this._children=[]}return Object.defineProperty(e.prototype,"id",{get:function(){return this._uri.toString()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this._children},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"preview",{get:function(){return this._preview},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"failure",{get:function(){return this._loadFailure},enumerable:!0,configurable:!0}),e.prototype.getAriaMessage=function(){var e=this.children.length;return 1===e?Object(V.a)("aria.fileReferences.1","1 symbol in {0}, full path {1}",Object(ss.b)(this.uri),this.uri.fsPath):Object(V.a)("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,Object(ss.b)(this.uri),this.uri.fsPath)},e.prototype.resolve=function(e){var t=this;return this._resolved?Promise.resolve(this):Promise.resolve(e.createModelReference(this._uri).then(function(e){if(!e.object)throw e.dispose(),new Error;return t._preview=new ls(e),t._resolved=!0,t},function(e){return t._children=[],t._resolved=!0,t._loadFailure=e,t}))},e.prototype.dispose=function(){this._preview&&(this._preview.dispose(),this._preview=void 0)},e}(),ds=function(){function e(t){var n=this;this.groups=[],this.references=[],this._onDidChangeReferenceRange=new Ke.a,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._disposables=[];var i,o=t[0];t.sort(e._compareReferences);for(var r=0,s=t;r<s.length;r++){var a=s[r];if(i&&i.uri.toString()===a.uri.toString()||(i=new us(this,a.uri),this.groups.push(i)),0===i.children.length||!se.a.equalsRange(a.range,i.children[i.children.length-1].range)){var c=new cs(i,a.targetSelectionRange||a.range,o===a);this._disposables.push(c.onRefChanged(function(e){return n._onDidChangeReferenceRange.fire(e)})),this.references.push(c),i.children.push(c)}}}return Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this.groups.length},enumerable:!0,configurable:!0}),e.prototype.getAriaMessage=function(){return this.empty?Object(V.a)("aria.result.0","No results found"):1===this.references.length?Object(V.a)("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):1===this.groups.length?Object(V.a)("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):Object(V.a)("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)},e.prototype.nextOrPreviousReference=function(e,t){var n=e.parent,i=n.children.indexOf(e),o=n.children.length,r=n.parent.groups.length;return 1===r||t&&i+1<o||!t&&i>0?(i=t?(i+1)%o:(i+o-1)%o,n.children[i]):(i=n.parent.groups.indexOf(n),t?(i=(i+1)%r,n.parent.groups[i].children[0]):(i=(i+r-1)%r,n.parent.groups[i].children[n.parent.groups[i].children.length-1]))},e.prototype.nearestReference=function(e,t){var n=this.references.map(function(n,i){return{idx:i,prefixLen:he.b(n.uri.toString(),e.toString()),offsetDist:100*Math.abs(n.range.startLineNumber-t.lineNumber)+Math.abs(n.range.startColumn-t.column)}}).sort(function(e,t){return e.prefixLen>t.prefixLen?-1:e.prefixLen<t.prefixLen?1:e.offsetDist<t.offsetDist?-1:e.offsetDist>t.offsetDist?1:0})[0];if(n)return this.references[n.idx]},e.prototype.firstReference=function(){for(var e=0,t=this.references;e<t.length;e++){var n=t[e];if(n.isProviderFirst)return n}return this.references[0]},e.prototype.dispose=function(){Object(z.d)(this.groups),Object(z.d)(this._disposables),this.groups.length=0,this._disposables.length=0},e._compareReferences=function(e,t){var n=e.uri.toString(),i=t.uri.toString();return n<i?-1:n>i?1:se.a.compareRangesUsingStarts(e.range,t.range)},e}();n(277);function hs(e){return Object(he.m)(e)}var ps=function(){function e(e,t){this.supportOcticons=t,this.domNode=document.createElement("span"),this.domNode.className="monaco-highlighted-label",this.didEverRender=!1,e.appendChild(this.domNode)}return Object.defineProperty(e.prototype,"element",{get:function(){return this.domNode},enumerable:!0,configurable:!0}),e.prototype.set=function(t,n,i,o){void 0===n&&(n=[]),void 0===i&&(i=""),t||(t=""),o&&(t=e.escapeNewLines(t,n)),this.didEverRender&&this.text===t&&this.title===i&&Bn.e(this.highlights,n)||(Array.isArray(n)||(n=[]),this.text=t,this.title=i,this.highlights=n,this.render())},e.prototype.render=function(){for(var e="",t=0,n=0,i=this.highlights;n<i.length;n++){var o=i[n];if(o.end!==o.start){if(t<o.start){e+="<span>";var r=this.text.substring(t,o.start);e+=this.supportOcticons?hs(r):Object(he.m)(r),e+="</span>",t=o.end}e+='<span class="highlight">';var s=this.text.substring(o.start,o.end);e+=this.supportOcticons?hs(s):Object(he.m)(s),e+="</span>",t=o.end}}if(t<this.text.length){e+="<span>";s=this.text.substring(t);e+=this.supportOcticons?hs(s):Object(he.m)(s),e+="</span>"}this.domNode.innerHTML=e,this.domNode.title=this.title,this.didEverRender=!0},e.escapeNewLines=function(e,t){var n=0,i=0;return e.replace(/\r\n|\r|\n/g,function(e,o){i="\r\n"===e?-1:0,o+=n;for(var r=0,s=t;r<s.length;r++){var a=s[r];a.end<=o||(a.start>=o&&(a.start+=i),a.end>=o&&(a.end+=i))}return n+=i,"\u23ce"})},e}(),gs=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),fs=function(){function e(e){this._element=e}return Object.defineProperty(e.prototype,"element",{get:function(){return this._element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textContent",{set:function(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{set:function(e){this.disposed||e===this._className||(this._className=e,this._element.className=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"title",{set:function(e){this.disposed||e===this._title||(this._title=e,this._title?this._element.title=e:this._element.removeAttribute("title"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empty",{set:function(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":null)},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.disposed=!0},e}(),ms=function(e){function t(t,n){var i=e.call(this)||this;return i.domNode=i._register(new fs(st.m(t,st.a(".monaco-icon-label")))),i.labelDescriptionContainer=i._register(new fs(st.m(i.domNode.element,st.a(".monaco-icon-label-description-container")))),n&&n.supportHighlights?i.labelNode=new ps(st.m(i.labelDescriptionContainer.element,st.a("a.label-name")),!n.donotSupportOcticons):i.labelNode=i._register(new fs(st.m(i.labelDescriptionContainer.element,st.a("a.label-name")))),n&&n.supportDescriptionHighlights?i.descriptionNodeFactory=function(){return new ps(st.m(i.labelDescriptionContainer.element,st.a("span.label-description")),!n.donotSupportOcticons)}:i.descriptionNodeFactory=function(){return i._register(new fs(st.m(i.labelDescriptionContainer.element,st.a("span.label-description"))))},i}return gs(t,e),t.prototype.setLabel=function(e,t,n){var i=["monaco-icon-label"];n&&(n.extraClasses&&i.push.apply(i,n.extraClasses),n.italic&&i.push("italic")),this.domNode.className=i.join(" "),this.domNode.title=n&&n.title?n.title:"",this.labelNode instanceof ps?this.labelNode.set(e||"",n?n.matches:void 0,n&&n.title?n.title:void 0,n&&n.labelEscapeNewLines):this.labelNode.textContent=e||"",(t||this.descriptionNode)&&(this.descriptionNode||(this.descriptionNode=this.descriptionNodeFactory()),this.descriptionNode instanceof ps?(this.descriptionNode.set(t||"",n?n.descriptionMatches:void 0),n&&n.descriptionTitle?this.descriptionNode.element.title=n.descriptionTitle:this.descriptionNode.element.removeAttribute("title")):(this.descriptionNode.textContent=t||"",this.descriptionNode.title=n&&n.descriptionTitle?n.descriptionTitle:"",this.descriptionNode.empty=!t))},t}(z.a),_s=(n(278),{badgeBackground:Vt.a.fromHex("#4D4D4D"),badgeForeground:Vt.a.fromHex("#FFFFFF")}),vs=function(){function e(e,t){this.options=t||Object.create(null),Object(Bn.g)(this.options,_s,!1),this.badgeBackground=this.options.badgeBackground,this.badgeForeground=this.options.badgeForeground,this.badgeBorder=this.options.badgeBorder,this.element=Object(st.m)(e,Object(st.a)(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}return e.prototype.setCount=function(e){this.count=e,this.render()},e.prototype.setTitleFormat=function(e){this.titleFormat=e,this.render()},e.prototype.render=function(){this.element.textContent=Object(he.p)(this.countFormat,this.count),this.element.title=Object(he.p)(this.titleFormat,this.count),this.applyStyles()},e.prototype.style=function(e){this.badgeBackground=e.badgeBackground,this.badgeForeground=e.badgeForeground,this.badgeBorder=e.badgeBorder,this.applyStyles()},e.prototype.applyStyles=function(){if(this.element){var e=this.badgeBackground?this.badgeBackground.toString():null,t=this.badgeForeground?this.badgeForeground.toString():null,n=this.badgeBorder?this.badgeBorder.toString():null;this.element.style.backgroundColor=e,this.element.style.color=t,this.element.style.borderWidth=n?"1px":null,this.element.style.borderStyle=n?"solid":null,this.element.style.borderColor=n}},e}(),bs=n(191),ys=n(157),ws=n(144);function Cs(e,t,n){if("string"===typeof e&&(e=Ye.a.file(e)),n){var i=n.getWorkspaceFolder(e);if(i){var o=n.getWorkspace().folders.length>1,r=void 0;if(r=Object(ss.e)(i.uri,e)?"":Object(ss.h)(i.uri,e),o){var s=i&&i.name?i.name:Object(ss.b)(i.uri);r=r?s+" \u2022 "+r:s}return r}}if(e.scheme!==rs.a.file&&e.scheme!==rs.a.untitled)return e.with({query:null,fragment:null}).toString(!0);if(xs(e.fsPath))return Object(ws.normalize)(Os(e.fsPath));var a=Object(ws.normalize)(e.fsPath);return!_e.g&&t&&(a=function(e,t){if(_e.g||!e||!t)return e;var n=ks.original===t?ks.normalized:void 0;n||(n=""+Object(he.E)(t,ws.posix.sep)+ws.posix.sep,ks={original:t,normalized:n});(_e.c?Object(he.G)(e,n):Object(he.H)(e,n))&&(e="~/"+e.substr(n.length));return e}(a,t.userHome)),a}function Ss(e){if(e){"string"===typeof e&&(e=Ye.a.file(e));var t=Object(ss.b)(e)||(e.scheme===rs.a.file?e.fsPath:e.path);return xs(t)?Os(t):t}}function xs(e){return!(!_e.g||!e||":"!==e[1])}function Os(e){return xs(e)?e.charAt(0).toUpperCase()+e.slice(1):e}var ks=Object.create(null);var Ds,Is,Ns=n(137),Ls=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ms=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},Es=function(e,t){return function(n,i){t(n,i,e)}},Ps=function(){function e(e){this._resolverService=e}return e.prototype.hasChildren=function(e){return e instanceof ds||e instanceof us&&!e.failure},e.prototype.getChildren=function(e){if(e instanceof ds)return e.groups;if(e instanceof us)return e.resolve(this._resolverService).then(function(e){return e.children});throw new Error("bad tree")},e=Ms([Es(0,as.a)],e)}(),Rs=function(){function e(){}return e.prototype.getHeight=function(){return 23},e.prototype.getTemplateId=function(e){return e instanceof us?Fs.id:Ws.id},e}(),Ts=function(){function e(e){this._keybindingService=e}return e.prototype.getKeyboardNavigationLabel=function(e){return Object(ss.b)(e.uri)},e.prototype.mightProducePrintableCharacter=function(e){return this._keybindingService.mightProducePrintableCharacter(e)},e=Ms([Es(0,He.a)],e)}(),As=function(){function e(){}return e.prototype.getId=function(e){return e.id},e}(),js=function(e){function t(t,n,i){var o=e.call(this)||this;o._uriLabel=n;var r=document.createElement("div");return st.f(r,"reference-file"),o.file=o._register(new ms(r,{supportHighlights:!0})),o.badge=new vs(st.m(r,st.a(".count"))),o._register(Object(ys.a)(o.badge,i)),t.appendChild(r),o}return Ls(t,e),t.prototype.set=function(e,t){var n=Object(ss.d)(e.uri);this.file.setLabel(Ss(e.uri),this._uriLabel.getUriLabel(n,{relative:!0}),{title:this._uriLabel.getUriLabel(e.uri),matches:t});var i=e.children.length;this.badge.setCount(i),e.failure?this.badge.setTitleFormat(Object(V.a)("referencesFailre","Failed to resolve file.")):i>1?this.badge.setTitleFormat(Object(V.a)("referencesCount","{0} references",i)):this.badge.setTitleFormat(Object(V.a)("referenceCount","{0} reference",i))},t=Ms([Es(1,bs.a),Es(2,X.c)],t)}(z.a),Fs=function(){function e(t){this._instantiationService=t,this.templateId=e.id}return e.prototype.renderTemplate=function(e){return this._instantiationService.createInstance(js,e)},e.prototype.renderElement=function(e,t,n){n.set(e.element,Object(Ns.c)(e.filterData))},e.prototype.disposeTemplate=function(e){e.dispose()},e.id="FileReferencesRenderer",e=Ms([Es(0,oo.a)],e)}(),Bs=function(){function e(e){var t=document.createElement("div");this.before=document.createElement("span"),this.inside=document.createElement("span"),this.after=document.createElement("span"),st.f(this.inside,"referenceMatch"),st.f(t,"reference"),t.appendChild(this.before),t.appendChild(this.inside),t.appendChild(this.after),e.appendChild(t)}return e.prototype.set=function(e){var t=e.parent.preview,n=t&&t.preview(e.range);if(n){var i=n.before,o=n.inside,r=n.after;this.before.innerHTML=Object(he.m)(i),this.inside.innerHTML=Object(he.m)(o),this.after.innerHTML=Object(he.m)(r)}},e}(),Ws=function(){function e(){this.templateId=e.id}return e.prototype.renderTemplate=function(e){return new Bs(e)},e.prototype.renderElement=function(e,t,n){n.set(e.element)},e.prototype.disposeTemplate=function(){},e.id="OneReferenceRenderer",e}(),Vs=function(){function e(){}return e.prototype.getAriaLabel=function(e){return e instanceof us?e.getAriaMessage():e instanceof cs?e.getAriaMessage():null},e}(),Hs=n(195),zs=(n(279),n(193)),Us=n(131),Ks=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),qs={separatorBorder:Vt.a.transparent};!function(e){e[e.Idle=0]="Idle",e[e.Busy=1]="Busy"}(Ds||(Ds={})),function(e){e.Distribute={type:"distribute"},e.Split=function(e){return{type:"split",index:e}}}(Is||(Is={}));var Gs=function(e){function t(t,n){void 0===n&&(n={});var i=e.call(this)||this;return i.size=0,i.contentSize=0,i.proportions=void 0,i.viewItems=[],i.sashItems=[],i.state=Ds.Idle,i._onDidSashChange=i._register(new Ke.a),i.onDidSashChange=i._onDidSashChange.event,i._onDidSashReset=i._register(new Ke.a),i.orientation=Oo.i(n.orientation)?0:n.orientation,i.inverseAltBehavior=!!n.inverseAltBehavior,i.proportionalLayout=!!Oo.i(n.proportionalLayout)||!!n.proportionalLayout,i.el=document.createElement("div"),st.f(i.el,"monaco-split-view2"),st.f(i.el,0===i.orientation?"vertical":"horizontal"),t.appendChild(i.el),i.sashContainer=st.m(i.el,st.a(".sash-container")),i.viewContainer=st.m(i.el,st.a(".split-view-container")),i.style(n.styles||qs),i}return Ks(t,e),Object.defineProperty(t.prototype,"orthogonalStartSash",{get:function(){return this._orthogonalStartSash},set:function(e){for(var t=0,n=this.sashItems;t<n.length;t++){n[t].sash.orthogonalStartSash=e}this._orthogonalStartSash=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"orthogonalEndSash",{get:function(){return this._orthogonalEndSash},set:function(e){for(var t=0,n=this.sashItems;t<n.length;t++){n[t].sash.orthogonalEndSash=e}this._orthogonalEndSash=e},enumerable:!0,configurable:!0}),t.prototype.style=function(e){e.separatorBorder.isTransparent()?(st.G(this.el,"separator-border"),this.el.style.removeProperty("--separator-border")):(st.f(this.el,"separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))},t.prototype.addView=function(e,t,n){var i=this;if(void 0===n&&(n=this.viewItems.length),this.state!==Ds.Idle)throw new Error("Cant modify splitview");this.state=Ds.Busy;var o=st.a(".split-view-view");n===this.viewItems.length?this.viewContainer.appendChild(o):this.viewContainer.insertBefore(o,this.viewContainer.children.item(n));var r,s=e.onDidChange(function(e){return i.onViewChange(d,e)}),a=Object(z.f)(function(){return i.viewContainer.removeChild(o)}),c=Object(z.c)([s,a]),l=0===this.orientation?function(){return d.container.style.height=d.size+"px"}:function(){return d.container.style.width=d.size+"px"};r="number"===typeof t?t:"split"===t.type?this.getViewSize(t.index)/2:e.minimumSize;var u,d={view:e,container:o,size:r,layout:function(){l(),d.view.layout(d.size,i.orientation)},disposable:c};if(this.viewItems.splice(n,0,d),this.viewItems.length>1){var h=0===this.orientation?1:0,p=0===this.orientation?{getHorizontalSashTop:function(e){return i.getSashPosition(e)}}:{getVerticalSashLeft:function(e){return i.getSashPosition(e)}},g=new ti.a(this.sashContainer,p,{orientation:h,orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash}),f=0===this.orientation?function(e){return{sash:g,start:e.startY,current:e.currentY,alt:e.altKey}}:function(e){return{sash:g,start:e.startX,current:e.currentX,alt:e.altKey}},m=Ke.b.map(g.onDidStart,f)(this.onSashStart,this),_=Ke.b.map(g.onDidChange,f)(this.onSashChange,this),v=Ke.b.map(g.onDidEnd,function(){return Object(Ge.j)(i.sashItems,function(e){return e.sash===g})})(this.onSashEnd,this),b=g.onDidReset(function(){return i._onDidSashReset.fire(Object(Ge.j)(i.sashItems,function(e){return e.sash===g}))}),y=Object(z.c)([m,_,v,b,g]),w={sash:g,disposable:y};this.sashItems.splice(n-1,0,w)}o.appendChild(e.element),"number"!==typeof t&&"split"===t.type&&(u=t.index),this.relayout(n,u),this.state=Ds.Idle,"number"!==typeof t&&"distribute"===t.type&&this.distributeViewSizes()},t.prototype.relayout=function(e,t){var n=this.viewItems.reduce(function(e,t){return e+t.size},0),i="number"===typeof e?[e]:void 0,o="number"===typeof t?[t]:void 0;this.resize(this.viewItems.length-1,this.size-n,void 0,i,o),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()},t.prototype.layout=function(e){var t=this,n=Math.max(this.size,this.contentSize);if(this.size=e,this.proportions)for(var i=0;i<this.viewItems.length;i++){var o=this.viewItems[i];o.size=Object(zs.a)(Math.round(this.proportions[i]*e),o.view.minimumSize,o.view.maximumSize)}else{var r=Object(Ge.r)(this.viewItems.length),s=r.filter(function(e){return 1===t.viewItems[e].view.priority}),a=r.filter(function(e){return 2===t.viewItems[e].view.priority});this.resize(this.viewItems.length-1,e-n,void 0,s,a)}this.distributeEmptySpace(),this.layoutViews()},t.prototype.saveProportions=function(){var e=this;this.proportionalLayout&&this.contentSize>0&&(this.proportions=this.viewItems.map(function(t){return t.size/e.contentSize}))},t.prototype.onSashStart=function(e){var t=this,n=e.sash,i=e.start,o=e.alt,r=Object(Ge.j)(this.sashItems,function(e){return e.sash===n}),s=Object(z.c)([Object(Us.a)(document.body,"keydown")(function(e){return a(t.sashDragState.current,e.altKey)}),Object(Us.a)(document.body,"keyup")(function(){return a(t.sashDragState.current,!1)})]),a=function(e,n){var i,o=t.viewItems.map(function(e){return e.size}),a=Number.NEGATIVE_INFINITY,c=Number.POSITIVE_INFINITY;(t.inverseAltBehavior&&(n=!n),n)&&(r===t.sashItems.length-1?(a=((i=t.viewItems[r]).view.minimumSize-i.size)/2,c=(i.view.maximumSize-i.size)/2):(a=((i=t.viewItems[r+1]).size-i.view.maximumSize)/2,c=(i.size-i.view.minimumSize)/2));t.sashDragState={start:e,current:e,index:r,sizes:o,minDelta:a,maxDelta:c,alt:n,disposable:s}};a(i,o)},t.prototype.onSashChange=function(e){var t=e.current,n=this.sashDragState,i=n.index,o=n.start,r=n.sizes,s=n.alt,a=n.minDelta,c=n.maxDelta;this.sashDragState.current=t;var l=t-o,u=this.resize(i,l,r,void 0,void 0,a,c);if(s){var d=i===this.sashItems.length-1,h=this.viewItems.map(function(e){return e.size}),p=d?i:i+1,g=this.viewItems[p],f=g.size-g.view.maximumSize,m=g.size-g.view.minimumSize,_=d?i-1:i+1;this.resize(_,-u,h,void 0,void 0,f,m)}this.distributeEmptySpace(),this.layoutViews()},t.prototype.onSashEnd=function(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions()},t.prototype.onViewChange=function(e,t){var n=this.viewItems.indexOf(e);n<0||n>=this.viewItems.length||(t="number"===typeof t?t:e.size,t=Object(zs.a)(t,e.view.minimumSize,e.view.maximumSize),this.inverseAltBehavior&&n>0?(this.resize(n-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout(n,void 0)))},t.prototype.resizeView=function(e,t){var n=this;if(this.state!==Ds.Idle)throw new Error("Cant modify splitview");if(this.state=Ds.Busy,!(e<0||e>=this.viewItems.length)){var i=this.viewItems[e];t=Math.round(t);var o=(t=Object(zs.a)(t,i.view.minimumSize,i.view.maximumSize))-i.size;if(0!==o&&e<this.viewItems.length-1){var r=Object(Ge.r)(e+1,this.viewItems.length),s=r.reduce(function(e,t){return e+(n.viewItems[t].size-n.viewItems[t].view.minimumSize)},0),a=r.reduce(function(e,t){return e+(n.viewItems[t].view.maximumSize-n.viewItems[t].size)},0),c=Object(zs.a)(o,-a,s);this.resize(e,c),o-=c}if(0!==o&&e>0){var l=Object(Ge.r)(e-1,-1),u=l.reduce(function(e,t){return e+(n.viewItems[t].size-n.viewItems[t].view.minimumSize)},0),d=l.reduce(function(e,t){return e+(n.viewItems[t].view.maximumSize-n.viewItems[t].size)},0),h=Object(zs.a)(-o,-u,d);this.resize(e-1,h)}this.distributeEmptySpace(),this.layoutViews(),this.saveProportions(),this.state=Ds.Idle}},t.prototype.distributeViewSizes=function(){for(var e=Math.floor(this.size/this.viewItems.length),t=0;t<this.viewItems.length-1;t++)this.resizeView(t,e)},t.prototype.getViewSize=function(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size},t.prototype.resize=function(e,t,n,i,o,r,s){var a=this;if(void 0===n&&(n=this.viewItems.map(function(e){return e.size})),void 0===r&&(r=Number.NEGATIVE_INFINITY),void 0===s&&(s=Number.POSITIVE_INFINITY),e<0||e>=this.viewItems.length)return 0;var c=Object(Ge.r)(e,-1),l=Object(Ge.r)(e+1,this.viewItems.length);if(o)for(var u=0,d=o;u<d.length;u++){var h=d[u];Object(Ge.q)(c,h),Object(Ge.q)(l,h)}if(i)for(var p=0,g=i;p<g.length;p++){var f=g[p];Object(Ge.p)(c,f),Object(Ge.p)(l,f)}for(var m=c.map(function(e){return a.viewItems[e]}),_=c.map(function(e){return n[e]}),v=l.map(function(e){return a.viewItems[e]}),b=l.map(function(e){return n[e]}),y=c.reduce(function(e,t){return e+(a.viewItems[t].view.minimumSize-n[t])},0),w=c.reduce(function(e,t){return e+(a.viewItems[t].view.maximumSize-n[t])},0),C=0===l.length?Number.POSITIVE_INFINITY:l.reduce(function(e,t){return e+(n[t]-a.viewItems[t].view.minimumSize)},0),S=0===l.length?Number.NEGATIVE_INFINITY:l.reduce(function(e,t){return e+(n[t]-a.viewItems[t].view.maximumSize)},0),x=Math.max(y,S,r),O=Math.min(C,w,s),k=0,D=t=Object(zs.a)(t,x,O);k<m.length;k++){var I=m[k];D-=(L=Object(zs.a)(_[k]+D,I.view.minimumSize,I.view.maximumSize))-_[k],I.size=L}k=0;for(var N=t;k<v.length;k++){var L;I=v[k];N+=(L=Object(zs.a)(b[k]-N,I.view.minimumSize,I.view.maximumSize))-b[k],I.size=L}return t},t.prototype.distributeEmptySpace=function(){for(var e=this.viewItems.reduce(function(e,t){return e+t.size},0),t=this.size-e,n=this.viewItems.length-1;0!==t&&n>=0;n--){var i=this.viewItems[n],o=Object(zs.a)(i.size+t,i.view.minimumSize,i.view.maximumSize);t-=o-i.size,i.size=o}},t.prototype.layoutViews=function(){this.contentSize=this.viewItems.reduce(function(e,t){return e+t.size},0),this.viewItems.forEach(function(e){return e.layout()}),this.sashItems.forEach(function(e){return e.sash.layout()});var e=!1,t=this.viewItems.map(function(t){return e=t.size-t.view.minimumSize>0||e});e=!1;var n=this.viewItems.map(function(t){return e=t.view.maximumSize-t.size>0||e}),i=this.viewItems.slice().reverse();e=!1;var o=i.map(function(t){return e=t.size-t.view.minimumSize>0||e}).reverse();e=!1;var r=i.map(function(t){return e=t.view.maximumSize-t.size>0||e}).reverse();this.sashItems.forEach(function(e,i){var s=!(t[i]&&r[i+1]),a=!(n[i]&&o[i+1]);e.sash.state=s&&a?0:s&&!a?1:!s&&a?2:3})},t.prototype.getSashPosition=function(e){for(var t=0,n=0;n<this.sashItems.length;n++)if(t+=this.viewItems[n].size,this.sashItems[n].sash===e)return t;return 0},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.viewItems.forEach(function(e){return e.disposable.dispose()}),this.viewItems=[],this.sashItems.forEach(function(e){return e.disposable.dispose()}),this.sashItems=[]},t}(z.a),Zs=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),$s=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},Ys=function(e,t){return function(n,i){t(n,i,e)}},Js=function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function s(e){try{c(i.next(e))}catch(t){r(t)}}function a(e){try{c(i.throw(e))}catch(t){r(t)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((i=i.apply(e,t||[])).next())})},Xs=function(e,t){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(a){r=[6,a],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},Qs=function(){function e(e,t){var n=this;this._editor=e,this._model=t,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=[],this._callOnModelChange=[],this._callOnDispose.push(this._editor.onDidChangeModel(function(){return n._onModelChanged()})),this._onModelChanged()}return e.prototype.dispose=function(){this._callOnModelChange=Object(z.d)(this._callOnModelChange),this._callOnDispose=Object(z.d)(this._callOnDispose),this.removeDecorations()},e.prototype._onModelChanged=function(){this._callOnModelChange=Object(z.d)(this._callOnModelChange);var e=this._editor.getModel();if(e)for(var t=0,n=this._model.groups;t<n.length;t++){var i=n[t];if(i.uri.toString()===e.uri.toString())return void this._addDecorations(i)}},e.prototype._addDecorations=function(t){var n=this;if(this._editor.hasModel()){this._callOnModelChange.push(this._editor.getModel().onDidChangeDecorations(function(e){return n._onDecorationChanged()}));for(var i=[],o=[],r=0,s=t.children.length;r<s;r++){var a=t.children[r];this._decorationIgnoreSet.has(a.id)||(i.push({range:a.range,options:e.DecorationOptions}),o.push(r))}var c=this._editor.deltaDecorations([],i);for(r=0;r<c.length;r++)this._decorations.set(c[r],t.children[o[r]])}},e.prototype._onDecorationChanged=function(){var e=this,t=[],n=this._editor.getModel();if(n){this._decorations.forEach(function(i,o){var r=n.getDecorationRange(o);if(r){var s=!1;if(!se.a.equalsRange(r,i.range))se.a.spansMultipleLines(r)?s=!0:i.range.endColumn-i.range.startColumn!==r.endColumn-r.startColumn&&(s=!0),s?(e._decorationIgnoreSet.add(i.id),t.push(o)):i.range=r}});for(var i=0,o=t.length;i<o;i++)this._decorations.delete(t[i]);this._editor.deltaDecorations(t,[])}},e.prototype.removeDecorations=function(){var e=[];this._decorations.forEach(function(t,n){e.push(n)}),this._editor.deltaDecorations(e,[]),this._decorations.clear()},e.DecorationOptions=$.a.register({stickiness:1,className:"reference-decoration"}),e}(),ea=function(){function e(){}return e.fromJSON=function(e){var t,n;try{var i=JSON.parse(e);t=i.ratio,n=i.heightInLines}catch(o){}return{ratio:t||.7,heightInLines:n||18}},e}(),ta=new Pe.f("referenceSearchTreeFocused",!0),na=function(e){function t(t,n,i,o,r,s,a,c){var l=e.call(this,t,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0})||this;return l._defaultTreeKeyboardSupport=n,l.layoutData=i,l._textModelResolverService=r,l._instantiationService=s,l._peekViewService=a,l._uriLabel=c,l._disposeOnNewModel=[],l._callOnDispose=[],l._onDidSelectReference=new Ke.a,l._dim={height:0,width:0},l._applyTheme(o.getTheme()),l._callOnDispose.push(o.onThemeChange(l._applyTheme.bind(l))),l._peekViewService.addExclusiveWidget(t,l),l.create(),l}return Zs(t,e),t.prototype.dispose=function(){this.setModel(void 0),this._callOnDispose=Object(z.d)(this._callOnDispose),Object(z.d)(this._preview,this._previewNotAvailableMessage,this._tree,this._previewModelReference),this._splitView.dispose(),e.prototype.dispose.call(this)},t.prototype._applyTheme=function(e){var t=e.getColor(sa)||Vt.a.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(ia)||Vt.a.transparent,primaryHeadingColor:e.getColor(oa),secondaryHeadingColor:e.getColor(ra)})},Object.defineProperty(t.prototype,"onDidSelectReference",{get:function(){return this._onDidSelectReference.event},enumerable:!0,configurable:!0}),t.prototype.show=function(t){this.editor.revealRangeInCenterIfOutsideViewport(t,0),e.prototype.show.call(this,t,this.layoutData.heightInLines||18)},t.prototype.focus=function(){this._tree.domFocus()},t.prototype._onTitleClick=function(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})},t.prototype._fillBody=function(e){var t=this;this.setCssClass("reference-zone-widget"),this._messageContainer=st.m(e,st.a("div.messages")),st.B(this._messageContainer),this._splitView=new Gs(e,{orientation:1}),this._previewContainer=st.m(e,st.a("div.preview.inline"));this._preview=this._instantiationService.createInstance(Gr,this._previewContainer,{scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}},this.editor),st.B(this._previewContainer),this._previewNotAvailableMessage=$.b.createFromString(V.a("missingPreviewMessage","no preview available")),this._treeContainer=st.m(e,st.a("div.ref-tree.inline"));var n={ariaLabel:V.a("treeAriaLabel","References"),keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new Vs,keyboardNavigationLabelProvider:this._instantiationService.createInstance(Ts),identityProvider:new As};this._tree=this._instantiationService.createInstance(Hs.c,this._treeContainer,new Rs,[this._instantiationService.createInstance(Fs),this._instantiationService.createInstance(Ws)],this._instantiationService.createInstance(Ps),n),ta.bindTo(this._tree.contextKeyService),this._splitView.addView({onDidChange:Ke.b.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:function(e){t._preview.layout({height:t._dim.height,width:e})}},Is.Distribute),this._splitView.addView({onDidChange:Ke.b.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:function(e){t._treeContainer.style.height=t._dim.height+"px",t._treeContainer.style.width=e+"px",t._tree.layout(t._dim.height,e)}},Is.Distribute),this._splitView.onDidSashChange(function(){t._dim.width&&(t.layoutData.ratio=t._splitView.getViewSize(0)/t._dim.width)},void 0,this._disposables);var i=function(e,n){e instanceof cs&&("show"===n&&t._revealReference(e,!1),t._onDidSelectReference.fire({element:e,kind:n,source:"tree"}))};this._tree.onDidChangeFocus(function(e){i(e.elements[0],"show")}),this._tree.onDidChangeSelection(function(e){var t=!1;e.browserEvent instanceof KeyboardEvent&&(t=!0),i(e.elements[0],t?"goto":"show")}),this._tree.onDidOpen(function(e){var t=e.browserEvent instanceof MouseEvent&&(e.browserEvent.ctrlKey||e.browserEvent.metaKey||e.browserEvent.altKey),n=!e.browserEvent||e.browserEvent instanceof MouseEvent&&2===e.browserEvent.detail;i(e.elements[0],t?"side":n?"goto":"show")}),st.B(this._treeContainer)},t.prototype._onWidth=function(e){this._dim&&this._doLayoutBody(this._dim.height,e)},t.prototype._doLayoutBody=function(t,n){e.prototype._doLayoutBody.call(this,t,n),this._dim={height:t,width:n},this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(n),this._splitView.resizeView(0,n*this.layoutData.ratio)},t.prototype.setSelection=function(e){var t=this;return this._revealReference(e,!0).then(function(){t._model&&(t._tree.setSelection([e]),t._tree.setFocus([e]))})},t.prototype.setModel=function(e){return this._disposeOnNewModel=Object(z.d)(this._disposeOnNewModel),this._model=e,this._model?this._onNewModel():Promise.resolve()},t.prototype._onNewModel=function(){var e=this;return this._model?this._model.empty?(this.setTitle(""),this._messageContainer.innerHTML=V.a("noResults","No results"),st.O(this._messageContainer),Promise.resolve(void 0)):(st.B(this._messageContainer),this._decorationsManager=new Qs(this._preview,this._model),this._disposeOnNewModel.push(this._decorationsManager),this._disposeOnNewModel.push(this._model.onDidChangeReferenceRange(function(t){return e._tree.rerender(t)})),this._disposeOnNewModel.push(this._preview.onMouseDown(function(t){var n=t.event,i=t.target;if(2===n.detail){var o=e._getFocusedReference();o&&e._onDidSelectReference.fire({element:{uri:o.uri,range:i.range},kind:n.ctrlKey||n.metaKey||n.altKey?"side":"open",source:"editor"})}})),st.f(this.container,"results-loaded"),st.O(this._treeContainer),st.O(this._previewContainer),this._splitView.layout(this._dim.width),this.focus(),this._tree.setInput(1===this._model.groups.length?this._model.groups[0]:this._model)):Promise.resolve(void 0)},t.prototype._getFocusedReference=function(){var e=this._tree.getFocus()[0];return e instanceof cs?e:e instanceof us&&e.children.length>0?e.children[0]:void 0},t.prototype._revealReference=function(e,t){return Js(this,void 0,void 0,function(){var n,i,o,r,s;return Xs(this,function(a){switch(a.label){case 0:return this._revealedReference===e?[2]:(this._revealedReference=e,e.uri.scheme!==rs.a.inMemory?this.setTitle(Object(ss.c)(e.uri),this._uriLabel.getUriLabel(Object(ss.d)(e.uri))):this.setTitle(V.a("peekView.alternateTitle","References")),n=this._textModelResolverService.createModelReference(e.uri),this._tree.getInput()!==e.parent?[3,1]:(this._tree.reveal(e),[3,3]));case 1:return t&&this._tree.reveal(e.parent),[4,this._tree.expand(e.parent)];case 2:a.sent(),this._tree.reveal(e),a.label=3;case 3:return[4,n];case 4:return i=a.sent(),this._model?(Object(z.d)(this._previewModelReference),(o=i.object)?(r=this._preview.getModel()===o.textEditorModel?0:1,s=se.a.lift(e.range).collapseToStart(),this._previewModelReference=i,this._preview.setModel(o.textEditorModel),this._preview.setSelection(s),this._preview.revealRangeInCenter(s,r)):(this._preview.setModel(this._previewNotAvailableMessage),i.dispose()),[2]):(i.dispose(),[2])}})})},t=$s([Ys(3,X.c),Ys(4,as.a),Ys(5,oo.a),Ys(6,ns),Ys(7,bs.a)],t)}(os),ia=Object(J.zb)("peekViewTitle.background",{dark:"#1E1E1E",light:"#FFFFFF",hc:"#0C141F"},V.a("peekViewTitleBackground","Background color of the peek view title area.")),oa=Object(J.zb)("peekViewTitleLabel.foreground",{dark:"#FFFFFF",light:"#333333",hc:"#FFFFFF"},V.a("peekViewTitleForeground","Color of the peek view title.")),ra=Object(J.zb)("peekViewTitleDescription.foreground",{dark:"#ccccccb3",light:"#6c6c6cb3",hc:"#FFFFFF99"},V.a("peekViewTitleInfoForeground","Color of the peek view title info.")),sa=Object(J.zb)("peekView.border",{dark:"#007acc",light:"#007acc",hc:J.e},V.a("peekViewBorder","Color of the peek view borders and arrow.")),aa=Object(J.zb)("peekViewResult.background",{dark:"#252526",light:"#F3F3F3",hc:Vt.a.black},V.a("peekViewResultsBackground","Background color of the peek view result list.")),ca=Object(J.zb)("peekViewResult.lineForeground",{dark:"#bbbbbb",light:"#646465",hc:Vt.a.white},V.a("peekViewResultsMatchForeground","Foreground color for line nodes in the peek view result list.")),la=Object(J.zb)("peekViewResult.fileForeground",{dark:Vt.a.white,light:"#1E1E1E",hc:Vt.a.white},V.a("peekViewResultsFileForeground","Foreground color for file nodes in the peek view result list.")),ua=Object(J.zb)("peekViewResult.selectionBackground",{dark:"#3399ff33",light:"#3399ff33",hc:null},V.a("peekViewResultsSelectionBackground","Background color of the selected entry in the peek view result list.")),da=Object(J.zb)("peekViewResult.selectionForeground",{dark:Vt.a.white,light:"#6C6C6C",hc:Vt.a.white},V.a("peekViewResultsSelectionForeground","Foreground color of the selected entry in the peek view result list.")),ha=Object(J.zb)("peekViewEditor.background",{dark:"#001F33",light:"#F2F8FC",hc:Vt.a.black},V.a("peekViewEditorBackground","Background color of the peek view editor.")),pa=Object(J.zb)("peekViewEditorGutter.background",{dark:ha,light:ha,hc:ha},V.a("peekViewEditorGutterBackground","Background color of the gutter in the peek view editor.")),ga=Object(J.zb)("peekViewResult.matchHighlightBackground",{dark:"#ea5c004d",light:"#ea5c004d",hc:null},V.a("peekViewResultsMatchHighlight","Match highlight color in the peek view result list.")),fa=Object(J.zb)("peekViewEditor.matchHighlightBackground",{dark:"#ff8f0099",light:"#f5d802de",hc:null},V.a("peekViewEditorMatchHighlight","Match highlight color in the peek view editor.")),ma=Object(J.zb)("peekViewEditor.matchHighlightBorder",{dark:null,light:null,hc:J.b},V.a("peekViewEditorMatchHighlightBorder","Match highlight border in the peek view editor."));Object(X.e)(function(e,t){var n=e.getColor(ga);n&&t.addRule(".monaco-editor .reference-zone-widget .ref-tree .referenceMatch { background-color: "+n+"; }");var i=e.getColor(fa);i&&t.addRule(".monaco-editor .reference-zone-widget .preview .reference-decoration { background-color: "+i+"; }");var o=e.getColor(ma);o&&t.addRule(".monaco-editor .reference-zone-widget .preview .reference-decoration { border: 2px solid "+o+"; box-sizing: border-box; }");var r=e.getColor(J.b);r&&t.addRule(".monaco-editor .reference-zone-widget .ref-tree .referenceMatch { border: 1px dotted "+r+"; box-sizing: border-box; }");var s=e.getColor(aa);s&&t.addRule(".monaco-editor .reference-zone-widget .ref-tree { background-color: "+s+"; }");var a=e.getColor(ca);a&&t.addRule(".monaco-editor .reference-zone-widget .ref-tree { color: "+a+"; }");var c=e.getColor(la);c&&t.addRule(".monaco-editor .reference-zone-widget .ref-tree .reference-file { color: "+c+"; }");var l=e.getColor(ua);l&&t.addRule(".monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) { background-color: "+l+"; }");var u=e.getColor(da);u&&t.addRule(".monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) { color: "+u+" !important; }");var d=e.getColor(ha);d&&t.addRule(".monaco-editor .reference-zone-widget .preview .monaco-editor .monaco-editor-background,.monaco-editor .reference-zone-widget .preview .monaco-editor .inputarea.ime-input {\tbackground-color: "+d+";}");var h=e.getColor(pa);h&&t.addRule(".monaco-editor .reference-zone-widget .preview .monaco-editor .margin {\tbackground-color: "+h+";}")});var _a=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},va=function(e,t){return function(n,i){t(n,i,e)}},ba=function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function s(e){try{c(i.next(e))}catch(t){r(t)}}function a(e){try{c(i.throw(e))}catch(t){r(t)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((i=i.apply(e,t||[])).next())})},ya=function(e,t){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(a){r=[6,a],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},wa=new Pe.f("referenceSearchVisible",!1),Ca=function(){function e(e,t,n,i,o,r,s,a){this._defaultTreeKeyboardSupport=e,this._editorService=i,this._notificationService=o,this._instantiationService=r,this._storageService=s,this._configurationService=a,this._requestIdPool=0,this._disposables=[],this._ignoreModelChangeEvent=!1,this._editor=t,this._referenceSearchVisible=wa.bindTo(n)}return e.get=function(t){return t.getContribution(e.ID)},e.prototype.getId=function(){return e.ID},e.prototype.dispose=function(){this._referenceSearchVisible.reset(),Object(z.d)(this._disposables),this._widget&&(Object(z.d)(this._widget),this._widget=null),this._model&&(Object(z.d)(this._model),this._model=null)},e.prototype.toggleWidget=function(e,t,n){var i,o=this;if(this._widget&&(i=this._widget.position),this.closeWidget(),!i||!e.containsPosition(i)){this._referenceSearchVisible.set(!0),this._disposables.push(this._editor.onDidChangeModelLanguage(function(){o.closeWidget()})),this._disposables.push(this._editor.onDidChangeModel(function(){o._ignoreModelChangeEvent||o.closeWidget()}));var r=ea.fromJSON(this._storageService.get("peekViewLayout",0,"{}"));this._widget=this._instantiationService.createInstance(na,this._editor,this._defaultTreeKeyboardSupport,r),this._widget.setTitle(V.a("labelLoading","Loading...")),this._widget.show(e),this._disposables.push(this._widget.onDidClose(function(){t.cancel(),o._widget&&(o._storageService.store("peekViewLayout",JSON.stringify(o._widget.layoutData),0),o._widget=null),o.closeWidget()})),this._disposables.push(this._widget.onDidSelectReference(function(e){var t=e.element,i=e.kind;switch(i){case"open":if("editor"===e.source&&o._configurationService.getValue("editor.stablePeek"))break;case"side":t&&o.openReference(t,"side"===i);break;case"goto":t&&(n.onGoto?n.onGoto(t):o._gotoReference(t))}}));var s=++this._requestIdPool;t.then(function(t){if(s===o._requestIdPool&&o._widget)return o._model&&o._model.dispose(),o._model=t,o._widget.setModel(o._model).then(function(){if(o._widget&&o._model&&o._editor.hasModel()){o._widget.setMetaTitle(n.getMetaTitle(o._model));var t=o._editor.getModel().uri,i=new K.a(e.startLineNumber,e.startColumn),r=o._model.nearestReference(t,i);if(r)return o._widget.setSelection(r)}})},function(e){o._notificationService.error(e)})}},e.prototype.goToNextOrPreviousReference=function(e){return ba(this,void 0,void 0,function(){var t,n,i,o;return ya(this,function(r){switch(r.label){case 0:return this._editor.hasModel()&&this._model&&this._widget&&((t=this._widget.position)&&(n=this._model.nearestReference(this._editor.getModel().uri,t)))?(i=this._model.nextOrPreviousReference(n,e),o=this._editor.hasTextFocus(),[4,this._widget.setSelection(i)]):[2];case 1:return r.sent(),[4,this._gotoReference(i)];case 2:return r.sent(),o&&this._editor.focus(),[2]}})})},e.prototype.closeWidget=function(){this._widget&&(Object(z.d)(this._widget),this._widget=null),this._referenceSearchVisible.reset(),this._disposables=Object(z.d)(this._disposables),this._model&&(Object(z.d)(this._model),this._model=null),this._editor.focus(),this._requestIdPool+=1},e.prototype._gotoReference=function(e){var t=this;this._widget&&this._widget.hide(),this._ignoreModelChangeEvent=!0;var n=se.a.lift(e.range).collapseToStart();return this._editorService.openCodeEditor({resource:e.uri,options:{selection:n}},this._editor).then(function(e){t._ignoreModelChangeEvent=!1,e&&e===t._editor?t._widget&&(t._widget.show(n),t._widget.focus()):t.closeWidget()},function(e){t._ignoreModelChangeEvent=!1,Object($e.e)(e)})},e.prototype.openReference=function(e,t){t||this.closeWidget();var n=e.uri,i=e.range;this._editorService.openCodeEditor({resource:n,options:{selection:i}},this._editor,t)},e.ID="editor.contrib.referencesController",e=_a([va(2,Pe.e),va(3,be.a),va(4,At.a),va(5,oo.a),va(6,so.a),va(7,qt.a)],e)}();function Sa(e,t,n,i){var o=n.ordered(e).map(function(n){return Promise.resolve(i(n,e,t)).then(void 0,function(e){Object($e.f)(e)})});return Promise.all(o).then(Ge.k).then(Ge.d)}function xa(e,t,n){return Sa(e,t,qe.f,function(e,t,i){return e.provideDefinition(t,i,n)})}function Oa(e,t,n){return Sa(e,t,qe.e,function(e,t,i){return e.provideDeclaration(t,i,n)})}function ka(e,t,n){return Sa(e,t,qe.o,function(e,t,i){return e.provideImplementation(t,i,n)})}function Da(e,t,n){return Sa(e,t,qe.z,function(e,t,i){return e.provideTypeDefinition(t,i,n)})}Object(U.e)("_executeDefinitionProvider",function(e,t){return xa(e,t,Ze.a.None)}),Object(U.e)("_executeDeclarationProvider",function(e,t){return Oa(e,t,Ze.a.None)}),Object(U.e)("_executeImplementationProvider",function(e,t){return ka(e,t,Ze.a.None)}),Object(U.e)("_executeTypeDefinitionProvider",function(e,t){return Da(e,t,Ze.a.None)});var Ia=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Na=function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function s(e){try{c(i.next(e))}catch(t){r(t)}}function a(e){try{c(i.throw(e))}catch(t){r(t)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((i=i.apply(e,t||[])).next())})},La=function(e,t){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(a){r=[6,a],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},Ma=function(){return function(e,t,n,i){void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===n&&(n=!0),void 0===i&&(i=!0),this.openToSide=e,this.openInPeek=t,this.filterCurrent=n,this.showMessage=i}}(),Ea=function(e){function t(t,n){var i=e.call(this,n)||this;return i._configuration=t,i}return Ia(t,e),t.prototype.run=function(e,t){var n=this;if(!t.hasModel())return Promise.resolve(void 0);var i=e.get(At.a),o=e.get(be.a),r=e.get(Ue.a),s=t.getModel(),a=t.getPosition(),c=new Qe.b(t,5),l=this._getTargetLocationForPosition(s,a,c.token).then(function(e){return Na(n,void 0,void 0,function(){var n,i,r,l,u,d,h,p;return La(this,function(g){if(c.token.isCancellationRequested||s.isDisposed()||t.getModel()!==s)return[2];for(n=-1,i=[],r=0,l=e;r<l.length;r++)(u=l[r])&&u.range&&(d=i.push(u),this._configuration.filterCurrent&&u.uri.toString()===s.uri.toString()&&se.a.containsPosition(u.range,a)&&-1===n&&(n=d-1));return 0!==i.length?1===i.length&&-1!==n?(p=i[0],[2,this._openReference(t,o,p,!1).then(function(){})]):[2,this._onResult(o,t,new ds(i))]:(this._configuration.showMessage&&(h=s.getWordAtPosition(a),je.get(t).showMessage(this._getNoResultFoundMessage(h),a)),[2])})})},function(e){i.error(e)}).finally(function(){c.dispose()});return r.showWhile(l,250),l},t.prototype._getTargetLocationForPosition=function(e,t,n){return xa(e,t,n)},t.prototype._getNoResultFoundMessage=function(e){return e&&e.word?V.a("noResultWord","No definition found for '{0}'",e.word):V.a("generic.noResults","No definition found")},t.prototype._getMetaTitle=function(e){return e.references.length>1?V.a("meta.title"," \u2013 {0} definitions",e.references.length):""},t.prototype._onResult=function(e,t,n){return Na(this,void 0,void 0,function(){var i,o,r,s;return La(this,function(a){switch(a.label){case 0:return i=n.getAriaMessage(),Object(Ee.a)(i),o=t.getConfiguration().contribInfo.gotoLocation,this._configuration.openInPeek||"peek"===o.multiple&&n.references.length>1?(this._openInPeek(e,t,n),[3,3]):[3,1];case 1:return t.hasModel()?(r=n.firstReference())?[4,this._openReference(t,e,r,this._configuration.openToSide)]:[2]:[3,3];case 2:(s=a.sent())&&n.references.length>1&&"gotoAndPeek"===o.multiple?this._openInPeek(e,s,n):n.dispose(),a.label=3;case 3:return[2]}})})},t.prototype._openReference=function(e,t,n,i){var o=void 0;return Object(qe.C)(n)&&(o=n.targetSelectionRange),o||(o=n.range),t.openCodeEditor({resource:n.uri,options:{selection:se.a.collapseToStart(o),revealIfOpened:!0,revealInCenterIfOutsideViewport:!0}},e,i)},t.prototype._openInPeek=function(e,t,n){var i=this,o=Ca.get(t);o&&t.hasModel()?o.toggleWidget(t.getSelection(),Object(H.f)(function(e){return Promise.resolve(n)}),{getMetaTitle:function(e){return i._getMetaTitle(e)},onGoto:function(n){return o.closeWidget(),i._openReference(t,e,n,!1)}}):n.dispose()},t}(U.b),Pa=_e.f?2118:70,Ra=function(e){function t(){var n=e.call(this,new Ma,{id:t.id,label:V.a("actions.goToDecl.label","Go to Definition"),alias:"Go to Definition",precondition:Pe.d.and(G.a.hasDefinitionProvider,G.a.isInEmbeddedEditor.toNegated()),kbOpts:{kbExpr:G.a.editorTextFocus,primary:Pa,weight:100},menuOpts:{group:"navigation",order:1.1}})||this;return We.a.registerCommandAlias("editor.action.goToDeclaration",t.id),n}return Ia(t,e),t.id="editor.action.revealDefinition",t}(Ea),Ta=function(e){function t(){var n=e.call(this,new Ma(!0),{id:t.id,label:V.a("actions.goToDeclToSide.label","Open Definition to the Side"),alias:"Open Definition to the Side",precondition:Pe.d.and(G.a.hasDefinitionProvider,G.a.isInEmbeddedEditor.toNegated()),kbOpts:{kbExpr:G.a.editorTextFocus,primary:Object(Yt.a)(2089,Pa),weight:100}})||this;return We.a.registerCommandAlias("editor.action.openDeclarationToTheSide",t.id),n}return Ia(t,e),t.id="editor.action.revealDefinitionAside",t}(Ea),Aa=function(e){function t(){var n=e.call(this,new Ma(void 0,!0,!1),{id:t.id,label:V.a("actions.previewDecl.label","Peek Definition"),alias:"Peek Definition",precondition:Pe.d.and(G.a.hasDefinitionProvider,Vr.notInPeekEditor,G.a.isInEmbeddedEditor.toNegated()),kbOpts:{kbExpr:G.a.editorTextFocus,primary:582,linux:{primary:3140},weight:100},menuOpts:{group:"navigation",order:1.2}})||this;return We.a.registerCommandAlias("editor.action.previewDeclaration",t.id),n}return Ia(t,e),t.id="editor.action.peekDefinition",t}(Ea),ja=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ia(t,e),t.prototype._getTargetLocationForPosition=function(e,t,n){return Oa(e,t,n)},t.prototype._getNoResultFoundMessage=function(e){return e&&e.word?V.a("decl.noResultWord","No declaration found for '{0}'",e.word):V.a("decl.generic.noResults","No declaration found")},t.prototype._getMetaTitle=function(e){return e.references.length>1?V.a("decl.meta.title"," \u2013 {0} declarations",e.references.length):""},t}(Ea),Fa=function(e){function t(){return e.call(this,new Ma,{id:t.id,label:V.a("actions.goToDeclaration.label","Go to Declaration"),alias:"Go to Declaration",precondition:Pe.d.and(G.a.hasDeclarationProvider,G.a.isInEmbeddedEditor.toNegated()),menuOpts:{group:"navigation",order:1.3}})||this}return Ia(t,e),t.prototype._getNoResultFoundMessage=function(e){return e&&e.word?V.a("decl.noResultWord","No declaration found for '{0}'",e.word):V.a("decl.generic.noResults","No declaration found")},t.prototype._getMetaTitle=function(e){return e.references.length>1?V.a("decl.meta.title"," \u2013 {0} declarations",e.references.length):""},t.id="editor.action.revealDeclaration",t}(ja),Ba=function(e){function t(){return e.call(this,new Ma(void 0,!0,!1),{id:"editor.action.peekDeclaration",label:V.a("actions.peekDecl.label","Peek Declaration"),alias:"Peek Declaration",precondition:Pe.d.and(G.a.hasDeclarationProvider,Vr.notInPeekEditor,G.a.isInEmbeddedEditor.toNegated()),menuOpts:{group:"navigation",order:1.31}})||this}return Ia(t,e),t}(ja),Wa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ia(t,e),t.prototype._getTargetLocationForPosition=function(e,t,n){return ka(e,t,n)},t.prototype._getNoResultFoundMessage=function(e){return e&&e.word?V.a("goToImplementation.noResultWord","No implementation found for '{0}'",e.word):V.a("goToImplementation.generic.noResults","No implementation found")},t.prototype._getMetaTitle=function(e){return e.references.length>1?V.a("meta.implementations.title"," \u2013 {0} implementations",e.references.length):""},t}(Ea),Va=function(e){function t(){return e.call(this,new Ma,{id:t.ID,label:V.a("actions.goToImplementation.label","Go to Implementation"),alias:"Go to Implementation",precondition:Pe.d.and(G.a.hasImplementationProvider,G.a.isInEmbeddedEditor.toNegated()),kbOpts:{kbExpr:G.a.editorTextFocus,primary:2118,weight:100}})||this}return Ia(t,e),t.ID="editor.action.goToImplementation",t}(Wa),Ha=function(e){function t(){return e.call(this,new Ma(!1,!0,!1),{id:t.ID,label:V.a("actions.peekImplementation.label","Peek Implementation"),alias:"Peek Implementation",precondition:Pe.d.and(G.a.hasImplementationProvider,G.a.isInEmbeddedEditor.toNegated()),kbOpts:{kbExpr:G.a.editorTextFocus,primary:3142,weight:100}})||this}return Ia(t,e),t.ID="editor.action.peekImplementation",t}(Wa),za=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ia(t,e),t.prototype._getTargetLocationForPosition=function(e,t,n){return Da(e,t,n)},t.prototype._getNoResultFoundMessage=function(e){return e&&e.word?V.a("goToTypeDefinition.noResultWord","No type definition found for '{0}'",e.word):V.a("goToTypeDefinition.generic.noResults","No type definition found")},t.prototype._getMetaTitle=function(e){return e.references.length>1?V.a("meta.typeDefinitions.title"," \u2013 {0} type definitions",e.references.length):""},t}(Ea),Ua=function(e){function t(){return e.call(this,new Ma,{id:t.ID,label:V.a("actions.goToTypeDefinition.label","Go to Type Definition"),alias:"Go to Type Definition",precondition:Pe.d.and(G.a.hasTypeDefinitionProvider,G.a.isInEmbeddedEditor.toNegated()),kbOpts:{kbExpr:G.a.editorTextFocus,primary:0,weight:100},menuOpts:{group:"navigation",order:1.4}})||this}return Ia(t,e),t.ID="editor.action.goToTypeDefinition",t}(za),Ka=function(e){function t(){return e.call(this,new Ma(!1,!0,!1),{id:t.ID,label:V.a("actions.peekTypeDefinition.label","Peek Type Definition"),alias:"Peek Type Definition",precondition:Pe.d.and(G.a.hasTypeDefinitionProvider,G.a.isInEmbeddedEditor.toNegated()),kbOpts:{kbExpr:G.a.editorTextFocus,primary:0,weight:100}})||this}return Ia(t,e),t.ID="editor.action.peekTypeDefinition",t}(za);Object(U.f)(Ra),Object(U.f)(Ta),Object(U.f)(Aa),Object(U.f)(Fa),Object(U.f)(Ba),Object(U.f)(Va),Object(U.f)(Ha),Object(U.f)(Ua),Object(U.f)(Ka),Q.c.appendMenuItem(16,{group:"4_symbol_nav",command:{id:"editor.action.goToDeclaration",title:V.a({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},order:2}),Q.c.appendMenuItem(16,{group:"4_symbol_nav",command:{id:"editor.action.goToTypeDefinition",title:V.a({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},order:3}),Q.c.appendMenuItem(16,{group:"4_symbol_nav",command:{id:"editor.action.goToImplementation",title:V.a({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementation")},order:4});n(223);var qa=n(141),Ga=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function Za(e,t){return!!e[t]}var $a=function(){return function(e,t){this.target=e.target,this.hasTriggerModifier=Za(e.event,t.triggerModifier),this.hasSideBySideModifier=Za(e.event,t.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=me.j||e.event.detail<=1}}(),Ya=function(){return function(e,t){this.keyCodeIsTriggerKey=e.keyCode===t.triggerKey,this.keyCodeIsSideBySideKey=e.keyCode===t.triggerSideBySideKey,this.hasTriggerModifier=Za(e,t.triggerModifier)}}(),Ja=function(){function e(e,t,n,i){this.triggerKey=e,this.triggerModifier=t,this.triggerSideBySideKey=n,this.triggerSideBySideModifier=i}return e.prototype.equals=function(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier},e}();function Xa(e){return"altKey"===e?_e.d?new Ja(57,"metaKey",6,"altKey"):new Ja(5,"ctrlKey",6,"altKey"):_e.d?new Ja(6,"altKey",57,"metaKey"):new Ja(6,"altKey",5,"ctrlKey")}var Qa=function(e){function t(t){var n=e.call(this)||this;return n._onMouseMoveOrRelevantKeyDown=n._register(new Ke.a),n.onMouseMoveOrRelevantKeyDown=n._onMouseMoveOrRelevantKeyDown.event,n._onExecute=n._register(new Ke.a),n.onExecute=n._onExecute.event,n._onCancel=n._register(new Ke.a),n.onCancel=n._onCancel.event,n._editor=t,n._opts=Xa(n._editor.getConfiguration().multiCursorModifier),n.lastMouseMoveEvent=null,n.hasTriggerKeyOnMouseDown=!1,n._register(n._editor.onDidChangeConfiguration(function(e){if(e.multiCursorModifier){var t=Xa(n._editor.getConfiguration().multiCursorModifier);if(n._opts.equals(t))return;n._opts=t,n.lastMouseMoveEvent=null,n.hasTriggerKeyOnMouseDown=!1,n._onCancel.fire()}})),n._register(n._editor.onMouseMove(function(e){return n.onEditorMouseMove(new $a(e,n._opts))})),n._register(n._editor.onMouseDown(function(e){return n.onEditorMouseDown(new $a(e,n._opts))})),n._register(n._editor.onMouseUp(function(e){return n.onEditorMouseUp(new $a(e,n._opts))})),n._register(n._editor.onKeyDown(function(e){return n.onEditorKeyDown(new Ya(e,n._opts))})),n._register(n._editor.onKeyUp(function(e){return n.onEditorKeyUp(new Ya(e,n._opts))})),n._register(n._editor.onMouseDrag(function(){return n.resetHandler()})),n._register(n._editor.onDidChangeCursorSelection(function(e){return n.onDidChangeCursorSelection(e)})),n._register(n._editor.onDidChangeModel(function(e){return n.resetHandler()})),n._register(n._editor.onDidChangeModelContent(function(){return n.resetHandler()})),n._register(n._editor.onDidScrollChange(function(e){(e.scrollTopChanged||e.scrollLeftChanged)&&n.resetHandler()})),n}return Ga(t,e),t.prototype.onDidChangeCursorSelection=function(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this.resetHandler()},t.prototype.onEditorMouseMove=function(e){this.lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])},t.prototype.onEditorMouseDown=function(e){this.hasTriggerKeyOnMouseDown=e.hasTriggerModifier},t.prototype.onEditorMouseUp=function(e){this.hasTriggerKeyOnMouseDown&&this._onExecute.fire(e)},t.prototype.onEditorKeyDown=function(e){this.lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this.lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()},t.prototype.onEditorKeyUp=function(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()},t.prototype.resetHandler=function(){this.lastMouseMoveEvent=null,this.hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()},t}(z.a),ec=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},tc=function(e,t){return function(n,i){t(n,i,e)}},nc=function(){function e(e,t,n){var i=this;this.textModelResolverService=t,this.modeService=n,this.toUnhook=[],this.decorations=[],this.editor=e,this.previousPromise=null;var o=new Qa(e);this.toUnhook.push(o),this.toUnhook.push(o.onMouseMoveOrRelevantKeyDown(function(e){var t=e[0],n=e[1];i.startFindDefinition(t,Object(Oo.l)(n))})),this.toUnhook.push(o.onExecute(function(e){i.isEnabled(e)&&i.gotoDefinition(e.target,e.hasSideBySideModifier).then(function(){i.removeDecorations()},function(e){i.removeDecorations(),Object($e.e)(e)})})),this.toUnhook.push(o.onCancel(function(){i.removeDecorations(),i.currentWordUnderMouse=null}))}return e.prototype.startFindDefinition=function(e,t){var n=this;if(!(9===e.target.type&&this.decorations.length>0)){if(!this.editor.hasModel()||!this.isEnabled(e,t))return this.currentWordUnderMouse=null,void this.removeDecorations();var i=e.target.position?this.editor.getModel().getWordAtPosition(e.target.position):null;if(!i)return this.currentWordUnderMouse=null,void this.removeDecorations();var o=e.target.position;if(!this.currentWordUnderMouse||this.currentWordUnderMouse.startColumn!==i.startColumn||this.currentWordUnderMouse.endColumn!==i.endColumn||this.currentWordUnderMouse.word!==i.word){this.currentWordUnderMouse=i;var r=new Qe.a(this.editor,15);this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=Object(H.f)(function(t){return n.findDefinition(e.target,t)}),this.previousPromise.then(function(e){if(e&&e.length&&r.validate(n.editor))if(e.length>1)n.addDecoration(new se.a(o.lineNumber,i.startColumn,o.lineNumber,i.endColumn),(new oi).appendText(V.a("multipleResults","Click to show {0} definitions.",e.length)));else{var t=e[0];if(!t.uri)return;n.textModelResolverService.createModelReference(t.uri).then(function(e){if(e.object&&e.object.textEditorModel){var r=e.object.textEditorModel,s=t.range.startLineNumber;if(s<1||s>r.getLineCount())e.dispose();else{var a,c=n.getPreviewValue(r,s);a=t.originSelectionRange?se.a.lift(t.originSelectionRange):new se.a(o.lineNumber,i.startColumn,o.lineNumber,i.endColumn);var l=n.modeService.getModeIdByFilepathOrFirstLine(r.uri.fsPath);n.addDecoration(a,(new oi).appendCodeblock(l||"",c)),e.dispose()}}else e.dispose()})}else n.removeDecorations()}).then(void 0,$e.e)}}},e.prototype.getPreviewValue=function(t,n){var i=this.getPreviewRangeBasedOnBrackets(t,n);return i.endLineNumber-i.startLineNumber>=e.MAX_SOURCE_PREVIEW_LINES&&(i=this.getPreviewRangeBasedOnIndentation(t,n)),this.stripIndentationFromPreviewRange(t,n,i)},e.prototype.stripIndentationFromPreviewRange=function(e,t,n){for(var i=e.getLineFirstNonWhitespaceColumn(t),o=t+1;o<n.endLineNumber;o++){var r=e.getLineFirstNonWhitespaceColumn(o);i=Math.min(i,r)}return e.getValueInRange(n).replace(new RegExp("^\\s{"+(i-1)+"}","gm"),"").trim()},e.prototype.getPreviewRangeBasedOnIndentation=function(t,n){for(var i=t.getLineFirstNonWhitespaceColumn(n),o=Math.min(t.getLineCount(),n+e.MAX_SOURCE_PREVIEW_LINES),r=n+1;r<o;r++){if(i===t.getLineFirstNonWhitespaceColumn(r))break}return new se.a(n,1,r+1,1)},e.prototype.getPreviewRangeBasedOnBrackets=function(t,n){for(var i=Math.min(t.getLineCount(),n+e.MAX_SOURCE_PREVIEW_LINES),o=[],r=!0,s=t.findNextBracket(new K.a(n,1));null!==s;){if(0===o.length)o.push(s);else{var a=o[o.length-1];if(a.open===s.open&&a.isOpen&&!s.isOpen?o.pop():o.push(s),0===o.length){if(!r)return new se.a(n,1,s.range.endLineNumber+1,1);r=!1}}var c=t.getLineMaxColumn(n),l=s.range.endLineNumber,u=s.range.endColumn;if(c===s.range.endColumn&&(l++,u=1),l>i)return new se.a(n,1,i+1,1);s=t.findNextBracket(new K.a(l,u))}return new se.a(n,1,i+1,1)},e.prototype.addDecoration=function(e,t){var n={range:e,options:{inlineClassName:"goto-definition-link",hoverMessage:t}};this.decorations=this.editor.deltaDecorations(this.decorations,[n])},e.prototype.removeDecorations=function(){this.decorations.length>0&&(this.decorations=this.editor.deltaDecorations(this.decorations,[]))},e.prototype.isEnabled=function(e,t){return this.editor.hasModel()&&e.isNoneOrSingleMouseDown&&6===e.target.type&&(e.hasTriggerModifier||!!t&&t.keyCodeIsTriggerKey)&&qe.f.has(this.editor.getModel())},e.prototype.findDefinition=function(e,t){var n=this.editor.getModel();return n?xa(n,e.position,t):Promise.resolve(null)},e.prototype.gotoDefinition=function(e,t){var n=this;this.editor.setPosition(e.position);var i=new Ea(new Ma(t,!1,!0,!1),{alias:"",label:"",id:"",precondition:null});return this.editor.invokeWithinContext(function(e){return i.run(e,n.editor)})},e.prototype.getId=function(){return e.ID},e.prototype.dispose=function(){this.toUnhook=Object(z.d)(this.toUnhook)},e.ID="editor.contrib.gotodefinitionwithmouse",e.MAX_SOURCE_PREVIEW_LINES=8,e=ec([tc(1,as.a),tc(2,qa.a)],e)}();Object(U.h)(nc),Object(X.e)(function(e,t){var n=e.getColor(J.n);n&&t.addRule(".monaco-editor .goto-definition-link { color: "+n+" !important; }")});n(280);var ic=n(129),oc=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),rc=function(){function e(e,t,n){var i=this;this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=[],this._editor=t;var o=document.createElement("div");o.className="descriptioncontainer",o.setAttribute("aria-live","assertive"),o.setAttribute("role","alert"),this._messageBlock=document.createElement("div"),st.f(this._messageBlock,"message"),o.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),o.appendChild(this._relatedBlock),this._disposables.push(st.k(this._relatedBlock,"click",function(e){e.preventDefault();var t=i._relatedDiagnostics.get(e.target);t&&n(t)})),this._scrollable=new ic.b(o,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:3,verticalScrollbarSize:3}),e.appendChild(this._scrollable.getDomNode()),this._disposables.push(this._scrollable.onScroll(function(e){o.style.left="-"+e.scrollLeft+"px",o.style.top="-"+e.scrollTop+"px"})),this._disposables.push(this._scrollable)}return e.prototype.dispose=function(){Object(z.d)(this._disposables)},e.prototype.update=function(e){var t=e.source,n=e.message,i=e.relatedInformation,o=e.code,r=n.split(/\r\n|\r|\n/g);this._lines=r.length,this._longestLineLength=0;for(var s=0,a=r;s<a.length;s++){var c=a[s];this._longestLineLength=Math.max(c.length,this._longestLineLength)}st.n(this._messageBlock),this._editor.applyFontInfo(this._messageBlock);for(var l=this._messageBlock,u=0,d=r;u<d.length;u++){c=d[u];(l=document.createElement("div")).innerText=c,""===c&&(l.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(l)}if(t||o){var h=document.createElement("span");if(st.f(h,"details"),l.appendChild(h),t){var p=document.createElement("span");p.innerText=t,st.f(p,"source"),h.appendChild(p)}if(o){var g=document.createElement("span");g.innerText="("+o+")",st.f(g,"code"),h.appendChild(g)}}if(st.n(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),Object(Ge.n)(i)){var f=this._relatedBlock.appendChild(document.createElement("div"));f.style.paddingTop=Math.floor(.66*this._editor.getConfiguration().lineHeight)+"px",this._lines+=1;for(var m=0,_=i;m<_.length;m++){var v=_[m],b=document.createElement("div"),y=document.createElement("a");st.f(y,"filename"),y.innerHTML=Ss(v.resource)+"("+v.startLineNumber+", "+v.startColumn+"): ",y.title=Cs(v.resource,void 0),this._relatedDiagnostics.set(y,v);var w=document.createElement("span");w.innerText=v.message,b.appendChild(y),b.appendChild(w),this._lines+=1,f.appendChild(b)}}var C=this._editor.getConfiguration().fontInfo,S=Math.ceil(C.typicalFullwidthCharacterWidth*this._longestLineLength*.75),x=C.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:S,scrollHeight:x})},e.prototype.layout=function(e,t){this._scrollable.getDomNode().style.height=e+"px",this._scrollable.getDomNode().style.width=t+"px",this._scrollable.setScrollDimensions({width:t,height:e})},e.prototype.getHeightInLines=function(){return Math.min(17,this._lines)},e}(),sc=function(e){function t(t,n,i){var o=e.call(this,t,{showArrow:!0,showFrame:!0,isAccessible:!0})||this;return o.actions=n,o._themeService=i,o._callOnDispose=[],o._onDidSelectRelatedInformation=new Ke.a,o.onDidSelectRelatedInformation=o._onDidSelectRelatedInformation.event,o._severity=ze.c.Warning,o._backgroundColor=Vt.a.white,o._applyTheme(i.getTheme()),o._callOnDispose.push(i.onThemeChange(o._applyTheme.bind(o))),o.create(),o}return oc(t,e),t.prototype._applyTheme=function(e){this._backgroundColor=e.getColor(pc);var t=uc;this._severity===ze.c.Warning?t=dc:this._severity===ze.c.Info&&(t=hc);var n=e.getColor(t);this.style({arrowColor:n,frameColor:n,headerBackgroundColor:this._backgroundColor,primaryHeadingColor:e.getColor(oa),secondaryHeadingColor:e.getColor(ra)})},t.prototype._applyStyles=function(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),e.prototype._applyStyles.call(this)},t.prototype.dispose=function(){this._callOnDispose=Object(z.d)(this._callOnDispose),e.prototype.dispose.call(this)},t.prototype.focus=function(){this._parentContainer.focus()},t.prototype._fillHead=function(t){e.prototype._fillHead.call(this,t),this._actionbarWidget.push(this.actions,{label:!1,icon:!0})},t.prototype._getActionBarOptions=function(){return{orientation:1}},t.prototype._fillBody=function(e){var t=this;this._parentContainer=e,st.f(e,"marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),e.appendChild(this._container),this._message=new rc(this._container,this.editor,function(e){return t._onDidSelectRelatedInformation.fire(e)}),this._disposables.push(this._message)},t.prototype.show=function(e,t){throw new Error("call showAtMarker")},t.prototype.showAtMarker=function(t,n,i){this._container.classList.remove("stale"),this._message.update(t),this._severity=t.severity,this._applyTheme(this._themeService.getTheme());var o=se.a.lift(t),r=this.editor.getPosition(),s=r&&o.containsPosition(r)?r:o.getStartPosition();e.prototype.show.call(this,s,this.computeRequiredHeight());var a=this.editor.getModel();if(a){var c=i>1?V.a("problems","{0} of {1} problems",n,i):V.a("change","{0} of {1} problem",n,i);this.setTitle(Object(ss.b)(a.uri),c)}var l="error";this._severity===ze.c.Warning?l="warning":this._severity===ze.c.Info&&(l="info"),this.setTitleIcon(l),this.editor.revealPositionInCenter(s,0),1!==this.editor.getConfiguration().accessibilitySupport&&this.focus()},t.prototype.updateMarker=function(e){this._container.classList.remove("stale"),this._message.update(e)},t.prototype.showStale=function(){this._container.classList.add("stale"),this._relayout()},t.prototype._doLayoutBody=function(t,n){e.prototype._doLayoutBody.call(this,t,n),this._heightInPixel=t,this._message.layout(t,n),this._container.style.height=t+"px"},t.prototype._onWidth=function(e){this._message.layout(this._heightInPixel,e)},t.prototype._relayout=function(){e.prototype._relayout.call(this,this.computeRequiredHeight())},t.prototype.computeRequiredHeight=function(){return 3+this._message.getHeightInLines()},t}(os),ac=Object(J.tb)(Y.i,Y.h),cc=Object(J.tb)(Y.w,Y.v),lc=Object(J.tb)(Y.n,Y.m),uc=Object(J.zb)("editorMarkerNavigationError.background",{dark:ac,light:ac,hc:ac},V.a("editorMarkerNavigationError","Editor marker navigation widget error color.")),dc=Object(J.zb)("editorMarkerNavigationWarning.background",{dark:cc,light:cc,hc:cc},V.a("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),hc=Object(J.zb)("editorMarkerNavigationInfo.background",{dark:lc,light:lc,hc:lc},V.a("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),pc=Object(J.zb)("editorMarkerNavigation.background",{dark:"#2D2D30",light:Vt.a.white,hc:"#0C141F"},V.a("editorMarkerNavigationBackground","Editor marker navigation widget background."));Object(X.e)(function(e,t){var n=e.getColor(J.Jb);n&&t.addRule(".monaco-editor .marker-widget a { color: "+n+"; }")});var gc=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),fc=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},mc=function(e,t){return function(n,i){t(n,i,e)}},_c=function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function s(e){try{c(i.next(e))}catch(t){r(t)}}function a(e){try{c(i.throw(e))}catch(t){r(t)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((i=i.apply(e,t||[])).next())})},vc=function(e,t){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(a){r=[6,a],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},bc=function(){function e(e,t){var n=this;this._editor=e,this._markers=[],this._nextIdx=-1,this._toUnbind=[],this._ignoreSelectionChange=!1,this._onCurrentMarkerChanged=new Ke.a,this._onMarkerSetChanged=new Ke.a,this.setMarkers(t),this._toUnbind.push(this._editor.onDidDispose(function(){return n.dispose()})),this._toUnbind.push(this._editor.onDidChangeCursorPosition(function(){n._ignoreSelectionChange||n.currentMarker&&n._editor.getPosition()&&se.a.containsPosition(n.currentMarker,n._editor.getPosition())||(n._nextIdx=-1)}))}return Object.defineProperty(e.prototype,"onCurrentMarkerChanged",{get:function(){return this._onCurrentMarkerChanged.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onMarkerSetChanged",{get:function(){return this._onMarkerSetChanged.event},enumerable:!0,configurable:!0}),e.prototype.setMarkers=function(e){var t=this._nextIdx>=0?this._markers[this._nextIdx]:void 0;this._markers=e||[],this._markers.sort(wc.compareMarker),this._nextIdx=t?Math.max(-1,Object(Ge.c)(this._markers,t,wc.compareMarker)):-1,this._onMarkerSetChanged.fire(this)},e.prototype.withoutWatchingEditorPosition=function(e){this._ignoreSelectionChange=!0;try{e()}finally{this._ignoreSelectionChange=!1}},e.prototype._initIdx=function(e){for(var t=!1,n=this._editor.getPosition(),i=0;i<this._markers.length;i++){var o=se.a.lift(this._markers[i]);if(o.isEmpty()&&this._editor.getModel()){var r=this._editor.getModel().getWordAtPosition(o.getStartPosition());r&&(o=new se.a(o.startLineNumber,r.startColumn,o.startLineNumber,r.endColumn))}if(n&&(o.containsPosition(n)||n.isBeforeOrEqual(o.getStartPosition()))){this._nextIdx=i,t=!0;break}}t||(this._nextIdx=e?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)},Object.defineProperty(e.prototype,"currentMarker",{get:function(){return this.canNavigate()?this._markers[this._nextIdx]:void 0},set:function(e){var t=this._nextIdx;this._nextIdx=-1,e&&(this._nextIdx=this.indexOf(e)),this._nextIdx!==t&&this._onCurrentMarkerChanged.fire(e)},enumerable:!0,configurable:!0}),e.prototype.move=function(e,t){if(!this.canNavigate())return this._onCurrentMarkerChanged.fire(void 0),!t;var n=this._nextIdx,i=!1;if(-1===this._nextIdx?this._initIdx(e):e?t||this._nextIdx+1<this._markers.length?this._nextIdx=(this._nextIdx+1)%this._markers.length:i=!0:e||(t||this._nextIdx>0?this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length:i=!0),n!==this._nextIdx){var o=this._markers[this._nextIdx];this._onCurrentMarkerChanged.fire(o)}return i},e.prototype.canNavigate=function(){return this._markers.length>0},e.prototype.findMarkerAtPosition=function(e){for(var t=0,n=this._markers;t<n.length;t++){var i=n[t];if(se.a.containsPosition(i,e))return i}},Object.defineProperty(e.prototype,"total",{get:function(){return this._markers.length},enumerable:!0,configurable:!0}),e.prototype.indexOf=function(e){return 1+this._markers.indexOf(e)},e.prototype.dispose=function(){this._toUnbind=Object(z.d)(this._toUnbind)},e}(),yc=function(){function e(e,t,n,i,o,r){this._markerService=t,this._contextKeyService=n,this._themeService=i,this._editorService=o,this._keybindingService=r,this._model=null,this._widget=null,this._disposeOnClose=[],this._editor=e,this._widgetVisible=kc.bindTo(this._contextKeyService)}return e.get=function(t){return t.getContribution(e.ID)},e.prototype.getId=function(){return e.ID},e.prototype.dispose=function(){this._cleanUp()},e.prototype._cleanUp=function(){this._widgetVisible.reset(),this._disposeOnClose=Object(z.d)(this._disposeOnClose),this._widget=null,this._model=null},e.prototype.getOrCreateModel=function(){var e,t=this;if(this._model)return this._model;var n=this._getMarkers();this._model=new bc(this._editor,n),this._markerService.onMarkerChanged(this._onMarkerChanged,this,this._disposeOnClose);var i=this._keybindingService.lookupKeybinding(Sc.ID),o=this._keybindingService.lookupKeybinding(Cc.ID),r=[new at.a(Sc.ID,Sc.LABEL+(i?" ("+i.getLabel()+")":""),"show-previous-problem chevron-up",this._model.canNavigate(),function(){return _c(t,void 0,void 0,function(){return vc(this,function(e){return this._model&&this._model.move(!1,!0),[2]})})}),new at.a(Cc.ID,Cc.LABEL+(o?" ("+o.getLabel()+")":""),"show-next-problem chevron-down",this._model.canNavigate(),function(){return _c(t,void 0,void 0,function(){return vc(this,function(e){return this._model&&this._model.move(!0,!0),[2]})})})];return this._widget=new sc(this._editor,r,this._themeService),this._widgetVisible.set(!0),this._widget.onDidClose(function(){return t._cleanUp()},this,this._disposeOnClose),this._disposeOnClose.push(this._model),this._disposeOnClose.push(this._widget),(e=this._disposeOnClose).push.apply(e,r),this._disposeOnClose.push(this._widget.onDidSelectRelatedInformation(function(e){t._editorService.openCodeEditor({resource:e.resource,options:{pinned:!0,revealIfOpened:!0,selection:se.a.lift(e).collapseToStart()}},t._editor).then(void 0,$e.e),t.closeMarkersNavigation(!1)})),this._disposeOnClose.push(this._editor.onDidChangeModel(function(){return t._cleanUp()})),this._disposeOnClose.push(this._model.onCurrentMarkerChanged(function(e){e&&t._model?t._model.withoutWatchingEditorPosition(function(){t._widget&&t._model&&t._widget.showAtMarker(e,t._model.indexOf(e),t._model.total)}):t._cleanUp()})),this._disposeOnClose.push(this._model.onMarkerSetChanged(function(){if(t._widget&&t._widget.position&&t._model){var e=t._model.findMarkerAtPosition(t._widget.position);e?t._widget.updateMarker(e):t._widget.showStale()}})),this._model},e.prototype.closeMarkersNavigation=function(e){void 0===e&&(e=!0),this._cleanUp(),e&&this._editor.focus()},e.prototype.show=function(e){this.getOrCreateModel().currentMarker=e},e.prototype._onMarkerChanged=function(e){var t=this._editor.getModel();t&&this._model&&e.some(function(e){return t.uri.toString()===e.toString()})&&this._model.setMarkers(this._getMarkers())},e.prototype._getMarkers=function(){var e=this._editor.getModel();return e?this._markerService.read({resource:e.uri,severities:ze.c.Error|ze.c.Warning|ze.c.Info}):[]},e.ID="editor.contrib.markerController",e=fc([mc(1,ze.b),mc(2,Pe.e),mc(3,X.c),mc(4,be.a),mc(5,He.a)],e)}(),wc=function(e){function t(t,n,i){var o=e.call(this,i)||this;return o._isNext=t,o._multiFile=n,o}return gc(t,e),t.prototype.run=function(e,n){var i=this,o=e.get(ze.b),r=e.get(be.a),s=yc.get(n);if(!s)return Promise.resolve(void 0);var a=s.getOrCreateModel();if(!a.move(this._isNext,!this._multiFile)||!this._multiFile)return Promise.resolve(void 0);var c=o.read({severities:ze.c.Error|ze.c.Warning|ze.c.Info}).sort(t.compareMarker);if(0===c.length)return Promise.resolve(void 0);var l=n.getModel();if(!l)return Promise.resolve(void 0);var u=a.currentMarker||{resource:l.uri,severity:ze.c.Error,startLineNumber:1,startColumn:1,endLineNumber:1,endColumn:1},d=Object(Ge.c)(c,u,t.compareMarker);d<0?(d=~d,d%=c.length):d=this._isNext?(d+1)%c.length:(d+c.length-1)%c.length;var h=c[d];return h.resource.toString()===l.uri.toString()?(a.move(this._isNext,!0),Promise.resolve(void 0)):(s.closeMarkersNavigation(),r.openCodeEditor({resource:h.resource,options:{pinned:!1,revealIfOpened:!0,revealInCenterIfOutsideViewport:!0,selection:h}},n).then(function(e){if(e)return e.getAction(i.id).run()}))},t.compareMarker=function(e,t){var n=Object(he.d)(e.resource.toString(),t.resource.toString());return 0===n&&(n=ze.c.compare(e.severity,t.severity)),0===n&&(n=se.a.compareRangesUsingStarts(e,t)),n},t}(U.b),Cc=function(e){function t(){return e.call(this,!0,!1,{id:t.ID,label:t.LABEL,alias:"Go to Next Error or Warning",precondition:G.a.writable,kbOpts:{kbExpr:G.a.editorTextFocus,primary:578,weight:100}})||this}return gc(t,e),t.ID="editor.action.marker.next",t.LABEL=V.a("markerAction.next.label","Go to Next Problem (Error, Warning, Info)"),t}(wc),Sc=function(e){function t(){return e.call(this,!1,!1,{id:t.ID,label:t.LABEL,alias:"Go to Previous Error or Warning",precondition:G.a.writable,kbOpts:{kbExpr:G.a.editorTextFocus,primary:1602,weight:100}})||this}return gc(t,e),t.ID="editor.action.marker.prev",t.LABEL=V.a("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)"),t}(wc),xc=function(e){function t(){return e.call(this,!0,!0,{id:"editor.action.marker.nextInFiles",label:V.a("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Error or Warning in Files",precondition:G.a.writable,kbOpts:{kbExpr:G.a.focus,primary:66,weight:100}})||this}return gc(t,e),t}(wc),Oc=function(e){function t(){return e.call(this,!1,!0,{id:"editor.action.marker.prevInFiles",label:V.a("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Error or Warning in Files",precondition:G.a.writable,kbOpts:{kbExpr:G.a.focus,primary:1090,weight:100}})||this}return gc(t,e),t}(wc);Object(U.h)(yc),Object(U.f)(Cc),Object(U.f)(Sc),Object(U.f)(xc),Object(U.f)(Oc);var kc=new Pe.f("markersNavigationVisible",!1),Dc=U.c.bindToContribution(yc.get);Object(U.g)(new Dc({id:"closeMarkersNavigation",precondition:kc,handler:function(e){return e.closeMarkersNavigation()},kbOpts:{weight:150,kbExpr:G.a.focus,primary:9,secondary:[1033]}})),Q.c.appendMenuItem(16,{group:"6_problem_nav",command:{id:"editor.action.marker.nextInFiles",title:V.a({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem")},order:1}),Q.c.appendMenuItem(16,{group:"6_problem_nav",command:{id:"editor.action.marker.prevInFiles",title:V.a({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem")},order:2});n(281);var Ic=function(){function e(e,t,n){this.presentationIndex=n,this._onColorFlushed=new Ke.a,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new Ke.a,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new Ke.a,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=e,this._color=e,this._colorPresentations=t}return Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(e){this._color.equals(e)||(this._color=e,this._onDidChangeColor.fire(e))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"presentation",{get:function(){return this.colorPresentations[this.presentationIndex]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colorPresentations",{get:function(){return this._colorPresentations},set:function(e){this._colorPresentations=e,this.presentationIndex>e.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)},enumerable:!0,configurable:!0}),e.prototype.selectNextColorPresentation=function(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)},e.prototype.guessColorPresentation=function(e,t){for(var n=0;n<this.colorPresentations.length;n++)if(t===this.colorPresentations[n].label){this.presentationIndex=n,this._onDidChangePresentation.fire(this.presentation);break}},e.prototype.flushColor=function(){this._onColorFlushed.fire(this._color)},e}(),Nc=(n(282),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}()),Lc=st.a,Mc=function(e){function t(t,n,i){var o=e.call(this)||this;o.model=n,o.domNode=Lc(".colorpicker-header"),st.m(t,o.domNode),o.pickedColorNode=st.m(o.domNode,Lc(".picked-color"));var r=st.m(o.domNode,Lc(".original-color"));return r.style.backgroundColor=Vt.a.Format.CSS.format(o.model.originalColor),o.backgroundColor=i.getTheme().getColor(J.w)||Vt.a.white,o._register(Object(X.e)(function(e,t){o.backgroundColor=e.getColor(J.w)||Vt.a.white})),o._register(st.h(o.pickedColorNode,st.d.CLICK,function(){return o.model.selectNextColorPresentation()})),o._register(st.h(r,st.d.CLICK,function(){o.model.color=o.model.originalColor,o.model.flushColor()})),o._register(n.onDidChangeColor(o.onDidChangeColor,o)),o._register(n.onDidChangePresentation(o.onDidChangePresentation,o)),o.pickedColorNode.style.backgroundColor=Vt.a.Format.CSS.format(n.color),st.P(o.pickedColorNode,"light",n.color.rgba.a<.5?o.backgroundColor.isLighter():n.color.isLighter()),o}return Nc(t,e),t.prototype.onDidChangeColor=function(e){this.pickedColorNode.style.backgroundColor=Vt.a.Format.CSS.format(e),st.P(this.pickedColorNode,"light",e.rgba.a<.5?this.backgroundColor.isLighter():e.isLighter()),this.onDidChangePresentation()},t.prototype.onDidChangePresentation=function(){this.pickedColorNode.textContent=this.model.presentation?this.model.presentation.label:""},t}(z.a),Ec=function(e){function t(t,n,i){var o=e.call(this)||this;return o.model=n,o.pixelRatio=i,o.domNode=Lc(".colorpicker-body"),st.m(t,o.domNode),o.saturationBox=new Pc(o.domNode,o.model,o.pixelRatio),o._register(o.saturationBox),o._register(o.saturationBox.onDidChange(o.onDidSaturationValueChange,o)),o._register(o.saturationBox.onColorFlushed(o.flushColor,o)),o.opacityStrip=new Tc(o.domNode,o.model),o._register(o.opacityStrip),o._register(o.opacityStrip.onDidChange(o.onDidOpacityChange,o)),o._register(o.opacityStrip.onColorFlushed(o.flushColor,o)),o.hueStrip=new Ac(o.domNode,o.model),o._register(o.hueStrip),o._register(o.hueStrip.onDidChange(o.onDidHueChange,o)),o._register(o.hueStrip.onColorFlushed(o.flushColor,o)),o}return Nc(t,e),t.prototype.flushColor=function(){this.model.flushColor()},t.prototype.onDidSaturationValueChange=function(e){var t=e.s,n=e.v,i=this.model.color.hsva;this.model.color=new Vt.a(new Vt.b(i.h,t,n,i.a))},t.prototype.onDidOpacityChange=function(e){var t=this.model.color.hsva;this.model.color=new Vt.a(new Vt.b(t.h,t.s,t.v,e))},t.prototype.onDidHueChange=function(e){var t=this.model.color.hsva,n=360*(1-e);this.model.color=new Vt.a(new Vt.b(360===n?0:n,t.s,t.v,t.a))},t.prototype.layout=function(){this.saturationBox.layout(),this.opacityStrip.layout(),this.hueStrip.layout()},t}(z.a),Pc=function(e){function t(t,n,i){var o=e.call(this)||this;return o.model=n,o.pixelRatio=i,o._onDidChange=new Ke.a,o.onDidChange=o._onDidChange.event,o._onColorFlushed=new Ke.a,o.onColorFlushed=o._onColorFlushed.event,o.domNode=Lc(".saturation-wrap"),st.m(t,o.domNode),o.canvas=document.createElement("canvas"),o.canvas.className="saturation-box",st.m(o.domNode,o.canvas),o.selection=Lc(".saturation-selection"),st.m(o.domNode,o.selection),o.layout(),o._register(st.h(o.domNode,st.d.MOUSE_DOWN,function(e){return o.onMouseDown(e)})),o._register(o.model.onDidChangeColor(o.onDidChangeColor,o)),o.monitor=null,o}return Nc(t,e),t.prototype.onMouseDown=function(e){var t=this;this.monitor=this._register(new dt.a);var n=st.v(this.domNode);e.target!==this.selection&&this.onDidChangePosition(e.offsetX,e.offsetY),this.monitor.startMonitoring(dt.b,function(e){return t.onDidChangePosition(e.posx-n.left,e.posy-n.top)},function(){return null});var i=st.h(document,st.d.MOUSE_UP,function(){t._onColorFlushed.fire(),i.dispose(),t.monitor&&(t.monitor.stopMonitoring(!0),t.monitor=null)},!0)},t.prototype.onDidChangePosition=function(e,t){var n=Math.max(0,Math.min(1,e/this.width)),i=Math.max(0,Math.min(1,1-t/this.height));this.paintSelection(n,i),this._onDidChange.fire({s:n,v:i})},t.prototype.layout=function(){this.width=this.domNode.offsetWidth,this.height=this.domNode.offsetHeight,this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio,this.paint();var e=this.model.color.hsva;this.paintSelection(e.s,e.v)},t.prototype.paint=function(){var e=this.model.color.hsva,t=new Vt.a(new Vt.b(e.h,1,1,1)),n=this.canvas.getContext("2d"),i=n.createLinearGradient(0,0,this.canvas.width,0);i.addColorStop(0,"rgba(255, 255, 255, 1)"),i.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),i.addColorStop(1,"rgba(255, 255, 255, 0)");var o=n.createLinearGradient(0,0,0,this.canvas.height);o.addColorStop(0,"rgba(0, 0, 0, 0)"),o.addColorStop(1,"rgba(0, 0, 0, 1)"),n.rect(0,0,this.canvas.width,this.canvas.height),n.fillStyle=Vt.a.Format.CSS.format(t),n.fill(),n.fillStyle=i,n.fill(),n.fillStyle=o,n.fill()},t.prototype.paintSelection=function(e,t){this.selection.style.left=e*this.width+"px",this.selection.style.top=this.height-t*this.height+"px"},t.prototype.onDidChangeColor=function(){this.monitor&&this.monitor.isMonitoring()||this.paint()},t}(z.a),Rc=function(e){function t(t,n){var i=e.call(this)||this;return i.model=n,i._onDidChange=new Ke.a,i.onDidChange=i._onDidChange.event,i._onColorFlushed=new Ke.a,i.onColorFlushed=i._onColorFlushed.event,i.domNode=st.m(t,Lc(".strip")),i.overlay=st.m(i.domNode,Lc(".overlay")),i.slider=st.m(i.domNode,Lc(".slider")),i.slider.style.top="0px",i._register(st.h(i.domNode,st.d.MOUSE_DOWN,function(e){return i.onMouseDown(e)})),i.layout(),i}return Nc(t,e),t.prototype.layout=function(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;var e=this.getValue(this.model.color);this.updateSliderPosition(e)},t.prototype.onMouseDown=function(e){var t=this,n=this._register(new dt.a),i=st.v(this.domNode);st.f(this.domNode,"grabbing"),e.target!==this.slider&&this.onDidChangeTop(e.offsetY),n.startMonitoring(dt.b,function(e){return t.onDidChangeTop(e.posy-i.top)},function(){return null});var o=st.h(document,st.d.MOUSE_UP,function(){t._onColorFlushed.fire(),o.dispose(),n.stopMonitoring(!0),st.G(t.domNode,"grabbing")},!0)},t.prototype.onDidChangeTop=function(e){var t=Math.max(0,Math.min(1,1-e/this.height));this.updateSliderPosition(t),this._onDidChange.fire(t)},t.prototype.updateSliderPosition=function(e){this.slider.style.top=(1-e)*this.height+"px"},t}(z.a),Tc=function(e){function t(t,n){var i=e.call(this,t,n)||this;return st.f(i.domNode,"opacity-strip"),i._register(n.onDidChangeColor(i.onDidChangeColor,i)),i.onDidChangeColor(i.model.color),i}return Nc(t,e),t.prototype.onDidChangeColor=function(e){var t=e.rgba,n=t.r,i=t.g,o=t.b,r=new Vt.a(new Vt.c(n,i,o,1)),s=new Vt.a(new Vt.c(n,i,o,0));this.overlay.style.background="linear-gradient(to bottom, "+r+" 0%, "+s+" 100%)"},t.prototype.getValue=function(e){return e.hsva.a},t}(Rc),Ac=function(e){function t(t,n){var i=e.call(this,t,n)||this;return st.f(i.domNode,"hue-strip"),i}return Nc(t,e),t.prototype.getValue=function(e){return 1-e.hsva.h/360},t}(Rc),jc=function(e){function t(t,n,i,o){var r=e.call(this)||this;r.model=n,r.pixelRatio=i,r._register(Object(me.o)(function(){return r.layout()}));var s=Lc(".colorpicker-widget");t.appendChild(s);var a=new Mc(s,r.model,o);return r.body=new Ec(s,r.model,r.pixelRatio),r._register(a),r._register(r.body),r}return Nc(t,e),t.prototype.layout=function(){this.body.layout()},t}(Fn.a);function Fc(e,t,n){var i=qe.n.ordered(e).map(function(i){return Promise.resolve(i.provideHover(e,t,n)).then(function(e){return e&&function(e){var t="undefined"!==typeof e.range,n="undefined"!==typeof e.contents&&e.contents&&e.contents.length>0;return t&&n}(e)?e:void 0},function(e){Object($e.f)(e)})});return Promise.all(i).then(Ge.d)}Object(U.e)("_executeHoverProvider",function(e,t){return Fc(e,t,Ze.a.None)});var Bc=function(){function e(e,t,n,i,o){var r=this;this._computer=e,this._state=0,this._hoverTime=o,this._firstWaitScheduler=new H.d(function(){return r._triggerAsyncComputation()},0),this._secondWaitScheduler=new H.d(function(){return r._triggerSyncComputation()},0),this._loadingMessageScheduler=new H.d(function(){return r._showLoadingMessage()},0),this._asyncComputationPromise=null,this._asyncComputationPromiseDone=!1,this._completeCallback=t,this._errorCallback=n,this._progressCallback=i}return e.prototype.setHoverTime=function(e){this._hoverTime=e},e.prototype._firstWaitTime=function(){return this._hoverTime/2},e.prototype._secondWaitTime=function(){return this._hoverTime/2},e.prototype._loadingMessageTime=function(){return 3*this._hoverTime},e.prototype._triggerAsyncComputation=function(){var e=this;this._state=2,this._secondWaitScheduler.schedule(this._secondWaitTime()),this._computer.computeAsync?(this._asyncComputationPromiseDone=!1,this._asyncComputationPromise=Object(H.f)(function(t){return e._computer.computeAsync(t)}),this._asyncComputationPromise.then(function(t){e._asyncComputationPromiseDone=!0,e._withAsyncResult(t)},function(t){return e._onError(t)})):this._asyncComputationPromiseDone=!0},e.prototype._triggerSyncComputation=function(){this._computer.computeSync&&this._computer.onResult(this._computer.computeSync(),!0),this._asyncComputationPromiseDone?(this._state=0,this._onComplete(this._computer.getResult())):(this._state=3,this._onProgress(this._computer.getResult()))},e.prototype._showLoadingMessage=function(){3===this._state&&this._onProgress(this._computer.getResultWithLoadingMessage())},e.prototype._withAsyncResult=function(e){e&&this._computer.onResult(e,!1),3===this._state&&(this._state=0,this._onComplete(this._computer.getResult()))},e.prototype._onComplete=function(e){this._completeCallback&&this._completeCallback(e)},e.prototype._onError=function(e){this._errorCallback?this._errorCallback(e):Object($e.e)(e)},e.prototype._onProgress=function(e){this._progressCallback&&this._progressCallback(e)},e.prototype.start=function(e){if(0===e)0===this._state&&(this._state=1,this._firstWaitScheduler.schedule(this._firstWaitTime()),this._loadingMessageScheduler.schedule(this._loadingMessageTime()));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation()}},e.prototype.cancel=function(){this._loadingMessageScheduler.cancel(),1===this._state&&this._firstWaitScheduler.cancel(),2===this._state&&(this._secondWaitScheduler.cancel(),this._asyncComputationPromise&&(this._asyncComputationPromise.cancel(),this._asyncComputationPromise=null)),3===this._state&&this._asyncComputationPromise&&(this._asyncComputationPromise.cancel(),this._asyncComputationPromise=null),this._state=0},e}(),Wc=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Vc=function(e){function t(t,n){var i=e.call(this)||this;return i.disposables=[],i.allowEditorOverflow=!0,i._id=t,i._editor=n,i._isVisible=!1,i._containerDomNode=document.createElement("div"),i._containerDomNode.className="monaco-editor-hover hidden",i._containerDomNode.tabIndex=0,i._domNode=document.createElement("div"),i._domNode.className="monaco-editor-hover-content",i.scrollbar=new ic.a(i._domNode,{}),i.disposables.push(i.scrollbar),i._containerDomNode.appendChild(i.scrollbar.getDomNode()),i.onkeydown(i._containerDomNode,function(e){e.equals(9)&&i.hide()}),i._register(i._editor.onDidChangeConfiguration(function(e){e.fontInfo&&i.updateFont()})),i._editor.onDidLayoutChange(function(e){return i.layout()}),i.layout(),i._editor.addContentWidget(i),i._showAtPosition=null,i._showAtRange=null,i}return Wc(t,e),Object.defineProperty(t.prototype,"isVisible",{get:function(){return this._isVisible},set:function(e){this._isVisible=e,Object(st.P)(this._containerDomNode,"hidden",!this._isVisible)},enumerable:!0,configurable:!0}),t.prototype.getId=function(){return this._id},t.prototype.getDomNode=function(){return this._containerDomNode},t.prototype.showAt=function(e,t,n){this._showAtPosition=e,this._showAtRange=t,this.isVisible=!0,this._editor.layoutContentWidget(this),this._editor.render(),this._stoleFocus=n,n&&this._containerDomNode.focus()},t.prototype.hide=function(){this.isVisible&&(this.isVisible=!1,this._editor.layoutContentWidget(this),this._stoleFocus&&this._editor.focus())},t.prototype.getPosition=function(){return this.isVisible?{position:this._showAtPosition,range:this._showAtRange,preference:[1,2]}:null},t.prototype.dispose=function(){this._editor.removeContentWidget(this),this.disposables=Object(z.d)(this.disposables),e.prototype.dispose.call(this)},t.prototype.updateFont=function(){var e=this;Array.prototype.slice.call(this._domNode.getElementsByClassName("code")).forEach(function(t){return e._editor.applyFontInfo(t)})},t.prototype.updateContents=function(e){this._domNode.textContent="",this._domNode.appendChild(e),this.updateFont(),this._editor.layoutContentWidget(this),this.onContentsChange()},t.prototype.onContentsChange=function(){this.scrollbar.scanDomNode()},t.prototype.layout=function(){var e=Math.max(this._editor.getLayoutInfo().height/4,250),t=this._editor.getConfiguration().fontInfo,n=t.fontSize,i=t.lineHeight;this._domNode.style.fontSize=n+"px",this._domNode.style.lineHeight=i+"px",this._domNode.style.maxHeight=e+"px",this._domNode.style.maxWidth=Math.max(.66*this._editor.getLayoutInfo().width,500)+"px"},t}(Fn.a),Hc=function(e){function t(t,n){var i=e.call(this)||this;return i._id=t,i._editor=n,i._isVisible=!1,i._domNode=document.createElement("div"),i._domNode.className="monaco-editor-hover hidden",i._domNode.setAttribute("aria-hidden","true"),i._domNode.setAttribute("role","presentation"),i._showAtLineNumber=-1,i._register(i._editor.onDidChangeConfiguration(function(e){e.fontInfo&&i.updateFont()})),i._editor.addOverlayWidget(i),i}return Wc(t,e),Object.defineProperty(t.prototype,"isVisible",{get:function(){return this._isVisible},set:function(e){this._isVisible=e,Object(st.P)(this._domNode,"hidden",!this._isVisible)},enumerable:!0,configurable:!0}),t.prototype.getId=function(){return this._id},t.prototype.getDomNode=function(){return this._domNode},t.prototype.showAt=function(e){this._showAtLineNumber=e,this.isVisible||(this.isVisible=!0);var t=this._editor.getLayoutInfo(),n=this._editor.getTopForLineNumber(this._showAtLineNumber),i=this._editor.getScrollTop(),o=this._editor.getConfiguration().lineHeight,r=n-i-(this._domNode.clientHeight-o)/2;this._domNode.style.left=t.glyphMarginLeft+t.glyphMarginWidth+"px",this._domNode.style.top=Math.max(Math.round(r),0)+"px"},t.prototype.hide=function(){this.isVisible&&(this.isVisible=!1)},t.prototype.getPosition=function(){return null},t.prototype.dispose=function(){this._editor.removeOverlayWidget(this),e.prototype.dispose.call(this)},t.prototype.updateFont=function(){var e=this,t=Array.prototype.slice.call(this._domNode.getElementsByTagName("code")),n=Array.prototype.slice.call(this._domNode.getElementsByClassName("code"));t.concat(n).forEach(function(t){return e._editor.applyFontInfo(t)})},t.prototype.updateContents=function(e){this._domNode.textContent="",this._domNode.appendChild(e),this.updateFont()},t}(Fn.a),zc=n(127),Uc=n(217),Kc=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},qc=function(e,t){return function(n,i){t(n,i,e)}},Gc=function(){function e(e,t,n){void 0===n&&(n=zc.b),this._editor=e,this._modeService=t,this._openerService=n,this._onDidRenderCodeBlock=new Ke.a,this.onDidRenderCodeBlock=this._onDidRenderCodeBlock.event}return e.prototype.getOptions=function(e){var t=this;return{codeBlockRenderer:function(e,n){var i=null;if(e)i=t._modeService.getModeIdForLanguageName(e);else{var o=t._editor.getModel();o&&(i=o.getLanguageIdentifier().language)}return t._modeService.triggerMode(i||""),Promise.resolve(!0).then(function(e){var t=qe.y.getPromise(i||"");return t?t.then(function(e){return Object(Uc.b)(n,e)}):Object(Uc.b)(n,void 0)}).then(function(e){return'<span style="font-family: '+t._editor.getConfiguration().fontInfo.fontFamily+'">'+e+"</span>"})},codeBlockRenderCallback:function(){return t._onDidRenderCodeBlock.fire()},actionHandler:{callback:function(e){var n;try{n=Ye.a.parse(e)}catch(i){}n&&t._openerService&&t._openerService.open(n).catch($e.e)},disposeables:e}}},e.prototype.render=function(e){var t=[];return{element:e?function(e,t){void 0===t&&(t={});var n,i=hi(t),o=function(t){var n;try{n=Object(di.a)(decodeURIComponent(t))}catch(i){}return n?(n=Object(Bn.b)(n,function(t){return e.uris&&e.uris[t]?Ye.a.revive(e.uris[t]):void 0}),encodeURIComponent(JSON.stringify(n))):t},r=function(t){var n=e.uris&&e.uris[t];if(!n)return t;var i=Ye.a.revive(n);return i.query&&(i=i.with({query:o(i.query)})),n&&(t=i.toString(!0)),t},s=new Promise(function(e){return n=e}),a=new li;a.image=function(e,t,n){var i=[];if(e=r(e)){var o=e.split("|").map(function(e){return e.trim()});e=o[0];var s=o[1];if(s){var a=/height=(\d+)/.exec(s),c=/width=(\d+)/.exec(s),l=a?a[1]:"",u=c?c[1]:"",d=isFinite(parseInt(u)),h=isFinite(parseInt(l));d&&i.push('width="'+u+'"'),h&&i.push('height="'+l+'"')}}var p=[];return e&&p.push('src="'+e+'"'),n&&p.push('alt="'+n+'"'),t&&p.push('title="'+t+'"'),i.length&&(p=p.concat(i)),"<img "+p.join(" ")+">"},a.link=function(t,n,i){return t===i&&(i=ci(i)),t=r(t),n=ci(n),!(t=ci(t))||t.match(/^data:|javascript:/i)||t.match(/^command:/i)&&!e.isTrusted||t.match(/^command:(\/\/\/)?_workbench\.downloadResource/i)?i:'<a href="#" data-href="'+(t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"))+'" title="'+(n||t)+'">'+i+"</a>"},a.paragraph=function(e){return"<p>"+e+"</p>"},t.codeBlockRenderer&&(a.code=function(e,n){var o=t.codeBlockRenderer(n,e),r=ii.nextId(),a=Promise.all([o,s]).then(function(e){var t=e[0],n=i.querySelector('div[data-code="'+r+'"]');n&&(n.innerHTML=t)}).catch(function(e){});return t.codeBlockRenderCallback&&a.then(t.codeBlockRenderCallback),'<div class="code" data-code="'+r+'">'+Object(he.m)(e)+"</div>"}),t.actionHandler&&t.actionHandler.disposeables.push(st.k(i,"click",function(e){var n=e.target;if("A"===n.tagName||(n=n.parentElement)&&"A"===n.tagName)try{var i=n.dataset.href;i&&t.actionHandler.callback(i,e)}catch(o){Object($e.e)(o)}finally{e.preventDefault()}}));var c={sanitize:!0,renderer:a};return i.innerHTML=ui(e.value,c),n(),i}(e,this.getOptions(t)):document.createElement("span"),dispose:function(){return Object(z.d)(t)}}},e=Kc([qc(1,qa.a),qc(2,Object(oo.d)(zc.a))],e)}(),Zc=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),$c=function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function s(e){try{c(i.next(e))}catch(t){r(t)}}function a(e){try{c(i.throw(e))}catch(t){r(t)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((i=i.apply(e,t||[])).next())})},Yc=function(e,t){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(a){r=[6,a],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},Jc=st.a,Xc=function(){return function(e,t,n){this.range=e,this.color=t,this.provider=n}}(),Qc=function(){return function(e,t){this.range=e,this.marker=t}}(),el=function(){function e(e,t){this._markerDecorationsService=t,this._editor=e,this._range=null}return e.prototype.setRange=function(e){this._range=e,this._result=[]},e.prototype.clearResult=function(){this._result=[]},e.prototype.computeAsync=function(e){if(!this._editor.hasModel()||!this._range)return Promise.resolve([]);var t=this._editor.getModel();return qe.n.has(t)?Fc(t,new K.a(this._range.startLineNumber,this._range.startColumn),e):Promise.resolve([])},e.prototype.computeSync=function(){var e=this;if(!this._editor.hasModel()||!this._range)return[];var t=this._editor.getModel(),n=this._range.startLineNumber;if(n>this._editor.getModel().getLineCount())return[];var i=$t.get(this._editor),o=t.getLineMaxColumn(n),r=this._editor.getLineDecorations(n),s=!1,a=this._range,c=r.map(function(r){var c=r.range.startLineNumber===n?r.range.startColumn:1,l=r.range.endLineNumber===n?r.range.endColumn:o;if(c>a.startColumn||a.endColumn>l)return null;var u=new se.a(a.startLineNumber,c,a.startLineNumber,l),d=e._markerDecorationsService.getMarker(t,r);if(d)return new Qc(u,d);var h=i.getColorData(r.range.getStartPosition());if(!s&&h){s=!0;var p=h.colorInfo,g=p.color,f=p.range;return new Xc(f,g,h.provider)}return ri(r.options.hoverMessage)?null:{contents:r.options.hoverMessage?Object(Ge.b)(r.options.hoverMessage):[],range:u}});return Object(Ge.d)(c)},e.prototype.onResult=function(e,t){this._result=t?e.concat(this._result.sort(function(e,t){return e instanceof Xc?-1:t instanceof Xc?1:0})):this._result.concat(e)},e.prototype.getResult=function(){return this._result.slice(0)},e.prototype.getResultWithLoadingMessage=function(){return this._result.slice(0).concat([this._getLoadingMessage()])},e.prototype._getLoadingMessage=function(){return{range:Object(Oo.l)(this._range),contents:[(new oi).appendText(V.a("modesContentHover.loading","Loading..."))]}},e}(),tl=function(e){function t(n,i,o,r,s,a,c,l,u){void 0===u&&(u=zc.b);var d=e.call(this,t.ID,n)||this;return d._themeService=o,d._keybindingService=r,d._contextMenuService=s,d._bulkEditService=a,d._commandService=c,d._modeService=l,d._openerService=u,d.renderDisposable=z.a.None,d._messages=[],d._lastRange=null,d._computer=new el(d._editor,i),d._highlightDecorations=[],d._isChangingDecorations=!1,d._hoverOperation=new Bc(d._computer,function(e){return d._withResult(e,!0)},null,function(e){return d._withResult(e,!1)},d._editor.getConfiguration().contribInfo.hover.delay),d._register(st.k(d.getDomNode(),st.d.FOCUS,function(){d._colorPicker&&st.f(d.getDomNode(),"colorpicker-hover")})),d._register(st.k(d.getDomNode(),st.d.BLUR,function(){st.G(d.getDomNode(),"colorpicker-hover")})),d._register(n.onDidChangeConfiguration(function(e){d._hoverOperation.setHoverTime(d._editor.getConfiguration().contribInfo.hover.delay)})),d}return Zc(t,e),t.prototype.dispose=function(){this.renderDisposable.dispose(),this.renderDisposable=z.a.None,this._hoverOperation.cancel(),e.prototype.dispose.call(this)},t.prototype.onModelDecorationsChanged=function(){this._isChangingDecorations||this.isVisible&&(this._hoverOperation.cancel(),this._computer.clearResult(),this._colorPicker||this._hoverOperation.start(0))},t.prototype.startShowingAt=function(e,t,n){if(!this._lastRange||!this._lastRange.equalsRange(e)){if(this._hoverOperation.cancel(),this.isVisible)if(this._showAtPosition&&this._showAtPosition.lineNumber===e.startLineNumber){for(var i=[],o=0,r=this._messages.length;o<r;o++){var s=this._messages[o],a=s.range;a&&a.startColumn<=e.startColumn&&a.endColumn>=e.endColumn&&i.push(s)}if(i.length>0){if(function(e,t){if(!e&&t||e&&!t||e.length!==t.length)return!1;for(var n=0;n<e.length;n++){var i=e[n],o=t[n];if(i instanceof Qc&&o instanceof Qc)return ze.a.makeKey(i.marker)===ze.a.makeKey(o.marker);if(i instanceof Xc||o instanceof Xc)return!1;if(i instanceof Qc||o instanceof Qc)return!1;if(r=i.contents,s=o.contents,!(!r&&!s||r&&s&&(Array.isArray(r)&&Array.isArray(s)?Object(Ge.g)(r,s,ai):si(r)&&si(s)&&ai(r,s))))return!1}var r,s;return!0}(i,this._messages))return;this._renderMessages(e,i)}else this.hide()}else this.hide();this._lastRange=e,this._computer.setRange(e),this._shouldFocus=n,this._hoverOperation.start(t)}},t.prototype.hide=function(){this._lastRange=null,this._hoverOperation.cancel(),e.prototype.hide.call(this),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,[]),this._isChangingDecorations=!1,this.renderDisposable.dispose(),this.renderDisposable=z.a.None,this._colorPicker=null},t.prototype.isColorPickerVisible=function(){return!!this._colorPicker},t.prototype._withResult=function(e,t){this._messages=e,this._lastRange&&this._messages.length>0?this._renderMessages(this._lastRange,this._messages):t&&this.hide()},t.prototype._renderMessages=function(e,n){var i=this;this.renderDisposable.dispose(),this._colorPicker=null;var o=Number.MAX_VALUE,r=n[0].range?se.a.lift(n[0].range):null,s=document.createDocumentFragment(),a=!0,c=!1,l=[],u=[];if(n.forEach(function(e){if(e.range)if(o=Math.min(o,e.range.startColumn),r=r?se.a.plusRange(r,e.range):se.a.lift(e.range),e instanceof Xc){c=!0;var t=e.color,n=t.red,d=t.green,h=t.blue,p=t.alpha,g=new Vt.c(255*n,255*d,255*h,p),f=new Vt.a(g);if(!i._editor.hasModel())return;var m=i._editor.getModel(),_=new se.a(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn),v={range:e.range,color:e.color},b=new Ic(f,[],0),y=new jc(s,b,i._editor.getConfiguration().pixelRatio,i._themeService);Kt(m,v,e.provider,Ze.a.None).then(function(t){if(b.colorPresentations=t||[],i._editor.hasModel()){var n=i._editor.getModel().getValueInRange(e.range);b.guessColorPresentation(f,n);var o=function(){var e,t;b.presentation.textEdit?(e=[b.presentation.textEdit],t=(t=new se.a(b.presentation.textEdit.range.startLineNumber,b.presentation.textEdit.range.startColumn,b.presentation.textEdit.range.endLineNumber,b.presentation.textEdit.range.endColumn)).setEndPosition(t.endLineNumber,t.startColumn+b.presentation.textEdit.text.length)):(e=[{identifier:null,range:_,text:b.presentation.label,forceMoveMarkers:!1}],t=_.setEndPosition(_.endLineNumber,_.startColumn+b.presentation.label.length)),i._editor.pushUndoStop(),i._editor.executeEdits("colorpicker",e),b.presentation.additionalTextEdits&&(e=b.presentation.additionalTextEdits.slice(),i._editor.executeEdits("colorpicker",e),i.hide()),i._editor.pushUndoStop(),_=t},r=function(t){return Kt(m,{range:_,color:{red:t.rgba.r/255,green:t.rgba.g/255,blue:t.rgba.b/255,alpha:t.rgba.a}},e.provider,Ze.a.None).then(function(e){b.colorPresentations=e||[]})},a=b.onColorFlushed(function(e){r(e).then(o)}),c=b.onDidChangeColor(r);i._colorPicker=y,i.showAt(_.getStartPosition(),_,i._shouldFocus),i.updateContents(s),i._colorPicker.layout(),i.renderDisposable=Object(z.c)([a,c,y].concat(l))}})}else e instanceof Qc?(u.push(e),a=!1):e.contents.filter(function(e){return!ri(e)}).forEach(function(e){var t=Jc("div.hover-row.markdown-hover"),n=st.m(t,Jc("div.hover-contents")),o=new Gc(i._editor,i._modeService,i._openerService);l.push(o.onDidRenderCodeBlock(function(){n.className="hover-contents code-hover-contents",i.onContentsChange()}));var r=o.render(e);n.appendChild(r.element),s.appendChild(t),l.push(r),a=!1})}),u.length){u.forEach(function(e){return s.appendChild(i.renderMarkerHover(e))});var d=1===u.length?u[0]:u.sort(function(e,t){return ze.c.compare(e.marker.severity,t.marker.severity)})[0];s.appendChild(this.renderMarkerStatusbar(d))}c||a||(this.showAt(new K.a(e.startLineNumber,o),r,this._shouldFocus),this.updateContents(s)),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,r?[{range:r,options:t._DECORATION_OPTIONS}]:[]),this._isChangingDecorations=!1},t.prototype.renderMarkerHover=function(e){var t=this,n=Jc("div.hover-row"),i=st.m(n,Jc("div.marker.hover-contents")),o=e.marker,r=o.source,s=o.message,a=o.code,c=o.relatedInformation;this._editor.applyFontInfo(i);var l=st.m(i,Jc("span"));if(l.style.whiteSpace="pre-wrap",l.innerText=s,r||a){var u=st.m(i,Jc("span"));u.style.opacity="0.6",u.style.paddingLeft="6px",u.innerText=r&&a?r+"("+a+")":r||"("+a+")"}if(Object(Ge.n)(c))for(var d=function(e,n,o,r){var s=st.m(i,Jc("div"));s.style.marginTop="8px";var a=st.m(s,Jc("a"));a.innerText=Object(ss.b)(n)+"("+o+", "+r+"): ",a.style.cursor="pointer",a.onclick=function(e){e.stopPropagation(),e.preventDefault(),t._openerService&&t._openerService.open(n.with({fragment:o+","+r})).catch($e.e)};var c=st.m(s,Jc("span"));c.innerText=e,h._editor.applyFontInfo(c)},h=this,p=0,g=c;p<g.length;p++){var f=g[p];d(f.message,f.resource,f.startLineNumber,f.startColumn)}return n},t.prototype.renderMarkerStatusbar=function(e){var t=this,n=Jc("div.hover-row.status-bar"),i=[],o=st.m(n,Jc("div.actions"));return i.push(this.renderAction(o,{label:V.a("quick fixes","Quick Fix..."),commandId:St.Id,run:function(n){return $c(t,void 0,void 0,function(){var t,o,r;return Yc(this,function(s){switch(s.label){case 0:return t=this.getCodeActions(e.marker),i.push(Object(z.f)(function(){return t.cancel()})),[4,t];case 1:return o=s.sent(),r=st.v(n),this._contextMenuService.showContextMenu({getAnchor:function(){return{x:r.left+6,y:r.top+r.height+6}},getActions:function(){return o}}),[2]}})})}})),e.marker.severity!==ze.c.Error&&e.marker.severity!==ze.c.Warning&&e.marker.severity!==ze.c.Info||i.push(this.renderAction(o,{label:V.a("peek problem","Peek Problem"),commandId:Cc.ID,run:function(){t.hide(),yc.get(t._editor).show(e.marker),t._editor.focus()}})),this.renderDisposable=Object(z.c)(i),n},t.prototype.getCodeActions=function(e){var t=this;return Object(H.f)(function(n){return $c(t,void 0,void 0,function(){var t,i=this;return Yc(this,function(o){switch(o.label){case 0:return[4,tt(this._editor.getModel(),new se.a(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),{type:"manual",filter:{kind:Xe.QuickFix}},n)];case 1:return(t=o.sent()).actions.length?[2,t.actions.map(function(e){return new at.a(e.command?e.command.id:e.title,e.title,void 0,!0,function(){return wt(e,i._bulkEditService,i._commandService)})})]:[2,[new at.a("",V.a("editor.action.quickFix.noneMessage","No code actions available"))]]}})})})},t.prototype.renderAction=function(e,t){var n=st.m(e,Jc("div.action-container")),i=st.m(n,Jc("a.action"));t.iconClass&&st.m(i,Jc("span.icon."+t.iconClass));var o=st.m(i,Jc("span"));o.textContent=t.label;var r=this._keybindingService.lookupKeybinding(t.commandId);return r&&(o.title=t.label+" ("+r.getLabel()+")"),st.h(n,st.d.CLICK,function(e){e.stopPropagation(),e.preventDefault(),t.run(n)})},t.ID="editor.contrib.modesContentHoverWidget",t._DECORATION_OPTIONS=$.a.register({className:"hoverHighlight"}),t}(Vc);var nl=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),il=function(){function e(e){this._editor=e,this._lineNumber=-1}return e.prototype.setLineNumber=function(e){this._lineNumber=e,this._result=[]},e.prototype.clearResult=function(){this._result=[]},e.prototype.computeSync=function(){var e=function(e){return{value:e}},t=this._editor.getLineDecorations(this._lineNumber),n=[];if(!t)return n;for(var i=0,o=t;i<o.length;i++){var r=o[i];if(r.options.glyphMarginClassName){var s=r.options.glyphMarginHoverMessage;s&&!ri(s)&&n.push.apply(n,Object(Ge.b)(s).map(e))}}return n},e.prototype.onResult=function(e,t){this._result=this._result.concat(e)},e.prototype.getResult=function(){return this._result},e.prototype.getResultWithLoadingMessage=function(){return this.getResult()},e}(),ol=function(e){function t(n,i,o){void 0===o&&(o=zc.b);var r=e.call(this,t.ID,n)||this;return r._lastLineNumber=-1,r._markdownRenderer=new Gc(r._editor,i,o),r._computer=new il(r._editor),r._hoverOperation=new Bc(r._computer,function(e){return r._withResult(e)},void 0,function(e){return r._withResult(e)},300),r}return nl(t,e),t.prototype.dispose=function(){this._renderDisposeables=Object(z.d)(this._renderDisposeables),this._hoverOperation.cancel(),e.prototype.dispose.call(this)},t.prototype.onModelDecorationsChanged=function(){this.isVisible&&(this._hoverOperation.cancel(),this._computer.clearResult(),this._hoverOperation.start(0))},t.prototype.startShowingAt=function(e){this._lastLineNumber!==e&&(this._hoverOperation.cancel(),this.hide(),this._lastLineNumber=e,this._computer.setLineNumber(e),this._hoverOperation.start(0))},t.prototype.hide=function(){this._lastLineNumber=-1,this._hoverOperation.cancel(),e.prototype.hide.call(this)},t.prototype._withResult=function(e){this._messages=e,this._messages.length>0?this._renderMessages(this._lastLineNumber,this._messages):this.hide()},t.prototype._renderMessages=function(e,t){var n=this;Object(z.d)(this._renderDisposeables),this._renderDisposeables=[];var i=document.createDocumentFragment();t.forEach(function(e){var t=n._markdownRenderer.render(e.value);n._renderDisposeables.push(t),i.appendChild(Object(st.a)("div.hover-row",void 0,t.element))}),this.updateContents(i),this.showAt(e)},t.ID="editor.contrib.modesGlyphHoverWidget",t}(Hc),rl=n(219),sl=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),al=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},cl=function(e,t){return function(n,i){t(n,i,e)}},ll=function(){function e(e,t,n,i,o,r,s,a,c){var l=this;this._editor=e,this._openerService=t,this._modeService=n,this._markerDecorationsService=i,this._keybindingService=o,this._contextMenuService=r,this._bulkEditService=s,this._commandService=a,this._themeService=c,this._toUnhook=[],this._isMouseDown=!1,this._hoverClicked=!1,this._hookEvents(),this._didChangeConfigurationHandler=this._editor.onDidChangeConfiguration(function(e){e.contribInfo&&(l._hideWidgets(),l._unhookEvents(),l._hookEvents())})}return Object.defineProperty(e.prototype,"contentWidget",{get:function(){return this._contentWidget||this._createHoverWidget(),this._contentWidget},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"glyphWidget",{get:function(){return this._glyphWidget||this._createHoverWidget(),this._glyphWidget},enumerable:!0,configurable:!0}),e.get=function(t){return t.getContribution(e.ID)},e.prototype._hookEvents=function(){var e=this,t=function(){return e._hideWidgets()},n=this._editor.getConfiguration().contribInfo.hover;this._isHoverEnabled=n.enabled,this._isHoverSticky=n.sticky,this._isHoverEnabled?(this._toUnhook.push(this._editor.onMouseDown(function(t){return e._onEditorMouseDown(t)})),this._toUnhook.push(this._editor.onMouseUp(function(t){return e._onEditorMouseUp(t)})),this._toUnhook.push(this._editor.onMouseMove(function(t){return e._onEditorMouseMove(t)})),this._toUnhook.push(this._editor.onKeyDown(function(t){return e._onKeyDown(t)})),this._toUnhook.push(this._editor.onDidChangeModelDecorations(function(){return e._onModelDecorationsChanged()}))):this._toUnhook.push(this._editor.onMouseMove(t)),this._toUnhook.push(this._editor.onMouseLeave(t)),this._toUnhook.push(this._editor.onDidChangeModel(t)),this._toUnhook.push(this._editor.onDidScrollChange(function(t){return e._onEditorScrollChanged(t)}))},e.prototype._unhookEvents=function(){this._toUnhook=Object(z.d)(this._toUnhook)},e.prototype._onModelDecorationsChanged=function(){this.contentWidget.onModelDecorationsChanged(),this.glyphWidget.onModelDecorationsChanged()},e.prototype._onEditorScrollChanged=function(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()},e.prototype._onEditorMouseDown=function(e){this._isMouseDown=!0;var t=e.target.type;9!==t||e.target.detail!==tl.ID?12===t&&e.target.detail===ol.ID||(12!==t&&e.target.detail!==ol.ID&&(this._hoverClicked=!1),this._hideWidgets()):this._hoverClicked=!0},e.prototype._onEditorMouseUp=function(e){this._isMouseDown=!1},e.prototype._onEditorMouseMove=function(e){var t=e.target.type;if(!(this._isMouseDown&&this._hoverClicked&&this.contentWidget.isColorPickerVisible())&&(!this._isHoverSticky||9!==t||e.target.detail!==tl.ID)&&(!this._isHoverSticky||12!==t||e.target.detail!==ol.ID)){if(7===t){var n=this._editor.getConfiguration().fontInfo.typicalHalfwidthCharacterWidth/2,i=e.target.detail;i&&!i.isAfterLines&&"number"===typeof i.horizontalDistanceToText&&i.horizontalDistanceToText<n&&(t=6)}6===t?(this.glyphWidget.hide(),this._isHoverEnabled&&e.target.range&&this.contentWidget.startShowingAt(e.target.range,0,!1)):2===t?(this.contentWidget.hide(),this._isHoverEnabled&&e.target.position&&this.glyphWidget.startShowingAt(e.target.position.lineNumber)):this._hideWidgets()}},e.prototype._onKeyDown=function(e){5!==e.keyCode&&6!==e.keyCode&&57!==e.keyCode&&4!==e.keyCode&&this._hideWidgets()},e.prototype._hideWidgets=function(){!this._contentWidget||this._isMouseDown&&this._hoverClicked&&this._contentWidget.isColorPickerVisible()||(this._glyphWidget.hide(),this._contentWidget.hide())},e.prototype._createHoverWidget=function(){this._contentWidget=new tl(this._editor,this._markerDecorationsService,this._themeService,this._keybindingService,this._contextMenuService,this._bulkEditService,this._commandService,this._modeService,this._openerService),this._glyphWidget=new ol(this._editor,this._modeService,this._openerService)},e.prototype.showContentHover=function(e,t,n){this.contentWidget.startShowingAt(e,t,n)},e.prototype.getId=function(){return e.ID},e.prototype.dispose=function(){this._unhookEvents(),this._didChangeConfigurationHandler.dispose(),this._glyphWidget&&this._glyphWidget.dispose(),this._contentWidget&&this._contentWidget.dispose()},e.ID="editor.contrib.hover",e=al([cl(1,zc.a),cl(2,qa.a),cl(3,rl.a),cl(4,He.a),cl(5,Ve.a),cl(6,Me.a),cl(7,We.b),cl(8,X.c)],e)}(),ul=function(e){function t(){return e.call(this,{id:"editor.action.showHover",label:V.a({key:"showHover",comment:["Label for action that will trigger the showing of a hover in the editor.","This allows for users to show the hover without using the mouse."]},"Show Hover"),alias:"Show Hover",precondition:null,kbOpts:{kbExpr:G.a.editorTextFocus,primary:Object(Yt.a)(2089,2087),weight:100}})||this}return sl(t,e),t.prototype.run=function(e,t){if(t.hasModel()){var n=ll.get(t);if(n){var i=t.getPosition(),o=new se.a(i.lineNumber,i.column,i.lineNumber,i.column),r=2===t.getConfiguration().accessibilitySupport;n.showContentHover(o,1,r)}}},t}(U.b);Object(U.h)(ll),Object(U.f)(ul),Object(X.e)(function(e,t){var n=e.getColor(J.y);n&&t.addRule(".monaco-editor .hoverHighlight { background-color: "+n+"; }");var i=e.getColor(J.w);i&&t.addRule(".monaco-editor .monaco-editor-hover { background-color: "+i+"; }");var o=e.getColor(J.x);o&&(t.addRule(".monaco-editor .monaco-editor-hover { border: 1px solid "+o+"; }"),t.addRule(".monaco-editor .monaco-editor-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid "+o.transparent(.5)+"; }"),t.addRule(".monaco-editor .monaco-editor-hover hr { border-top: 1px solid "+o.transparent(.5)+"; }"),t.addRule(".monaco-editor .monaco-editor-hover hr { border-bottom: 0px solid "+o.transparent(.5)+"; }"));var r=e.getColor(J.Jb);r&&t.addRule(".monaco-editor .monaco-editor-hover a { color: "+r+"; }");var s=e.getColor(J.z);s&&t.addRule(".monaco-editor .monaco-editor-hover .hover-row .actions { background-color: "+s+"; }");var a=e.getColor(J.Ib);a&&t.addRule(".monaco-editor .monaco-editor-hover code { background-color: "+a+"; }")});var dl=function(){function e(e,t,n){this._editRange=e,this._originalSelection=t,this._text=n}return e.prototype.getEditOperations=function(e,t){t.addTrackedEditOperation(this._editRange,this._text)},e.prototype.computeCursorState=function(e,t){var n=t.getInverseEditOperations()[0].range;return this._originalSelection.isEmpty()?new q.a(n.endLineNumber,Math.min(this._originalSelection.positionColumn,n.endColumn),n.endLineNumber,Math.min(this._originalSelection.positionColumn,n.endColumn)):new q.a(n.endLineNumber,n.endColumn-this._text.length,n.endLineNumber,n.endColumn)},e}(),hl=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),pl=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},gl=function(e,t){return function(n,i){t(n,i,e)}},fl=function(){function e(e,t){this.decorationIds=[],this.editor=e,this.editorWorkerService=t}return e.get=function(t){return t.getContribution(e.ID)},e.prototype.dispose=function(){},e.prototype.getId=function(){return e.ID},e.prototype.run=function(t,n){var i=this;this.currentRequest&&this.currentRequest.cancel();var o=this.editor.getSelection(),r=this.editor.getModel();if(r&&o){var s=o;if(s.startLineNumber===s.endLineNumber){var a=new Qe.a(this.editor,5),c=r.uri;return this.editorWorkerService.canNavigateValueSet(c)?(this.currentRequest=Object(H.f)(function(e){return i.editorWorkerService.navigateValueSet(c,s,n)}),this.currentRequest.then(function(n){if(n&&n.range&&n.value&&a.validate(i.editor)){var o=se.a.lift(n.range),r=n.range,c=n.value.length-(s.endColumn-s.startColumn);r={startLineNumber:r.startLineNumber,startColumn:r.startColumn,endLineNumber:r.endLineNumber,endColumn:r.startColumn+n.value.length},c>1&&(s=new q.a(s.startLineNumber,s.startColumn,s.endLineNumber,s.endColumn+c-1));var l=new dl(o,s,n.value);i.editor.pushUndoStop(),i.editor.executeCommand(t,l),i.editor.pushUndoStop(),i.decorationIds=i.editor.deltaDecorations(i.decorationIds,[{range:r,options:e.DECORATION}]),i.decorationRemover&&i.decorationRemover.cancel(),i.decorationRemover=Object(H.j)(350),i.decorationRemover.then(function(){return i.decorationIds=i.editor.deltaDecorations(i.decorationIds,[])}).catch($e.e)}}).catch($e.e)):Promise.resolve(void 0)}}},e.ID="editor.contrib.inPlaceReplaceController",e.DECORATION=$.a.register({className:"valueSetReplacement"}),e=pl([gl(1,_r.a)],e)}(),ml=function(e){function t(){return e.call(this,{id:"editor.action.inPlaceReplace.up",label:V.a("InPlaceReplaceAction.previous.label","Replace with Previous Value"),alias:"Replace with Previous Value",precondition:G.a.writable,kbOpts:{kbExpr:G.a.editorTextFocus,primary:3154,weight:100}})||this}return hl(t,e),t.prototype.run=function(e,t){var n=fl.get(t);return n?n.run(this.id,!0):Promise.resolve(void 0)},t}(U.b),_l=function(e){function t(){return e.call(this,{id:"editor.action.inPlaceReplace.down",label:V.a("InPlaceReplaceAction.next.label","Replace with Next Value"),alias:"Replace with Next Value",precondition:G.a.writable,kbOpts:{kbExpr:G.a.editorTextFocus,primary:3156,weight:100}})||this}return hl(t,e),t.prototype.run=function(e,t){var n=fl.get(t);return n?n.run(this.id,!1):Promise.resolve(void 0)},t}(U.b);Object(U.h)(fl),Object(U.f)(ml),Object(U.f)(_l),Object(X.e)(function(e,t){var n=e.getColor(Y.d);n&&t.addRule(".monaco-editor.vs .valueSetReplacement { outline: solid 2px "+n+"; }")});var vl=function(){function e(e,t){this.selection=e,this.cursors=t}return e.prototype.getEditOperations=function(e,t){for(var n=function(e,t){t.sort(function(e,t){return e.lineNumber===t.lineNumber?e.column-t.column:e.lineNumber-t.lineNumber});for(var n=t.length-2;n>=0;n--)t[n].lineNumber===t[n+1].lineNumber&&t.splice(n,1);for(var i=[],o=0,r=0,s=t.length,a=1,c=e.getLineCount();a<=c;a++){var l=e.getLineContent(a),u=l.length+1,d=0;if(!(r<s&&t[r].lineNumber===a&&(d=t[r].column,r++,d===u))&&0!==l.length){var h=he.y(l),p=0;if(-1===h)p=1;else{if(h===l.length-1)continue;p=h+2}p=Math.max(d,p),i[o++]=Jt.a.delete(new se.a(a,p,a,u))}}return i}(e,this.cursors),i=0,o=n.length;i<o;i++){var r=n[i];t.addEditOperation(r.range,r.text)}this.selectionId=t.trackSelection(this.selection)},e.prototype.computeCursorState=function(e,t){return t.getTrackedSelection(this.selectionId)},e}();var bl=n(198),yl=function(){function e(e,t){this._selection=e,this._isCopyingDown=t}return e.prototype.getEditOperations=function(e,t){var n=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,n.startLineNumber<n.endLineNumber&&1===n.endColumn&&(this._endLineNumberDelta=1,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));for(var i=[],o=n.startLineNumber;o<=n.endLineNumber;o++)i.push(e.getLineContent(o));var r=i.join("\n");""===r&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._isCopyingDown?t.addEditOperation(new se.a(n.startLineNumber,1,n.startLineNumber,1),r+"\n"):t.addEditOperation(new se.a(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),"\n"+r),this._selectionId=t.trackSelection(n),this._selectionDirection=this._selection.getDirection()},e.prototype.computeCursorState=function(e,t){var n=t.getTrackedSelection(this._selectionId);if(0!==this._startLineNumberDelta||0!==this._endLineNumberDelta){var i=n.startLineNumber,o=n.startColumn,r=n.endLineNumber,s=n.endColumn;0!==this._startLineNumberDelta&&(i+=this._startLineNumberDelta,o=1),0!==this._endLineNumberDelta&&(r+=this._endLineNumberDelta,s=1),n=q.a.createWithDirection(i,o,r,s,this._selectionDirection)}return n},e}(),wl=n(213),Cl=n(146);function Sl(e,t){for(var n=0,i=0;i<e.length;i++)"\t"===e.charAt(i)?n+=t:n++;return n}function xl(e,t,n){e=e<0?0:e;var i="";if(!n){var o=Math.floor(e/t);e%=t;for(var r=0;r<o;r++)i+="\t"}for(r=0;r<e;r++)i+=" ";return i}var Ol=function(){function e(e,t,n){this._selection=e,this._isMovingDown=t,this._autoIndent=n,this._moveEndLineSelectionShrink=!1}return e.prototype.getEditOperations=function(e,t){var n=e.getLineCount();if((!this._isMovingDown||this._selection.endLineNumber!==n)&&(this._isMovingDown||1!==this._selection.startLineNumber)){this._moveEndPositionDown=!1;var i=this._selection;i.startLineNumber<i.endLineNumber&&1===i.endColumn&&(this._moveEndPositionDown=!0,i=i.setEndPosition(i.endLineNumber-1,e.getLineMaxColumn(i.endLineNumber-1)));var o=e.getOptions(),r=o.tabSize,s=o.indentSize,a=o.insertSpaces,c=this.buildIndentConverter(r,s,a),l={getLineTokens:function(t){return e.getLineTokens(t)},getLanguageIdentifier:function(){return e.getLanguageIdentifier()},getLanguageIdAtPosition:function(t,n){return e.getLanguageIdAtPosition(t,n)},getLineContent:null};if(i.startLineNumber===i.endLineNumber&&1===e.getLineMaxColumn(i.startLineNumber)){var u=i.startLineNumber,d=this._isMovingDown?u+1:u-1;1===e.getLineMaxColumn(d)?t.addEditOperation(new se.a(1,1,1,1),null):(t.addEditOperation(new se.a(u,1,u,1),e.getLineContent(d)),t.addEditOperation(new se.a(d,1,d,e.getLineMaxColumn(d)),null)),i=new q.a(d,1,d,1)}else{var h,p=void 0;if(this._isMovingDown){h=i.endLineNumber+1,p=e.getLineContent(h),t.addEditOperation(new se.a(h-1,e.getLineMaxColumn(h-1),h,e.getLineMaxColumn(h)),null);var g=p;if(this.shouldAutoIndent(e,i)){var f=this.matchEnterRule(e,c,r,h,i.startLineNumber-1);if(null!==f){var m=xl(S=f+Sl(v=he.q(e.getLineContent(h)),r),r,a);g=m+this.trimLeft(p)}else{l.getLineContent=function(t){return t===i.startLineNumber?e.getLineContent(h):e.getLineContent(t)};var _=Xt.a.getGoodIndentForLine(l,e.getLanguageIdAtPosition(h,1),i.startLineNumber,c);if(null!==_){var v=he.q(e.getLineContent(h));if((S=Sl(_,r))!==(x=Sl(v,r))){m=xl(S,r,a);g=m+this.trimLeft(p)}}}if(t.addEditOperation(new se.a(i.startLineNumber,1,i.startLineNumber,1),g+"\n"),null!==(w=this.matchEnterRule(e,c,r,i.startLineNumber,i.startLineNumber,g)))0!==w&&this.getIndentEditsOfMovingBlock(e,t,i,r,a,w);else{l.getLineContent=function(t){return t===i.startLineNumber?g:t>=i.startLineNumber+1&&t<=i.endLineNumber+1?e.getLineContent(t-1):e.getLineContent(t)};var b=Xt.a.getGoodIndentForLine(l,e.getLanguageIdAtPosition(h,1),i.startLineNumber+1,c);if(null!==b){v=he.q(e.getLineContent(i.startLineNumber));if((S=Sl(b,r))!==(x=Sl(v,r))){var y=S-x;this.getIndentEditsOfMovingBlock(e,t,i,r,a,y)}}}}else t.addEditOperation(new se.a(i.startLineNumber,1,i.startLineNumber,1),g+"\n")}else{var w;if(h=i.startLineNumber-1,p=e.getLineContent(h),t.addEditOperation(new se.a(h,1,h+1,1),null),t.addEditOperation(new se.a(i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),"\n"+p),this.shouldAutoIndent(e,i))if(l.getLineContent=function(t){return t===h?e.getLineContent(i.startLineNumber):e.getLineContent(t)},null!==(w=this.matchEnterRule(e,c,r,i.startLineNumber,i.startLineNumber-2)))0!==w&&this.getIndentEditsOfMovingBlock(e,t,i,r,a,w);else{var C=Xt.a.getGoodIndentForLine(l,e.getLanguageIdAtPosition(i.startLineNumber,1),h,c);if(null!==C){var S,x,O=he.q(e.getLineContent(i.startLineNumber));if((S=Sl(C,r))!==(x=Sl(O,r))){y=S-x;this.getIndentEditsOfMovingBlock(e,t,i,r,a,y)}}}}}this._selectionId=t.trackSelection(i)}},e.prototype.buildIndentConverter=function(e,t,n){return{shiftIndent:function(i){return wl.a.shiftIndent(i,i.length+1,e,t,n)},unshiftIndent:function(i){return wl.a.unshiftIndent(i,i.length+1,e,t,n)}}},e.prototype.matchEnterRule=function(e,t,n,i,o,r){for(var s=o;s>=1;){var a=void 0;if(a=s===o&&void 0!==r?r:e.getLineContent(s),he.y(a)>=0)break;s--}if(s<1||i>e.getLineCount())return null;var c=e.getLineMaxColumn(s),l=Xt.a.getEnterAction(e,new se.a(s,c,s,c));if(l){var u=l.indentation,d=l.enterAction;d.indentAction===Cl.a.None?u=l.indentation+d.appendText:d.indentAction===Cl.a.Indent?u=l.indentation+d.appendText:d.indentAction===Cl.a.IndentOutdent?u=l.indentation:d.indentAction===Cl.a.Outdent&&(u=t.unshiftIndent(l.indentation)+d.appendText);var h=e.getLineContent(i);if(this.trimLeft(h).indexOf(this.trimLeft(u))>=0){var p=he.q(e.getLineContent(i)),g=he.q(u),f=Xt.a.getIndentMetadata(e,i);return null!==f&&2&f&&(g=t.unshiftIndent(g)),Sl(g,n)-Sl(p,n)}}return null},e.prototype.trimLeft=function(e){return e.replace(/^\s+/,"")},e.prototype.shouldAutoIndent=function(e,t){if(!this._autoIndent)return!1;if(!e.isCheapToTokenize(t.startLineNumber))return!1;var n=e.getLanguageIdAtPosition(t.startLineNumber,1);return n===e.getLanguageIdAtPosition(t.endLineNumber,1)&&null!==Xt.a.getIndentRulesSupport(n)},e.prototype.getIndentEditsOfMovingBlock=function(e,t,n,i,o,r){for(var s=n.startLineNumber;s<=n.endLineNumber;s++){var a=e.getLineContent(s),c=he.q(a),l=xl(Sl(c,i)+r,i,o);l!==c&&(t.addEditOperation(new se.a(s,1,s,c.length+1),l),s===n.endLineNumber&&n.endColumn<=c.length+1&&""===l&&(this._moveEndLineSelectionShrink=!0))}},e.prototype.computeCursorState=function(e,t){var n=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(n=n.setEndPosition(n.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&n.startLineNumber<n.endLineNumber&&(n=n.setEndPosition(n.endLineNumber,2)),n},e}(),kl=function(){function e(e,t){this.selection=e,this.descending=t}return e.prototype.getEditOperations=function(e,t){var n=function(e,t,n){var i=Dl(e,t,n);if(!i)return null;return Jt.a.replace(new se.a(i.startLineNumber,1,i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),i.after.join("\n"))}(e,this.selection,this.descending);n&&t.addEditOperation(n.range,n.text),this.selectionId=t.trackSelection(this.selection)},e.prototype.computeCursorState=function(e,t){return t.getTrackedSelection(this.selectionId)},e.canRun=function(e,t,n){if(null===e)return!1;var i=Dl(e,t,n);if(!i)return!1;for(var o=0,r=i.before.length;o<r;o++)if(i.before[o]!==i.after[o])return!0;return!1},e}();function Dl(e,t,n){var i=t.startLineNumber,o=t.endLineNumber;if(1===t.endColumn&&o--,i>=o)return null;for(var r=[],s=i;s<=o;s++)r.push(e.getLineContent(s));var a=r.slice(0);return a.sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}),!0===n&&(a=a.reverse()),{startLineNumber:i,endLineNumber:o,before:r,after:a}}var Il=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Nl=function(e){function t(t,n){var i=e.call(this,n)||this;return i.down=t,i}return Il(t,e),t.prototype.run=function(e,t){for(var n=[],i=0,o=t.getSelections()||[];i<o.length;i++){var r=o[i];n.push(new yl(r,this.down))}t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()},t}(U.b),Ll=function(e){function t(){return e.call(this,!1,{id:"editor.action.copyLinesUpAction",label:V.a("lines.copyUp","Copy Line Up"),alias:"Copy Line Up",precondition:G.a.writable,kbOpts:{kbExpr:G.a.editorTextFocus,primary:1552,linux:{primary:3600},weight:100},menubarOpts:{menuId:22,group:"2_line",title:V.a({key:"miCopyLinesUp",comment:["&& denotes a mnemonic"]},"&&Copy Line Up"),order:1}})||this}return Il(t,e),t}(Nl),Ml=function(e){function t(){return e.call(this,!0,{id:"editor.action.copyLinesDownAction",label:V.a("lines.copyDown","Copy Line Down"),alias:"Copy Line Down",precondition:G.a.writable,kbOpts:{kbExpr:G.a.editorTextFocus,primary:1554,linux:{primary:3602},weight:100},menubarOpts:{menuId:22,group:"2_line",title:V.a({key:"miCopyLinesDown",comment:["&& denotes a mnemonic"]},"Co&&py Line Down"),order:2}})||this}return Il(t,e),t}(Nl),El=function(e){function t(t,n){var i=e.call(this,n)||this;return i.down=t,i}return Il(t,e),t.prototype.run=function(e,t){for(var n=[],i=t.getSelections()||[],o=t.getConfiguration().autoIndent,r=0,s=i;r<s.length;r++){var a=s[r];n.push(new Ol(a,this.down,o))}t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()},t}(U.b),Pl=function(e){function t(){return e.call(this,!1,{id:"editor.action.moveLinesUpAction",label:V.a("lines.moveUp","Move Line Up"),alias:"Move Line Up",precondition:G.a.writable,kbOpts:{kbExpr:G.a.editorTextFocus,primary:528,linux:{primary:528},weight:100},menubarOpts:{menuId:22,group:"2_line",title:V.a({key:"miMoveLinesUp",comment:["&& denotes a mnemonic"]},"Mo&&ve Line Up"),order:3}})||this}return Il(t,e),t}(El),Rl=function(e){function t(){return e.call(this,!0,{id:"editor.action.moveLinesDownAction",label:V.a("lines.moveDown","Move Line Down"),alias:"Move Line Down",precondition:G.a.writable,kbOpts:{kbExpr:G.a.editorTextFocus,primary:530,linux:{primary:530},weight:100},menubarOpts:{menuId:22,group:"2_line",title:V.a({key:"miMoveLinesDown",comment:["&& denotes a mnemonic"]},"Move &&Line Down"),order:4}})||this}return Il(t,e),t}(El),Tl=function(e){function t(t,n){var i=e.call(this,n)||this;return i.descending=t,i}return Il(t,e),t.prototype.run=function(e,t){for(var n=t.getSelections()||[],i=0,o=n;i<o.length;i++){var r=o[i];if(!kl.canRun(t.getModel(),r,this.descending))return}for(var s=[],a=0,c=n.length;a<c;a++)s[a]=new kl(n[a],this.descending);t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()},t}(U.b),Al=function(e){function t(){return e.call(this,!1,{id:"editor.action.sortLinesAscending",label:V.a("lines.sortAscending","Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:G.a.writable})||this}return Il(t,e),t}(Tl),jl=function(e){function t(){return e.call(this,!0,{id:"editor.action.sortLinesDescending",label:V.a("lines.sortDescending","Sort Lines Descending"),alias:"Sort Lines Descending",precondition:G.a.writable})||this}return Il(t,e),t}(Tl),Fl=function(e){function t(){return e.call(this,{id:t.ID,label:V.a("lines.trimTrailingWhitespace","Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:G.a.writable,kbOpts:{kbExpr:G.a.editorTextFocus,primary:Object(Yt.a)(2089,2102),weight:100}})||this}return Il(t,e),t.prototype.run=function(e,t,n){var i=[];"auto-save"===n.reason&&(i=(t.getSelections()||[]).map(function(e){return new K.a(e.positionLineNumber,e.positionColumn)}));var o=t.getSelection();if(null!==o){var r=new vl(o,i);t.pushUndoStop(),t.executeCommands(this.id,[r]),t.pushUndoStop()}},t.ID="editor.action.trimTrailingWhitespace",t}(U.b),Bl=function(e){function t(){return e.call(this,{id:"editor.action.deleteLines",label:V.a("lines.delete","Delete Line"),alias:"Delete Line",precondition:G.a.writable,kbOpts:{kbExpr:G.a.textInputFocus,primary:3113,weight:100}})||this}return Il(t,e),t.prototype.run=function(e,t){if(t.hasModel()){var n=this._getLinesToRemove(t),i=t.getModel();if(1!==i.getLineCount()||1!==i.getLineMaxColumn(1)){for(var o=0,r=[],s=[],a=0,c=n.length;a<c;a++){var l=n[a],u=l.startLineNumber,d=l.endLineNumber,h=1,p=i.getLineMaxColumn(d);d<i.getLineCount()?(d+=1,p=1):u>1&&(u-=1,h=i.getLineMaxColumn(u)),r.push(Jt.a.replace(new q.a(u,h,d,p),"")),s.push(new q.a(u-o,l.positionColumn,u-o,l.positionColumn)),o+=l.endLineNumber-l.startLineNumber+1}t.pushUndoStop(),t.executeEdits(this.id,r,s),t.pushUndoStop()}}},t.prototype._getLinesToRemove=function(e){var t=e.getSelections().map(function(e){var t=e.endLineNumber;return e.startLineNumber<e.endLineNumber&&1===e.endColumn&&(t-=1),{startLineNumber:e.startLineNumber,selectionStartColumn:e.selectionStartColumn,endLineNumber:t,positionColumn:e.positionColumn}});t.sort(function(e,t){return e.startLineNumber===t.startLineNumber?e.endLineNumber-t.endLineNumber:e.startLineNumber-t.startLineNumber});for(var n=[],i=t[0],o=1;o<t.length;o++)i.endLineNumber+1>=t[o].startLineNumber?i.endLineNumber=t[o].endLineNumber:(n.push(i),i=t[o]);return n.push(i),n},t}(U.b),Wl=function(e){function t(){return e.call(this,{id:"editor.action.indentLines",label:V.a("lines.indent","Indent Line"),alias:"Indent Line",precondition:G.a.writable,kbOpts:{kbExpr:G.a.editorTextFocus,primary:2137,weight:100}})||this}return Il(t,e),t.prototype.run=function(e,t){var n=t._getCursors();n&&(t.pushUndoStop(),t.executeCommands(this.id,bl.a.indent(n.context.config,t.getModel(),t.getSelections())),t.pushUndoStop())},t}(U.b),Vl=function(e){function t(){return e.call(this,{id:"editor.action.outdentLines",label:V.a("lines.outdent","Outdent Line"),alias:"Outdent Line",precondition:G.a.writable,kbOpts:{kbExpr:G.a.editorTextFocus,primary:2135,weight:100}})||this}return Il(t,e),t.prototype.run=function(e,t){B.a.Outdent.runEditorCommand(e,t,null)},t}(U.b),Hl=function(e){function t(){return e.call(this,{id:"editor.action.insertLineBefore",label:V.a("lines.insertBefore","Insert Line Above"),alias:"Insert Line Above",precondition:G.a.writable,kbOpts:{kbExpr:G.a.editorTextFocus,primary:3075,weight:100}})||this}return Il(t,e),t.prototype.run=function(e,t){var n=t._getCursors();n&&(t.pushUndoStop(),t.executeCommands(this.id,bl.a.lineInsertBefore(n.context.config,t.getModel(),t.getSelections())))},t}(U.b),zl=function(e){function t(){return e.call(this,{id:"editor.action.insertLineAfter",label:V.a("lines.insertAfter","Insert Line Below"),alias:"Insert Line Below",precondition:G.a.writable,kbOpts:{kbExpr:G.a.editorTextFocus,primary:2051,weight:100}})||this}return Il(t,e),t.prototype.run=function(e,t){var n=t._getCursors();n&&(t.pushUndoStop(),t.executeCommands(this.id,bl.a.lineInsertAfter(n.context.config,t.getModel(),t.getSelections())))},t}(U.b),Ul=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Il(t,e),t.prototype.run=function(e,t){if(t.hasModel()){for(var n=t.getSelection(),i=this._getRangesToDelete(t),o=[],r=0,s=i.length-1;r<s;r++){var a=i[r],c=i[r+1];null===se.a.intersectRanges(a,c)?o.push(a):i[r+1]=se.a.plusRange(a,c)}o.push(i[i.length-1]);var l=this._getEndCursorState(n,o),u=o.map(function(e){return Jt.a.replace(e,"")});t.pushUndoStop(),t.executeEdits(this.id,u,l),t.pushUndoStop()}},t}(U.b),Kl=function(e){function t(){return e.call(this,{id:"deleteAllLeft",label:V.a("lines.deleteAllLeft","Delete All Left"),alias:"Delete All Left",precondition:G.a.writable,kbOpts:{kbExpr:G.a.textInputFocus,primary:0,mac:{primary:2049},weight:100}})||this}return Il(t,e),t.prototype._getEndCursorState=function(e,t){var n=null,i=[],o=0;return t.forEach(function(t){var r;if(1===t.endColumn&&o>0){var s=t.startLineNumber-o;r=new q.a(s,t.startColumn,s,t.startColumn)}else r=new q.a(t.startLineNumber,t.startColumn,t.startLineNumber,t.startColumn);o+=t.endLineNumber-t.startLineNumber,t.intersectRanges(e)?n=r:i.push(r)}),n&&i.unshift(n),i},t.prototype._getRangesToDelete=function(e){var t=e.getSelections();if(null===t)return[];var n=t,i=e.getModel();return null===i?[]:(n.sort(se.a.compareRangesUsingStarts),n=n.map(function(e){if(e.isEmpty()){if(1===e.startColumn){var t=Math.max(1,e.startLineNumber-1),n=1===e.startLineNumber?1:i.getLineContent(t).length+1;return new se.a(t,n,e.startLineNumber,1)}return new se.a(e.startLineNumber,1,e.startLineNumber,e.startColumn)}return e}))},t}(Ul),ql=function(e){function t(){return e.call(this,{id:"deleteAllRight",label:V.a("lines.deleteAllRight","Delete All Right"),alias:"Delete All Right",precondition:G.a.writable,kbOpts:{kbExpr:G.a.textInputFocus,primary:0,mac:{primary:297,secondary:[2068]},weight:100}})||this}return Il(t,e),t.prototype._getEndCursorState=function(e,t){for(var n=null,i=[],o=0,r=t.length;o<r;o++){var s=t[o],a=new q.a(s.startLineNumber-0,s.startColumn,s.startLineNumber-0,s.startColumn);s.intersectRanges(e)?n=a:i.push(a)}return n&&i.unshift(n),i},t.prototype._getRangesToDelete=function(e){var t=e.getModel();if(null===t)return[];var n=e.getSelections();if(null===n)return[];var i=n.map(function(e){if(e.isEmpty()){var n=t.getLineMaxColumn(e.startLineNumber);return e.startColumn===n?new se.a(e.startLineNumber,e.startColumn,e.startLineNumber+1,1):new se.a(e.startLineNumber,e.startColumn,e.startLineNumber,n)}return e});return i.sort(se.a.compareRangesUsingStarts),i},t}(Ul),Gl=function(e){function t(){return e.call(this,{id:"editor.action.joinLines",label:V.a("lines.joinLines","Join Lines"),alias:"Join Lines",precondition:G.a.writable,kbOpts:{kbExpr:G.a.editorTextFocus,primary:0,mac:{primary:296},weight:100}})||this}return Il(t,e),t.prototype.run=function(e,t){var n=t.getSelections();if(null!==n){var i=t.getSelection();if(null!==i){n.sort(se.a.compareRangesUsingStarts);var o=[],r=n.reduce(function(e,t){return e.isEmpty()?e.endLineNumber===t.startLineNumber?(i.equalsSelection(e)&&(i=t),t):t.startLineNumber>e.endLineNumber+1?(o.push(e),t):new q.a(e.startLineNumber,e.startColumn,t.endLineNumber,t.endColumn):t.startLineNumber>e.endLineNumber?(o.push(e),t):new q.a(e.startLineNumber,e.startColumn,t.endLineNumber,t.endColumn)});o.push(r);var s=t.getModel();if(null!==s){for(var a=[],c=[],l=i,u=0,d=0,h=o.length;d<h;d++){var p=o[d],g=p.startLineNumber,f=0,m=void 0,_=void 0,v=s.getLineContent(p.endLineNumber).length-p.endColumn;if(p.isEmpty()||p.startLineNumber===p.endLineNumber){var b=p.getStartPosition();b.lineNumber<s.getLineCount()?(m=g+1,_=s.getLineMaxColumn(m)):(m=b.lineNumber,_=s.getLineMaxColumn(b.lineNumber))}else m=p.endLineNumber,_=s.getLineMaxColumn(m);for(var y=s.getLineContent(g),w=g+1;w<=m;w++){var C=s.getLineContent(w),S=s.getLineFirstNonWhitespaceColumn(w);if(S>=1){var x=!0;""===y&&(x=!1),!x||" "!==y.charAt(y.length-1)&&"\t"!==y.charAt(y.length-1)||(x=!1,y=y.replace(/[\s\uFEFF\xA0]+$/g," "));var O=C.substr(S-1);y+=(x?" ":"")+O,f=x?O.length+1:O.length}else f=0}var k=new se.a(g,1,m,_);if(!k.isEmpty()){var D=void 0;p.isEmpty()?(a.push(Jt.a.replace(k,y)),D=new q.a(k.startLineNumber-u,y.length-f+1,g-u,y.length-f+1)):p.startLineNumber===p.endLineNumber?(a.push(Jt.a.replace(k,y)),D=new q.a(p.startLineNumber-u,p.startColumn,p.endLineNumber-u,p.endColumn)):(a.push(Jt.a.replace(k,y)),D=new q.a(p.startLineNumber-u,p.startColumn,p.startLineNumber-u,y.length-v)),null!==se.a.intersectRanges(k,i)?l=D:c.push(D)}u+=k.endLineNumber-k.startLineNumber}c.unshift(l),t.pushUndoStop(),t.executeEdits(this.id,a,c),t.pushUndoStop()}}}},t}(U.b),Zl=function(e){function t(){return e.call(this,{id:"editor.action.transpose",label:V.a("editor.transpose","Transpose characters around the cursor"),alias:"Transpose characters around the cursor",precondition:G.a.writable})||this}return Il(t,e),t.prototype.run=function(e,t){var n=t.getSelections();if(null!==n){var i=t.getModel();if(null!==i){for(var o=[],r=0,s=n.length;r<s;r++){var a=n[r];if(a.isEmpty()){var c=a.getStartPosition(),l=i.getLineMaxColumn(c.lineNumber);if(c.column>=l){if(c.lineNumber===i.getLineCount())continue;var u=new se.a(c.lineNumber,Math.max(1,c.column-1),c.lineNumber+1,1),d=i.getValueInRange(u).split("").reverse().join("");o.push(new pe.a(new q.a(c.lineNumber,Math.max(1,c.column-1),c.lineNumber+1,1),d))}else{u=new se.a(c.lineNumber,Math.max(1,c.column-1),c.lineNumber,c.column+1),d=i.getValueInRange(u).split("").reverse().join("");o.push(new pe.b(u,d,new q.a(c.lineNumber,c.column+1,c.lineNumber,c.column+1)))}}}t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}},t}(U.b),$l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Il(t,e),t.prototype.run=function(e,t){var n=t.getSelections();if(null!==n){var i=t.getModel();if(null!==i){for(var o=t.getConfiguration().wordSeparators,r=[],s=0,a=n.length;s<a;s++){var c=n[s];if(c.isEmpty()){var l=c.getStartPosition(),u=i.getWordAtPosition(l);if(!u)continue;var d=new se.a(l.lineNumber,u.startColumn,l.lineNumber,u.endColumn),h=i.getValueInRange(d);r.push(new pe.b(d,this._modifyText(h,o),new q.a(l.lineNumber,l.column,l.lineNumber,l.column)))}else{h=i.getValueInRange(c);r.push(new pe.b(c,this._modifyText(h,o),c))}}t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop()}}},t}(U.b),Yl=function(e){function t(){return e.call(this,{id:"editor.action.transformToUppercase",label:V.a("editor.transformToUppercase","Transform to Uppercase"),alias:"Transform to Uppercase",precondition:G.a.writable})||this}return Il(t,e),t.prototype._modifyText=function(e,t){return e.toLocaleUpperCase()},t}($l),Jl=function(e){function t(){return e.call(this,{id:"editor.action.transformToLowercase",label:V.a("editor.transformToLowercase","Transform to Lowercase"),alias:"Transform to Lowercase",precondition:G.a.writable})||this}return Il(t,e),t.prototype._modifyText=function(e,t){return e.toLocaleLowerCase()},t}($l),Xl=function(e){function t(){return e.call(this,{id:"editor.action.transformToTitlecase",label:V.a("editor.transformToTitlecase","Transform to Title Case"),alias:"Transform to Title Case",precondition:G.a.writable})||this}return Il(t,e),t.prototype._modifyText=function(e,t){for(var n=("\r\n\t "+t).split(""),i="",o=!0,r=0;r<e.length;r++){var s=e[r];n.indexOf(s)>=0?(o=!0,i+=s):o?(o=!1,i+=s.toLocaleUpperCase()):i+=s.toLocaleLowerCase()}return i},t}($l);Object(U.f)(Ll),Object(U.f)(Ml),Object(U.f)(Pl),Object(U.f)(Rl),Object(U.f)(Al),Object(U.f)(jl),Object(U.f)(Fl),Object(U.f)(Bl),Object(U.f)(Wl),Object(U.f)(Vl),Object(U.f)(Hl),Object(U.f)(zl),Object(U.f)(Kl),Object(U.f)(ql),Object(U.f)(Gl),Object(U.f)(Zl),Object(U.f)(Yl),Object(U.f)(Jl),Object(U.f)(Xl);n(283);var Ql=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),eu=function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function s(e){try{c(i.next(e))}catch(t){r(t)}}function a(e){try{c(i.throw(e))}catch(t){r(t)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((i=i.apply(e,t||[])).next())})},tu=function(e,t){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(a){r=[6,a],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},nu=function(){function e(e,t){this._link=e,this._provider=t}return e.prototype.toJSON=function(){return{range:this.range,url:this.url}},Object.defineProperty(e.prototype,"range",{get:function(){return this._link.range},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this._link.url},enumerable:!0,configurable:!0}),e.prototype.resolve=function(e){var t=this;if(this._link.url)try{return"string"===typeof this._link.url?Promise.resolve(Ye.a.parse(this._link.url)):Promise.resolve(this._link.url)}catch(n){return Promise.reject(new Error("invalid"))}return"function"===typeof this._provider.resolveLink?Promise.resolve(this._provider.resolveLink(this._link,e)).then(function(n){return t._link=n||t._link,t._link.url?t.resolve(e):Promise.reject(new Error("missing"))}):Promise.reject(new Error("missing"))},e}(),iu=function(e){function t(n){for(var i=e.call(this)||this,o=[],r=function(e,n){var i=e.links.map(function(e){return new nu(e,n)});o=t._union(o,i),Object(z.e)(n)&&s._register(n)},s=this,a=0,c=n;a<c.length;a++){var l=c[a];r(l[0],l[1])}return i.links=o,i}return Ql(t,e),t._union=function(e,t){var n,i,o,r,s=[];for(n=0,o=0,i=e.length,r=t.length;n<i&&o<r;){var a=e[n],c=t[o];if(se.a.areIntersectingOrTouching(a.range,c.range))n++;else se.a.compareRangesUsingStarts(a.range,c.range)<0?(s.push(a),n++):(s.push(c),o++)}for(;n<i;n++)s.push(e[n]);for(;o<r;o++)s.push(t[o]);return s},t}(z.a);function ou(e,t){var n=[],i=qe.q.ordered(e).reverse().map(function(i,o){return Promise.resolve(i.provideLinks(e,t)).then(function(e){e&&(n[o]=[e,i])},$e.f)});return Promise.all(i).then(function(){return new iu(Object(Ge.d)(n))})}We.a.registerCommand("_executeLinkProvider",function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return eu(void 0,void 0,void 0,function(){var n,i,o,r;return tu(this,function(s){switch(s.label){case 0:return(n=t[0])instanceof Ye.a&&(i=e.get(Je.a).getModel(n))?[4,ou(i,Ze.a.None)]:[2,[]];case 1:return(o=s.sent())?(r=o.links.slice(0),o.dispose(),[2,r]):[2,[]]}})})});var ru=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),su=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},au=function(e,t){return function(n,i){t(n,i,e)}},cu=function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function s(e){try{c(i.next(e))}catch(t){r(t)}}function a(e){try{c(i.throw(e))}catch(t){r(t)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((i=i.apply(e,t||[])).next())})},lu=function(e,t){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(a){r=[6,a],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},uu=(new oi).appendText(_e.d?V.a("links.navigate.mac","Cmd + click to follow link"):V.a("links.navigate","Ctrl + click to follow link")),du=(new oi).appendText(_e.d?V.a("links.command.mac","Cmd + click to execute command"):V.a("links.command","Ctrl + click to execute command")),hu=(new oi).appendText(_e.d?V.a("links.navigate.al.mac","Option + click to follow link"):V.a("links.navigate.al","Alt + click to follow link")),pu=(new oi).appendText(_e.d?V.a("links.command.al.mac","Option + click to execute command"):V.a("links.command.al","Alt + click to execute command")),gu={meta:$.a.register({stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link",hoverMessage:uu}),metaActive:$.a.register({stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active",hoverMessage:uu}),alt:$.a.register({stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link",hoverMessage:hu}),altActive:$.a.register({stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active",hoverMessage:hu}),altCommand:$.a.register({stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link",hoverMessage:pu}),altCommandActive:$.a.register({stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active",hoverMessage:pu}),metaCommand:$.a.register({stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link",hoverMessage:du}),metaCommandActive:$.a.register({stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active",hoverMessage:du})},fu=function(){function e(e,t){this.link=e,this.decorationId=t}return e.decoration=function(t,n){return{range:t.range,options:e._getOptions(t,n,!1)}},e._getOptions=function(e,t,n){return e.url&&/^command:/i.test(e.url.toString())?t?n?gu.metaCommandActive:gu.metaCommand:n?gu.altCommandActive:gu.altCommand:t?n?gu.metaActive:gu.meta:n?gu.altActive:gu.alt},e.prototype.activate=function(t,n){t.changeDecorationOptions(this.decorationId,e._getOptions(this.link,n,!0))},e.prototype.deactivate=function(t,n){t.changeDecorationOptions(this.decorationId,e._getOptions(this.link,n,!1))},e}(),mu=function(){function e(e,t,n){var i=this;this.editor=e,this.openerService=t,this.notificationService=n,this.listenersToRemove=[];var o=new Qa(e);this.listenersToRemove.push(o),this.listenersToRemove.push(o.onMouseMoveOrRelevantKeyDown(function(e){var t=e[0],n=e[1];i._onEditorMouseMove(t,n)})),this.listenersToRemove.push(o.onExecute(function(e){i.onEditorMouseUp(e)})),this.listenersToRemove.push(o.onCancel(function(e){i.cleanUpActiveLinkDecoration()})),this.enabled=e.getConfiguration().contribInfo.links,this.listenersToRemove.push(e.onDidChangeConfiguration(function(t){var n=e.getConfiguration().contribInfo.links;i.enabled!==n&&(i.enabled=n,i.updateDecorations([]),i.stop(),i.beginCompute())})),this.listenersToRemove.push(e.onDidChangeModelContent(function(e){return i.onChange()})),this.listenersToRemove.push(e.onDidChangeModel(function(e){return i.onModelChanged()})),this.listenersToRemove.push(e.onDidChangeModelLanguage(function(e){return i.onModelModeChanged()})),this.listenersToRemove.push(qe.q.onDidChange(function(e){return i.onModelModeChanged()})),this.timeout=new H.e,this.computePromise=null,this.activeLinksList=null,this.currentOccurrences={},this.activeLinkDecorationId=null,this.beginCompute()}return e.get=function(t){return t.getContribution(e.ID)},e.prototype.getId=function(){return e.ID},e.prototype.onModelChanged=function(){this.currentOccurrences={},this.activeLinkDecorationId=null,this.stop(),this.beginCompute()},e.prototype.onModelModeChanged=function(){this.stop(),this.beginCompute()},e.prototype.onChange=function(){var t=this;this.timeout.setIfNotSet(function(){return t.beginCompute()},e.RECOMPUTE_TIME)},e.prototype.beginCompute=function(){return cu(this,void 0,void 0,function(){var e,t,n;return lu(this,function(i){switch(i.label){case 0:if(!this.editor.hasModel()||!this.enabled)return[2];if(e=this.editor.getModel(),!qe.q.has(e))return[2];this.activeLinksList&&(this.activeLinksList.dispose(),this.activeLinksList=null),this.computePromise=H.f(function(t){return ou(e,t)}),i.label=1;case 1:return i.trys.push([1,3,4,5]),t=this,[4,this.computePromise];case 2:return t.activeLinksList=i.sent(),this.updateDecorations(this.activeLinksList.links),[3,5];case 3:return n=i.sent(),Object($e.e)(n),[3,5];case 4:return this.computePromise=null,[7];case 5:return[2]}})})},e.prototype.updateDecorations=function(e){for(var t="altKey"===this.editor.getConfiguration().multiCursorModifier,n=[],i=Object.keys(this.currentOccurrences),o=0,r=i.length;o<r;o++){var s=i[o],a=this.currentOccurrences[s];n.push(a.decorationId)}var c=[];if(e)for(var l=0,u=e;l<u.length;l++){var d=u[l];c.push(fu.decoration(d,t))}var h=this.editor.deltaDecorations(n,c);this.currentOccurrences={},this.activeLinkDecorationId=null;for(o=0,r=h.length;o<r;o++){a=new fu(e[o],h[o]);this.currentOccurrences[a.decorationId]=a}},e.prototype._onEditorMouseMove=function(e,t){var n=this,i="altKey"===this.editor.getConfiguration().multiCursorModifier;if(this.isEnabled(e,t)){this.cleanUpActiveLinkDecoration();var o=this.getLinkOccurrence(e.target.position);o&&this.editor.changeDecorations(function(e){o.activate(e,i),n.activeLinkDecorationId=o.decorationId})}else this.cleanUpActiveLinkDecoration()},e.prototype.cleanUpActiveLinkDecoration=function(){var e="altKey"===this.editor.getConfiguration().multiCursorModifier;if(this.activeLinkDecorationId){var t=this.currentOccurrences[this.activeLinkDecorationId];t&&this.editor.changeDecorations(function(n){t.deactivate(n,e)}),this.activeLinkDecorationId=null}},e.prototype.onEditorMouseUp=function(e){if(this.isEnabled(e)){var t=this.getLinkOccurrence(e.target.position);t&&this.openLinkOccurrence(t,e.hasSideBySideModifier)}},e.prototype.openLinkOccurrence=function(e,t){var n=this;if(this.openerService){var i=e.link;i.resolve(Ze.a.None).then(function(e){return n.openerService.open(e,{openToSide:t})},function(e){"invalid"===e?n.notificationService.warn(V.a("invalid.url","Failed to open this link because it is not well-formed: {0}",i.url.toString())):"missing"===e?n.notificationService.warn(V.a("missing.url","Failed to open this link because its target is missing.")):Object($e.e)(e)})}},e.prototype.getLinkOccurrence=function(e){if(!this.editor.hasModel()||!e)return null;for(var t=0,n=this.editor.getModel().getDecorationsInRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},0,!0);t<n.length;t++){var i=n[t],o=this.currentOccurrences[i.id];if(o)return o}return null},e.prototype.isEnabled=function(e,t){return Boolean(6===e.target.type&&(e.hasTriggerModifier||t&&t.keyCodeIsTriggerKey))},e.prototype.stop=function(){this.timeout.cancel(),this.activeLinksList&&this.activeLinksList.dispose(),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)},e.prototype.dispose=function(){this.listenersToRemove=Object(z.d)(this.listenersToRemove),this.stop(),this.timeout.dispose()},e.ID="editor.linkDetector",e.RECOMPUTE_TIME=1e3,e=su([au(1,zc.a),au(2,At.a)],e)}(),_u=function(e){function t(){return e.call(this,{id:"editor.action.openLink",label:V.a("label","Open Link"),alias:"Open Link",precondition:null})||this}return ru(t,e),t.prototype.run=function(e,t){var n=mu.get(t);if(n&&t.hasModel())for(var i=0,o=t.getSelections();i<o.length;i++){var r=o[i],s=n.getLinkOccurrence(r.getEndPosition());s&&n.openLinkOccurrence(s,!1)}},t}(U.b);Object(U.h)(mu),Object(U.f)(_u),Object(X.e)(function(e,t){var n=e.getColor(J.n);n&&t.addRule(".monaco-editor .detected-link-active { color: "+n+" !important; }")});var vu=n(212),bu=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),yu=function(e){function t(){return e.call(this,{id:"editor.action.insertCursorAbove",label:V.a("mutlicursor.insertAbove","Add Cursor Above"),alias:"Add Cursor Above",precondition:null,kbOpts:{kbExpr:G.a.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menubarOpts:{menuId:22,group:"3_multi",title:V.a({key:"miInsertCursorAbove",comment:["&& denotes a mnemonic"]},"&&Add Cursor Above"),order:2}})||this}return bu(t,e),t.prototype.run=function(e,t,n){if(t.hasModel()){var i=n&&!0===n.logicalLine,o=t._getCursors(),r=o.context;r.config.readOnly||(r.model.pushStackElement(),o.setStates(n.source,3,vu.b.addCursorUp(r,o.getAll(),i)),o.reveal(!0,1,0))}},t}(U.b),wu=function(e){function t(){return e.call(this,{id:"editor.action.insertCursorBelow",label:V.a("mutlicursor.insertBelow","Add Cursor Below"),alias:"Add Cursor Below",precondition:null,kbOpts:{kbExpr:G.a.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menubarOpts:{menuId:22,group:"3_multi",title:V.a({key:"miInsertCursorBelow",comment:["&& denotes a mnemonic"]},"A&&dd Cursor Below"),order:3}})||this}return bu(t,e),t.prototype.run=function(e,t,n){if(t.hasModel()){var i=n&&!0===n.logicalLine,o=t._getCursors(),r=o.context;r.config.readOnly||(r.model.pushStackElement(),o.setStates(n.source,3,vu.b.addCursorDown(r,o.getAll(),i)),o.reveal(!0,2,0))}},t}(U.b),Cu=function(e){function t(){return e.call(this,{id:"editor.action.insertCursorAtEndOfEachLineSelected",label:V.a("mutlicursor.insertAtEndOfEachLineSelected","Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:null,kbOpts:{kbExpr:G.a.editorTextFocus,primary:1575,weight:100},menubarOpts:{menuId:22,group:"3_multi",title:V.a({key:"miInsertCursorAtEndOfEachLineSelected",comment:["&& denotes a mnemonic"]},"Add C&&ursors to Line Ends"),order:4}})||this}return bu(t,e),t.prototype.getCursorsForSelection=function(e,t,n){if(!e.isEmpty()){for(var i=e.startLineNumber;i<e.endLineNumber;i++){var o=t.getLineMaxColumn(i);n.push(new q.a(i,o,i,o))}e.endColumn>1&&n.push(new q.a(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn))}},t.prototype.run=function(e,t){var n=this;if(t.hasModel()){var i=t.getModel(),o=t.getSelections(),r=[];o.forEach(function(e){return n.getCursorsForSelection(e,i,r)}),r.length>0&&t.setSelections(r)}},t}(U.b),Su=function(e){function t(){return e.call(this,{id:"editor.action.addCursorsToBottom",label:V.a("mutlicursor.addCursorsToBottom","Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:null})||this}return bu(t,e),t.prototype.run=function(e,t){if(t.hasModel()){for(var n=t.getSelections(),i=t.getModel().getLineCount(),o=[],r=n[0].startLineNumber;r<=i;r++)o.push(new q.a(r,n[0].startColumn,r,n[0].endColumn));o.length>0&&t.setSelections(o)}},t}(U.b),xu=function(e){function t(){return e.call(this,{id:"editor.action.addCursorsToTop",label:V.a("mutlicursor.addCursorsToTop","Add Cursors To Top"),alias:"Add Cursors To Top",precondition:null})||this}return bu(t,e),t.prototype.run=function(e,t){if(t.hasModel()){for(var n=t.getSelections(),i=[],o=n[0].startLineNumber;o>=1;o--)i.push(new q.a(o,n[0].startColumn,o,n[0].endColumn));i.length>0&&t.setSelections(i)}},t}(U.b),Ou=function(){return function(e,t,n){this.selections=e,this.revealRange=t,this.revealScrollType=n}}(),ku=function(){function e(e,t,n,i,o,r,s){this._editor=e,this.findController=t,this.isDisconnectedFromFindController=n,this.searchText=i,this.wholeWord=o,this.matchCase=r,this.currentMatch=s}return e.create=function(t,n){if(!t.hasModel())return null;var i=n.getState();if(!t.hasTextFocus()&&i.isRevealed&&i.searchString.length>0)return new e(t,n,!1,i.searchString,i.wholeWord,i.matchCase,null);var o,r,s=!1,a=t.getSelections();1===a.length&&a[0].isEmpty()?(s=!0,o=!0,r=!0):(o=i.wholeWord,r=i.matchCase);var c,l=t.getSelection(),u=null;if(l.isEmpty()){var d=t.getModel().getWordAtPosition(l.getStartPosition());if(!d)return null;c=d.word,u=new q.a(l.startLineNumber,d.startColumn,l.startLineNumber,d.endColumn)}else c=t.getModel().getValueInRange(l).replace(/\r\n/g,"\n");return new e(t,n,s,c,o,r,u)},e.prototype.addSelectionToNextFindMatch=function(){if(!this._editor.hasModel())return null;var e=this._getNextMatch();if(!e)return null;var t=this._editor.getSelections();return new Ou(t.concat(e),e,0)},e.prototype.moveSelectionToNextFindMatch=function(){if(!this._editor.hasModel())return null;var e=this._getNextMatch();if(!e)return null;var t=this._editor.getSelections();return new Ou(t.slice(0,t.length-1).concat(e),e,0)},e.prototype._getNextMatch=function(){if(!this._editor.hasModel())return null;if(this.currentMatch){var e=this.currentMatch;return this.currentMatch=null,e}this.findController.highlightFindOptions();var t=this._editor.getSelections(),n=t[t.length-1],i=this._editor.getModel().findNextMatch(this.searchText,n.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getConfiguration().wordSeparators:null,!1);return i?new q.a(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn):null},e.prototype.addSelectionToPreviousFindMatch=function(){if(!this._editor.hasModel())return null;var e=this._getPreviousMatch();if(!e)return null;var t=this._editor.getSelections();return new Ou(t.concat(e),e,0)},e.prototype.moveSelectionToPreviousFindMatch=function(){if(!this._editor.hasModel())return null;var e=this._getPreviousMatch();if(!e)return null;var t=this._editor.getSelections();return new Ou(t.slice(0,t.length-1).concat(e),e,0)},e.prototype._getPreviousMatch=function(){if(!this._editor.hasModel())return null;if(this.currentMatch){var e=this.currentMatch;return this.currentMatch=null,e}this.findController.highlightFindOptions();var t=this._editor.getSelections(),n=t[t.length-1],i=this._editor.getModel().findPreviousMatch(this.searchText,n.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getConfiguration().wordSeparators:null,!1);return i?new q.a(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn):null},e.prototype.selectAll=function(){return this._editor.hasModel()?(this.findController.highlightFindOptions(),this._editor.getModel().findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getConfiguration().wordSeparators:null,!1,1073741824)):[]},e}(),Du=function(e){function t(t){var n=e.call(this)||this;return n._editor=t,n._ignoreSelectionChange=!1,n._session=null,n._sessionDispose=[],n}return bu(t,e),t.get=function(e){return e.getContribution(t.ID)},t.prototype.dispose=function(){this._endSession(),e.prototype.dispose.call(this)},t.prototype.getId=function(){return t.ID},t.prototype._beginSessionIfNeeded=function(e){var t=this;if(!this._session){var n=ku.create(this._editor,e);if(!n)return;this._session=n;var i={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(i.wholeWordOverride=1,i.matchCaseOverride=1,i.isRegexOverride=2),e.getState().change(i,!1),this._sessionDispose=[this._editor.onDidChangeCursorSelection(function(e){t._ignoreSelectionChange||t._endSession()}),this._editor.onDidBlurEditorText(function(){t._endSession()}),e.getState().onFindReplaceStateChange(function(e){(e.matchCase||e.wholeWord)&&t._endSession()})]}},t.prototype._endSession=function(){if(this._sessionDispose=Object(z.d)(this._sessionDispose),this._session&&this._session.isDisconnectedFromFindController){this._session.findController.getState().change({wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0},!1)}this._session=null},t.prototype._setSelections=function(e){this._ignoreSelectionChange=!0,this._editor.setSelections(e),this._ignoreSelectionChange=!1},t.prototype._expandEmptyToWord=function(e,t){if(!t.isEmpty())return t;var n=e.getWordAtPosition(t.getStartPosition());return n?new q.a(t.startLineNumber,n.startColumn,t.startLineNumber,n.endColumn):t},t.prototype._applySessionResult=function(e){e&&(this._setSelections(e.selections),e.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(e.revealRange,e.revealScrollType))},t.prototype.getSession=function(e){return this._session},t.prototype.addSelectionToNextFindMatch=function(e){if(this._editor.hasModel()){if(!this._session){var t=this._editor.getSelections();if(t.length>1){var n=e.getState().matchCase;if(!ju(this._editor.getModel(),t,n)){for(var i=this._editor.getModel(),o=[],r=0,s=t.length;r<s;r++)o[r]=this._expandEmptyToWord(i,t[r]);return void this._editor.setSelections(o)}}}this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}},t.prototype.addSelectionToPreviousFindMatch=function(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())},t.prototype.moveSelectionToNextFindMatch=function(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())},t.prototype.moveSelectionToPreviousFindMatch=function(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())},t.prototype.selectAll=function(e){if(this._editor.hasModel()){var t=null,n=e.getState();if(n.isRevealed&&n.searchString.length>0&&n.isRegex)t=this._editor.getModel().findMatches(n.searchString,!0,n.isRegex,n.matchCase,n.wholeWord?this._editor.getConfiguration().wordSeparators:null,!1,1073741824);else{if(this._beginSessionIfNeeded(e),!this._session)return;t=this._session.selectAll()}if(t.length>0){for(var i=this._editor.getSelection(),o=0,r=t.length;o<r;o++){var s=t[o];if(s.range.intersectRanges(i)){t[o]=t[0],t[0]=s;break}}this._setSelections(t.map(function(e){return new q.a(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn)}))}}},t.ID="editor.contrib.multiCursorController",t}(z.a),Iu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return bu(t,e),t.prototype.run=function(e,t){var n=Du.get(t);if(n){var i=po.get(t);i&&this._run(n,i)}},t}(U.b),Nu=function(e){function t(){return e.call(this,{id:"editor.action.addSelectionToNextFindMatch",label:V.a("addSelectionToNextFindMatch","Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:null,kbOpts:{kbExpr:G.a.focus,primary:2082,weight:100},menubarOpts:{menuId:22,group:"3_multi",title:V.a({key:"miAddSelectionToNextFindMatch",comment:["&& denotes a mnemonic"]},"Add &&Next Occurrence"),order:5}})||this}return bu(t,e),t.prototype._run=function(e,t){e.addSelectionToNextFindMatch(t)},t}(Iu),Lu=function(e){function t(){return e.call(this,{id:"editor.action.addSelectionToPreviousFindMatch",label:V.a("addSelectionToPreviousFindMatch","Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:null,menubarOpts:{menuId:22,group:"3_multi",title:V.a({key:"miAddSelectionToPreviousFindMatch",comment:["&& denotes a mnemonic"]},"Add P&&revious Occurrence"),order:6}})||this}return bu(t,e),t.prototype._run=function(e,t){e.addSelectionToPreviousFindMatch(t)},t}(Iu),Mu=function(e){function t(){return e.call(this,{id:"editor.action.moveSelectionToNextFindMatch",label:V.a("moveSelectionToNextFindMatch","Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:null,kbOpts:{kbExpr:G.a.focus,primary:Object(Yt.a)(2089,2082),weight:100}})||this}return bu(t,e),t.prototype._run=function(e,t){e.moveSelectionToNextFindMatch(t)},t}(Iu),Eu=function(e){function t(){return e.call(this,{id:"editor.action.moveSelectionToPreviousFindMatch",label:V.a("moveSelectionToPreviousFindMatch","Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:null})||this}return bu(t,e),t.prototype._run=function(e,t){e.moveSelectionToPreviousFindMatch(t)},t}(Iu),Pu=function(e){function t(){return e.call(this,{id:"editor.action.selectHighlights",label:V.a("selectAllOccurrencesOfFindMatch","Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:null,kbOpts:{kbExpr:G.a.focus,primary:3114,weight:100},menubarOpts:{menuId:22,group:"3_multi",title:V.a({key:"miSelectHighlights",comment:["&& denotes a mnemonic"]},"Select All &&Occurrences"),order:7}})||this}return bu(t,e),t.prototype._run=function(e,t){e.selectAll(t)},t}(Iu),Ru=function(e){function t(){return e.call(this,{id:"editor.action.changeAll",label:V.a("changeAll.label","Change All Occurrences"),alias:"Change All Occurrences",precondition:G.a.writable,kbOpts:{kbExpr:G.a.editorTextFocus,primary:2108,weight:100},menuOpts:{group:"1_modification",order:1.2}})||this}return bu(t,e),t.prototype._run=function(e,t){e.selectAll(t)},t}(Iu),Tu=function(){function e(e,t,n){this.searchText=e,this.matchCase=t,this.wordSeparators=n}return e.softEquals=function(e,t){return!e&&!t||!(!e||!t)&&(e.searchText===t.searchText&&e.matchCase===t.matchCase&&e.wordSeparators===t.wordSeparators)},e}(),Au=function(e){function t(t){var n=e.call(this)||this;return n.editor=t,n._isEnabled=t.getConfiguration().contribInfo.selectionHighlight,n.decorations=[],n.updateSoon=n._register(new H.d(function(){return n._update()},300)),n.state=null,n._register(t.onDidChangeConfiguration(function(e){n._isEnabled=t.getConfiguration().contribInfo.selectionHighlight})),n._register(t.onDidChangeCursorSelection(function(e){n._isEnabled&&(e.selection.isEmpty()?3===e.reason?(n.state&&n._setState(null),n.updateSoon.schedule()):n._setState(null):n._update())})),n._register(t.onDidChangeModel(function(e){n._setState(null)})),n._register(po.get(t).getState().onFindReplaceStateChange(function(e){n._update()})),n}return bu(t,e),t.prototype.getId=function(){return t.ID},t.prototype._update=function(){this._setState(t._createState(this._isEnabled,this.editor))},t._createState=function(e,t){if(!e)return null;if(!t.hasModel())return null;var n=t.getSelection();if(n.startLineNumber!==n.endLineNumber)return null;var i=Du.get(t);if(!i)return null;var o=po.get(t);if(!o)return null;var r=i.getSession(o);if(!r){var s=t.getSelections();if(s.length>1){var a=o.getState().matchCase;if(!ju(t.getModel(),s,a))return null}r=ku.create(t,o)}if(!r)return null;if(r.currentMatch)return null;if(/^[ \t]+$/.test(r.searchText))return null;if(r.searchText.length>200)return null;var c=o.getState(),l=c.matchCase;if(c.isRevealed){var u=c.searchString;l||(u=u.toLowerCase());var d=r.searchText;if(l||(d=d.toLowerCase()),u===d&&r.matchCase===c.matchCase&&r.wholeWord===c.wholeWord&&!c.isRegex)return null}return new Tu(r.searchText,r.matchCase,r.wholeWord?t.getConfiguration().wordSeparators:null)},t.prototype._setState=function(e){if(Tu.softEquals(this.state,e))this.state=e;else if(this.state=e,this.state){if(this.editor.hasModel()){var n=this.editor.getModel();if(!n.isTooLargeForTokenization()){var i=qe.i.has(n),o=n.findMatches(this.state.searchText,!0,!1,this.state.matchCase,this.state.wordSeparators,!1).map(function(e){return e.range});o.sort(se.a.compareRangesUsingStarts);var r=this.editor.getSelections();r.sort(se.a.compareRangesUsingStarts);for(var s=[],a=0,c=0,l=o.length,u=r.length;a<l;){var d=o[a];if(c>=u)s.push(d),a++;else{var h=se.a.compareRangesUsingStarts(d,r[c]);h<0?(!r[c].isEmpty()&&se.a.areIntersecting(d,r[c])||s.push(d),a++):h>0?c++:(a++,c++)}}var p=s.map(function(e){return{range:e,options:i?t._SELECTION_HIGHLIGHT:t._SELECTION_HIGHLIGHT_OVERVIEW}});this.decorations=this.editor.deltaDecorations(this.decorations,p)}}}else this.decorations=this.editor.deltaDecorations(this.decorations,[])},t.prototype.dispose=function(){this._setState(null),e.prototype.dispose.call(this)},t.ID="editor.contrib.selectionHighlighter",t._SELECTION_HIGHLIGHT_OVERVIEW=$.a.register({stickiness:1,className:"selectionHighlight",overviewRuler:{color:Object(X.f)(J.vb),position:Z.c.Center}}),t._SELECTION_HIGHLIGHT=$.a.register({stickiness:1,className:"selectionHighlight"}),t}(z.a);function ju(e,t,n){for(var i=Fu(e,t[0],!n),o=1,r=t.length;o<r;o++){var s=t[o];if(s.isEmpty())return!1;if(i!==Fu(e,s,!n))return!1}return!0}function Fu(e,t,n){var i=e.getValueInRange(t);return n?i.toLowerCase():i}Object(U.h)(Du),Object(U.h)(Au),Object(U.f)(yu),Object(U.f)(wu),Object(U.f)(Cu),Object(U.f)(Nu),Object(U.f)(Lu),Object(U.f)(Mu),Object(U.f)(Eu),Object(U.f)(Pu),Object(U.f)(Ru),Object(U.f)(Su),Object(U.f)(xu);n(284);var Bu={Visible:new Pe.f("parameterHintsVisible",!1),MultipleSignatures:new Pe.f("parameterHintsMultipleSignatures",!1)};function Wu(e,t,n,i){var o=qe.v.ordered(e);return Object(H.h)(o.map(function(o){return function(){return Promise.resolve(o.provideSignatureHelp(e,t,i,n)).catch($e.f)}}))}Object(U.e)("_executeSignatureHelpProvider",function(e,t,n){return Wu(e,t,{triggerKind:qe.w.Invoke,isRetrigger:!1,triggerCharacter:n.triggerCharacter},Ze.a.None)});var Vu,Hu=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),zu=function(){return(zu=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};!function(e){e.Default=new(function(){return function(){this.type=0}}());var t=function(){return function(e){this.request=e,this.type=2}}();e.Pending=t;var n=function(){return function(e){this.hints=e,this.type=1}}();e.Active=n}(Vu||(Vu={}));var Uu=function(e){function t(n,i){void 0===i&&(i=t.DEFAULT_DELAY);var o=e.call(this)||this;return o._onChangedHints=o._register(new Ke.a),o.onChangedHints=o._onChangedHints.event,o._state=Vu.Default,o.triggerChars=new mr.b,o.retriggerChars=new mr.b,o.triggerId=0,o.editor=n,o.enabled=!1,o.throttledDelayer=new H.a(i),o._register(o.editor.onDidChangeConfiguration(function(){return o.onEditorConfigurationChange()})),o._register(o.editor.onDidChangeModel(function(e){return o.onModelChanged()})),o._register(o.editor.onDidChangeModelLanguage(function(e){return o.onModelChanged()})),o._register(o.editor.onDidChangeCursorSelection(function(e){return o.onCursorChange(e)})),o._register(o.editor.onDidChangeModelContent(function(e){return o.onModelContentChange()})),o._register(qe.v.onDidChange(o.onModelChanged,o)),o._register(o.editor.onDidType(function(e){return o.onDidType(e)})),o.onEditorConfigurationChange(),o.onModelChanged(),o}return Hu(t,e),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},set:function(e){2===this._state.type&&this._state.request.cancel(),this._state=e},enumerable:!0,configurable:!0}),t.prototype.cancel=function(e){void 0===e&&(e=!1),this.state=Vu.Default,this.throttledDelayer.cancel(),e||this._onChangedHints.fire(void 0)},t.prototype.trigger=function(e,t){var n=this,i=this.editor.getModel();if(i&&qe.v.has(i)){var o=++this.triggerId;this.throttledDelayer.trigger(function(){return n.doTrigger({triggerKind:e.triggerKind,triggerCharacter:e.triggerCharacter,isRetrigger:1===n.state.type||2===n.state.type,activeSignatureHelp:1===n.state.type?n.state.hints:void 0},o)},t).then(void 0,$e.e)}},t.prototype.next=function(){if(1===this.state.type){var e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,n=t%e===e-1,i=this.editor.getConfiguration().contribInfo.parameterHints.cycle;!(e<2||n)||i?this.updateActiveSignature(n&&i?0:t+1):this.cancel()}},t.prototype.previous=function(){if(1===this.state.type){var e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,n=0===t,i=this.editor.getConfiguration().contribInfo.parameterHints.cycle;!(e<2||n)||i?this.updateActiveSignature(n&&i?e-1:t-1):this.cancel()}},t.prototype.updateActiveSignature=function(e){1===this.state.type&&(this.state=new Vu.Active(zu({},this.state.hints,{activeSignature:e})),this._onChangedHints.fire(this.state.hints))},t.prototype.doTrigger=function(e,t){var n=this;if(this.cancel(!0),!this.editor.hasModel())return Promise.resolve(!1);var i=this.editor.getModel(),o=this.editor.getPosition();return this.state=new Vu.Pending(Object(H.f)(function(t){return Wu(i,o,e,t)})),this.state.request.then(function(e){return t===n.triggerId&&(e&&e.signatures&&0!==e.signatures.length?(n.state=new Vu.Active(e),n._onChangedHints.fire(n.state.hints),!0):(n.cancel(),!1))}).catch(function(e){return t===n.triggerId&&(n.state=Vu.Default),Object($e.e)(e),!1})},Object.defineProperty(t.prototype,"isTriggered",{get:function(){return 1===this.state.type||2===this.state.type||this.throttledDelayer.isTriggered()},enumerable:!0,configurable:!0}),t.prototype.onModelChanged=function(){this.cancel(),this.triggerChars=new mr.b,this.retriggerChars=new mr.b;var e=this.editor.getModel();if(e)for(var t=0,n=qe.v.ordered(e);t<n.length;t++){for(var i=n[t],o=0,r=i.signatureHelpTriggerCharacters||[];o<r.length;o++){var s=r[o];this.triggerChars.add(s.charCodeAt(0)),this.retriggerChars.add(s.charCodeAt(0))}for(var a=0,c=i.signatureHelpRetriggerCharacters||[];a<c.length;a++){s=c[a];this.retriggerChars.add(s.charCodeAt(0))}}},t.prototype.onDidType=function(e){if(this.enabled){var t=e.length-1,n=e.charCodeAt(t);(this.triggerChars.has(n)||this.isTriggered&&this.retriggerChars.has(n))&&this.trigger({triggerKind:qe.w.TriggerCharacter,triggerCharacter:e.charAt(t)})}},t.prototype.onCursorChange=function(e){"mouse"===e.source?this.cancel():this.isTriggered&&this.trigger({triggerKind:qe.w.ContentChange})},t.prototype.onModelContentChange=function(){this.isTriggered&&this.trigger({triggerKind:qe.w.ContentChange})},t.prototype.onEditorConfigurationChange=function(){this.enabled=this.editor.getConfiguration().contribInfo.parameterHints.enabled,this.enabled||this.cancel()},t.prototype.dispose=function(){this.cancel(!0),e.prototype.dispose.call(this)},t.DEFAULT_DELAY=120,t}(z.a),Ku=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},qu=function(e,t){return function(n,i){t(n,i,e)}},Gu=st.a,Zu=function(){function e(e,t,n,i){var o=this;this.editor=e,this.allowEditorOverflow=!0,this.markdownRenderer=new Gc(e,i,n),this.model=new Uu(e),this.keyVisible=Bu.Visible.bindTo(t),this.keyMultipleSignatures=Bu.MultipleSignatures.bindTo(t),this.visible=!1,this.disposables=[],this.disposables.push(this.model.onChangedHints(function(e){e?(o.show(),o.render(e)):o.hide()}))}return e.prototype.createParamaterHintDOMNodes=function(){var e=this;this.element=Gu(".editor-widget.parameter-hints-widget");var t=st.m(this.element,Gu(".wrapper"));t.tabIndex=-1;var n=st.m(t,Gu(".buttons")),i=st.m(n,Gu(".button.previous")),o=st.m(n,Gu(".button.next"));Object(Us.b)(Object(Us.a)(i,"click"))(this.previous,this,this.disposables),Object(Us.b)(Object(Us.a)(o,"click"))(this.next,this,this.disposables),this.overloads=st.m(t,Gu(".overloads"));var r=Gu(".body");this.scrollbar=new ic.a(r,{}),this.disposables.push(this.scrollbar),t.appendChild(this.scrollbar.getDomNode()),this.signature=st.m(r,Gu(".signature")),this.docs=st.m(r,Gu(".docs")),this.editor.addContentWidget(this),this.hide(),this.element.style.userSelect="text",this.disposables.push(this.editor.onDidChangeCursorSelection(function(t){e.visible&&e.editor.layoutContentWidget(e)}));var s=function(){var t=e.editor.getConfiguration().fontInfo;e.element.style.fontSize=t.fontSize+"px"};s(),Ke.b.chain(this.editor.onDidChangeConfiguration.bind(this.editor)).filter(function(e){return e.fontInfo}).on(s,null,this.disposables),this.disposables.push(this.editor.onDidLayoutChange(function(t){return e.updateMaxHeight()})),this.updateMaxHeight()},e.prototype.show=function(){var e=this;this.model&&!this.visible&&(this.element||this.createParamaterHintDOMNodes(),this.keyVisible.set(!0),this.visible=!0,setTimeout(function(){return st.f(e.element,"visible")},100),this.editor.layoutContentWidget(this))},e.prototype.hide=function(){this.model&&this.visible&&(this.element||this.createParamaterHintDOMNodes(),this.keyVisible.reset(),this.visible=!1,this.announcedLabel=null,st.G(this.element,"visible"),this.editor.layoutContentWidget(this))},e.prototype.getPosition=function(){return this.visible?{position:this.editor.getPosition(),preference:[1,2]}:null},e.prototype.render=function(e){var t=e.signatures.length>1;st.P(this.element,"multiple",t),this.keyMultipleSignatures.set(t),this.signature.innerHTML="",this.docs.innerHTML="";var n=e.signatures[e.activeSignature];if(n){var i=st.m(this.signature,Gu(".code")),o=n.parameters.length>0,r=this.editor.getConfiguration().fontInfo;if(i.style.fontSize=r.fontSize+"px",i.style.fontFamily=r.fontFamily,o)this.renderParameters(i,n,e.activeParameter);else st.m(i,Gu("span")).textContent=n.label;Object(z.d)(this.renderDisposeables),this.renderDisposeables=[];var s=n.parameters[e.activeParameter];if(s&&s.documentation){var a=Gu("span.documentation");if("string"===typeof s.documentation)a.textContent=s.documentation;else{var c=this.markdownRenderer.render(s.documentation);st.f(c.element,"markdown-docs"),this.renderDisposeables.push(c),a.appendChild(c.element)}st.m(this.docs,Gu("p",{},a))}if(st.P(this.signature,"has-docs",!!n.documentation),void 0===n.documentation);else if("string"===typeof n.documentation)st.m(this.docs,Gu("p",{},n.documentation));else{c=this.markdownRenderer.render(n.documentation);st.f(c.element,"markdown-docs"),this.renderDisposeables.push(c),st.m(this.docs,c.element)}var l=String(e.activeSignature+1);if(e.signatures.length<10&&(l+="/"+e.signatures.length),this.overloads.textContent=l,s){var u=this.getParameterLabel(n,e.activeParameter);this.announcedLabel!==u&&(Ee.a(V.a("hint","{0}, hint",u)),this.announcedLabel=u)}this.editor.layoutContentWidget(this),this.scrollbar.scanDomNode()}},e.prototype.renderParameters=function(e,t,n){var i=this.getParameterLabelOffsets(t,n),o=i[0],r=i[1],s=document.createElement("span");s.textContent=t.label.substring(0,o);var a=document.createElement("span");a.textContent=t.label.substring(o,r),a.className="parameter active";var c=document.createElement("span");c.textContent=t.label.substring(r),st.m(e,s,a,c)},e.prototype.getParameterLabel=function(e,t){var n=e.parameters[t];return"string"===typeof n.label?n.label:e.label.substring(n.label[0],n.label[1])},e.prototype.getParameterLabelOffsets=function(e,t){var n=e.parameters[t];if(n){if(Array.isArray(n.label))return n.label;var i=e.label.lastIndexOf(n.label);return i>=0?[i,i+n.label.length]:[0,0]}return[0,0]},e.prototype.next=function(){this.model&&(this.editor.focus(),this.model.next())},e.prototype.previous=function(){this.model&&(this.editor.focus(),this.model.previous())},e.prototype.cancel=function(){this.model&&this.model.cancel()},e.prototype.getDomNode=function(){return this.element},e.prototype.getId=function(){return e.ID},e.prototype.trigger=function(e){this.model&&this.model.trigger(e,0)},e.prototype.updateMaxHeight=function(){var e=Math.max(this.editor.getLayoutInfo().height/4,250);this.element.style.maxHeight=e+"px"},e.prototype.dispose=function(){this.disposables=Object(z.d)(this.disposables),this.renderDisposeables=Object(z.d)(this.renderDisposeables),this.model&&(this.model.dispose(),this.model=null)},e.ID="editor.widget.parameterHintsWidget",e=Ku([qu(1,Pe.e),qu(2,zc.a),qu(3,qa.a)],e)}();Object(X.e)(function(e,t){var n=e.getColor(J.x);if(n){var i=e.type===X.b?2:1;t.addRule(".monaco-editor .parameter-hints-widget { border: "+i+"px solid "+n+"; }"),t.addRule(".monaco-editor .parameter-hints-widget.multiple .body { border-left: 1px solid "+n.transparent(.5)+"; }"),t.addRule(".monaco-editor .parameter-hints-widget .signature.has-docs { border-bottom: 1px solid "+n.transparent(.5)+"; }")}var o=e.getColor(J.w);o&&t.addRule(".monaco-editor .parameter-hints-widget { background-color: "+o+"; }");var r=e.getColor(J.Jb);r&&t.addRule(".monaco-editor .parameter-hints-widget a { color: "+r+"; }");var s=e.getColor(J.Ib);s&&t.addRule(".monaco-editor .parameter-hints-widget code { background-color: "+s+"; }")});var $u=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Yu=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},Ju=function(e,t){return function(n,i){t(n,i,e)}},Xu=function(){function e(e,t){this.editor=e,this.widget=t.createInstance(Zu,this.editor)}return e.get=function(t){return t.getContribution(e.ID)},e.prototype.getId=function(){return e.ID},e.prototype.cancel=function(){this.widget.cancel()},e.prototype.previous=function(){this.widget.previous()},e.prototype.next=function(){this.widget.next()},e.prototype.trigger=function(e){this.widget.trigger(e)},e.prototype.dispose=function(){Object(z.d)(this.widget)},e.ID="editor.controller.parameterHints",e=Yu([Ju(1,oo.a)],e)}(),Qu=function(e){function t(){return e.call(this,{id:"editor.action.triggerParameterHints",label:V.a("parameterHints.trigger.label","Trigger Parameter Hints"),alias:"Trigger Parameter Hints",precondition:G.a.hasSignatureHelpProvider,kbOpts:{kbExpr:G.a.editorTextFocus,primary:3082,weight:100}})||this}return $u(t,e),t.prototype.run=function(e,t){var n=Xu.get(t);n&&n.trigger({triggerKind:qe.w.Invoke})},t}(U.b);Object(U.h)(Xu),Object(U.f)(Qu);var ed=U.c.bindToContribution(Xu.get);Object(U.g)(new ed({id:"closeParameterHints",precondition:Bu.Visible,handler:function(e){return e.cancel()},kbOpts:{weight:175,kbExpr:G.a.focus,primary:9,secondary:[1033]}})),Object(U.g)(new ed({id:"showPrevParameterHint",precondition:Pe.d.and(Bu.Visible,Bu.MultipleSignatures),handler:function(e){return e.previous()},kbOpts:{weight:175,kbExpr:G.a.focus,primary:16,secondary:[528],mac:{primary:16,secondary:[528,302]}}})),Object(U.g)(new ed({id:"showNextParameterHint",precondition:Pe.d.and(Bu.Visible,Bu.MultipleSignatures),handler:function(e){return e.next()},kbOpts:{weight:175,kbExpr:G.a.focus,primary:18,secondary:[530],mac:{primary:18,secondary:[530,300]}}}));var td=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),nd=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},id=function(e,t){return function(n,i){t(n,i,e)}},od={getMetaTitle:function(e){return e.references.length>1?V.a("meta.titleReference"," \u2013 {0} references",e.references.length):""}},rd=function(){function e(e,t){e instanceof Gr&&Vr.inPeekEditor.bindTo(t)}return e.prototype.dispose=function(){},e.prototype.getId=function(){return e.ID},e.ID="editor.contrib.referenceController",e=nd([id(1,Pe.e)],e)}(),sd=function(e){function t(){return e.call(this,{id:"editor.action.referenceSearch.trigger",label:V.a("references.action.label","Peek References"),alias:"Find All References",precondition:Pe.d.and(G.a.hasReferenceProvider,Vr.notInPeekEditor,G.a.isInEmbeddedEditor.toNegated()),kbOpts:{kbExpr:G.a.editorTextFocus,primary:1094,weight:100},menuOpts:{group:"navigation",order:1.5}})||this}return td(t,e),t.prototype.run=function(e,t){var n=Ca.get(t);if(n&&t.hasModel()){var i=t.getSelection(),o=t.getModel(),r=Object(H.f)(function(e){return ld(o,i.getStartPosition(),e).then(function(e){return new ds(e)})});n.toggleWidget(i,r,od)}},t}(U.b);Object(U.h)(rd),Object(U.f)(sd);function ad(e,t){cd(e,function(e){return e.closeWidget()})}function cd(e,t){var n=function(e){var t=e.get(be.a).getFocusedCodeEditor();return t instanceof Gr?t.getParentEditor():t}(e);if(n){var i=Ca.get(n);i&&t(i)}}function ld(e,t,n){var i=qe.s.ordered(e).map(function(i){return Promise.resolve(i.provideReferences(e,t,{includeDeclaration:!0},n)).then(function(e){if(Array.isArray(e))return e},function(e){Object($e.f)(e)})});return Promise.all(i).then(function(e){for(var t=[],n=0,i=e;n<i.length;n++){var o=i[n];o&&t.push.apply(t,o)}return t})}We.a.registerCommand({id:"editor.action.findReferences",handler:function(e,t,n){if(!(t instanceof Ye.a))throw new Error("illegal argument, uri");if(!n)throw new Error("illegal argument, position");var i=e.get(be.a);return i.openCodeEditor({resource:t},i.getFocusedCodeEditor()).then(function(e){if(Object(vr.a)(e)&&e.hasModel()){var t=Ca.get(e);if(t){var i=Object(H.f)(function(t){return ld(e.getModel(),K.a.lift(n),t).then(function(e){return new ds(e)})}),o=new se.a(n.lineNumber,n.column,n.lineNumber,n.column);return Promise.resolve(t.toggleWidget(o,i,od))}}})}}),We.a.registerCommand({id:"editor.action.showReferences",handler:function(e,t,n,i){if(!(t instanceof Ye.a))throw new Error("illegal argument, uri expected");if(!i)throw new Error("missing references");var o=e.get(be.a);return o.openCodeEditor({resource:t},o.getFocusedCodeEditor()).then(function(e){if(Object(vr.a)(e)){var t=Ca.get(e);if(t)return t.toggleWidget(new se.a(n.lineNumber,n.column,n.lineNumber,n.column),Object(H.f)(function(e){return Promise.resolve(new ds(i))}),od)}})},description:{description:"Show references at a position in a file",args:[{name:"uri",description:"The text document in which to show references",constraint:Ye.a},{name:"position",description:"The position at which to show",constraint:K.a.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array}]}}),ki.a.registerCommandAndKeybindingRule({id:"goToNextReference",weight:250,primary:62,when:wa,handler:function(e){cd(e,function(e){e.goToNextOrPreviousReference(!0)})}}),ki.a.registerCommandAndKeybindingRule({id:"goToNextReferenceFromEmbeddedEditor",weight:150,primary:62,when:Vr.inPeekEditor,handler:function(e){cd(e,function(e){e.goToNextOrPreviousReference(!0)})}}),ki.a.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:250,primary:1086,when:wa,handler:function(e){cd(e,function(e){e.goToNextOrPreviousReference(!1)})}}),ki.a.registerCommandAndKeybindingRule({id:"goToPreviousReferenceFromEmbeddedEditor",weight:150,primary:1086,when:Vr.inPeekEditor,handler:function(e){cd(e,function(e){e.goToNextOrPreviousReference(!1)})}}),ki.a.registerCommandAndKeybindingRule({id:"closeReferenceSearch",weight:250,primary:9,secondary:[1033],when:Pe.d.and(wa,Pe.d.not("config.editor.stablePeek")),handler:ad}),ki.a.registerCommandAndKeybindingRule({id:"closeReferenceSearchEditor",weight:-1,primary:9,secondary:[1033],when:Pe.d.and(Vr.inPeekEditor,Pe.d.not("config.editor.stablePeek")),handler:ad}),ki.a.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:Pe.d.and(wa,ta),handler:function(e,t){var n=e.get(Hs.a),i=n.lastFocusedList&&n.lastFocusedList.getFocus();i instanceof cs&&cd(e,function(e){return e.openReference(i,!0)})}}),Object(U.e)("_executeReferenceProvider",function(e,t){return ld(e,t,Ze.a.None)});n(285);var ud=new Pe.f("renameInputVisible",!1),dd=function(){function e(e,t,n){var i=this;this.themeService=t,this._disposables=[],this.allowEditorOverflow=!0,this._currentAcceptInput=null,this._currentCancelInput=null,this._visibleContextKey=ud.bindTo(n),this._editor=e,this._editor.addContentWidget(this),this._disposables.push(e.onDidChangeConfiguration(function(e){e.fontInfo&&i.updateFont()})),this._disposables.push(t.onThemeChange(function(e){return i.onThemeChange(e)}))}return e.prototype.onThemeChange=function(e){this.updateStyles(e)},e.prototype.dispose=function(){this._disposables=Object(z.d)(this._disposables),this._editor.removeContentWidget(this)},e.prototype.getId=function(){return"__renameInputWidget"},e.prototype.getDomNode=function(){return this._domNode||(this._inputField=document.createElement("input"),this._inputField.className="rename-input",this._inputField.type="text",this._inputField.setAttribute("aria-label",Object(V.a)("renameAriaLabel","Rename input. Type new name and press Enter to commit.")),this._domNode=document.createElement("div"),this._domNode.style.height=this._editor.getConfiguration().lineHeight+"px",this._domNode.className="monaco-editor rename-box",this._domNode.appendChild(this._inputField),this.updateFont(),this.updateStyles(this.themeService.getTheme())),this._domNode},e.prototype.updateStyles=function(e){if(this._inputField){var t=e.getColor(J.M),n=e.getColor(J.O),i=e.getColor(J.Kb),o=e.getColor(J.N);this._inputField.style.backgroundColor=t?t.toString():null,this._inputField.style.color=n?n.toString():null,this._inputField.style.borderWidth=o?"1px":"0px",this._inputField.style.borderStyle=o?"solid":"none",this._inputField.style.borderColor=o?o.toString():"none",this._domNode.style.boxShadow=i?" 0 2px 8px "+i:null}},e.prototype.updateFont=function(){if(this._inputField){var e=this._editor.getConfiguration().fontInfo;this._inputField.style.fontFamily=e.fontFamily,this._inputField.style.fontWeight=e.fontWeight,this._inputField.style.fontSize=e.fontSize+"px"}},e.prototype.getPosition=function(){return this._visible?{position:this._position,preference:[2,1]}:null},e.prototype.acceptInput=function(){this._currentAcceptInput&&this._currentAcceptInput()},e.prototype.cancelInput=function(e){this._currentCancelInput&&this._currentCancelInput(e)},e.prototype.getInput=function(e,t,n,i){var o=this;this._position=new K.a(e.startLineNumber,e.startColumn),this._inputField.value=t,this._inputField.setAttribute("selectionStart",n.toString()),this._inputField.setAttribute("selectionEnd",i.toString()),this._inputField.size=Math.max(1.1*(e.endColumn-e.startColumn),20);var r=[],s=function(){Object(z.d)(r),o._hide()};return new Promise(function(n){o._currentCancelInput=function(e){return o._currentAcceptInput=null,o._currentCancelInput=null,n(e),!0},o._currentAcceptInput=function(){0!==o._inputField.value.trim().length&&o._inputField.value!==t?(o._currentAcceptInput=null,o._currentCancelInput=null,n(o._inputField.value)):o.cancelInput(!0)};r.push(o._editor.onDidChangeCursorSelection(function(){var t=o._editor.getPosition();t&&se.a.containsPosition(e,t)||o.cancelInput(!0)})),r.push(o._editor.onDidBlurEditorWidget(function(){return o.cancelInput(!1)})),o._show()}).then(function(e){return s(),e},function(e){return s(),Promise.reject(e)})},e.prototype._show=function(){var e=this;this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber,0),this._visible=!0,this._visibleContextKey.set(!0),this._editor.layoutContentWidget(this),setTimeout(function(){e._inputField.focus(),e._inputField.setSelectionRange(parseInt(e._inputField.getAttribute("selectionStart")),parseInt(e._inputField.getAttribute("selectionEnd")))},100)},e.prototype._hide=function(){this._visible=!1,this._visibleContextKey.reset(),this._editor.layoutContentWidget(this)},e}(),hd=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),pd=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},gd=function(e,t){return function(n,i){t(n,i,e)}},fd=function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function s(e){try{c(i.next(e))}catch(t){r(t)}}function a(e){try{c(i.throw(e))}catch(t){r(t)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((i=i.apply(e,t||[])).next())})},md=function(e,t){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(a){r=[6,a],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},_d=function(){function e(e,t){this.model=e,this.position=t,this._providers=qe.t.ordered(e)}return e.prototype.hasProvider=function(){return this._providers.length>0},e.prototype.resolveRenameLocation=function(e){return fd(this,void 0,void 0,function(){var t,n,i;return md(this,function(o){switch(o.label){case 0:return(t=this._providers[0])?t.resolveRenameLocation?[4,t.resolveRenameLocation(this.model,this.position,e)]:[3,2]:[2,void 0];case 1:n=o.sent(),o.label=2;case 2:return!n&&(i=this.model.getWordAtPosition(this.position))?[2,{range:new se.a(this.position.lineNumber,i.startColumn,this.position.lineNumber,i.endColumn),text:i.word}]:[2,n]}})})},e.prototype.provideRenameEdits=function(e,t,n,i){return fd(this,void 0,void 0,function(){var o,r;return md(this,function(s){switch(s.label){case 0:return(o=this._providers[t])?[4,o.provideRenameEdits(this.model,this.position,e,i)]:[2,{edits:[],rejectReason:n.join("\n")}];case 1:return(r=s.sent())?r.rejectReason?[2,this.provideRenameEdits(e,t+1,n.concat(r.rejectReason),i)]:[2,r]:[2,this.provideRenameEdits(e,t+1,n.concat(V.a("no result","No result.")),i)]}})})},e}();var vd=function(e){function t(t,n,i,o,r,s){var a=e.call(this)||this;return a.editor=t,a._notificationService=n,a._bulkEditService=i,a._progressService=o,a._contextKeyService=r,a._themeService=s,a._renameOperationIdPool=1,a._register(a.editor.onDidChangeModel(function(){return a.onModelChanged()})),a._register(a.editor.onDidChangeModelLanguage(function(){return a.onModelChanged()})),a._register(a.editor.onDidChangeCursorSelection(function(){return a.onModelChanged()})),a}return hd(t,e),t.get=function(e){return e.getContribution(t.ID)},Object.defineProperty(t.prototype,"renameInputField",{get:function(){return this._renameInputField||(this._renameInputField=this._register(new dd(this.editor,this._themeService,this._contextKeyService))),this._renameInputField},enumerable:!0,configurable:!0}),t.prototype.getId=function(){return t.ID},t.prototype.run=function(){return fd(this,void 0,void 0,function(){var e,t=this;return md(this,function(n){return this._activeRename&&this._activeRename.operation.cancel(),e=this._renameOperationIdPool++,this._activeRename={id:e,operation:Object(H.f)(function(n){return t.doRename(n,e)})},[2,this._activeRename.operation]})})},t.prototype.doRename=function(e,t){return fd(this,void 0,void 0,function(){var n,i,o,r,s,a,c,l,u=this;return md(this,function(d){switch(d.label){case 0:if(!this.editor.hasModel())return[2,void 0];if(n=this.editor.getPosition(),!(i=new _d(this.editor.getModel(),n)).hasProvider())return[2,void 0];d.label=1;case 1:return d.trys.push([1,3,,4]),r=i.resolveRenameLocation(e),this._progressService.showWhile(r,250),[4,r];case 2:return o=d.sent(),[3,4];case 3:return s=d.sent(),je.get(this.editor).showMessage(s||V.a("resolveRenameLocationFailed","An unknown error occurred while resolving rename location"),n),[2,void 0];case 4:return o?o.rejectReason?(je.get(this.editor).showMessage(o.rejectReason,n),[2,void 0]):this._activeRename&&this._activeRename.id===t?(a=this.editor.getSelection(),c=0,l=o.text.length,se.a.isEmpty(a)||se.a.spansMultipleLines(a)||!se.a.containsRange(o.range,a)||(c=Math.max(0,a.startColumn-o.range.startColumn),l=Math.min(o.range.endColumn,a.endColumn)-o.range.startColumn),[2,this.renameInputField.getInput(o.range,o.text,c,l).then(function(t){if("boolean"!==typeof t){u.editor.focus();var n=new Qe.a(u.editor,15),r=Promise.resolve(i.provideRenameEdits(t,0,[],e).then(function(e){if(u.editor.hasModel()){if(!e.rejectReason)return u._bulkEditService.apply(e,{editor:u.editor}).then(function(e){e.ariaSummary&&Object(Ee.a)(V.a("aria","Successfully renamed '{0}' to '{1}'. Summary: {2}",o.text,t,e.ariaSummary))});n.validate(u.editor)?je.get(u.editor).showMessage(e.rejectReason,u.editor.getPosition()):u._notificationService.info(e.rejectReason)}},function(e){return u._notificationService.error(V.a("rename.failed","Rename failed to execute.")),Promise.reject(e)}));return u._progressService.showWhile(r,250),r}t&&u.editor.focus()})]):[2,void 0]:[2,void 0]}})})},t.prototype.acceptRenameInput=function(){this._renameInputField&&this._renameInputField.acceptInput()},t.prototype.cancelRenameInput=function(){this._renameInputField&&this._renameInputField.cancelInput(!0)},t.prototype.onModelChanged=function(){this._activeRename&&(this._activeRename.operation.cancel(),this._activeRename=void 0)},t.ID="editor.contrib.renameController",t=pd([gd(1,At.a),gd(2,Me.a),gd(3,Ue.a),gd(4,Pe.e),gd(5,X.c)],t)}(z.a),bd=function(e){function t(){return e.call(this,{id:"editor.action.rename",label:V.a("rename.label","Rename Symbol"),alias:"Rename Symbol",precondition:Pe.d.and(G.a.writable,G.a.hasRenameProvider),kbOpts:{kbExpr:G.a.editorTextFocus,primary:60,weight:100},menuOpts:{group:"1_modification",order:1.1}})||this}return hd(t,e),t.prototype.runCommand=function(t,n){var i=this,o=t.get(be.a),r=Array.isArray(n)&&n||[void 0,void 0],s=r[0],a=r[1];return Ye.a.isUri(s)&&K.a.isIPosition(a)?o.openCodeEditor({resource:s},o.getActiveCodeEditor()).then(function(e){e&&(e.setPosition(a),e.invokeWithinContext(function(t){return i.reportTelemetry(t,e),i.run(t,e)}))},$e.e):e.prototype.runCommand.call(this,t,n)},t.prototype.run=function(e,t){var n=vd.get(t);return n?n.run():Promise.resolve()},t}(U.b);Object(U.h)(vd),Object(U.f)(bd);var yd=U.c.bindToContribution(vd.get);Object(U.g)(new yd({id:"acceptRenameInput",precondition:ud,handler:function(e){return e.acceptRenameInput()},kbOpts:{weight:199,kbExpr:G.a.focus,primary:3}})),Object(U.g)(new yd({id:"cancelRenameInput",precondition:ud,handler:function(e){return e.cancelRenameInput()},kbOpts:{weight:199,kbExpr:G.a.focus,primary:9,secondary:[1033]}})),Object(U.e)("_executeDocumentRenameProvider",function(e,t,n){var i=n.newName;if("string"!==typeof i)throw Object($e.b)("newName");return function(e,t,n){return fd(this,void 0,void 0,function(){return md(this,function(i){return[2,new _d(e,t).provideRenameEdits(n,0,[],Ze.a.None)]})})}(e,t,i)});var wd=function(){function e(){}return e.prototype.provideSelectionRanges=function(e,t){for(var n=[],i=0,o=t;i<o.length;i++){var r=o[i],s=[];n.push(s),this._addInWordRanges(s,e,r),this._addWordRanges(s,e,r),this._addWhitespaceLine(s,e,r),s.push({range:e.getFullModelRange(),kind:"statement.all"})}return n},e.prototype._addInWordRanges=function(e,t,n){var i=t.getWordAtPosition(n);if(i){for(var o=i.word,r=i.startColumn,s=n.column-r,a=s,c=s,l=0;a>=0;a--){if(95===(u=o.charCodeAt(a))||45===u)break;if(Object(he.w)(u)&&Object(he.x)(l))break;l=u}for(a+=1;c<o.length;c++){var u=o.charCodeAt(c);if(Object(he.x)(u)&&Object(he.w)(l))break;if(95===u||45===u)break;l=u}a<c&&e.push({range:new se.a(n.lineNumber,r+a,n.lineNumber,r+c),kind:"statement.word.part"})}},e.prototype._addWordRanges=function(e,t,n){var i=t.getWordAtPosition(n);i&&e.push({range:new se.a(n.lineNumber,i.startColumn,n.lineNumber,i.endColumn),kind:"statement.word"})},e.prototype._addWhitespaceLine=function(e,t,n){t.getLineLength(n.lineNumber)>0&&0===t.getLineFirstNonWhitespaceColumn(n.lineNumber)&&0===t.getLineLastNonWhitespaceColumn(n.lineNumber)&&e.push({range:new se.a(n.lineNumber,1,n.lineNumber,t.getLineMaxColumn(n.lineNumber)),kind:"statement.line"})},e}(),Cd=function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function s(e){try{c(i.next(e))}catch(t){r(t)}}function a(e){try{c(i.throw(e))}catch(t){r(t)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((i=i.apply(e,t||[])).next())})},Sd=function(e,t){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(a){r=[6,a],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},xd=function(){function e(){}return e.prototype.provideSelectionRanges=function(t,n){return Cd(this,void 0,void 0,function(){var i,o,r,s,a;return Sd(this,function(c){switch(c.label){case 0:i=[],o=function(n){var o,r;return Sd(this,function(s){switch(s.label){case 0:return o=[],i.push(o),r=new Map,[4,new Promise(function(i){return e._bracketsRightYield(i,0,t,n,r)})];case 1:return s.sent(),[4,new Promise(function(i){return e._bracketsLeftYield(i,0,t,n,r,o)})];case 2:return s.sent(),[2]}})},r=0,s=n,c.label=1;case 1:return r<s.length?(a=s[r],[5,o(a)]):[3,4];case 2:c.sent(),c.label=3;case 3:return r++,[3,1];case 4:return[2,i]}})})},e._bracketsRightYield=function(t,n,i,o,r){for(var s=new Map,a=Date.now();;){if(n>=e._maxRounds){t();break}if(!o){t();break}var c=i.findNextBracket(o);if(!c){t();break}if(Date.now()-a>e._maxDuration){setTimeout(function(){return e._bracketsRightYield(t,n+1,i,o,r)});break}var l=c.close;if(c.isOpen){var u=s.has(l)?s.get(l):0;s.set(l,u+1)}else{u=s.has(l)?s.get(l):0;if(u-=1,s.set(l,Math.max(0,u)),u<0){var d=r.get(l);d||(d=new wr.a,r.set(l,d)),d.push(c.range)}}o=c.range.getEndPosition()}},e._bracketsLeftYield=function(t,n,i,o,r,s){for(var a=new Map,c=Date.now();;){if(n>=e._maxRounds&&0===r.size){t();break}if(!o){t();break}var l=i.findPrevBracket(o);if(!l){t();break}if(Date.now()-c>e._maxDuration){setTimeout(function(){return e._bracketsLeftYield(t,n+1,i,o,r,s)});break}var u=l.close;if(l.isOpen){f=a.has(u)?a.get(u):0;if(f-=1,a.set(u,Math.max(0,f)),f<0){var d=r.get(u);if(d){var h=d.shift();0===d.size&&r.delete(u);var p=se.a.fromPositions(l.range.getEndPosition(),h.getStartPosition()),g=se.a.fromPositions(l.range.getStartPosition(),h.getEndPosition());s.push({range:p,kind:"statement.brackets"}),s.push({range:g,kind:"statement.brackets.full"}),e._addBracketLeading(i,g,s)}}}else{var f=a.has(u)?a.get(u):0;a.set(u,f+1)}o=l.range.getStartPosition()}},e._addBracketLeading=function(e,t,n){if(t.startLineNumber!==t.endLineNumber){var i=t.startLineNumber,o=e.getLineFirstNonWhitespaceColumn(i);0!==o&&o!==t.startColumn&&(n.push({range:se.a.fromPositions(new K.a(i,o),t.getEndPosition()),kind:"statement.brackets.leading"}),n.push({range:se.a.fromPositions(new K.a(i,1),t.getEndPosition()),kind:"statement.brackets.leading.full"}));var r=i-1;if(r>0){var s=e.getLineFirstNonWhitespaceColumn(r);s===t.startColumn&&s!==e.getLineLastNonWhitespaceColumn(r)&&(n.push({range:se.a.fromPositions(new K.a(r,s),t.getEndPosition()),kind:"statement.brackets.leading"}),n.push({range:se.a.fromPositions(new K.a(r,1),t.getEndPosition()),kind:"statement.brackets.leading.full"}))}}},e._maxDuration=30,e._maxRounds=2,e}(),Od=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),kd=function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function s(e){try{c(i.next(e))}catch(t){r(t)}}function a(e){try{c(i.throw(e))}catch(t){r(t)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((i=i.apply(e,t||[])).next())})},Dd=function(e,t){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(a){r=[6,a],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},Id=function(){function e(e,t){this.index=e,this.ranges=t}return e.prototype.mov=function(t){var n=this.index+(t?1:-1);if(n<0||n>=this.ranges.length)return this;var i=new e(n,this.ranges);return i.ranges[n].equalsRange(this.ranges[this.index])?i.mov(t):i},e}(),Nd=function(){function e(e){this._ignoreSelection=!1,this._editor=e}return e.get=function(t){return t.getContribution(e._id)},e.prototype.dispose=function(){Object(z.d)(this._selectionListener)},e.prototype.getId=function(){return e._id},e.prototype.run=function(e){var t=this;if(this._editor.hasModel()){var n=this._editor.getSelections(),i=this._editor.getModel();if(qe.u.has(i)){var o=Promise.resolve(void 0);return this._state||(o=Pd(i,n.map(function(e){return e.getPosition()}),Ze.a.None).then(function(e){if(Ge.n(e)&&e.length===n.length&&t._editor.hasModel()&&Ge.g(t._editor.getSelections(),n,function(e,t){return e.equalsSelection(t)})){for(var i=function(t){e[t]=e[t].filter(function(e){return e.containsPosition(n[t].getStartPosition())&&e.containsPosition(n[t].getEndPosition())}),e[t].unshift(n[t])},o=0;o<e.length;o++)i(o);t._state=e.map(function(e){return new Id(0,e)}),Object(z.d)(t._selectionListener),t._selectionListener=t._editor.onDidChangeCursorPosition(function(){t._ignoreSelection||(Object(z.d)(t._selectionListener),t._state=void 0)})}})),o.then(function(){if(t._state){t._state=t._state.map(function(t){return t.mov(e)});var n=t._state.map(function(e){return q.a.fromPositions(e.ranges[e.index].getStartPosition(),e.ranges[e.index].getEndPosition())});t._ignoreSelection=!0;try{t._editor.setSelections(n)}finally{t._ignoreSelection=!1}}})}}},e._id="editor.contrib.smartSelectController",e}(),Ld=function(e){function t(t,n){var i=e.call(this,n)||this;return i._forward=t,i}return Od(t,e),t.prototype.run=function(e,t){return kd(this,void 0,void 0,function(){var e;return Dd(this,function(n){switch(n.label){case 0:return(e=Nd.get(t))?[4,e.run(this._forward)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},t}(U.b),Md=function(e){function t(){return e.call(this,!0,{id:"editor.action.smartSelect.expand",label:V.a("smartSelect.expand","Expand Selection"),alias:"Expand Selection",precondition:null,kbOpts:{kbExpr:G.a.editorTextFocus,primary:1553,mac:{primary:3345},weight:100},menubarOpts:{menuId:22,group:"1_basic",title:V.a({key:"miSmartSelectGrow",comment:["&& denotes a mnemonic"]},"&&Expand Selection"),order:2}})||this}return Od(t,e),t}(Ld);We.a.registerCommandAlias("editor.action.smartSelect.grow","editor.action.smartSelect.expand");var Ed=function(e){function t(){return e.call(this,!1,{id:"editor.action.smartSelect.shrink",label:V.a("smartSelect.shrink","Shrink Selection"),alias:"Shrink Selection",precondition:null,kbOpts:{kbExpr:G.a.editorTextFocus,primary:1551,mac:{primary:3343},weight:100},menubarOpts:{menuId:22,group:"1_basic",title:V.a({key:"miSmartSelectShrink",comment:["&& denotes a mnemonic"]},"&&Shrink Selection"),order:3}})||this}return Od(t,e),t}(Ld);function Pd(e,t,n){var i=qe.u.all(e);1===i.length&&i.unshift(new xd);for(var o=[],r=[],s=0,a=i;s<a.length;s++){var c=a[s];o.push(Promise.resolve(c.provideSelectionRanges(e,t,n)).then(function(e){if(Ge.n(e)&&e.length===t.length)for(var n=0;n<t.length;n++){r[n]||(r[n]=[]);for(var i=0,o=e[n];i<o.length;i++){var s=o[i];se.a.isIRange(s.range)&&se.a.containsPosition(s.range,t[n])&&r[n].push(se.a.lift(s.range))}}},$e.f))}return Promise.all(o).then(function(){return r.map(function(t){if(0===t.length)return[];t.sort(function(e,t){return K.a.isBefore(e.getStartPosition(),t.getStartPosition())?1:K.a.isBefore(t.getStartPosition(),e.getStartPosition())?-1:K.a.isBefore(e.getEndPosition(),t.getEndPosition())?-1:K.a.isBefore(t.getEndPosition(),e.getEndPosition())?1:0});for(var n,i=[],o=0,r=t;o<r.length;o++){var s=r[o];(!n||se.a.containsRange(s,n)&&!se.a.equalsRange(s,n))&&(i.push(s),n=s)}for(var a=[i[0]],c=1;c<i.length;c++){var l=i[c-1],u=i[c];if(u.startLineNumber!==l.startLineNumber||u.endLineNumber!==l.endLineNumber){var d=new se.a(l.startLineNumber,e.getLineFirstNonWhitespaceColumn(l.startLineNumber),l.endLineNumber,e.getLineLastNonWhitespaceColumn(l.endLineNumber));d.containsRange(l)&&!d.equalsRange(l)&&a.push(d);var h=new se.a(l.startLineNumber,1,l.endLineNumber,e.getLineMaxColumn(l.endLineNumber));h.containsRange(l)&&!h.equalsRange(d)&&a.push(h)}a.push(u)}return a})})}Object(U.h)(Nd),Object(U.f)(Md),Object(U.f)(Ed),qe.u.register("*",new wd),Object(U.e)("_executeSelectionRangeProvider",function(e,t,n){return Pd(e,n.positions,Ze.a.None)});var Rd,Td={Visible:new Pe.f("suggestWidgetVisible",!1),MultipleSuggestions:new Pe.f("suggestWidgetMultipleSuggestions",!1),MakesTextEdit:new Pe.f("suggestionMakesTextEdit",!0),AcceptSuggestionsOnEnter:new Pe.f("acceptSuggestionOnEnter",!0)},Ad=function(){return function(e,t,n,i,o){this.position=e,this.completion=t,this.container=n,this.provider=i,this.score=Ns.a.Default,this.distance=0,this.labelLow=t.label.toLowerCase(),this.sortTextLow=t.sortText&&t.sortText.toLowerCase(),this.filterTextLow=t.filterText&&t.filterText.toLowerCase();var r,s=i.resolveCompletionItem;this.resolve="function"!==typeof s?function(){return Promise.resolve()}:function(n){if(!r){var a=!1;r=Promise.resolve(s.call(i,o,e,t,n)).then(function(e){Object(Bn.a)(t,e),a=!0},function(e){Object($e.d)(e)&&(r=void 0)}),n.onCancellationRequested(function(){a||(r=void 0)})}return r}}}(),jd=function(){function e(e,t,n){void 0===e&&(e=2),void 0===t&&(t=new Set),void 0===n&&(n=new Set),this.snippetSortOrder=e,this.kindFilter=t,this.providerFilter=n}return e.default=new e,e}();function Fd(e,t,n,i,o){void 0===n&&(n=jd.default),void 0===i&&(i={triggerKind:0}),void 0===o&&(o=Ze.a.None);var r=[],s=e.getWordUntilPosition(t),a=new se.a(t.lineNumber,s.startColumn,t.lineNumber,s.endColumn);t=t.clone();var c=qe.d.orderedGroups(e);!n.kindFilter.has(25)&&Rd&&c.unshift([Rd]);var l=!1,u=c.map(function(s){return function(){return Promise.all(s.map(function(s){if(!(n.providerFilter.size>0)||n.providerFilter.has(s))return Promise.resolve(s.provideCompletionItems(e,t,i,o)).then(function(i){var o=r.length;if(i)for(var c=0,u=i.suggestions||[];c<u.length;c++){var d=u[c];n.kindFilter.has(d.kind)||(d.range||(d.range=a),r.push(new Ad(t,d,i,s,e)))}o!==r.length&&s!==Rd&&(l=!0)},$e.f)}))}});return Object(H.h)(u,function(){return l||o.isCancellationRequested}).then(function(){return o.isCancellationRequested?Promise.reject(Object($e.a)()):r.sort(Vd(n.snippetSortOrder))})}function Bd(e,t){if(e.sortTextLow&&t.sortTextLow){if(e.sortTextLow<t.sortTextLow)return-1;if(e.sortTextLow>t.sortTextLow)return 1}return e.completion.label<t.completion.label?-1:e.completion.label>t.completion.label?1:e.completion.kind-t.completion.kind}var Wd=new Map;function Vd(e){return Wd.get(e)}Wd.set(0,function(e,t){if(e.completion.kind!==t.completion.kind){if(25===e.completion.kind)return-1;if(25===t.completion.kind)return 1}return Bd(e,t)}),Wd.set(2,function(e,t){if(e.completion.kind!==t.completion.kind){if(25===e.completion.kind)return 1;if(25===t.completion.kind)return-1}return Bd(e,t)}),Wd.set(1,Bd),Object(U.e)("_executeCompletionItemProvider",function(e,t,n){var i={incomplete:!1,suggestions:[]},o=[],r=n.maxItemsToResolve||0;return Fd(e,t).then(function(e){for(var t=0,n=e;t<n.length;t++){var s=n[t];o.length<r&&o.push(s.resolve(Ze.a.None)),i.incomplete=i.incomplete||s.container.incomplete,i.suggestions.push(s.completion)}}).then(function(){return Promise.all(o)}).then(function(){return i})});var Hd=new(function(){function e(){this.onlyOnceSuggestions=[]}return e.prototype.provideCompletionItems=function(){var e={suggestions:this.onlyOnceSuggestions.slice(0)};return this.onlyOnceSuggestions.length=0,e},e}());qe.d.register("*",Hd);var zd,Ud=n(180),Kd=(n(286),n(186)),qd=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Gd=function(){function e(){this.text("")}return e.isDigitCharacter=function(e){return e>=48&&e<=57},e.isVariableCharacter=function(e){return 95===e||e>=97&&e<=122||e>=65&&e<=90},e.prototype.text=function(e){this.value=e,this.pos=0},e.prototype.tokenText=function(e){return this.value.substr(e.pos,e.len)},e.prototype.next=function(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};var t,n=this.pos,i=0,o=this.value.charCodeAt(n);if("number"===typeof(t=e._table[o]))return this.pos+=1,{type:t,pos:n,len:1};if(e.isDigitCharacter(o)){t=8;do{i+=1,o=this.value.charCodeAt(n+i)}while(e.isDigitCharacter(o));return this.pos+=i,{type:t,pos:n,len:i}}if(e.isVariableCharacter(o)){t=9;do{o=this.value.charCodeAt(n+ ++i)}while(e.isVariableCharacter(o)||e.isDigitCharacter(o));return this.pos+=i,{type:t,pos:n,len:i}}t=10;do{i+=1,o=this.value.charCodeAt(n+i)}while(!isNaN(o)&&"undefined"===typeof e._table[o]&&!e.isDigitCharacter(o)&&!e.isVariableCharacter(o));return this.pos+=i,{type:t,pos:n,len:i}},e._table=((zd={})[36]=0,zd[58]=1,zd[44]=2,zd[123]=3,zd[125]=4,zd[92]=5,zd[47]=6,zd[124]=7,zd[43]=11,zd[45]=12,zd[63]=13,zd),e}(),Zd=function(){function e(){this._children=[]}return e.prototype.appendChild=function(e){return e instanceof $d&&this._children[this._children.length-1]instanceof $d?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this},e.prototype.replace=function(e,t){var n=e.parent,i=n.children.indexOf(e),o=n.children.slice(0);o.splice.apply(o,[i,1].concat(t)),n._children=o,function e(t,n){for(var i=0,o=t;i<o.length;i++){var r=o[i];r.parent=n,e(r.children,r)}}(t,n)},Object.defineProperty(e.prototype,"children",{get:function(){return this._children},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"snippet",{get:function(){for(var e=this;;){if(!e)return;if(e instanceof ih)return e;e=e.parent}},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this.children.reduce(function(e,t){return e+t.toString()},"")},e.prototype.len=function(){return 0},e}(),$d=function(e){function t(t){var n=e.call(this)||this;return n.value=t,n}return qd(t,e),t.prototype.toString=function(){return this.value},t.prototype.len=function(){return this.value.length},t.prototype.clone=function(){return new t(this.value)},t}(Zd),Yd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return qd(t,e),t}(Zd),Jd=function(e){function t(t){var n=e.call(this)||this;return n.index=t,n}return qd(t,e),t.compareByIndex=function(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop?-1:e.index<t.index?-1:e.index>t.index?1:0},Object.defineProperty(t.prototype,"isFinalTabstop",{get:function(){return 0===this.index},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"choice",{get:function(){return 1===this._children.length&&this._children[0]instanceof Xd?this._children[0]:void 0},enumerable:!0,configurable:!0}),t.prototype.clone=function(){var e=new t(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(function(e){return e.clone()}),e},t}(Yd),Xd=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.options=[],t}return qd(t,e),t.prototype.appendChild=function(e){return e instanceof $d&&(e.parent=this,this.options.push(e)),this},t.prototype.toString=function(){return this.options[0].value},t.prototype.len=function(){return this.options[0].len()},t.prototype.clone=function(){var e=new t;return this.options.forEach(e.appendChild,e),e},t}(Zd),Qd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return qd(t,e),t.prototype.resolve=function(e){var t=this,n=!1,i=e.replace(this.regexp,function(){return n=!0,t._replace(Array.prototype.slice.call(arguments,0,-2))});return!n&&this._children.some(function(e){return e instanceof eh&&Boolean(e.elseValue)})&&(i=this._replace([])),i},t.prototype._replace=function(e){for(var t="",n=0,i=this._children;n<i.length;n++){var o=i[n];if(o instanceof eh){var r=e[o.index]||"";t+=r=o.resolve(r)}else t+=o.toString()}return t},t.prototype.toString=function(){return""},t.prototype.clone=function(){var e=new t;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map(function(e){return e.clone()}),e},t}(Zd),eh=function(e){function t(t,n,i,o){var r=e.call(this)||this;return r.index=t,r.shorthandName=n,r.ifValue=i,r.elseValue=o,r}return qd(t,e),t.prototype.resolve=function(e){return"upcase"===this.shorthandName?e?e.toLocaleUpperCase():"":"downcase"===this.shorthandName?e?e.toLocaleLowerCase():"":"capitalize"===this.shorthandName?e?e[0].toLocaleUpperCase()+e.substr(1):"":"pascalcase"===this.shorthandName?e?this._toPascalCase(e):"":Boolean(e)&&"string"===typeof this.ifValue?this.ifValue:Boolean(e)||"string"!==typeof this.elseValue?e||"":this.elseValue},t.prototype._toPascalCase=function(e){var t=e.match(/[a-z]+/gi);return t?t.map(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}).join(""):e},t.prototype.clone=function(){return new t(this.index,this.shorthandName,this.ifValue,this.elseValue)},t}(Zd),th=function(e){function t(t){var n=e.call(this)||this;return n.name=t,n}return qd(t,e),t.prototype.resolve=function(e){var t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),void 0!==t&&(this._children=[new $d(t)],!0)},t.prototype.clone=function(){var e=new t(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(function(e){return e.clone()}),e},t}(Yd);function nh(e,t){for(var n=e.slice();n.length>0;){var i=n.shift();if(!t(i))break;n.unshift.apply(n,i.children)}}var ih=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return qd(t,e),Object.defineProperty(t.prototype,"placeholderInfo",{get:function(){if(!this._placeholders){var e,t=[];this.walk(function(n){return n instanceof Jd&&(t.push(n),e=!e||e.index<n.index?n:e),!0}),this._placeholders={all:t,last:e}}return this._placeholders},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"placeholders",{get:function(){return this.placeholderInfo.all},enumerable:!0,configurable:!0}),t.prototype.offset=function(e){var t=0,n=!1;return this.walk(function(i){return i===e?(n=!0,!1):(t+=i.len(),!0)}),n?t:-1},t.prototype.fullLen=function(e){var t=0;return nh([e],function(e){return t+=e.len(),!0}),t},t.prototype.enclosingPlaceholders=function(e){for(var t=[],n=e.parent;n;)n instanceof Jd&&t.push(n),n=n.parent;return t},t.prototype.resolveVariables=function(e){var t=this;return this.walk(function(n){return n instanceof th&&n.resolve(e)&&(t._placeholders=void 0),!0}),this},t.prototype.appendChild=function(t){return this._placeholders=void 0,e.prototype.appendChild.call(this,t)},t.prototype.replace=function(t,n){return this._placeholders=void 0,e.prototype.replace.call(this,t,n)},t.prototype.clone=function(){var e=new t;return this._children=this.children.map(function(e){return e.clone()}),e},t.prototype.walk=function(e){nh(this.children,e)},t}(Zd),oh=function(){function e(){this._scanner=new Gd}return e.escape=function(e){return e.replace(/\$|}|\\/g,"\\$&")},e.prototype.parse=function(e,t,n){this._scanner.text(e),this._token=this._scanner.next();for(var i=new ih;this._parse(i););var o=new Map,r=[],s=0;i.walk(function(e){return e instanceof Jd&&(s+=1,e.isFinalTabstop?o.set(0,void 0):!o.has(e.index)&&e.children.length>0?o.set(e.index,e.children):r.push(e)),!0});for(var a=0,c=r;a<c.length;a++){var l=c[a],u=o.get(l.index);if(u){var d=new Jd(l.index);d.transform=l.transform;for(var h=0,p=u;h<p.length;h++){var g=p[h];d.appendChild(g.clone())}i.replace(l,[d])}}return n||(n=s>0&&t),!o.has(0)&&n&&i.appendChild(new Jd(0)),i},e.prototype._accept=function(e,t){if(void 0===e||this._token.type===e){var n=!t||this._scanner.tokenText(this._token);return this._token=this._scanner.next(),n}return!1},e.prototype._backTo=function(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1},e.prototype._until=function(e){if(14===this._token.type)return!1;for(var t=this._token;this._token.type!==e;)if(this._token=this._scanner.next(),14===this._token.type)return!1;var n=this._scanner.value.substring(t.pos,this._token.pos);return this._token=this._scanner.next(),n},e.prototype._parse=function(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)},e.prototype._parseEscaped=function(e){var t;return!!(t=this._accept(5,!0))&&(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new $d(t)),!0)},e.prototype._parseTabstopOrVariableName=function(e){var t,n=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new Jd(Number(t)):new th(t)),!0):this._backTo(n)},e.prototype._parseComplexPlaceholder=function(e){var t,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(n);var i=new Jd(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(i),!0;if(!this._parse(i))return e.appendChild(new $d("${"+t+":")),i.children.forEach(e.appendChild,e),!0}else{if(!(i.index>0&&this._accept(7)))return this._accept(6)?this._parseTransform(i)?(e.appendChild(i),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(i),!0):this._backTo(n);for(var o=new Xd;;){if(this._parseChoiceElement(o)){if(this._accept(2))continue;if(this._accept(7)&&(i.appendChild(o),this._accept(4)))return e.appendChild(i),!0}return this._backTo(n),!1}}},e.prototype._parseChoiceElement=function(e){for(var t=this._token,n=[];2!==this._token.type&&7!==this._token.type;){var i=void 0;if(!(i=(i=this._accept(5,!0))?this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||i:this._accept(void 0,!0)))return this._backTo(t),!1;n.push(i)}return 0===n.length?(this._backTo(t),!1):(e.appendChild(new $d(n.join(""))),!0)},e.prototype._parseComplexVariable=function(e){var t,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(n);var i=new th(t);if(!this._accept(1))return this._accept(6)?this._parseTransform(i)?(e.appendChild(i),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(i),!0):this._backTo(n);for(;;){if(this._accept(4))return e.appendChild(i),!0;if(!this._parse(i))return e.appendChild(new $d("${"+t+":")),i.children.forEach(e.appendChild,e),!0}},e.prototype._parseTransform=function(e){for(var t=new Qd,n="",i="";!this._accept(6);){var o=void 0;if(o=this._accept(5,!0))n+=o=this._accept(6,!0)||o;else{if(14===this._token.type)return!1;n+=this._accept(void 0,!0)}}for(;!this._accept(6);){o=void 0;if(o=this._accept(5,!0))o=this._accept(5,!0)||this._accept(6,!0)||o,t.appendChild(new $d(o));else if(!this._parseFormatString(t)&&!this._parseAnything(t))return!1}for(;!this._accept(4);){if(14===this._token.type)return!1;i+=this._accept(void 0,!0)}try{t.regexp=new RegExp(n,i)}catch(r){return!1}return e.transform=t,!0},e.prototype._parseFormatString=function(e){var t=this._token;if(!this._accept(0))return!1;var n=!1;this._accept(3)&&(n=!0);var i=this._accept(8,!0);if(!i)return this._backTo(t),!1;if(!n)return e.appendChild(new eh(Number(i))),!0;if(this._accept(4))return e.appendChild(new eh(Number(i))),!0;if(!this._accept(1))return this._backTo(t),!1;if(this._accept(6)){var o=this._accept(9,!0);return o&&this._accept(4)?(e.appendChild(new eh(Number(i),o)),!0):(this._backTo(t),!1)}if(this._accept(11)){if(r=this._until(4))return e.appendChild(new eh(Number(i),void 0,r,void 0)),!0}else if(this._accept(12)){if(s=this._until(4))return e.appendChild(new eh(Number(i),void 0,void 0,s)),!0}else if(this._accept(13)){var r;if(r=this._until(1))if(s=this._until(4))return e.appendChild(new eh(Number(i),void 0,r,s)),!0}else{var s;if(s=this._until(4))return e.appendChild(new eh(Number(i),void 0,void 0,s)),!0}return this._backTo(t),!1},e.prototype._parseAnything=function(e){return 14!==this._token.type&&(e.appendChild(new $d(this._scanner.tokenText(this._token))),this._accept(void 0),!0)},e}();var rh=function(){function e(e){this._delegates=e}return e.prototype.resolve=function(e){for(var t=0,n=this._delegates;t<n.length;t++){var i=n[t].resolve(e);if(void 0!==i)return i}},e}(),sh=function(){function e(e,t){this._model=e,this._selection=t}return e.prototype.resolve=function(e){var t=e.name;if("SELECTION"===t||"TM_SELECTED_TEXT"===t){var n=this._model.getValueInRange(this._selection)||void 0;if(n&&this._selection.startLineNumber!==this._selection.endLineNumber&&e.snippet){var i=this._model.getLineContent(this._selection.startLineNumber),o=Object(he.q)(i,0,this._selection.startColumn-1),r=o;e.snippet.walk(function(t){return t!==e&&(t instanceof $d&&(r=Object(he.q)(t.value.split(/\r\n|\r|\n/).pop())),!0)});var s=Object(he.b)(r,o);n=n.replace(/(\r\n|\r|\n)(.*)/g,function(e,t,n){return""+t+r.substr(s)+n})}return n}if("TM_CURRENT_LINE"===t)return this._model.getLineContent(this._selection.positionLineNumber);if("TM_CURRENT_WORD"===t){var a=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return a&&a.word||void 0}return"TM_LINE_INDEX"===t?String(this._selection.positionLineNumber-1):"TM_LINE_NUMBER"===t?String(this._selection.positionLineNumber):void 0},e}(),ah=function(){function e(e){this._model=e}return e.prototype.resolve=function(e){var t=e.name;if("TM_FILENAME"===t)return Object(ws.basename)(this._model.uri.fsPath);if("TM_FILENAME_BASE"===t){var n=Object(ws.basename)(this._model.uri.fsPath),i=n.lastIndexOf(".");return i<=0?n:n.slice(0,i)}if("TM_DIRECTORY"===t){var o=Object(ws.dirname)(this._model.uri.fsPath);return"."!==o?o:""}return"TM_FILEPATH"===t?this._model.uri.fsPath:void 0},e}(),ch=function(){function e(e,t,n){this._clipboardService=e,this._selectionIdx=t,this._selectionCount=n}return e.prototype.resolve=function(e){if("CLIPBOARD"===e.name&&this._clipboardService){var t=this._clipboardService.readText();if(t){var n=t.split(/\r\n|\n|\r/).filter(function(e){return!Object(he.s)(e)});return n.length===this._selectionCount?n[this._selectionIdx]:t}}},e}(),lh=function(){function e(e){this._model=e}return e.prototype.resolve=function(e){var t=e.name,n=this._model.getLanguageIdentifier(),i=Xt.a.getComments(n.id);if(i)return"LINE_COMMENT"===t?i.lineCommentToken||void 0:"BLOCK_COMMENT_START"===t?i.blockCommentStartToken||void 0:"BLOCK_COMMENT_END"===t&&i.blockCommentEndToken||void 0},e}(),uh=function(){function e(){}return e.prototype.resolve=function(t){var n=t.name;return"CURRENT_YEAR"===n?String((new Date).getFullYear()):"CURRENT_YEAR_SHORT"===n?String((new Date).getFullYear()).slice(-2):"CURRENT_MONTH"===n?Object(he.A)((new Date).getMonth().valueOf()+1,2):"CURRENT_DATE"===n?Object(he.A)((new Date).getDate().valueOf(),2):"CURRENT_HOUR"===n?Object(he.A)((new Date).getHours().valueOf(),2):"CURRENT_MINUTE"===n?Object(he.A)((new Date).getMinutes().valueOf(),2):"CURRENT_SECOND"===n?Object(he.A)((new Date).getSeconds().valueOf(),2):"CURRENT_DAY_NAME"===n?e.dayNames[(new Date).getDay()]:"CURRENT_DAY_NAME_SHORT"===n?e.dayNamesShort[(new Date).getDay()]:"CURRENT_MONTH_NAME"===n?e.monthNames[(new Date).getMonth()]:"CURRENT_MONTH_NAME_SHORT"===n?e.monthNamesShort[(new Date).getMonth()]:void 0},e.dayNames=[V.a("Sunday","Sunday"),V.a("Monday","Monday"),V.a("Tuesday","Tuesday"),V.a("Wednesday","Wednesday"),V.a("Thursday","Thursday"),V.a("Friday","Friday"),V.a("Saturday","Saturday")],e.dayNamesShort=[V.a("SundayShort","Sun"),V.a("MondayShort","Mon"),V.a("TuesdayShort","Tue"),V.a("WednesdayShort","Wed"),V.a("ThursdayShort","Thu"),V.a("FridayShort","Fri"),V.a("SaturdayShort","Sat")],e.monthNames=[V.a("January","January"),V.a("February","February"),V.a("March","March"),V.a("April","April"),V.a("May","May"),V.a("June","June"),V.a("July","July"),V.a("August","August"),V.a("September","September"),V.a("October","October"),V.a("November","November"),V.a("December","December")],e.monthNamesShort=[V.a("JanuaryShort","Jan"),V.a("FebruaryShort","Feb"),V.a("MarchShort","Mar"),V.a("AprilShort","Apr"),V.a("MayShort","May"),V.a("JuneShort","Jun"),V.a("JulyShort","Jul"),V.a("AugustShort","Aug"),V.a("SeptemberShort","Sep"),V.a("OctoberShort","Oct"),V.a("NovemberShort","Nov"),V.a("DecemberShort","Dec")],e}(),dh=function(){function e(e){this._workspaceService=e}return e.prototype.resolve=function(e){if("WORKSPACE_NAME"===e.name&&this._workspaceService){var t=function(e){return e.configuration?{configPath:e.configuration,id:e.id}:1===e.folders.length?e.folders[0].uri:void 0}(this._workspaceService.getWorkspace());if(t){if(t instanceof Ye.a)return Object(ws.basename)(t.path);var n=Object(ws.basename)(t.configPath.path);return Object(he.k)(n,"code-workspace")&&(n=n.substr(0,n.length-"code-workspace".length-1)),n}}},e}();Object(X.e)(function(e,t){function n(t){var n=e.getColor(t);return n?n.toString():"transparent"}t.addRule(".monaco-editor .snippet-placeholder { background-color: "+n(J.Gb)+"; outline-color: "+n(J.Hb)+"; }"),t.addRule(".monaco-editor .finish-snippet-placeholder { background-color: "+n(J.Eb)+"; outline-color: "+n(J.Fb)+"; }")});var hh=function(){function e(e,t,n){this._nestingLevel=1,this._editor=e,this._snippet=t,this._offset=n,this._placeholderGroups=Object(Ge.l)(t.placeholders,Jd.compareByIndex),this._placeholderGroupsIdx=-1}return e.prototype.dispose=function(){if(this._placeholderDecorations){var e=[];this._placeholderDecorations.forEach(function(t){return e.push(t)}),this._editor.deltaDecorations(e,[])}this._placeholderGroups.length=0},e.prototype._initDecorations=function(){var t=this;if(!this._placeholderDecorations){this._placeholderDecorations=new Map;var n=this._editor.getModel();this._editor.changeDecorations(function(i){for(var o=0,r=t._snippet.placeholders;o<r.length;o++){var s=r[o],a=t._snippet.offset(s),c=t._snippet.fullLen(s),l=se.a.fromPositions(n.getPositionAt(t._offset+a),n.getPositionAt(t._offset+a+c)),u=s.isFinalTabstop?e._decor.inactiveFinal:e._decor.inactive,d=i.addDecoration(l,u);t._placeholderDecorations.set(s,d)}})}},e.prototype.move=function(t){var n=this;if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){for(var i=[],o=0,r=this._placeholderGroups[this._placeholderGroupsIdx];o<r.length;o++){var s=r[o];if(s.transform){var a=this._placeholderDecorations.get(s),c=this._editor.getModel().getDecorationRange(a),l=this._editor.getModel().getValueInRange(c);i.push(Jt.a.replaceMove(c,s.transform.resolve(l)))}}i.length>0&&this._editor.executeEdits("snippet.placeholderTransform",i)}var u=!1;!0===t&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,u=!0):!1===t&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,u=!0);var d=this._editor.getModel().changeDecorations(function(t){for(var i=new Set,o=[],r=0,s=n._placeholderGroups[n._placeholderGroupsIdx];r<s.length;r++){var a=s[r],c=n._placeholderDecorations.get(a),l=n._editor.getModel().getDecorationRange(c);o.push(new q.a(l.startLineNumber,l.startColumn,l.endLineNumber,l.endColumn)),u=u&&l.isEmpty()&&a.toString().length>0,t.changeDecorationOptions(c,a.isFinalTabstop?e._decor.activeFinal:e._decor.active),i.add(a);for(var d=0,h=n._snippet.enclosingPlaceholders(a);d<h.length;d++){var p=h[d],g=n._placeholderDecorations.get(p);t.changeDecorationOptions(g,p.isFinalTabstop?e._decor.activeFinal:e._decor.active),i.add(p)}}return n._placeholderDecorations.forEach(function(n,o){i.has(o)||t.changeDecorationOptions(n,o.isFinalTabstop?e._decor.inactiveFinal:e._decor.inactive)}),o});return u?this.move(t):d},Object.defineProperty(e.prototype,"isAtFirstPlaceholder",{get:function(){return this._placeholderGroupsIdx<=0||0===this._placeholderGroups.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAtLastPlaceholder",{get:function(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasPlaceholder",{get:function(){return this._snippet.placeholders.length>0},enumerable:!0,configurable:!0}),e.prototype.computePossibleSelections=function(){for(var e=new Map,t=0,n=this._placeholderGroups;t<n.length;t++)for(var i=void 0,o=0,r=n[t];o<r.length;o++){var s=r[o];if(s.isFinalTabstop)break;i||(i=[],e.set(s.index,i));var a=this._placeholderDecorations.get(s),c=this._editor.getModel().getDecorationRange(a);if(!c){e.delete(s.index);break}i.push(c)}return e},Object.defineProperty(e.prototype,"choice",{get:function(){return this._placeholderGroups[this._placeholderGroupsIdx][0].choice},enumerable:!0,configurable:!0}),e.prototype.merge=function(t){var n=this,i=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations(function(o){for(var r=0,s=n._placeholderGroups[n._placeholderGroupsIdx];r<s.length;r++){var a=s[r],c=t.shift();console.assert(!c._placeholderDecorations);for(var l=c._snippet.placeholderInfo.last.index,u=0,d=c._snippet.placeholderInfo.all;u<d.length;u++){var h=d[u];h.isFinalTabstop?h.index=a.index+(l+1)/n._nestingLevel:h.index=a.index+h.index/n._nestingLevel}n._snippet.replace(a,c._snippet.children);var p=n._placeholderDecorations.get(a);o.removeDecoration(p),n._placeholderDecorations.delete(a);for(var g=0,f=c._snippet.placeholders;g<f.length;g++){var m=f[g],_=c._snippet.offset(m),v=c._snippet.fullLen(m),b=se.a.fromPositions(i.getPositionAt(c._offset+_),i.getPositionAt(c._offset+_+v)),y=o.addDecoration(b,e._decor.inactive);n._placeholderDecorations.set(m,y)}}n._placeholderGroups=Object(Ge.l)(n._snippet.placeholders,Jd.compareByIndex)})},e._decor={active:$.a.register({stickiness:0,className:"snippet-placeholder"}),inactive:$.a.register({stickiness:1,className:"snippet-placeholder"}),activeFinal:$.a.register({stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:$.a.register({stickiness:1,className:"finish-snippet-placeholder"})},e}(),ph=function(){function e(e,t,n,i,o){void 0===n&&(n=0),void 0===i&&(i=0),void 0===o&&(o=!0),this._templateMerges=[],this._snippets=[],this._editor=e,this._template=t,this._overwriteBefore=n,this._overwriteAfter=i,this._adjustWhitespace=o}return e.adjustWhitespace=function(e,t,n){var i=e.getLineContent(t.lineNumber),o=Object(he.q)(i,0,t.column-1);n.walk(function(t){if(t instanceof $d&&!(t.parent instanceof Xd)){for(var n=t.value.split(/\r\n|\r|\n/),i=1;i<n.length;i++){var r=Object(he.q)(n[i]);n[i]=e.normalizeIndentation(o+r)+n[i].substr(r.length)}var s=n.join(e.getEOL());s!==t.value&&t.parent.replace(t,[new $d(s)])}return!0})},e.adjustSelection=function(e,t,n,i){if(0!==n||0!==i){var o=t.positionLineNumber,r=t.positionColumn,s=r-n,a=r+i,c=e.validateRange({startLineNumber:o,startColumn:s,endLineNumber:o,endColumn:a});t=q.a.createWithDirection(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn,t.getDirection())}return t},e.createEditsAndSnippets=function(t,n,i,o,r,s){var a=[],c=[];if(!t.hasModel())return{edits:a,snippets:c};for(var l=t.getModel(),u=new ah(l),d=t.invokeWithinContext(function(e){return e.get(ro,oo.d)}),h=t.invokeWithinContext(function(e){return e.get(Kd.a,oo.d)}),p=0,g=l.getValueInRange(e.adjustSelection(l,t.getSelection(),i,0)),f=l.getValueInRange(e.adjustSelection(l,t.getSelection(),0,o)),m=l.getLineFirstNonWhitespaceColumn(t.getSelection().positionLineNumber),_=t.getSelections().map(function(e,t){return{selection:e,idx:t}}).sort(function(e,t){return se.a.compareRangesUsingStarts(e.selection,t.selection)}),v=0,b=_;v<b.length;v++){var y=b[v],w=y.selection,C=y.idx,S=e.adjustSelection(l,w,i,0),x=e.adjustSelection(l,w,0,o);g!==l.getValueInRange(S)&&(S=w),f!==l.getValueInRange(x)&&(x=w);var O=w.setStartPosition(S.startLineNumber,S.startColumn).setEndPosition(x.endLineNumber,x.endColumn),k=(new oh).parse(n,!0,r),D=O.getStartPosition();(s||C>0&&m!==l.getLineFirstNonWhitespaceColumn(w.positionLineNumber))&&e.adjustWhitespace(l,D,k),k.resolveVariables(new rh([u,new ch(d,C,_.length),new sh(l,w),new lh(l),new uh,new dh(h)]));var I=l.getOffsetAt(D)+p;p+=k.toString().length-l.getValueLengthInRange(O),a[C]=Jt.a.replace(O,k.toString()),c[C]=new hh(t,k,I)}return{edits:a,snippets:c}},e.prototype.dispose=function(){Object(z.d)(this._snippets)},e.prototype._logInfo=function(){return'template="'+this._template+'", merged_templates="'+this._templateMerges.join(" -> ")+'"'},e.prototype.insert=function(){var t=this;if(this._editor.hasModel()){var n=this._editor.getModel(),i=e.createEditsAndSnippets(this._editor,this._template,this._overwriteBefore,this._overwriteAfter,!1,this._adjustWhitespace),o=i.edits,r=i.snippets;this._snippets=r;var s=n.pushEditOperations(this._editor.getSelections(),o,function(e){return t._snippets[0].hasPlaceholder?t._move(!0):e.map(function(e){return q.a.fromPositions(e.range.getEndPosition())})});this._editor.setSelections(s),this._editor.revealRange(s[0])}},e.prototype.merge=function(t,n,i,o){var r=this;if(void 0===n&&(n=0),void 0===i&&(i=0),void 0===o&&(o=!0),this._editor.hasModel()){this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,t]);var s=e.createEditsAndSnippets(this._editor,t,n,i,!0,o),a=s.edits,c=s.snippets;this._editor.setSelections(this._editor.getModel().pushEditOperations(this._editor.getSelections(),a,function(e){for(var t=0,n=r._snippets;t<n.length;t++){n[t].merge(c)}return console.assert(0===c.length),r._snippets[0].hasPlaceholder?r._move(void 0):e.map(function(e){return q.a.fromPositions(e.range.getEndPosition())})}))}},e.prototype.next=function(){var e=this._move(!0);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())},e.prototype.prev=function(){var e=this._move(!1);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())},e.prototype._move=function(e){for(var t=[],n=0,i=this._snippets;n<i.length;n++){var o=i[n].move(e);t.push.apply(t,o)}return t},Object.defineProperty(e.prototype,"isAtFirstPlaceholder",{get:function(){return this._snippets[0].isAtFirstPlaceholder},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAtLastPlaceholder",{get:function(){return this._snippets[0].isAtLastPlaceholder},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasPlaceholder",{get:function(){return this._snippets[0].hasPlaceholder},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"choice",{get:function(){return this._snippets[0].choice},enumerable:!0,configurable:!0}),e.prototype.isSelectionWithinPlaceholders=function(){if(!this.hasPlaceholder)return!1;var e=this._editor.getSelections();if(e.length<this._snippets.length)return!1;for(var t=new Map,n=function(n){var i=n.computePossibleSelections();if(0===t.size&&i.forEach(function(n,i){n.sort(se.a.compareRangesUsingStarts);for(var o=0,r=e;o<r.length;o++){var s=r[o];if(n[0].containsRange(s)){t.set(i,[]);break}}}),0===t.size)return{value:!1};t.forEach(function(e,t){e.push.apply(e,i.get(t))})},i=0,o=this._snippets;i<o.length;i++){var r=n(o[i]);if("object"===typeof r)return r.value}return e.sort(se.a.compareRangesUsingStarts),t.forEach(function(n,i){if(n.length===e.length){n.sort(se.a.compareRangesUsingStarts);for(var o=0;o<n.length;o++)if(!n[o].containsRange(e[o]))return void t.delete(i)}else t.delete(i)}),t.size>0},e}(),gh=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},fh=function(e,t){return function(n,i){t(n,i,e)}},mh=function(){function e(t,n,i){this._editor=t,this._logService=n,this._snippetListener=[],this._inSnippet=e.InSnippetMode.bindTo(i),this._hasNextTabstop=e.HasNextTabstop.bindTo(i),this._hasPrevTabstop=e.HasPrevTabstop.bindTo(i)}return e.get=function(e){return e.getContribution("snippetController2")},e.prototype.dispose=function(){this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),Object(z.d)(this._session)},e.prototype.getId=function(){return"snippetController2"},e.prototype.insert=function(e,t,n,i,o,r){void 0===t&&(t=0),void 0===n&&(n=0),void 0===i&&(i=!0),void 0===o&&(o=!0),void 0===r&&(r=!0);try{this._doInsert(e,t,n,i,o,r)}catch(s){this.cancel(),this._logService.error(s),this._logService.error("snippet_error"),this._logService.error("insert_template=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}},e.prototype._doInsert=function(e,t,n,i,o,r){var s=this;void 0===t&&(t=0),void 0===n&&(n=0),void 0===i&&(i=!0),void 0===o&&(o=!0),void 0===r&&(r=!0),this._editor.hasModel()&&(this._snippetListener=Object(z.d)(this._snippetListener),i&&this._editor.getModel().pushStackElement(),this._session?this._session.merge(e,t,n,r):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new ph(this._editor,e,t,n,r),this._session.insert()),o&&this._editor.getModel().pushStackElement(),this._updateState(),this._snippetListener=[this._editor.onDidChangeModelContent(function(e){return e.isFlush&&s.cancel()}),this._editor.onDidChangeModel(function(){return s.cancel()}),this._editor.onDidChangeCursorSelection(function(){return s._updateState()})])},e.prototype._updateState=function(){if(this._session&&this._editor.hasModel()){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}},e.prototype._handleChoice=function(){var e=this;if(this._session&&this._editor.hasModel()){var t,n,i=this._session.choice;if(i){if(this._currentChoice!==i){this._currentChoice=i,this._editor.setSelections(this._editor.getSelections().map(function(e){return q.a.fromPositions(e.getStartPosition())}));var o=i.options[0];t=this._editor,n=i.options.map(function(t,n){return{kind:13,label:t.value,insertText:t.value,sortText:Object(he.D)("a",n+1),range:se.a.fromPositions(e._editor.getPosition(),e._editor.getPosition().delta(0,o.value.length))}}),setTimeout(function(){var e;(e=Hd.onlyOnceSuggestions).push.apply(e,n),t.getContribution("editor.contrib.suggestController").triggerSuggest((new Set).add(Hd))},0)}}else this._currentChoice=void 0}else this._currentChoice=void 0},e.prototype.finish=function(){for(;this._inSnippet.get();)this.next()},e.prototype.cancel=function(e){void 0===e&&(e=!1),this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),Object(z.d)(this._snippetListener),Object(z.d)(this._session),this._session=void 0,this._modelVersionId=-1,e&&this._editor.setSelections([this._editor.getSelection()])},e.prototype.prev=function(){this._session&&this._session.prev(),this._updateState()},e.prototype.next=function(){this._session&&this._session.next(),this._updateState()},e.prototype.isInSnippet=function(){return Boolean(this._inSnippet.get())},e.InSnippetMode=new Pe.f("inSnippetMode",!1),e.HasNextTabstop=new Pe.f("hasNextTabstop",!1),e.HasPrevTabstop=new Pe.f("hasPrevTabstop",!1),e=gh([fh(1,Ud.a),fh(2,Pe.e)],e)}();Object(U.h)(mh);var _h=U.c.bindToContribution(mh.get);Object(U.g)(new _h({id:"jumpToNextSnippetPlaceholder",precondition:Pe.d.and(mh.InSnippetMode,mh.HasNextTabstop),handler:function(e){return e.next()},kbOpts:{weight:130,kbExpr:G.a.editorTextFocus,primary:2}})),Object(U.g)(new _h({id:"jumpToPrevSnippetPlaceholder",precondition:Pe.d.and(mh.InSnippetMode,mh.HasPrevTabstop),handler:function(e){return e.prev()},kbOpts:{weight:130,kbExpr:G.a.editorTextFocus,primary:1026}})),Object(U.g)(new _h({id:"leaveSnippet",precondition:mh.InSnippetMode,handler:function(e){return e.cancel(!0)},kbOpts:{weight:130,kbExpr:G.a.editorTextFocus,primary:9,secondary:[1033]}})),Object(U.g)(new _h({id:"acceptSnippet",precondition:mh.InSnippetMode,handler:function(e){return e.finish()}}));var vh,bh=n(220),yh=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},wh=function(e,t){return function(n,i){t(n,i,e)}},Ch=function(){function e(t,n){this._editor=t,this._ckOtherSuggestions=e.OtherSuggestions.bindTo(n)}return e.prototype.dispose=function(){this.reset()},e.prototype.reset=function(){this._ckOtherSuggestions.reset(),Object(z.d)(this._listener),this._model=void 0,this._acceptNext=void 0,this._ignore=!1},e.prototype.set=function(t,n){var i=this,o=t.model,r=t.index;0!==o.items.length?e._moveIndex(!0,o,r)!==r?(this._acceptNext=n,this._model=o,this._index=r,this._listener=this._editor.onDidChangeCursorPosition(function(){i._ignore||i.reset()}),this._ckOtherSuggestions.set(!0)):this.reset():this.reset()},e._moveIndex=function(e,t,n){for(var i=n;(i=(i+t.items.length+(e?1:-1))%t.items.length)!==n&&t.items[i].completion.additionalTextEdits;);return i},e.prototype.next=function(){this._move(!0)},e.prototype.prev=function(){this._move(!1)},e.prototype._move=function(t){if(this._model)try{this._ignore=!0,this._index=e._moveIndex(t,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}},e.OtherSuggestions=new Pe.f("hasOtherSuggestions",!1),e=yh([wh(1,Pe.e)],e)}(),Sh=n(120),xh=(function(){}(),function(){function e(t,n,i,o,r){void 0===r&&(r=Sh.a.contribInfo.suggest),this._snippetCompareFn=e._compareCompletionItems,this._items=t,this._column=n,this._wordDistance=o,this._options=r,this._refilterKind=1,this._lineContext=i,"top"===r.snippets?this._snippetCompareFn=e._compareCompletionItemsSnippetsUp:"bottom"===r.snippets&&(this._snippetCompareFn=e._compareCompletionItemsSnippetsDown)}return e.prototype.dispose=function(){for(var e=new Set,t=0,n=this._items;t<n.length;t++){var i=n[t].container;e.has(i)||(e.add(i),Object(z.e)(i)&&i.dispose())}},Object.defineProperty(e.prototype,"lineContext",{get:function(){return this._lineContext},set:function(e){this._lineContext.leadingLineContent===e.leadingLineContent&&this._lineContext.characterCountDelta===e.characterCountDelta||(this._refilterKind=this._lineContext.characterCountDelta<e.characterCountDelta&&this._filteredItems?2:1,this._lineContext=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._ensureCachedState(),this._filteredItems},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"incomplete",{get:function(){return this._ensureCachedState(),this._isIncomplete},enumerable:!0,configurable:!0}),e.prototype.adopt=function(e){for(var t=new Array,n=0;n<this._items.length;)e.has(this._items[n].provider)?n++:(t.push(this._items[n]),this._items[n]=this._items[this._items.length-1],this._items.pop());return this._refilterKind=1,t},Object.defineProperty(e.prototype,"stats",{get:function(){return this._ensureCachedState(),this._stats},enumerable:!0,configurable:!0}),e.prototype._ensureCachedState=function(){0!==this._refilterKind&&this._createCachedState()},e.prototype._createCachedState=function(){this._isIncomplete=new Set,this._stats={suggestionCount:0,snippetCount:0,textCount:0};for(var e=this._lineContext,t=e.leadingLineContent,n=e.characterCountDelta,i="",o="",r=1===this._refilterKind?this._items:this._filteredItems,s=[],a=!this._options.filterGraceful||r.length>2e3?Ns.d:Ns.e,c=0;c<r.length;c++){var l=r[c];l.container.incomplete&&this._isIncomplete.add(l.provider);var u=l.position.column-l.completion.range.startColumn,d=u+n-(l.position.column-this._column);if(i.length!==d&&(o=(i=0===d?"":t.slice(-d)).toLowerCase()),l.word=i,0===d)l.score=Ns.a.Default;else{for(var h=0;h<u;){var p=i.charCodeAt(h);if(32!==p&&9!==p)break;h+=1}if(h>=d)l.score=Ns.a.Default;else if("string"===typeof l.completion.filterText){if(!(g=a(i,o,h,l.completion.filterText,l.filterTextLow,0,!1)))continue;l.score=Object(Ns.b)(i,o,0,l.completion.label,l.labelLow,0),l.score[0]=g[0]}else{var g;if(!(g=a(i,o,h,l.completion.label,l.labelLow,0,!1)))continue;l.score=g}}switch(l.idx=c,l.distance=this._wordDistance.distance(l.position,l.completion),s.push(l),this._stats.suggestionCount++,l.completion.kind){case 25:this._stats.snippetCount++;break;case 18:this._stats.textCount++}}this._filteredItems=s.sort(this._snippetCompareFn),this._refilterKind=0},e._compareCompletionItems=function(e,t){return e.score[0]>t.score[0]?-1:e.score[0]<t.score[0]?1:e.distance<t.distance?-1:e.distance>t.distance?1:e.idx<t.idx?-1:e.idx>t.idx?1:0},e._compareCompletionItemsSnippetsDown=function(t,n){if(t.completion.kind!==n.completion.kind){if(25===t.completion.kind)return 1;if(25===n.completion.kind)return-1}return e._compareCompletionItems(t,n)},e._compareCompletionItemsSnippetsUp=function(t,n){if(t.completion.kind!==n.completion.kind){if(25===t.completion.kind)return-1;if(25===n.completion.kind)return 1}return e._compareCompletionItems(t,n)},e}()),Oh=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),kh=function(){function e(){}return e.create=function(t,n){if(!n.getConfiguration().contribInfo.suggest.localityBonus)return Promise.resolve(e.None);if(!n.hasModel())return Promise.resolve(e.None);var i=n.getModel(),o=n.getPosition();return t.canComputeWordRanges(i.uri)?(new xd).provideSelectionRanges(i,[o]).then(function(r){return r&&0!==r.length&&0!==r[0].length?t.computeWordRanges(i.uri,r[0][0].range).then(function(t){return new(function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return Oh(i,e),i.prototype.distance=function(e,i){if(!t||!o.equals(n.getPosition()))return 0;if(17===i.kind)return 2<<20;var s=i.label,a=t[s];if(Object(Ge.m)(a))return 2<<20;for(var c=Object(Ge.c)(a,se.a.fromPositions(e),se.a.compareRangesUsingStarts),l=c>=0?a[c]:a[Math.max(0,~c-1)],u=r.length,d=0,h=r[0];d<h.length;d++){var p=h[d];if(!se.a.containsRange(p.range,l))break;u-=1}return u},i}(e))}):e.None}):Promise.resolve(e.None)},e.None=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Oh(t,e),t.prototype.distance=function(){return 0},t}(e)),e}(),Dh=function(){function e(e,t,n,i){this.leadingLineContent=e.getLineContent(t.lineNumber).substr(0,t.column-1),this.leadingWord=e.getWordUntilPosition(t),this.lineNumber=t.lineNumber,this.column=t.column,this.auto=n,this.shy=i}return e.shouldAutoTrigger=function(e){if(!e.hasModel())return!1;var t=e.getModel(),n=e.getPosition();t.tokenizeIfCheap(n.lineNumber);var i=t.getWordAtPosition(n);return!!i&&(i.endColumn===n.column&&!!isNaN(Number(i.word)))},e}(),Ih=function(){function e(e,t){var n=this;this._editor=e,this._editorWorker=t,this._toDispose=[],this._triggerQuickSuggest=new H.e,this._triggerRefilter=new H.e,this._state=0,this._onDidCancel=new Ke.a,this._onDidTrigger=new Ke.a,this._onDidSuggest=new Ke.a,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._currentSelection=this._editor.getSelection()||new q.a(1,1,1,1),this._toDispose.push(this._editor.onDidChangeModel(function(){n._updateTriggerCharacters(),n.cancel()})),this._toDispose.push(this._editor.onDidChangeModelLanguage(function(){n._updateTriggerCharacters(),n.cancel()})),this._toDispose.push(this._editor.onDidChangeConfiguration(function(){n._updateTriggerCharacters(),n._updateQuickSuggest()})),this._toDispose.push(qe.d.onDidChange(function(){n._updateTriggerCharacters(),n._updateActiveSuggestSession()})),this._toDispose.push(this._editor.onDidChangeCursorSelection(function(e){n._onCursorChange(e)}));var i=!1;this._toDispose.push(this._editor.onCompositionStart(function(){i=!0})),this._toDispose.push(this._editor.onCompositionEnd(function(){i=!1,n._refilterCompletionItems()})),this._toDispose.push(this._editor.onDidChangeModelContent(function(){i||n._refilterCompletionItems()})),this._updateTriggerCharacters(),this._updateQuickSuggest()}return e.prototype.dispose=function(){Object(z.d)([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerCharacterListener,this._triggerQuickSuggest,this._triggerRefilter]),this._toDispose=Object(z.d)(this._toDispose),Object(z.d)(this._completionModel),this.cancel()},e.prototype._updateQuickSuggest=function(){this._quickSuggestDelay=this._editor.getConfiguration().contribInfo.quickSuggestionsDelay,(isNaN(this._quickSuggestDelay)||!this._quickSuggestDelay&&0!==this._quickSuggestDelay||this._quickSuggestDelay<0)&&(this._quickSuggestDelay=10)},e.prototype._updateTriggerCharacters=function(){var e=this;if(Object(z.d)(this._triggerCharacterListener),!this._editor.getConfiguration().readOnly&&this._editor.hasModel()&&this._editor.getConfiguration().contribInfo.suggestOnTriggerCharacters){for(var t=Object.create(null),n=0,i=qe.d.all(this._editor.getModel());n<i.length;n++)for(var o=i[n],r=0,s=o.triggerCharacters||[];r<s.length;r++){var a=s[r],c=t[a];c||(c=t[a]=new Set).add(Rd),c.add(o)}this._triggerCharacterListener=this._editor.onDidType(function(n){var i=n.charAt(n.length-1),o=t[i];if(o){var r=e._completionModel?e._completionModel.adopt(o):void 0;e.trigger({auto:!0,shy:!1,triggerCharacter:i},Boolean(e._completionModel),o,r)}})}},Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),e.prototype.cancel=function(e){void 0===e&&(e=!1),0!==this._state&&(this._triggerRefilter.cancel(),this._triggerQuickSuggest.cancel(),this._requestToken&&(this._requestToken.cancel(),this._requestToken=void 0),this._state=0,Object(z.d)(this._completionModel),this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:e}))},e.prototype._updateActiveSuggestSession=function(){0!==this._state&&(this._editor.hasModel()&&qe.d.has(this._editor.getModel())?this.trigger({auto:2===this._state,shy:!1},!0):this.cancel())},e.prototype._onCursorChange=function(e){var t=this;if(this._editor.hasModel()){var n=this._editor.getModel(),i=this._currentSelection;if(this._currentSelection=this._editor.getSelection(),!e.selection.isEmpty()||0!==e.reason||"keyboard"!==e.source&&"deleteLeft"!==e.source)0!==this._state&&this.cancel();else if(qe.d.has(n)&&0===this._state){if(!1===this._editor.getConfiguration().contribInfo.quickSuggestions)return;if(!i.containsRange(this._currentSelection)&&!i.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))return;if(this._editor.getConfiguration().contribInfo.suggest.snippetsPreventQuickSuggestions&&mh.get(this._editor).isInSnippet())return;this.cancel(),this._triggerQuickSuggest.cancelAndSet(function(){if(Dh.shouldAutoTrigger(t._editor)&&t._editor.hasModel()){var e=t._editor.getModel(),n=t._editor.getPosition(),i=t._editor.getConfiguration().contribInfo.quickSuggestions;if(!1!==i){if(!0===i);else{e.tokenizeIfCheap(n.lineNumber);var o=e.getLineTokens(n.lineNumber),r=o.getStandardTokenType(o.findTokenIndexAtOffset(Math.max(n.column-1-1,0)));if(!(i.other&&0===r||i.comments&&1===r||i.strings&&2===r))return}t.trigger({auto:!0,shy:!1})}}},this._quickSuggestDelay)}}},e.prototype._refilterCompletionItems=function(){var e=this;0!==this._state&&this._editor.hasModel()&&this._triggerRefilter.cancelAndSet(function(){if(e._editor.hasModel()){var t=e._editor.getModel(),n=e._editor.getPosition(),i=new Dh(t,n,2===e._state,!1);e._onNewContext(i)}},0)},e.prototype.trigger=function(e,t,n,i){var o=this;if(void 0===t&&(t=!1),this._editor.hasModel()){var r,s=this._editor.getModel(),a=e.auto,c=new Dh(s,this._editor.getPosition(),a,e.shy);this.cancel(t),this._state=a?2:1,this._onDidTrigger.fire({auto:a,shy:e.shy}),this._context=c,r=e.triggerCharacter?{triggerKind:1,triggerCharacter:e.triggerCharacter}:n&&n.size>0?{triggerKind:2}:{triggerKind:0},this._requestToken=new Ze.b;var l=this._editor.getConfiguration().contribInfo,u=new Set,d=1;switch(l.suggest.snippets){case"top":d=0;break;case"bottom":d=2;break;case"none":u.add(25)}for(var h in l.suggest.filteredTypes){var p=Object(qe.A)(h,!0);"undefined"!==typeof p&&!1===l.suggest.filteredTypes[h]&&u.add(p)}var g=kh.create(this._editorWorker,this._editor),f=Fd(s,this._editor.getPosition(),new jd(d,u,n),r,this._requestToken.token);Promise.all([f,g]).then(function(t){var n=t[0],r=t[1];if(Object(z.d)(o._requestToken),0!==o._state&&o._editor.hasModel()){var s=o._editor.getModel();if(Object(Ge.n)(i)){var c=Vd(d);n=n.concat(i).sort(c)}var l=new Dh(s,o._editor.getPosition(),a,e.shy);Object(z.d)(o._completionModel),o._completionModel=new xh(n,o._context.column,{leadingLineContent:l.leadingLineContent,characterCountDelta:l.column-o._context.column},r,o._editor.getConfiguration().contribInfo.suggest),o._onNewContext(l)}}).catch($e.e)}},e.prototype._onNewContext=function(e){if(this._context)if(e.lineNumber===this._context.lineNumber){if(e.leadingWord.startColumn<this._context.leadingWord.startColumn)this.cancel();else if(e.column<this._context.column)e.leadingWord.word?this.trigger({auto:this._context.auto,shy:!1},!0):this.cancel();else if(this._completionModel)if(e.column>this._context.column&&this._completionModel.incomplete.size>0&&0!==e.leadingWord.word.length){var t=this._completionModel.incomplete,n=this._completionModel.adopt(t);this.trigger({auto:2===this._state,shy:!1},!0,t,n)}else{var i=this._completionModel.lineContext,o=!1;if(this._completionModel.lineContext={leadingLineContent:e.leadingLineContent,characterCountDelta:e.column-this._context.column},0===this._completionModel.items.length){if(Dh.shouldAutoTrigger(this._editor)&&this._context.leadingWord.endColumn<e.leadingWord.startColumn)return void this.trigger({auto:this._context.auto,shy:!1},!0);if(this._context.auto)return void this.cancel();if(this._completionModel.lineContext=i,(o=this._completionModel.items.length>0)&&0===e.leadingWord.word.length)return void this.cancel()}this._onDidSuggest.fire({completionModel:this._completionModel,auto:this._context.auto,shy:this._context.shy,isFrozen:o})}}else this.cancel()},e}(),Nh=(n(287),n(196)),Lh=n(167),Mh=n(171);function Eh(e,t,n,i){var o=i===vh.ROOT_FOLDER?["rootfolder-icon"]:i===vh.FOLDER?["folder-icon"]:["file-icon"];if(n){var r,s=void 0;if(n.scheme===rs.a.data)s=r=ss.a.parseMetaData(n).get(ss.a.META_DATA_LABEL);else r=Ph(Object(ss.c)(n).toLowerCase()),s=n.path.toLowerCase();if(i===vh.FOLDER)o.push(r+"-name-folder-icon");else{if(r){o.push(r+"-name-file-icon");for(var a=r.split("."),c=1;c<a.length;c++)o.push(a.slice(c).join(".")+"-ext-file-icon");o.push("ext-file-icon")}var l=function(e,t,n){var i=null;if(n){var o=null;if(n.scheme===rs.a.data){var r=ss.a.parseMetaData(n).get(ss.a.META_DATA_MIME);r&&(o=t.getModeId(r))}else{var s=e.getModel(n);s&&(o=s.getLanguageIdentifier().language)}o&&o!==Mh.c&&(i=o)}return i}(e,t,n);(l=l||(s?t.getModeIdByFilepathOrFirstLine(s):null))&&o.push(Ph(l)+"-lang-file-icon")}}return o}function Ph(e){return e.replace(/\s/g,"\\$&")}!function(e){e[e.FILE=0]="FILE",e[e.FOLDER=1]="FOLDER",e[e.ROOT_FOLDER=2]="ROOT_FOLDER"}(vh||(vh={}));var Rh=function(){return(Rh=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Th=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},Ah=function(e,t){return function(n,i){t(n,i,e)}},jh=Object(J.zb)("editorSuggestWidget.background",{dark:J.F,light:J.F,hc:J.F},V.a("editorSuggestWidgetBackground","Background color of the suggest widget.")),Fh=Object(J.zb)("editorSuggestWidget.border",{dark:J.G,light:J.G,hc:J.G},V.a("editorSuggestWidgetBorder","Border color of the suggest widget.")),Bh=Object(J.zb)("editorSuggestWidget.foreground",{dark:J.v,light:J.v,hc:J.v},V.a("editorSuggestWidgetForeground","Foreground color of the suggest widget.")),Wh=Object(J.zb)("editorSuggestWidget.selectedBackground",{dark:J.eb,light:J.eb,hc:J.eb},V.a("editorSuggestWidgetSelectedBackground","Background color of the selected entry in the suggest widget.")),Vh=Object(J.zb)("editorSuggestWidget.highlightForeground",{dark:J.gb,light:J.gb,hc:J.gb},V.a("editorSuggestWidgetHighlightForeground","Color of the match highlights in the suggest widget.")),Hh=/^(#([\da-f]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))$/i;function zh(e){if(!e)return!1;var t=e.completion;return!!t.documentation||t.detail&&t.detail!==t.label}var Uh=function(){function e(e,t,n,i,o,r){this.widget=e,this.editor=t,this.triggerKeybindingLabel=n,this._modelService=i,this._modeService=o,this._themeService=r}return Object.defineProperty(e.prototype,"templateId",{get:function(){return"suggestion"},enumerable:!0,configurable:!0}),e.prototype.renderTemplate=function(e){var t=this,n=Object.create(null);n.disposables=[],n.root=e,Object(st.f)(n.root,"show-file-icons"),n.icon=Object(st.m)(e,Object(st.a)(".icon")),n.colorspan=Object(st.m)(n.icon,Object(st.a)("span.colorspan"));var i=Object(st.m)(e,Object(st.a)(".contents")),o=Object(st.m)(i,Object(st.a)(".main"));n.iconLabel=new ms(o,{supportHighlights:!0}),n.disposables.push(n.iconLabel),n.typeLabel=Object(st.m)(o,Object(st.a)("span.type-label")),n.readMore=Object(st.m)(o,Object(st.a)("span.readMore")),n.readMore.title=V.a("readMore","Read More...{0}",this.triggerKeybindingLabel);var r=function(){var e=t.editor.getConfiguration(),i=e.fontInfo.fontFamily,r=e.contribInfo.suggestFontSize||e.fontInfo.fontSize,s=e.contribInfo.suggestLineHeight||e.fontInfo.lineHeight,a=e.fontInfo.fontWeight,c=r+"px",l=s+"px";n.root.style.fontSize=c,n.root.style.fontWeight=a,o.style.fontFamily=i,o.style.lineHeight=l,n.icon.style.height=l,n.icon.style.width=l,n.readMore.style.height=l,n.readMore.style.width=l};return r(),Ke.b.chain(this.editor.onDidChangeConfiguration.bind(this.editor)).filter(function(e){return e.fontInfo||e.contribInfo}).on(r,null,n.disposables),n},e.prototype.renderElement=function(e,t,n){var i=this,o=n,r=e.completion;o.icon.className="icon "+Object(qe.B)(r.kind),o.colorspan.style.backgroundColor="";var s,a,c={labelEscapeNewLines:!0,matches:Object(Ns.c)(e.score)},l=[];19===r.kind&&(a=l,(s=e).completion.label.match(Hh)?(a[0]=s.completion.label,1):"string"===typeof s.completion.documentation&&s.completion.documentation.match(Hh)&&(a[0]=s.completion.documentation,1))?(o.icon.className="icon customcolor",o.colorspan.style.backgroundColor=l[0]):20===r.kind&&this._themeService.getIconTheme().hasFileIcons?(o.icon.className="icon hide",c.extraClasses=[].concat(Eh(this._modelService,this._modeService,Ye.a.from({scheme:"fake",path:r.label}),vh.FILE),Eh(this._modelService,this._modeService,Ye.a.from({scheme:"fake",path:r.detail}),vh.FILE))):23===r.kind&&this._themeService.getIconTheme().hasFolderIcons?(o.icon.className="icon hide",c.extraClasses=[].concat(Eh(this._modelService,this._modeService,Ye.a.from({scheme:"fake",path:r.label}),vh.FOLDER),Eh(this._modelService,this._modeService,Ye.a.from({scheme:"fake",path:r.detail}),vh.FOLDER))):(o.icon.className="icon hide",c.extraClasses=["suggest-icon "+Object(qe.B)(r.kind)]),o.iconLabel.setLabel(r.label,void 0,c),o.typeLabel.textContent=(r.detail||"").replace(/\n.*$/m,""),zh(e)?(Object(st.O)(o.readMore),o.readMore.onmousedown=function(e){e.stopPropagation(),e.preventDefault()},o.readMore.onclick=function(e){e.stopPropagation(),e.preventDefault(),i.widget.toggleDetails()}):(Object(st.B)(o.readMore),o.readMore.onmousedown=null,o.readMore.onclick=null)},e.prototype.disposeTemplate=function(e){e.disposables=Object(z.d)(e.disposables)},e=Th([Ah(3,Je.a),Ah(4,qa.a),Ah(5,X.c)],e)}(),Kh=function(){function e(e,t,n,i,o){var r=this;this.widget=t,this.editor=n,this.markdownRenderer=i,this.triggerKeybindingLabel=o,this.borderWidth=1,this.disposables=[],this.el=Object(st.m)(e,Object(st.a)(".details")),this.disposables.push(Object(z.f)(function(){return e.removeChild(r.el)})),this.body=Object(st.a)(".body"),this.scrollbar=new ic.a(this.body,{}),Object(st.m)(this.el,this.scrollbar.getDomNode()),this.disposables.push(this.scrollbar),this.header=Object(st.m)(this.body,Object(st.a)(".header")),this.close=Object(st.m)(this.header,Object(st.a)("span.close")),this.close.title=V.a("readLess","Read less...{0}",this.triggerKeybindingLabel),this.type=Object(st.m)(this.header,Object(st.a)("p.type")),this.docs=Object(st.m)(this.body,Object(st.a)("p.docs")),this.ariaLabel=null,this.configureFont(),Ke.b.chain(this.editor.onDidChangeConfiguration.bind(this.editor)).filter(function(e){return e.fontInfo}).on(this.configureFont,this,this.disposables),i.onDidRenderCodeBlock(function(){return r.scrollbar.scanDomNode()},this,this.disposables)}return Object.defineProperty(e.prototype,"element",{get:function(){return this.el},enumerable:!0,configurable:!0}),e.prototype.render=function(e){var t=this;if(this.renderDisposeable=Object(z.d)(this.renderDisposeable),!e||!zh(e))return this.type.textContent="",this.docs.textContent="",Object(st.f)(this.el,"no-docs"),void(this.ariaLabel=null);if(Object(st.G)(this.el,"no-docs"),"string"===typeof e.completion.documentation)Object(st.G)(this.docs,"markdown-docs"),this.docs.textContent=e.completion.documentation;else{Object(st.f)(this.docs,"markdown-docs"),this.docs.innerHTML="";var n=this.markdownRenderer.render(e.completion.documentation);this.renderDisposeable=n,this.docs.appendChild(n.element)}e.completion.detail?(this.type.innerText=e.completion.detail,Object(st.O)(this.type)):(this.type.innerText="",Object(st.B)(this.type)),this.el.style.height=this.header.offsetHeight+this.docs.offsetHeight+2*this.borderWidth+"px",this.close.onmousedown=function(e){e.preventDefault(),e.stopPropagation()},this.close.onclick=function(e){e.preventDefault(),e.stopPropagation(),t.widget.toggleDetails()},this.body.scrollTop=0,this.scrollbar.scanDomNode(),this.ariaLabel=he.p("{0}{1}",e.completion.detail||"",e.completion.documentation?"string"===typeof e.completion.documentation?e.completion.documentation:e.completion.documentation.value:"")},e.prototype.getAriaLabel=function(){return this.ariaLabel},e.prototype.scrollDown=function(e){void 0===e&&(e=8),this.body.scrollTop+=e},e.prototype.scrollUp=function(e){void 0===e&&(e=8),this.body.scrollTop-=e},e.prototype.scrollTop=function(){this.body.scrollTop=0},e.prototype.scrollBottom=function(){this.body.scrollTop=this.body.scrollHeight},e.prototype.pageDown=function(){this.scrollDown(80)},e.prototype.pageUp=function(){this.scrollUp(80)},e.prototype.setBorderWidth=function(e){this.borderWidth=e},e.prototype.configureFont=function(){var e=this.editor.getConfiguration(),t=e.fontInfo.fontFamily,n=e.contribInfo.suggestFontSize||e.fontInfo.fontSize,i=e.contribInfo.suggestLineHeight||e.fontInfo.lineHeight,o=e.fontInfo.fontWeight,r=n+"px",s=i+"px";this.el.style.fontSize=r,this.el.style.fontWeight=o,this.type.style.fontFamily=t,this.close.style.height=s,this.close.style.width=s},e.prototype.dispose=function(){this.disposables=Object(z.d)(this.disposables),this.renderDisposeable=Object(z.d)(this.renderDisposeable)},e}(),qh=function(){function e(e,t,n,i,o,r,s,a,c){var l=this;this.editor=e,this.telemetryService=t,this.allowEditorOverflow=!0,this.ignoreFocusEvents=!1,this.editorBlurTimeout=new H.e,this.showTimeout=new H.e,this.onDidSelectEmitter=new Ke.a,this.onDidFocusEmitter=new Ke.a,this.onDidHideEmitter=new Ke.a,this.onDidShowEmitter=new Ke.a,this.onDidSelect=this.onDidSelectEmitter.event,this.onDidFocus=this.onDidFocusEmitter.event,this.onDidHide=this.onDidHideEmitter.event,this.onDidShow=this.onDidShowEmitter.event,this.maxWidgetWidth=660,this.listWidth=330,this.firstFocusInCurrentList=!1,this.preferDocPositionTop=!1;var u=r.lookupKeybinding("editor.action.triggerSuggest"),d=u?" ("+u.getLabel()+")":"",h=new Gc(e,s,a);this.isAuto=!1,this.focusedItem=null,this.storageService=o,this.element=Object(st.a)(".editor-widget.suggest-widget"),this.messageElement=Object(st.m)(this.element,Object(st.a)(".message")),this.listElement=Object(st.m)(this.element,Object(st.a)(".tree")),this.details=new Kh(this.element,this,this.editor,h,d);var p=function(){return Object(st.P)(l.element,"no-icons",!l.editor.getConfiguration().contribInfo.suggest.showIcons)};p();var g=c.createInstance(Uh,this,this.editor,d);this.list=new Nh.b(this.listElement,this,[g],{useShadows:!1,openController:{shouldOpen:function(){return!1}},mouseSupport:!1}),this.toDispose=[Object(ys.b)(this.list,i,{listInactiveFocusBackground:Wh,listInactiveFocusOutline:J.b}),i.onThemeChange(function(e){return l.onThemeChange(e)}),e.onDidLayoutChange(function(){return l.onEditorLayoutChange()}),this.list.onMouseDown(function(e){return l.onListMouseDown(e)}),this.list.onSelectionChange(function(e){return l.onListSelection(e)}),this.list.onFocusChange(function(e){return l.onListFocus(e)}),this.editor.onDidChangeCursorSelection(function(){return l.onCursorSelectionChanged()}),this.editor.onDidChangeConfiguration(function(e){return e.contribInfo&&p()})],this.suggestWidgetVisible=Td.Visible.bindTo(n),this.suggestWidgetMultipleSuggestions=Td.MultipleSuggestions.bindTo(n),this.editor.addContentWidget(this),this.setState(0),this.onThemeChange(i.getTheme())}return e.prototype.onCursorSelectionChanged=function(){0!==this.state&&this.editor.layoutContentWidget(this)},e.prototype.onEditorLayoutChange=function(){3!==this.state&&5!==this.state||!this.expandDocsSettingFromStorage()||this.expandSideOrBelow()},e.prototype.onListMouseDown=function(e){"undefined"!==typeof e.element&&"undefined"!==typeof e.index&&(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation(),this.select(e.element,e.index))},e.prototype.onListSelection=function(e){e.elements.length&&this.select(e.elements[0],e.indexes[0])},e.prototype.select=function(e,t){var n=this,i=this.completionModel;i&&e.resolve(Ze.a.None).then(function(){n.onDidSelectEmitter.fire({item:e,index:t,model:i}),n.editor.focus()})},e.prototype._getSuggestionAriaAlertLabel=function(e){return this.expandDocsSettingFromStorage()?V.a("ariaCurrenttSuggestionReadDetails","Item {0}, docs: {1}",e.completion.label,this.details.getAriaLabel()):e.completion.label},e.prototype._ariaAlert=function(e){this._lastAriaAlertLabel!==e&&(this._lastAriaAlertLabel=e,this._lastAriaAlertLabel&&Object(Ee.a)(this._lastAriaAlertLabel,!0))},e.prototype.onThemeChange=function(e){var t=e.getColor(jh);t&&(this.listElement.style.backgroundColor=t.toString(),this.details.element.style.backgroundColor=t.toString(),this.messageElement.style.backgroundColor=t.toString());var n=e.getColor(Fh);n&&(this.listElement.style.borderColor=n.toString(),this.details.element.style.borderColor=n.toString(),this.messageElement.style.borderColor=n.toString(),this.detailsBorderColor=n.toString());var i=e.getColor(J.J);i&&(this.detailsFocusBorderColor=i.toString()),this.details.setBorderWidth("hc"===e.type?2:1)},e.prototype.onListFocus=function(e){var t=this;if(!this.ignoreFocusEvents){if(!e.elements.length)return this.currentSuggestionDetails&&(this.currentSuggestionDetails.cancel(),this.currentSuggestionDetails=null,this.focusedItem=null),void this._ariaAlert(null);if(this.completionModel){var n=e.elements[0],i=e.indexes[0];this.firstFocusInCurrentList=!this.focusedItem,n!==this.focusedItem&&(this.currentSuggestionDetails&&(this.currentSuggestionDetails.cancel(),this.currentSuggestionDetails=null),this.focusedItem=n,this.list.reveal(i),this.currentSuggestionDetails=Object(H.f)(function(e){return n.resolve(e)}),this.currentSuggestionDetails.then(function(){t.list.length<i||(t.ignoreFocusEvents=!0,t.list.splice(i,1,[n]),t.list.setFocus([i]),t.ignoreFocusEvents=!1,t.expandDocsSettingFromStorage()?t.showDetails():Object(st.G)(t.element,"docs-side"),t._ariaAlert(t._getSuggestionAriaAlertLabel(n)))}).catch($e.e).then(function(){t.focusedItem===n&&(t.currentSuggestionDetails=null)})),this.onDidFocusEmitter.fire({item:n,index:i,model:this.completionModel})}}},e.prototype.setState=function(t){if(this.element){var n=this.state!==t;switch(this.state=t,Object(st.P)(this.element,"frozen",4===t),t){case 0:Object(st.B)(this.messageElement,this.details.element,this.listElement),this.hide(),this.listHeight=0,n&&this.list.splice(0,this.list.length),this.focusedItem=null;break;case 1:this.messageElement.textContent=e.LOADING_MESSAGE,Object(st.B)(this.listElement,this.details.element),Object(st.O)(this.messageElement),Object(st.G)(this.element,"docs-side"),this.show(),this.focusedItem=null;break;case 2:this.messageElement.textContent=e.NO_SUGGESTIONS_MESSAGE,Object(st.B)(this.listElement,this.details.element),Object(st.O)(this.messageElement),Object(st.G)(this.element,"docs-side"),this.show(),this.focusedItem=null;break;case 3:case 4:Object(st.B)(this.messageElement),Object(st.O)(this.listElement),this.show();break;case 5:Object(st.B)(this.messageElement),Object(st.O)(this.details.element,this.listElement),this.show(),this._ariaAlert(this.details.getAriaLabel())}}},e.prototype.showTriggered=function(e,t){var n=this;0===this.state&&(this.isAuto=!!e,this.isAuto||(this.loadingTimeout=setTimeout(function(){n.loadingTimeout=null,n.setState(1)},t)))},e.prototype.showSuggestions=function(e,t,n,i){if(this.preferDocPositionTop=!1,this.docsPositionPreviousWidgetY=null,this.loadingTimeout&&(clearTimeout(this.loadingTimeout),this.loadingTimeout=null),this.currentSuggestionDetails&&(this.currentSuggestionDetails.cancel(),this.currentSuggestionDetails=null),this.completionModel!==e&&(this.completionModel=e),n&&2!==this.state&&0!==this.state)this.setState(4);else{var o=this.completionModel.items.length,r=0===o;if(this.suggestWidgetMultipleSuggestions.set(o>1),r)i?this.setState(0):this.setState(2),this.completionModel=null;else{if(3!==this.state){var s=this.completionModel.stats;s.wasAutomaticallyTriggered=!!i,this.telemetryService.publicLog("suggestWidget",Rh({},s,this.editor.getTelemetryData()))}this.focusedItem=null,this.list.splice(0,this.list.length,this.completionModel.items),n?this.setState(4):this.setState(3),this.list.reveal(t,0),this.list.setFocus([t]),this.detailsBorderColor&&(this.details.element.style.borderColor=this.detailsBorderColor)}}},e.prototype.selectNextPage=function(){switch(this.state){case 0:return!1;case 5:return this.details.pageDown(),!0;case 1:return!this.isAuto;default:return this.list.focusNextPage(),!0}},e.prototype.selectNext=function(){switch(this.state){case 0:return!1;case 1:return!this.isAuto;default:return this.list.focusNext(1,!0),!0}},e.prototype.selectLast=function(){switch(this.state){case 0:return!1;case 5:return this.details.scrollBottom(),!0;case 1:return!this.isAuto;default:return this.list.focusLast(),!0}},e.prototype.selectPreviousPage=function(){switch(this.state){case 0:return!1;case 5:return this.details.pageUp(),!0;case 1:return!this.isAuto;default:return this.list.focusPreviousPage(),!0}},e.prototype.selectPrevious=function(){switch(this.state){case 0:return!1;case 1:return!this.isAuto;default:return this.list.focusPrevious(1,!0),!1}},e.prototype.selectFirst=function(){switch(this.state){case 0:return!1;case 5:return this.details.scrollTop(),!0;case 1:return!this.isAuto;default:return this.list.focusFirst(),!0}},e.prototype.getFocusedItem=function(){if(0!==this.state&&2!==this.state&&1!==this.state&&this.completionModel)return{item:this.list.getFocusedElements()[0],index:this.list.getFocus()[0],model:this.completionModel}},e.prototype.toggleDetailsFocus=function(){5===this.state?(this.setState(3),this.detailsBorderColor&&(this.details.element.style.borderColor=this.detailsBorderColor)):3===this.state&&this.expandDocsSettingFromStorage()&&(this.setState(5),this.detailsFocusBorderColor&&(this.details.element.style.borderColor=this.detailsFocusBorderColor)),this.telemetryService.publicLog("suggestWidget:toggleDetailsFocus",this.editor.getTelemetryData())},e.prototype.toggleDetails=function(){if(zh(this.list.getFocusedElements()[0]))if(this.expandDocsSettingFromStorage())this.updateExpandDocsSetting(!1),Object(st.B)(this.details.element),Object(st.G)(this.element,"docs-side"),Object(st.G)(this.element,"docs-below"),this.editor.layoutContentWidget(this),this.telemetryService.publicLog("suggestWidget:collapseDetails",this.editor.getTelemetryData());else{if(3!==this.state&&5!==this.state&&4!==this.state)return;this.updateExpandDocsSetting(!0),this.showDetails(),this._ariaAlert(this.details.getAriaLabel()),this.telemetryService.publicLog("suggestWidget:expandDetails",this.editor.getTelemetryData())}},e.prototype.showDetails=function(){this.expandSideOrBelow(),Object(st.O)(this.details.element),this.details.render(this.list.getFocusedElements()[0]),this.details.element.style.maxHeight=this.maxWidgetHeight+"px",this.listElement.style.marginTop="0px",this.editor.layoutContentWidget(this),this.adjustDocsPosition(),this.editor.focus()},e.prototype.show=function(){var e=this,t=this.updateListHeight();t!==this.listHeight&&(this.editor.layoutContentWidget(this),this.listHeight=t),this.suggestWidgetVisible.set(!0),this.showTimeout.cancelAndSet(function(){Object(st.f)(e.element,"visible"),e.onDidShowEmitter.fire(e)},100)},e.prototype.hide=function(){this.suggestWidgetVisible.reset(),this.suggestWidgetMultipleSuggestions.reset(),Object(st.G)(this.element,"visible")},e.prototype.hideWidget=function(){clearTimeout(this.loadingTimeout),this.setState(0),this.onDidHideEmitter.fire(this)},e.prototype.getPosition=function(){if(0===this.state)return null;var e=[2,1];return this.preferDocPositionTop&&(e=[1]),{position:this.editor.getPosition(),preference:e}},e.prototype.getDomNode=function(){return this.element},e.prototype.getId=function(){return e.ID},e.prototype.updateListHeight=function(){var e=0;if(2===this.state||1===this.state)e=this.unfocusedHeight;else{var t=this.list.contentHeight/this.unfocusedHeight,n=this.editor.getConfiguration().contribInfo.suggest.maxVisibleSuggestions;e=Math.min(t,n)*this.unfocusedHeight}return this.element.style.lineHeight=this.unfocusedHeight+"px",this.listElement.style.height=e+"px",this.list.layout(e),e},e.prototype.adjustDocsPosition=function(){if(this.editor.hasModel()){var e=this.editor.getConfiguration().fontInfo.lineHeight,t=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),n=Object(st.v)(this.editor.getDomNode()),i=n.left+t.left,o=n.top+t.top+t.height,r=Object(st.v)(this.element),s=r.left,a=r.top;if(this.docsPositionPreviousWidgetY&&this.docsPositionPreviousWidgetY<a&&!this.preferDocPositionTop)return this.preferDocPositionTop=!0,void this.adjustDocsPosition();this.docsPositionPreviousWidgetY=a,s<i-this.listWidth?Object(st.f)(this.element,"list-right"):Object(st.G)(this.element,"list-right"),Object(st.A)(this.element,"docs-side")&&o-e>a&&this.details.element.offsetHeight>this.listElement.offsetHeight&&(this.listElement.style.marginTop=this.details.element.offsetHeight-this.listElement.offsetHeight+"px")}},e.prototype.expandSideOrBelow=function(){if(!zh(this.focusedItem)&&this.firstFocusInCurrentList)return Object(st.G)(this.element,"docs-side"),void Object(st.G)(this.element,"docs-below");var e=this.element.style.maxWidth.match(/(\d+)px/);!e||Number(e[1])<this.maxWidgetWidth?(Object(st.f)(this.element,"docs-below"),Object(st.G)(this.element,"docs-side")):zh(this.focusedItem)&&(Object(st.f)(this.element,"docs-side"),Object(st.G)(this.element,"docs-below"))},Object.defineProperty(e.prototype,"maxWidgetHeight",{get:function(){return this.unfocusedHeight*this.editor.getConfiguration().contribInfo.suggest.maxVisibleSuggestions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unfocusedHeight",{get:function(){var e=this.editor.getConfiguration();return e.contribInfo.suggestLineHeight||e.fontInfo.lineHeight},enumerable:!0,configurable:!0}),e.prototype.getHeight=function(e){return this.unfocusedHeight},e.prototype.getTemplateId=function(e){return"suggestion"},e.prototype.expandDocsSettingFromStorage=function(){return this.storageService.getBoolean("expandSuggestionDocs",0,!1)},e.prototype.updateExpandDocsSetting=function(e){this.storageService.store("expandSuggestionDocs",e,0)},e.prototype.dispose=function(){this.state=null,this.currentSuggestionDetails=null,this.focusedItem=null,this.element=null,this.messageElement=null,this.listElement=null,this.details.dispose(),this.details=null,this.list.dispose(),this.list=null,this.toDispose=Object(z.d)(this.toDispose),this.loadingTimeout&&(clearTimeout(this.loadingTimeout),this.loadingTimeout=null),this.editorBlurTimeout.dispose(),this.showTimeout.dispose()},e.ID="editor.widget.suggestWidget",e.LOADING_MESSAGE=V.a("suggestWidget.loading","Loading..."),e.NO_SUGGESTIONS_MESSAGE=V.a("suggestWidget.noSuggestions","No suggestions."),e=Th([Ah(1,Lh.a),Ah(2,Pe.e),Ah(3,X.c),Ah(4,so.a),Ah(5,He.a),Ah(6,qa.a),Ah(7,zc.a),Ah(8,oo.a)],e)}();Object(X.e)(function(e,t){var n=e.getColor(Vh);n&&t.addRule(".monaco-editor .suggest-widget .monaco-list .monaco-list-row .monaco-highlighted-label .highlight { color: "+n+"; }");var i=e.getColor(Bh);i&&t.addRule(".monaco-editor .suggest-widget { color: "+i+"; }");var o=e.getColor(J.Jb);o&&t.addRule(".monaco-editor .suggest-widget a { color: "+o+"; }");var r=e.getColor(J.Ib);r&&t.addRule(".monaco-editor .suggest-widget code { background-color: "+r+"; }")});var Gh=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},Zh=function(e,t){return function(n,i){t(n,i,e)}},$h=function(){function e(t,n){var i=this;this._editor=t,this._ckAtEnd=e.AtEnd.bindTo(n),this._confListener=this._editor.onDidChangeConfiguration(function(e){return e.contribInfo&&i._update()}),this._update()}return e.prototype.dispose=function(){Object(z.d)(this._confListener,this._selectionListener),this._ckAtEnd.reset()},e.prototype._update=function(){var e=this,t="on"===this._editor.getConfiguration().contribInfo.tabCompletion;if(this._enabled!==t)if(this._enabled=t,this._enabled){var n=function(){if(e._editor.hasModel()){var t=e._editor.getModel(),n=e._editor.getSelection(),i=t.getWordAtPosition(n.getStartPosition());i?e._ckAtEnd.set(i.endColumn===n.getStartPosition().column):e._ckAtEnd.set(!1)}else e._ckAtEnd.set(!1)};this._selectionListener=this._editor.onDidChangeCursorSelection(n),n()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)},e.AtEnd=new Pe.f("atEndOfWord",!1),e=Gh([Zh(1,Pe.e)],e)}(),Yh=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Jh=function(){return(Jh=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Xh=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},Qh=function(e,t){return function(n,i){t(n,i,e)}},ep=function(){function e(e,t,n){var i=this;this._disposables=[],this._disposables.push(t.onDidShow(function(){return i._onItem(t.getFocusedItem())})),this._disposables.push(t.onDidFocus(this._onItem,this)),this._disposables.push(t.onDidHide(this.reset,this)),this._disposables.push(e.onWillType(function(t){if(i._active){var o=t.charCodeAt(t.length-1);i._active.acceptCharacters.has(o)&&e.getConfiguration().contribInfo.acceptSuggestionOnCommitCharacter&&n(i._active.item)}}))}return e.prototype._onItem=function(e){if(e&&Object(Ge.n)(e.item.completion.commitCharacters)){for(var t=new mr.b,n=0,i=e.item.completion.commitCharacters;n<i.length;n++){var o=i[n];o.length>0&&t.add(o.charCodeAt(0))}this._active={acceptCharacters:t,item:e}}else this.reset()},e.prototype.reset=function(){this._active=void 0},e.prototype.dispose=function(){Object(z.d)(this._disposables)},e}(),tp=function(){function e(e,t,n,i,o,r){var s=this;this._editor=e,this._memoryService=n,this._commandService=i,this._contextKeyService=o,this._instantiationService=r,this._toDispose=[],this._sticky=!1,this._model=new Ih(this._editor,t),this._widget=new H.b(function(){var e=s._instantiationService.createInstance(qh,s._editor);s._toDispose.push(e),s._toDispose.push(e.onDidSelect(function(e){return s._onDidSelectItem(e,!1,!0)},s));var t=new ep(s._editor,e,function(e){return s._onDidSelectItem(e,!1,!0)});s._toDispose.push(t,s._model.onDidSuggest(function(e){0===e.completionModel.items.length&&t.reset()}));var n=Td.MakesTextEdit.bindTo(s._contextKeyService);return s._toDispose.push(e.onDidFocus(function(e){var t=e.item,i=s._editor.getPosition(),o=t.completion.range.startColumn,r=i.column,a=!0;"smart"!==s._editor.getConfiguration().contribInfo.acceptSuggestionOnEnter||2!==s._model.state||t.completion.command||t.completion.additionalTextEdits||4&t.completion.insertTextRules||r-o!==t.completion.insertText.length||(a=s._editor.getModel().getValueInRange({startLineNumber:i.lineNumber,startColumn:o,endLineNumber:i.lineNumber,endColumn:r})!==t.completion.insertText);n.set(a)})),s._toDispose.push({dispose:function(){n.reset()}}),e}),this._alternatives=new H.b(function(){var e=new Ch(s._editor,s._contextKeyService);return s._toDispose.push(e),e}),this._toDispose.push(r.createInstance($h,e)),this._toDispose.push(this._model.onDidTrigger(function(e){s._widget.getValue().showTriggered(e.auto,e.shy?250:50)})),this._toDispose.push(this._model.onDidSuggest(function(e){if(!e.shy){var t=s._memoryService.select(s._editor.getModel(),s._editor.getPosition(),e.completionModel.items);s._widget.getValue().showSuggestions(e.completionModel,t,e.isFrozen,e.auto)}})),this._toDispose.push(this._model.onDidCancel(function(e){s._widget&&!e.retrigger&&s._widget.getValue().hideWidget()})),this._toDispose.push(this._editor.onDidBlurEditorWidget(function(){s._sticky||s._model.cancel()}));var a=Td.AcceptSuggestionsOnEnter.bindTo(o),c=function(){var e=s._editor.getConfiguration().contribInfo.acceptSuggestionOnEnter;a.set("on"===e||"smart"===e)};this._toDispose.push(this._editor.onDidChangeConfiguration(function(e){return c()})),c()}return e.get=function(t){return t.getContribution(e.ID)},e.prototype.getId=function(){return e.ID},e.prototype.dispose=function(){this._toDispose=Object(z.d)(this._toDispose),this._widget.dispose(),this._model&&this._model.dispose()},e.prototype._onDidSelectItem=function(e,t,n){var i,o=this;if(!e||!e.item)return this._alternatives.getValue().reset(),void this._model.cancel();if(this._editor.hasModel()){var r=this._editor.getModel(),s=r.getAlternativeVersionId(),a=e.item,c=a.completion,l=a.position,u=this._editor.getPosition().column-l.column;n&&this._editor.pushUndoStop(),Array.isArray(c.additionalTextEdits)&&this._editor.executeEdits("suggestController.additionalTextEdits",c.additionalTextEdits.map(function(e){return Jt.a.replace(se.a.lift(e.range),e.text)})),this._memoryService.memorize(r,this._editor.getPosition(),e.item);var d=c.insertText;4&c.insertTextRules||(d=oh.escape(d));var h=l.column-c.range.startColumn,p=c.range.endColumn-l.column;mh.get(this._editor).insert(d,h+u,p,!1,!1,!(1&c.insertTextRules)),n&&this._editor.pushUndoStop(),c.command?c.command.id===np.id?this._model.trigger({auto:!0,shy:!1},!0):((i=this._commandService).executeCommand.apply(i,[c.command.id].concat(c.command.arguments?c.command.arguments.slice():[])).catch($e.e),this._model.cancel()):this._model.cancel(),t&&this._alternatives.getValue().set(e,function(e){for(;r.canUndo();){s!==r.getAlternativeVersionId()&&r.undo(),o._onDidSelectItem(e,!1,!1);break}}),this._alertCompletionItem(e.item)}},e.prototype._alertCompletionItem=function(e){var t=e.completion;if(Object(Ge.n)(t.additionalTextEdits)){var n=V.a("arai.alert.snippet","Accepting '{0}' made {1} additional edits",t.label,t.additionalTextEdits.length);Object(Ee.a)(n)}},e.prototype.triggerSuggest=function(e){this._editor.hasModel()&&(this._model.trigger({auto:!1,shy:!1},!1,e),this._editor.revealLine(this._editor.getPosition().lineNumber,0),this._editor.focus())},e.prototype.triggerSuggestAndAcceptBest=function(e){var t=this;if(this._editor.hasModel()){var n=this._editor.getPosition(),i=function(){n.equals(t._editor.getPosition())&&t._commandService.executeCommand(e.fallback)};Ke.b.once(this._model.onDidTrigger)(function(e){var n=[];Ke.b.any(t._model.onDidTrigger,t._model.onDidCancel)(function(){Object(z.d)(n),i()},void 0,n),t._model.onDidSuggest(function(e){var o=e.completionModel;if(Object(z.d)(n),0!==o.items.length){var r=t._memoryService.select(t._editor.getModel(),t._editor.getPosition(),o.items),s=o.items[r];!function(e){if(4&e.completion.insertTextRules||e.completion.additionalTextEdits)return!0;var n=t._editor.getPosition(),i=e.completion.range.startColumn,o=n.column;return o-i!==e.completion.insertText.length||t._editor.getModel().getValueInRange({startLineNumber:n.lineNumber,startColumn:i,endLineNumber:n.lineNumber,endColumn:o})!==e.completion.insertText}(s)?i():(t._editor.pushUndoStop(),t._onDidSelectItem({index:r,item:s,model:o},!0,!1))}else i()},void 0,n)}),this._model.trigger({auto:!1,shy:!0}),this._editor.revealLine(n.lineNumber,0),this._editor.focus()}},e.prototype.acceptSelectedSuggestion=function(e){if(this._widget){var t=this._widget.getValue().getFocusedItem();this._onDidSelectItem(t,!!e,!0)}},e.prototype.acceptNextSuggestion=function(){this._alternatives.getValue().next()},e.prototype.acceptPrevSuggestion=function(){this._alternatives.getValue().prev()},e.prototype.cancelSuggestWidget=function(){this._widget&&(this._model.cancel(),this._widget.getValue().hideWidget())},e.prototype.selectNextSuggestion=function(){this._widget&&this._widget.getValue().selectNext()},e.prototype.selectNextPageSuggestion=function(){this._widget&&this._widget.getValue().selectNextPage()},e.prototype.selectLastSuggestion=function(){this._widget&&this._widget.getValue().selectLast()},e.prototype.selectPrevSuggestion=function(){this._widget&&this._widget.getValue().selectPrevious()},e.prototype.selectPrevPageSuggestion=function(){this._widget&&this._widget.getValue().selectPreviousPage()},e.prototype.selectFirstSuggestion=function(){this._widget&&this._widget.getValue().selectFirst()},e.prototype.toggleSuggestionDetails=function(){this._widget&&this._widget.getValue().toggleDetails()},e.prototype.toggleSuggestionFocus=function(){this._widget&&this._widget.getValue().toggleDetailsFocus()},e.ID="editor.contrib.suggestController",e=Xh([Qh(1,_r.a),Qh(2,bh.a),Qh(3,We.b),Qh(4,Pe.e),Qh(5,oo.a)],e)}(),np=function(e){function t(){return e.call(this,{id:t.id,label:V.a("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:Pe.d.and(G.a.writable,G.a.hasCompletionItemProvider),kbOpts:{kbExpr:G.a.textInputFocus,primary:2058,mac:{primary:266},weight:100}})||this}return Yh(t,e),t.prototype.run=function(e,t){var n=tp.get(t);n&&n.triggerSuggest()},t.id="editor.action.triggerSuggest",t}(U.b);Object(U.h)(tp),Object(U.f)(np);var ip=U.c.bindToContribution(tp.get);Object(U.g)(new ip({id:"acceptSelectedSuggestion",precondition:Td.Visible,handler:function(e){return e.acceptSelectedSuggestion(!0)},kbOpts:{weight:190,kbExpr:G.a.textInputFocus,primary:2}})),Object(U.g)(new ip({id:"acceptSelectedSuggestionOnEnter",precondition:Td.Visible,handler:function(e){return e.acceptSelectedSuggestion(!1)},kbOpts:{weight:190,kbExpr:Pe.d.and(G.a.textInputFocus,Td.AcceptSuggestionsOnEnter,Td.MakesTextEdit),primary:3}})),Object(U.g)(new ip({id:"hideSuggestWidget",precondition:Td.Visible,handler:function(e){return e.cancelSuggestWidget()},kbOpts:{weight:190,kbExpr:G.a.textInputFocus,primary:9,secondary:[1033]}})),Object(U.g)(new ip({id:"selectNextSuggestion",precondition:Pe.d.and(Td.Visible,Td.MultipleSuggestions),handler:function(e){return e.selectNextSuggestion()},kbOpts:{weight:190,kbExpr:G.a.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}})),Object(U.g)(new ip({id:"selectNextPageSuggestion",precondition:Pe.d.and(Td.Visible,Td.MultipleSuggestions),handler:function(e){return e.selectNextPageSuggestion()},kbOpts:{weight:190,kbExpr:G.a.textInputFocus,primary:12,secondary:[2060]}})),Object(U.g)(new ip({id:"selectLastSuggestion",precondition:Pe.d.and(Td.Visible,Td.MultipleSuggestions),handler:function(e){return e.selectLastSuggestion()}})),Object(U.g)(new ip({id:"selectPrevSuggestion",precondition:Pe.d.and(Td.Visible,Td.MultipleSuggestions),handler:function(e){return e.selectPrevSuggestion()},kbOpts:{weight:190,kbExpr:G.a.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}})),Object(U.g)(new ip({id:"selectPrevPageSuggestion",precondition:Pe.d.and(Td.Visible,Td.MultipleSuggestions),handler:function(e){return e.selectPrevPageSuggestion()},kbOpts:{weight:190,kbExpr:G.a.textInputFocus,primary:11,secondary:[2059]}})),Object(U.g)(new ip({id:"selectFirstSuggestion",precondition:Pe.d.and(Td.Visible,Td.MultipleSuggestions),handler:function(e){return e.selectFirstSuggestion()}})),Object(U.g)(new ip({id:"toggleSuggestionDetails",precondition:Td.Visible,handler:function(e){return e.toggleSuggestionDetails()},kbOpts:{weight:190,kbExpr:G.a.textInputFocus,primary:2058,mac:{primary:266}}})),Object(U.g)(new ip({id:"toggleSuggestionFocus",precondition:Td.Visible,handler:function(e){return e.toggleSuggestionFocus()},kbOpts:{weight:190,kbExpr:G.a.textInputFocus,primary:2570,mac:{primary:778}}})),Object(U.g)(new ip({id:"insertBestCompletion",precondition:Pe.d.and(Pe.d.equals("config.editor.tabCompletion","on"),$h.AtEnd,Td.Visible.toNegated(),Ch.OtherSuggestions.toNegated(),mh.InSnippetMode.toNegated()),handler:function(e,t){e.triggerSuggestAndAcceptBest(Object(Oo.g)(t)?Jh({fallback:"tab"},t):{fallback:"tab"})},kbOpts:{weight:190,primary:2}})),Object(U.g)(new ip({id:"insertNextSuggestion",precondition:Pe.d.and(Pe.d.equals("config.editor.tabCompletion","on"),Ch.OtherSuggestions,Td.Visible.toNegated(),mh.InSnippetMode.toNegated()),handler:function(e){return e.acceptNextSuggestion()},kbOpts:{weight:190,kbExpr:G.a.textInputFocus,primary:2}})),Object(U.g)(new ip({id:"insertPrevSuggestion",precondition:Pe.d.and(Pe.d.equals("config.editor.tabCompletion","on"),Ch.OtherSuggestions,Td.Visible.toNegated(),mh.InSnippetMode.toNegated()),handler:function(e){return e.acceptPrevSuggestion()},kbOpts:{weight:190,kbExpr:G.a.textInputFocus,primary:1026}}));var op=n(181),rp=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),sp=function(e){function t(){return e.call(this,{id:"editor.action.forceRetokenize",label:V.a("forceRetokenize","Developer: Force Retokenize"),alias:"Developer: Force Retokenize",precondition:null})||this}return rp(t,e),t.prototype.run=function(e,t){if(t.hasModel()){var n=t.getModel();n.flushTokens();var i=new op.a(!0);n.forceTokenization(n.getLineCount()),i.stop(),console.log("tokenization took "+i.elapsed())}},t}(U.b);Object(U.f)(sp);var ap=n(185),cp=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),lp=function(e){function t(){return e.call(this,{id:t.ID,label:V.a({key:"toggle.tabMovesFocus",comment:["Turn on/off use of tab key for moving focus around VS Code"]},"Toggle Tab Key Moves Focus"),alias:"Toggle Tab Key Moves Focus",precondition:null,kbOpts:{kbExpr:null,primary:2091,mac:{primary:1323},weight:100}})||this}return cp(t,e),t.prototype.run=function(e,t){var n=!ap.b.getTabFocusMode();ap.b.setTabFocusMode(n),n?Object(Ee.a)(V.a("toggle.tabMovesFocus.on","Pressing Tab will now move focus to the next focusable element")):Object(Ee.a)(V.a("toggle.tabMovesFocus.off","Pressing Tab will now insert the tab character"))},t.ID="editor.action.toggleTabFocusMode",t}(U.b);Object(U.f)(lp);var up=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),dp=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},hp=function(e,t){return function(n,i){t(n,i,e)}},pp=Object(J.zb)("editor.wordHighlightBackground",{dark:"#575757B8",light:"#57575740",hc:null},V.a("wordHighlight","Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations."),!0),gp=Object(J.zb)("editor.wordHighlightStrongBackground",{dark:"#004972B8",light:"#0e639c40",hc:null},V.a("wordHighlightStrong","Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations."),!0),fp=Object(J.zb)("editor.wordHighlightBorder",{light:null,dark:null,hc:J.b},V.a("wordHighlightBorder","Border color of a symbol during read-access, like reading a variable.")),mp=Object(J.zb)("editor.wordHighlightStrongBorder",{light:null,dark:null,hc:J.b},V.a("wordHighlightStrongBorder","Border color of a symbol during write-access, like writing to a variable.")),_p=Object(J.zb)("editorOverviewRuler.wordHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hc:"#A0A0A0CC"},V.a("overviewRulerWordHighlightForeground","Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),vp=Object(J.zb)("editorOverviewRuler.wordHighlightStrongForeground",{dark:"#C0A0C0CC",light:"#C0A0C0CC",hc:"#C0A0C0CC"},V.a("overviewRulerWordHighlightStrongForeground","Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),bp=new Pe.f("hasWordHighlights",!1);function yp(e,t,n){var i=qe.i.ordered(e);return Object(H.h)(i.map(function(i){return function(){return Promise.resolve(i.provideDocumentHighlights(e,t,n)).then(void 0,$e.f)}}),Ge.n)}var wp=function(){function e(e,t,n){var i=this;this._wordRange=this._getCurrentWordRange(e,t),this.result=Object(H.f)(function(o){return i._compute(e,t,n,o)})}return e.prototype._getCurrentWordRange=function(e,t){var n=e.getWordAtPosition(t.getPosition());return n?new se.a(t.startLineNumber,n.startColumn,t.startLineNumber,n.endColumn):null},e.prototype.isValid=function(e,t,n){for(var i=t.startLineNumber,o=t.startColumn,r=t.endColumn,s=this._getCurrentWordRange(e,t),a=Boolean(this._wordRange&&this._wordRange.equalsRange(s)),c=0,l=n.length;!a&&c<l;c++){var u=e.getDecorationRange(n[c]);u&&u.startLineNumber===i&&u.startColumn<=o&&u.endColumn>=r&&(a=!0)}return a},e.prototype.cancel=function(){this.result.cancel()},e}(),Cp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return up(t,e),t.prototype._compute=function(e,t,n,i){return yp(e,t.getPosition(),i).then(function(e){return e||[]})},t}(wp),Sp=function(e){function t(t,n,i){var o=e.call(this,t,n,i)||this;return o._selectionIsEmpty=n.isEmpty(),o}return up(t,e),t.prototype._compute=function(e,t,n,i){return Object(H.j)(250,i).then(function(){if(!t.isEmpty())return[];var i=e.getWordAtPosition(t.getPosition());return i?e.findMatches(i.word,!0,!1,!0,n,!1).map(function(e){return{range:e.range,kind:qe.h.Text}}):[]})},t.prototype.isValid=function(t,n,i){var o=n.isEmpty();return this._selectionIsEmpty===o&&e.prototype.isValid.call(this,t,n,i)},t}(wp);Object(U.e)("_executeDocumentHighlights",function(e,t){return yp(e,t,Ze.a.None)});var xp=function(){function e(e,t){var n=this;this.workerRequestTokenId=0,this.workerRequestCompleted=!1,this.workerRequestValue=[],this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,this.editor=e,this._hasWordHighlights=bp.bindTo(t),this._ignorePositionChangeEvent=!1,this.occurrencesHighlight=this.editor.getConfiguration().contribInfo.occurrencesHighlight,this.model=this.editor.getModel(),this.toUnhook=[],this.toUnhook.push(e.onDidChangeCursorPosition(function(e){n._ignorePositionChangeEvent||n.occurrencesHighlight&&n._onPositionChanged(e)})),this.toUnhook.push(e.onDidChangeModelContent(function(e){n._stopAll()})),this.toUnhook.push(e.onDidChangeConfiguration(function(e){var t=n.editor.getConfiguration().contribInfo.occurrencesHighlight;n.occurrencesHighlight!==t&&(n.occurrencesHighlight=t,n._stopAll())})),this._decorationIds=[],this.workerRequestTokenId=0,this.workerRequest=null,this.workerRequestCompleted=!1,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1}return e.prototype.hasDecorations=function(){return this._decorationIds.length>0},e.prototype.restore=function(){this.occurrencesHighlight&&this._run()},e.prototype._getSortedHighlights=function(){var e=this;return Ge.d(this._decorationIds.map(function(t){return e.model.getDecorationRange(t)}).sort(se.a.compareRangesUsingStarts))},e.prototype.moveNext=function(){var e=this,t=this._getSortedHighlights(),n=t[(Ge.j(t,function(t){return t.containsPosition(e.editor.getPosition())})+1)%t.length];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(n.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(n)}finally{this._ignorePositionChangeEvent=!1}},e.prototype.moveBack=function(){var e=this,t=this._getSortedHighlights(),n=t[(Ge.j(t,function(t){return t.containsPosition(e.editor.getPosition())})-1+t.length)%t.length];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(n.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(n)}finally{this._ignorePositionChangeEvent=!1}},e.prototype._removeDecorations=function(){this._decorationIds.length>0&&(this._decorationIds=this.editor.deltaDecorations(this._decorationIds,[]),this._hasWordHighlights.set(!1))},e.prototype._stopAll=function(){this._removeDecorations(),-1!==this.renderDecorationsTimer&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),null!==this.workerRequest&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)},e.prototype._onPositionChanged=function(e){this.occurrencesHighlight&&3===e.reason?this._run():this._stopAll()},e.prototype._run=function(){var e=this,t=this.editor.getSelection();if(t.startLineNumber===t.endLineNumber){var n=t.startLineNumber,i=t.startColumn,o=t.endColumn,r=this.model.getWordAtPosition({lineNumber:n,column:i});if(!r||r.startColumn>i||r.endColumn<o)this._stopAll();else{var s,a,c,l=this.workerRequest&&this.workerRequest.isValid(this.model,t,this._decorationIds);if(this.lastCursorPositionChangeTime=(new Date).getTime(),l)this.workerRequestCompleted&&-1!==this.renderDecorationsTimer&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1,this._beginRenderDecorations());else{this._stopAll();var u=++this.workerRequestTokenId;this.workerRequestCompleted=!1,this.workerRequest=(s=this.model,a=this.editor.getSelection(),c=this.editor.getConfiguration().wordSeparators,qe.i.has(s)?new Cp(s,a,c):new Sp(s,a,c)),this.workerRequest.result.then(function(t){u===e.workerRequestTokenId&&(e.workerRequestCompleted=!0,e.workerRequestValue=t||[],e._beginRenderDecorations())},$e.e)}}}else this._stopAll()},e.prototype._beginRenderDecorations=function(){var e=this,t=(new Date).getTime(),n=this.lastCursorPositionChangeTime+250;t>=n?(this.renderDecorationsTimer=-1,this.renderDecorations()):this.renderDecorationsTimer=setTimeout(function(){e.renderDecorations()},n-t)},e.prototype.renderDecorations=function(){this.renderDecorationsTimer=-1;for(var t=[],n=0,i=this.workerRequestValue.length;n<i;n++){var o=this.workerRequestValue[n];t.push({range:o.range,options:e._getDecorationOptions(o.kind)})}this._decorationIds=this.editor.deltaDecorations(this._decorationIds,t),this._hasWordHighlights.set(this.hasDecorations())},e._getDecorationOptions=function(e){return e===qe.h.Write?this._WRITE_OPTIONS:e===qe.h.Text?this._TEXT_OPTIONS:this._REGULAR_OPTIONS},e.prototype.dispose=function(){this._stopAll(),this.toUnhook=Object(z.d)(this.toUnhook)},e._WRITE_OPTIONS=$.a.register({stickiness:1,className:"wordHighlightStrong",overviewRuler:{color:Object(X.f)(vp),position:Z.c.Center}}),e._TEXT_OPTIONS=$.a.register({stickiness:1,className:"selectionHighlight",overviewRuler:{color:Object(X.f)(J.vb),position:Z.c.Center}}),e._REGULAR_OPTIONS=$.a.register({stickiness:1,className:"wordHighlight",overviewRuler:{color:Object(X.f)(_p),position:Z.c.Center}}),e}(),Op=function(e){function t(t,n){var i=e.call(this)||this,o=function(){t.hasModel()&&(i.wordHighligher=new xp(t,n))};return i._register(t.onDidChangeModel(function(e){i.wordHighligher&&(i.wordHighligher.dispose(),i.wordHighligher=null),o()})),o(),i}return up(t,e),t.get=function(e){return e.getContribution(t.ID)},t.prototype.getId=function(){return t.ID},t.prototype.saveViewState=function(){return!(!this.wordHighligher||!this.wordHighligher.hasDecorations())},t.prototype.moveNext=function(){this.wordHighligher&&this.wordHighligher.moveNext()},t.prototype.moveBack=function(){this.wordHighligher&&this.wordHighligher.moveBack()},t.prototype.restoreViewState=function(e){this.wordHighligher&&e&&this.wordHighligher.restore()},t.prototype.dispose=function(){this.wordHighligher&&(this.wordHighligher.dispose(),this.wordHighligher=null),e.prototype.dispose.call(this)},t.ID="editor.contrib.wordHighlighter",t=dp([hp(1,Pe.e)],t)}(z.a),kp=function(e){function t(t,n){var i=e.call(this,n)||this;return i._isNext=t,i}return up(t,e),t.prototype.run=function(e,t){var n=Op.get(t);n&&(this._isNext?n.moveNext():n.moveBack())},t}(U.b),Dp=function(e){function t(){return e.call(this,!0,{id:"editor.action.wordHighlight.next",label:V.a("wordHighlight.next.label","Go to Next Symbol Highlight"),alias:"Go to Next Symbol Highlight",precondition:bp,kbOpts:{kbExpr:G.a.editorTextFocus,primary:65,weight:100}})||this}return up(t,e),t}(kp),Ip=function(e){function t(){return e.call(this,!1,{id:"editor.action.wordHighlight.prev",label:V.a("wordHighlight.previous.label","Go to Previous Symbol Highlight"),alias:"Go to Previous Symbol Highlight",precondition:bp,kbOpts:{kbExpr:G.a.editorTextFocus,primary:1089,weight:100}})||this}return up(t,e),t}(kp),Np=function(e){function t(){return e.call(this,{id:"editor.action.wordHighlight.trigger",label:V.a("wordHighlight.trigger.label","Trigger Symbol Highlight"),alias:"Trigger Symbol Highlight",precondition:bp.toNegated(),kbOpts:{kbExpr:G.a.editorTextFocus,primary:0,weight:100}})||this}return up(t,e),t.prototype.run=function(e,t,n){var i=Op.get(t);i&&i.restoreViewState(!0)},t}(U.b);Object(U.h)(Op),Object(U.f)(Dp),Object(U.f)(Ip),Object(U.f)(Np),Object(X.e)(function(e,t){var n=e.getColor(J.D);n&&(t.addRule(".monaco-editor .focused .selectionHighlight { background-color: "+n+"; }"),t.addRule(".monaco-editor .selectionHighlight { background-color: "+n.transparent(.5)+"; }"));var i=e.getColor(pp);i&&t.addRule(".monaco-editor .wordHighlight { background-color: "+i+"; }");var o=e.getColor(gp);o&&t.addRule(".monaco-editor .wordHighlightStrong { background-color: "+o+"; }");var r=e.getColor(J.E);r&&t.addRule(".monaco-editor .selectionHighlight { border: 1px "+("hc"===e.type?"dotted":"solid")+" "+r+"; box-sizing: border-box; }");var s=e.getColor(fp);s&&t.addRule(".monaco-editor .wordHighlight { border: 1px "+("hc"===e.type?"dashed":"solid")+" "+s+"; box-sizing: border-box; }");var a=e.getColor(mp);a&&t.addRule(".monaco-editor .wordHighlightStrong { border: 1px "+("hc"===e.type?"dashed":"solid")+" "+a+"; box-sizing: border-box; }")});var Lp=n(110),Mp=n(189),Ep=n(155),Pp=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Rp=function(e){function t(t){var n=e.call(this,t)||this;return n._inSelectionMode=t.inSelectionMode,n._wordNavigationType=t.wordNavigationType,n}return Pp(t,e),t.prototype.runEditorCommand=function(e,t,n){var i=this;if(t.hasModel()){var o=t.getConfiguration(),r=Object(Ep.a)(o.wordSeparators),s=t.getModel(),a=t.getSelections().map(function(e){var t=new K.a(e.positionLineNumber,e.positionColumn),n=i._move(r,s,t,i._wordNavigationType);return i._moveTo(e,n,i._inSelectionMode)});if(t._getCursors().setStates("moveWordCommand",0,a.map(function(e){return Lp.d.fromModelSelection(e)})),1===a.length){var c=new K.a(a[0].positionLineNumber,a[0].positionColumn);t.revealPosition(c,0)}}},t.prototype._moveTo=function(e,t,n){return n?new q.a(e.selectionStartLineNumber,e.selectionStartColumn,t.lineNumber,t.column):new q.a(t.lineNumber,t.column,t.lineNumber,t.column)},t}(U.c),Tp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Pp(t,e),t.prototype._move=function(e,t,n,i){return Mp.a.moveWordLeft(e,t,n,i)},t}(Rp),Ap=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Pp(t,e),t.prototype._move=function(e,t,n,i){return Mp.a.moveWordRight(e,t,n,i)},t}(Rp),jp=function(e){function t(){return e.call(this,{inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartLeft",precondition:null,kbOpts:{kbExpr:G.a.textInputFocus,primary:2063,mac:{primary:527},weight:100}})||this}return Pp(t,e),t}(Tp),Fp=function(e){function t(){return e.call(this,{inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndLeft",precondition:null})||this}return Pp(t,e),t}(Tp),Bp=function(e){function t(){return e.call(this,{inSelectionMode:!1,wordNavigationType:1,id:"cursorWordLeft",precondition:null})||this}return Pp(t,e),t}(Tp),Wp=function(e){function t(){return e.call(this,{inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartLeftSelect",precondition:null,kbOpts:{kbExpr:G.a.textInputFocus,primary:3087,mac:{primary:1551},weight:100}})||this}return Pp(t,e),t}(Tp),Vp=function(e){function t(){return e.call(this,{inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndLeftSelect",precondition:null})||this}return Pp(t,e),t}(Tp),Hp=function(e){function t(){return e.call(this,{inSelectionMode:!0,wordNavigationType:0,id:"cursorWordLeftSelect",precondition:null})||this}return Pp(t,e),t}(Tp),zp=function(e){function t(){return e.call(this,{inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartRight",precondition:null})||this}return Pp(t,e),t}(Ap),Up=function(e){function t(){return e.call(this,{inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndRight",precondition:null,kbOpts:{kbExpr:G.a.textInputFocus,primary:2065,mac:{primary:529},weight:100}})||this}return Pp(t,e),t}(Ap),Kp=function(e){function t(){return e.call(this,{inSelectionMode:!1,wordNavigationType:2,id:"cursorWordRight",precondition:null})||this}return Pp(t,e),t}(Ap),qp=function(e){function t(){return e.call(this,{inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartRightSelect",precondition:null})||this}return Pp(t,e),t}(Ap),Gp=function(e){function t(){return e.call(this,{inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndRightSelect",precondition:null,kbOpts:{kbExpr:G.a.textInputFocus,primary:3089,mac:{primary:1553},weight:100}})||this}return Pp(t,e),t}(Ap),Zp=function(e){function t(){return e.call(this,{inSelectionMode:!0,wordNavigationType:2,id:"cursorWordRightSelect",precondition:null})||this}return Pp(t,e),t}(Ap),$p=function(e){function t(t){var n=e.call(this,t)||this;return n._whitespaceHeuristics=t.whitespaceHeuristics,n._wordNavigationType=t.wordNavigationType,n}return Pp(t,e),t.prototype.runEditorCommand=function(e,t,n){var i=this;if(t.hasModel()){var o=t.getConfiguration(),r=Object(Ep.a)(o.wordSeparators),s=t.getModel(),a=t.getSelections().map(function(e){var t=i._delete(r,s,e,i._whitespaceHeuristics,i._wordNavigationType);return new pe.a(t,"")});t.pushUndoStop(),t.executeCommands(this.id,a),t.pushUndoStop()}},t}(U.c),Yp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Pp(t,e),t.prototype._delete=function(e,t,n,i,o){var r=Mp.a.deleteWordLeft(e,t,n,i,o);return r||new se.a(1,1,1,1)},t}($p),Jp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Pp(t,e),t.prototype._delete=function(e,t,n,i,o){var r=Mp.a.deleteWordRight(e,t,n,i,o);if(r)return r;var s=t.getLineCount(),a=t.getLineMaxColumn(s);return new se.a(s,a,s,a)},t}($p),Xp=function(e){function t(){return e.call(this,{whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartLeft",precondition:G.a.writable})||this}return Pp(t,e),t}(Yp),Qp=function(e){function t(){return e.call(this,{whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndLeft",precondition:G.a.writable})||this}return Pp(t,e),t}(Yp),eg=function(e){function t(){return e.call(this,{whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordLeft",precondition:G.a.writable,kbOpts:{kbExpr:G.a.textInputFocus,primary:2049,mac:{primary:513},weight:100}})||this}return Pp(t,e),t}(Yp),tg=function(e){function t(){return e.call(this,{whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartRight",precondition:G.a.writable})||this}return Pp(t,e),t}(Jp),ng=function(e){function t(){return e.call(this,{whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndRight",precondition:G.a.writable})||this}return Pp(t,e),t}(Jp),ig=function(e){function t(){return e.call(this,{whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordRight",precondition:G.a.writable,kbOpts:{kbExpr:G.a.textInputFocus,primary:2068,mac:{primary:532},weight:100}})||this}return Pp(t,e),t}(Jp);Object(U.g)(new jp),Object(U.g)(new Fp),Object(U.g)(new Bp),Object(U.g)(new Wp),Object(U.g)(new Vp),Object(U.g)(new Hp),Object(U.g)(new zp),Object(U.g)(new Up),Object(U.g)(new Kp),Object(U.g)(new qp),Object(U.g)(new Gp),Object(U.g)(new Zp),Object(U.g)(new Xp),Object(U.g)(new Qp),Object(U.g)(new eg),Object(U.g)(new tg),Object(U.g)(new ng),Object(U.g)(new ig);var og=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),rg=function(e){function t(){return e.call(this,{whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordPartLeft",precondition:G.a.writable,kbOpts:{kbExpr:G.a.textInputFocus,primary:0,mac:{primary:769},weight:100}})||this}return og(t,e),t.prototype._delete=function(e,t,n,i,o){var r=Mp.b.deleteWordPartLeft(e,t,n,i);return r||new se.a(1,1,1,1)},t}($p),sg=function(e){function t(){return e.call(this,{whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordPartRight",precondition:G.a.writable,kbOpts:{kbExpr:G.a.textInputFocus,primary:0,mac:{primary:788},weight:100}})||this}return og(t,e),t.prototype._delete=function(e,t,n,i,o){var r=Mp.b.deleteWordPartRight(e,t,n,i);if(r)return r;var s=t.getLineCount(),a=t.getLineMaxColumn(s);return new se.a(s,a,s,a)},t}($p),ag=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return og(t,e),t.prototype._move=function(e,t,n,i){return Mp.b.moveWordPartLeft(e,t,n)},t}(Rp),cg=function(e){function t(){return e.call(this,{inSelectionMode:!1,wordNavigationType:0,id:"cursorWordPartLeft",precondition:null,kbOpts:{kbExpr:G.a.textInputFocus,primary:0,mac:{primary:783},weight:100}})||this}return og(t,e),t}(ag);We.a.registerCommandAlias("cursorWordPartStartLeft","cursorWordPartLeft");var lg=function(e){function t(){return e.call(this,{inSelectionMode:!0,wordNavigationType:0,id:"cursorWordPartLeftSelect",precondition:null,kbOpts:{kbExpr:G.a.textInputFocus,primary:0,mac:{primary:1807},weight:100}})||this}return og(t,e),t}(ag);We.a.registerCommandAlias("cursorWordPartStartLeftSelect","cursorWordPartLeftSelect");var ug=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return og(t,e),t.prototype._move=function(e,t,n,i){return Mp.b.moveWordPartRight(e,t,n)},t}(Rp),dg=function(e){function t(){return e.call(this,{inSelectionMode:!1,wordNavigationType:2,id:"cursorWordPartRight",precondition:null,kbOpts:{kbExpr:G.a.textInputFocus,primary:0,mac:{primary:785},weight:100}})||this}return og(t,e),t}(ug),hg=function(e){function t(){return e.call(this,{inSelectionMode:!0,wordNavigationType:2,id:"cursorWordPartRightSelect",precondition:null,kbOpts:{kbExpr:G.a.textInputFocus,primary:0,mac:{primary:1809},weight:100}})||this}return og(t,e),t}(ug);Object(U.g)(new rg),Object(U.g)(new sg),Object(U.g)(new cg),Object(U.g)(new lg),Object(U.g)(new dg),Object(U.g)(new hg);var pg=n(125),gg=(n(288),n(99)),fg=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),mg=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},_g=function(e,t){return function(n,i){t(n,i,e)}},vg=new Pe.f("accessibilityHelpWidgetVisible",!1),bg=function(e){function t(t,n){var i=e.call(this)||this;return i._editor=t,i._widget=i._register(n.createInstance(yg,i._editor)),i}return fg(t,e),t.get=function(e){return e.getContribution(t.ID)},t.prototype.getId=function(){return t.ID},t.prototype.show=function(){this._widget.show()},t.prototype.hide=function(){this._widget.hide()},t.ID="editor.contrib.accessibilityHelpController",t=mg([_g(1,oo.a)],t)}(z.a);var yg=function(e){function t(t,n,i,o){var r=e.call(this)||this;return r._contextKeyService=n,r._keybindingService=i,r._openerService=o,r._editor=t,r._isVisibleKey=vg.bindTo(r._contextKeyService),r._domNode=Object(gg.b)(document.createElement("div")),r._domNode.setClassName("accessibilityHelpWidget"),r._domNode.setDisplay("none"),r._domNode.setAttribute("role","dialog"),r._domNode.setAttribute("aria-hidden","true"),r._contentDomNode=Object(gg.b)(document.createElement("div")),r._contentDomNode.setAttribute("role","document"),r._domNode.appendChild(r._contentDomNode),r._isVisible=!1,r._register(r._editor.onDidLayoutChange(function(){r._isVisible&&r._layout()})),r._register(st.k(r._contentDomNode.domNode,"keydown",function(e){if(r._isVisible&&(e.equals(2083)&&(Object(Ee.a)(pg.a.emergencyConfOn),r._editor.updateOptions({accessibilitySupport:"on"}),st.n(r._contentDomNode.domNode),r._buildContent(),r._contentDomNode.domNode.focus(),e.preventDefault(),e.stopPropagation()),e.equals(2086))){Object(Ee.a)(pg.a.openingDocs);var t=r._editor.getRawConfiguration().accessibilityHelpUrl;"undefined"===typeof t&&(t="https://go.microsoft.com/fwlink/?linkid=852450"),r._openerService.open(Ye.a.parse(t)),e.preventDefault(),e.stopPropagation()}})),r.onblur(r._contentDomNode.domNode,function(){r.hide()}),r._editor.addOverlayWidget(r),r}return fg(t,e),t.prototype.dispose=function(){this._editor.removeOverlayWidget(this),e.prototype.dispose.call(this)},t.prototype.getId=function(){return t.ID},t.prototype.getDomNode=function(){return this._domNode.domNode},t.prototype.getPosition=function(){return{preference:null}},t.prototype.show=function(){this._isVisible||(this._isVisible=!0,this._isVisibleKey.set(!0),this._layout(),this._domNode.setDisplay("block"),this._domNode.setAttribute("aria-hidden","false"),this._contentDomNode.domNode.tabIndex=0,this._buildContent(),this._contentDomNode.domNode.focus())},t.prototype._descriptionForCommand=function(e,t,n){var i=this._keybindingService.lookupKeybinding(e);return i?he.p(t,i.getAriaLabel()):he.p(n,e)},t.prototype._buildContent=function(){var e=this._editor.getConfiguration(),t=this._editor.getSelections(),n=0;if(t){var i=this._editor.getModel();i&&t.forEach(function(e){n+=i.getValueLengthInRange(e)})}var o=function(e,t){return e&&0!==e.length?1===e.length?t?he.p(pg.a.singleSelectionRange,e[0].positionLineNumber,e[0].positionColumn,t):he.p(pg.a.singleSelection,e[0].positionLineNumber,e[0].positionColumn):t?he.p(pg.a.multiSelectionRange,e.length,t):e.length>0?he.p(pg.a.multiSelection,e.length):"":pg.a.noSelection}(t,n);e.wrappingInfo.inDiffEditor?e.readOnly?o+=pg.a.readonlyDiffEditor:o+=pg.a.editableDiffEditor:e.readOnly?o+=pg.a.readonlyEditor:o+=pg.a.editableEditor;var r=_e.d?pg.a.changeConfigToOnMac:pg.a.changeConfigToOnWinLinux;switch(e.accessibilitySupport){case 0:o+="\n\n - "+r;break;case 2:o+="\n\n - "+pg.a.auto_on;break;case 1:o+="\n\n - "+pg.a.auto_off,o+=" "+r}e.tabFocusMode?o+="\n\n - "+this._descriptionForCommand(lp.ID,pg.a.tabFocusModeOnMsg,pg.a.tabFocusModeOnMsgNoKb):o+="\n\n - "+this._descriptionForCommand(lp.ID,pg.a.tabFocusModeOffMsg,pg.a.tabFocusModeOffMsgNoKb),o+="\n\n - "+(_e.d?pg.a.openDocMac:pg.a.openDocWinLinux),o+="\n\n"+pg.a.outroMsg,this._contentDomNode.domNode.appendChild(pi(o)),this._contentDomNode.domNode.setAttribute("aria-label",o)},t.prototype.hide=function(){this._isVisible&&(this._isVisible=!1,this._isVisibleKey.reset(),this._domNode.setDisplay("none"),this._domNode.setAttribute("aria-hidden","true"),this._contentDomNode.domNode.tabIndex=-1,st.n(this._contentDomNode.domNode),this._editor.focus())},t.prototype._layout=function(){var e=this._editor.getLayoutInfo(),n=Math.max(5,Math.min(t.WIDTH,e.width-40)),i=Math.max(5,Math.min(t.HEIGHT,e.height-40));this._domNode.setWidth(n),this._domNode.setHeight(i);var o=Math.round((e.height-i)/2);this._domNode.setTop(o);var r=Math.round((e.width-n)/2);this._domNode.setLeft(r)},t.ID="editor.contrib.accessibilityHelpWidget",t.WIDTH=500,t.HEIGHT=300,t=mg([_g(1,Pe.e),_g(2,He.a),_g(3,zc.a)],t)}(Fn.a),wg=function(e){function t(){return e.call(this,{id:"editor.action.showAccessibilityHelp",label:pg.a.showAccessibilityHelpAction,alias:"Show Accessibility Help",precondition:null,kbOpts:{kbExpr:G.a.focus,primary:me.j?2107:571,weight:100}})||this}return fg(t,e),t.prototype.run=function(e,t){var n=bg.get(t);n&&n.show()},t}(U.b);Object(U.h)(bg),Object(U.f)(wg);var Cg=U.c.bindToContribution(bg.get);Object(U.g)(new Cg({id:"closeAccessibilityHelp",precondition:vg,handler:function(e){return e.hide()},kbOpts:{weight:200,kbExpr:G.a.focus,primary:9,secondary:[1033]}})),Object(X.e)(function(e,t){var n=e.getColor(J.F);n&&t.addRule(".monaco-editor .accessibilityHelpWidget { background-color: "+n+"; }");var i=e.getColor(J.Kb);i&&t.addRule(".monaco-editor .accessibilityHelpWidget { box-shadow: 0 2px 8px "+i+"; }");var o=e.getColor(J.e);o&&t.addRule(".monaco-editor .accessibilityHelpWidget { border: 2px solid "+o+"; }")});n(289);var Sg=function(){function e(e){var t=this;this.editor=e,this.toDispose=[],me.k&&(this.toDispose.push(e.onDidChangeConfiguration(function(){return t.update()})),this.update())}return e.prototype.update=function(){var e=!this.editor.getConfiguration().readOnly;!this.widget&&e?this.widget=new xg(this.editor):this.widget&&!e&&(this.widget.dispose(),this.widget=null)},e.prototype.getId=function(){return e.ID},e.prototype.dispose=function(){this.toDispose=Object(z.d)(this.toDispose),this.widget&&(this.widget.dispose(),this.widget=null)},e.ID="editor.contrib.iPadShowKeyboard",e}(),xg=function(){function e(e){var t=this;this.editor=e,this._domNode=document.createElement("textarea"),this._domNode.className="iPadShowKeyboard",this._toDispose=[],this._toDispose.push(st.h(this._domNode,"touchstart",function(e){t.editor.focus()})),this._toDispose.push(st.h(this._domNode,"focus",function(e){t.editor.focus()})),this.editor.addOverlayWidget(this)}return e.prototype.dispose=function(){this.editor.removeOverlayWidget(this),this._toDispose=Object(z.d)(this._toDispose)},e.prototype.getId=function(){return e.ID},e.prototype.getDomNode=function(){return this._domNode},e.prototype.getPosition=function(){return{preference:1}},e.ID="editor.contrib.ShowKeyboardWidget",e}();Object(U.h)(Sg);n(290);var Og=n(132),kg=n(156),Dg=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ig=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},Ng=function(e,t){return function(n,i){t(n,i,e)}},Lg=function(e){function t(t,n,i){var o=e.call(this)||this;return o._editor=t,o._modeService=i,o._widget=null,o._register(o._editor.onDidChangeModel(function(e){return o.stop()})),o._register(o._editor.onDidChangeModelLanguage(function(e){return o.stop()})),o._register(qe.y.onDidChange(function(e){return o.stop()})),o}return Dg(t,e),t.get=function(e){return e.getContribution(t.ID)},t.prototype.getId=function(){return t.ID},t.prototype.dispose=function(){this.stop(),e.prototype.dispose.call(this)},t.prototype.launch=function(){this._widget||this._editor.hasModel()&&(this._widget=new Eg(this._editor,this._modeService))},t.prototype.stop=function(){this._widget&&(this._widget.dispose(),this._widget=null)},t.ID="editor.contrib.inspectTokens",t=Ig([Ng(1,kg.a),Ng(2,qa.a)],t)}(z.a),Mg=function(e){function t(){return e.call(this,{id:"editor.action.inspectTokens",label:pg.c.inspectTokensAction,alias:"Developer: Inspect Tokens",precondition:null})||this}return Dg(t,e),t.prototype.run=function(e,t){var n=Lg.get(t);n&&n.launch()},t}(U.b);var Eg=function(e){function t(t,n){var i=e.call(this)||this;return i.allowEditorOverflow=!0,i._editor=t,i._modeService=n,i._model=i._editor.getModel(),i._domNode=document.createElement("div"),i._domNode.className="tokens-inspect-widget",i._tokenizationSupport=function(e){var t=qe.y.get(e.language);return t||{getInitialState:function(){return Og.c},tokenize:function(t,n,i){return Object(Og.d)(e.language,t,n,i)},tokenize2:function(t,n,i){return Object(Og.e)(e.id,t,n,i)}}}(i._model.getLanguageIdentifier()),i._compute(i._editor.getPosition()),i._register(i._editor.onDidChangeCursorPosition(function(e){return i._compute(i._editor.getPosition())})),i._editor.addContentWidget(i),i}return Dg(t,e),t.prototype.dispose=function(){this._editor.removeContentWidget(this),e.prototype.dispose.call(this)},t.prototype.getId=function(){return t._ID},t.prototype._compute=function(e){for(var t=this._getTokensAtLine(e.lineNumber),n=0,i=t.tokens1.length-1;i>=0;i--){var o=t.tokens1[i];if(e.column-1>=o.offset){n=i;break}}var r=0;for(i=t.tokens2.length>>>1;i>=0;i--)if(e.column-1>=t.tokens2[i<<1]){r=i;break}var s="",a=this._model.getLineContent(e.lineNumber),c="";if(n<t.tokens1.length){var l=t.tokens1[n].offset,u=n+1<t.tokens1.length?t.tokens1[n+1].offset:a.length;c=a.substring(l,u)}s+='<h2 class="tm-token">'+function(e){for(var t="",n=0,i=e.length;n<i;n++){var o=e.charCodeAt(n);switch(o){case 9:t+="&rarr;";break;case 32:t+="&middot;";break;case 60:t+="&lt;";break;case 62:t+="&gt;";break;case 38:t+="&amp;";break;default:t+=String.fromCharCode(o)}}return t}(c)+'<span class="tm-token-length">('+c.length+" "+(1===c.length?"char":"chars")+")</span></h2>",s+='<hr class="tokens-inspect-separator" style="clear:both"/>';var d=this._decodeMetadata(t.tokens2[1+(r<<1)]);s+='<table class="tm-metadata-table"><tbody>',s+='<tr><td class="tm-metadata-key">language</td><td class="tm-metadata-value">'+Object(he.m)(d.languageIdentifier.language)+"</td>",s+='<tr><td class="tm-metadata-key">token type</td><td class="tm-metadata-value">'+this._tokenTypeToString(d.tokenType)+"</td>",s+='<tr><td class="tm-metadata-key">font style</td><td class="tm-metadata-value">'+this._fontStyleToString(d.fontStyle)+"</td>",s+='<tr><td class="tm-metadata-key">foreground</td><td class="tm-metadata-value">'+Vt.a.Format.CSS.formatHex(d.foreground)+"</td>",s+='<tr><td class="tm-metadata-key">background</td><td class="tm-metadata-value">'+Vt.a.Format.CSS.formatHex(d.background)+"</td>",s+="</tbody></table>",s+='<hr class="tokens-inspect-separator"/>',n<t.tokens1.length&&(s+='<span class="tm-token-type">'+Object(he.m)(t.tokens1[n].type)+"</span>"),this._domNode.innerHTML=s,this._editor.layoutContentWidget(this)},t.prototype._decodeMetadata=function(e){var t=qe.y.getColorMap(),n=qe.x.getLanguageId(e),i=qe.x.getTokenType(e),o=qe.x.getFontStyle(e),r=qe.x.getForeground(e),s=qe.x.getBackground(e);return{languageIdentifier:this._modeService.getLanguageIdentifier(n),tokenType:i,fontStyle:o,foreground:t[r],background:t[s]}},t.prototype._tokenTypeToString=function(e){switch(e){case 0:return"Other";case 1:return"Comment";case 2:return"String";case 4:return"RegEx"}return"??"},t.prototype._fontStyleToString=function(e){var t="";return 1&e&&(t+="italic "),2&e&&(t+="bold "),4&e&&(t+="underline "),0===t.length&&(t="---"),t},t.prototype._getTokensAtLine=function(e){var t=this._getStateBeforeLine(e),n=this._tokenizationSupport.tokenize(this._model.getLineContent(e),t,0),i=this._tokenizationSupport.tokenize2(this._model.getLineContent(e),t,0);return{startState:t,tokens1:n.tokens,tokens2:i.tokens,endState:n.endState}},t.prototype._getStateBeforeLine=function(e){for(var t=this._tokenizationSupport.getInitialState(),n=1;n<e;n++){t=this._tokenizationSupport.tokenize(this._model.getLineContent(n),t,0).endState}return t},t.prototype.getDomNode=function(){return this._domNode},t.prototype.getPosition=function(){return{position:this._editor.getPosition(),preference:[2,1]}},t._ID="editor.contrib.inspectTokensWidget",t}(z.a);Object(U.h)(Lg),Object(U.f)(Mg),Object(X.e)(function(e,t){var n=e.getColor(J.x);if(n){var i=e.type===X.b?2:1;t.addRule(".monaco-editor .tokens-inspect-widget { border: "+i+"px solid "+n+"; }"),t.addRule(".monaco-editor .tokens-inspect-widget .tokens-inspect-separator { background-color: "+n+"; }")}var o=e.getColor(J.w);o&&t.addRule(".monaco-editor .tokens-inspect-widget { background-color: "+o+"; }")});n(291),n(292);var Pg=n(207),Rg=st.a,Tg=function(){function e(e,t,n){this.os=t,this.options=n,this.domNode=st.m(e,Rg(".monaco-keybinding")),this.didEverRender=!1,e.appendChild(this.domNode)}return e.prototype.set=function(t,n){this.didEverRender&&this.keybinding===t&&e.areSame(this.matches,n)||(this.keybinding=t,this.matches=n,this.render())},e.prototype.render=function(){if(st.n(this.domNode),this.keybinding){var e=this.keybinding.getParts(),t=e[0],n=e[1];t&&this.renderPart(this.domNode,t,this.matches?this.matches.firstPart:null),n&&(st.m(this.domNode,Rg("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderPart(this.domNode,n,this.matches?this.matches.chordPart:null)),this.domNode.title=this.keybinding.getAriaLabel()||""}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.didEverRender=!0},e.prototype.renderPart=function(e,t,n){var i=Pg.b.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,i.ctrlKey,Boolean(n&&n.ctrlKey),i.separator),t.shiftKey&&this.renderKey(e,i.shiftKey,Boolean(n&&n.shiftKey),i.separator),t.altKey&&this.renderKey(e,i.altKey,Boolean(n&&n.altKey),i.separator),t.metaKey&&this.renderKey(e,i.metaKey,Boolean(n&&n.metaKey),i.separator);var o=t.keyLabel;o&&this.renderKey(e,o,Boolean(n&&n.keyCode),"")},e.prototype.renderKey=function(e,t,n,i){st.m(e,Rg("span.monaco-keybinding-key"+(n?".highlight":""),void 0,t)),i&&st.m(e,Rg("span.monaco-keybinding-key-separator",void 0,i))},e.prototype.renderUnbound=function(e){st.m(e,Rg("span.monaco-keybinding-key",void 0,Object(V.a)("unbound","Unbound")))},e.areSame=function(e,t){return e===t||!e&&!t||!!e&&!!t&&Object(Bn.e)(e.firstPart,t.firstPart)&&Object(Bn.e)(e.chordPart,t.chordPart)},e}(),Ag=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),jg=0,Fg=function(){function e(e){void 0===e&&(e=[]),this.id=(jg++).toString(),this.labelHighlights=e,this.descriptionHighlights=[]}return e.prototype.getId=function(){return this.id},e.prototype.getLabel=function(){return null},e.prototype.getLabelOptions=function(){return null},e.prototype.getAriaLabel=function(){return Object(Ge.d)([this.getLabel(),this.getDescription(),this.getDetail()]).join(", ")},e.prototype.getDetail=function(){return null},e.prototype.getIcon=function(){return null},e.prototype.getDescription=function(){return null},e.prototype.getTooltip=function(){return null},e.prototype.getDescriptionTooltip=function(){return null},e.prototype.getKeybinding=function(){return null},e.prototype.isHidden=function(){return this.hidden},e.prototype.setHighlights=function(e,t,n){this.labelHighlights=e,this.descriptionHighlights=t,this.detailHighlights=n},e.prototype.getHighlights=function(){return[this.labelHighlights,this.descriptionHighlights,this.detailHighlights]},e.prototype.run=function(e,t){return!1},e}(),Bg=function(e){function t(t,n,i){var o=e.call(this)||this;return o.entry=t,o.groupLabel=n,o.withBorder=i,o}return Ag(t,e),t.prototype.getGroupLabel=function(){return this.groupLabel},t.prototype.setGroupLabel=function(e){this.groupLabel=e},t.prototype.showBorder=function(){return!!this.withBorder},t.prototype.setShowBorder=function(e){this.withBorder=e},t.prototype.getLabel=function(){return this.entry?this.entry.getLabel():e.prototype.getLabel.call(this)},t.prototype.getLabelOptions=function(){return this.entry?this.entry.getLabelOptions():e.prototype.getLabelOptions.call(this)},t.prototype.getAriaLabel=function(){return this.entry?this.entry.getAriaLabel():e.prototype.getAriaLabel.call(this)},t.prototype.getDetail=function(){return this.entry?this.entry.getDetail():e.prototype.getDetail.call(this)},t.prototype.getIcon=function(){return this.entry?this.entry.getIcon():e.prototype.getIcon.call(this)},t.prototype.getDescription=function(){return this.entry?this.entry.getDescription():e.prototype.getDescription.call(this)},t.prototype.getHighlights=function(){return this.entry?this.entry.getHighlights():e.prototype.getHighlights.call(this)},t.prototype.isHidden=function(){return this.entry?this.entry.isHidden():e.prototype.isHidden.call(this)},t.prototype.setHighlights=function(t,n,i){this.entry?this.entry.setHighlights(t,n,i):e.prototype.setHighlights.call(this,t,n,i)},t.prototype.run=function(t,n){return this.entry?this.entry.run(t,n):e.prototype.run.call(this,t,n)},t}(Fg),Wg=function(){function e(){}return e.prototype.hasActions=function(e,t){return!1},e.prototype.getActions=function(e,t){return null},e}(),Vg=function(){function e(e,t){void 0===e&&(e=new Wg),this.actionProvider=e,this.actionRunner=t}return e.prototype.getHeight=function(e){return e.getDetail()?44:22},e.prototype.getTemplateId=function(e){return e instanceof Bg?"quickOpenEntryGroup":"quickOpenEntry"},e.prototype.renderTemplate=function(e,t,n){var i=document.createElement("div");st.f(i,"sub-content"),t.appendChild(i);var o=st.a(".quick-open-row"),r=st.a(".quick-open-row"),s=st.a(".quick-open-entry",void 0,o,r);i.appendChild(s);var a=document.createElement("span");o.appendChild(a);var c=new ms(o,{supportHighlights:!0,supportDescriptionHighlights:!0}),l=document.createElement("span");o.appendChild(l),st.f(l,"quick-open-entry-keybinding");var u=new Tg(l,_e.a),d=document.createElement("div");r.appendChild(d),st.f(d,"quick-open-entry-meta");var h,p=new ps(d,!0);"quickOpenEntryGroup"===e&&(h=document.createElement("div"),st.f(h,"results-group"),t.appendChild(h)),st.f(t,"actions");var g=document.createElement("div");return st.f(g,"primary-action-bar"),t.appendChild(g),{container:t,entry:s,icon:a,label:c,detail:p,keybinding:u,group:h,actionBar:new cn.a(g,{actionRunner:this.actionRunner})}},e.prototype.renderElement=function(e,t,n,i){this.actionProvider.hasActions(null,e)?st.f(n.container,"has-actions"):st.G(n.container,"has-actions"),n.actionBar.context=e;var o=this.actionProvider.getActions(null,e);if(n.actionBar.isEmpty()&&o&&o.length>0?n.actionBar.push(o,{icon:!0,label:!1}):n.actionBar.isEmpty()||o&&0!==o.length||n.actionBar.clear(),e instanceof Bg&&e.getGroupLabel()?st.f(n.container,"has-group-label"):st.G(n.container,"has-group-label"),e instanceof Bg){var r=e,s=n;r.showBorder()?(st.f(s.container,"results-group-separator"),i.pickerGroupBorder&&(s.container.style.borderTopColor=i.pickerGroupBorder.toString())):(st.G(s.container,"results-group-separator"),s.container.style.borderTopColor=null);var a=r.getGroupLabel()||"";s.group&&(s.group.textContent=a,i.pickerGroupForeground&&(s.group.style.color=i.pickerGroupForeground.toString()))}if(e instanceof Fg){var c=e.getHighlights(),l=c[0],u=c[1],d=c[2],h=e.getIcon()?"quick-open-entry-icon "+e.getIcon():"";n.icon.className=h;var p=e.getLabelOptions()||Object.create(null);p.matches=l||[],p.title=Oo.l(e.getTooltip()),p.descriptionTitle=e.getDescriptionTooltip()||Oo.l(e.getDescription()),p.descriptionMatches=u||[],n.label.setLabel(Oo.l(e.getLabel()),Oo.l(e.getDescription()),p),n.detail.set(Oo.l(e.getDetail()),d),n.keybinding.set(e.getKeybinding())}},e.prototype.disposeTemplate=function(e,t){t.actionBar.dispose(),t.actionBar=null,t.container=null,t.entry=null,t.keybinding=null,t.detail=null,t.group=null,t.icon=null,t.label.dispose(),t.label=null},e}(),Hg=function(){function e(e,t){void 0===e&&(e=[]),void 0===t&&(t=new Wg),this._entries=e,this._dataSource=this,this._renderer=new Vg(t),this._filter=this,this._runner=this,this._accessibilityProvider=this}return Object.defineProperty(e.prototype,"entries",{get:function(){return this._entries},set:function(e){this._entries=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataSource",{get:function(){return this._dataSource},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderer",{get:function(){return this._renderer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filter",{get:function(){return this._filter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"runner",{get:function(){return this._runner},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accessibilityProvider",{get:function(){return this._accessibilityProvider},enumerable:!0,configurable:!0}),e.prototype.getId=function(e){return e.getId()},e.prototype.getLabel=function(e){return e.getLabel()},e.prototype.getAriaLabel=function(e){return e.getAriaLabel()?V.a("quickOpenAriaLabelEntry","{0}, picker",e.getAriaLabel()):V.a("quickOpenAriaLabel","picker")},e.prototype.isVisible=function(e){return!e.isHidden()},e.prototype.run=function(e,t,n){return e.run(t,n)},e}(),zg=(n(293),n(294),function(){function e(e){this.modelProvider=Object(Oo.e)(e.getModel)?e:{getModel:function(){return e}}}return e.prototype.getId=function(e,t){if(!t)return null;var n=this.modelProvider.getModel();return n===t?"__root__":n.dataSource.getId(t)},e.prototype.hasChildren=function(e,t){var n=this.modelProvider.getModel();return!!(n&&n===t&&n.entries.length>0)},e.prototype.getChildren=function(e,t){var n=this.modelProvider.getModel();return Promise.resolve(n===t?n.entries:[])},e.prototype.getParent=function(e,t){return Promise.resolve(null)},e}()),Ug=function(){function e(e){this.modelProvider=e}return e.prototype.getAriaLabel=function(e,t){var n=this.modelProvider.getModel();return n.accessibilityProvider?n.accessibilityProvider.getAriaLabel(t):null},e.prototype.getPosInSet=function(e,t){var n=this.modelProvider.getModel(),i=0;if(n.filter)for(var o=0,r=n.entries;o<r.length;o++){var s=r[o];if(n.filter.isVisible(s)&&i++,s===t)break}else i=n.entries.indexOf(t)+1;return String(i)},e.prototype.getSetSize=function(){var e=this.modelProvider.getModel(),t=0;if(e.filter)for(var n=0,i=e.entries;n<i.length;n++){var o=i[n];e.filter.isVisible(o)&&t++}else t=e.entries.length;return String(t)},e}(),Kg=function(){function e(e){this.modelProvider=e}return e.prototype.isVisible=function(e,t){var n=this.modelProvider.getModel();return!n.filter||n.filter.isVisible(t)},e}(),qg=function(){function e(e,t){this.modelProvider=e,this.styles=t}return e.prototype.updateStyles=function(e){this.styles=e},e.prototype.getHeight=function(e,t){return this.modelProvider.getModel().renderer.getHeight(t)},e.prototype.getTemplateId=function(e,t){return this.modelProvider.getModel().renderer.getTemplateId(t)},e.prototype.renderTemplate=function(e,t,n){return this.modelProvider.getModel().renderer.renderTemplate(t,n,this.styles)},e.prototype.renderElement=function(e,t,n,i){this.modelProvider.getModel().renderer.renderElement(t,n,i,this.styles)},e.prototype.disposeTemplate=function(e,t,n){this.modelProvider.getModel().renderer.disposeTemplate(t,n)},e}(),Gg=(n(295),function(){function e(){this._arr=[]}return e.prototype.set=function(e,t){this._arr.push({keybinding:Object(Yt.f)(e,_e.a),callback:t})},e.prototype.dispatch=function(e){for(var t=this._arr.length-1;t>=0;t--){var n=this._arr[t];if(e.toChord().equals(n.keybinding))return n.callback}return null},e}()),Zg=function(){function e(e){var t=this;void 0===e&&(e={clickBehavior:0,keyboardSupport:!0,openMode:0}),this.options=e,this.downKeyBindingDispatcher=new Gg,this.upKeyBindingDispatcher=new Gg,("boolean"!==typeof e.keyboardSupport||e.keyboardSupport)&&(this.downKeyBindingDispatcher.set(16,function(e,n){return t.onUp(e,n)}),this.downKeyBindingDispatcher.set(18,function(e,n){return t.onDown(e,n)}),this.downKeyBindingDispatcher.set(15,function(e,n){return t.onLeft(e,n)}),this.downKeyBindingDispatcher.set(17,function(e,n){return t.onRight(e,n)}),_e.d&&(this.downKeyBindingDispatcher.set(2064,function(e,n){return t.onLeft(e,n)}),this.downKeyBindingDispatcher.set(300,function(e,n){return t.onDown(e,n)}),this.downKeyBindingDispatcher.set(302,function(e,n){return t.onUp(e,n)})),this.downKeyBindingDispatcher.set(11,function(e,n){return t.onPageUp(e,n)}),this.downKeyBindingDispatcher.set(12,function(e,n){return t.onPageDown(e,n)}),this.downKeyBindingDispatcher.set(14,function(e,n){return t.onHome(e,n)}),this.downKeyBindingDispatcher.set(13,function(e,n){return t.onEnd(e,n)}),this.downKeyBindingDispatcher.set(10,function(e,n){return t.onSpace(e,n)}),this.downKeyBindingDispatcher.set(9,function(e,n){return t.onEscape(e,n)}),this.upKeyBindingDispatcher.set(3,this.onEnter.bind(this)),this.upKeyBindingDispatcher.set(2051,this.onEnter.bind(this)))}return e.prototype.onMouseDown=function(e,t,n,i){if(void 0===i&&(i="mouse"),0===this.options.clickBehavior&&(n.leftButton||n.middleButton)){if(n.target){if(n.target.tagName&&"input"===n.target.tagName.toLowerCase())return!1;if(st.r(n.target,"scrollbar","monaco-tree"))return!1;if(st.r(n.target,"monaco-action-bar","row"))return!1}return this.onLeftClick(e,t,n,i)}return!1},e.prototype.onClick=function(e,t,n){return _e.d&&n.ctrlKey?(n.preventDefault(),n.stopPropagation(),!1):(!n.target||!n.target.tagName||"input"!==n.target.tagName.toLowerCase())&&((0!==this.options.clickBehavior||!n.leftButton&&!n.middleButton)&&this.onLeftClick(e,t,n))},e.prototype.onLeftClick=function(e,t,n,i){void 0===i&&(i="mouse");var o=n,r={origin:i,originalEvent:n,didClickOnTwistie:this.isClickOnTwistie(o)};e.getInput()===t?(e.clearFocus(r),e.clearSelection(r)):(n&&o.browserEvent&&"mousedown"===o.browserEvent.type&&1===o.browserEvent.detail||n.preventDefault(),n.stopPropagation(),e.domFocus(),e.setSelection([t],r),e.setFocus(t,r),this.shouldToggleExpansion(t,o,i)&&(e.isExpanded(t)?e.collapse(t).then(void 0,$e.e):e.expand(t).then(void 0,$e.e)));return!0},e.prototype.shouldToggleExpansion=function(e,t,n){var i="mouse"===n&&2===t.detail;return this.openOnSingleClick||i||this.isClickOnTwistie(t)},Object.defineProperty(e.prototype,"openOnSingleClick",{get:function(){return 0===this.options.openMode},enumerable:!0,configurable:!0}),e.prototype.isClickOnTwistie=function(e){var t=e.target;if(!st.A(t,"content"))return!1;var n=window.getComputedStyle(t,":before");if("none"===n.backgroundImage||"none"===n.display)return!1;var i=parseInt(n.width)+parseInt(n.paddingRight);return e.browserEvent.offsetX<=i},e.prototype.onContextMenu=function(e,t,n){return(!n.target||!n.target.tagName||"input"!==n.target.tagName.toLowerCase())&&(n&&(n.preventDefault(),n.stopPropagation()),!1)},e.prototype.onTap=function(e,t,n){var i=n.initialTarget;return(!i||!i.tagName||"input"!==i.tagName.toLowerCase())&&this.onLeftClick(e,t,n,"touch")},e.prototype.onKeyDown=function(e,t){return this.onKey(this.downKeyBindingDispatcher,e,t)},e.prototype.onKeyUp=function(e,t){return this.onKey(this.upKeyBindingDispatcher,e,t)},e.prototype.onKey=function(e,t,n){var i=e.dispatch(n.toKeybinding());return!(!i||!i(t,n))&&(n.preventDefault(),n.stopPropagation(),!0)},e.prototype.onUp=function(e,t){var n={origin:"keyboard",originalEvent:t};return e.getHighlight()?e.clearHighlight(n):(e.focusPrevious(1,n),e.reveal(e.getFocus()).then(void 0,$e.e)),!0},e.prototype.onPageUp=function(e,t){var n={origin:"keyboard",originalEvent:t};return e.getHighlight()?e.clearHighlight(n):(e.focusPreviousPage(n),e.reveal(e.getFocus()).then(void 0,$e.e)),!0},e.prototype.onDown=function(e,t){var n={origin:"keyboard",originalEvent:t};return e.getHighlight()?e.clearHighlight(n):(e.focusNext(1,n),e.reveal(e.getFocus()).then(void 0,$e.e)),!0},e.prototype.onPageDown=function(e,t){var n={origin:"keyboard",originalEvent:t};return e.getHighlight()?e.clearHighlight(n):(e.focusNextPage(n),e.reveal(e.getFocus()).then(void 0,$e.e)),!0},e.prototype.onHome=function(e,t){var n={origin:"keyboard",originalEvent:t};return e.getHighlight()?e.clearHighlight(n):(e.focusFirst(n),e.reveal(e.getFocus()).then(void 0,$e.e)),!0},e.prototype.onEnd=function(e,t){var n={origin:"keyboard",originalEvent:t};return e.getHighlight()?e.clearHighlight(n):(e.focusLast(n),e.reveal(e.getFocus()).then(void 0,$e.e)),!0},e.prototype.onLeft=function(e,t){var n={origin:"keyboard",originalEvent:t};if(e.getHighlight())e.clearHighlight(n);else{var i=e.getFocus();e.collapse(i).then(function(t){if(i&&!t)return e.focusParent(n),e.reveal(e.getFocus())}).then(void 0,$e.e)}return!0},e.prototype.onRight=function(e,t){var n={origin:"keyboard",originalEvent:t};if(e.getHighlight())e.clearHighlight(n);else{var i=e.getFocus();e.expand(i).then(function(t){if(i&&!t)return e.focusFirstChild(n),e.reveal(e.getFocus())}).then(void 0,$e.e)}return!0},e.prototype.onEnter=function(e,t){var n={origin:"keyboard",originalEvent:t};if(e.getHighlight())return!1;var i=e.getFocus();return i&&e.setSelection([i],n),!0},e.prototype.onSpace=function(e,t){if(e.getHighlight())return!1;var n=e.getFocus();return n&&e.toggleExpansion(n),!0},e.prototype.onEscape=function(e,t){var n={origin:"keyboard",originalEvent:t};return e.getHighlight()?(e.clearHighlight(n),!0):e.getSelection().length?(e.clearSelection(n),!0):!!e.getFocus()&&(e.clearFocus(n),!0)},e}(),$g=function(){function e(){}return e.prototype.getDragURI=function(e,t){return null},e.prototype.onDragStart=function(e,t,n){},e.prototype.onDragOver=function(e,t,n,i){return null},e.prototype.drop=function(e,t,n,i){},e}(),Yg=function(){function e(){}return e.prototype.isVisible=function(e,t){return!0},e}(),Jg=function(){function e(){}return e.prototype.getAriaLabel=function(e,t){return null},e}(),Xg=function(){function e(e,t){this.styleElement=e,this.selectorSuffix=t}return e.prototype.style=function(e){var t=this.selectorSuffix?"."+this.selectorSuffix:"",n=[];e.listFocusBackground&&n.push(".monaco-tree"+t+".focused .monaco-tree-rows > .monaco-tree-row.focused:not(.highlighted) { background-color: "+e.listFocusBackground+"; }"),e.listFocusForeground&&n.push(".monaco-tree"+t+".focused .monaco-tree-rows > .monaco-tree-row.focused:not(.highlighted) { color: "+e.listFocusForeground+"; }"),e.listActiveSelectionBackground&&n.push(".monaco-tree"+t+".focused .monaco-tree-rows > .monaco-tree-row.selected:not(.highlighted) { background-color: "+e.listActiveSelectionBackground+"; }"),e.listActiveSelectionForeground&&n.push(".monaco-tree"+t+".focused .monaco-tree-rows > .monaco-tree-row.selected:not(.highlighted) { color: "+e.listActiveSelectionForeground+"; }"),e.listFocusAndSelectionBackground&&n.push("\n\t\t\t\t.monaco-tree-drag-image,\n\t\t\t\t.monaco-tree"+t+".focused .monaco-tree-rows > .monaco-tree-row.focused.selected:not(.highlighted) { background-color: "+e.listFocusAndSelectionBackground+"; }\n\t\t\t"),e.listFocusAndSelectionForeground&&n.push("\n\t\t\t\t.monaco-tree-drag-image,\n\t\t\t\t.monaco-tree"+t+".focused .monaco-tree-rows > .monaco-tree-row.focused.selected:not(.highlighted) { color: "+e.listFocusAndSelectionForeground+"; }\n\t\t\t"),e.listInactiveSelectionBackground&&n.push(".monaco-tree"+t+" .monaco-tree-rows > .monaco-tree-row.selected:not(.highlighted) { background-color: "+e.listInactiveSelectionBackground+"; }"),e.listInactiveSelectionForeground&&n.push(".monaco-tree"+t+" .monaco-tree-rows > .monaco-tree-row.selected:not(.highlighted) { color: "+e.listInactiveSelectionForeground+"; }"),e.listHoverBackground&&n.push(".monaco-tree"+t+" .monaco-tree-rows > .monaco-tree-row:hover:not(.highlighted):not(.selected):not(.focused) { background-color: "+e.listHoverBackground+"; }"),e.listHoverForeground&&n.push(".monaco-tree"+t+" .monaco-tree-rows > .monaco-tree-row:hover:not(.highlighted):not(.selected):not(.focused) { color: "+e.listHoverForeground+"; }"),e.listDropBackground&&n.push("\n\t\t\t\t.monaco-tree"+t+" .monaco-tree-wrapper.drop-target,\n\t\t\t\t.monaco-tree"+t+" .monaco-tree-rows > .monaco-tree-row.drop-target { background-color: "+e.listDropBackground+" !important; color: inherit !important; }\n\t\t\t"),e.listFocusOutline&&n.push("\n\t\t\t\t.monaco-tree-drag-image\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ border: 1px solid "+e.listFocusOutline+"; background: #000; }\n\t\t\t\t.monaco-tree"+t+" .monaco-tree-rows > .monaco-tree-row \t\t\t\t\t\t\t\t\t\t\t\t\t\t{ border: 1px solid transparent; }\n\t\t\t\t.monaco-tree"+t+".focused .monaco-tree-rows > .monaco-tree-row.focused:not(.highlighted) \t\t\t\t\t\t{ border: 1px dotted "+e.listFocusOutline+"; }\n\t\t\t\t.monaco-tree"+t+".focused .monaco-tree-rows > .monaco-tree-row.selected:not(.highlighted) \t\t\t\t\t\t{ border: 1px solid "+e.listFocusOutline+"; }\n\t\t\t\t.monaco-tree"+t+" .monaco-tree-rows > .monaco-tree-row.selected:not(.highlighted)  \t\t\t\t\t\t\t{ border: 1px solid "+e.listFocusOutline+"; }\n\t\t\t\t.monaco-tree"+t+" .monaco-tree-rows > .monaco-tree-row:hover:not(.highlighted):not(.selected):not(.focused)  \t{ border: 1px dashed "+e.listFocusOutline+"; }\n\t\t\t\t.monaco-tree"+t+" .monaco-tree-wrapper.drop-target,\n\t\t\t\t.monaco-tree"+t+" .monaco-tree-rows > .monaco-tree-row.drop-target\t\t\t\t\t\t\t\t\t\t\t\t{ border: 1px dashed "+e.listFocusOutline+"; }\n\t\t\t");var i=n.join("\n");i!==this.styleElement.innerHTML&&(this.styleElement.innerHTML=i)},e}(),Qg=n(175),ef=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),tf=function(){function e(e){this._onDispose=new Ke.a,this.onDispose=this._onDispose.event,this._item=e}return Object.defineProperty(e.prototype,"item",{get:function(){return this._item},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._onDispose&&(this._onDispose.fire(),this._onDispose.dispose(),this._onDispose=void 0)},e}(),nf=function(){function e(){this.locks=Object.create({})}return e.prototype.isLocked=function(e){return!!this.locks[e.id]},e.prototype.run=function(e,t){var n=this,i=this.getLock(e);return i?new Promise(function(o,r){Ke.b.once(i.onDispose)(function(){return n.run(e,t).then(o,r)})}):new Promise(function(i,o){if(e.isDisposed())return o(new Error("Item is disposed."));var r=n.locks[e.id]=new tf(e);return t().then(function(t){return delete n.locks[e.id],r.dispose(),t}).then(i,o)})},e.prototype.getLock=function(e){var t;for(t in this.locks){var n=this.locks[t];if(e.intersects(n.item))return n}return null},e}(),of=function(){function e(){this._isDisposed=!1,this._onDidRevealItem=new Ke.d,this.onDidRevealItem=this._onDidRevealItem.event,this._onExpandItem=new Ke.d,this.onExpandItem=this._onExpandItem.event,this._onDidExpandItem=new Ke.d,this.onDidExpandItem=this._onDidExpandItem.event,this._onCollapseItem=new Ke.d,this.onCollapseItem=this._onCollapseItem.event,this._onDidCollapseItem=new Ke.d,this.onDidCollapseItem=this._onDidCollapseItem.event,this._onDidAddTraitItem=new Ke.d,this.onDidAddTraitItem=this._onDidAddTraitItem.event,this._onDidRemoveTraitItem=new Ke.d,this.onDidRemoveTraitItem=this._onDidRemoveTraitItem.event,this._onDidRefreshItem=new Ke.d,this.onDidRefreshItem=this._onDidRefreshItem.event,this._onRefreshItemChildren=new Ke.d,this.onRefreshItemChildren=this._onRefreshItemChildren.event,this._onDidRefreshItemChildren=new Ke.d,this.onDidRefreshItemChildren=this._onDidRefreshItemChildren.event,this._onDidDisposeItem=new Ke.d,this.onDidDisposeItem=this._onDidDisposeItem.event,this.items={}}return e.prototype.register=function(e){Qg.a(!this.isRegistered(e.id),"item already registered: "+e.id);var t=Object(z.c)([this._onDidRevealItem.add(e.onDidReveal),this._onExpandItem.add(e.onExpand),this._onDidExpandItem.add(e.onDidExpand),this._onCollapseItem.add(e.onCollapse),this._onDidCollapseItem.add(e.onDidCollapse),this._onDidAddTraitItem.add(e.onDidAddTrait),this._onDidRemoveTraitItem.add(e.onDidRemoveTrait),this._onDidRefreshItem.add(e.onDidRefresh),this._onRefreshItemChildren.add(e.onRefreshChildren),this._onDidRefreshItemChildren.add(e.onDidRefreshChildren),this._onDidDisposeItem.add(e.onDidDispose)]);this.items[e.id]={item:e,disposable:t}},e.prototype.deregister=function(e){Qg.a(this.isRegistered(e.id),"item not registered: "+e.id),this.items[e.id].disposable.dispose(),delete this.items[e.id]},e.prototype.isRegistered=function(e){return this.items.hasOwnProperty(e)},e.prototype.getItem=function(e){var t=this.items[e];return t?t.item:null},e.prototype.dispose=function(){this.items=null,this._onDidRevealItem.dispose(),this._onExpandItem.dispose(),this._onDidExpandItem.dispose(),this._onCollapseItem.dispose(),this._onDidCollapseItem.dispose(),this._onDidAddTraitItem.dispose(),this._onDidRemoveTraitItem.dispose(),this._onDidRefreshItem.dispose(),this._onRefreshItemChildren.dispose(),this._onDidRefreshItemChildren.dispose(),this._isDisposed=!0},e.prototype.isDisposed=function(){return this._isDisposed},e}(),rf=function(){function e(e,t,n,i,o){this._onDidCreate=new Ke.a,this._onDidReveal=new Ke.a,this.onDidReveal=this._onDidReveal.event,this._onExpand=new Ke.a,this.onExpand=this._onExpand.event,this._onDidExpand=new Ke.a,this.onDidExpand=this._onDidExpand.event,this._onCollapse=new Ke.a,this.onCollapse=this._onCollapse.event,this._onDidCollapse=new Ke.a,this.onDidCollapse=this._onDidCollapse.event,this._onDidAddTrait=new Ke.a,this.onDidAddTrait=this._onDidAddTrait.event,this._onDidRemoveTrait=new Ke.a,this.onDidRemoveTrait=this._onDidRemoveTrait.event,this._onDidRefresh=new Ke.a,this.onDidRefresh=this._onDidRefresh.event,this._onRefreshChildren=new Ke.a,this.onRefreshChildren=this._onRefreshChildren.event,this._onDidRefreshChildren=new Ke.a,this.onDidRefreshChildren=this._onDidRefreshChildren.event,this._onDidDispose=new Ke.a,this.onDidDispose=this._onDidDispose.event,this.registry=t,this.context=n,this.lock=i,this.element=o,this.id=e,this.registry.register(this),this.doesHaveChildren=this.context.dataSource.hasChildren(this.context.tree,this.element),this.needsChildrenRefresh=!0,this.parent=null,this.previous=null,this.next=null,this.firstChild=null,this.lastChild=null,this.traits={},this.depth=0,this.expanded=!(!this.context.dataSource.shouldAutoexpand||!this.context.dataSource.shouldAutoexpand(this.context.tree,o)),this._onDidCreate.fire(this),this.visible=this._isVisible(),this.height=this._getHeight(),this._isDisposed=!1}return e.prototype.getElement=function(){return this.element},e.prototype.hasChildren=function(){return this.doesHaveChildren},e.prototype.getDepth=function(){return this.depth},e.prototype.isVisible=function(){return this.visible},e.prototype.setVisible=function(e){this.visible=e},e.prototype.isExpanded=function(){return this.expanded},e.prototype._setExpanded=function(e){this.expanded=e},e.prototype.reveal=function(e){void 0===e&&(e=null);var t={item:this,relativeTop:e};this._onDidReveal.fire(t)},e.prototype.expand=function(){var e=this;return this.isExpanded()||!this.doesHaveChildren||this.lock.isLocked(this)?Promise.resolve(!1):this.lock.run(this,function(){if(e.isExpanded()||!e.doesHaveChildren)return Promise.resolve(!1);var t={item:e};return e._onExpand.fire(t),(e.needsChildrenRefresh?e.refreshChildren(!1,!0,!0):Promise.resolve(null)).then(function(){return e._setExpanded(!0),e._onDidExpand.fire(t),!0})}).then(function(t){return!e.isDisposed()&&(e.context.options.autoExpandSingleChildren&&t&&null!==e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.isVisible()?e.firstChild.expand().then(function(){return!0}):t)})},e.prototype.collapse=function(e){var t=this;if(void 0===e&&(e=!1),e){var n=Promise.resolve(null);return this.forEachChild(function(e){n=n.then(function(){return e.collapse(!0)})}),n.then(function(){return t.collapse(!1)})}return!this.isExpanded()||this.lock.isLocked(this)?Promise.resolve(!1):this.lock.run(this,function(){var e={item:t};return t._onCollapse.fire(e),t._setExpanded(!1),t._onDidCollapse.fire(e),Promise.resolve(!0)})},e.prototype.addTrait=function(e){var t={item:this,trait:e};this.traits[e]=!0,this._onDidAddTrait.fire(t)},e.prototype.removeTrait=function(e){var t={item:this,trait:e};delete this.traits[e],this._onDidRemoveTrait.fire(t)},e.prototype.hasTrait=function(e){return this.traits[e]||!1},e.prototype.getAllTraits=function(){var e,t=[];for(e in this.traits)this.traits.hasOwnProperty(e)&&this.traits[e]&&t.push(e);return t},e.prototype.getHeight=function(){return this.height},e.prototype.refreshChildren=function(t,n,i){var o=this;if(void 0===n&&(n=!1),void 0===i&&(i=!1),!i&&!this.isExpanded()){return function e(t){t.needsChildrenRefresh=!0,t.forEachChild(e)}(this),Promise.resolve(this)}this.needsChildrenRefresh=!1;var r=function(){var i={item:o,isNested:n};return o._onRefreshChildren.fire(i),(o.doesHaveChildren?o.context.dataSource.getChildren(o.context.tree,o.element):Promise.resolve([])).then(function(n){if(o.isDisposed()||o.registry.isDisposed())return Promise.resolve(null);if(!Array.isArray(n))return Promise.reject(new Error("Please return an array of children."));n=n?n.slice(0):[],n=o.sort(n);for(var i={};null!==o.firstChild;)i[o.firstChild.id]=o.firstChild,o.removeChild(o.firstChild);for(var r=0,s=n.length;r<s;r++){var a=n[r],c=o.context.dataSource.getId(o.context.tree,a),l=i[c]||new e(c,o.registry,o.context,o.lock,a);l.element=a,t&&(l.needsChildrenRefresh=t),delete i[c],o.addChild(l)}for(var u in i)i.hasOwnProperty(u)&&i[u].dispose();return t?Promise.all(o.mapEachChild(function(e){return e.doRefresh(t,!0)})):Promise.all(o.mapEachChild(function(e){return e.isExpanded()&&e.needsChildrenRefresh?e.doRefresh(t,!0):(e.updateVisibility(),Promise.resolve(null))}))}).then(void 0,$e.e).then(function(){return o._onDidRefreshChildren.fire(i)})};return n?r():this.lock.run(this,r)},e.prototype.doRefresh=function(e,t){return void 0===t&&(t=!1),this.doesHaveChildren=this.context.dataSource.hasChildren(this.context.tree,this.element),this.height=this._getHeight(),this.updateVisibility(),this._onDidRefresh.fire(this),this.refreshChildren(e,t)},e.prototype.updateVisibility=function(){this.setVisible(this._isVisible())},e.prototype.refresh=function(e){return this.doRefresh(e)},e.prototype.getNavigator=function(){return new af(this)},e.prototype.intersects=function(e){return this.isAncestorOf(e)||e.isAncestorOf(this)},e.prototype.isAncestorOf=function(e){for(var t=e;t;){if(t.id===this.id)return!0;t=t.parent}return!1},e.prototype.addChild=function(e,t){void 0===t&&(t=this.lastChild);var n=null===this.firstChild,i=null===t,o=t===this.lastChild;if(n)this.firstChild=this.lastChild=e,e.next=e.previous=null;else if(i){if(!this.firstChild)throw new Error("Invalid tree state");this.firstChild.previous=e,e.next=this.firstChild,e.previous=null,this.firstChild=e}else if(o){if(!this.lastChild)throw new Error("Invalid tree state");this.lastChild.next=e,e.next=null,e.previous=this.lastChild,this.lastChild=e}else{if(e.previous=t,!t)throw new Error("Invalid tree state");if(e.next=t.next,!t.next)throw new Error("Invalid tree state");t.next.previous=e,t.next=e}e.parent=this,e.depth=this.depth+1},e.prototype.removeChild=function(e){var t=this.firstChild===e,n=this.lastChild===e;if(t&&n)this.firstChild=this.lastChild=null;else if(t){if(!e.next)throw new Error("Invalid tree state");e.next.previous=null,this.firstChild=e.next}else if(n){if(!e.previous)throw new Error("Invalid tree state");e.previous.next=null,this.lastChild=e.previous}else{if(!e.next)throw new Error("Invalid tree state");if(e.next.previous=e.previous,!e.previous)throw new Error("Invalid tree state");e.previous.next=e.next}e.parent=null,e.depth=NaN},e.prototype.forEachChild=function(e){for(var t,n=this.firstChild;n;)t=n.next,e(n),n=t},e.prototype.mapEachChild=function(e){var t=[];return this.forEachChild(function(n){t.push(e(n))}),t},e.prototype.sort=function(e){var t=this,n=this.context.sorter;return n?e.sort(function(e,i){return n.compare(t.context.tree,e,i)}):e},e.prototype._getHeight=function(){return this.context.renderer?this.context.renderer.getHeight(this.context.tree,this.element):0},e.prototype._isVisible=function(){return!!this.context.filter&&this.context.filter.isVisible(this.context.tree,this.element)},e.prototype.isDisposed=function(){return this._isDisposed},e.prototype.dispose=function(){this.forEachChild(function(e){return e.dispose()}),this.parent=null,this.previous=null,this.next=null,this.firstChild=null,this.lastChild=null,this._onDidDispose.fire(this),this.registry.deregister(this),this._onDidCreate.dispose(),this._onDidReveal.dispose(),this._onExpand.dispose(),this._onDidExpand.dispose(),this._onCollapse.dispose(),this._onDidCollapse.dispose(),this._onDidAddTrait.dispose(),this._onDidRemoveTrait.dispose(),this._onDidRefresh.dispose(),this._onRefreshChildren.dispose(),this._onDidRefreshChildren.dispose(),this._onDidDispose.dispose(),this._isDisposed=!0},e}(),sf=function(e){function t(t,n,i,o,r){return e.call(this,t,n,i,o,r)||this}return ef(t,e),t.prototype.isVisible=function(){return!1},t.prototype.setVisible=function(e){},t.prototype.isExpanded=function(){return!0},t.prototype._setExpanded=function(e){},t.prototype._getHeight=function(){return 0},t.prototype._isVisible=function(){return!1},t}(rf),af=function(){function e(e,t){void 0===t&&(t=!0),this.item=e,this.start=t?e:null}return e.lastDescendantOf=function(t){return t?t instanceof sf?e.lastDescendantOf(t.lastChild):t.isVisible()?t.isExpanded()&&null!==t.lastChild?e.lastDescendantOf(t.lastChild):t:e.lastDescendantOf(t.previous):null},e.prototype.current=function(){return this.item||null},e.prototype.next=function(){if(this.item)do{if((this.item instanceof sf||this.item.isVisible()&&this.item.isExpanded())&&this.item.firstChild)this.item=this.item.firstChild;else if(this.item===this.start)this.item=null;else{for(;this.item&&this.item!==this.start&&!this.item.next;)this.item=this.item.parent;this.item===this.start&&(this.item=null),this.item=this.item?this.item.next:null}}while(this.item&&!this.item.isVisible());return this.item||null},e.prototype.previous=function(){if(this.item)do{var t=e.lastDescendantOf(this.item.previous);t?this.item=t:this.item.parent&&this.item.parent!==this.start&&this.item.parent.isVisible()?this.item=this.item.parent:this.item=null}while(this.item&&!this.item.isVisible());return this.item||null},e.prototype.parent=function(){if(this.item){var e=this.item.parent;e&&e!==this.start&&e.isVisible()?this.item=e:this.item=null}return this.item||null},e.prototype.first=function(){return this.item=this.start,this.next(),this.item||null},e.prototype.last=function(){return e.lastDescendantOf(this.start)},e}(),cf=function(){function e(e){this._onSetInput=new Ke.a,this.onSetInput=this._onSetInput.event,this._onDidSetInput=new Ke.a,this.onDidSetInput=this._onDidSetInput.event,this._onRefresh=new Ke.a,this.onRefresh=this._onRefresh.event,this._onDidRefresh=new Ke.a,this.onDidRefresh=this._onDidRefresh.event,this._onDidHighlight=new Ke.a,this.onDidHighlight=this._onDidHighlight.event,this._onDidSelect=new Ke.a,this.onDidSelect=this._onDidSelect.event,this._onDidFocus=new Ke.a,this.onDidFocus=this._onDidFocus.event,this._onDidRevealItem=new Ke.f,this.onDidRevealItem=this._onDidRevealItem.event,this._onExpandItem=new Ke.f,this.onExpandItem=this._onExpandItem.event,this._onDidExpandItem=new Ke.f,this.onDidExpandItem=this._onDidExpandItem.event,this._onCollapseItem=new Ke.f,this.onCollapseItem=this._onCollapseItem.event,this._onDidCollapseItem=new Ke.f,this.onDidCollapseItem=this._onDidCollapseItem.event,this._onDidAddTraitItem=new Ke.f,this.onDidAddTraitItem=this._onDidAddTraitItem.event,this._onDidRemoveTraitItem=new Ke.f,this.onDidRemoveTraitItem=this._onDidRemoveTraitItem.event,this._onDidRefreshItem=new Ke.f,this.onDidRefreshItem=this._onDidRefreshItem.event,this._onRefreshItemChildren=new Ke.f,this.onRefreshItemChildren=this._onRefreshItemChildren.event,this._onDidRefreshItemChildren=new Ke.f,this.onDidRefreshItemChildren=this._onDidRefreshItemChildren.event,this._onDidDisposeItem=new Ke.f,this.context=e,this.input=null,this.traitsToItems={}}return e.prototype.setInput=function(e){var t=this,n={item:this.input};this._onSetInput.fire(n),this.setSelection([]),this.setFocus(),this.setHighlight(),this.lock=new nf,this.input&&this.input.dispose(),this.registry&&(this.registry.dispose(),this.registryDisposable.dispose()),this.registry=new of,this._onDidRevealItem.input=this.registry.onDidRevealItem,this._onExpandItem.input=this.registry.onExpandItem,this._onDidExpandItem.input=this.registry.onDidExpandItem,this._onCollapseItem.input=this.registry.onCollapseItem,this._onDidCollapseItem.input=this.registry.onDidCollapseItem,this._onDidAddTraitItem.input=this.registry.onDidAddTraitItem,this._onDidRemoveTraitItem.input=this.registry.onDidRemoveTraitItem,this._onDidRefreshItem.input=this.registry.onDidRefreshItem,this._onRefreshItemChildren.input=this.registry.onRefreshItemChildren,this._onDidRefreshItemChildren.input=this.registry.onDidRefreshItemChildren,this._onDidDisposeItem.input=this.registry.onDidDisposeItem,this.registryDisposable=this.registry.onDidDisposeItem(function(e){return e.getAllTraits().forEach(function(n){return delete t.traitsToItems[n][e.id]})});var i=this.context.dataSource.getId(this.context.tree,e);return this.input=new sf(i,this.registry,this.context,this.lock,e),n={item:this.input},this._onDidSetInput.fire(n),this.refresh(this.input)},e.prototype.getInput=function(){return this.input?this.input.getElement():null},e.prototype.refresh=function(e,t){var n=this;void 0===e&&(e=null),void 0===t&&(t=!0);var i=this.getItem(e);if(!i)return Promise.resolve(null);var o={item:i,recursive:t};return this._onRefresh.fire(o),i.refresh(t).then(function(){n._onDidRefresh.fire(o)})},e.prototype.expand=function(e){var t=this.getItem(e);return t?t.expand():Promise.resolve(!1)},e.prototype.collapse=function(e,t){void 0===t&&(t=!1);var n=this.getItem(e);return n?n.collapse(t):Promise.resolve(!1)},e.prototype.toggleExpansion=function(e,t){return void 0===t&&(t=!1),this.isExpanded(e)?this.collapse(e,t):this.expand(e)},e.prototype.isExpanded=function(e){var t=this.getItem(e);return!!t&&t.isExpanded()},e.prototype.reveal=function(e,t){var n=this;return void 0===t&&(t=null),this.resolveUnknownParentChain(e).then(function(e){var t=Promise.resolve(null);return e.forEach(function(e){t=t.then(function(){return n.expand(e)})}),t}).then(function(){var i=n.getItem(e);if(i)return i.reveal(t)})},e.prototype.resolveUnknownParentChain=function(e){var t=this;return this.context.dataSource.getParent(this.context.tree,e).then(function(e){return e?t.resolveUnknownParentChain(e).then(function(t){return t.push(e),t}):Promise.resolve([])})},e.prototype.setHighlight=function(e,t){this.setTraits("highlighted",e?[e]:[]);var n={highlight:this.getHighlight(),payload:t};this._onDidHighlight.fire(n)},e.prototype.getHighlight=function(e){void 0===e&&(e=!1);var t=this.getElementsWithTrait("highlighted",e);return 0===t.length?null:t[0]},e.prototype.setSelection=function(e,t){this.setTraits("selected",e);var n={selection:this.getSelection(),payload:t};this._onDidSelect.fire(n)},e.prototype.getSelection=function(e){return void 0===e&&(e=!1),this.getElementsWithTrait("selected",e)},e.prototype.setFocus=function(e,t){this.setTraits("focused",e?[e]:[]);var n={focus:this.getFocus(),payload:t};this._onDidFocus.fire(n)},e.prototype.getFocus=function(e){void 0===e&&(e=!1);var t=this.getElementsWithTrait("focused",e);return 0===t.length?null:t[0]},e.prototype.focusNext=function(e,t){void 0===e&&(e=1);for(var n,i=this.getFocus()||this.input,o=this.getNavigator(i,!1),r=0;r<e&&(n=o.next());r++)i=n;this.setFocus(i,t)},e.prototype.focusPrevious=function(e,t){void 0===e&&(e=1);for(var n,i=this.getFocus()||this.input,o=this.getNavigator(i,!1),r=0;r<e&&(n=o.previous());r++)i=n;this.setFocus(i,t)},e.prototype.focusParent=function(e){var t=this.getFocus()||this.input,n=this.getNavigator(t,!1).parent();n&&this.setFocus(n,e)},e.prototype.focusFirstChild=function(e){var t=this.getItem(this.getFocus()||this.input),n=this.getNavigator(t,!1),i=n.next();n.parent()===t&&this.setFocus(i,e)},e.prototype.focusFirst=function(e,t){this.focusNth(0,e,t)},e.prototype.focusNth=function(e,t,n){for(var i=this.getParent(n),o=this.getNavigator(i),r=o.first(),s=0;s<e;s++)r=o.next();r&&this.setFocus(r,t)},e.prototype.focusLast=function(e,t){var n,i=this.getParent(t);t&&i?n=i.lastChild:n=this.getNavigator(i).last();n&&this.setFocus(n,e)},e.prototype.getParent=function(e){if(e){var t=this.getItem(e);if(t&&t.parent)return t.parent}return this.getItem(this.input)},e.prototype.getNavigator=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!0),new af(this.getItem(e),t)},e.prototype.getItem=function(e){return void 0===e&&(e=null),null===e?this.input:e instanceof rf?e:"string"===typeof e?this.registry.getItem(e):this.registry.getItem(this.context.dataSource.getId(this.context.tree,e))},e.prototype.removeTraits=function(e,t){var n,i,o=this.traitsToItems[e]||{};if(0===t.length){for(i in o)o.hasOwnProperty(i)&&(n=o[i]).removeTrait(e);delete this.traitsToItems[e]}else for(var r=0,s=t.length;r<s;r++)(n=this.getItem(t[r]))&&(n.removeTrait(e),delete o[n.id])},e.prototype.setTraits=function(e,t){if(0===t.length)this.removeTraits(e,t);else{for(var n={},i=void 0,o=0,r=t.length;o<r;o++)(i=this.getItem(t[o]))&&(n[i.id]=i);var s=this.traitsToItems[e]||{},a=[],c=void 0;for(c in s)s.hasOwnProperty(c)&&(n.hasOwnProperty(c)?delete n[c]:a.push(s[c]));for(o=0,r=a.length;o<r;o++)(i=a[o]).removeTrait(e),delete s[i.id];for(c in n)n.hasOwnProperty(c)&&((i=n[c]).addTrait(e),s[c]=i);this.traitsToItems[e]=s}},e.prototype.getElementsWithTrait=function(e,t){var n,i=[],o=this.traitsToItems[e]||{};for(n in o)o.hasOwnProperty(n)&&(o[n].isVisible()||t)&&i.push(o[n].getElement());return i},e.prototype.dispose=function(){this.registry&&(this.registry.dispose(),this.registry=null),this._onSetInput.dispose(),this._onDidSetInput.dispose(),this._onRefresh.dispose(),this._onDidRefresh.dispose(),this._onDidHighlight.dispose(),this._onDidSelect.dispose(),this._onDidFocus.dispose(),this._onDidRevealItem.dispose(),this._onExpandItem.dispose(),this._onDidExpandItem.dispose(),this._onCollapseItem.dispose(),this._onDidCollapseItem.dispose(),this._onDidAddTraitItem.dispose(),this._onDidRemoveTraitItem.dispose(),this._onDidRefreshItem.dispose(),this._onRefreshItemChildren.dispose(),this._onDidRefreshItemChildren.dispose(),this._onDidDisposeItem.dispose()},e}(),lf=n(199),uf=n(148),df=n(112),hf=n(121),pf=function(){function e(e){this.elements=e}return e.prototype.update=function(e){},e.prototype.getData=function(){return this.elements},e}(),gf=function(){function e(e){this.elements=e}return e.prototype.update=function(e){},e.prototype.getData=function(){return this.elements},e}(),ff=function(){function e(){this.types=[],this.files=[]}return e.prototype.update=function(e){e.types&&(this.types=[],Array.prototype.push.apply(this.types,e.types)),e.files&&(this.files=[],Array.prototype.push.apply(this.files,e.files),this.files=this.files.filter(function(e){return e.size||e.type}))},e.prototype.getData=function(){return{types:this.types,files:this.files}},e}(),mf=function(){function e(){this.heightMap=[],this.indexes={}}return e.prototype.getContentHeight=function(){var e=this.heightMap[this.heightMap.length-1];return e?e.top+e.height:0},e.prototype.onInsertItems=function(e,t){void 0===t&&(t=null);var n,i,o,r,s=null,a=0;if(null===t)i=0,r=0;else{if(i=this.indexes[t]+1,!(n=this.heightMap[i-1]))return void console.error("view item doesnt exist");r=n.top+n.height}for(var c=this.heightMap.splice.bind(this.heightMap,i,0),l=[];s=e.next();)(n=this.createViewItem(s)).top=r+a,this.indexes[s.id]=i++,l.push(n),a+=n.height;for(c.apply(this.heightMap,l),o=i;o<this.heightMap.length;o++)(n=this.heightMap[o]).top+=a,this.indexes[n.model.id]=o;for(o=l.length-1;o>=0;o--)this.onInsertItem(l[o]);for(o=this.heightMap.length-1;o>=i;o--)this.onRefreshItem(this.heightMap[o]);return a},e.prototype.onInsertItem=function(e){},e.prototype.onRemoveItems=function(e){for(var t,n=null,i=null,o=0,r=0;n=e.next();){if(o=this.indexes[n],!(t=this.heightMap[o]))return void console.error("view item doesnt exist");r-=t.height,delete this.indexes[n],this.onRemoveItem(t),null===i&&(i=o)}if(0!==r&&null!==i)for(this.heightMap.splice(i,o-i+1),o=i;o<this.heightMap.length;o++)(t=this.heightMap[o]).top+=r,this.indexes[t.model.id]=o,this.onRefreshItem(t)},e.prototype.onRemoveItem=function(e){},e.prototype.onRefreshItemSet=function(e){var t=this,n=e.sort(function(e,n){return t.indexes[e.id]-t.indexes[n.id]});this.onRefreshItems(new mi.a(n))},e.prototype.onRefreshItems=function(e){for(var t,n,i,o=null,r=null,s=0;o=e.next();){for(i=this.indexes[o.id];0!==s&&null!==r&&r<i;r++)(t=this.heightMap[r]).top+=s,this.onRefreshItem(t);t=this.heightMap[i],n=o.getHeight(),t.top+=s,s+=n-t.height,t.height=n,this.onRefreshItem(t,!0),r=i+1}if(0!==s&&null!==r)for(;r<this.heightMap.length;r++)(t=this.heightMap[r]).top+=s,this.onRefreshItem(t)},e.prototype.onRefreshItem=function(e,t){void 0===t&&(t=!1)},e.prototype.indexAt=function(e){for(var t,n,i=0,o=this.heightMap.length;i<o;)if(t=Math.floor((i+o)/2),e<(n=this.heightMap[t]).top)o=t;else{if(!(e>=n.top+n.height))return t;if(i===t)break;i=t}return this.heightMap.length},e.prototype.indexAfter=function(e){return Math.min(this.indexAt(e)+1,this.heightMap.length)},e.prototype.itemAtIndex=function(e){return this.heightMap[e]},e.prototype.itemAfter=function(e){return this.heightMap[this.indexes[e.model.id]+1]||null},e.prototype.createViewItem=function(e){throw new Error("not implemented")},e.prototype.dispose=function(){this.heightMap=[],this.indexes={}},e}(),_f=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),vf=function(){function e(e,t,n){this._posx=e,this._posy=t,this._target=n}return e.prototype.preventDefault=function(){},e.prototype.stopPropagation=function(){},Object.defineProperty(e.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),e}(),bf=function(e){function t(t){var n=e.call(this,t.posx,t.posy,t.target)||this;return n.originalEvent=t,n}return _f(t,e),t.prototype.preventDefault=function(){this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){this.originalEvent.stopPropagation()},t}(vf),yf=function(e){function t(t,n,i){var o=e.call(this,t,n,i.target)||this;return o.originalEvent=i,o}return _f(t,e),t.prototype.preventDefault=function(){this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){this.originalEvent.stopPropagation()},t}(vf),wf=n(192),Cf=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();var Sf=function(){function e(e){this.context=e,this._cache={"":[]}}return e.prototype.alloc=function(e){var t=this.cache(e).pop();if(!t){var n=document.createElement("div");n.className="content";var i=document.createElement("div");i.appendChild(n);var o=null;try{o=this.context.renderer.renderTemplate(this.context.tree,e,n)}catch(r){console.error("Tree usage error: exception while rendering template"),console.error(r)}t={element:i,templateId:e,templateData:o}}return t},e.prototype.release=function(e,t){!function(e){try{e.parentElement.removeChild(e)}catch(t){}}(t.element),this.cache(e).push(t)},e.prototype.cache=function(e){return this._cache[e]||(this._cache[e]=[])},e.prototype.garbageCollect=function(){var e=this;this._cache&&Object.keys(this._cache).forEach(function(t){e._cache[t].forEach(function(n){e.context.renderer.disposeTemplate(e.context.tree,t,n.templateData),n.element=null,n.templateData=null}),delete e._cache[t]})},e.prototype.dispose=function(){this.garbageCollect(),this._cache=null},e}(),xf=function(){function e(e,t){var n=this;this.width=0,this.unbindDragStart=z.a.None,this.context=e,this.model=t,this.id=this.model.id,this.row=null,this.top=0,this.height=t.getHeight(),this._styles={},t.getAllTraits().forEach(function(e){return n._styles[e]=!0}),t.isExpanded()&&this.addClass("expanded")}return Object.defineProperty(e.prototype,"expanded",{set:function(e){e?this.addClass("expanded"):this.removeClass("expanded")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loading",{set:function(e){e?this.addClass("loading"):this.removeClass("loading")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"draggable",{get:function(){return this._draggable},set:function(e){this._draggable=e,this.render(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropTarget",{set:function(e){e?this.addClass("drop-target"):this.removeClass("drop-target")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this.row&&this.row.element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"templateId",{get:function(){return this._templateId||(this._templateId=this.context.renderer.getTemplateId&&this.context.renderer.getTemplateId(this.context.tree,this.model.getElement()))},enumerable:!0,configurable:!0}),e.prototype.addClass=function(e){this._styles[e]=!0,this.render(!0)},e.prototype.removeClass=function(e){delete this._styles[e],this.render(!0)},e.prototype.render=function(e){var t=this;if(void 0===e&&(e=!1),this.model&&this.element){var n=["monaco-tree-row"];n.push.apply(n,Object.keys(this._styles)),this.model.hasChildren()&&n.push("has-children"),this.element.className=n.join(" "),this.element.draggable=this.draggable,this.element.style.height=this.height+"px",this.element.setAttribute("role","treeitem");var i=this.context.accessibilityProvider,o=i.getAriaLabel(this.context.tree,this.model.getElement());if(o&&this.element.setAttribute("aria-label",o),i.getPosInSet&&i.getSetSize&&(this.element.setAttribute("aria-setsize",i.getSetSize()),this.element.setAttribute("aria-posinset",i.getPosInSet(this.context.tree,this.model.getElement()))),this.model.hasTrait("focused")){var r=he.F(this.model.id);this.element.setAttribute("aria-selected","true"),this.element.setAttribute("id",r)}else this.element.setAttribute("aria-selected","false"),this.element.removeAttribute("id");this.model.hasChildren()?this.element.setAttribute("aria-expanded",String(!!this._styles.expanded)):this.element.removeAttribute("aria-expanded"),this.element.setAttribute("aria-level",String(this.model.getDepth())),this.context.options.paddingOnRow?this.element.style.paddingLeft=this.context.options.twistiePixels+(this.model.getDepth()-1)*this.context.options.indentPixels+"px":(this.element.style.paddingLeft=(this.model.getDepth()-1)*this.context.options.indentPixels+"px",this.row.element.firstElementChild.style.paddingLeft=this.context.options.twistiePixels+"px");var s=this.context.dnd.getDragURI(this.context.tree,this.model.getElement());if(s!==this.uri&&(this.unbindDragStart&&this.unbindDragStart.dispose(),s?(this.uri=s,this.draggable=!0,this.unbindDragStart=st.h(this.element,"dragstart",function(e){t.onDragStart(e)})):this.uri=null),!e&&this.element){var a=0;if(this.context.horizontalScrolling){var c=window.getComputedStyle(this.element);a=parseFloat(c.paddingLeft)}this.context.horizontalScrolling&&(this.element.style.width="fit-content");try{this.context.renderer.renderElement(this.context.tree,this.model.getElement(),this.templateId,this.row.templateData)}catch(l){console.error("Tree usage error: exception while rendering element"),console.error(l)}this.context.horizontalScrolling&&(this.width=st.u(this.element)+a,this.element.style.width="")}}},e.prototype.insertInDOM=function(e,t){if(this.row||(this.row=this.context.cache.alloc(this.templateId),this.element[kf.BINDING]=this),!this.element.parentElement){if(null===t)e.appendChild(this.element);else try{e.insertBefore(this.element,t)}catch(n){console.warn("Failed to locate previous tree element"),e.appendChild(this.element)}this.render()}},e.prototype.removeFromDOM=function(){this.row&&(this.unbindDragStart.dispose(),this.uri=null,this.element[kf.BINDING]=null,this.context.cache.release(this.templateId,this.row),this.row=null)},e.prototype.dispose=function(){this.row=null},e}(),Of=function(e){function t(t,n,i){var o=e.call(this,t,n)||this;return o.row={element:i,templateData:null,templateId:null},o}return Cf(t,e),t.prototype.render=function(){if(this.model&&this.element){var e=["monaco-tree-wrapper"];e.push.apply(e,Object.keys(this._styles)),this.model.hasChildren()&&e.push("has-children"),this.element.className=e.join(" ")}},t.prototype.insertInDOM=function(e,t){},t.prototype.removeFromDOM=function(){},t}(xf);var kf=function(e){function t(n,i){var o=e.call(this)||this;o.model=null,o.lastClickTimeStamp=0,o.contentWidthUpdateDelayer=new H.a(50),o.isRefreshing=!1,o.refreshingPreviousChildrenIds={},o.currentDragAndDropData=null,o.currentDropTarget=null,o.currentDropTargets=null,o.currentDropDisposable=z.a.None,o.dragAndDropScrollInterval=null,o.dragAndDropScrollTimeout=null,o.dragAndDropMouseY=null,o.onHiddenScrollTop=null,o._onDOMFocus=new Ke.a,o._onDOMBlur=new Ke.a,o._onDidScroll=new Ke.a,t.counter++,o.instance=t.counter;var r="undefined"===typeof n.options.horizontalScrollMode?2:n.options.horizontalScrollMode;o.horizontalScrolling=2!==r,o.context={dataSource:n.dataSource,renderer:n.renderer,controller:n.controller,dnd:n.dnd,filter:n.filter,sorter:n.sorter,tree:n.tree,accessibilityProvider:n.accessibilityProvider,options:n.options,cache:new Sf(n),horizontalScrolling:o.horizontalScrolling},o.modelListeners=[],o.viewListeners=[],o.items={},o.domNode=document.createElement("div"),o.domNode.className="monaco-tree no-focused-item monaco-tree-instance-"+o.instance,o.domNode.tabIndex=n.options.preventRootFocus?-1:0,o.styleElement=st.q(o.domNode),o.treeStyler=n.styler||new Xg(o.styleElement,"monaco-tree-instance-"+o.instance),o.domNode.setAttribute("role","tree"),o.context.options.ariaLabel&&o.domNode.setAttribute("aria-label",o.context.options.ariaLabel),o.context.options.alwaysFocused&&st.f(o.domNode,"focused"),o.context.options.paddingOnRow||st.f(o.domNode,"no-row-padding"),o.wrapper=document.createElement("div"),o.wrapper.className="monaco-tree-wrapper",o.scrollableElement=new ic.b(o.wrapper,{alwaysConsumeMouseWheel:!0,horizontal:r,vertical:"undefined"!==typeof n.options.verticalScrollMode?n.options.verticalScrollMode:1,useShadows:n.options.useShadows}),o.scrollableElement.onScroll(function(e){o.render(e.scrollTop,e.height,e.scrollLeft,e.width,e.scrollWidth),o._onDidScroll.fire()}),me.j?(o.wrapper.style.msTouchAction="none",o.wrapper.style.msContentZooming="none"):uf.b.addTarget(o.wrapper),o.rowsContainer=document.createElement("div"),o.rowsContainer.className="monaco-tree-rows",n.options.showTwistie&&(o.rowsContainer.className+=" show-twisties");var s=st.Q(o.domNode);return o.viewListeners.push(s.onDidFocus(function(){return o.onFocus()})),o.viewListeners.push(s.onDidBlur(function(){return o.onBlur()})),o.viewListeners.push(s),o.viewListeners.push(st.h(o.domNode,"keydown",function(e){return o.onKeyDown(e)})),o.viewListeners.push(st.h(o.domNode,"keyup",function(e){return o.onKeyUp(e)})),o.viewListeners.push(st.h(o.domNode,"mousedown",function(e){return o.onMouseDown(e)})),o.viewListeners.push(st.h(o.domNode,"mouseup",function(e){return o.onMouseUp(e)})),o.viewListeners.push(st.h(o.wrapper,"auxclick",function(e){e&&1===e.button&&o.onMouseMiddleClick(e)})),o.viewListeners.push(st.h(o.wrapper,"click",function(e){return o.onClick(e)})),o.viewListeners.push(st.h(o.domNode,"contextmenu",function(e){return o.onContextMenu(e)})),o.viewListeners.push(st.h(o.wrapper,uf.a.Tap,function(e){return o.onTap(e)})),o.viewListeners.push(st.h(o.wrapper,uf.a.Change,function(e){return o.onTouchChange(e)})),me.j&&(o.viewListeners.push(st.h(o.wrapper,"MSPointerDown",function(e){return o.onMsPointerDown(e)})),o.viewListeners.push(st.h(o.wrapper,"MSGestureTap",function(e){return o.onMsGestureTap(e)})),o.viewListeners.push(st.j(o.wrapper,"MSGestureChange",function(e){return o.onThrottledMsGestureChange(e)},function(e,t){t.stopPropagation(),t.preventDefault();var n={translationY:t.translationY,translationX:t.translationX};return e&&(n.translationY+=e.translationY,n.translationX+=e.translationX),n}))),o.viewListeners.push(st.h(window,"dragover",function(e){return o.onDragOver(e)})),o.viewListeners.push(st.h(o.wrapper,"drop",function(e){return o.onDrop(e)})),o.viewListeners.push(st.h(window,"dragend",function(e){return o.onDragEnd(e)})),o.viewListeners.push(st.h(window,"dragleave",function(e){return o.onDragOver(e)})),o.wrapper.appendChild(o.rowsContainer),o.domNode.appendChild(o.scrollableElement.getDomNode()),i.appendChild(o.domNode),o.lastRenderTop=0,o.lastRenderHeight=0,o.didJustPressContextMenuKey=!1,o.currentDropTarget=null,o.currentDropTargets=[],o.shouldInvalidateDropReaction=!1,o.dragAndDropScrollInterval=null,o.dragAndDropScrollTimeout=null,o.onRowsChanged(),o.layout(),o.setupMSGesture(),o.applyStyles(n.options),o}return Cf(t,e),Object.defineProperty(t.prototype,"onDOMFocus",{get:function(){return this._onDOMFocus.event},enumerable:!0,configurable:!0}),t.prototype.applyStyles=function(e){this.treeStyler.style(e)},t.prototype.createViewItem=function(e){return new xf(this.context,e)},t.prototype.getHTMLElement=function(){return this.domNode},t.prototype.focus=function(){this.domNode.focus()},t.prototype.isFocused=function(){return document.activeElement===this.domNode},t.prototype.blur=function(){this.domNode.blur()},t.prototype.setupMSGesture=function(){var e=this;window.MSGesture&&(this.msGesture=new MSGesture,setTimeout(function(){return e.msGesture.target=e.wrapper},100))},t.prototype.isTreeVisible=function(){return null===this.onHiddenScrollTop},t.prototype.layout=function(e,t){this.isTreeVisible()&&(this.viewHeight=e||st.t(this.wrapper),this.scrollHeight=this.getContentHeight(),this.horizontalScrolling&&(this.viewWidth=t||st.u(this.wrapper)))},t.prototype.render=function(e,t,n,i,o){var r,s,a=e,c=e+t,l=this.lastRenderTop+this.lastRenderHeight;for(r=this.indexAfter(c)-1,s=this.indexAt(Math.max(l,a));r>=s;r--)this.insertItemInDOM(this.itemAtIndex(r));for(r=Math.min(this.indexAt(this.lastRenderTop),this.indexAfter(c))-1,s=this.indexAt(a);r>=s;r--)this.insertItemInDOM(this.itemAtIndex(r));for(r=this.indexAt(this.lastRenderTop),s=Math.min(this.indexAt(a),this.indexAfter(l));r<s;r++)this.removeItemFromDOM(this.itemAtIndex(r));for(r=Math.max(this.indexAfter(c),this.indexAt(this.lastRenderTop)),s=this.indexAfter(l);r<s;r++)this.removeItemFromDOM(this.itemAtIndex(r));var u=this.itemAtIndex(this.indexAt(a));u&&(this.rowsContainer.style.top=u.top-a+"px"),this.horizontalScrolling&&(this.rowsContainer.style.left=-n+"px",this.rowsContainer.style.width=Math.max(o,i)+"px"),this.lastRenderTop=a,this.lastRenderHeight=c-a},t.prototype.setModel=function(e){this.releaseModel(),this.model=e,this.model.onRefresh(this.onRefreshing,this,this.modelListeners),this.model.onDidRefresh(this.onRefreshed,this,this.modelListeners),this.model.onSetInput(this.onClearingInput,this,this.modelListeners),this.model.onDidSetInput(this.onSetInput,this,this.modelListeners),this.model.onDidFocus(this.onModelFocusChange,this,this.modelListeners),this.model.onRefreshItemChildren(this.onItemChildrenRefreshing,this,this.modelListeners),this.model.onDidRefreshItemChildren(this.onItemChildrenRefreshed,this,this.modelListeners),this.model.onDidRefreshItem(this.onItemRefresh,this,this.modelListeners),this.model.onExpandItem(this.onItemExpanding,this,this.modelListeners),this.model.onDidExpandItem(this.onItemExpanded,this,this.modelListeners),this.model.onCollapseItem(this.onItemCollapsing,this,this.modelListeners),this.model.onDidRevealItem(this.onItemReveal,this,this.modelListeners),this.model.onDidAddTraitItem(this.onItemAddTrait,this,this.modelListeners),this.model.onDidRemoveTraitItem(this.onItemRemoveTrait,this,this.modelListeners)},t.prototype.onRefreshing=function(){this.isRefreshing=!0},t.prototype.onRefreshed=function(){this.isRefreshing=!1,this.onRowsChanged()},t.prototype.onRowsChanged=function(e){void 0===e&&(e=this.scrollTop),this.isRefreshing||(this.scrollTop=e,this.updateScrollWidth())},t.prototype.updateScrollWidth=function(){var e=this;this.horizontalScrolling&&this.contentWidthUpdateDelayer.trigger(function(){for(var t=0,n=0,i=Object.keys(e.items);n<i.length;n++){var o=i[n];t=Math.max(t,e.items[o].width)}e.scrollWidth=t+10})},t.prototype.focusNextPage=function(e){var t=this,n=this.indexAt(this.scrollTop+this.viewHeight);n=0===n?0:n-1;var i=this.itemAtIndex(n).model.getElement();if(this.model.getFocus()!==i)this.model.setFocus(i,e);else{var o=this.scrollTop;this.scrollTop+=this.viewHeight,this.scrollTop!==o&&setTimeout(function(){t.focusNextPage(e)},0)}},t.prototype.focusPreviousPage=function(e){var t,n=this;t=0===this.scrollTop?this.indexAt(this.scrollTop):this.indexAfter(this.scrollTop-1);var i=this.itemAtIndex(t).model.getElement();if(this.model.getFocus()!==i)this.model.setFocus(i,e);else{var o=this.scrollTop;this.scrollTop-=this.viewHeight,this.scrollTop!==o&&setTimeout(function(){n.focusPreviousPage(e)},0)}},Object.defineProperty(t.prototype,"viewHeight",{get:function(){return this.scrollableElement.getScrollDimensions().height},set:function(e){this.scrollableElement.setScrollDimensions({height:e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollHeight",{set:function(e){e+=this.horizontalScrolling?10:0,this.scrollableElement.setScrollDimensions({scrollHeight:e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"viewWidth",{get:function(){return this.scrollableElement.getScrollDimensions().width},set:function(e){this.scrollableElement.setScrollDimensions({width:e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollWidth",{set:function(e){this.scrollableElement.setScrollDimensions({scrollWidth:e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollTop",{get:function(){return this.scrollableElement.getScrollPosition().scrollTop},set:function(e){var t=this.getContentHeight()+(this.horizontalScrolling?10:0);this.scrollableElement.setScrollDimensions({scrollHeight:t}),this.scrollableElement.setScrollPosition({scrollTop:e})},enumerable:!0,configurable:!0}),t.prototype.onClearingInput=function(e){var t=e.item;t&&(this.onRemoveItems(new mi.e(t.getNavigator(),function(e){return e&&e.id})),this.onRowsChanged())},t.prototype.onSetInput=function(e){this.context.cache.garbageCollect(),this.inputItem=new Of(this.context,e.item,this.wrapper)},t.prototype.onItemChildrenRefreshing=function(e){var n=e.item,i=this.items[n.id];if(i&&this.context.options.showLoading&&(i.loadingTimer=setTimeout(function(){i.loadingTimer=0,i.loading=!0},t.LOADING_DECORATION_DELAY)),!e.isNested){for(var o=[],r=n.getNavigator(),s=void 0;s=r.next();)o.push(s.id);this.refreshingPreviousChildrenIds[n.id]=o}},t.prototype.onItemChildrenRefreshed=function(e){var t=this,n=e.item,i=this.items[n.id];if(i&&(i.loadingTimer&&(clearTimeout(i.loadingTimer),i.loadingTimer=0),i.loading=!1),!e.isNested){for(var o=this.refreshingPreviousChildrenIds[n.id],r=[],s=n.getNavigator(),a=void 0;a=s.next();)r.push(a);var c=Math.abs(o.length-r.length)>1e3,l=[],u=!1;if(!c)u=(l=new lf.a({getLength:function(){return o.length},getElementAtIndex:function(e){return o[e]}},{getLength:function(){return r.length},getElementAtIndex:function(e){return r[e].id}},null).ComputeDiff(!1)).some(function(e){if(e.modifiedLength>0)for(var n=e.modifiedStart,i=e.modifiedStart+e.modifiedLength;n<i;n++)if(t.items.hasOwnProperty(r[n].id))return!0;return!1});if(!c&&!u&&l.length<50)for(var d=0,h=l;d<h.length;d++){var p=h[d];if(p.originalLength>0&&this.onRemoveItems(new mi.a(o,p.originalStart,p.originalStart+p.originalLength)),p.modifiedLength>0){var g=r[p.modifiedStart-1]||n;g=g.getDepth()>0?g:null,this.onInsertItems(new mi.a(r,p.modifiedStart,p.modifiedStart+p.modifiedLength),g?g.id:null)}}else(c||l.length)&&(this.onRemoveItems(new mi.a(o)),this.onInsertItems(new mi.a(r),n.getDepth()>0?n.id:null));(c||l.length)&&this.onRowsChanged()}},t.prototype.onItemRefresh=function(e){this.onItemsRefresh([e])},t.prototype.onItemsRefresh=function(e){var t=this;this.onRefreshItemSet(e.filter(function(e){return t.items.hasOwnProperty(e.id)})),this.onRowsChanged()},t.prototype.onItemExpanding=function(e){var t=this.items[e.item.id];t&&(t.expanded=!0)},t.prototype.onItemExpanded=function(e){var t=e.item,n=this.items[t.id];if(n){n.expanded=!0;var i=this.onInsertItems(t.getNavigator(),t.id)||0,o=this.scrollTop;n.top+n.height<=this.scrollTop&&(o+=i),this.onRowsChanged(o)}},t.prototype.onItemCollapsing=function(e){var t=e.item,n=this.items[t.id];n&&(n.expanded=!1,this.onRemoveItems(new mi.e(t.getNavigator(),function(e){return e&&e.id})),this.onRowsChanged())},t.prototype.onItemReveal=function(e){var t=e.item,n=e.relativeTop,i=this.items[t.id];if(i)if(null!==n){n=(n=n<0?0:n)>1?1:n;var o=i.height-this.viewHeight;this.scrollTop=o*n+i.top}else{var r=i.top+i.height,s=this.scrollTop+this.viewHeight;i.top<this.scrollTop?this.scrollTop=i.top:r>=s&&(this.scrollTop=r-this.viewHeight)}},t.prototype.onItemAddTrait=function(e){var t=e.item,n=e.trait,i=this.items[t.id];i&&i.addClass(n),"highlighted"===n&&(st.f(this.domNode,n),i&&(this.highlightedItemWasDraggable=!!i.draggable,i.draggable&&(i.draggable=!1)))},t.prototype.onItemRemoveTrait=function(e){var t=e.item,n=e.trait,i=this.items[t.id];i&&i.removeClass(n),"highlighted"===n&&(st.G(this.domNode,n),this.highlightedItemWasDraggable&&(i.draggable=!0),this.highlightedItemWasDraggable=!1)},t.prototype.onModelFocusChange=function(){var e=this.model&&this.model.getFocus();st.P(this.domNode,"no-focused-item",!e),e?this.domNode.setAttribute("aria-activedescendant",he.F(this.context.dataSource.getId(this.context.tree,e))):this.domNode.removeAttribute("aria-activedescendant")},t.prototype.onInsertItem=function(e){var t=this;e.onDragStart=function(n){t.onDragStart(e,n)},e.needsRender=!0,this.refreshViewItem(e),this.items[e.id]=e},t.prototype.onRefreshItem=function(e,t){void 0===t&&(t=!1),e.needsRender=e.needsRender||t,this.refreshViewItem(e)},t.prototype.onRemoveItem=function(e){this.removeItemFromDOM(e),e.dispose(),delete this.items[e.id]},t.prototype.refreshViewItem=function(e){e.render(),this.shouldBeRendered(e)?this.insertItemInDOM(e):this.removeItemFromDOM(e)},t.prototype.onClick=function(e){if(!this.lastPointerType||"mouse"===this.lastPointerType){var t=new df.b(e),n=this.getItemAround(t.target);n&&(me.j&&Date.now()-this.lastClickTimeStamp<300&&(t.detail=2),this.lastClickTimeStamp=Date.now(),this.context.controller.onClick(this.context.tree,n.model.getElement(),t))}},t.prototype.onMouseMiddleClick=function(e){if(this.context.controller.onMouseMiddleClick){var t=new df.b(e),n=this.getItemAround(t.target);n&&this.context.controller.onMouseMiddleClick(this.context.tree,n.model.getElement(),t)}},t.prototype.onMouseDown=function(e){if(this.didJustPressContextMenuKey=!1,this.context.controller.onMouseDown&&(!this.lastPointerType||"mouse"===this.lastPointerType)){var t=new df.b(e);if(!(t.ctrlKey&&_e.e&&_e.d)){var n=this.getItemAround(t.target);n&&this.context.controller.onMouseDown(this.context.tree,n.model.getElement(),t)}}},t.prototype.onMouseUp=function(e){if(this.context.controller.onMouseUp&&(!this.lastPointerType||"mouse"===this.lastPointerType)){var t=new df.b(e);if(!(t.ctrlKey&&_e.e&&_e.d)){var n=this.getItemAround(t.target);n&&this.context.controller.onMouseUp(this.context.tree,n.model.getElement(),t)}}},t.prototype.onTap=function(e){var t=this.getItemAround(e.initialTarget);t&&this.context.controller.onTap(this.context.tree,t.model.getElement(),e)},t.prototype.onTouchChange=function(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY},t.prototype.onContextMenu=function(e){var t,n;if(e instanceof KeyboardEvent||this.didJustPressContextMenuKey){this.didJustPressContextMenuKey=!1;var i=new hf.a(e),o=void 0;if(n=this.model.getFocus()){var r=this.context.dataSource.getId(this.context.tree,n),s=this.items[r];o=st.v(s.element)}else n=this.model.getInput(),o=st.v(this.inputItem.element);t=new yf(o.left+o.width,o.top,i)}else{var a=new df.b(e),c=this.getItemAround(a.target);if(!c)return;n=c.model.getElement(),t=new bf(a)}this.context.controller.onContextMenu(this.context.tree,n,t)},t.prototype.onKeyDown=function(e){var t=new hf.a(e);this.didJustPressContextMenuKey=58===t.keyCode||t.shiftKey&&68===t.keyCode,t.target&&t.target.tagName&&"input"===t.target.tagName.toLowerCase()||(this.didJustPressContextMenuKey&&(t.preventDefault(),t.stopPropagation()),this.context.controller.onKeyDown(this.context.tree,t))},t.prototype.onKeyUp=function(e){this.didJustPressContextMenuKey&&this.onContextMenu(e),this.didJustPressContextMenuKey=!1,this.context.controller.onKeyUp(this.context.tree,new hf.a(e))},t.prototype.onDragStart=function(e,t){if(!this.model.getHighlight()){var n,i=e.model.getElement(),o=this.model.getSelection();if(n=o.indexOf(i)>-1?o:[i],t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setData(wf.a.RESOURCES,JSON.stringify([e.uri])),t.dataTransfer.setDragImage){var r=void 0;r=this.context.dnd.getDragLabel?this.context.dnd.getDragLabel(this.context.tree,n):String(n.length);var s=document.createElement("div");s.className="monaco-tree-drag-image",s.textContent=r,document.body.appendChild(s),t.dataTransfer.setDragImage(s,-10,-10),setTimeout(function(){return document.body.removeChild(s)},0)}this.currentDragAndDropData=new pf(n),wf.c.CurrentDragAndDropData=new gf(n),this.context.dnd.onDragStart(this.context.tree,this.currentDragAndDropData,new df.a(t))}},t.prototype.setupDragAndDropScrollInterval=function(){var e=this,t=st.x(this.wrapper).top;this.dragAndDropScrollInterval||(this.dragAndDropScrollInterval=window.setInterval(function(){if(null!==e.dragAndDropMouseY){var n=e.dragAndDropMouseY-t,i=0,o=e.viewHeight-35;n<35?i=Math.max(-14,.2*(n-35)):n>o&&(i=Math.min(14,.2*(n-o))),e.scrollTop+=i}},10),this.cancelDragAndDropScrollTimeout(),this.dragAndDropScrollTimeout=window.setTimeout(function(){e.cancelDragAndDropScrollInterval(),e.dragAndDropScrollTimeout=null},1e3))},t.prototype.cancelDragAndDropScrollInterval=function(){this.dragAndDropScrollInterval&&(window.clearInterval(this.dragAndDropScrollInterval),this.dragAndDropScrollInterval=null),this.cancelDragAndDropScrollTimeout()},t.prototype.cancelDragAndDropScrollTimeout=function(){this.dragAndDropScrollTimeout&&(window.clearTimeout(this.dragAndDropScrollTimeout),this.dragAndDropScrollTimeout=null)},t.prototype.onDragOver=function(e){var t=this;e.preventDefault();var n,i=new df.a(e),o=this.getItemAround(i.target);if(!o||0===i.posx&&0===i.posy&&i.browserEvent.type===st.d.DRAG_LEAVE)return this.currentDropTarget&&(this.currentDropTargets.forEach(function(e){return e.dropTarget=!1}),this.currentDropTargets=[],this.currentDropDisposable.dispose()),this.cancelDragAndDropScrollInterval(),this.currentDropTarget=null,this.currentDropElement=null,this.dragAndDropMouseY=null,!1;if(this.setupDragAndDropScrollInterval(),this.dragAndDropMouseY=i.posy,!this.currentDragAndDropData)if(wf.c.CurrentDragAndDropData)this.currentDragAndDropData=wf.c.CurrentDragAndDropData;else{if(!i.dataTransfer.types)return!1;this.currentDragAndDropData=new ff}this.currentDragAndDropData.update(i.browserEvent.dataTransfer);var r,s=o.model;do{if(n=s?s.getElement():this.model.getInput(),!(r=this.context.dnd.onDragOver(this.context.tree,this.currentDragAndDropData,n,i))||1!==r.bubble)break;s=s&&s.parent}while(s);if(!s)return this.currentDropElement=null,!1;var a=r&&r.accept;a?(this.currentDropElement=s.getElement(),i.preventDefault(),i.dataTransfer.dropEffect=0===r.effect?"copy":"move"):this.currentDropElement=null;var c,l,u=s.id===this.inputItem.id?this.inputItem:this.items[s.id];if((this.shouldInvalidateDropReaction||this.currentDropTarget!==u||(c=this.currentDropElementReaction,l=r,!(!c&&!l||c&&l&&c.accept===l.accept&&c.bubble===l.bubble&&c.effect===l.effect)))&&(this.shouldInvalidateDropReaction=!1,this.currentDropTarget&&(this.currentDropTargets.forEach(function(e){return e.dropTarget=!1}),this.currentDropTargets=[],this.currentDropDisposable.dispose()),this.currentDropTarget=u,this.currentDropElementReaction=r,a)){if(this.currentDropTarget&&(this.currentDropTarget.dropTarget=!0,this.currentDropTargets.push(this.currentDropTarget)),0===r.bubble)for(var d=s.getNavigator(),h=void 0;h=d.next();)(o=this.items[h.id])&&(o.dropTarget=!0,this.currentDropTargets.push(o));if(r.autoExpand){var p=Object(H.j)(500);this.currentDropDisposable=z.f(function(){return p.cancel()}),p.then(function(){return t.context.tree.expand(t.currentDropElement)}).then(function(){return t.shouldInvalidateDropReaction=!0})}}return!0},t.prototype.onDrop=function(e){if(this.currentDropElement){var t=new df.a(e);t.preventDefault(),this.currentDragAndDropData.update(t.browserEvent.dataTransfer),this.context.dnd.drop(this.context.tree,this.currentDragAndDropData,this.currentDropElement,t),this.onDragEnd(e)}this.cancelDragAndDropScrollInterval()},t.prototype.onDragEnd=function(e){this.currentDropTarget&&(this.currentDropTargets.forEach(function(e){return e.dropTarget=!1}),this.currentDropTargets=[]),this.currentDropDisposable.dispose(),this.cancelDragAndDropScrollInterval(),this.currentDragAndDropData=null,wf.c.CurrentDragAndDropData=void 0,this.currentDropElement=null,this.currentDropTarget=null,this.dragAndDropMouseY=null},t.prototype.onFocus=function(){this.context.options.alwaysFocused||st.f(this.domNode,"focused"),this._onDOMFocus.fire()},t.prototype.onBlur=function(){this.context.options.alwaysFocused||st.G(this.domNode,"focused"),this.domNode.removeAttribute("aria-activedescendant"),this._onDOMBlur.fire()},t.prototype.onMsPointerDown=function(e){if(this.msGesture){var t=e.pointerType;t!==(e.MSPOINTER_TYPE_MOUSE||"mouse")?t===(e.MSPOINTER_TYPE_TOUCH||"touch")&&(this.lastPointerType="touch",e.stopPropagation(),e.preventDefault(),this.msGesture.addPointer(e.pointerId)):this.lastPointerType="mouse"}},t.prototype.onThrottledMsGestureChange=function(e){this.scrollTop-=e.translationY},t.prototype.onMsGestureTap=function(e){e.initialTarget=document.elementFromPoint(e.clientX,e.clientY),this.onTap(e)},t.prototype.insertItemInDOM=function(e){var t=null,n=this.itemAfter(e);n&&n.element&&(t=n.element),e.insertInDOM(this.rowsContainer,t)},t.prototype.removeItemFromDOM=function(e){e&&e.removeFromDOM()},t.prototype.shouldBeRendered=function(e){return e.top<this.lastRenderTop+this.lastRenderHeight&&e.top+e.height>this.lastRenderTop},t.prototype.getItemAround=function(e){var n=this.inputItem,i=e;do{if(i[t.BINDING]&&(n=i[t.BINDING]),i===this.wrapper||i===this.domNode)return n;if(i===this.scrollableElement.getDomNode()||i===document.body)return}while(i=i.parentElement)},t.prototype.releaseModel=function(){this.model&&(this.modelListeners=z.d(this.modelListeners),this.model=null)},t.prototype.dispose=function(){var t=this;this.scrollableElement.dispose(),this.releaseModel(),this.viewListeners=z.d(this.viewListeners),this._onDOMFocus.dispose(),this._onDOMBlur.dispose(),this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.items&&Object.keys(this.items).forEach(function(e){return t.items[e].removeFromDOM()}),this.context.cache&&this.context.cache.dispose(),e.prototype.dispose.call(this)},t.BINDING="monaco-tree-row",t.LOADING_DECORATION_DELAY=800,t.counter=0,t}(mf),Df=function(){return function(e,t,n){if(void 0===n&&(n={}),this.tree=e,this.configuration=t,this.options=n,!t.dataSource)throw new Error("You must provide a Data Source to the tree.");this.dataSource=t.dataSource,this.renderer=t.renderer,this.controller=t.controller||new Zg({clickBehavior:1,keyboardSupport:"boolean"!==typeof n.keyboardSupport||n.keyboardSupport}),this.dnd=t.dnd||new $g,this.filter=t.filter||new Yg,this.sorter=t.sorter,this.accessibilityProvider=t.accessibilityProvider||new Jg,this.styler=t.styler}}(),If={listFocusBackground:Vt.a.fromHex("#073655"),listActiveSelectionBackground:Vt.a.fromHex("#0E639C"),listActiveSelectionForeground:Vt.a.fromHex("#FFFFFF"),listFocusAndSelectionBackground:Vt.a.fromHex("#094771"),listFocusAndSelectionForeground:Vt.a.fromHex("#FFFFFF"),listInactiveSelectionBackground:Vt.a.fromHex("#3F3F46"),listHoverBackground:Vt.a.fromHex("#2A2D2E"),listDropBackground:Vt.a.fromHex("#383B3D")},Nf=function(){function e(e,t,n){void 0===n&&(n={}),this._onDidChangeFocus=new Ke.f,this.onDidChangeFocus=this._onDidChangeFocus.event,this._onDidChangeSelection=new Ke.f,this.onDidChangeSelection=this._onDidChangeSelection.event,this._onHighlightChange=new Ke.f,this._onDidExpandItem=new Ke.f,this._onDidCollapseItem=new Ke.f,this._onDispose=new Ke.a,this.onDidDispose=this._onDispose.event,this.container=e,Object(Bn.g)(n,If,!1),n.twistiePixels="number"===typeof n.twistiePixels?n.twistiePixels:32,n.showTwistie=!1!==n.showTwistie,n.indentPixels="number"===typeof n.indentPixels?n.indentPixels:12,n.alwaysFocused=!0===n.alwaysFocused,n.useShadows=!1!==n.useShadows,n.paddingOnRow=!1!==n.paddingOnRow,n.showLoading=!1!==n.showLoading,this.context=new Df(this,t,n),this.model=new cf(this.context),this.view=new kf(this.context,this.container),this.view.setModel(this.model),this._onDidChangeFocus.input=this.model.onDidFocus,this._onDidChangeSelection.input=this.model.onDidSelect,this._onHighlightChange.input=this.model.onDidHighlight,this._onDidExpandItem.input=this.model.onDidExpandItem,this._onDidCollapseItem.input=this.model.onDidCollapseItem}return e.prototype.style=function(e){this.view.applyStyles(e)},Object.defineProperty(e.prototype,"onDidFocus",{get:function(){return this.view&&this.view.onDOMFocus},enumerable:!0,configurable:!0}),e.prototype.getHTMLElement=function(){return this.view.getHTMLElement()},e.prototype.layout=function(e,t){this.view.layout(e,t)},e.prototype.domFocus=function(){this.view.focus()},e.prototype.isDOMFocused=function(){return this.view.isFocused()},e.prototype.domBlur=function(){this.view.blur()},e.prototype.setInput=function(e){return this.model.setInput(e)},e.prototype.getInput=function(){return this.model.getInput()},e.prototype.expand=function(e){return this.model.expand(e)},e.prototype.collapse=function(e,t){return void 0===t&&(t=!1),this.model.collapse(e,t)},e.prototype.toggleExpansion=function(e,t){return void 0===t&&(t=!1),this.model.toggleExpansion(e,t)},e.prototype.isExpanded=function(e){return this.model.isExpanded(e)},e.prototype.reveal=function(e,t){return void 0===t&&(t=null),this.model.reveal(e,t)},e.prototype.getHighlight=function(){return this.model.getHighlight()},e.prototype.clearHighlight=function(e){this.model.setHighlight(null,e)},e.prototype.setSelection=function(e,t){this.model.setSelection(e,t)},e.prototype.getSelection=function(){return this.model.getSelection()},e.prototype.clearSelection=function(e){this.model.setSelection([],e)},e.prototype.setFocus=function(e,t){this.model.setFocus(e,t)},e.prototype.getFocus=function(){return this.model.getFocus()},e.prototype.focusNext=function(e,t){this.model.focusNext(e,t)},e.prototype.focusPrevious=function(e,t){this.model.focusPrevious(e,t)},e.prototype.focusParent=function(e){this.model.focusParent(e)},e.prototype.focusFirstChild=function(e){this.model.focusFirstChild(e)},e.prototype.focusFirst=function(e,t){this.model.focusFirst(e,t)},e.prototype.focusNth=function(e,t){this.model.focusNth(e,t)},e.prototype.focusLast=function(e,t){this.model.focusLast(e,t)},e.prototype.focusNextPage=function(e){this.view.focusNextPage(e)},e.prototype.focusPreviousPage=function(e){this.view.focusPreviousPage(e)},e.prototype.clearFocus=function(e){this.model.setFocus(null,e)},e.prototype.dispose=function(){this._onDispose.fire(),null!==this.model&&(this.model.dispose(),this.model=null),null!==this.view&&(this.view.dispose(),this.view=null),this._onDidChangeFocus.dispose(),this._onDidChangeSelection.dispose(),this._onHighlightChange.dispose(),this._onDidExpandItem.dispose(),this._onDidCollapseItem.dispose(),this._onDispose.dispose()},e}(),Lf=(n(296),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}()),Mf={progressBarBackground:Vt.a.fromHex("#0E70C0")},Ef=function(e){function t(t,n){var i=e.call(this)||this;return i.options=n||Object.create(null),Object(Bn.g)(i.options,Mf,!1),i.workedVal=0,i.progressBarBackground=i.options.progressBarBackground,i._register(i.showDelayedScheduler=new H.d(function(){return Object(st.O)(i.element)},0)),i.create(t),i}return Lf(t,e),t.prototype.create=function(e){this.element=document.createElement("div"),Object(st.f)(this.element,"monaco-progress-container"),e.appendChild(this.element),this.bit=document.createElement("div"),Object(st.f)(this.bit,"progress-bit"),this.element.appendChild(this.bit),this.applyStyles()},t.prototype.off=function(){this.bit.style.width="inherit",this.bit.style.opacity="1",Object(st.H)(this.element,"active","infinite","discrete"),this.workedVal=0,this.totalWork=void 0},t.prototype.stop=function(){return this.doDone(!1)},t.prototype.doDone=function(e){var t=this;return Object(st.f)(this.element,"done"),Object(st.A)(this.element,"infinite")?(this.bit.style.opacity="0",e?setTimeout(function(){return t.off()},200):this.off()):(this.bit.style.width="inherit",e?setTimeout(function(){return t.off()},200):this.off()),this},t.prototype.hide=function(){Object(st.B)(this.element),this.showDelayedScheduler.cancel()},t.prototype.style=function(e){this.progressBarBackground=e.progressBarBackground,this.applyStyles()},t.prototype.applyStyles=function(){if(this.bit){var e=this.progressBarBackground?this.progressBarBackground.toString():null;this.bit.style.backgroundColor=e}},t}(z.a),Pf=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Rf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Pf(t,e),t.prototype.onContextMenu=function(t,n,i){return _e.d?this.onLeftClick(t,n,i):e.prototype.onContextMenu.call(this,t,n,i)},t}(Zg),Tf={background:Vt.a.fromHex("#1E1E1E"),foreground:Vt.a.fromHex("#CCCCCC"),pickerGroupForeground:Vt.a.fromHex("#0097FB"),pickerGroupBorder:Vt.a.fromHex("#3F3F46"),widgetShadow:Vt.a.fromHex("#000000"),progressBarBackground:Vt.a.fromHex("#0E70C0")},Af=V.a("quickOpenAriaLabel","Quick picker. Type to narrow down results."),jf=function(e){function t(t,n,i){var o=e.call(this)||this;return o.isDisposed=!1,o.container=t,o.callbacks=n,o.options=i,o.styles=i||Object.create(null),Object(Bn.g)(o.styles,Tf,!1),o.model=null,o}return Pf(t,e),t.prototype.getModel=function(){return this.model},t.prototype.create=function(){var e=this;this.element=document.createElement("div"),st.f(this.element,"monaco-quick-open-widget"),this.container.appendChild(this.element),this._register(st.h(this.element,st.d.CONTEXT_MENU,function(e){return st.c.stop(e,!0)})),this._register(st.h(this.element,st.d.FOCUS,function(t){return e.gainingFocus()},!0)),this._register(st.h(this.element,st.d.BLUR,function(t){return e.loosingFocus(t)},!0)),this._register(st.h(this.element,st.d.KEY_DOWN,function(t){var n=new hf.a(t);if(9===n.keyCode)st.c.stop(t,!0),e.hide(2);else if(2===n.keyCode&&!n.altKey&&!n.ctrlKey&&!n.metaKey){var i=t.currentTarget.querySelectorAll("input, .monaco-tree, .monaco-tree-row.focused .action-label.icon");n.shiftKey&&n.target===i[0]?(st.c.stop(t,!0),i[i.length-1].focus()):n.shiftKey||n.target!==i[i.length-1]||(st.c.stop(t,!0),i[0].focus())}})),this.progressBar=this._register(new Ef(this.element,{progressBarBackground:this.styles.progressBarBackground})),this.progressBar.hide(),this.inputContainer=document.createElement("div"),st.f(this.inputContainer,"quick-open-input"),this.element.appendChild(this.inputContainer),this.inputBox=this._register(new wi(this.inputContainer,void 0,{placeholder:this.options.inputPlaceHolder||"",ariaLabel:Af,inputBackground:this.styles.inputBackground,inputForeground:this.styles.inputForeground,inputBorder:this.styles.inputBorder,inputValidationInfoBackground:this.styles.inputValidationInfoBackground,inputValidationInfoForeground:this.styles.inputValidationInfoForeground,inputValidationInfoBorder:this.styles.inputValidationInfoBorder,inputValidationWarningBackground:this.styles.inputValidationWarningBackground,inputValidationWarningForeground:this.styles.inputValidationWarningForeground,inputValidationWarningBorder:this.styles.inputValidationWarningBorder,inputValidationErrorBackground:this.styles.inputValidationErrorBackground,inputValidationErrorForeground:this.styles.inputValidationErrorForeground,inputValidationErrorBorder:this.styles.inputValidationErrorBorder})),this.inputElement=this.inputBox.inputElement,this.inputElement.setAttribute("role","combobox"),this.inputElement.setAttribute("aria-haspopup","false"),this.inputElement.setAttribute("aria-autocomplete","list"),this._register(st.h(this.inputBox.inputElement,st.d.INPUT,function(t){return e.onType()})),this._register(st.h(this.inputBox.inputElement,st.d.KEY_DOWN,function(t){var n=new hf.a(t),i=e.shouldOpenInBackground(n);if(2!==n.keyCode)if(18===n.keyCode||16===n.keyCode||12===n.keyCode||11===n.keyCode)st.c.stop(t,!0),e.navigateInTree(n.keyCode,n.shiftKey),e.inputBox.inputElement.selectionStart===e.inputBox.inputElement.selectionEnd&&(e.inputBox.inputElement.selectionStart=e.inputBox.value.length);else if(3===n.keyCode||i){st.c.stop(t,!0);var o=e.tree.getFocus();o&&e.elementSelected(o,t,i?2:1)}})),this.resultCount=document.createElement("div"),st.f(this.resultCount,"quick-open-result-count"),this.resultCount.setAttribute("aria-live","polite"),this.resultCount.setAttribute("aria-atomic","true"),this.element.appendChild(this.resultCount),this.treeContainer=document.createElement("div"),st.f(this.treeContainer,"quick-open-tree"),this.element.appendChild(this.treeContainer);var t=this.options.treeCreator||function(e,t,n){return new Nf(e,t,n)};return this.tree=this._register(t(this.treeContainer,{dataSource:new zg(this),controller:new Rf({clickBehavior:1,keyboardSupport:this.options.keyboardSupport}),renderer:this.renderer=new qg(this,this.styles),filter:new Kg(this),accessibilityProvider:new Ug(this)},{twistiePixels:11,indentPixels:0,alwaysFocused:!0,verticalScrollMode:3,horizontalScrollMode:2,ariaLabel:V.a("treeAriaLabel","Quick Picker"),keyboardSupport:this.options.keyboardSupport,preventRootFocus:!1})),this.treeElement=this.tree.getHTMLElement(),this._register(this.tree.onDidChangeFocus(function(t){e.elementFocused(t.focus,t)})),this._register(this.tree.onDidChangeSelection(function(t){if(t.selection&&t.selection.length>0){var n=t.payload&&t.payload.originalEvent instanceof df.b?t.payload.originalEvent:void 0,i=!!n&&e.shouldOpenInBackground(n);e.elementSelected(t.selection[0],t,i?2:1)}})),this._register(st.h(this.treeContainer,st.d.KEY_DOWN,function(t){var n=new hf.a(t);e.quickNavigateConfiguration&&(18!==n.keyCode&&16!==n.keyCode&&12!==n.keyCode&&11!==n.keyCode||(st.c.stop(t,!0),e.navigateInTree(n.keyCode)))})),this._register(st.h(this.treeContainer,st.d.KEY_UP,function(t){var n=new hf.a(t),i=n.keyCode;if(e.quickNavigateConfiguration){var o=e.quickNavigateConfiguration.keybindings;if(3===i||o.some(function(e){var t=e.getParts(),o=t[0];return!t[1]&&(o.shiftKey&&4===i?!(n.ctrlKey||n.altKey||n.metaKey):!(!o.altKey||6!==i)||(!(!o.ctrlKey||5!==i)||!(!o.metaKey||57!==i)))})){var r=e.tree.getFocus();r&&e.elementSelected(r,t)}}})),this.layoutDimensions&&this.layout(this.layoutDimensions),this.applyStyles(),this._register(st.h(this.treeContainer,st.d.KEY_DOWN,function(t){var n=new hf.a(t);e.quickNavigateConfiguration||18!==n.keyCode&&16!==n.keyCode&&12!==n.keyCode&&11!==n.keyCode||(st.c.stop(t,!0),e.navigateInTree(n.keyCode,n.shiftKey),e.treeElement.focus())})),this.element},t.prototype.style=function(e){this.styles=e,this.applyStyles()},t.prototype.applyStyles=function(){if(this.element){var e=this.styles.foreground?this.styles.foreground.toString():null,t=this.styles.background?this.styles.background.toString():null,n=this.styles.borderColor?this.styles.borderColor.toString():null,i=this.styles.widgetShadow?this.styles.widgetShadow.toString():null;this.element.style.color=e,this.element.style.backgroundColor=t,this.element.style.borderColor=n,this.element.style.borderWidth=n?"1px":null,this.element.style.borderStyle=n?"solid":null,this.element.style.boxShadow=i?"0 5px 8px "+i:null}this.progressBar&&this.progressBar.style({progressBarBackground:this.styles.progressBarBackground}),this.inputBox&&this.inputBox.style({inputBackground:this.styles.inputBackground,inputForeground:this.styles.inputForeground,inputBorder:this.styles.inputBorder,inputValidationInfoBackground:this.styles.inputValidationInfoBackground,inputValidationInfoForeground:this.styles.inputValidationInfoForeground,inputValidationInfoBorder:this.styles.inputValidationInfoBorder,inputValidationWarningBackground:this.styles.inputValidationWarningBackground,inputValidationWarningForeground:this.styles.inputValidationWarningForeground,inputValidationWarningBorder:this.styles.inputValidationWarningBorder,inputValidationErrorBackground:this.styles.inputValidationErrorBackground,inputValidationErrorForeground:this.styles.inputValidationErrorForeground,inputValidationErrorBorder:this.styles.inputValidationErrorBorder}),this.tree&&!this.options.treeCreator&&this.tree.style(this.styles),this.renderer&&this.renderer.updateStyles(this.styles)},t.prototype.shouldOpenInBackground=function(e){if(e instanceof hf.a){if(17!==e.keyCode)return!1;if(e.metaKey||e.ctrlKey||e.shiftKey||e.altKey)return!1;var t=this.inputBox.inputElement;return t.selectionEnd===this.inputBox.value.length&&t.selectionStart===t.selectionEnd}return e.middleButton},t.prototype.onType=function(){var e=this.inputBox.value;this.helpText&&(e?st.B(this.helpText):st.O(this.helpText)),this.callbacks.onType(e)},t.prototype.navigateInTree=function(e,t){var n=this.tree.getInput(),i=n?n.entries:[],o=this.tree.getFocus();switch(e){case 18:this.tree.focusNext();break;case 16:this.tree.focusPrevious();break;case 12:this.tree.focusNextPage();break;case 11:this.tree.focusPreviousPage();break;case 2:t?this.tree.focusPrevious():this.tree.focusNext()}var r=this.tree.getFocus();i.length>1&&o===r&&(16===e||2===e&&t?this.tree.focusLast():(18===e||2===e&&!t)&&this.tree.focusFirst()),(r=this.tree.getFocus())&&this.tree.reveal(r)},t.prototype.elementFocused=function(e,t){if(e&&this.isVisible()){var n=this.treeElement.getAttribute("aria-activedescendant");n?this.inputElement.setAttribute("aria-activedescendant",n):this.inputElement.removeAttribute("aria-activedescendant");var i={event:t,keymods:this.extractKeyMods(t),quickNavigateConfiguration:this.quickNavigateConfiguration};this.model.runner.run(e,0,i)}},t.prototype.elementSelected=function(e,t,n){var i=!0;if(this.isVisible()){var o=n||1,r={event:t,keymods:this.extractKeyMods(t),quickNavigateConfiguration:this.quickNavigateConfiguration};i=this.model.runner.run(e,o,r)}i&&this.hide(0)},t.prototype.extractKeyMods=function(e){return{ctrlCmd:e&&(e.ctrlKey||e.metaKey||e.payload&&e.payload.originalEvent&&(e.payload.originalEvent.ctrlKey||e.payload.originalEvent.metaKey)),alt:e&&(e.altKey||e.payload&&e.payload.originalEvent&&e.payload.originalEvent.altKey)}},t.prototype.show=function(e,t){this.visible=!0,this.isLoosingFocus=!1,this.quickNavigateConfiguration=t?t.quickNavigateConfiguration:void 0,this.quickNavigateConfiguration?(st.B(this.inputContainer),st.O(this.element),this.tree.domFocus()):(st.O(this.inputContainer),st.O(this.element),this.inputBox.focus()),this.helpText&&(this.quickNavigateConfiguration||Oo.h(e)?st.B(this.helpText):st.O(this.helpText)),Oo.h(e)?this.doShowWithPrefix(e):(t&&t.value&&this.restoreLastInput(t.value),this.doShowWithInput(e,t&&t.autoFocus?t.autoFocus:{})),t&&t.inputSelection&&!this.quickNavigateConfiguration&&this.inputBox.select(t.inputSelection),this.callbacks.onShow&&this.callbacks.onShow()},t.prototype.restoreLastInput=function(e){this.inputBox.value=e,this.inputBox.select(),this.callbacks.onType(e)},t.prototype.doShowWithPrefix=function(e){this.inputBox.value=e,this.callbacks.onType(e)},t.prototype.doShowWithInput=function(e,t){this.setInput(e,t)},t.prototype.setInputAndLayout=function(e,t){var n=this;this.treeContainer.style.height=this.getHeight(e)+"px",this.tree.setInput(null).then(function(){return n.model=e,n.inputElement.setAttribute("aria-haspopup",String(e&&e.entries&&e.entries.length>0)),n.tree.setInput(e)}).then(function(){n.tree.layout();var i=e?e.entries.filter(function(t){return n.isElementVisible(e,t)}):[];n.updateResultCount(i.length),i.length&&n.autoFocus(e,i,t)})},t.prototype.isElementVisible=function(e,t){return!e.filter||e.filter.isVisible(t)},t.prototype.autoFocus=function(e,t,n){if(void 0===n&&(n={}),n.autoFocusPrefixMatch){for(var i=void 0,o=void 0,r=n.autoFocusPrefixMatch,s=r.toLowerCase(),a=0,c=t;a<c.length;a++){var l=c[a],u=e.dataSource.getLabel(l)||"";if(i||0!==u.indexOf(r)?o||0!==u.toLowerCase().indexOf(s)||(o=l):i=l,i&&o)break}var d=i||o;if(d)return this.tree.setFocus(d),void this.tree.reveal(d,.5)}n.autoFocusFirstEntry?(this.tree.focusFirst(),this.tree.reveal(this.tree.getFocus())):"number"===typeof n.autoFocusIndex?t.length>n.autoFocusIndex&&(this.tree.focusNth(n.autoFocusIndex),this.tree.reveal(this.tree.getFocus())):n.autoFocusSecondEntry?t.length>1&&this.tree.focusNth(1):n.autoFocusLastEntry&&t.length>1&&this.tree.focusLast()},t.prototype.getHeight=function(e){var n=this,i=e.renderer;if(!e){var o=i.getHeight(null);return this.options.minItemsToShow?this.options.minItemsToShow*o:0}var r,s=0;this.layoutDimensions&&this.layoutDimensions.height&&(r=.4*(this.layoutDimensions.height-50)),(!r||r>t.MAX_ITEMS_HEIGHT)&&(r=t.MAX_ITEMS_HEIGHT);for(var a=e.entries.filter(function(t){return n.isElementVisible(e,t)}),c=this.options.maxItemsToShow||a.length,l=0;l<c&&l<a.length;l++){var u=i.getHeight(a[l]);if(!(s+u<=r))break;s+=u}return s},t.prototype.updateResultCount=function(e){this.resultCount.textContent=V.a({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results",e)},t.prototype.hide=function(e){this.isVisible()&&(this.visible=!1,st.B(this.element),this.element.blur(),this.inputBox.value="",this.tree.setInput(null),this.inputElement.setAttribute("aria-haspopup","false"),this.treeContainer.style.height=(this.options.minItemsToShow?22*this.options.minItemsToShow:0)+"px",this.progressBar.stop().hide(),this.tree.isDOMFocused()?this.tree.domBlur():this.inputBox.hasFocus()&&this.inputBox.blur(),0===e?this.callbacks.onOk():this.callbacks.onCancel(),this.callbacks.onHide&&this.callbacks.onHide(e))},t.prototype.setInput=function(e,t,n){this.isVisible()&&(this.getInput()&&this.onInputChanging(),this.setInputAndLayout(e,t),this.inputBox&&this.inputBox.setAriaLabel(n||Af))},t.prototype.onInputChanging=function(){var e=this;this.inputChangingTimeoutHandle&&(clearTimeout(this.inputChangingTimeoutHandle),this.inputChangingTimeoutHandle=null),st.f(this.element,"content-changing"),this.inputChangingTimeoutHandle=setTimeout(function(){st.G(e.element,"content-changing")},500)},t.prototype.getInput=function(){return this.tree.getInput()},t.prototype.isVisible=function(){return this.visible},t.prototype.layout=function(e){this.layoutDimensions=e;var n=Math.min(.62*this.layoutDimensions.width,t.MAX_WIDTH);this.element&&(this.element.style.width=n+"px",this.element.style.marginLeft="-"+n/2+"px",this.inputContainer.style.width=n-12+"px")},t.prototype.gainingFocus=function(){this.isLoosingFocus=!1},t.prototype.loosingFocus=function(e){var t=this;if(this.isVisible()){var n=e.relatedTarget;!this.quickNavigateConfiguration&&st.C(n,this.element)||(this.isLoosingFocus=!0,setTimeout(function(){t.isLoosingFocus&&!t.isDisposed&&(t.callbacks.onFocusLost&&t.callbacks.onFocusLost()||t.hide(1))},0))}},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.isDisposed=!0},t.MAX_WIDTH=600,t.MAX_ITEMS_HEIGHT=440,t}(z.a),Ff=function(){function e(e,t,n,i,o,r){this.codeEditor=e,this.themeService=r,this.create(t,n,i,o)}return e.prototype.create=function(e,t,n,i){this.domNode=document.createElement("div"),this.quickOpenWidget=new jf(this.domNode,{onOk:e,onCancel:t,onType:n},{inputPlaceHolder:void 0,inputAriaLabel:i.inputAriaLabel,keyboardSupport:!0}),this.styler=Object(ys.d)(this.quickOpenWidget,this.themeService,{pickerGroupForeground:J.K}),this.quickOpenWidget.create(),this.codeEditor.addOverlayWidget(this)},e.prototype.setInput=function(e,t){this.quickOpenWidget.setInput(e,t)},e.prototype.getId=function(){return e.ID},e.prototype.getDomNode=function(){return this.domNode},e.prototype.destroy=function(){this.codeEditor.removeOverlayWidget(this),this.quickOpenWidget.dispose(),this.styler.dispose()},e.prototype.show=function(e){this.visible=!0;var t=this.codeEditor.getLayoutInfo();t&&this.quickOpenWidget.layout(new st.b(t.width,t.height)),this.quickOpenWidget.show(e),this.codeEditor.layoutOverlayWidget(this)},e.prototype.getPosition=function(){return this.visible?{preference:2}:null},e.ID="editor.contrib.quickOpenEditorWidget",e}(),Bf=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Wf=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},Vf=function(e,t){return function(n,i){t(n,i,e)}},Hf=function(){function e(e,t){this.themeService=t,this.editor=e}return e.get=function(t){return t.getContribution(e.ID)},e.prototype.getId=function(){return e.ID},e.prototype.dispose=function(){this.widget&&(this.widget.destroy(),this.widget=null)},e.prototype.run=function(e){var t=this;this.widget&&(this.widget.destroy(),this.widget=null);var n=function(e){t.clearDecorations(),e&&t.lastKnownEditorSelection&&(t.editor.setSelection(t.lastKnownEditorSelection),t.editor.revealRangeInCenterIfOutsideViewport(t.lastKnownEditorSelection,0)),t.lastKnownEditorSelection=null,document.activeElement!==document.body&&e||t.editor.focus()};this.widget=new Ff(this.editor,function(){return n(!1)},function(){return n(!0)},function(n){t.widget.setInput(e.getModel(n),e.getAutoFocus(n))},{inputAriaLabel:e.inputAriaLabel},this.themeService),this.lastKnownEditorSelection||(this.lastKnownEditorSelection=this.editor.getSelection()),this.widget.show("")},e.prototype.decorateLine=function(t,n){var i=[];this.rangeHighlightDecorationId&&(i.push(this.rangeHighlightDecorationId),this.rangeHighlightDecorationId=null);var o=[{range:t,options:e._RANGE_HIGHLIGHT_DECORATION}],r=n.deltaDecorations(i,o);this.rangeHighlightDecorationId=r[0]},e.prototype.clearDecorations=function(){this.rangeHighlightDecorationId&&(this.editor.deltaDecorations([this.rangeHighlightDecorationId],[]),this.rangeHighlightDecorationId=null)},e.ID="editor.controller.quickOpenController",e._RANGE_HIGHLIGHT_DECORATION=$.a.register({className:"rangeHighlight",isWholeLine:!0}),e=Wf([Vf(1,X.c)],e)}(),zf=function(e){function t(t,n){var i=e.call(this,n)||this;return i._inputAriaLabel=t,i}return Bf(t,e),t.prototype.getController=function(e){return Hf.get(e)},t.prototype._show=function(e,t){e.run({inputAriaLabel:this._inputAriaLabel,getModel:function(e){return t.getModel(e)},getAutoFocus:function(e){return t.getAutoFocus(e)}})},t}(U.b);Object(U.h)(Hf);var Uf=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Kf=function(e){function t(t,n,i){var o=e.call(this)||this;return o.editor=n,o.decorator=i,o.parseResult=o.parseInput(t),o}return Uf(t,e),t.prototype.parseInput=function(e){var t,n,i=e.split(",").map(function(e){return parseInt(e,10)}).filter(function(e){return!isNaN(e)});if(t=0===i.length?new K.a(-1,-1):1===i.length?new K.a(i[0],1):new K.a(i[0],i[1]),Object(vr.a)(this.editor))n=this.editor.getModel();else{var o=this.editor.getModel();n=o?o.modified:null}var r=!!n&&n.validatePosition(t).equals(t);return{position:t,isValid:r,label:r?t.column&&t.column>1?he.p(pg.b.gotoLineLabelValidLineAndColumn,t.lineNumber,t.column):he.p(pg.b.gotoLineLabelValidLine,t.lineNumber):t.lineNumber<1||t.lineNumber>(n?n.getLineCount():0)?he.p(pg.b.gotoLineLabelEmptyWithLineLimit,n?n.getLineCount():0):he.p(pg.b.gotoLineLabelEmptyWithLineAndColumnLimit,n?n.getLineMaxColumn(t.lineNumber):0)}},t.prototype.getLabel=function(){return this.parseResult.label},t.prototype.getAriaLabel=function(){var e=this.editor.getPosition(),t=e?e.lineNumber:0;return he.p(pg.b.gotoLineAriaLabel,t,this.parseResult.label)},t.prototype.run=function(e,t){return 1===e?this.runOpen():this.runPreview()},t.prototype.runOpen=function(){if(!this.parseResult.isValid)return!1;var e=this.toSelection();return this.editor.setSelection(e),this.editor.revealRangeInCenter(e,0),this.editor.focus(),!0},t.prototype.runPreview=function(){if(!this.parseResult.isValid)return this.decorator.clearDecorations(),!1;var e=this.toSelection();return this.editor.revealRangeInCenter(e,0),this.decorator.decorateLine(e,this.editor),!1},t.prototype.toSelection=function(){return new se.a(this.parseResult.position.lineNumber,this.parseResult.position.column,this.parseResult.position.lineNumber,this.parseResult.position.column)},t}(Fg),qf=function(e){function t(){return e.call(this,pg.b.gotoLineActionInput,{id:"editor.action.gotoLine",label:pg.b.gotoLineActionLabel,alias:"Go to Line...",precondition:null,kbOpts:{kbExpr:G.a.focus,primary:2085,mac:{primary:293},weight:100}})||this}return Uf(t,e),t.prototype.run=function(e,t){var n=this;this._show(this.getController(t),{getModel:function(e){return new Hg([new Kf(e,t,n.getController(t))])},getAutoFocus:function(e){return{autoFocusFirstEntry:e.length>0}}})},t}(zf);Object(U.f)(qf);var Gf=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Zf=function(e){function t(t,n,i,o,r){var s=e.call(this)||this;return s.key=t,s.keyAriaLabel=n,s.setHighlights(i),s.action=o,s.editor=r,s}return Gf(t,e),t.prototype.getLabel=function(){return this.action.label},t.prototype.getAriaLabel=function(){return this.keyAriaLabel?he.p(pg.d.ariaLabelEntryWithKey,this.getLabel(),this.keyAriaLabel):he.p(pg.d.ariaLabelEntry,this.getLabel())},t.prototype.getGroupLabel=function(){return this.key},t.prototype.run=function(e,t){var n=this;return 1===e&&(setTimeout(function(){n.editor.focus();try{(n.action.run()||Promise.resolve()).then(void 0,$e.e)}catch(e){Object($e.e)(e)}},50),!0)},t}(Bg),$f=function(e){function t(){return e.call(this,pg.d.quickCommandActionInput,{id:"editor.action.quickCommand",label:pg.d.quickCommandActionLabel,alias:"Command Palette",precondition:null,kbOpts:{kbExpr:G.a.focus,primary:me.j?571:59,weight:100},menuOpts:{group:"z_commands",order:1}})||this}return Gf(t,e),t.prototype.run=function(e,t){var n=this,i=e.get(He.a);this._show(this.getController(t),{getModel:function(e){return new Hg(n._editorActionsToEntries(i,t,e))},getAutoFocus:function(e){return{autoFocusFirstEntry:!0,autoFocusPrefixMatch:e}}})},t.prototype._sort=function(e,t){var n=(e.getLabel()||"").toLowerCase(),i=(t.getLabel()||"").toLowerCase();return n.localeCompare(i)},t.prototype._editorActionsToEntries=function(e,t,n){for(var i=[],o=0,r=t.getSupportedActions();o<r.length;o++){var s=r[o],a=e.lookupKeybinding(s.id);if(s.label){var c=Object(Ns.f)(n,s.label);c&&i.push(new Zf(a&&a.getLabel()||"",a&&a.getAriaLabel()||"",c,s,t))}}return i=i.sort(this._sort)},t}(zf);Object(U.f)($f);n(297);function Yf(e,t,n){var i=[],o=qe.k.all(e).map(function(t){return Promise.resolve(t.provideDocumentSymbols(e,n)).then(function(e){Array.isArray(e)&&i.push.apply(i,e)},function(e){Object($e.f)(e)})});return Promise.all(o).then(function(){var e=[];return n.isCancellationRequested?e:(t?function e(t,n,i){for(var o=0,r=n;o<r.length;o++){var s=r[o];t.push({kind:s.kind,name:s.name,detail:s.detail,containerName:s.containerName||i,range:s.range,selectionRange:s.selectionRange,children:void 0}),s.children&&e(t,s.children,s.name)}}(e,i,""):e=i,e.sort(Jf),e)})}function Jf(e,t){return se.a.compareRangesUsingStarts(e.range,t.range)}Object(U.j)("_executeDocumentSymbolProvider",function(e,t){var n=t.resource;if(!(n instanceof Ye.a))throw Object($e.b)("resource");var i=e.get(Je.a).getModel(n);return i?Yf(i,!1,Ze.a.None):e.get(as.a).createModelReference(n).then(function(e){return new Promise(function(t,n){try{t(Yf(e.object.textEditorModel,!1,Ze.a.None))}catch(i){n(i)}}).finally(function(){e.dispose()})})});var Xf=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Qf=function(e){function t(t,n,i,o,r,s,a){var c=e.call(this)||this;return c.name=t,c.type=n,c.description=i,c.range=o,c.setHighlights(r),c.editor=s,c.decorator=a,c}return Xf(t,e),t.prototype.getLabel=function(){return this.name},t.prototype.getAriaLabel=function(){return he.p(pg.e.entryAriaLabel,this.name)},t.prototype.getIcon=function(){return this.type},t.prototype.getDescription=function(){return this.description},t.prototype.getType=function(){return this.type},t.prototype.getRange=function(){return this.range},t.prototype.run=function(e,t){return 1===e?this.runOpen(t):this.runPreview()},t.prototype.runOpen=function(e){var t=this.toSelection();return this.editor.setSelection(t),this.editor.revealRangeInCenter(t,0),this.editor.focus(),!0},t.prototype.runPreview=function(){var e=this.toSelection();return this.editor.revealRangeInCenter(e,0),this.decorator.decorateLine(this.range,this.editor),!1},t.prototype.toSelection=function(){return new se.a(this.range.startLineNumber,this.range.startColumn||1,this.range.startLineNumber,this.range.startColumn||1)},t}(Bg),em=function(e){function t(){return e.call(this,pg.e.quickOutlineActionInput,{id:"editor.action.quickOutline",label:pg.e.quickOutlineActionLabel,alias:"Go to Symbol...",precondition:G.a.hasDocumentSymbolProvider,kbOpts:{kbExpr:G.a.focus,primary:3117,weight:100},menuOpts:{group:"navigation",order:3}})||this}return Xf(t,e),t.prototype.run=function(e,t){var n=this;if(t.hasModel()){var i=t.getModel();if(qe.k.has(i))return Yf(i,!0,Ze.a.None).then(function(e){0!==e.length&&n._run(t,e)})}},t.prototype._run=function(e,t){var n=this;this._show(this.getController(e),{getModel:function(i){return new Hg(n.toQuickOpenEntries(e,t,i))},getAutoFocus:function(e){return 0===e.indexOf(":")&&(e=e.substr(":".length)),{autoFocusPrefixMatch:e,autoFocusFirstEntry:!!e}}})},t.prototype.symbolEntry=function(e,t,n,i,o,r,s){return new Qf(e,t,n,se.a.lift(i),o,r,s)},t.prototype.toQuickOpenEntries=function(e,t,n){var i=this.getController(e),o=[],r=n;0===n.indexOf(":")&&(r=r.substr(":".length));for(var s=0,a=t;s<a.length;s++){var c=a[s],l=he.J(c.name),u=Object(Ns.f)(r,l);if(u){var d=null;c.containerName&&(d=c.containerName),o.push(this.symbolEntry(l,Object(qe.E)(c.kind),d,c.range,u,e,i))}}if(n&&(o=0===n.indexOf(":")?o.sort(this.sortScoped.bind(this,n.toLowerCase())):o.sort(this.sortNormal.bind(this,n.toLowerCase()))),o.length>0&&0===n.indexOf(":")){for(var h=null,p=null,g=0,f=0;f<o.length;f++){var m=o[f];h!==m.getType()?(p&&p.setGroupLabel(this.typeToLabel(h||"",g)),h=m.getType(),p=m,g=1,m.setShowBorder(f>0)):g++}p&&p.setGroupLabel(this.typeToLabel(h||"",g))}else o.length>0&&o[0].setGroupLabel(he.p(pg.e._symbols_,o.length));return o},t.prototype.typeToLabel=function(e,t){switch(e){case"module":return he.p(pg.e._modules_,t);case"class":return he.p(pg.e._class_,t);case"interface":return he.p(pg.e._interface_,t);case"method":return he.p(pg.e._method_,t);case"function":return he.p(pg.e._function_,t);case"property":return he.p(pg.e._property_,t);case"variable":return he.p(pg.e._variable_,t);case"var":return he.p(pg.e._variable2_,t);case"constructor":return he.p(pg.e._constructor_,t);case"call":return he.p(pg.e._call_,t)}return e},t.prototype.sortNormal=function(e,t,n){var i=t.getLabel().toLowerCase(),o=n.getLabel().toLowerCase(),r=i.localeCompare(o);if(0!==r)return r;var s=t.getRange(),a=n.getRange();return s.startLineNumber-a.startLineNumber},t.prototype.sortScoped=function(e,t,n){e=e.substr(":".length);var i=t.getType(),o=n.getType(),r=i.localeCompare(o);if(0!==r)return r;if(e){var s=t.getLabel().toLowerCase(),a=n.getLabel().toLowerCase(),c=s.localeCompare(a);if(0!==c)return c}var l=t.getRange(),u=n.getRange();return l.startLineNumber-u.startLineNumber},t}(zf);Object(U.f)(em);var tm=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),nm=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},im=function(e,t){return function(n,i){t(n,i,e)}},om=function(e){function t(t,n,i,o,r,s,a){return e.call(this,!0,t,n,i,o,r,s,a)||this}return tm(t,e),t=nm([im(1,Pe.e),im(2,be.a),im(3,At.a),im(4,oo.a),im(5,so.a),im(6,qt.a)],t)}(Ca);Object(U.h)(om);var rm=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),sm=function(e){function t(){var t=e.call(this,{id:"editor.action.toggleHighContrast",label:pg.h.toggleHighContrast,alias:"Toggle High Contrast Theme",precondition:null})||this;return t._originalThemeName=null,t}return rm(t,e),t.prototype.run=function(e,t){var n=e.get(kg.a);this._originalThemeName?(n.setTheme(this._originalThemeName),this._originalThemeName=null):(this._originalThemeName=n.getTheme().themeName,n.setTheme("hc-black"))},t}(U.b);Object(U.f)(sm),n.d(t,"CancellationTokenSource",function(){return c.CancellationTokenSource}),n.d(t,"Emitter",function(){return c.Emitter}),n.d(t,"KeyCode",function(){return c.KeyCode}),n.d(t,"KeyMod",function(){return c.KeyMod}),n.d(t,"Position",function(){return c.Position}),n.d(t,"Range",function(){return c.Range}),n.d(t,"Selection",function(){return c.Selection}),n.d(t,"SelectionDirection",function(){return c.SelectionDirection}),n.d(t,"MarkerSeverity",function(){return c.MarkerSeverity}),n.d(t,"MarkerTag",function(){return c.MarkerTag}),n.d(t,"Uri",function(){return c.Uri}),n.d(t,"Token",function(){return c.Token}),n.d(t,"editor",function(){return c.editor}),n.d(t,"languages",function(){return c.languages})}}]);
//# sourceMappingURL=4.dff91722.chunk.js.map